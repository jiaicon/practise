import{r as s,R as r,C as h,S as u,g as i,h as d}from"./arco-design.a1af654c.js";import"./index.bdc22923.js";/* empty css              *//* empty css               *//* empty css               */var p;(function(n){n[n.Connecting=0]="Connecting",n[n.Open=1]="Open",n[n.Closing=2]="Closing",n[n.Closed=3]="Closed"})(p||(p={}));const B=()=>{const[n,g]=s.exports.useState(),[l,C]=s.exports.useState(""),[c,a]=s.exports.useState(3),t=s.exports.useRef(),x=()=>{t.current=new WebSocket("ws://localhost:7003"),a(0),t.current.onerror=e=>{var o;console.log(e),a(((o=t.current)==null?void 0:o.readyState)||3)},t.current.onopen=e=>{var o;console.log("open: ",e),a(((o=t.current)==null?void 0:o.readyState)||1)},t.current.onmessage=e=>{console.log(e)},t.current.onclose=e=>{var o;a(((o=t.current)==null?void 0:o.readyState)||3)}},m=()=>{var e;if(c===1||!(l==null?void 0:l.length)){const o={userName:n,message:l};(e=t.current)==null||e.send(JSON.stringify(o))}},f=()=>{var e;c===1&&((e=t.current)==null||e.close())};return s.exports.useEffect(()=>()=>{var e;(e=t.current)==null||e.close()},[]),r.createElement(h,null,r.createElement(u,{direction:"vertical"},r.createElement(i,{placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u7528\u6237\u540D",disabled:c===1,onChange:e=>g(e)}),r.createElement(i,{placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",disabled:!(n==null?void 0:n.length)||c===3,addAfter:r.createElement("a",{onClick:m,style:{cursor:"pointer"}},"Send"),onChange:e=>C(e)}),r.createElement(u,null,r.createElement(d,{onClick:x,disabled:!(n==null?void 0:n.length)||c===1},c===3?"connect":"connecting"),r.createElement(d,{onClick:f,disabled:c===3},"close"))))};export{p as ReadyState,B as default};
