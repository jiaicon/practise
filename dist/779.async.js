(self.webpackChunk=self.webpackChunk||[]).push([[779],{25083:function(Ce){function Jt(F,N){(N==null||N>F.length)&&(N=F.length);for(var ct=0,K=new Array(N);ct<N;ct++)K[ct]=F[ct];return K}Ce.exports=Jt,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},70144:function(Ce){function Jt(F){if(Array.isArray(F))return F}Ce.exports=Jt,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},74193:function(Ce){function Jt(F,N){var ct=F==null?null:typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(ct!=null){var K=[],dt=!0,gt=!1,vt,it;try{for(ct=ct.call(F);!(dt=(vt=ct.next()).done)&&(K.push(vt.value),!(N&&K.length===N));dt=!0);}catch(et){gt=!0,it=et}finally{try{!dt&&ct.return!=null&&ct.return()}finally{if(gt)throw it}}return K}}Ce.exports=Jt,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},74695:function(Ce){function Jt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Ce.exports=Jt,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},66933:function(Ce,Jt,F){var N=F(70144),ct=F(74193),K=F(44801),dt=F(74695);function gt(vt,it){return N(vt)||ct(vt,it)||K(vt,it)||dt()}Ce.exports=gt,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},44801:function(Ce,Jt,F){var N=F(25083);function ct(K,dt){if(!!K){if(typeof K=="string")return N(K,dt);var gt=Object.prototype.toString.call(K).slice(8,-1);if(gt==="Object"&&K.constructor&&(gt=K.constructor.name),gt==="Map"||gt==="Set")return Array.from(K);if(gt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(gt))return N(K,dt)}}Ce.exports=ct,Ce.exports.__esModule=!0,Ce.exports.default=Ce.exports},79742:function(Ce,Jt){"use strict";Jt.byteLength=it,Jt.toByteArray=H,Jt.fromByteArray=G;for(var F=[],N=[],ct=typeof Uint8Array<"u"?Uint8Array:Array,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dt=0,gt=K.length;dt<gt;++dt)F[dt]=K[dt],N[K.charCodeAt(dt)]=dt;N["-".charCodeAt(0)]=62,N["_".charCodeAt(0)]=63;function vt(U){var W=U.length;if(W%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var lt=U.indexOf("=");lt===-1&&(lt=W);var g=lt===W?0:4-lt%4;return[lt,g]}function it(U){var W=vt(U),lt=W[0],g=W[1];return(lt+g)*3/4-g}function et(U,W,lt){return(W+lt)*3/4-lt}function H(U){var W,lt=vt(U),g=lt[0],j=lt[1],rt=new ct(et(U,g,j)),$=0,O=j>0?g-4:g,X;for(X=0;X<O;X+=4)W=N[U.charCodeAt(X)]<<18|N[U.charCodeAt(X+1)]<<12|N[U.charCodeAt(X+2)]<<6|N[U.charCodeAt(X+3)],rt[$++]=W>>16&255,rt[$++]=W>>8&255,rt[$++]=W&255;return j===2&&(W=N[U.charCodeAt(X)]<<2|N[U.charCodeAt(X+1)]>>4,rt[$++]=W&255),j===1&&(W=N[U.charCodeAt(X)]<<10|N[U.charCodeAt(X+1)]<<4|N[U.charCodeAt(X+2)]>>2,rt[$++]=W>>8&255,rt[$++]=W&255),rt}function J(U){return F[U>>18&63]+F[U>>12&63]+F[U>>6&63]+F[U&63]}function at(U,W,lt){for(var g,j=[],rt=W;rt<lt;rt+=3)g=(U[rt]<<16&16711680)+(U[rt+1]<<8&65280)+(U[rt+2]&255),j.push(J(g));return j.join("")}function G(U){for(var W,lt=U.length,g=lt%3,j=[],rt=16383,$=0,O=lt-g;$<O;$+=rt)j.push(at(U,$,$+rt>O?O:$+rt));return g===1?(W=U[lt-1],j.push(F[W>>2]+F[W<<4&63]+"==")):g===2&&(W=(U[lt-2]<<8)+U[lt-1],j.push(F[W>>10]+F[W>>4&63]+F[W<<2&63]+"=")),j.join("")}},48764:function(Ce,Jt,F){"use strict";var N=F(79742),ct=F(80645),K=F(5826);Jt.Buffer=it,Jt.SlowBuffer=j,Jt.INSPECT_MAX_BYTES=50,it.TYPED_ARRAY_SUPPORT=F.g.TYPED_ARRAY_SUPPORT!==void 0?F.g.TYPED_ARRAY_SUPPORT:dt(),Jt.kMaxLength=gt();function dt(){try{var Ft=new Uint8Array(1);return Ft.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},Ft.foo()===42&&typeof Ft.subarray=="function"&&Ft.subarray(1,1).byteLength===0}catch{return!1}}function gt(){return it.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function vt(Ft,Tt){if(gt()<Tt)throw new RangeError("Invalid typed array length");return it.TYPED_ARRAY_SUPPORT?(Ft=new Uint8Array(Tt),Ft.__proto__=it.prototype):(Ft===null&&(Ft=new it(Tt)),Ft.length=Tt),Ft}function it(Ft,Tt,At){if(!it.TYPED_ARRAY_SUPPORT&&!(this instanceof it))return new it(Ft,Tt,At);if(typeof Ft=="number"){if(typeof Tt=="string")throw new Error("If encoding is specified then the first argument must be a string");return at(this,Ft)}return et(this,Ft,Tt,At)}it.poolSize=8192,it._augment=function(Ft){return Ft.__proto__=it.prototype,Ft};function et(Ft,Tt,At,Kt){if(typeof Tt=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&Tt instanceof ArrayBuffer?W(Ft,Tt,At,Kt):typeof Tt=="string"?G(Ft,Tt,At):lt(Ft,Tt)}it.from=function(Ft,Tt,At){return et(null,Ft,Tt,At)},it.TYPED_ARRAY_SUPPORT&&(it.prototype.__proto__=Uint8Array.prototype,it.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&it[Symbol.species]===it&&Object.defineProperty(it,Symbol.species,{value:null,configurable:!0}));function H(Ft){if(typeof Ft!="number")throw new TypeError('"size" argument must be a number');if(Ft<0)throw new RangeError('"size" argument must not be negative')}function J(Ft,Tt,At,Kt){return H(Tt),Tt<=0?vt(Ft,Tt):At!==void 0?typeof Kt=="string"?vt(Ft,Tt).fill(At,Kt):vt(Ft,Tt).fill(At):vt(Ft,Tt)}it.alloc=function(Ft,Tt,At){return J(null,Ft,Tt,At)};function at(Ft,Tt){if(H(Tt),Ft=vt(Ft,Tt<0?0:g(Tt)|0),!it.TYPED_ARRAY_SUPPORT)for(var At=0;At<Tt;++At)Ft[At]=0;return Ft}it.allocUnsafe=function(Ft){return at(null,Ft)},it.allocUnsafeSlow=function(Ft){return at(null,Ft)};function G(Ft,Tt,At){if((typeof At!="string"||At==="")&&(At="utf8"),!it.isEncoding(At))throw new TypeError('"encoding" must be a valid string encoding');var Kt=rt(Tt,At)|0;Ft=vt(Ft,Kt);var pe=Ft.write(Tt,At);return pe!==Kt&&(Ft=Ft.slice(0,pe)),Ft}function U(Ft,Tt){var At=Tt.length<0?0:g(Tt.length)|0;Ft=vt(Ft,At);for(var Kt=0;Kt<At;Kt+=1)Ft[Kt]=Tt[Kt]&255;return Ft}function W(Ft,Tt,At,Kt){if(Tt.byteLength,At<0||Tt.byteLength<At)throw new RangeError("'offset' is out of bounds");if(Tt.byteLength<At+(Kt||0))throw new RangeError("'length' is out of bounds");return At===void 0&&Kt===void 0?Tt=new Uint8Array(Tt):Kt===void 0?Tt=new Uint8Array(Tt,At):Tt=new Uint8Array(Tt,At,Kt),it.TYPED_ARRAY_SUPPORT?(Ft=Tt,Ft.__proto__=it.prototype):Ft=U(Ft,Tt),Ft}function lt(Ft,Tt){if(it.isBuffer(Tt)){var At=g(Tt.length)|0;return Ft=vt(Ft,At),Ft.length===0||Tt.copy(Ft,0,0,At),Ft}if(Tt){if(typeof ArrayBuffer<"u"&&Tt.buffer instanceof ArrayBuffer||"length"in Tt)return typeof Tt.length!="number"||Be(Tt.length)?vt(Ft,0):U(Ft,Tt);if(Tt.type==="Buffer"&&K(Tt.data))return U(Ft,Tt.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(Ft){if(Ft>=gt())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gt().toString(16)+" bytes");return Ft|0}function j(Ft){return+Ft!=Ft&&(Ft=0),it.alloc(+Ft)}it.isBuffer=function(Tt){return!!(Tt!=null&&Tt._isBuffer)},it.compare=function(Tt,At){if(!it.isBuffer(Tt)||!it.isBuffer(At))throw new TypeError("Arguments must be Buffers");if(Tt===At)return 0;for(var Kt=Tt.length,pe=At.length,Oe=0,Pe=Math.min(Kt,pe);Oe<Pe;++Oe)if(Tt[Oe]!==At[Oe]){Kt=Tt[Oe],pe=At[Oe];break}return Kt<pe?-1:pe<Kt?1:0},it.isEncoding=function(Tt){switch(String(Tt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},it.concat=function(Tt,At){if(!K(Tt))throw new TypeError('"list" argument must be an Array of Buffers');if(Tt.length===0)return it.alloc(0);var Kt;if(At===void 0)for(At=0,Kt=0;Kt<Tt.length;++Kt)At+=Tt[Kt].length;var pe=it.allocUnsafe(At),Oe=0;for(Kt=0;Kt<Tt.length;++Kt){var Pe=Tt[Kt];if(!it.isBuffer(Pe))throw new TypeError('"list" argument must be an Array of Buffers');Pe.copy(pe,Oe),Oe+=Pe.length}return pe};function rt(Ft,Tt){if(it.isBuffer(Ft))return Ft.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(Ft)||Ft instanceof ArrayBuffer))return Ft.byteLength;typeof Ft!="string"&&(Ft=""+Ft);var At=Ft.length;if(At===0)return 0;for(var Kt=!1;;)switch(Tt){case"ascii":case"latin1":case"binary":return At;case"utf8":case"utf-8":case void 0:return Ht(Ft).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return At*2;case"hex":return At>>>1;case"base64":return De(Ft).length;default:if(Kt)return Ht(Ft).length;Tt=(""+Tt).toLowerCase(),Kt=!0}}it.byteLength=rt;function $(Ft,Tt,At){var Kt=!1;if((Tt===void 0||Tt<0)&&(Tt=0),Tt>this.length||((At===void 0||At>this.length)&&(At=this.length),At<=0)||(At>>>=0,Tt>>>=0,At<=Tt))return"";for(Ft||(Ft="utf8");;)switch(Ft){case"hex":return ot(this,Tt,At);case"utf8":case"utf-8":return A(this,Tt,At);case"ascii":return z(this,Tt,At);case"latin1":case"binary":return ut(this,Tt,At);case"base64":return T(this,Tt,At);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ht(this,Tt,At);default:if(Kt)throw new TypeError("Unknown encoding: "+Ft);Ft=(Ft+"").toLowerCase(),Kt=!0}}it.prototype._isBuffer=!0;function O(Ft,Tt,At){var Kt=Ft[Tt];Ft[Tt]=Ft[At],Ft[At]=Kt}it.prototype.swap16=function(){var Tt=this.length;if(Tt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var At=0;At<Tt;At+=2)O(this,At,At+1);return this},it.prototype.swap32=function(){var Tt=this.length;if(Tt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var At=0;At<Tt;At+=4)O(this,At,At+3),O(this,At+1,At+2);return this},it.prototype.swap64=function(){var Tt=this.length;if(Tt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var At=0;At<Tt;At+=8)O(this,At,At+7),O(this,At+1,At+6),O(this,At+2,At+5),O(this,At+3,At+4);return this},it.prototype.toString=function(){var Tt=this.length|0;return Tt===0?"":arguments.length===0?A(this,0,Tt):$.apply(this,arguments)},it.prototype.equals=function(Tt){if(!it.isBuffer(Tt))throw new TypeError("Argument must be a Buffer");return this===Tt?!0:it.compare(this,Tt)===0},it.prototype.inspect=function(){var Tt="",At=Jt.INSPECT_MAX_BYTES;return this.length>0&&(Tt=this.toString("hex",0,At).match(/.{2}/g).join(" "),this.length>At&&(Tt+=" ... ")),"<Buffer "+Tt+">"},it.prototype.compare=function(Tt,At,Kt,pe,Oe){if(!it.isBuffer(Tt))throw new TypeError("Argument must be a Buffer");if(At===void 0&&(At=0),Kt===void 0&&(Kt=Tt?Tt.length:0),pe===void 0&&(pe=0),Oe===void 0&&(Oe=this.length),At<0||Kt>Tt.length||pe<0||Oe>this.length)throw new RangeError("out of range index");if(pe>=Oe&&At>=Kt)return 0;if(pe>=Oe)return-1;if(At>=Kt)return 1;if(At>>>=0,Kt>>>=0,pe>>>=0,Oe>>>=0,this===Tt)return 0;for(var Pe=Oe-pe,vr=Kt-At,Lr=Math.min(Pe,vr),nr=this.slice(pe,Oe),qe=Tt.slice(At,Kt),lr=0;lr<Lr;++lr)if(nr[lr]!==qe[lr]){Pe=nr[lr],vr=qe[lr];break}return Pe<vr?-1:vr<Pe?1:0};function X(Ft,Tt,At,Kt,pe){if(Ft.length===0)return-1;if(typeof At=="string"?(Kt=At,At=0):At>2147483647?At=2147483647:At<-2147483648&&(At=-2147483648),At=+At,isNaN(At)&&(At=pe?0:Ft.length-1),At<0&&(At=Ft.length+At),At>=Ft.length){if(pe)return-1;At=Ft.length-1}else if(At<0)if(pe)At=0;else return-1;if(typeof Tt=="string"&&(Tt=it.from(Tt,Kt)),it.isBuffer(Tt))return Tt.length===0?-1:Q(Ft,Tt,At,Kt,pe);if(typeof Tt=="number")return Tt=Tt&255,it.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?pe?Uint8Array.prototype.indexOf.call(Ft,Tt,At):Uint8Array.prototype.lastIndexOf.call(Ft,Tt,At):Q(Ft,[Tt],At,Kt,pe);throw new TypeError("val must be string, number or Buffer")}function Q(Ft,Tt,At,Kt,pe){var Oe=1,Pe=Ft.length,vr=Tt.length;if(Kt!==void 0&&(Kt=String(Kt).toLowerCase(),Kt==="ucs2"||Kt==="ucs-2"||Kt==="utf16le"||Kt==="utf-16le")){if(Ft.length<2||Tt.length<2)return-1;Oe=2,Pe/=2,vr/=2,At/=2}function Lr(le,we){return Oe===1?le[we]:le.readUInt16BE(we*Oe)}var nr;if(pe){var qe=-1;for(nr=At;nr<Pe;nr++)if(Lr(Ft,nr)===Lr(Tt,qe===-1?0:nr-qe)){if(qe===-1&&(qe=nr),nr-qe+1===vr)return qe*Oe}else qe!==-1&&(nr-=nr-qe),qe=-1}else for(At+vr>Pe&&(At=Pe-vr),nr=At;nr>=0;nr--){for(var lr=!0,Yt=0;Yt<vr;Yt++)if(Lr(Ft,nr+Yt)!==Lr(Tt,Yt)){lr=!1;break}if(lr)return nr}return-1}it.prototype.includes=function(Tt,At,Kt){return this.indexOf(Tt,At,Kt)!==-1},it.prototype.indexOf=function(Tt,At,Kt){return X(this,Tt,At,Kt,!0)},it.prototype.lastIndexOf=function(Tt,At,Kt){return X(this,Tt,At,Kt,!1)};function k(Ft,Tt,At,Kt){At=Number(At)||0;var pe=Ft.length-At;Kt?(Kt=Number(Kt),Kt>pe&&(Kt=pe)):Kt=pe;var Oe=Tt.length;if(Oe%2!==0)throw new TypeError("Invalid hex string");Kt>Oe/2&&(Kt=Oe/2);for(var Pe=0;Pe<Kt;++Pe){var vr=parseInt(Tt.substr(Pe*2,2),16);if(isNaN(vr))return Pe;Ft[At+Pe]=vr}return Pe}function V(Ft,Tt,At,Kt){return Se(Ht(Tt,Ft.length-At),Ft,At,Kt)}function I(Ft,Tt,At,Kt){return Se($t(Tt),Ft,At,Kt)}function D(Ft,Tt,At,Kt){return I(Ft,Tt,At,Kt)}function C(Ft,Tt,At,Kt){return Se(De(Tt),Ft,At,Kt)}function M(Ft,Tt,At,Kt){return Se(ee(Tt,Ft.length-At),Ft,At,Kt)}it.prototype.write=function(Tt,At,Kt,pe){if(At===void 0)pe="utf8",Kt=this.length,At=0;else if(Kt===void 0&&typeof At=="string")pe=At,Kt=this.length,At=0;else if(isFinite(At))At=At|0,isFinite(Kt)?(Kt=Kt|0,pe===void 0&&(pe="utf8")):(pe=Kt,Kt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Oe=this.length-At;if((Kt===void 0||Kt>Oe)&&(Kt=Oe),Tt.length>0&&(Kt<0||At<0)||At>this.length)throw new RangeError("Attempt to write outside buffer bounds");pe||(pe="utf8");for(var Pe=!1;;)switch(pe){case"hex":return k(this,Tt,At,Kt);case"utf8":case"utf-8":return V(this,Tt,At,Kt);case"ascii":return I(this,Tt,At,Kt);case"latin1":case"binary":return D(this,Tt,At,Kt);case"base64":return C(this,Tt,At,Kt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,Tt,At,Kt);default:if(Pe)throw new TypeError("Unknown encoding: "+pe);pe=(""+pe).toLowerCase(),Pe=!0}},it.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(Ft,Tt,At){return Tt===0&&At===Ft.length?N.fromByteArray(Ft):N.fromByteArray(Ft.slice(Tt,At))}function A(Ft,Tt,At){At=Math.min(Ft.length,At);for(var Kt=[],pe=Tt;pe<At;){var Oe=Ft[pe],Pe=null,vr=Oe>239?4:Oe>223?3:Oe>191?2:1;if(pe+vr<=At){var Lr,nr,qe,lr;switch(vr){case 1:Oe<128&&(Pe=Oe);break;case 2:Lr=Ft[pe+1],(Lr&192)===128&&(lr=(Oe&31)<<6|Lr&63,lr>127&&(Pe=lr));break;case 3:Lr=Ft[pe+1],nr=Ft[pe+2],(Lr&192)===128&&(nr&192)===128&&(lr=(Oe&15)<<12|(Lr&63)<<6|nr&63,lr>2047&&(lr<55296||lr>57343)&&(Pe=lr));break;case 4:Lr=Ft[pe+1],nr=Ft[pe+2],qe=Ft[pe+3],(Lr&192)===128&&(nr&192)===128&&(qe&192)===128&&(lr=(Oe&15)<<18|(Lr&63)<<12|(nr&63)<<6|qe&63,lr>65535&&lr<1114112&&(Pe=lr))}}Pe===null?(Pe=65533,vr=1):Pe>65535&&(Pe-=65536,Kt.push(Pe>>>10&1023|55296),Pe=56320|Pe&1023),Kt.push(Pe),pe+=vr}return Z(Kt)}var L=4096;function Z(Ft){var Tt=Ft.length;if(Tt<=L)return String.fromCharCode.apply(String,Ft);for(var At="",Kt=0;Kt<Tt;)At+=String.fromCharCode.apply(String,Ft.slice(Kt,Kt+=L));return At}function z(Ft,Tt,At){var Kt="";At=Math.min(Ft.length,At);for(var pe=Tt;pe<At;++pe)Kt+=String.fromCharCode(Ft[pe]&127);return Kt}function ut(Ft,Tt,At){var Kt="";At=Math.min(Ft.length,At);for(var pe=Tt;pe<At;++pe)Kt+=String.fromCharCode(Ft[pe]);return Kt}function ot(Ft,Tt,At){var Kt=Ft.length;(!Tt||Tt<0)&&(Tt=0),(!At||At<0||At>Kt)&&(At=Kt);for(var pe="",Oe=Tt;Oe<At;++Oe)pe+=Bt(Ft[Oe]);return pe}function ht(Ft,Tt,At){for(var Kt=Ft.slice(Tt,At),pe="",Oe=0;Oe<Kt.length;Oe+=2)pe+=String.fromCharCode(Kt[Oe]+Kt[Oe+1]*256);return pe}it.prototype.slice=function(Tt,At){var Kt=this.length;Tt=~~Tt,At=At===void 0?Kt:~~At,Tt<0?(Tt+=Kt,Tt<0&&(Tt=0)):Tt>Kt&&(Tt=Kt),At<0?(At+=Kt,At<0&&(At=0)):At>Kt&&(At=Kt),At<Tt&&(At=Tt);var pe;if(it.TYPED_ARRAY_SUPPORT)pe=this.subarray(Tt,At),pe.__proto__=it.prototype;else{var Oe=At-Tt;pe=new it(Oe,void 0);for(var Pe=0;Pe<Oe;++Pe)pe[Pe]=this[Pe+Tt]}return pe};function tt(Ft,Tt,At){if(Ft%1!==0||Ft<0)throw new RangeError("offset is not uint");if(Ft+Tt>At)throw new RangeError("Trying to access beyond buffer length")}it.prototype.readUIntLE=function(Tt,At,Kt){Tt=Tt|0,At=At|0,Kt||tt(Tt,At,this.length);for(var pe=this[Tt],Oe=1,Pe=0;++Pe<At&&(Oe*=256);)pe+=this[Tt+Pe]*Oe;return pe},it.prototype.readUIntBE=function(Tt,At,Kt){Tt=Tt|0,At=At|0,Kt||tt(Tt,At,this.length);for(var pe=this[Tt+--At],Oe=1;At>0&&(Oe*=256);)pe+=this[Tt+--At]*Oe;return pe},it.prototype.readUInt8=function(Tt,At){return At||tt(Tt,1,this.length),this[Tt]},it.prototype.readUInt16LE=function(Tt,At){return At||tt(Tt,2,this.length),this[Tt]|this[Tt+1]<<8},it.prototype.readUInt16BE=function(Tt,At){return At||tt(Tt,2,this.length),this[Tt]<<8|this[Tt+1]},it.prototype.readUInt32LE=function(Tt,At){return At||tt(Tt,4,this.length),(this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16)+this[Tt+3]*16777216},it.prototype.readUInt32BE=function(Tt,At){return At||tt(Tt,4,this.length),this[Tt]*16777216+(this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3])},it.prototype.readIntLE=function(Tt,At,Kt){Tt=Tt|0,At=At|0,Kt||tt(Tt,At,this.length);for(var pe=this[Tt],Oe=1,Pe=0;++Pe<At&&(Oe*=256);)pe+=this[Tt+Pe]*Oe;return Oe*=128,pe>=Oe&&(pe-=Math.pow(2,8*At)),pe},it.prototype.readIntBE=function(Tt,At,Kt){Tt=Tt|0,At=At|0,Kt||tt(Tt,At,this.length);for(var pe=At,Oe=1,Pe=this[Tt+--pe];pe>0&&(Oe*=256);)Pe+=this[Tt+--pe]*Oe;return Oe*=128,Pe>=Oe&&(Pe-=Math.pow(2,8*At)),Pe},it.prototype.readInt8=function(Tt,At){return At||tt(Tt,1,this.length),this[Tt]&128?(255-this[Tt]+1)*-1:this[Tt]},it.prototype.readInt16LE=function(Tt,At){At||tt(Tt,2,this.length);var Kt=this[Tt]|this[Tt+1]<<8;return Kt&32768?Kt|4294901760:Kt},it.prototype.readInt16BE=function(Tt,At){At||tt(Tt,2,this.length);var Kt=this[Tt+1]|this[Tt]<<8;return Kt&32768?Kt|4294901760:Kt},it.prototype.readInt32LE=function(Tt,At){return At||tt(Tt,4,this.length),this[Tt]|this[Tt+1]<<8|this[Tt+2]<<16|this[Tt+3]<<24},it.prototype.readInt32BE=function(Tt,At){return At||tt(Tt,4,this.length),this[Tt]<<24|this[Tt+1]<<16|this[Tt+2]<<8|this[Tt+3]},it.prototype.readFloatLE=function(Tt,At){return At||tt(Tt,4,this.length),ct.read(this,Tt,!0,23,4)},it.prototype.readFloatBE=function(Tt,At){return At||tt(Tt,4,this.length),ct.read(this,Tt,!1,23,4)},it.prototype.readDoubleLE=function(Tt,At){return At||tt(Tt,8,this.length),ct.read(this,Tt,!0,52,8)},it.prototype.readDoubleBE=function(Tt,At){return At||tt(Tt,8,this.length),ct.read(this,Tt,!1,52,8)};function ft(Ft,Tt,At,Kt,pe,Oe){if(!it.isBuffer(Ft))throw new TypeError('"buffer" argument must be a Buffer instance');if(Tt>pe||Tt<Oe)throw new RangeError('"value" argument is out of bounds');if(At+Kt>Ft.length)throw new RangeError("Index out of range")}it.prototype.writeUIntLE=function(Tt,At,Kt,pe){if(Tt=+Tt,At=At|0,Kt=Kt|0,!pe){var Oe=Math.pow(2,8*Kt)-1;ft(this,Tt,At,Kt,Oe,0)}var Pe=1,vr=0;for(this[At]=Tt&255;++vr<Kt&&(Pe*=256);)this[At+vr]=Tt/Pe&255;return At+Kt},it.prototype.writeUIntBE=function(Tt,At,Kt,pe){if(Tt=+Tt,At=At|0,Kt=Kt|0,!pe){var Oe=Math.pow(2,8*Kt)-1;ft(this,Tt,At,Kt,Oe,0)}var Pe=Kt-1,vr=1;for(this[At+Pe]=Tt&255;--Pe>=0&&(vr*=256);)this[At+Pe]=Tt/vr&255;return At+Kt},it.prototype.writeUInt8=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,1,255,0),it.TYPED_ARRAY_SUPPORT||(Tt=Math.floor(Tt)),this[At]=Tt&255,At+1};function St(Ft,Tt,At,Kt){Tt<0&&(Tt=65535+Tt+1);for(var pe=0,Oe=Math.min(Ft.length-At,2);pe<Oe;++pe)Ft[At+pe]=(Tt&255<<8*(Kt?pe:1-pe))>>>(Kt?pe:1-pe)*8}it.prototype.writeUInt16LE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,2,65535,0),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt&255,this[At+1]=Tt>>>8):St(this,Tt,At,!0),At+2},it.prototype.writeUInt16BE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,2,65535,0),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt>>>8,this[At+1]=Tt&255):St(this,Tt,At,!1),At+2};function st(Ft,Tt,At,Kt){Tt<0&&(Tt=4294967295+Tt+1);for(var pe=0,Oe=Math.min(Ft.length-At,4);pe<Oe;++pe)Ft[At+pe]=Tt>>>(Kt?pe:3-pe)*8&255}it.prototype.writeUInt32LE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,4,4294967295,0),it.TYPED_ARRAY_SUPPORT?(this[At+3]=Tt>>>24,this[At+2]=Tt>>>16,this[At+1]=Tt>>>8,this[At]=Tt&255):st(this,Tt,At,!0),At+4},it.prototype.writeUInt32BE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,4,4294967295,0),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt>>>24,this[At+1]=Tt>>>16,this[At+2]=Tt>>>8,this[At+3]=Tt&255):st(this,Tt,At,!1),At+4},it.prototype.writeIntLE=function(Tt,At,Kt,pe){if(Tt=+Tt,At=At|0,!pe){var Oe=Math.pow(2,8*Kt-1);ft(this,Tt,At,Kt,Oe-1,-Oe)}var Pe=0,vr=1,Lr=0;for(this[At]=Tt&255;++Pe<Kt&&(vr*=256);)Tt<0&&Lr===0&&this[At+Pe-1]!==0&&(Lr=1),this[At+Pe]=(Tt/vr>>0)-Lr&255;return At+Kt},it.prototype.writeIntBE=function(Tt,At,Kt,pe){if(Tt=+Tt,At=At|0,!pe){var Oe=Math.pow(2,8*Kt-1);ft(this,Tt,At,Kt,Oe-1,-Oe)}var Pe=Kt-1,vr=1,Lr=0;for(this[At+Pe]=Tt&255;--Pe>=0&&(vr*=256);)Tt<0&&Lr===0&&this[At+Pe+1]!==0&&(Lr=1),this[At+Pe]=(Tt/vr>>0)-Lr&255;return At+Kt},it.prototype.writeInt8=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,1,127,-128),it.TYPED_ARRAY_SUPPORT||(Tt=Math.floor(Tt)),Tt<0&&(Tt=255+Tt+1),this[At]=Tt&255,At+1},it.prototype.writeInt16LE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,2,32767,-32768),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt&255,this[At+1]=Tt>>>8):St(this,Tt,At,!0),At+2},it.prototype.writeInt16BE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,2,32767,-32768),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt>>>8,this[At+1]=Tt&255):St(this,Tt,At,!1),At+2},it.prototype.writeInt32LE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,4,2147483647,-2147483648),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt&255,this[At+1]=Tt>>>8,this[At+2]=Tt>>>16,this[At+3]=Tt>>>24):st(this,Tt,At,!0),At+4},it.prototype.writeInt32BE=function(Tt,At,Kt){return Tt=+Tt,At=At|0,Kt||ft(this,Tt,At,4,2147483647,-2147483648),Tt<0&&(Tt=4294967295+Tt+1),it.TYPED_ARRAY_SUPPORT?(this[At]=Tt>>>24,this[At+1]=Tt>>>16,this[At+2]=Tt>>>8,this[At+3]=Tt&255):st(this,Tt,At,!1),At+4};function xt(Ft,Tt,At,Kt,pe,Oe){if(At+Kt>Ft.length)throw new RangeError("Index out of range");if(At<0)throw new RangeError("Index out of range")}function wt(Ft,Tt,At,Kt,pe){return pe||xt(Ft,Tt,At,4,34028234663852886e22,-34028234663852886e22),ct.write(Ft,Tt,At,Kt,23,4),At+4}it.prototype.writeFloatLE=function(Tt,At,Kt){return wt(this,Tt,At,!0,Kt)},it.prototype.writeFloatBE=function(Tt,At,Kt){return wt(this,Tt,At,!1,Kt)};function Dt(Ft,Tt,At,Kt,pe){return pe||xt(Ft,Tt,At,8,17976931348623157e292,-17976931348623157e292),ct.write(Ft,Tt,At,Kt,52,8),At+8}it.prototype.writeDoubleLE=function(Tt,At,Kt){return Dt(this,Tt,At,!0,Kt)},it.prototype.writeDoubleBE=function(Tt,At,Kt){return Dt(this,Tt,At,!1,Kt)},it.prototype.copy=function(Tt,At,Kt,pe){if(Kt||(Kt=0),!pe&&pe!==0&&(pe=this.length),At>=Tt.length&&(At=Tt.length),At||(At=0),pe>0&&pe<Kt&&(pe=Kt),pe===Kt||Tt.length===0||this.length===0)return 0;if(At<0)throw new RangeError("targetStart out of bounds");if(Kt<0||Kt>=this.length)throw new RangeError("sourceStart out of bounds");if(pe<0)throw new RangeError("sourceEnd out of bounds");pe>this.length&&(pe=this.length),Tt.length-At<pe-Kt&&(pe=Tt.length-At+Kt);var Oe=pe-Kt,Pe;if(this===Tt&&Kt<At&&At<pe)for(Pe=Oe-1;Pe>=0;--Pe)Tt[Pe+At]=this[Pe+Kt];else if(Oe<1e3||!it.TYPED_ARRAY_SUPPORT)for(Pe=0;Pe<Oe;++Pe)Tt[Pe+At]=this[Pe+Kt];else Uint8Array.prototype.set.call(Tt,this.subarray(Kt,Kt+Oe),At);return Oe},it.prototype.fill=function(Tt,At,Kt,pe){if(typeof Tt=="string"){if(typeof At=="string"?(pe=At,At=0,Kt=this.length):typeof Kt=="string"&&(pe=Kt,Kt=this.length),Tt.length===1){var Oe=Tt.charCodeAt(0);Oe<256&&(Tt=Oe)}if(pe!==void 0&&typeof pe!="string")throw new TypeError("encoding must be a string");if(typeof pe=="string"&&!it.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe)}else typeof Tt=="number"&&(Tt=Tt&255);if(At<0||this.length<At||this.length<Kt)throw new RangeError("Out of range index");if(Kt<=At)return this;At=At>>>0,Kt=Kt===void 0?this.length:Kt>>>0,Tt||(Tt=0);var Pe;if(typeof Tt=="number")for(Pe=At;Pe<Kt;++Pe)this[Pe]=Tt;else{var vr=it.isBuffer(Tt)?Tt:Ht(new it(Tt,pe).toString()),Lr=vr.length;for(Pe=0;Pe<Kt-At;++Pe)this[Pe+At]=vr[Pe%Lr]}return this};var It=/[^+\/0-9A-Za-z-_]/g;function Et(Ft){if(Ft=zt(Ft).replace(It,""),Ft.length<2)return"";for(;Ft.length%4!==0;)Ft=Ft+"=";return Ft}function zt(Ft){return Ft.trim?Ft.trim():Ft.replace(/^\s+|\s+$/g,"")}function Bt(Ft){return Ft<16?"0"+Ft.toString(16):Ft.toString(16)}function Ht(Ft,Tt){Tt=Tt||1/0;for(var At,Kt=Ft.length,pe=null,Oe=[],Pe=0;Pe<Kt;++Pe){if(At=Ft.charCodeAt(Pe),At>55295&&At<57344){if(!pe){if(At>56319){(Tt-=3)>-1&&Oe.push(239,191,189);continue}else if(Pe+1===Kt){(Tt-=3)>-1&&Oe.push(239,191,189);continue}pe=At;continue}if(At<56320){(Tt-=3)>-1&&Oe.push(239,191,189),pe=At;continue}At=(pe-55296<<10|At-56320)+65536}else pe&&(Tt-=3)>-1&&Oe.push(239,191,189);if(pe=null,At<128){if((Tt-=1)<0)break;Oe.push(At)}else if(At<2048){if((Tt-=2)<0)break;Oe.push(At>>6|192,At&63|128)}else if(At<65536){if((Tt-=3)<0)break;Oe.push(At>>12|224,At>>6&63|128,At&63|128)}else if(At<1114112){if((Tt-=4)<0)break;Oe.push(At>>18|240,At>>12&63|128,At>>6&63|128,At&63|128)}else throw new Error("Invalid code point")}return Oe}function $t(Ft){for(var Tt=[],At=0;At<Ft.length;++At)Tt.push(Ft.charCodeAt(At)&255);return Tt}function ee(Ft,Tt){for(var At,Kt,pe,Oe=[],Pe=0;Pe<Ft.length&&!((Tt-=2)<0);++Pe)At=Ft.charCodeAt(Pe),Kt=At>>8,pe=At%256,Oe.push(pe),Oe.push(Kt);return Oe}function De(Ft){return N.toByteArray(Et(Ft))}function Se(Ft,Tt,At,Kt){for(var pe=0;pe<Kt&&!(pe+At>=Tt.length||pe>=Ft.length);++pe)Tt[pe+At]=Ft[pe];return pe}function Be(Ft){return Ft!==Ft}},92322:function(Ce,Jt,F){"use strict";var N=F(78670),ct=F(68023),K=F(81615),dt=F(70012),gt=F(27240),vt=F(87164);(0,ct.D)([dt.N,gt.N]);var it={init:function(){return K.S1.apply(null,arguments)}};(0,ct.D)(vt.T);function et(t,i,l){typeof i=="object"&&(l=i,i=null);var f=this,c;if(!(t instanceof Function)){c=[];for(var p in t)t.hasOwnProperty(p)&&c.push(p)}var y=function(w){if(f.apply(this,arguments),t instanceof Function?H(this,t.call(this,w)):J(this,t,c),this.constructor===y)for(var E=y.__initializers__,B=0;B<E.length;B++)E[B].apply(this,arguments)};y.__super__=f,f.__initializers__?y.__initializers__=f.__initializers__.slice():y.__initializers__=[],i&&y.__initializers__.push(i);var x=function(){};return x.prototype=f.prototype,y.prototype=new x,y.prototype.constructor=y,H(y.prototype,l),y.extend=f.extend,y.derive=f.extend,y}function H(t,i){if(!!i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l])}function J(t,i,l){for(var f=0;f<l.length;f++){var c=l[f];t[c]=i[c]}}var at={extend:et,derive:et};function G(t,i){this.action=t,this.context=i}var U={trigger:function(t){if(!!this.hasOwnProperty("__handlers__")&&!!this.__handlers__.hasOwnProperty(t)){var i=this.__handlers__[t],l=i.length,f=-1,c=arguments;switch(c.length){case 1:for(;++f<l;)i[f].action.call(i[f].context);return;case 2:for(;++f<l;)i[f].action.call(i[f].context,c[1]);return;case 3:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2]);return;case 4:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2],c[3]);return;case 5:for(;++f<l;)i[f].action.call(i[f].context,c[1],c[2],c[3],c[4]);return;default:for(;++f<l;)i[f].action.apply(i[f].context,Array.prototype.slice.call(c,1));return}}},on:function(t,i,l){if(!(!t||!i)){var f=this.__handlers__||(this.__handlers__={});if(!f[t])f[t]=[];else if(this.has(t,i))return;var c=new G(i,l||this);return f[t].push(c),this}},once:function(t,i,l){if(!t||!i)return;var f=this;function c(){f.off(t,c),i.apply(this,arguments)}return this.on(t,c,l)},before:function(t,i,l){if(!(!t||!i))return t="before"+t,this.on(t,i,l)},after:function(t,i,l){if(!(!t||!i))return t="after"+t,this.on(t,i,l)},success:function(t,i){return this.once("success",t,i)},error:function(t,i){return this.once("error",t,i)},off:function(t,i){var l=this.__handlers__||(this.__handlers__={});if(!i){l[t]=[];return}if(l[t]){for(var f=l[t],c=[],p=0;p<f.length;p++)i&&f[p].action!==i&&c.push(f[p]);l[t]=c}return this},has:function(t,i){var l=this.__handlers__;if(!l||!l[t])return!1;for(var f=l[t],c=0;c<f.length;c++)if(f[c].action===i)return!0}},W=U,lt=0,g=Array.prototype,j=g.forEach,rt={genGUID:function(){return++lt},relative2absolute:function(t,i){if(!i||t.match(/^\//))return t;for(var l=t.split("/"),f=i.split("/"),c=l[0];c==="."||c==="..";)c===".."&&f.pop(),l.shift(),c=l[0];return f.join("/")+"/"+l.join("/")},extend:function(t,i){if(i)for(var l in i)i.hasOwnProperty(l)&&(t[l]=i[l]);return t},defaults:function(t,i){if(i)for(var l in i)t[l]===void 0&&(t[l]=i[l]);return t},extendWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var c=l[f];t[c]=i[c]}return t},defaultsWithPropList:function(t,i,l){if(i)for(var f=0;f<l.length;f++){var c=l[f];t[c]==null&&(t[c]=i[c])}return t},each:function(t,i,l){if(!!(t&&i))if(t.forEach&&t.forEach===j)t.forEach(i,l);else if(t.length===+t.length)for(var f=0,c=t.length;f<c;f++)i.call(l,t[f],f,t);else for(var p in t)t.hasOwnProperty(p)&&i.call(l,t[p],p,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return t?t.length===+t.length:!1},clone:function(t){if(rt.isObject(t)){if(rt.isArray(t))return t.slice();if(rt.isArrayLike(t)){for(var i=new t.constructor(t.length),l=0;l<t.length;l++)i[l]=t[l];return i}else return rt.extend({},t)}else return t}},$=rt,O=function(){this.__uid__=$.genGUID()};O.__initializers__=[function(t){$.extend(this,t)}],$.extend(O,at),$.extend(O.prototype,W);var X=O,Q=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],k=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function V(t){for(var i={},l={},f=0;f<Q.length;f++){var c=Q[f];y(c)}for(var f=0;f<k.length;f++){var p=k[f];l[p]=t.getParameter(t[p])}this.getExtension=function(x){return x in i||y(x),i[x]},this.getParameter=function(x){return l[x]};function y(x){if(t.getExtension){var w=t.getExtension(x);w||(w=t.getExtension("MOZ_"+x)),w||(w=t.getExtension("WEBKIT_"+x)),i[x]=w}}}var I=V,D={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444};function C(t){var i=new XMLHttpRequest;i.open("get",t.url),i.responseType=t.responseType||"text",t.onprogress&&(i.onprogress=function(l){if(l.lengthComputable){var f=l.loaded/l.total;t.onprogress(f,l.loaded,l.total)}else t.onprogress(null)}),i.onload=function(l){i.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(i.response)},t.onerror&&(i.onerror=t.onerror),i.send(null)}var M={get:C},T,A={};A.supportWebGL=function(){if(T==null)try{var t=document.createElement("canvas"),i=t.getContext("webgl")||t.getContext("experimental-webgl");if(!i)throw new Error}catch{T=!1}return T},A.Int8Array=typeof Int8Array>"u"?Array:Int8Array,A.Uint8Array=typeof Uint8Array>"u"?Array:Uint8Array,A.Uint16Array=typeof Uint16Array>"u"?Array:Uint16Array,A.Uint32Array=typeof Uint32Array>"u"?Array:Uint32Array,A.Int16Array=typeof Int16Array>"u"?Array:Int16Array,A.Float32Array=typeof Float32Array>"u"?Array:Float32Array,A.Float64Array=typeof Float64Array>"u"?Array:Float64Array;var L={};typeof window<"u"?L=window:typeof F.g<"u"&&(L=F.g),A.requestAnimationFrame=L.requestAnimationFrame||L.msRequestAnimationFrame||L.mozRequestAnimationFrame||L.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},A.createCanvas=function(){return document.createElement("canvas")},A.createImage=function(){return new L.Image},A.request={get:M.get},A.addEventListener=function(t,i,l,f){t.addEventListener(i,l,f)},A.removeEventListener=function(t,i,l){t.removeEventListener(i,l)};var Z=A,z=function(){this.head=null,this.tail=null,this._length=0};z.prototype.insert=function(t){var i=new z.Entry(t);return this.insertEntry(i),i},z.prototype.insertAt=function(t,i){if(!(t<0)){for(var l=this.head,f=0;l&&f!=t;)l=l.next,f++;if(l){var c=new z.Entry(i),p=l.prev;p?(p.next=c,c.prev=p):this.head=c,c.next=l,l.prev=c}else this.insert(i)}},z.prototype.insertBeforeEntry=function(t,i){var l=new z.Entry(t),f=i.prev;f?(f.next=l,l.prev=f):this.head=l,l.next=i,i.prev=l,this._length++},z.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},z.prototype.remove=function(t){var i=t.prev,l=t.next;i?i.next=l:this.head=l,l?l.prev=i:this.tail=i,t.next=t.prev=null,this._length--},z.prototype.removeAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;if(i)return this.remove(i),i.value}},z.prototype.getHead=function(){if(this.head)return this.head.value},z.prototype.getTail=function(){if(this.tail)return this.tail.value},z.prototype.getAt=function(t){if(!(t<0)){for(var i=this.head,l=0;i&&l!=t;)i=i.next,l++;return i.value}},z.prototype.indexOf=function(t){for(var i=this.head,l=0;i;){if(i.value===t)return l;i=i.next,l++}},z.prototype.length=function(){return this._length},z.prototype.isEmpty=function(){return this._length===0},z.prototype.forEach=function(t,i){for(var l=this.head,f=0,c=typeof i<"u";l;)c?t.call(i,l.value,f):t(l.value,f),l=l.next,f++},z.prototype.clear=function(){this.tail=this.head=null,this._length=0},z.Entry=function(t){this.value=t,this.next=null,this.prev=null};var ut=z,ot=function(t){this._list=new ut,this._map={},this._maxSize=t||10};ot.prototype.setMaxSize=function(t){this._maxSize=t},ot.prototype.put=function(t,i){if(!this._map.hasOwnProperty(t)){var l=this._list.length();if(l>=this._maxSize&&l>0){var f=this._list.head;this._list.remove(f),delete this._map[f.key]}var c=this._list.insert(i);c.key=t,this._map[t]=c}},ot.prototype.get=function(t){var i=this._map[t];if(this._map.hasOwnProperty(t))return i!==this._list.tail&&(this._list.remove(i),this._list.insertEntry(i)),i.value},ot.prototype.remove=function(t){var i=this._map[t];typeof i<"u"&&(delete this._map[t],this._list.remove(i))},ot.prototype.clear=function(){this._list.clear(),this._map={}};var ht=ot,tt={},ft={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function St(t){return t=Math.round(t),t<0?0:t>255?255:t}function st(t){return t=Math.round(t),t<0?0:t>360?360:t}function xt(t){return t<0?0:t>1?1:t}function wt(t){return t.length&&t.charAt(t.length-1)==="%"?St(parseFloat(t)/100*255):St(parseInt(t,10))}function Dt(t){return t.length&&t.charAt(t.length-1)==="%"?xt(parseFloat(t)/100):xt(parseFloat(t))}function It(t,i,l){return l<0?l+=1:l>1&&(l-=1),l*6<1?t+(i-t)*l*6:l*2<1?i:l*3<2?t+(i-t)*(2/3-l)*6:t}function Et(t,i,l){return t+(i-t)*l}function zt(t,i,l,f,c){return t[0]=i,t[1]=l,t[2]=f,t[3]=c,t}function Bt(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t}var Ht=new ht(20),$t=null;function ee(t,i){$t&&Bt($t,i),$t=Ht.put(t,$t||i.slice())}tt.parse=function(t,i){if(!!t){i=i||[];var l=Ht.get(t);if(l)return Bt(i,l);t=t+"";var f=t.replace(/ /g,"").toLowerCase();if(f in ft)return Bt(i,ft[f]),ee(t,i),i;if(f.charAt(0)==="#"){if(f.length===4){var c=parseInt(f.substr(1),16);if(!(c>=0&&c<=4095)){zt(i,0,0,0,1);return}return zt(i,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,1),ee(t,i),i}else if(f.length===7){var c=parseInt(f.substr(1),16);if(!(c>=0&&c<=16777215)){zt(i,0,0,0,1);return}return zt(i,(c&16711680)>>16,(c&65280)>>8,c&255,1),ee(t,i),i}return}var p=f.indexOf("("),y=f.indexOf(")");if(p!==-1&&y+1===f.length){var x=f.substr(0,p),w=f.substr(p+1,y-(p+1)).split(","),E=1;switch(x){case"rgba":if(w.length!==4){zt(i,0,0,0,1);return}E=Dt(w.pop());case"rgb":if(w.length!==3){zt(i,0,0,0,1);return}return zt(i,wt(w[0]),wt(w[1]),wt(w[2]),E),ee(t,i),i;case"hsla":if(w.length!==4){zt(i,0,0,0,1);return}return w[3]=Dt(w[3]),De(w,i),ee(t,i),i;case"hsl":if(w.length!==3){zt(i,0,0,0,1);return}return De(w,i),ee(t,i),i;default:return}}zt(i,0,0,0,1)}},tt.parseToFloat=function(t,i){if(i=tt.parse(t,i),!!i)return i[0]/=255,i[1]/=255,i[2]/=255,i};function De(t,i){var l=(parseFloat(t[0])%360+360)%360/360,f=Dt(t[1]),c=Dt(t[2]),p=c<=.5?c*(f+1):c+f-c*f,y=c*2-p;return i=i||[],zt(i,St(It(y,p,l+1/3)*255),St(It(y,p,l)*255),St(It(y,p,l-1/3)*255),1),t.length===4&&(i[3]=t[3]),i}function Se(t){if(!!t){var i=t[0]/255,l=t[1]/255,f=t[2]/255,c=Math.min(i,l,f),p=Math.max(i,l,f),y=p-c,x=(p+c)/2,w,E;if(y===0)w=0,E=0;else{x<.5?E=y/(p+c):E=y/(2-p-c);var B=((p-i)/6+y/2)/y,q=((p-l)/6+y/2)/y,yt=((p-f)/6+y/2)/y;i===p?w=yt-q:l===p?w=1/3+B-yt:f===p&&(w=2/3+q-B),w<0&&(w+=1),w>1&&(w-=1)}var _t=[w*360,E,x];return t[3]!=null&&_t.push(t[3]),_t}}tt.lift=function(t,i){var l=tt.parse(t);if(l){for(var f=0;f<3;f++)i<0?l[f]=l[f]*(1-i)|0:l[f]=(255-l[f])*i+l[f]|0;return tt.stringify(l,l.length===4?"rgba":"rgb")}},tt.toHex=function(t){var i=tt.parse(t);if(i)return((1<<24)+(i[0]<<16)+(i[1]<<8)+ +i[2]).toString(16).slice(1)},tt.fastLerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){l=l||[];var f=t*(i.length-1),c=Math.floor(f),p=Math.ceil(f),y=i[c],x=i[p],w=f-c;return l[0]=St(Et(y[0],x[0],w)),l[1]=St(Et(y[1],x[1],w)),l[2]=St(Et(y[2],x[2],w)),l[3]=xt(Et(y[3],x[3],w)),l}},tt.fastMapToColor=tt.fastLerp,tt.lerp=function(t,i,l){if(!(!(i&&i.length)||!(t>=0&&t<=1))){var f=t*(i.length-1),c=Math.floor(f),p=Math.ceil(f),y=tt.parse(i[c]),x=tt.parse(i[p]),w=f-c,E=tt.stringify([St(Et(y[0],x[0],w)),St(Et(y[1],x[1],w)),St(Et(y[2],x[2],w)),xt(Et(y[3],x[3],w))],"rgba");return l?{color:E,leftIndex:c,rightIndex:p,value:f}:E}},tt.mapToColor=tt.lerp,tt.modifyHSL=function(t,i,l,f){if(t=tt.parse(t),t)return t=Se(t),i!=null&&(t[0]=st(i)),l!=null&&(t[1]=Dt(l)),f!=null&&(t[2]=Dt(f)),tt.stringify(De(t),"rgba")},tt.modifyAlpha=function(t,i){if(t=tt.parse(t),t&&i!=null)return t[3]=xt(i),tt.stringify(t,"rgba")},tt.stringify=function(t,i){if(!(!t||!t.length)){var l=t[0]+","+t[1]+","+t[2];return(i==="rgba"||i==="hsva"||i==="hsla")&&(l+=","+t[3]),i+"("+l+")"}};var Be=tt,Ft=Be.parseToFloat,Tt={};function At(t){var i=Object.keys(t);i.sort();for(var l=[],f=0;f<i.length;f++){var c=i[f],p=t[c];p===null?l.push(c):l.push(c+" "+p.toString())}return l.join(`
`)}function Kt(t,i,l){l.sort();for(var f=[],c=0;c<l.length;c++){var p=l[c];f.push(p)}var y=At(t)+`
`+At(i)+`
`+f.join(`
`);if(Tt[y])return Tt[y];var x=$.genGUID();return Tt[y]=x,x}var pe=X.extend(function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}},function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)},{precision:"highp",setUniform:function(t,i){i===void 0&&console.warn('Uniform value "'+t+'" is undefined');var l=this.uniforms[t];l&&(typeof i=="string"&&(i=Ft(i)||i),l.value=i,this.autoUpdateTextureStatus&&l.type==="t"&&(i?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var i in t){var l=t[i];this.setUniform(i,l)}},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,i){if(typeof t=="object")for(var l in t){var f=t[l];this.setUniform(l,f)}else this.setUniform(t,i)},get:function(t){var i=this.uniforms[t];if(i)return i.value},attachShader:function(t,i){var l=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var f=this.uniforms;this._enabledUniforms=Object.keys(f),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter(function(E){var B=this.uniforms[E].type;return B==="t"||B==="tv"},this);var c=this.vertexDefines,p=this.fragmentDefines;if(this.vertexDefines=$.clone(t.vertexDefines),this.fragmentDefines=$.clone(t.fragmentDefines),i){for(var y in l)f[y]&&(f[y].value=l[y].value);$.defaults(this.vertexDefines,c),$.defaults(this.fragmentDefines,p)}var x={};for(var w in t.textures)x[w]={shaderType:t.textures[w].shaderType,type:t.textures[w].type,enabled:i&&this._textureStatus[w]?this._textureStatus[w].enabled:!1};this._textureStatus=x,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var i in this.uniforms)t.uniforms[i].value=this.uniforms[i].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=$.clone(this.vertexDefines),t.fragmentDefines=$.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,i,l){var f=this.vertexDefines,c=this.fragmentDefines;t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<3&&(l=i,i=t,t="both"),l=l??null,(t==="vertex"||t==="both")&&f[i]!==l&&(f[i]=l,this._programKey=""),(t==="fragment"||t==="both")&&c[i]!==l&&(c[i]=l,t!=="both"&&(this._programKey=""))},undefine:function(t,i){t!=="vertex"&&t!=="fragment"&&t!=="both"&&arguments.length<2&&(i=t,t="both"),(t==="vertex"||t==="both")&&this.isDefined("vertex",i)&&(delete this.vertexDefines[i],this._programKey=""),(t==="fragment"||t==="both")&&this.isDefined("fragment",i)&&(delete this.fragmentDefines[i],t!=="both"&&(this._programKey=""))},isDefined:function(t,i){switch(t){case"vertex":return this.vertexDefines[i]!==void 0;case"fragment":return this.fragmentDefines[i]!==void 0}},getDefine:function(t,i){switch(t){case"vertex":return this.vertexDefines[i];case"fragment":return this.fragmentDefines[i]}},enableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.enableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=l.enabled;f||(l.enabled=!0,this._programKey="")}},enableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t)){for(var i=0;i<t.length;i++)this.disableTexture(t[i]);return}var l=this._textureStatus[t];if(l){var f=!l.enabled;f||(l.enabled=!1,this._programKey="")}},disableTexturesAll:function(){var t=this._textureStatus;for(var i in t)t[i].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var i=this._textureStatus;return!!i[t]&&i[t].enabled},getEnabledTextures:function(){var t=[],i=this._textureStatus;for(var l in i)i[l].enabled&&t.push(l);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=Kt(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),Oe=pe,Pe=1e-6,vr=Array,Lr=Math.random,nr={};nr.create=function(){var t=new vr(2);return t[0]=0,t[1]=0,t},nr.clone=function(t){var i=new vr(2);return i[0]=t[0],i[1]=t[1],i},nr.fromValues=function(t,i){var l=new vr(2);return l[0]=t,l[1]=i,l},nr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t},nr.set=function(t,i,l){return t[0]=i,t[1]=l,t},nr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t},nr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t},nr.sub=nr.subtract,nr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t},nr.mul=nr.multiply,nr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t},nr.div=nr.divide,nr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t},nr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t},nr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t},nr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t},nr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return Math.sqrt(l*l+f*f)},nr.dist=nr.distance,nr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1];return l*l+f*f},nr.sqrDist=nr.squaredDistance,nr.length=function(t){var i=t[0],l=t[1];return Math.sqrt(i*i+l*l)},nr.len=nr.length,nr.squaredLength=function(t){var i=t[0],l=t[1];return i*i+l*l},nr.sqrLen=nr.squaredLength,nr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t},nr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t},nr.normalize=function(t,i){var l=i[0],f=i[1],c=l*l+f*f;return c>0&&(c=1/Math.sqrt(c),t[0]=i[0]*c,t[1]=i[1]*c),t},nr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]},nr.cross=function(t,i,l){var f=i[0]*l[1]-i[1]*l[0];return t[0]=t[1]=0,t[2]=f,t},nr.lerp=function(t,i,l,f){var c=i[0],p=i[1];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t},nr.random=function(t,i){i=i||1;var l=GLMAT_RANDOM()*2*Math.PI;return t[0]=Math.cos(l)*i,t[1]=Math.sin(l)*i,t},nr.transformMat2=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[2]*c,t[1]=l[1]*f+l[3]*c,t},nr.transformMat2d=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[2]*c+l[4],t[1]=l[1]*f+l[3]*c+l[5],t},nr.transformMat3=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[3]*c+l[6],t[1]=l[1]*f+l[4]*c+l[7],t},nr.transformMat4=function(t,i,l){var f=i[0],c=i[1];return t[0]=l[0]*f+l[4]*c+l[12],t[1]=l[1]*f+l[5]*c+l[13],t},nr.forEach=function(){var t=nr.create();return function(i,l,f,c,p,y){var x,w;for(l||(l=2),f||(f=0),c?w=Math.min(c*l+f,i.length):w=i.length,x=f;x<w;x+=l)t[0]=i[x],t[1]=i[x+1],p(t,t,y),i[x]=t[0],i[x+1]=t[1];return i}}();var qe=nr,lr=function(t,i){t=t||0,i=i||0,this.array=qe.fromValues(t,i),this._dirty=!0};if(lr.prototype={constructor:lr,add:function(t){return qe.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i){return this.array[0]=t,this.array[1]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new lr(this.x,this.y)},copy:function(t){return qe.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return qe.cross(t.array,this.array,i.array),t._dirty=!0,this},dist:function(t){return qe.dist(this.array,t.array)},distance:function(t){return qe.distance(this.array,t.array)},div:function(t){return qe.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return qe.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return qe.dot(this.array,t.array)},len:function(){return qe.len(this.array)},length:function(){return qe.length(this.array)},lerp:function(t,i,l){return qe.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return qe.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return qe.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return qe.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return qe.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return qe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return qe.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return qe.random(this.array,t),this._dirty=!0,this},scale:function(t){return qe.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return qe.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return qe.sqrDist(this.array,t.array)},squaredDistance:function(t){return qe.squaredDistance(this.array,t.array)},sqrLen:function(){return qe.sqrLen(this.array)},squaredLength:function(){return qe.squaredLength(this.array)},sub:function(t){return qe.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return qe.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return qe.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return qe.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return qe.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return qe.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var Yt=lr.prototype;Object.defineProperty(Yt,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(Yt,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}lr.add=function(t,i,l){return qe.add(t.array,i.array,l.array),t._dirty=!0,t},lr.set=function(t,i,l){return qe.set(t.array,i,l),t._dirty=!0,t},lr.copy=function(t,i){return qe.copy(t.array,i.array),t._dirty=!0,t},lr.cross=function(t,i,l){return qe.cross(t.array,i.array,l.array),t._dirty=!0,t},lr.dist=function(t,i){return qe.distance(t.array,i.array)},lr.distance=lr.dist,lr.div=function(t,i,l){return qe.divide(t.array,i.array,l.array),t._dirty=!0,t},lr.divide=lr.div,lr.dot=function(t,i){return qe.dot(t.array,i.array)},lr.len=function(t){return qe.length(t.array)},lr.lerp=function(t,i,l,f){return qe.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},lr.min=function(t,i,l){return qe.min(t.array,i.array,l.array),t._dirty=!0,t},lr.max=function(t,i,l){return qe.max(t.array,i.array,l.array),t._dirty=!0,t},lr.mul=function(t,i,l){return qe.multiply(t.array,i.array,l.array),t._dirty=!0,t},lr.multiply=lr.mul,lr.negate=function(t,i){return qe.negate(t.array,i.array),t._dirty=!0,t},lr.normalize=function(t,i){return qe.normalize(t.array,i.array),t._dirty=!0,t},lr.random=function(t,i){return qe.random(t.array,i),t._dirty=!0,t},lr.scale=function(t,i,l){return qe.scale(t.array,i.array,l),t._dirty=!0,t},lr.scaleAndAdd=function(t,i,l,f){return qe.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},lr.sqrDist=function(t,i){return qe.sqrDist(t.array,i.array)},lr.squaredDistance=lr.sqrDist,lr.sqrLen=function(t){return qe.sqrLen(t.array)},lr.squaredLength=lr.sqrLen,lr.sub=function(t,i,l){return qe.subtract(t.array,i.array,l.array),t._dirty=!0,t},lr.subtract=lr.sub,lr.transformMat2=function(t,i,l){return qe.transformMat2(t.array,i.array,l.array),t._dirty=!0,t},lr.transformMat2d=function(t,i,l){return qe.transformMat2d(t.array,i.array,l.array),t._dirty=!0,t},lr.transformMat3=function(t,i,l){return qe.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},lr.transformMat4=function(t,i,l){return qe.transformMat4(t.array,i.array,l.array),t._dirty=!0,t};var le=lr,we=1,_e=2,Ut=3,Qt={};function ie(t){for(var i=t.split(`
`),l=0,f=i.length;l<f;l++)i[l]=l+1+": "+i[l];return i.join(`
`)}function Ae(t,i,l){if(!t.getShaderParameter(i,t.COMPILE_STATUS))return[t.getShaderInfoLog(i),ie(l)].join(`
`)}var He=new Z.Float32Array(16),tr=X.extend({uniformSemantics:{},attributes:{}},function(){this._locations={},this._textureSlot=0,this._program=null},{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var i=this._locations[t];return i!=null},useTextureSlot:function(t,i,l){i&&(t.gl.activeTexture(t.gl.TEXTURE0+l),i.isRenderable()?i.bind(t):i.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,i){var l=this._textureSlot;return this.useTextureSlot(t,i,l),this._textureSlot++,l},setUniform:function(t,i,l,f){var c=this._locations,p=c[l];if(p==null)return!1;switch(i){case"m4":if(!(f instanceof Float32Array)){for(var y=0;y<f.length;y++)He[y]=f[y];f=He}t.uniformMatrix4fv(p,!1,f);break;case"2i":t.uniform2i(p,f[0],f[1]);break;case"2f":t.uniform2f(p,f[0],f[1]);break;case"3i":t.uniform3i(p,f[0],f[1],f[2]);break;case"3f":t.uniform3f(p,f[0],f[1],f[2]);break;case"4i":t.uniform4i(p,f[0],f[1],f[2],f[3]);break;case"4f":t.uniform4f(p,f[0],f[1],f[2],f[3]);break;case"1i":t.uniform1i(p,f);break;case"1f":t.uniform1f(p,f);break;case"1fv":t.uniform1fv(p,f);break;case"1iv":t.uniform1iv(p,f);break;case"2iv":t.uniform2iv(p,f);break;case"2fv":t.uniform2fv(p,f);break;case"3iv":t.uniform3iv(p,f);break;case"3fv":t.uniform3fv(p,f);break;case"4iv":t.uniform4iv(p,f);break;case"4fv":t.uniform4fv(p,f);break;case"m2":case"m2v":t.uniformMatrix2fv(p,!1,f);break;case"m3":case"m3v":t.uniformMatrix3fv(p,!1,f);break;case"m4v":if(Array.isArray(f)&&Array.isArray(f[0])){for(var x=new Z.Float32Array(f.length*16),w=0,y=0;y<f.length;y++)for(var E=f[y],B=0;B<16;B++)x[w++]=E[B];t.uniformMatrix4fv(p,!1,x)}else t.uniformMatrix4fv(p,!1,f);break}return!0},setUniformOfSemantic:function(t,i,l){var f=this.uniformSemantics[i];return f?this.setUniform(t,f.type,f.symbol,l):!1},enableAttributes:function(t,i,l){var f=t.gl,c=this._program,p=this._locations,y;l?y=l.__enabledAttributeList:y=Qt[t.__uid__],y||(l?y=l.__enabledAttributeList=[]:y=Qt[t.__uid__]=[]);for(var x=[],w=0;w<i.length;w++){var E=i[w];if(!this.attributes[E]){x[w]=-1;continue}var B=p[E];if(B==null){if(B=f.getAttribLocation(c,E),B===-1){x[w]=-1;continue}p[E]=B}x[w]=B,y[B]?y[B]=_e:y[B]=we}for(var w=0;w<y.length;w++)switch(y[w]){case we:f.enableVertexAttribArray(w),y[w]=Ut;break;case _e:y[w]=Ut;break;case Ut:f.disableVertexAttribArray(w),y[w]=0;break}return x},getAttribLocation:function(t,i){var l=this._locations,f=l[i];return f==null&&(f=t.getAttribLocation(this._program,i),l[i]=f),f},buildProgram:function(t,i,l,f){var c=t.createShader(t.VERTEX_SHADER),p=t.createProgram();t.shaderSource(c,l),t.compileShader(c);var y=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(y,f),t.compileShader(y);var x=Ae(t,c,l);if(x||(x=Ae(t,y,f),x))return x;if(t.attachShader(p,c),t.attachShader(p,y),i.attributeSemantics.POSITION)t.bindAttribLocation(p,0,i.attributeSemantics.POSITION.symbol);else{var w=Object.keys(this.attributes);t.bindAttribLocation(p,0,w[0])}if(t.linkProgram(p),t.deleteShader(c),t.deleteShader(y),this._program=p,this.vertexCode=l,this.fragmentCode=f,!t.getProgramParameter(p,t.LINK_STATUS))return`Could not link program
`+t.getProgramInfoLog(p);for(var E=0;E<i.uniforms.length;E++){var B=i.uniforms[E];this._locations[B]=t.getUniformLocation(p,B)}}}),ce=tr,Re=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function Le(t,i,l){function f(y,x,w,E){var B="";isNaN(x)&&(x in i?x=i[x]:x=c[x]),isNaN(w)&&(w in i?w=i[w]:w=c[w]);for(var q=parseInt(x);q<parseInt(w);q++)B+="{"+E.replace(/float\s*\(\s*_idx_\s*\)/g,q.toFixed(1)).replace(/_idx_/g,q)+"}";return B}var c={};for(var p in l)c[p+"_COUNT"]=l[p];return t.replace(Re,f)}function Ke(t,i,l){var f=[];if(i)for(var c in i){var p=i[c];p>0&&f.push("#define "+c.toUpperCase()+"_COUNT "+p)}if(l)for(var y=0;y<l.length;y++){var x=l[y];f.push("#define "+x.toUpperCase()+"_ENABLED")}for(var x in t){var w=t[x];w===null?f.push("#define "+x):f.push("#define "+x+" "+w.toString())}return f.join(`
`)}function Tr(t){for(var i=[],l=0;l<t.length;l++)i.push("#extension GL_"+t[l]+" : enable");return i.join(`
`)}function Nr(t){return["precision",t,"float"].join(" ")+`;
`+["precision",t,"int"].join(" ")+`;
`+["precision",t,"sampler2D"].join(" ")+`;
`}function Br(t){this._renderer=t,this._cache={}}Br.prototype.getProgram=function(t,i,l){var f=this._cache,c=t.isSkinnedMesh&&t.isSkinnedMesh(),p=t.isInstancedMesh&&t.isInstancedMesh(),y="s"+i.shader.shaderID+"m"+i.getProgramKey();l&&(y+="se"+l.getProgramKey(t.lightGroup)),c&&(y+=",sk"+t.joints.length),p&&(y+=",is");var qt=f[y];if(qt)return qt;var x=l?l.getLightsNumbers(t.lightGroup):{},w=this._renderer,E=w.gl,B=i.getEnabledTextures(),q="";if(c){var yt={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>w.getMaxJointNumber()&&(yt.USE_SKIN_MATRICES_TEXTURE=null),q+=`
`+Ke(yt)+`
`}p&&(q+=`
#define INSTANCING
`);var _t=q+Ke(i.vertexDefines,x,B),Mt=q+Ke(i.fragmentDefines,x,B),Ct=_t+`
`+i.shader.vertex,Gt=["OES_standard_derivatives","EXT_shader_texture_lod"].filter(function(ve){return w.getGLExtension(ve)!=null});Gt.indexOf("EXT_shader_texture_lod")>=0&&(Mt+=`
#define SUPPORT_TEXTURE_LOD`),Gt.indexOf("OES_standard_derivatives")>=0&&(Mt+=`
#define SUPPORT_STANDARD_DERIVATIVES`);var Xt=Tr(Gt)+`
`+Nr(i.precision)+`
`+Mt+`
`+i.shader.fragment,ne=Le(Ct,i.vertexDefines,x),te=Le(Xt,i.fragmentDefines,x),qt=new ce;qt.uniformSemantics=i.shader.uniformSemantics,qt.attributes=i.shader.attributes;var ge=qt.buildProgram(E,i.shader,ne,te);return qt.__error=ge,f[y]=qt,qt};var rn=Br,Mn=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,Jr=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,ei=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,jn={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function mi(t){for(var i=[],l=0;l<t;l++)i[l]=0;return i}var fi={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return mi(2)},vec3:function(){return mi(3)},vec4:function(){return mi(4)},ivec2:function(){return mi(2)},ivec3:function(){return mi(3)},ivec4:function(){return mi(4)},mat2:function(){return mi(4)},mat3:function(){return mi(9)},mat4:function(){return mi(16)},array:function(){return[]}},Fa=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],Ki=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],Ta=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],au={vec4:4,vec3:3,vec2:2,float:1},eo={},za={};function hf(t,i){var l="vertex:"+t+"fragment:"+i;if(eo[l])return eo[l];var f=$.genGUID();return eo[l]=f,za[f]={vertex:t,fragment:i},f}function ha(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function ro(){console.error("Wrong uniform/attributes syntax")}function _l(t,i){for(var l=/[,=\(\):]/,f=i.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),c=[],p=0;p<f.length;p++)f[p].match(l)?c.push(f[p].charAt(0),f[p].slice(1)):c.push(f[p]);f=c;var y=0,x=1,w=2,E=3,B=4,q=5,yt=y,_t={},Mt=null,Ct;Gt(f[0]);function Gt(te){te||ro();var qt=te.match(/\[(.*?)\]/);Ct=te.replace(/\[(.*?)\]/,""),_t[Ct]={},qt&&(_t[Ct].isArray=!0,_t[Ct].arraySize=qt[1])}for(var p=1;p<f.length;p++){var Xt=f[p];if(!!Xt){if(Xt==="="){if(yt!==y&&yt!==E){ro();break}yt=x;continue}else if(Xt===":"){yt=B;continue}else if(Xt===","){if(yt===w){if(!(Mt instanceof Array)){ro();break}Mt.push(+f[++p])}else yt=q;continue}else if(Xt===")"){_t[Ct].value=new Z.Float32Array(Mt),Mt=null,yt=q;continue}else if(Xt==="("){if(yt!==w){ro();break}if(!(Mt instanceof Array)){ro();break}Mt.push(+f[++p]);continue}else if(Xt.indexOf("vec")>=0){if(yt!==x&&yt!==B){ro();break}yt=w,Mt=[];continue}else if(yt===x){t==="bool"?_t[Ct].value=Xt==="true":_t[Ct].value=parseFloat(Xt),Mt=null;continue}else if(yt===B){var ne=Xt;Fa.indexOf(ne)>=0||Ki.indexOf(ne)>=0||Ta.indexOf(ne)>=0?_t[Ct].semantic=ne:ne==="ignore"||ne==="unconfigurable"?_t[Ct].ignore=!0:t==="bool"?_t[Ct].value=ne==="true":_t[Ct].value=parseFloat(ne);continue}Gt(Xt),yt=y}}return _t}function Wn(t,i){typeof t=="object"&&(i=t.fragment,t=t.vertex),t=ha(t),i=ha(i),this._shaderID=hf(t,i),this._vertexCode=Wn.parseImport(t),this._fragmentCode=Wn.parseImport(i),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Wn.prototype={constructor:Wn,createUniforms:function(){var t={};for(var i in this.uniformTemplates){var l=this.uniformTemplates[i];t[i]={type:l.type,value:l.value()}}return t},_parseImport:function(){this._vertexCode=Wn.parseImport(this.vertex),this._fragmentCode=Wn.parseImport(this.fragment)},_addSemanticUniform:function(t,i,l){if(Fa.indexOf(l)>=0)this.attributeSemantics[l]={symbol:t,type:i};else if(Ta.indexOf(l)>=0){var f=!1,c=l;l.match(/TRANSPOSE$/)&&(f=!0,c=l.slice(0,-9)),this.matrixSemantics[l]={symbol:t,type:i,isTranspose:f,semanticNoTranspose:c}}else Ki.indexOf(l)>=0&&(this.uniformSemantics[l]={symbol:t,type:i})},_addMaterialUniform:function(t,i,l,f,c,p){p[t]={type:l,value:c?fi.array:f||fi[i],semantic:null}},_parseUniforms:function(){var t={},i=this,l="vertex";this._uniformList=[],this._vertexCode=this._vertexCode.replace(Mn,c),l="fragment",this._fragmentCode=this._fragmentCode.replace(Mn,c),i.matrixSemanticKeys=Object.keys(this.matrixSemantics);function f(p){return p!=null?function(){return p}:null}function c(p,y,x){var w=_l(y,x),E=[];for(var B in w){var q=w[B],yt=q.semantic,_t=B,Mt=jn[y],Ct=f(w[B].value);w[B].isArray&&(_t+="["+w[B].arraySize+"]",Mt+="v"),E.push(_t),i._uniformList.push(B),q.ignore||((y==="sampler2D"||y==="samplerCube")&&(i.textures[B]={shaderType:l,type:y}),yt?i._addSemanticUniform(B,Mt,yt):i._addMaterialUniform(B,y,Mt,Ct,w[B].isArray,t))}return E.length>0?"uniform "+y+" "+E.join(",")+`;
`:""}this.uniformTemplates=t},_parseAttributes:function(){var t={},i=this;this._vertexCode=this._vertexCode.replace(Jr,l);function l(f,c,p){var y=_l(c,p),x=au[c]||1,w=[];for(var E in y){var B=y[E].semantic;if(t[E]={type:"float",size:x,semantic:B||null},B){if(Fa.indexOf(B)<0)throw new Error('Unkown semantic "'+B+'"');i.attributeSemantics[B]={symbol:E,type:c}}w.push(E)}return"attribute "+c+" "+w.join(",")+`;
`}this.attributes=t},_parseDefines:function(){var t=this,i="vertex";this._vertexCode=this._vertexCode.replace(ei,l),i="fragment",this._fragmentCode=this._fragmentCode.replace(ei,l);function l(f,c,p){var y=i==="vertex"?t.vertexDefines:t.fragmentDefines;return y[c]||(p==="false"?y[c]=!1:p==="true"?y[c]=!0:y[c]=p?isNaN(parseFloat(p))?p.trim():parseFloat(p):null),""}},clone:function(){var t=za[this._shaderID],i=new Wn(t.vertex,t.fragment);return i}},Object.defineProperty&&(Object.defineProperty(Wn.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Wn.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Wn.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Wn.prototype,"uniforms",{get:function(){return this._uniformList}}));var cf=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Wn.parseImport=function(t){return t=t.replace(cf,function(c,l,f){var c=Wn.source(f);return c?Wn.parseImport(c):(console.error('Shader chunk "'+f+'" not existed in library'),"")}),t};var ou=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Wn.import=function(t){t.replace(ou,function(i,l,f,p){var p=p.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(p){for(var y=f.split("."),x=Wn.codes,w=0,E;w<y.length-1;)E=y[w++],x[E]||(x[E]={}),x=x[E];E=y[w],x[E]=p}return p})},Wn.codes={},Wn.source=function(t){for(var i=t.split("."),l=Wn.codes,f=0;l&&f<i.length;){var c=i[f++];l=l[c]}return typeof l!="string"?(console.error('Shader "'+t+'" not existed in library'),""):l};var _r=Wn,su=`@export clay.prez.vertex
uniform mat4 WVP : WORLDVIEWPROJECTION;
attribute vec3 pos : POSITION;
attribute vec2 uv : TEXCOORD_0;
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec2 v_Texcoord;
void main()
{
 vec4 P = vec4(pos, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = WVP * P;
 v_Texcoord = uv * uvRepeat + uvOffset;
}
@end
@export clay.prez.fragment
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
varying vec2 v_Texcoord;
void main()
{
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
 gl_FragColor = vec4(0.0,0.0,0.0,1.0);
}
@end`,yn={};yn.create=function(){var t=new vr(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yn.clone=function(t){var i=new vr(16);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i[9]=t[9],i[10]=t[10],i[11]=t[11],i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15],i},yn.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},yn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yn.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],c=i[3],p=i[6],y=i[7],x=i[11];t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=l,t[6]=i[9],t[7]=i[13],t[8]=f,t[9]=p,t[11]=i[14],t[12]=c,t[13]=y,t[14]=x}else t[0]=i[0],t[1]=i[4],t[2]=i[8],t[3]=i[12],t[4]=i[1],t[5]=i[5],t[6]=i[9],t[7]=i[13],t[8]=i[2],t[9]=i[6],t[10]=i[10],t[11]=i[14],t[12]=i[3],t[13]=i[7],t[14]=i[11],t[15]=i[15];return t},yn.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=i[6],E=i[7],B=i[8],q=i[9],yt=i[10],_t=i[11],Mt=i[12],Ct=i[13],Gt=i[14],Xt=i[15],ne=l*x-f*y,te=l*w-c*y,qt=l*E-p*y,ge=f*w-c*x,ve=f*E-p*x,Ne=c*E-p*w,Ee=B*Ct-q*Mt,Ve=B*Gt-yt*Mt,Qe=B*Xt-_t*Mt,We=q*Gt-yt*Ct,rr=q*Xt-_t*Ct,fr=yt*Xt-_t*Gt,je=ne*fr-te*rr+qt*We+ge*Qe-ve*Ve+Ne*Ee;return je?(je=1/je,t[0]=(x*fr-w*rr+E*We)*je,t[1]=(c*rr-f*fr-p*We)*je,t[2]=(Ct*Ne-Gt*ve+Xt*ge)*je,t[3]=(yt*ve-q*Ne-_t*ge)*je,t[4]=(w*Qe-y*fr-E*Ve)*je,t[5]=(l*fr-c*Qe+p*Ve)*je,t[6]=(Gt*qt-Mt*Ne-Xt*te)*je,t[7]=(B*Ne-yt*qt+_t*te)*je,t[8]=(y*rr-x*Qe+E*Ee)*je,t[9]=(f*Qe-l*rr-p*Ee)*je,t[10]=(Mt*ve-Ct*qt+Xt*ne)*je,t[11]=(q*qt-B*ve-_t*ne)*je,t[12]=(x*Ve-y*We-w*Ee)*je,t[13]=(l*We-f*Ve+c*Ee)*je,t[14]=(Ct*te-Mt*ge-Gt*ne)*je,t[15]=(B*ge-q*te+yt*ne)*je,t):null},yn.adjoint=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=i[6],E=i[7],B=i[8],q=i[9],yt=i[10],_t=i[11],Mt=i[12],Ct=i[13],Gt=i[14],Xt=i[15];return t[0]=x*(yt*Xt-_t*Gt)-q*(w*Xt-E*Gt)+Ct*(w*_t-E*yt),t[1]=-(f*(yt*Xt-_t*Gt)-q*(c*Xt-p*Gt)+Ct*(c*_t-p*yt)),t[2]=f*(w*Xt-E*Gt)-x*(c*Xt-p*Gt)+Ct*(c*E-p*w),t[3]=-(f*(w*_t-E*yt)-x*(c*_t-p*yt)+q*(c*E-p*w)),t[4]=-(y*(yt*Xt-_t*Gt)-B*(w*Xt-E*Gt)+Mt*(w*_t-E*yt)),t[5]=l*(yt*Xt-_t*Gt)-B*(c*Xt-p*Gt)+Mt*(c*_t-p*yt),t[6]=-(l*(w*Xt-E*Gt)-y*(c*Xt-p*Gt)+Mt*(c*E-p*w)),t[7]=l*(w*_t-E*yt)-y*(c*_t-p*yt)+B*(c*E-p*w),t[8]=y*(q*Xt-_t*Ct)-B*(x*Xt-E*Ct)+Mt*(x*_t-E*q),t[9]=-(l*(q*Xt-_t*Ct)-B*(f*Xt-p*Ct)+Mt*(f*_t-p*q)),t[10]=l*(x*Xt-E*Ct)-y*(f*Xt-p*Ct)+Mt*(f*E-p*x),t[11]=-(l*(x*_t-E*q)-y*(f*_t-p*q)+B*(f*E-p*x)),t[12]=-(y*(q*Gt-yt*Ct)-B*(x*Gt-w*Ct)+Mt*(x*yt-w*q)),t[13]=l*(q*Gt-yt*Ct)-B*(f*Gt-c*Ct)+Mt*(f*yt-c*q),t[14]=-(l*(x*Gt-w*Ct)-y*(f*Gt-c*Ct)+Mt*(f*w-c*x)),t[15]=l*(x*yt-w*q)-y*(f*yt-c*q)+B*(f*w-c*x),t},yn.determinant=function(t){var i=t[0],l=t[1],f=t[2],c=t[3],p=t[4],y=t[5],x=t[6],w=t[7],E=t[8],B=t[9],q=t[10],yt=t[11],_t=t[12],Mt=t[13],Ct=t[14],Gt=t[15],Xt=i*y-l*p,ne=i*x-f*p,te=i*w-c*p,qt=l*x-f*y,ge=l*w-c*y,ve=f*w-c*x,Ne=E*Mt-B*_t,Ee=E*Ct-q*_t,Ve=E*Gt-yt*_t,Qe=B*Ct-q*Mt,We=B*Gt-yt*Mt,rr=q*Gt-yt*Ct;return Xt*rr-ne*We+te*Qe+qt*Ve-ge*Ee+ve*Ne},yn.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=i[6],B=i[7],q=i[8],yt=i[9],_t=i[10],Mt=i[11],Ct=i[12],Gt=i[13],Xt=i[14],ne=i[15],te=l[0],qt=l[1],ge=l[2],ve=l[3];return t[0]=te*f+qt*x+ge*q+ve*Ct,t[1]=te*c+qt*w+ge*yt+ve*Gt,t[2]=te*p+qt*E+ge*_t+ve*Xt,t[3]=te*y+qt*B+ge*Mt+ve*ne,te=l[4],qt=l[5],ge=l[6],ve=l[7],t[4]=te*f+qt*x+ge*q+ve*Ct,t[5]=te*c+qt*w+ge*yt+ve*Gt,t[6]=te*p+qt*E+ge*_t+ve*Xt,t[7]=te*y+qt*B+ge*Mt+ve*ne,te=l[8],qt=l[9],ge=l[10],ve=l[11],t[8]=te*f+qt*x+ge*q+ve*Ct,t[9]=te*c+qt*w+ge*yt+ve*Gt,t[10]=te*p+qt*E+ge*_t+ve*Xt,t[11]=te*y+qt*B+ge*Mt+ve*ne,te=l[12],qt=l[13],ge=l[14],ve=l[15],t[12]=te*f+qt*x+ge*q+ve*Ct,t[13]=te*c+qt*w+ge*yt+ve*Gt,t[14]=te*p+qt*E+ge*_t+ve*Xt,t[15]=te*y+qt*B+ge*Mt+ve*ne,t},yn.multiplyAffine=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[4],x=i[5],w=i[6],E=i[8],B=i[9],q=i[10],yt=i[12],_t=i[13],Mt=i[14],Ct=l[0],Gt=l[1],Xt=l[2];return t[0]=Ct*f+Gt*y+Xt*E,t[1]=Ct*c+Gt*x+Xt*B,t[2]=Ct*p+Gt*w+Xt*q,Ct=l[4],Gt=l[5],Xt=l[6],t[4]=Ct*f+Gt*y+Xt*E,t[5]=Ct*c+Gt*x+Xt*B,t[6]=Ct*p+Gt*w+Xt*q,Ct=l[8],Gt=l[9],Xt=l[10],t[8]=Ct*f+Gt*y+Xt*E,t[9]=Ct*c+Gt*x+Xt*B,t[10]=Ct*p+Gt*w+Xt*q,Ct=l[12],Gt=l[13],Xt=l[14],t[12]=Ct*f+Gt*y+Xt*E+yt,t[13]=Ct*c+Gt*x+Xt*B+_t,t[14]=Ct*p+Gt*w+Xt*q+Mt,t},yn.mul=yn.multiply,yn.mulAffine=yn.multiplyAffine,yn.translate=function(t,i,l){var f=l[0],c=l[1],p=l[2],y,x,w,E,B,q,yt,_t,Mt,Ct,Gt,Xt;return i===t?(t[12]=i[0]*f+i[4]*c+i[8]*p+i[12],t[13]=i[1]*f+i[5]*c+i[9]*p+i[13],t[14]=i[2]*f+i[6]*c+i[10]*p+i[14],t[15]=i[3]*f+i[7]*c+i[11]*p+i[15]):(y=i[0],x=i[1],w=i[2],E=i[3],B=i[4],q=i[5],yt=i[6],_t=i[7],Mt=i[8],Ct=i[9],Gt=i[10],Xt=i[11],t[0]=y,t[1]=x,t[2]=w,t[3]=E,t[4]=B,t[5]=q,t[6]=yt,t[7]=_t,t[8]=Mt,t[9]=Ct,t[10]=Gt,t[11]=Xt,t[12]=y*f+B*c+Mt*p+i[12],t[13]=x*f+q*c+Ct*p+i[13],t[14]=w*f+yt*c+Gt*p+i[14],t[15]=E*f+_t*c+Xt*p+i[15]),t},yn.scale=function(t,i,l){var f=l[0],c=l[1],p=l[2];return t[0]=i[0]*f,t[1]=i[1]*f,t[2]=i[2]*f,t[3]=i[3]*f,t[4]=i[4]*c,t[5]=i[5]*c,t[6]=i[6]*c,t[7]=i[7]*c,t[8]=i[8]*p,t[9]=i[9]*p,t[10]=i[10]*p,t[11]=i[11]*p,t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],t},yn.rotate=function(t,i,l,f){var c=f[0],p=f[1],y=f[2],x=Math.sqrt(c*c+p*p+y*y),w,E,B,q,yt,_t,Mt,Ct,Gt,Xt,ne,te,qt,ge,ve,Ne,Ee,Ve,Qe,We,rr,fr,je,hr;return Math.abs(x)<Pe?null:(x=1/x,c*=x,p*=x,y*=x,w=Math.sin(l),E=Math.cos(l),B=1-E,q=i[0],yt=i[1],_t=i[2],Mt=i[3],Ct=i[4],Gt=i[5],Xt=i[6],ne=i[7],te=i[8],qt=i[9],ge=i[10],ve=i[11],Ne=c*c*B+E,Ee=p*c*B+y*w,Ve=y*c*B-p*w,Qe=c*p*B-y*w,We=p*p*B+E,rr=y*p*B+c*w,fr=c*y*B+p*w,je=p*y*B-c*w,hr=y*y*B+E,t[0]=q*Ne+Ct*Ee+te*Ve,t[1]=yt*Ne+Gt*Ee+qt*Ve,t[2]=_t*Ne+Xt*Ee+ge*Ve,t[3]=Mt*Ne+ne*Ee+ve*Ve,t[4]=q*Qe+Ct*We+te*rr,t[5]=yt*Qe+Gt*We+qt*rr,t[6]=_t*Qe+Xt*We+ge*rr,t[7]=Mt*Qe+ne*We+ve*rr,t[8]=q*fr+Ct*je+te*hr,t[9]=yt*fr+Gt*je+qt*hr,t[10]=_t*fr+Xt*je+ge*hr,t[11]=Mt*fr+ne*je+ve*hr,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},yn.rotateX=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[4],y=i[5],x=i[6],w=i[7],E=i[8],B=i[9],q=i[10],yt=i[11];return i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=p*c+E*f,t[5]=y*c+B*f,t[6]=x*c+q*f,t[7]=w*c+yt*f,t[8]=E*c-p*f,t[9]=B*c-y*f,t[10]=q*c-x*f,t[11]=yt*c-w*f,t},yn.rotateY=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[0],y=i[1],x=i[2],w=i[3],E=i[8],B=i[9],q=i[10],yt=i[11];return i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*c-E*f,t[1]=y*c-B*f,t[2]=x*c-q*f,t[3]=w*c-yt*f,t[8]=p*f+E*c,t[9]=y*f+B*c,t[10]=x*f+q*c,t[11]=w*f+yt*c,t},yn.rotateZ=function(t,i,l){var f=Math.sin(l),c=Math.cos(l),p=i[0],y=i[1],x=i[2],w=i[3],E=i[4],B=i[5],q=i[6],yt=i[7];return i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=p*c+E*f,t[1]=y*c+B*f,t[2]=x*c+q*f,t[3]=w*c+yt*f,t[4]=E*c-p*f,t[5]=B*c-y*f,t[6]=q*c-x*f,t[7]=yt*c-w*f,t},yn.fromRotationTranslation=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=f+f,w=c+c,E=p+p,B=f*x,q=f*w,yt=f*E,_t=c*w,Mt=c*E,Ct=p*E,Gt=y*x,Xt=y*w,ne=y*E;return t[0]=1-(_t+Ct),t[1]=q+ne,t[2]=yt-Xt,t[3]=0,t[4]=q-ne,t[5]=1-(B+Ct),t[6]=Mt+Gt,t[7]=0,t[8]=yt+Xt,t[9]=Mt-Gt,t[10]=1-(B+_t),t[11]=0,t[12]=l[0],t[13]=l[1],t[14]=l[2],t[15]=1,t},yn.fromQuat=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l+l,x=f+f,w=c+c,E=l*y,B=f*y,q=f*x,yt=c*y,_t=c*x,Mt=c*w,Ct=p*y,Gt=p*x,Xt=p*w;return t[0]=1-q-Mt,t[1]=B+Xt,t[2]=yt-Gt,t[3]=0,t[4]=B-Xt,t[5]=1-E-Mt,t[6]=_t+Ct,t[7]=0,t[8]=yt+Gt,t[9]=_t-Ct,t[10]=1-E-q,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},yn.frustum=function(t,i,l,f,c,p,y){var x=1/(l-i),w=1/(c-f),E=1/(p-y);return t[0]=p*2*x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p*2*w,t[6]=0,t[7]=0,t[8]=(l+i)*x,t[9]=(c+f)*w,t[10]=(y+p)*E,t[11]=-1,t[12]=0,t[13]=0,t[14]=y*p*2*E,t[15]=0,t},yn.perspective=function(t,i,l,f,c){var p=1/Math.tan(i/2),y=1/(f-c);return t[0]=p/l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=p,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(c+f)*y,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*c*f*y,t[15]=0,t},yn.ortho=function(t,i,l,f,c,p,y){var x=1/(i-l),w=1/(f-c),E=1/(p-y);return t[0]=-2*x,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*w,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*E,t[11]=0,t[12]=(i+l)*x,t[13]=(c+f)*w,t[14]=(y+p)*E,t[15]=1,t},yn.lookAt=function(t,i,l,f){var c,p,y,x,w,E,B,q,yt,_t,Mt=i[0],Ct=i[1],Gt=i[2],Xt=f[0],ne=f[1],te=f[2],qt=l[0],ge=l[1],ve=l[2];return Math.abs(Mt-qt)<Pe&&Math.abs(Ct-ge)<Pe&&Math.abs(Gt-ve)<Pe?yn.identity(t):(B=Mt-qt,q=Ct-ge,yt=Gt-ve,_t=1/Math.sqrt(B*B+q*q+yt*yt),B*=_t,q*=_t,yt*=_t,c=ne*yt-te*q,p=te*B-Xt*yt,y=Xt*q-ne*B,_t=Math.sqrt(c*c+p*p+y*y),_t?(_t=1/_t,c*=_t,p*=_t,y*=_t):(c=0,p=0,y=0),x=q*y-yt*p,w=yt*c-B*y,E=B*p-q*c,_t=Math.sqrt(x*x+w*w+E*E),_t?(_t=1/_t,x*=_t,w*=_t,E*=_t):(x=0,w=0,E=0),t[0]=c,t[1]=x,t[2]=B,t[3]=0,t[4]=p,t[5]=w,t[6]=q,t[7]=0,t[8]=y,t[9]=E,t[10]=yt,t[11]=0,t[12]=-(c*Mt+p*Ct+y*Gt),t[13]=-(x*Mt+w*Ct+E*Gt),t[14]=-(B*Mt+q*Ct+yt*Gt),t[15]=1,t)},yn.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var fe=yn,Er={};Er.create=function(){var t=new vr(3);return t[0]=0,t[1]=0,t[2]=0,t},Er.clone=function(t){var i=new vr(3);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i},Er.fromValues=function(t,i,l){var f=new vr(3);return f[0]=t,f[1]=i,f[2]=l,f},Er.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t},Er.set=function(t,i,l,f){return t[0]=i,t[1]=l,t[2]=f,t},Er.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t},Er.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t},Er.sub=Er.subtract,Er.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t},Er.mul=Er.multiply,Er.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t},Er.div=Er.divide,Er.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t},Er.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t},Er.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t},Er.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t},Er.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2];return Math.sqrt(l*l+f*f+c*c)},Er.dist=Er.distance,Er.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2];return l*l+f*f+c*c},Er.sqrDist=Er.squaredDistance,Er.length=function(t){var i=t[0],l=t[1],f=t[2];return Math.sqrt(i*i+l*l+f*f)},Er.len=Er.length,Er.squaredLength=function(t){var i=t[0],l=t[1],f=t[2];return i*i+l*l+f*f},Er.sqrLen=Er.squaredLength,Er.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t},Er.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t},Er.normalize=function(t,i){var l=i[0],f=i[1],c=i[2],p=l*l+f*f+c*c;return p>0&&(p=1/Math.sqrt(p),t[0]=i[0]*p,t[1]=i[1]*p,t[2]=i[2]*p),t},Er.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]},Er.cross=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],w=l[2];return t[0]=c*w-p*x,t[1]=p*y-f*w,t[2]=f*x-c*y,t},Er.lerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t},Er.random=function(t,i){i=i||1;var l=Lr()*2*Math.PI,f=Lr()*2-1,c=Math.sqrt(1-f*f)*i;return t[0]=Math.cos(l)*c,t[1]=Math.sin(l)*c,t[2]=f*i,t},Er.transformMat4=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[3]*f+l[7]*c+l[11]*p+l[15];return y=y||1,t[0]=(l[0]*f+l[4]*c+l[8]*p+l[12])/y,t[1]=(l[1]*f+l[5]*c+l[9]*p+l[13])/y,t[2]=(l[2]*f+l[6]*c+l[10]*p+l[14])/y,t},Er.transformMat3=function(t,i,l){var f=i[0],c=i[1],p=i[2];return t[0]=f*l[0]+c*l[3]+p*l[6],t[1]=f*l[1]+c*l[4]+p*l[7],t[2]=f*l[2]+c*l[5]+p*l[8],t},Er.transformQuat=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],w=l[2],E=l[3],B=E*f+x*p-w*c,q=E*c+w*f-y*p,yt=E*p+y*c-x*f,_t=-y*f-x*c-w*p;return t[0]=B*E+_t*-y+q*-w-yt*-x,t[1]=q*E+_t*-x+yt*-y-B*-w,t[2]=yt*E+_t*-w+B*-x-q*-y,t},Er.rotateX=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[0],p[1]=c[1]*Math.cos(f)-c[2]*Math.sin(f),p[2]=c[1]*Math.sin(f)+c[2]*Math.cos(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Er.rotateY=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[2]*Math.sin(f)+c[0]*Math.cos(f),p[1]=c[1],p[2]=c[2]*Math.cos(f)-c[0]*Math.sin(f),t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Er.rotateZ=function(t,i,l,f){var c=[],p=[];return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],p[0]=c[0]*Math.cos(f)-c[1]*Math.sin(f),p[1]=c[0]*Math.sin(f)+c[1]*Math.cos(f),p[2]=c[2],t[0]=p[0]+l[0],t[1]=p[1]+l[1],t[2]=p[2]+l[2],t},Er.forEach=function(){var t=Er.create();return function(i,l,f,c,p,y){var x,w;for(l||(l=3),f||(f=0),c?w=Math.min(c*l+f,i.length):w=i.length,x=f;x<w;x+=l)t[0]=i[x],t[1]=i[x+1],t[2]=i[x+2],p(t,t,y),i[x]=t[0],i[x+1]=t[1],i[x+2]=t[2];return i}}(),Er.angle=function(t,i){var l=Er.fromValues(t[0],t[1],t[2]),f=Er.fromValues(i[0],i[1],i[2]);Er.normalize(l,l),Er.normalize(f,f);var c=Er.dot(l,f);return c>1?0:Math.acos(c)};var xe=Er;_r.import(su);var Rr=fe.create,Mr={};function xl(t){return t.material}function Ds(t,i,l){return i.uniforms[l].value}function br(t,i,l,f){return l!==f}function cr(t){return!0}function Hr(){}var ir={float:D.FLOAT,byte:D.BYTE,ubyte:D.UNSIGNED_BYTE,short:D.SHORT,ushort:D.UNSIGNED_SHORT};function yi(t,i,l){this.availableAttributes=t,this.availableAttributeSymbols=i,this.indicesBuffer=l,this.vao=null}function Ga(t){var i,l;this.bind=function(f){i||(i=Z.createCanvas(),i.width=i.height=1,i.getContext("2d"));var c=f.gl,p=!l;p&&(l=c.createTexture()),c.bindTexture(c.TEXTURE_2D,l),p&&c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,i)},this.unbind=function(f){f.gl.bindTexture(f.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var Ui=X.extend(function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:typeof window<"u"&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}},function(){this.canvas||(this.canvas=Z.createCanvas());var t=this.canvas;try{var i={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!this.gl)throw new Error;this._glinfo=new I(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(l){throw"Error creating WebGL Context "+l}this._programMgr=new rn(this),this._placeholderTexture=new Ga(this)},{resize:function(t,i){var l=this.canvas,f=this.devicePixelRatio;t!=null?(l.style&&(l.style.width=t+"px",l.style.height=i+"px"),l.width=t*f,l.height=i*f,this._width=t,this._height=i):(this._width=l.width/f,this._height=l.height/f),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,i,l,f,c){if(typeof t=="object"){var p=t;t=p.x,i=p.y,l=p.width,f=p.height,c=p.devicePixelRatio}c=c||this.devicePixelRatio,this.gl.viewport(t*c,i*c,l*c,f*c),this.viewport={x:t,y:i,width:l,height:f,devicePixelRatio:c}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,i,l,f){var c=this.gl,p=this.clearColor;if(this.clearBit){c.colorMask(!0,!0,!0,!0),c.depthMask(!0);var y=this.viewport,x=!1,w=y.devicePixelRatio;(y.width!==this._width||y.height!==this._height||w&&w!==this.devicePixelRatio||y.x||y.y)&&(x=!0,c.enable(c.SCISSOR_TEST),c.scissor(y.x*w,y.y*w,y.width*w,y.height*w)),c.clearColor(p[0],p[1],p[2],p[3]),c.clear(this.clearBit),x&&c.disable(c.SCISSOR_TEST)}if(l||t.update(!1),t.updateLights(),i=i||t.getMainCamera(),!i){console.error("Can't find camera in the scene.");return}i.update();var E=t.updateRenderList(i,!0);this._sceneRendering=t;var B=E.opaque,q=E.transparent,yt=t.material;t.trigger("beforerender",this,t,i,E),f?(this.renderPreZ(B,t,i),c.depthFunc(c.LEQUAL)):c.depthFunc(c.LESS);for(var _t=Rr(),Mt=xe.create(),Ct=0;Ct<q.length;Ct++){var Gt=q[Ct];fe.multiplyAffine(_t,i.viewMatrix.array,Gt.worldTransform.array),xe.transformMat4(Mt,Gt.position.array,_t),Gt.__depth=Mt[2]}this.renderPass(B,i,{getMaterial:function(Xt){return yt||Xt.material},sortCompare:this.opaqueSortCompare}),this.renderPass(q,i,{getMaterial:function(Xt){return yt||Xt.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,i,E),this._sceneRendering=null},getProgram:function(t,i,l){return i=i||t.material,this._programMgr.getProgram(t,i,l)},validateProgram:function(t){if(t.__error){var i=t.__error;if(Mr[t.__uid__])return;if(Mr[t.__uid__]=!0,this.throwError)throw new Error(i);this.trigger("error",i)}},updatePrograms:function(t,i,l){var f=l&&l.getMaterial||xl;i=i||null;for(var c=0;c<t.length;c++){var p=t[c],y=f.call(this,p);if(c>0){var x=t[c-1],w=x.joints?x.joints.length:0,E=p.joints?p.joints.length:0;if(E===w&&p.material===x.material&&p.lightGroup===x.lightGroup){p.__program=x.__program;continue}}var B=this._programMgr.getProgram(p,y,i);this.validateProgram(B),p.__program=B}},renderPass:function(t,i,l){this.trigger("beforerenderpass",this,t,i,l),l=l||{},l.getMaterial=l.getMaterial||xl,l.getUniform=l.getUniform||Ds,l.isMaterialChanged=l.isMaterialChanged||br,l.beforeRender=l.beforeRender||Hr,l.afterRender=l.afterRender||Hr;var f=l.ifRender||cr;this.updatePrograms(t,this._sceneRendering,l),l.sortCompare&&t.sort(l.sortCompare);var c=this.viewport,p=c.devicePixelRatio,y=[c.x*p,c.y*p,c.width*p,c.height*p],x=this.devicePixelRatio,w=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*x,this._height*x],E=[y[2],y[3]],B=Date.now();i?(fe.copy(or.VIEW,i.viewMatrix.array),fe.copy(or.PROJECTION,i.projectionMatrix.array),fe.copy(or.VIEWINVERSE,i.worldTransform.array)):(fe.identity(or.VIEW),fe.identity(or.PROJECTION),fe.identity(or.VIEWINVERSE)),fe.multiply(or.VIEWPROJECTION,or.PROJECTION,or.VIEW),fe.invert(or.PROJECTIONINVERSE,or.PROJECTION),fe.invert(or.VIEWPROJECTIONINVERSE,or.VIEWPROJECTION);for(var q=this.gl,yt=this._sceneRendering,_t,Mt,Ct,Gt,Xt,ne,te,qt,ge,ve,Ne,Ee,Ve=null,Qe=0;Qe<t.length;Qe++){var We=t[Qe],rr=We.worldTransform!=null,fr;if(!!f(We)){rr&&(fr=We.isSkinnedMesh&&We.isSkinnedMesh()?We.offsetMatrix?We.offsetMatrix.array:or.IDENTITY:We.worldTransform.array);var je=We.geometry,hr=l.getMaterial.call(this,We),wr=We.__program,Ir=hr.shader,dr=je.__uid__+"-"+wr.__uid__,un=dr!==ve;ve=dr,un&&Ve&&Ve.bindVertexArrayOES(null),rr&&(fe.copy(or.WORLD,fr),fe.multiply(or.WORLDVIEWPROJECTION,or.VIEWPROJECTION,fr),fe.multiplyAffine(or.WORLDVIEW,or.VIEW,fr),(Ir.matrixSemantics.WORLDINVERSE||Ir.matrixSemantics.WORLDINVERSETRANSPOSE)&&fe.invert(or.WORLDINVERSE,fr),(Ir.matrixSemantics.WORLDVIEWINVERSE||Ir.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&fe.invert(or.WORLDVIEWINVERSE,or.WORLDVIEW),(Ir.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||Ir.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&fe.invert(or.WORLDVIEWPROJECTIONINVERSE,or.WORLDVIEWPROJECTION)),We.beforeRender&&We.beforeRender(this),l.beforeRender.call(this,We,hr,_t);var Pr=wr!==Mt;Pr?(wr.bind(this),wr.setUniformOfSemantic(q,"VIEWPORT",y),wr.setUniformOfSemantic(q,"WINDOW_SIZE",w),i&&(wr.setUniformOfSemantic(q,"NEAR",i.near),wr.setUniformOfSemantic(q,"FAR",i.far)),wr.setUniformOfSemantic(q,"DEVICEPIXELRATIO",p),wr.setUniformOfSemantic(q,"TIME",B),wr.setUniformOfSemantic(q,"VIEWPORT_SIZE",E),yt&&yt.setLightUniforms(wr,We.lightGroup,this)):wr=Mt,(Pr||l.isMaterialChanged(We,Ct,hr,_t))&&(hr.depthTest!==Gt&&(hr.depthTest?q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST),Gt=hr.depthTest),hr.depthMask!==Xt&&(q.depthMask(hr.depthMask),Xt=hr.depthMask),hr.transparent!==ge&&(hr.transparent?q.enable(q.BLEND):q.disable(q.BLEND),ge=hr.transparent),hr.transparent&&(hr.blend?hr.blend(q):(q.blendEquationSeparate(q.FUNC_ADD,q.FUNC_ADD),q.blendFuncSeparate(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA,q.ONE,q.ONE_MINUS_SRC_ALPHA))),Ee=this._bindMaterial(We,hr,wr,Ct||null,_t||null,Mt||null,l.getUniform),_t=hr);var Zr=Ir.matrixSemanticKeys;if(rr)for(var sn=0;sn<Zr.length;sn++){var Dn=Zr[sn],An=Ir.matrixSemantics[Dn],en=or[Dn];if(An.isTranspose){var si=or[An.semanticNoTranspose];fe.transpose(en,si)}wr.setUniform(q,An.type,An.symbol,en)}We.cullFace!==te&&(te=We.cullFace,q.cullFace(te)),We.frontFace!==qt&&(qt=We.frontFace,q.frontFace(qt)),We.culling!==ne&&(ne=We.culling,ne?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE)),this._updateSkeleton(We,wr,Ee),un&&(Ne=this._bindVAO(Ve,Ir,je,wr)),this._renderObject(We,Ne,wr),l.afterRender(this,We),We.afterRender&&We.afterRender(this),Mt=wr,Ct=We}}Ve&&Ve.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,t,i,l)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,i,l){var f=this.gl,c=t.skeleton;if(c)if(c.update(),t.joints.length>this.getMaxJointNumber()){var p=c.getSubSkinMatricesTexture(t.__uid__,t.joints);i.useTextureSlot(this,p,l),i.setUniform(f,"1i","skinMatricesTexture",l),i.setUniform(f,"1f","skinMatricesTextureSize",p.width)}else{var y=c.getSubSkinMatrices(t.__uid__,t.joints);i.setUniformOfSemantic(f,"SKIN_MATRIX",y)}},_renderObject:function(t,i,l){var f=this.gl,c=t.geometry,p=t.mode;p==null&&(p=4);var y=null,x=t.isInstancedMesh&&t.isInstancedMesh();if(x&&(y=this.getGLExtension("ANGLE_instanced_arrays"),!y)){console.warn("Device not support ANGLE_instanced_arrays extension");return}var w;if(x&&(w=this._bindInstancedAttributes(t,l,y)),i.indicesBuffer){var E=this.getGLExtension("OES_element_index_uint"),B=E&&c.indices instanceof Uint32Array,q=B?f.UNSIGNED_INT:f.UNSIGNED_SHORT;x?y.drawElementsInstancedANGLE(p,i.indicesBuffer.count,q,0,t.getInstanceCount()):f.drawElements(p,i.indicesBuffer.count,q,0)}else x?y.drawArraysInstancedANGLE(p,0,c.vertexCount,t.getInstanceCount()):f.drawArrays(p,0,c.vertexCount);if(x)for(var yt=0;yt<w.length;yt++)f.disableVertexAttribArray(w[yt])},_bindInstancedAttributes:function(t,i,l){for(var f=this.gl,c=t.getInstancedAttributesBuffers(this),p=[],y=0;y<c.length;y++){var x=c[y],w=i.getAttribLocation(f,x.symbol);if(!(w<0)){var E=ir[x.type]||f.FLOAT;f.enableVertexAttribArray(w),f.bindBuffer(f.ARRAY_BUFFER,x.buffer),f.vertexAttribPointer(w,x.size,E,!1,0,0),l.vertexAttribDivisorANGLE(w,x.divisor),p.push(w)}}return p},_bindMaterial:function(t,i,l,f,c,p,y){for(var x=this.gl,w=p===l,E=l.currentTextureSlot(),B=i.getEnabledUniforms(),q=i.getTextureUniforms(),yt=this._placeholderTexture,_t=0;_t<q.length;_t++){var Mt=q[_t],Ct=y(t,i,Mt),Gt=i.uniforms[Mt].type;if(Gt==="t"&&Ct)Ct.__slot=-1;else if(Gt==="tv")for(var Xt=0;Xt<Ct.length;Xt++)Ct[Xt]&&(Ct[Xt].__slot=-1)}yt.__slot=-1;for(var _t=0;_t<B.length;_t++){var Mt=B[_t],ne=i.uniforms[Mt],Ct=y(t,i,Mt),Gt=ne.type,te=Gt==="t";if(te&&(!Ct||!Ct.isRenderable())&&(Ct=yt),c&&w){var qt=y(f,c,Mt);if(te&&(!qt||!qt.isRenderable())&&(qt=yt),qt===Ct){if(te)l.takeCurrentTextureSlot(this,null);else if(Gt==="tv"&&Ct)for(var Xt=0;Xt<Ct.length;Xt++)l.takeCurrentTextureSlot(this,null);continue}}if(Ct!=null)if(te)if(Ct.__slot<0){var ge=l.currentTextureSlot(),ve=l.setUniform(x,"1i",Mt,ge);ve&&(l.takeCurrentTextureSlot(this,Ct),Ct.__slot=ge)}else l.setUniform(x,"1i",Mt,Ct.__slot);else if(Array.isArray(Ct)){if(Ct.length===0)continue;if(Gt==="tv"){if(!l.hasUniform(Mt))continue;for(var Ne=[],Xt=0;Xt<Ct.length;Xt++){var Ee=Ct[Xt];if(Ee.__slot<0){var ge=l.currentTextureSlot();Ne.push(ge),l.takeCurrentTextureSlot(this,Ee),Ee.__slot=ge}else Ne.push(Ee.__slot)}l.setUniform(x,"1iv",Mt,Ne)}else l.setUniform(x,ne.type,Mt,Ct)}else l.setUniform(x,ne.type,Mt,Ct)}var Ve=l.currentTextureSlot();return l.resetTextureSlot(E),Ve},_bindVAO:function(t,i,l,f){var c=!l.dynamic,p=this.gl,y=this.__uid__+"-"+f.__uid__,x=l.__vaoCache[y];if(!x){var w=l.getBufferChunks(this);if(!w||!w.length)return;for(var E=w[0],B=E.attributeBuffers,qt=E.indicesBuffer,te=[],q=[],yt=0;yt<B.length;yt++){var _t=B[yt],Mt=_t.name,Ct=_t.semantic,Gt;if(Ct){var Xt=i.attributeSemantics[Ct];Gt=Xt&&Xt.symbol}else Gt=Mt;Gt&&f.attributes[Gt]&&(te.push(_t),q.push(Gt))}x=new yi(te,q,qt),c&&(l.__vaoCache[y]=x)}var ne=!0;t&&c&&(x.vao==null?x.vao=t.createVertexArrayOES():ne=!1,t.bindVertexArrayOES(x.vao));var te=x.availableAttributes,qt=x.indicesBuffer;if(ne){for(var ge=f.enableAttributes(this,x.availableAttributeSymbols,t&&c&&x),yt=0;yt<te.length;yt++){var ve=ge[yt];if(ve!==-1){var _t=te[yt],Ne=_t.buffer,Ee=_t.size,Ve=ir[_t.type]||p.FLOAT;p.bindBuffer(p.ARRAY_BUFFER,Ne),p.vertexAttribPointer(ve,Ee,Ve,!1,0,0)}}l.isUseIndices()&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,qt.buffer)}return x},renderPreZ:function(t,i,l){var f=this.gl,c=this._prezMaterial||new Oe({shader:new _r(_r.source("clay.prez.vertex"),_r.source("clay.prez.fragment"))});this._prezMaterial=c,f.colorMask(!1,!1,!1,!1),f.depthMask(!0),this.renderPass(t,l,{ifRender:function(p){return!p.ignorePreZ},isMaterialChanged:function(p,y){var x=p.material,w=y.material;return x.get("diffuseMap")!==w.get("diffuseMap")||(x.get("alphaCutoff")||0)!==(w.get("alphaCutoff")||0)},getUniform:function(p,y,x){if(x==="alphaMap")return p.material.get("diffuseMap");if(x==="alphaCutoff"){if(p.material.isDefined("fragment","ALPHA_TEST")&&p.material.get("diffuseMap")){var w=p.material.get("alphaCutoff");return w||0}return 0}else return x==="uvRepeat"?p.material.get("uvRepeat"):x==="uvOffset"?p.material.get("uvOffset"):y.get(x)},getMaterial:function(){return c},sort:this.opaqueSortCompare}),f.colorMask(!0,!0,!0,!0),f.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,i,l){t.getParent()&&t.getParent().remove(t);var f={};t.traverse(function(c){var p=c.material;if(c.geometry&&i&&c.geometry.dispose(this),l&&p&&!f[p.__uid__]){for(var y=p.getTextureUniforms(),x=0;x<y.length;x++){var w=y[x],E=p.uniforms[w].value,B=p.uniforms[w].type;if(!!E){if(B==="t")E.dispose&&E.dispose(this);else if(B==="tv")for(var q=0;q<E.length;q++)E[q]&&E[q].dispose&&E[q].dispose(this)}}f[p.__uid__]=!0}c.dispose&&c.dispose(this)},this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,i,l){l||(l=new le),i=this._height-i;var f=this.viewport,c=l.array;return c[0]=(t-f.x)/f.width,c[0]=c[0]*2-1,c[1]=(i-f.y)/f.height,c[1]=c[1]*2-1,l}});Ui.opaqueSortCompare=Ui.prototype.opaqueSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.renderOrder-i.renderOrder},Ui.transparentSortCompare=Ui.prototype.transparentSortCompare=function(t,i){return t.renderOrder===i.renderOrder?t.__depth===i.__depth?t.__program===i.__program?t.material===i.material?t.geometry.__uid__-i.geometry.__uid__:t.material.__uid__-i.material.__uid__:t.__program&&i.__program?t.__program.__uid__-i.__program.__uid__:0:t.__depth-i.__depth:t.renderOrder-i.renderOrder};var or={IDENTITY:Rr(),WORLD:Rr(),VIEW:Rr(),PROJECTION:Rr(),WORLDVIEW:Rr(),VIEWPROJECTION:Rr(),WORLDVIEWPROJECTION:Rr(),WORLDINVERSE:Rr(),VIEWINVERSE:Rr(),PROJECTIONINVERSE:Rr(),WORLDVIEWINVERSE:Rr(),VIEWPROJECTIONINVERSE:Rr(),WORLDVIEWPROJECTIONINVERSE:Rr(),WORLDTRANSPOSE:Rr(),VIEWTRANSPOSE:Rr(),PROJECTIONTRANSPOSE:Rr(),WORLDVIEWTRANSPOSE:Rr(),VIEWPROJECTIONTRANSPOSE:Rr(),WORLDVIEWPROJECTIONTRANSPOSE:Rr(),WORLDINVERSETRANSPOSE:Rr(),VIEWINVERSETRANSPOSE:Rr(),PROJECTIONINVERSETRANSPOSE:Rr(),WORLDVIEWINVERSETRANSPOSE:Rr(),VIEWPROJECTIONINVERSETRANSPOSE:Rr(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:Rr()};Ui.COLOR_BUFFER_BIT=D.COLOR_BUFFER_BIT,Ui.DEPTH_BUFFER_BIT=D.DEPTH_BUFFER_BIT,Ui.STENCIL_BUFFER_BIT=D.STENCIL_BUFFER_BIT;var no=Ui,Fr=function(t,i,l){t=t||0,i=i||0,l=l||0,this.array=xe.fromValues(t,i,l),this._dirty=!0};Fr.prototype={constructor:Fr,add:function(t){return xe.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new Fr(this.x,this.y,this.z)},copy:function(t){return xe.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,i){return xe.cross(this.array,t.array,i.array),this._dirty=!0,this},dist:function(t){return xe.dist(this.array,t.array)},distance:function(t){return xe.distance(this.array,t.array)},div:function(t){return xe.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return xe.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return xe.dot(this.array,t.array)},len:function(){return xe.len(this.array)},length:function(){return xe.length(this.array)},lerp:function(t,i,l){return xe.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return xe.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return xe.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return xe.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return xe.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return xe.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return xe.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return xe.random(this.array,t),this._dirty=!0,this},scale:function(t){return xe.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return xe.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return xe.sqrDist(this.array,t.array)},squaredDistance:function(t){return xe.squaredDistance(this.array,t.array)},sqrLen:function(){return xe.sqrLen(this.array)},squaredLength:function(){return xe.squaredLength(this.array)},sub:function(t){return xe.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return xe.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return xe.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return xe.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return xe.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var i=this.array;if(t=t.array,t[15]===0){var l=-1/i[2];i[0]=t[0]*i[0]*l,i[1]=t[5]*i[1]*l,i[2]=(t[10]*i[2]+t[14])*l}else i[0]=t[0]*i[0]+t[12],i[1]=t[5]*i[1]+t[13],i[2]=t[10]*i[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,i){Fr.eulerFromQuat(this,t,i)},eulerFromMat3:function(t,i){Fr.eulerFromMat3(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ea=Object.defineProperty;if(ea){var Co=Fr.prototype;ea(Co,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ea(Co,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ea(Co,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}Fr.add=function(t,i,l){return xe.add(t.array,i.array,l.array),t._dirty=!0,t},Fr.set=function(t,i,l,f){xe.set(t.array,i,l,f),t._dirty=!0},Fr.copy=function(t,i){return xe.copy(t.array,i.array),t._dirty=!0,t},Fr.cross=function(t,i,l){return xe.cross(t.array,i.array,l.array),t._dirty=!0,t},Fr.dist=function(t,i){return xe.distance(t.array,i.array)},Fr.distance=Fr.dist,Fr.div=function(t,i,l){return xe.divide(t.array,i.array,l.array),t._dirty=!0,t},Fr.divide=Fr.div,Fr.dot=function(t,i){return xe.dot(t.array,i.array)},Fr.len=function(t){return xe.length(t.array)},Fr.lerp=function(t,i,l,f){return xe.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},Fr.min=function(t,i,l){return xe.min(t.array,i.array,l.array),t._dirty=!0,t},Fr.max=function(t,i,l){return xe.max(t.array,i.array,l.array),t._dirty=!0,t},Fr.mul=function(t,i,l){return xe.multiply(t.array,i.array,l.array),t._dirty=!0,t},Fr.multiply=Fr.mul,Fr.negate=function(t,i){return xe.negate(t.array,i.array),t._dirty=!0,t},Fr.normalize=function(t,i){return xe.normalize(t.array,i.array),t._dirty=!0,t},Fr.random=function(t,i){return xe.random(t.array,i),t._dirty=!0,t},Fr.scale=function(t,i,l){return xe.scale(t.array,i.array,l),t._dirty=!0,t},Fr.scaleAndAdd=function(t,i,l,f){return xe.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},Fr.sqrDist=function(t,i){return xe.sqrDist(t.array,i.array)},Fr.squaredDistance=Fr.sqrDist,Fr.sqrLen=function(t){return xe.sqrLen(t.array)},Fr.squaredLength=Fr.sqrLen,Fr.sub=function(t,i,l){return xe.subtract(t.array,i.array,l.array),t._dirty=!0,t},Fr.subtract=Fr.sub,Fr.transformMat3=function(t,i,l){return xe.transformMat3(t.array,i.array,l.array),t._dirty=!0,t},Fr.transformMat4=function(t,i,l){return xe.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},Fr.transformQuat=function(t,i,l){return xe.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};function wi(t,i,l){return t<i?i:t>l?l:t}var hn=Math.atan2,ki=Math.asin,ra=Math.abs;Fr.eulerFromQuat=function(t,i,yt){t._dirty=!0,i=i.array;var f=t.array,c=i[0],p=i[1],y=i[2],x=i[3],w=c*c,E=p*p,B=y*y,q=x*x,yt=(yt||"XYZ").toUpperCase();switch(yt){case"XYZ":f[0]=hn(2*(c*x-p*y),q-w-E+B),f[1]=ki(wi(2*(c*y+p*x),-1,1)),f[2]=hn(2*(y*x-c*p),q+w-E-B);break;case"YXZ":f[0]=ki(wi(2*(c*x-p*y),-1,1)),f[1]=hn(2*(c*y+p*x),q-w-E+B),f[2]=hn(2*(c*p+y*x),q-w+E-B);break;case"ZXY":f[0]=ki(wi(2*(c*x+p*y),-1,1)),f[1]=hn(2*(p*x-y*c),q-w-E+B),f[2]=hn(2*(y*x-c*p),q-w+E-B);break;case"ZYX":f[0]=hn(2*(c*x+y*p),q-w-E+B),f[1]=ki(wi(2*(p*x-c*y),-1,1)),f[2]=hn(2*(c*p+y*x),q+w-E-B);break;case"YZX":f[0]=hn(2*(c*x-y*p),q-w+E-B),f[1]=hn(2*(p*x-c*y),q+w-E-B),f[2]=ki(wi(2*(c*p+y*x),-1,1));break;case"XZY":f[0]=hn(2*(c*x+p*y),q-w+E-B),f[1]=hn(2*(c*y+p*x),q+w-E-B),f[2]=ki(wi(2*(y*x-c*p),-1,1));break;default:console.warn("Unkown order: "+yt)}return t},Fr.eulerFromMat3=function(t,i,Mt){var f=i.array,c=f[0],p=f[3],y=f[6],x=f[1],w=f[4],E=f[7],B=f[2],q=f[5],yt=f[8],_t=t.array,Mt=(Mt||"XYZ").toUpperCase();switch(Mt){case"XYZ":_t[1]=ki(wi(y,-1,1)),ra(y)<.99999?(_t[0]=hn(-E,yt),_t[2]=hn(-p,c)):(_t[0]=hn(q,w),_t[2]=0);break;case"YXZ":_t[0]=ki(-wi(E,-1,1)),ra(E)<.99999?(_t[1]=hn(y,yt),_t[2]=hn(x,w)):(_t[1]=hn(-B,c),_t[2]=0);break;case"ZXY":_t[0]=ki(wi(q,-1,1)),ra(q)<.99999?(_t[1]=hn(-B,yt),_t[2]=hn(-p,w)):(_t[1]=0,_t[2]=hn(x,c));break;case"ZYX":_t[1]=ki(-wi(B,-1,1)),ra(B)<.99999?(_t[0]=hn(q,yt),_t[2]=hn(x,c)):(_t[0]=0,_t[2]=hn(-p,w));break;case"YZX":_t[2]=ki(wi(x,-1,1)),ra(x)<.99999?(_t[0]=hn(-E,w),_t[1]=hn(-B,c)):(_t[0]=0,_t[1]=hn(y,yt));break;case"XZY":_t[2]=ki(-wi(p,-1,1)),ra(p)<.99999?(_t[0]=hn(q,w),_t[1]=hn(y,c)):(_t[0]=hn(-E,yt),_t[1]=0);break;default:console.warn("Unkown order: "+Mt)}return t._dirty=!0,t},Object.defineProperties(Fr,{POSITIVE_X:{get:function(){return new Fr(1,0,0)}},NEGATIVE_X:{get:function(){return new Fr(-1,0,0)}},POSITIVE_Y:{get:function(){return new Fr(0,1,0)}},NEGATIVE_Y:{get:function(){return new Fr(0,-1,0)}},POSITIVE_Z:{get:function(){return new Fr(0,0,1)}},NEGATIVE_Z:{get:function(){return new Fr(0,0,-1)}},UP:{get:function(){return new Fr(0,1,0)}},ZERO:{get:function(){return new Fr}}});var ur=Fr,Po=1e-5,As=function(t,i){this.origin=t||new ur,this.direction=i||new ur};As.prototype={constructor:As,intersectPlane:function(t,i){var l=t.normal.array,f=t.distance,c=this.origin.array,p=this.direction.array,y=xe.dot(l,p);if(y===0)return null;i||(i=new ur);var x=(xe.dot(l,c)-f)/y;return xe.scaleAndAdd(i.array,c,p,-x),i._dirty=!0,i},mirrorAgainstPlane:function(t){var i=xe.dot(t.normal.array,this.direction.array);xe.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,-i*2),this.direction._dirty=!0},distanceToPoint:function(){var t=xe.create();return function(i){xe.sub(t,i,this.origin.array);var l=xe.dot(t,this.direction.array);if(l<0)return xe.distance(this.origin.array,i);var f=xe.lenSquared(t);return Math.sqrt(f-l*l)}}(),intersectSphere:function(){var t=xe.create();return function(i,l,f){var c=this.origin.array,p=this.direction.array;i=i.array,xe.sub(t,i,c);var y=xe.dot(t,p),x=xe.squaredLength(t),w=x-y*y,E=l*l;if(!(w>E)){var B=Math.sqrt(E-w),q=y-B,yt=y+B;return f||(f=new ur),q<0?yt<0?null:(xe.scaleAndAdd(f.array,c,p,yt),f):(xe.scaleAndAdd(f.array,c,p,q),f)}}}(),intersectBoundingBox:function(t,i){var l=this.direction.array,f=this.origin.array,c=t.min.array,p=t.max.array,y=1/l[0],x=1/l[1],w=1/l[2],E,B,q,yt,_t,Mt;if(y>=0?(E=(c[0]-f[0])*y,B=(p[0]-f[0])*y):(B=(c[0]-f[0])*y,E=(p[0]-f[0])*y),x>=0?(q=(c[1]-f[1])*x,yt=(p[1]-f[1])*x):(yt=(c[1]-f[1])*x,q=(p[1]-f[1])*x),E>yt||q>B||((q>E||E!==E)&&(E=q),(yt<B||B!==B)&&(B=yt),w>=0?(_t=(c[2]-f[2])*w,Mt=(p[2]-f[2])*w):(Mt=(c[2]-f[2])*w,_t=(p[2]-f[2])*w),E>Mt||_t>B)||((_t>E||E!==E)&&(E=_t),(Mt<B||B!==B)&&(B=Mt),B<0))return null;var Ct=E>=0?E:B;return i||(i=new ur),xe.scaleAndAdd(i.array,f,l,Ct),i},intersectTriangle:function(){var t=xe.create(),i=xe.create(),l=xe.create(),f=xe.create();return function(c,p,y,x,w,E){var B=this.direction.array,q=this.origin.array;c=c.array,p=p.array,y=y.array,xe.sub(t,p,c),xe.sub(i,y,c),xe.cross(f,i,B);var yt=xe.dot(t,f);if(x){if(yt>-Po)return null}else if(yt>-Po&&yt<Po)return null;xe.sub(l,q,c);var _t=xe.dot(f,l)/yt;if(_t<0||_t>1)return null;xe.cross(f,t,l);var Mt=xe.dot(B,f)/yt;if(Mt<0||Mt>1||_t+Mt>1)return null;xe.cross(f,t,i);var Ct=-xe.dot(l,f)/yt;return Ct<0?null:(w||(w=new ur),E&&ur.set(E,1-_t-Mt,_t,Mt),xe.scaleAndAdd(w.array,q,B,Ct),w)}}(),applyTransform:function(t){ur.add(this.direction,this.direction,this.origin),ur.transformMat4(this.origin,this.origin,t),ur.transformMat4(this.direction,this.direction,t),ur.sub(this.direction,this.direction,this.origin),ur.normalize(this.direction,this.direction)},copy:function(t){ur.copy(this.origin,t.origin),ur.copy(this.direction,t.direction)},clone:function(){var t=new As;return t.copy(this),t}};var Lo=As,kr={};kr.create=function(){var t=new vr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},kr.clone=function(t){var i=new vr(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},kr.fromValues=function(t,i,l,f){var c=new vr(4);return c[0]=t,c[1]=i,c[2]=l,c[3]=f,c},kr.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},kr.set=function(t,i,l,f,c){return t[0]=i,t[1]=l,t[2]=f,t[3]=c,t},kr.add=function(t,i,l){return t[0]=i[0]+l[0],t[1]=i[1]+l[1],t[2]=i[2]+l[2],t[3]=i[3]+l[3],t},kr.subtract=function(t,i,l){return t[0]=i[0]-l[0],t[1]=i[1]-l[1],t[2]=i[2]-l[2],t[3]=i[3]-l[3],t},kr.sub=kr.subtract,kr.multiply=function(t,i,l){return t[0]=i[0]*l[0],t[1]=i[1]*l[1],t[2]=i[2]*l[2],t[3]=i[3]*l[3],t},kr.mul=kr.multiply,kr.divide=function(t,i,l){return t[0]=i[0]/l[0],t[1]=i[1]/l[1],t[2]=i[2]/l[2],t[3]=i[3]/l[3],t},kr.div=kr.divide,kr.min=function(t,i,l){return t[0]=Math.min(i[0],l[0]),t[1]=Math.min(i[1],l[1]),t[2]=Math.min(i[2],l[2]),t[3]=Math.min(i[3],l[3]),t},kr.max=function(t,i,l){return t[0]=Math.max(i[0],l[0]),t[1]=Math.max(i[1],l[1]),t[2]=Math.max(i[2],l[2]),t[3]=Math.max(i[3],l[3]),t},kr.scale=function(t,i,l){return t[0]=i[0]*l,t[1]=i[1]*l,t[2]=i[2]*l,t[3]=i[3]*l,t},kr.scaleAndAdd=function(t,i,l,f){return t[0]=i[0]+l[0]*f,t[1]=i[1]+l[1]*f,t[2]=i[2]+l[2]*f,t[3]=i[3]+l[3]*f,t},kr.distance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2],p=i[3]-t[3];return Math.sqrt(l*l+f*f+c*c+p*p)},kr.dist=kr.distance,kr.squaredDistance=function(t,i){var l=i[0]-t[0],f=i[1]-t[1],c=i[2]-t[2],p=i[3]-t[3];return l*l+f*f+c*c+p*p},kr.sqrDist=kr.squaredDistance,kr.length=function(t){var i=t[0],l=t[1],f=t[2],c=t[3];return Math.sqrt(i*i+l*l+f*f+c*c)},kr.len=kr.length,kr.squaredLength=function(t){var i=t[0],l=t[1],f=t[2],c=t[3];return i*i+l*l+f*f+c*c},kr.sqrLen=kr.squaredLength,kr.negate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=-i[3],t},kr.inverse=function(t,i){return t[0]=1/i[0],t[1]=1/i[1],t[2]=1/i[2],t[3]=1/i[3],t},kr.normalize=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*l+f*f+c*c+p*p;return y>0&&(y=1/Math.sqrt(y),t[0]=i[0]*y,t[1]=i[1]*y,t[2]=i[2]*y,t[3]=i[3]*y),t},kr.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]+t[3]*i[3]},kr.lerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2],x=i[3];return t[0]=c+f*(l[0]-c),t[1]=p+f*(l[1]-p),t[2]=y+f*(l[2]-y),t[3]=x+f*(l[3]-x),t},kr.random=function(t,i){return i=i||1,t[0]=Lr(),t[1]=Lr(),t[2]=Lr(),t[3]=Lr(),kr.normalize(t,t),kr.scale(t,t,i),t},kr.transformMat4=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3];return t[0]=l[0]*f+l[4]*c+l[8]*p+l[12]*y,t[1]=l[1]*f+l[5]*c+l[9]*p+l[13]*y,t[2]=l[2]*f+l[6]*c+l[10]*p+l[14]*y,t[3]=l[3]*f+l[7]*c+l[11]*p+l[15]*y,t},kr.transformQuat=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=l[0],x=l[1],w=l[2],E=l[3],B=E*f+x*p-w*c,q=E*c+w*f-y*p,yt=E*p+y*c-x*f,_t=-y*f-x*c-w*p;return t[0]=B*E+_t*-y+q*-w-yt*-x,t[1]=q*E+_t*-x+yt*-y-B*-w,t[2]=yt*E+_t*-w+B*-x-q*-y,t},kr.forEach=function(){var t=kr.create();return function(i,l,f,c,p,y){var x,w;for(l||(l=4),f||(f=0),c?w=Math.min(c*l+f,i.length):w=i.length,x=f;x<w;x+=l)t[0]=i[x],t[1]=i[x+1],t[2]=i[x+2],t[3]=i[x+3],p(t,t,y),i[x]=t[0],i[x+1]=t[1],i[x+2]=t[2],i[x+3]=t[3];return i}}();var mr=kr,Gn={};Gn.create=function(){var t=new vr(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Gn.fromMat4=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[4],t[4]=i[5],t[5]=i[6],t[6]=i[8],t[7]=i[9],t[8]=i[10],t},Gn.clone=function(t){var i=new vr(9);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i[6]=t[6],i[7]=t[7],i[8]=t[8],i},Gn.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},Gn.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Gn.transpose=function(t,i){if(t===i){var l=i[1],f=i[2],c=i[5];t[1]=i[3],t[2]=i[6],t[3]=l,t[5]=i[7],t[6]=f,t[7]=c}else t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8];return t},Gn.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=i[6],E=i[7],B=i[8],q=B*y-x*E,yt=-B*p+x*w,_t=E*p-y*w,Mt=l*q+f*yt+c*_t;return Mt?(Mt=1/Mt,t[0]=q*Mt,t[1]=(-B*f+c*E)*Mt,t[2]=(x*f-c*y)*Mt,t[3]=yt*Mt,t[4]=(B*l-c*w)*Mt,t[5]=(-x*l+c*p)*Mt,t[6]=_t*Mt,t[7]=(-E*l+f*w)*Mt,t[8]=(y*l-f*p)*Mt,t):null},Gn.adjoint=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=i[6],E=i[7],B=i[8];return t[0]=y*B-x*E,t[1]=c*E-f*B,t[2]=f*x-c*y,t[3]=x*w-p*B,t[4]=l*B-c*w,t[5]=c*p-l*x,t[6]=p*E-y*w,t[7]=f*w-l*E,t[8]=l*y-f*p,t},Gn.determinant=function(t){var i=t[0],l=t[1],f=t[2],c=t[3],p=t[4],y=t[5],x=t[6],w=t[7],E=t[8];return i*(E*p-y*w)+l*(-E*c+y*x)+f*(w*c-p*x)},Gn.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=i[6],B=i[7],q=i[8],yt=l[0],_t=l[1],Mt=l[2],Ct=l[3],Gt=l[4],Xt=l[5],ne=l[6],te=l[7],qt=l[8];return t[0]=yt*f+_t*y+Mt*E,t[1]=yt*c+_t*x+Mt*B,t[2]=yt*p+_t*w+Mt*q,t[3]=Ct*f+Gt*y+Xt*E,t[4]=Ct*c+Gt*x+Xt*B,t[5]=Ct*p+Gt*w+Xt*q,t[6]=ne*f+te*y+qt*E,t[7]=ne*c+te*x+qt*B,t[8]=ne*p+te*w+qt*q,t},Gn.mul=Gn.multiply,Gn.translate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=i[6],B=i[7],q=i[8],yt=l[0],_t=l[1];return t[0]=f,t[1]=c,t[2]=p,t[3]=y,t[4]=x,t[5]=w,t[6]=yt*f+_t*y+E,t[7]=yt*c+_t*x+B,t[8]=yt*p+_t*w+q,t},Gn.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=i[6],B=i[7],q=i[8],yt=Math.sin(l),_t=Math.cos(l);return t[0]=_t*f+yt*y,t[1]=_t*c+yt*x,t[2]=_t*p+yt*w,t[3]=_t*y-yt*f,t[4]=_t*x-yt*c,t[5]=_t*w-yt*p,t[6]=E,t[7]=B,t[8]=q,t},Gn.scale=function(t,i,l){var f=l[0],c=l[1];return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=c*i[3],t[4]=c*i[4],t[5]=c*i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t},Gn.fromMat2d=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=0,t[3]=i[2],t[4]=i[3],t[5]=0,t[6]=i[4],t[7]=i[5],t[8]=1,t},Gn.fromQuat=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l+l,x=f+f,w=c+c,E=l*y,B=f*y,q=f*x,yt=c*y,_t=c*x,Mt=c*w,Ct=p*y,Gt=p*x,Xt=p*w;return t[0]=1-q-Mt,t[3]=B-Xt,t[6]=yt+Gt,t[1]=B+Xt,t[4]=1-E-Mt,t[7]=_t-Ct,t[2]=yt-Gt,t[5]=_t+Ct,t[8]=1-E-q,t},Gn.normalFromMat4=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=i[6],E=i[7],B=i[8],q=i[9],yt=i[10],_t=i[11],Mt=i[12],Ct=i[13],Gt=i[14],Xt=i[15],ne=l*x-f*y,te=l*w-c*y,qt=l*E-p*y,ge=f*w-c*x,ve=f*E-p*x,Ne=c*E-p*w,Ee=B*Ct-q*Mt,Ve=B*Gt-yt*Mt,Qe=B*Xt-_t*Mt,We=q*Gt-yt*Ct,rr=q*Xt-_t*Ct,fr=yt*Xt-_t*Gt,je=ne*fr-te*rr+qt*We+ge*Qe-ve*Ve+Ne*Ee;return je?(je=1/je,t[0]=(x*fr-w*rr+E*We)*je,t[1]=(w*Qe-y*fr-E*Ve)*je,t[2]=(y*rr-x*Qe+E*Ee)*je,t[3]=(c*rr-f*fr-p*We)*je,t[4]=(l*fr-c*Qe+p*Ve)*je,t[5]=(f*Qe-l*rr-p*Ee)*je,t[6]=(Ct*Ne-Gt*ve+Xt*ge)*je,t[7]=(Gt*qt-Mt*Ne-Xt*te)*je,t[8]=(Mt*ve-Ct*qt+Xt*ne)*je,t):null},Gn.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var Qr=Gn,Xe={};Xe.create=function(){var t=new vr(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Xe.rotationTo=function(){var t=xe.create(),i=xe.fromValues(1,0,0),l=xe.fromValues(0,1,0);return function(f,c,p){var y=xe.dot(c,p);return y<-.999999?(xe.cross(t,i,c),xe.length(t)<1e-6&&xe.cross(t,l,c),xe.normalize(t,t),Xe.setAxisAngle(f,t,Math.PI),f):y>.999999?(f[0]=0,f[1]=0,f[2]=0,f[3]=1,f):(xe.cross(t,c,p),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=1+y,Xe.normalize(f,f))}}(),Xe.setAxes=function(){var t=Qr.create();return function(i,l,f,c){return t[0]=f[0],t[3]=f[1],t[6]=f[2],t[1]=c[0],t[4]=c[1],t[7]=c[2],t[2]=-l[0],t[5]=-l[1],t[8]=-l[2],Xe.normalize(i,Xe.fromMat3(i,t))}}(),Xe.clone=mr.clone,Xe.fromValues=mr.fromValues,Xe.copy=mr.copy,Xe.set=mr.set,Xe.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Xe.setAxisAngle=function(t,i,l){l=l*.5;var f=Math.sin(l);return t[0]=f*i[0],t[1]=f*i[1],t[2]=f*i[2],t[3]=Math.cos(l),t},Xe.add=mr.add,Xe.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],w=l[1],E=l[2],B=l[3];return t[0]=f*B+y*x+c*E-p*w,t[1]=c*B+y*w+p*x-f*E,t[2]=p*B+y*E+f*w-c*x,t[3]=y*B-f*x-c*w-p*E,t},Xe.mul=Xe.multiply,Xe.scale=mr.scale,Xe.rotateX=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),w=Math.cos(l);return t[0]=f*w+y*x,t[1]=c*w+p*x,t[2]=p*w-c*x,t[3]=y*w-f*x,t},Xe.rotateY=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),w=Math.cos(l);return t[0]=f*w-p*x,t[1]=c*w+y*x,t[2]=p*w+f*x,t[3]=y*w-c*x,t},Xe.rotateZ=function(t,i,l){l*=.5;var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),w=Math.cos(l);return t[0]=f*w+c*x,t[1]=c*w-f*x,t[2]=p*w+y*x,t[3]=y*w-p*x,t},Xe.calculateW=function(t,i){var l=i[0],f=i[1],c=i[2];return t[0]=l,t[1]=f,t[2]=c,t[3]=Math.sqrt(Math.abs(1-l*l-f*f-c*c)),t},Xe.dot=mr.dot,Xe.lerp=mr.lerp,Xe.slerp=function(t,i,l,f){var c=i[0],p=i[1],y=i[2],x=i[3],w=l[0],E=l[1],B=l[2],q=l[3],yt,_t,Mt,Ct,Gt;return _t=c*w+p*E+y*B+x*q,_t<0&&(_t=-_t,w=-w,E=-E,B=-B,q=-q),1-_t>1e-6?(yt=Math.acos(_t),Mt=Math.sin(yt),Ct=Math.sin((1-f)*yt)/Mt,Gt=Math.sin(f*yt)/Mt):(Ct=1-f,Gt=f),t[0]=Ct*c+Gt*w,t[1]=Ct*p+Gt*E,t[2]=Ct*y+Gt*B,t[3]=Ct*x+Gt*q,t},Xe.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*l+f*f+c*c+p*p,x=y?1/y:0;return t[0]=-l*x,t[1]=-f*x,t[2]=-c*x,t[3]=p*x,t},Xe.conjugate=function(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t[3]=i[3],t},Xe.length=mr.length,Xe.len=Xe.length,Xe.squaredLength=mr.squaredLength,Xe.sqrLen=Xe.squaredLength,Xe.normalize=mr.normalize,Xe.fromMat3=function(t,i){var l=i[0]+i[4]+i[8],f;if(l>0)f=Math.sqrt(l+1),t[3]=.5*f,f=.5/f,t[0]=(i[5]-i[7])*f,t[1]=(i[6]-i[2])*f,t[2]=(i[1]-i[3])*f;else{var c=0;i[4]>i[0]&&(c=1),i[8]>i[c*3+c]&&(c=2);var p=(c+1)%3,y=(c+2)%3;f=Math.sqrt(i[c*3+c]-i[p*3+p]-i[y*3+y]+1),t[c]=.5*f,f=.5/f,t[3]=(i[p*3+y]-i[y*3+p])*f,t[p]=(i[p*3+c]+i[c*3+p])*f,t[y]=(i[y*3+c]+i[c*3+y])*f}return t};var xr=Xe,ln=function(){this._axisX=new ur,this._axisY=new ur,this._axisZ=new ur,this.array=fe.create(),this._dirty=!0};ln.prototype={constructor:ln,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return fe.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new ln().copy(this)},copy:function(t){return fe.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return fe.determinant(this.array)},fromQuat:function(t){return fe.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,i){return fe.fromRotationTranslation(this.array,t.array,i.array),this._dirty=!0,this},fromMat2d:function(t){return ln.fromMat2d(this,t),this},frustum:function(t,i,l,f,c,p){return fe.frustum(this.array,t,i,l,f,c,p),this._dirty=!0,this},identity:function(){return fe.identity(this.array),this._dirty=!0,this},invert:function(){return fe.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,i,l){return fe.lookAt(this.array,t.array,i.array,l.array),this._dirty=!0,this},mul:function(t){return fe.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return fe.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return fe.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return fe.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,i,l,f,c,p){return fe.ortho(this.array,t,i,l,f,c,p),this._dirty=!0,this},perspective:function(t,i,l,f){return fe.perspective(this.array,t,i,l,f),this._dirty=!0,this},rotate:function(t,i){return fe.rotate(this.array,this.array,t,i.array),this._dirty=!0,this},rotateX:function(t){return fe.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return fe.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return fe.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return fe.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return fe.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return fe.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=xe.create(),i=xe.create(),l=xe.create(),f=Qr.create();return function(c,p,y){var x=this.array;xe.set(t,x[0],x[1],x[2]),xe.set(i,x[4],x[5],x[6]),xe.set(l,x[8],x[9],x[10]);var w=xe.length(t),E=xe.length(i),B=xe.length(l),q=this.determinant();q<0&&(w=-w),c&&c.set(w,E,B),y.set(x[12],x[13],x[14]),Qr.fromMat4(f,x),f[0]/=w,f[1]/=w,f[2]/=w,f[3]/=E,f[4]/=E,f[5]/=E,f[6]/=B,f[7]/=B,f[8]/=B,xr.fromMat3(p.array,f),xr.normalize(p.array,p.array),p._dirty=!0,y._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Vi=Object.defineProperty;if(Vi){var ca=ln.prototype;Vi(ca,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var i=this.array;t=t.array,i[8]=t[0],i[9]=t[1],i[10]=t[2],this._dirty=!0}}),Vi(ca,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var i=this.array;t=t.array,i[4]=t[0],i[5]=t[1],i[6]=t[2],this._dirty=!0}}),Vi(ca,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var i=this.array;t=t.array,i[0]=t[0],i[1]=t[1],i[2]=t[2],this._dirty=!0}})}ln.adjoint=function(t,i){return fe.adjoint(t.array,i.array),t._dirty=!0,t},ln.copy=function(t,i){return fe.copy(t.array,i.array),t._dirty=!0,t},ln.determinant=function(t){return fe.determinant(t.array)},ln.identity=function(t){return fe.identity(t.array),t._dirty=!0,t},ln.ortho=function(t,i,l,f,c,p,y){return fe.ortho(t.array,i,l,f,c,p,y),t._dirty=!0,t},ln.perspective=function(t,i,l,f,c){return fe.perspective(t.array,i,l,f,c),t._dirty=!0,t},ln.lookAt=function(t,i,l,f){return fe.lookAt(t.array,i.array,l.array,f.array),t._dirty=!0,t},ln.invert=function(t,i){return fe.invert(t.array,i.array),t._dirty=!0,t},ln.mul=function(t,i,l){return fe.mul(t.array,i.array,l.array),t._dirty=!0,t},ln.multiply=ln.mul,ln.fromQuat=function(t,i){return fe.fromQuat(t.array,i.array),t._dirty=!0,t},ln.fromRotationTranslation=function(t,i,l){return fe.fromRotationTranslation(t.array,i.array,l.array),t._dirty=!0,t},ln.fromMat2d=function(f,l){f._dirty=!0;var l=l.array,f=f.array;return f[0]=l[0],f[4]=l[2],f[12]=l[4],f[1]=l[1],f[5]=l[3],f[13]=l[5],f},ln.rotate=function(t,i,l,f){return fe.rotate(t.array,i.array,l,f.array),t._dirty=!0,t},ln.rotateX=function(t,i,l){return fe.rotateX(t.array,i.array,l),t._dirty=!0,t},ln.rotateY=function(t,i,l){return fe.rotateY(t.array,i.array,l),t._dirty=!0,t},ln.rotateZ=function(t,i,l){return fe.rotateZ(t.array,i.array,l),t._dirty=!0,t},ln.scale=function(t,i,l){return fe.scale(t.array,i.array,l.array),t._dirty=!0,t},ln.transpose=function(t,i){return fe.transpose(t.array,i.array),t._dirty=!0,t},ln.translate=function(t,i,l){return fe.translate(t.array,i.array,l.array),t._dirty=!0,t};var Cr=ln,cn=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f===void 0?1:f,this.array=xr.fromValues(t,i,l,f),this._dirty=!0};cn.prototype={constructor:cn,add:function(t){return xr.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return xr.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new cn(this.x,this.y,this.z,this.w)},conjugate:function(){return xr.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return xr.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return xr.dot(this.array,t.array)},fromMat3:function(t){return xr.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=Qr.create();return function(i){return Qr.fromMat4(t,i.array),Qr.transpose(t,t),xr.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return xr.identity(this.array),this._dirty=!0,this},invert:function(){return xr.invert(this.array,this.array),this._dirty=!0,this},len:function(){return xr.len(this.array)},length:function(){return xr.length(this.array)},lerp:function(t,i,l){return xr.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},mul:function(t){return xr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return xr.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return xr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return xr.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return xr.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return xr.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return xr.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return xr.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,i){return xr.rotationTo(this.array,t.array,i.array),this._dirty=!0,this},setAxes:function(t,i,l){return xr.setAxes(this.array,t.array,i.array,l.array),this._dirty=!0,this},setAxisAngle:function(t,i){return xr.setAxisAngle(this.array,t.array,i),this._dirty=!0,this},slerp:function(t,i,l){return xr.slerp(this.array,t.array,i.array,l),this._dirty=!0,this},sqrLen:function(){return xr.sqrLen(this.array)},squaredLength:function(){return xr.squaredLength(this.array)},fromEuler:function(t,i){return cn.fromEuler(this,t,i)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Io=Object.defineProperty;if(Io){var bs=cn.prototype;Io(bs,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Io(bs,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Io(bs,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Io(bs,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}cn.add=function(t,i,l){return xr.add(t.array,i.array,l.array),t._dirty=!0,t},cn.set=function(t,i,l,f,c){xr.set(t.array,i,l,f,c),t._dirty=!0},cn.copy=function(t,i){return xr.copy(t.array,i.array),t._dirty=!0,t},cn.calculateW=function(t,i){return xr.calculateW(t.array,i.array),t._dirty=!0,t},cn.conjugate=function(t,i){return xr.conjugate(t.array,i.array),t._dirty=!0,t},cn.identity=function(t){return xr.identity(t.array),t._dirty=!0,t},cn.invert=function(t,i){return xr.invert(t.array,i.array),t._dirty=!0,t},cn.dot=function(t,i){return xr.dot(t.array,i.array)},cn.len=function(t){return xr.length(t.array)},cn.lerp=function(t,i,l,f){return xr.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},cn.slerp=function(t,i,l,f){return xr.slerp(t.array,i.array,l.array,f),t._dirty=!0,t},cn.mul=function(t,i,l){return xr.multiply(t.array,i.array,l.array),t._dirty=!0,t},cn.multiply=cn.mul,cn.rotateX=function(t,i,l){return xr.rotateX(t.array,i.array,l),t._dirty=!0,t},cn.rotateY=function(t,i,l){return xr.rotateY(t.array,i.array,l),t._dirty=!0,t},cn.rotateZ=function(t,i,l){return xr.rotateZ(t.array,i.array,l),t._dirty=!0,t},cn.setAxisAngle=function(t,i,l){return xr.setAxisAngle(t.array,i.array,l),t._dirty=!0,t},cn.normalize=function(t,i){return xr.normalize(t.array,i.array),t._dirty=!0,t},cn.sqrLen=function(t){return xr.sqrLen(t.array)},cn.squaredLength=cn.sqrLen,cn.fromMat3=function(t,i){return xr.fromMat3(t.array,i.array),t._dirty=!0,t},cn.setAxes=function(t,i,l,f){return xr.setAxes(t.array,i.array,l.array,f.array),t._dirty=!0,t},cn.rotationTo=function(t,i,l){return xr.rotationTo(t.array,i.array,l.array),t._dirty=!0,t},cn.fromEuler=function(t,i,B){t._dirty=!0,i=i.array;var f=t.array,c=Math.cos(i[0]/2),p=Math.cos(i[1]/2),y=Math.cos(i[2]/2),x=Math.sin(i[0]/2),w=Math.sin(i[1]/2),E=Math.sin(i[2]/2),B=(B||"XYZ").toUpperCase();switch(B){case"XYZ":f[0]=x*p*y+c*w*E,f[1]=c*w*y-x*p*E,f[2]=c*p*E+x*w*y,f[3]=c*p*y-x*w*E;break;case"YXZ":f[0]=x*p*y+c*w*E,f[1]=c*w*y-x*p*E,f[2]=c*p*E-x*w*y,f[3]=c*p*y+x*w*E;break;case"ZXY":f[0]=x*p*y-c*w*E,f[1]=c*w*y+x*p*E,f[2]=c*p*E+x*w*y,f[3]=c*p*y-x*w*E;break;case"ZYX":f[0]=x*p*y-c*w*E,f[1]=c*w*y+x*p*E,f[2]=c*p*E-x*w*y,f[3]=c*p*y+x*w*E;break;case"YZX":f[0]=x*p*y+c*w*E,f[1]=c*w*y+x*p*E,f[2]=c*p*E-x*w*y,f[3]=c*p*y-x*w*E;break;case"XZY":f[0]=x*p*y-c*w*E,f[1]=c*w*y-x*p*E,f[2]=c*p*E+x*w*y,f[3]=c*p*y+x*w*E;break}};var Sl=cn,vn=xe.set,on=xe.copy,Di=function(t,i){this.min=t||new ur(1/0,1/0,1/0),this.max=i||new ur(-1/0,-1/0,-1/0),this.vertices=null};Di.prototype={constructor:Di,updateFromVertices:function(t){if(t.length>0){var i=this.min,l=this.max,f=i.array,c=l.array;on(f,t[0]),on(c,t[0]);for(var p=1;p<t.length;p++){var y=t[p];y[0]<f[0]&&(f[0]=y[0]),y[1]<f[1]&&(f[1]=y[1]),y[2]<f[2]&&(f[2]=y[2]),y[0]>c[0]&&(c[0]=y[0]),y[1]>c[1]&&(c[1]=y[1]),y[2]>c[2]&&(c[2]=y[2])}i._dirty=!0,l._dirty=!0}},union:function(t){var i=this.min,l=this.max;return xe.min(i.array,i.array,t.min.array),xe.max(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersection:function(t){var i=this.min,l=this.max;return xe.max(i.array,i.array,t.min.array),xe.min(l.array,l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},intersectBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,c=t.max.array;return!(i[0]>c[0]||i[1]>c[1]||i[2]>c[2]||l[0]<f[0]||l[1]<f[1]||l[2]<f[2])},containBoundingBox:function(t){var i=this.min.array,l=this.max.array,f=t.min.array,c=t.max.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=c[0]&&l[1]>=c[1]&&l[2]>=c[2]},containPoint:function(t){var i=this.min.array,l=this.max.array,f=t.array;return i[0]<=f[0]&&i[1]<=f[1]&&i[2]<=f[2]&&l[0]>=f[0]&&l[1]>=f[1]&&l[2]>=f[2]},isFinite:function(){var t=this.min.array,i=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(i[0])&&isFinite(i[1])&&isFinite(i[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=xe.create(),i=xe.create(),l=xe.create(),f=xe.create(),c=xe.create(),p=xe.create();return function(y,x){var w=y.min.array,E=y.max.array,B=x.array;return t[0]=B[0]*w[0],t[1]=B[1]*w[0],t[2]=B[2]*w[0],i[0]=B[0]*E[0],i[1]=B[1]*E[0],i[2]=B[2]*E[0],l[0]=B[4]*w[1],l[1]=B[5]*w[1],l[2]=B[6]*w[1],f[0]=B[4]*E[1],f[1]=B[5]*E[1],f[2]=B[6]*E[1],c[0]=B[8]*w[2],c[1]=B[9]*w[2],c[2]=B[10]*w[2],p[0]=B[8]*E[2],p[1]=B[9]*E[2],p[2]=B[10]*E[2],w=this.min.array,E=this.max.array,w[0]=Math.min(t[0],i[0])+Math.min(l[0],f[0])+Math.min(c[0],p[0])+B[12],w[1]=Math.min(t[1],i[1])+Math.min(l[1],f[1])+Math.min(c[1],p[1])+B[13],w[2]=Math.min(t[2],i[2])+Math.min(l[2],f[2])+Math.min(c[2],p[2])+B[14],E[0]=Math.max(t[0],i[0])+Math.max(l[0],f[0])+Math.max(c[0],p[0])+B[12],E[1]=Math.max(t[1],i[1])+Math.max(l[1],f[1])+Math.max(c[1],p[1])+B[13],E[2]=Math.max(t[2],i[2])+Math.max(l[2],f[2])+Math.max(c[2],p[2])+B[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var i=this.min.array,l=this.max.array,f=t.array,c=i[0],p=i[1],y=i[2],x=l[0],w=l[1],E=i[2],B=l[0],q=l[1],yt=l[2];if(f[15]===1)i[0]=f[0]*c+f[12],i[1]=f[5]*p+f[13],l[2]=f[10]*y+f[14],l[0]=f[0]*B+f[12],l[1]=f[5]*q+f[13],i[2]=f[10]*yt+f[14];else{var _t=-1/y;i[0]=f[0]*c*_t,i[1]=f[5]*p*_t,l[2]=(f[10]*y+f[14])*_t,_t=-1/E,l[0]=f[0]*x*_t,l[1]=f[5]*w*_t,_t=-1/yt,i[2]=(f[10]*yt+f[14])*_t}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var i=0;i<8;i++)t[i]=xe.fromValues(0,0,0);this.vertices=t}var l=this.min.array,f=this.max.array;return vn(t[0],l[0],l[1],l[2]),vn(t[1],l[0],f[1],l[2]),vn(t[2],f[0],l[1],l[2]),vn(t[3],f[0],f[1],l[2]),vn(t[4],l[0],l[1],f[2]),vn(t[5],l[0],f[1],f[2]),vn(t[6],f[0],l[1],f[2]),vn(t[7],f[0],f[1],f[2]),this},copy:function(t){var i=this.min,l=this.max;return on(i.array,t.min.array),on(l.array,t.max.array),i._dirty=!0,l._dirty=!0,this},clone:function(){var t=new Di;return t.copy(this),t}};var Ie=Di,lu=0,Ms=X.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},function(){this.name||(this.name=(this.type||"NODE")+"_"+lu++),this.position||(this.position=new ur),this.rotation||(this.rotation=new Sl),this.scale||(this.scale=new ur(1,1,1)),this.worldTransform=new Cr,this.localTransform=new Cr,this._children=[]},{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var i=this._scene;if(i){var l=i._nodeRepository;delete l[this.name],l[t]=this}this.name=t},add:function(t){var i=t._parent;if(i!==this){i&&i.remove(t),t._parent=this,this._children.push(t);var l=this._scene;l&&l!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var i=this._children,l=i.indexOf(t);l<0||(i.splice(l,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,i=0;i<t.length;i++)t[i]._parent=null,this._scene&&t[i].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){for(var i=t._parent;i;){if(i===this)return!0;i=i._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var i=this._children,l=0;l<i.length;l++)if(i[l].name===t)return i[l]},getDescendantByName:function(t){for(var i=this._children,l=0;l<i.length;l++){var f=i[l];if(f.name===t)return f;var c=f.getDescendantByName(t);if(c)return c}},queryNode:function(t){if(!!t){for(var i=t.split("/"),l=this,f=0;f<i.length;f++){var c=i[f];if(!!c){for(var p=!1,y=l._children,x=0;x<y.length;x++){var w=y[x];if(w.name===c){l=w,p=!0;break}}if(!p)return}}return l}},getPath:function(t){if(!this._parent)return"/";for(var i=this._parent,l=this.name;i._parent&&(l=i.name+"/"+l,i._parent!=t);)i=i._parent;return!i._parent&&t?null:l},traverse:function(t,i){t.call(i,this);for(var l=this._children,f=0,c=l.length;f<c;f++)l[f].traverse(t,i)},eachChild:function(t,i){for(var l=this._children,f=0,c=l.length;f<c;f++){var p=l[f];t.call(i,p,f)}},setLocalTransform:function(t){fe.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){var i=t?null:this.scale;this.localTransform.decomposeMatrix(i,this.rotation,this.position)},setWorldTransform:function(t){fe.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=fe.create();return function(i){var l=this.localTransform,f=this.worldTransform;this._parent?(fe.invert(t,this._parent.worldTransform.array),fe.multiply(l.array,t,f.array)):fe.copy(l.array,f.array);var c=i?null:this.scale;l.decomposeMatrix(c,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,i=this.rotation,l=this.scale;if(this.transformNeedsUpdate()){var f=this.localTransform.array;fe.fromRotationTranslation(f,i.array,t.array),fe.scale(f,f,l.array),i._dirty=!1,l._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,i=this.worldTransform.array;this._parent?fe.multiplyAffine(i,this._parent.worldTransform.array,t):fe.copy(i,t)},updateWorldTransform:function(){for(var t=this;t&&t.getParent()&&t.getParent().transformNeedsUpdate();)t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var i=this._children,l=0,f=i.length;l<f;l++)i[l].update(t)},getBoundingBox:function(){function t(c){return!c.invisible&&c.geometry}var i=new Ie,l=new Cr,f=new Cr;return function(c,p){return p=p||new Ie,c=c||t,this._parent?Cr.invert(f,this._parent.worldTransform):Cr.identity(f),this.traverse(function(y){y.geometry&&y.geometry.boundingBox&&(i.copy(y.geometry.boundingBox),Cr.multiply(l,f,y.worldTransform),i.applyTransform(l),p.union(i))},this,t),p}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var i=this.worldTransform.array;if(t){var l=t.array;return l[0]=i[12],l[1]=i[13],l[2]=i[14],t}else return new ur(i[12],i[13],i[14])},clone:function(){var t=new this.constructor,i=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var l=0;l<i.length;l++)t.add(i[l].clone());return t},rotateAround:function(){var t=new ur,i=new Cr;return function(l,f,c){t.copy(this.position).subtract(l);var p=this.localTransform;p.identity(),p.translate(l),p.rotate(c,f),i.fromRotationTranslation(this.rotation,t),p.multiply(i),p.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new Cr;return function(i,l){t.lookAt(this.position,i,l||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=i}}()}),Pi=Ms,Jn=Pi.extend({material:null,geometry:null,mode:D.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:D.BACK,frontFace:D.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,i){},getBoundingBox:function(t,i){return i=Pi.prototype.getBoundingBox.call(this,t,i),this.geometry&&this.geometry.boundingBox&&i.union(this.geometry.boundingBox),i},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var i=Pi.prototype.clone.call(this);i.geometry=this.geometry,i.material=this.material;for(var l=0;l<t.length;l++){var f=t[l];i[f]!==this[f]&&(i[f]=this[f])}return i}}()});Jn.POINTS=D.POINTS,Jn.LINES=D.LINES,Jn.LINE_LOOP=D.LINE_LOOP,Jn.LINE_STRIP=D.LINE_STRIP,Jn.TRIANGLES=D.TRIANGLES,Jn.TRIANGLE_STRIP=D.TRIANGLE_STRIP,Jn.TRIANGLE_FAN=D.TRIANGLE_FAN,Jn.BACK=D.BACK,Jn.FRONT=D.FRONT,Jn.FRONT_AND_BACK=D.FRONT_AND_BACK,Jn.CW=D.CW,Jn.CCW=D.CCW;var Cn=Jn,Rn=X.extend({scene:null,camera:null,renderer:null},function(){this._ray=new Lo,this._ndc=new le},{pick:function(t,i,l){var f=this.pickAll(t,i,[],l);return f[0]||null},pickAll:function(t,i,l,f){return this.renderer.screenToNDC(t,i,this._ndc),this.camera.castRay(this._ndc,this._ray),l=l||[],this._intersectNode(this.scene,l,f||!1),l.sort(this._intersectionCompareFunc),l},_intersectNode:function(t,i,l){t instanceof Cn&&t.isRenderable()&&(!t.ignorePicking||l)&&(t.mode===D.TRIANGLES&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)&&this._intersectRenderable(t,i);for(var f=0;f<t._children.length;f++)this._intersectNode(t._children[f],i,l)},_intersectRenderable:function(){var t=new ur,i=new ur,l=new ur,f=new Lo,c=new Cr;return function(p,y){var x=p.isSkinnedMesh();f.copy(this._ray),Cr.invert(c,p.worldTransform),x||f.applyTransform(c);var w=p.geometry,E=x?p.skeleton.boundingBox:w.boundingBox;if(!(E&&!f.intersectBoundingBox(E))){if(w.pick){w.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,p,y);return}else if(w.pickByRay){w.pickByRay(f,p,y);return}var B=p.cullFace===D.BACK&&p.frontFace===D.CCW||p.cullFace===D.FRONT&&p.frontFace===D.CW,q,yt=w.indices,_t=w.attributes.position,Mt=w.attributes.weight,Ct=w.attributes.joint,Gt,Xt=[];if(!(!_t||!_t.value||!yt)){if(x){Gt=p.skeleton.getSubSkinMatrices(p.__uid__,p.joints);for(var ne=0;ne<p.joints.length;ne++){Xt[ne]=Xt[ne]||[];for(var te=0;te<16;te++)Xt[ne][te]=Gt[ne*16+te]}var qt=[],ge=[],ve=[],Ne=[],Ee=[],Ve=w.attributes.skinnedPosition;(!Ve||!Ve.value)&&(w.createAttribute("skinnedPosition","f",3),Ve=w.attributes.skinnedPosition,Ve.init(w.vertexCount));for(var ne=0;ne<w.vertexCount;ne++){_t.get(ne,qt),Mt.get(ne,ge),Ct.get(ne,ve),ge[3]=1-ge[0]-ge[1]-ge[2],xe.set(Ne,0,0,0);for(var te=0;te<4;te++)ve[te]>=0&&ge[te]>1e-4&&(xe.transformMat4(Ee,qt,Xt[ve[te]]),xe.scaleAndAdd(Ne,Ne,Ee,ge[te]));Ve.set(ne,Ne)}}for(var ne=0;ne<yt.length;ne+=3){var Qe=yt[ne],We=yt[ne+1],rr=yt[ne+2],fr=x?w.attributes.skinnedPosition:_t;if(fr.get(Qe,t.array),fr.get(We,i.array),fr.get(rr,l.array),B?q=f.intersectTriangle(t,i,l,p.culling):q=f.intersectTriangle(t,l,i,p.culling),q){var je=new ur;x?ur.copy(je,q):ur.transformMat4(je,q,p.worldTransform),y.push(new Rn.Intersection(q,je,p,[Qe,We,rr],ne/3,ur.dist(je,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,i){return t.distance-i.distance}});Rn.Intersection=function(t,i,l,f,c,p){this.point=t,this.pointWorld=i,this.target=l,this.triangle=f,this.triangleIndex=c,this.distance=p};var uu=Rn,io="__dt__",ao=function(){this._contextId=0,this._caches=[],this._context={}};ao.prototype={use:function(t,i){var l=this._caches;l[t]||(l[t]={},i&&(l[t]=i())),this._contextId=t,this._context=l[t]},put:function(t,i){this._context[t]=i},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var i=io+t;this.put(i,!0)},dirtyAll:function(t){t=t||"";for(var i=io+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!0)},fresh:function(t){t=t||"";var i=io+t;this.put(i,!1)},freshAll:function(t){t=t||"";for(var i=io+t,l=this._caches,f=0;f<l.length;f++)l[f]&&(l[f][i]=!1)},isDirty:function(t){t=t||"";var i=io+t,l=this._context;return!l.hasOwnProperty(i)||l[i]===!0},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,i){var l=Object.keys(this._caches);l.forEach(function(f){t&&t.call(i,f)})},miss:function(t){return!this._context.hasOwnProperty(t)}},ao.prototype.constructor=ao;var Es=ao,zr=X.extend({width:512,height:512,type:D.UNSIGNED_BYTE,format:D.RGBA,wrapS:D.REPEAT,wrapT:D.REPEAT,minFilter:D.LINEAR_MIPMAP_LINEAR,magFilter:D.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},function(){this._cache=new Es},{getWebGLTexture:function(t){var i=t.gl,l=this._cache;return l.use(t.__uid__),l.miss("webgl_texture")&&l.put("webgl_texture",i.createTexture()),this.dynamic?this.update(t):l.isDirty()&&(this.update(t),l.fresh()),l.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var i=t.gl;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,this.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===D.DEPTH_COMPONENT&&(this.useMipmap=!1);var l=t.getGLExtension("EXT_sRGB");this.format===zr.SRGB&&!l&&(this.format=zr.RGB),this.format===zr.SRGB_ALPHA&&!l&&(this.format=zr.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?D.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?D.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===D.NEAREST_MIPMAP_NEAREST||t===D.NEAREST_MIPMAP_LINEAR?D.NEAREST:t===D.LINEAR_MIPMAP_LINEAR||t===D.LINEAR_MIPMAP_NEAREST?D.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var i=1;i<32;i<<=1)t=t|t>>i;return t+1},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("webgl_texture");l&&t.gl.deleteTexture(l),i.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(zr.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(zr.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),zr.BYTE=D.BYTE,zr.UNSIGNED_BYTE=D.UNSIGNED_BYTE,zr.SHORT=D.SHORT,zr.UNSIGNED_SHORT=D.UNSIGNED_SHORT,zr.INT=D.INT,zr.UNSIGNED_INT=D.UNSIGNED_INT,zr.FLOAT=D.FLOAT,zr.HALF_FLOAT=36193,zr.UNSIGNED_INT_24_8_WEBGL=34042,zr.DEPTH_COMPONENT=D.DEPTH_COMPONENT,zr.DEPTH_STENCIL=D.DEPTH_STENCIL,zr.ALPHA=D.ALPHA,zr.RGB=D.RGB,zr.RGBA=D.RGBA,zr.LUMINANCE=D.LUMINANCE,zr.LUMINANCE_ALPHA=D.LUMINANCE_ALPHA,zr.SRGB=35904,zr.SRGB_ALPHA=35906,zr.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,zr.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,zr.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,zr.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,zr.NEAREST=D.NEAREST,zr.LINEAR=D.LINEAR,zr.NEAREST_MIPMAP_NEAREST=D.NEAREST_MIPMAP_NEAREST,zr.LINEAR_MIPMAP_NEAREST=D.LINEAR_MIPMAP_NEAREST,zr.NEAREST_MIPMAP_LINEAR=D.NEAREST_MIPMAP_LINEAR,zr.LINEAR_MIPMAP_LINEAR=D.LINEAR_MIPMAP_LINEAR,zr.REPEAT=D.REPEAT,zr.CLAMP_TO_EDGE=D.CLAMP_TO_EDGE,zr.MIRRORED_REPEAT=D.MIRRORED_REPEAT;var pr=zr,Ai=Cn.extend({skeleton:null,joints:null},function(){this.joints||(this.joints=[])},{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=Cn.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});Ai.POINTS=D.POINTS,Ai.LINES=D.LINES,Ai.LINE_LOOP=D.LINE_LOOP,Ai.LINE_STRIP=D.LINE_STRIP,Ai.TRIANGLES=D.TRIANGLES,Ai.TRIANGLE_STRIP=D.TRIANGLE_STRIP,Ai.TRIANGLE_FAN=D.TRIANGLE_FAN,Ai.BACK=D.BACK,Ai.FRONT=D.FRONT,Ai.FRONT_AND_BACK=D.FRONT_AND_BACK,Ai.CW=D.CW,Ai.CCW=D.CCW;var wa=Ai,oo={};oo.isPowerOfTwo=function(t){return(t&t-1)===0},oo.nextPowerOfTwo=function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},oo.nearestPowerOfTwo=function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))};var Tl=oo,fu=Tl.isPowerOfTwo;function hu(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function wl(t,i){var l=hu(t.width),f=hu(t.height);i=i||document.createElement("canvas"),i.width=l,i.height=f;var c=i.getContext("2d");return c.drawImage(t.image,0,0,l,f),i}var Cs=pr.extend(function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}},{textureType:"texture2D",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type,c=!!(this.convertToPOT&&!this.mipmaps.length&&this.image&&(this.wrapS===pr.REPEAT||this.wrapT===pr.REPEAT)&&this.NPOT);i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,c?this.wrapS:this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,c?this.wrapT:this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,c?this.magFilter:this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,c?this.minFilter:this.getAvailableMinFilter());var p=t.getGLExtension("EXT_texture_filter_anisotropic");if(p&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_2D,p.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var y=t.getGLExtension("OES_texture_half_float");y||(f=D.FLOAT)}if(this.mipmaps.length)for(var x=this.width,w=this.height,E=0;E<this.mipmaps.length;E++){var B=this.mipmaps[E];this._updateTextureData(i,B,E,x,w,l,f,!1),x/=2,w/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f,c),this.useMipmap&&(!this.NPOT||c)&&i.generateMipmap(i.TEXTURE_2D);i.bindTexture(i.TEXTURE_2D,null)},_updateTextureData:function(t,i,l,f,c,p,y,x){if(i.image){var w=i.image;x&&(this._potCanvas=wl(this,this._potCanvas),w=this._potCanvas),t.texImage2D(t.TEXTURE_2D,l,p,p,y,w)}else p<=pr.COMPRESSED_RGBA_S3TC_DXT5_EXT&&p>=pr.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,l,p,f,c,0,i.pixels):t.texImage2D(t.TEXTURE_2D,l,p,f,c,0,p,y,i.pixels)},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_2D,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_2D))},isPowerOfTwo:function(){return fu(this.width)&&fu(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!!(this.width&&this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,i){var l=Z.createImage();i&&(l.crossOrigin=i);var f=this;return l.onload=function(){f.dirty(),f.trigger("success",f)},l.onerror=function(){f.trigger("error",f)},l.src=t,this.image=l,this}});Object.defineProperty(Cs.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Cs.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});var Yr=Cs;function Ro(t){return{byte:Z.Int8Array,ubyte:Z.Uint8Array,short:Z.Int16Array,ushort:Z.Uint16Array}[t]||Z.Float32Array}function Ps(t){return"attr_"+t}function ji(t,i,l,f){switch(this.name=t,this.type=i,this.size=l,this.semantic=f||"",this.value=null,l){case 1:this.get=function(c){return this.value[c]},this.set=function(c,p){this.value[c]=p},this.copy=function(c,p){this.value[c]=this.value[c]};break;case 2:this.get=function(c,p){var y=this.value;return p[0]=y[c*2],p[1]=y[c*2+1],p},this.set=function(c,p){var y=this.value;y[c*2]=p[0],y[c*2+1]=p[1]},this.copy=function(c,p){var y=this.value;p*=2,c*=2,y[c]=y[p],y[c+1]=y[p+1]};break;case 3:this.get=function(c,p){var y=c*3,x=this.value;return p[0]=x[y],p[1]=x[y+1],p[2]=x[y+2],p},this.set=function(c,p){var y=c*3,x=this.value;x[y]=p[0],x[y+1]=p[1],x[y+2]=p[2]},this.copy=function(c,p){var y=this.value;p*=3,c*=3,y[c]=y[p],y[c+1]=y[p+1],y[c+2]=y[p+2]};break;case 4:this.get=function(c,p){var y=this.value,x=c*4;return p[0]=y[x],p[1]=y[x+1],p[2]=y[x+2],p[3]=y[x+3],p},this.set=function(c,p){var y=this.value,x=c*4;y[x]=p[0],y[x+1]=p[1],y[x+2]=p[2],y[x+3]=p[3]},this.copy=function(c,p){var y=this.value;p*=4,c*=4,y[c]=y[p],y[c+1]=y[p+1],y[c+2]=y[p+2],y[c+3]=y[p+3]}}}ji.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var i=Ro(this.type);this.value=new i(t*this.size)}},ji.prototype.fromArray=function(t){var i=Ro(this.type),l;if(t[0]&&t[0].length){var f=0,c=this.size;l=new i(t.length*c);for(var p=0;p<t.length;p++)for(var y=0;y<c;y++)l[f++]=t[p][y]}else l=new i(t);this.value=l},ji.prototype.clone=function(t){var i=new ji(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),i};function Ls(t,i,l,f,c){this.name=t,this.type=i,this.buffer=l,this.size=f,this.semantic=c,this.symbol="",this.needsRemove=!1}function Da(t){this.buffer=t,this.count=0}var Hn=X.extend(function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}},function(){this._cache=new Es,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}},{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),i=0;i<t.length;i++)this.dirtyAttribute(t[i]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(Ps(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,i){if(t<this.triangleCount&&t>=0){i||(i=[]);var l=this.indices;return i[0]=l[t*3],i[1]=l[t*3+1],i[2]=l[t*3+2],i}},setTriangleIndices:function(t,i){var l=this.indices;l[t*3]=i[0],l[t*3+1]=i[1],l[t*3+2]=i[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var i,l=this.vertexCount>65535?Z.Uint32Array:Z.Uint16Array;if(t[0]&&t[0].length){var f=0,c=3;i=new l(t.length*c);for(var p=0;p<t.length;p++)for(var y=0;y<c;y++)i[f++]=t[p][y]}else i=new l(t);this.indices=i},createAttribute:function(t,i,l,f){var c=new ji(t,i,l,f);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=c,this._attributeList.push(t),c},removeAttribute:function(t){var i=this._attributeList,l=i.indexOf(t);return l>=0?(i.splice(l,1),delete this.attributes[t],!0):!1},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,i=this._attributeList;if(t)return t;for(var l=[],f=this.vertexCount,c=0;c<i.length;c++){var p=i[c],y=this.attributes[p];y.value&&y.value.length===f*y.size&&l.push(p)}return this._enabledAttributes=l,l},getBufferChunks:function(t){var i=this._cache;i.use(t.__uid__);var l=i.isDirty("attributes"),f=i.isDirty("indices");if(l||f){this._updateBuffer(t.gl,l,f);for(var c=this.getEnabledAttributes(),p=0;p<c.length;p++)i.fresh(Ps(c[p]));i.fresh("attributes"),i.fresh("indices")}return i.fresh("any"),i.get("chunks")},_updateBuffer:function(t,i,l){var f=this._cache,c=f.get("chunks"),p=!1;c||(c=[],c[0]={attributeBuffers:[],indicesBuffer:null},f.put("chunks",c),p=!0);var y=c[0],x=y.attributeBuffers,w=y.indicesBuffer;if(i||p){var E=this.getEnabledAttributes(),B={};if(!p)for(var q=0;q<x.length;q++)B[x[q].name]=x[q];for(var yt=0;yt<E.length;yt++){var _t=E[yt],Mt=this.attributes[_t],Ct;p||(Ct=B[_t]);var Gt;Ct?Gt=Ct.buffer:Gt=t.createBuffer(),f.isDirty(Ps(_t))&&(t.bindBuffer(t.ARRAY_BUFFER,Gt),t.bufferData(t.ARRAY_BUFFER,Mt.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),x[yt]=new Ls(_t,Mt.type,Gt,Mt.size,Mt.semantic)}for(var q=yt;q<x.length;q++)t.deleteBuffer(x[q].buffer);x.length=yt}this.isUseIndices()&&(l||p)&&(w||(w=new Da(t.createBuffer()),y.indicesBuffer=w),w.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,w.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var c=l[f],p=0;p<c.attributeBuffers.length;p++){var y=c.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}c.indicesBuffer&&t.gl.deleteBuffer(c.indicesBuffer.buffer)}if(this.__vaoCache){var x=t.getGLExtension("OES_vertex_array_object");for(var w in this.__vaoCache){var E=this.__vaoCache[w].vao;E&&x.deleteVertexArrayOES(E)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(Hn.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),!t||!t.value?0:t.value.length/t.size}}),Object.defineProperty(Hn.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}})),Hn.STATIC_DRAW=D.STATIC_DRAW,Hn.DYNAMIC_DRAW=D.DYNAMIC_DRAW,Hn.STREAM_DRAW=D.STREAM_DRAW,Hn.AttributeBuffer=Ls,Hn.IndicesBuffer=Da,Hn.Attribute=ji;var va=Hn,hi=xe.create,da=xe.add,Ji=xe.set,ri=va.Attribute,pa=va.extend(function(){return{attributes:{position:new ri("position","float",3,"POSITION"),texcoord0:new ri("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new ri("texcoord1","float",2,"TEXCOORD_1"),normal:new ri("normal","float",3,"NORMAL"),tangent:new ri("tangent","float",4,"TANGENT"),color:new ri("color","float",4,"COLOR"),weight:new ri("weight","float",3,"WEIGHT"),joint:new ri("joint","float",4,"JOINT"),barycentric:new ri("barycentric","float",3,null)},boundingBox:null}},{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new Ie);var i=this.attributes.position.value;if(i&&i.length){var l=t.min,f=t.max,c=l.array,p=f.array;xe.set(c,i[0],i[1],i[2]),xe.set(p,i[0],i[1],i[2]);for(var y=3;y<i.length;){var x=i[y++],w=i[y++],E=i[y++];x<c[0]&&(c[0]=x),w<c[1]&&(c[1]=w),E<c[2]&&(c[2]=E),x>p[0]&&(p[0]=x),w>p[1]&&(p[1]=w),E>p[2]&&(p[2]=E)}l._dirty=!0,f._dirty=!0}},generateVertexNormals:function(){if(!!this.vertexCount){var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value;if(!f||f.length!==l.length)f=i.normal.value=new Z.Float32Array(l.length);else for(var c=0;c<f.length;c++)f[c]=0;for(var p=hi(),y=hi(),x=hi(),w=hi(),E=hi(),B=hi(),q=t?t.length:this.vertexCount,yt,_t,Mt,Ct=0;Ct<q;){t?(yt=t[Ct++],_t=t[Ct++],Mt=t[Ct++]):(yt=Ct++,_t=Ct++,Mt=Ct++),Ji(p,l[yt*3],l[yt*3+1],l[yt*3+2]),Ji(y,l[_t*3],l[_t*3+1],l[_t*3+2]),Ji(x,l[Mt*3],l[Mt*3+1],l[Mt*3+2]),xe.sub(w,p,y),xe.sub(E,y,x),xe.cross(B,w,E);for(var c=0;c<3;c++)f[yt*3+c]=f[yt*3+c]+B[c],f[_t*3+c]=f[_t*3+c]+B[c],f[Mt*3+c]=f[Mt*3+c]+B[c]}for(var c=0;c<f.length;)Ji(B,f[c],f[c+1],f[c+2]),xe.normalize(B,B),f[c++]=B[0],f[c++]=B[1],f[c++]=B[2];this.dirty()}},generateFaceNormals:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,i=this.attributes,l=i.position.value,f=i.normal.value,c=hi(),p=hi(),y=hi(),x=hi(),w=hi(),E=hi();f||(f=i.normal.value=new Float32Array(l.length));for(var B=t?t.length:this.vertexCount,q,yt,_t,Mt=0;Mt<B;){t?(q=t[Mt++],yt=t[Mt++],_t=t[Mt++]):(q=Mt++,yt=Mt++,_t=Mt++),Ji(c,l[q*3],l[q*3+1],l[q*3+2]),Ji(p,l[yt*3],l[yt*3+1],l[yt*3+2]),Ji(y,l[_t*3],l[_t*3+1],l[_t*3+2]),xe.sub(x,c,p),xe.sub(w,p,y),xe.cross(E,x,w),xe.normalize(E,E);for(var Ct=0;Ct<3;Ct++)f[q*3+Ct]=E[Ct],f[yt*3+Ct]=E[Ct],f[_t*3+Ct]=E[Ct]}this.dirty()}},generateTangents:function(){if(!!this.vertexCount){var t=this.vertexCount,i=this.attributes;i.tangent.value||(i.tangent.value=new Float32Array(t*4));var l=i.texcoord0.value,f=i.position.value,c=i.tangent.value,p=i.normal.value;if(!l){console.warn("Geometry without texcoords can't generate tangents.");return}for(var y=[],x=[],w=0;w<t;w++)y[w]=[0,0,0],x[w]=[0,0,0];for(var E=[0,0,0],B=[0,0,0],q=this.indices,yt=q?q.length:this.vertexCount,_t,Mt,Ct,w=0;w<yt;){q?(_t=q[w++],Mt=q[w++],Ct=q[w++]):(_t=w++,Mt=w++,Ct=w++);var Gt=l[_t*2],Xt=l[Mt*2],ne=l[Ct*2],te=l[_t*2+1],qt=l[Mt*2+1],ge=l[Ct*2+1],ve=f[_t*3],Ne=f[Mt*3],Ee=f[Ct*3],Ve=f[_t*3+1],Qe=f[Mt*3+1],We=f[Ct*3+1],rr=f[_t*3+2],fr=f[Mt*3+2],je=f[Ct*3+2],hr=Ne-ve,wr=Ee-ve,Ir=Qe-Ve,dr=We-Ve,un=fr-rr,Pr=je-rr,Zr=Xt-Gt,sn=ne-Gt,Dn=qt-te,An=ge-te,en=1/(Zr*An-Dn*sn);E[0]=(An*hr-Dn*wr)*en,E[1]=(An*Ir-Dn*dr)*en,E[2]=(An*un-Dn*Pr)*en,B[0]=(Zr*wr-sn*hr)*en,B[1]=(Zr*dr-sn*Ir)*en,B[2]=(Zr*Pr-sn*un)*en,da(y[_t],y[_t],E),da(y[Mt],y[Mt],E),da(y[Ct],y[Ct],E),da(x[_t],x[_t],B),da(x[Mt],x[Mt],B),da(x[Ct],x[Ct],B)}for(var si=hi(),Fn=hi(),Kn=hi(),w=0;w<t;w++){Kn[0]=p[w*3],Kn[1]=p[w*3+1],Kn[2]=p[w*3+2];var pi=y[w];xe.scale(si,Kn,xe.dot(Kn,pi)),xe.sub(si,pi,si),xe.normalize(si,si),xe.cross(Fn,Kn,pi),c[w*4]=si[0],c[w*4+1]=si[1],c[w*4+2]=si[2],c[w*4+3]=xe.dot(Fn,x[w])<0?-1:1}this.dirty()}},isUniqueVertex:function(){return this.isUseIndices()?this.vertexCount===this.indices.length:!0},generateUniqueVertex:function(){if(!(!this.vertexCount||!this.indices)){this.indices.length>65535&&(this.indices=new Z.Uint32Array(this.indices));for(var t=this.attributes,i=this.indices,l=this.getEnabledAttributes(),f={},c=0;c<l.length;c++){var p=l[c];f[p]=t[p].value,t[p].init(this.indices.length)}for(var y=0,x=0;x<i.length;x++){for(var w=i[x],c=0;c<l.length;c++)for(var p=l[c],E=t[p].value,B=t[p].size,q=0;q<B;q++)E[y*B+q]=f[p][w*B+q];i[x]=y,y++}this.dirty()}},generateBarycentric:function(){if(!!this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,i=t.barycentric.value,l=this.indices;if(!(i&&i.length===l.length*3)){i=t.barycentric.value=new Float32Array(l.length*3);for(var f=0;f<(l?l.length:this.vertexCount/3);)for(var c=0;c<3;c++){var p=l?l[f++]:f*3+c;i[p*3+c]=1}this.dirty()}}},applyTransform:function(t){var i=this.attributes,l=i.position.value,f=i.normal.value,c=i.tangent.value;t=t.array;var p=fe.create();fe.invert(p,t),fe.transpose(p,p);var y=xe.transformMat4,x=xe.forEach;x(l,3,0,null,y,t),f&&x(f,3,0,null,y,p),c&&x(c,4,0,null,y,p),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var i=this._cache;i.use(t.__uid__);var l=i.get("chunks");if(l)for(var f=0;f<l.length;f++){for(var c=l[f],p=0;p<c.attributeBuffers.length;p++){var y=c.attributeBuffers[p];t.gl.deleteBuffer(y.buffer)}c.indicesBuffer&&t.gl.deleteBuffer(c.indicesBuffer.buffer)}if(this.__vaoCache){var x=t.getGLExtension("OES_vertex_array_object");for(var w in this.__vaoCache){var E=this.__vaoCache[w].vao;E&&x.deleteVertexArrayOES(E)}}this.__vaoCache={},i.deleteContext(t.__uid__)}});pa.STATIC_DRAW=va.STATIC_DRAW,pa.DYNAMIC_DRAW=va.DYNAMIC_DRAW,pa.STREAM_DRAW=va.STREAM_DRAW,pa.AttributeBuffer=va.AttributeBuffer,pa.IndicesBuffer=va.IndicesBuffer,pa.Attribute=ri;var $r=pa,Zi=`vec3 calcAmbientSHLight(int idx, vec3 N) {
 int offset = 9 * idx;
 return ambientSHLightCoefficients[0]
 + ambientSHLightCoefficients[1] * N.x
 + ambientSHLightCoefficients[2] * N.y
 + ambientSHLightCoefficients[3] * N.z
 + ambientSHLightCoefficients[4] * N.x * N.z
 + ambientSHLightCoefficients[5] * N.z * N.y
 + ambientSHLightCoefficients[6] * N.y * N.x
 + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)
 + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);
}`,Wi="uniform vec3 ",Aa="uniform float ",ni="@export clay.header.",Ua="@end",_n=":unconfigurable;",Oo=[ni+"directional_light",Wi+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+_n,Wi+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+_n,Ua,ni+"ambient_light",Wi+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+_n,Ua,ni+"ambient_sh_light",Wi+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+_n,Wi+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+_n,Zi,Ua,ni+"ambient_cubemap_light",Wi+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+_n,Ua,ni+"point_light",Wi+"pointLightPosition[POINT_LIGHT_COUNT]"+_n,Aa+"pointLightRange[POINT_LIGHT_COUNT]"+_n,Wi+"pointLightColor[POINT_LIGHT_COUNT]"+_n,Ua,ni+"spot_light",Wi+"spotLightPosition[SPOT_LIGHT_COUNT]"+_n,Wi+"spotLightDirection[SPOT_LIGHT_COUNT]"+_n,Aa+"spotLightRange[SPOT_LIGHT_COUNT]"+_n,Aa+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+_n,Aa+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+_n,Aa+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+_n,Wi+"spotLightColor[SPOT_LIGHT_COUNT]"+_n,Ua].join(`
`);_r.import(Oo);var Is=Pi.extend(function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}},{type:"",clone:function(){var t=Pi.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}}),Bi=Is,ka=function(t,i){this.normal=t||new ur(0,1,0),this.distance=i||0};ka.prototype={constructor:ka,distanceToPoint:function(t){return xe.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,i){i||(i=new ur);var l=this.distanceToPoint(t);return xe.scaleAndAdd(i.array,t.array,this.normal.array,-l),i._dirty=!0,i},normalize:function(){var t=1/xe.len(this.normal.array);xe.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var i=t.vertices,l=this.normal.array,f=xe.dot(i[0].array,l)>this.distance,c=1;c<8;c++)if(xe.dot(i[c].array,l)>this.distance!=f)return!0},intersectLine:function(){var t=xe.create();return function(i,l,f){var c=this.distanceToPoint(i),p=this.distanceToPoint(l);if(c>0&&p>0||c<0&&p<0)return null;var y=this.normal.array,x=this.distance,w=i.array;xe.sub(t,l.array,i.array),xe.normalize(t,t);var E=xe.dot(y,t);if(E===0)return null;f||(f=new ur);var B=(xe.dot(y,w)-x)/E;return xe.scaleAndAdd(f.array,w,t,-B),f._dirty=!0,f}}(),applyTransform:function(){var t=fe.create(),i=mr.create(),l=mr.create();return l[3]=1,function(f){f=f.array,xe.scale(l,this.normal.array,this.distance),mr.transformMat4(l,l,f),this.distance=xe.dot(l,this.normal.array),fe.invert(t,f),fe.transpose(t,t),i[3]=0,xe.copy(i,this.normal.array),mr.transformMat4(i,i,t),xe.copy(this.normal.array,i)}}(),copy:function(t){xe.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new ka;return t.copy(this),t}};var Rs=ka,Tn=xe.set,ba=xe.copy,Os=xe.transformMat4,No=Math.min,Va=Math.max,Ns=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new Rs);this.boundingBox=new Ie,this.vertices=[];for(var t=0;t<8;t++)this.vertices[t]=xe.fromValues(0,0,0)};Ns.prototype={setFromProjection:function(t){var i=this.planes,l=t.array,f=l[0],c=l[1],p=l[2],y=l[3],x=l[4],w=l[5],E=l[6],B=l[7],q=l[8],yt=l[9],_t=l[10],Mt=l[11],Ct=l[12],Gt=l[13],Xt=l[14],ne=l[15];Tn(i[0].normal.array,y-f,B-x,Mt-q),i[0].distance=-(ne-Ct),i[0].normalize(),Tn(i[1].normal.array,y+f,B+x,Mt+q),i[1].distance=-(ne+Ct),i[1].normalize(),Tn(i[2].normal.array,y+c,B+w,Mt+yt),i[2].distance=-(ne+Gt),i[2].normalize(),Tn(i[3].normal.array,y-c,B-w,Mt-yt),i[3].distance=-(ne-Gt),i[3].normalize(),Tn(i[4].normal.array,y-p,B-E,Mt-_t),i[4].distance=-(ne-Xt),i[4].normalize(),Tn(i[5].normal.array,y+p,B+E,Mt+_t),i[5].distance=-(ne+Xt),i[5].normalize();var te=this.boundingBox,qt=this.vertices;if(ne===0){var ge=w/f,ve=-Xt/(_t-1),Ne=-Xt/(_t+1),Ee=-Ne/w,Ve=-ve/w;te.min.set(-Ee*ge,-Ee,Ne),te.max.set(Ee*ge,Ee,ve),Tn(qt[0],-Ee*ge,-Ee,Ne),Tn(qt[1],-Ee*ge,Ee,Ne),Tn(qt[2],Ee*ge,-Ee,Ne),Tn(qt[3],Ee*ge,Ee,Ne),Tn(qt[4],-Ve*ge,-Ve,ve),Tn(qt[5],-Ve*ge,Ve,ve),Tn(qt[6],Ve*ge,-Ve,ve),Tn(qt[7],Ve*ge,Ve,ve)}else{var Qe=(-1-Ct)/f,We=(1-Ct)/f,rr=(1-Gt)/w,fr=(-1-Gt)/w,je=(-1-Xt)/_t,hr=(1-Xt)/_t;te.min.set(Math.min(Qe,We),Math.min(fr,rr),Math.min(hr,je)),te.max.set(Math.max(We,Qe),Math.max(rr,fr),Math.max(je,hr));var wr=te.min.array,Ir=te.max.array;Tn(qt[0],wr[0],wr[1],wr[2]),Tn(qt[1],wr[0],Ir[1],wr[2]),Tn(qt[2],Ir[0],wr[1],wr[2]),Tn(qt[3],Ir[0],Ir[1],wr[2]),Tn(qt[4],wr[0],wr[1],Ir[2]),Tn(qt[5],wr[0],Ir[1],Ir[2]),Tn(qt[6],Ir[0],wr[1],Ir[2]),Tn(qt[7],Ir[0],Ir[1],Ir[2])}},getTransformedBoundingBox:function(){var t=xe.create();return function(i,l){var f=this.vertices,c=l.array,p=i.min,y=i.max,x=p.array,w=y.array,E=f[0];Os(t,E,c),ba(x,t),ba(w,t);for(var B=1;B<8;B++)E=f[B],Os(t,E,c),x[0]=No(t[0],x[0]),x[1]=No(t[1],x[1]),x[2]=No(t[2],x[2]),w[0]=Va(t[0],w[0]),w[1]=Va(t[1],w[1]),w[2]=Va(t[2],w[2]);return p._dirty=!0,y._dirty=!0,i}}()};var Bo=Ns,Ma=Pi.extend(function(){return{projectionMatrix:new Cr,invProjectionMatrix:new Cr,viewMatrix:new Cr,frustum:new Bo}},function(){this.update(!0)},{update:function(t){Pi.prototype.update.call(this,t),Cr.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Cr.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){Cr.copy(this.viewMatrix,t),Cr.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){Cr.copy(this.projectionMatrix,t),Cr.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=mr.create();return function(i,l){var f=l!==void 0?l:new Lo,c=i.array[0],p=i.array[1];return mr.set(t,c,p,-1,1),mr.transformMat4(t,t,this.invProjectionMatrix.array),mr.transformMat4(t,t,this.worldTransform.array),xe.scale(f.origin.array,t,1/t[3]),mr.set(t,c,p,1,1),mr.transformMat4(t,t,this.invProjectionMatrix.array),mr.transformMat4(t,t,this.worldTransform.array),xe.scale(t,t,1/t[3]),xe.sub(f.direction.array,t,f.origin.array),xe.normalize(f.direction.array,f.direction.array),f.direction._dirty=!0,f.origin._dirty=!0,f}}()}),na=Ma,vf=fe.create(),cu=fe.create(),so={};function Bs(t){var i=[],l=Object.keys(t);l.sort();for(var f=0;f<l.length;f++){var c=l[f];i.push(c+" "+t[c])}var p=i.join(`
`);if(so[p])return so[p];var y=$.genGUID();return so[p]=y,y}function Dl(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}Dl.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},Dl.prototype.add=function(t,i){i?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},Dl.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var df=Pi.extend(function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Ie,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new ht(20)}},function(){this._scene=this},{addToScene:function(t){t instanceof na?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof Bi&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var i;t instanceof na?(i=this._cameraList.indexOf(t),i>=0&&this._cameraList.splice(i,1)):t instanceof Bi&&(i=this.lights.indexOf(t),i>=0&&this.lights.splice(i,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var i=this._cameraList.indexOf(t);i>=0&&this._cameraList.splice(i,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var i={},l=0;l<t.length;l++){var f=t[l];if(!f.invisible){var c=f.group;i[c]||(i[c]={}),i[c][f.type]=i[c][f.type]||0,i[c][f.type]++}}this._lightNumber=i;for(var p in i)this._lightProgramKeys[p]=Bs(i[p]);this._updateLightUniforms()},cloneNode:function(t){var i=t.clone(),l={};function f(c,p){l[c.__uid__]=p;for(var y=0;y<c._children.length;y++){var x=c._children[y],w=p._children[y];f(x,w)}}return f(t,i),i.traverse(function(c){c.skeleton&&(c.skeleton=c.skeleton.clone(l)),c.material&&(c.material=c.material.clone())}),i},updateRenderList:function(t,i){var l=t.__uid__,f=this._renderLists.get(l);f||(f=new Dl,this._renderLists.put(l,f)),f.startCount(),i&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var c=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,c,f,i),f.endCount(),f},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,i,l,f,c){if(!t.invisible)for(var p=0;p<t._children.length;p++){var y=t._children[p];if(y.isRenderable()){var x=y.isSkinnedMesh()?vf:y.worldTransform.array,w=y.geometry;fe.multiplyAffine(cu,i.viewMatrix.array,x),(c&&!w.boundingBox||!this.isFrustumCulled(y,i,cu))&&f.add(y,y.material.transparent||l)}y._children.length>0&&this._doUpdateRenderList(y,i,l,f,c)}},isFrustumCulled:function(){var t=new Ie,i=new Cr;return function(l,f,c){var p=l.boundingBox;if(p||(l.skeleton&&l.skeleton.boundingBox?p=l.skeleton.boundingBox:p=l.geometry.boundingBox),!p)return!1;if(i.array=c,t.transformFrom(p,i),l.castShadow&&this.viewBoundingBoxLastFrame.union(t),l.frustumCulling){if(!t.intersectBoundingBox(f.frustum.boundingBox))return!0;i.array=f.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(i);var y=t.min.array,x=t.max.array;if(x[0]<-1||y[0]>1||x[1]<-1||y[1]>1||x[2]<-1||y[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(pf);var i=this._lightUniforms;for(var l in i)for(var f in i[l])i[l][f].value.length=0;for(var c=0;c<t.length;c++){var p=t[c];if(!p.invisible){var l=p.group;for(var f in p.uniformTemplates){var y=p.uniformTemplates[f],x=y.value(p);if(x!=null){i[l]||(i[l]={}),i[l][f]||(i[l][f]={type:"",value:[]});var w=i[l][f];switch(w.type=y.type+"v",y.type){case"1i":case"1f":case"t":w.value.push(x);break;case"2f":case"3f":case"4f":for(var E=0;E<x.length;E++)w.value.push(x[E]);break;default:console.error("Unkown light uniform type "+y.type)}}}}}},getLightGroups:function(){var t=[];for(var i in this._lightNumber)t.push(i);return t},getNumberChangedLightGroups:function(){var t=[];for(var i in this._lightNumber)this.isLightNumberChanged(i)&&t.push(i);return t},isLightNumberChanged:function(t){var i=this._previousLightNumber,l=this._lightNumber;for(var f in l[t])if(!i[t]||l[t][f]!==i[t][f])return!0;for(var f in i[t])if(!l[t]||l[t][f]!==i[t][f])return!0;return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(i,l,f){for(var c in i){var p=i[c];if(p.type==="tv"){if(!l.hasUniform(c))continue;for(var y=[],x=0;x<p.value.length;x++){var w=p.value[x],E=l.takeCurrentTextureSlot(f,w);y.push(E)}l.setUniform(f.gl,"1iv",c,y)}else l.setUniform(f.gl,p.type,c,p.value)}}return function(i,l,f){t(this._lightUniforms[l],i,f),t(this.shadowUniforms,i,f)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function pf(t,i){if(i.castShadow&&!t.castShadow)return!0}var Za=df,vu=F(92528),Fs=Tl.isPowerOfTwo,Al=["px","nx","py","ny","pz","nz"],Fo=pr.extend(function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}},{textureType:"textureCube",update:function(t){var i=t.gl;i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var l=this.format,f=this.type;i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_S,this.getAvailableWrapS()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_WRAP_T,this.getAvailableWrapT()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var c=t.getGLExtension("EXT_texture_filter_anisotropic");if(c&&this.anisotropic>1&&i.texParameterf(i.TEXTURE_CUBE_MAP,c.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),f===36193){var p=t.getGLExtension("OES_texture_half_float");p||(f=D.FLOAT)}if(this.mipmaps.length)for(var y=this.width,x=this.height,w=0;w<this.mipmaps.length;w++){var E=this.mipmaps[w];this._updateTextureData(i,E,w,y,x,l,f),y/=2,x/=2}else this._updateTextureData(i,this,0,this.width,this.height,l,f),!this.NPOT&&this.useMipmap&&i.generateMipmap(i.TEXTURE_CUBE_MAP);i.bindTexture(i.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,i,l,f,c,p,y){for(var x=0;x<6;x++){var w=Al[x],E=i.image&&i.image[w];E?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+x,l,p,p,y,E):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+x,l,p,f,c,0,p,y,i.pixels&&i.pixels[w])}},generateMipmap:function(t){var i=t.gl;this.useMipmap&&!this.NPOT&&(i.bindTexture(i.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),i.generateMipmap(i.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?Fs(this.image.px.width)&&Fs(this.image.px.height):Fs(this.width)&&Fs(this.height)},isRenderable:function(){return this.image.px?Wa(this.image.px)&&Wa(this.image.nx)&&Wa(this.image.py)&&Wa(this.image.ny)&&Wa(this.image.pz)&&Wa(this.image.nz):!!(this.width&&this.height)},load:function(t,i){var l=0,f=this;return $.each(t,function(c,p){var y=Z.createImage();i&&(y.crossOrigin=i),y.onload=function(){l--,l===0&&(f.dirty(),f.trigger("success",f))},y.onerror=function(){l--},l++,y.src=c,f.image[p]=y}),this}});Object.defineProperty(Fo.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Fo.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});function Wa(t){return t.width>0&&t.height>0}var lo=Fo,gf=na.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,i=Math.atan(1/t[5])*2;this.fov=i/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=na.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}}),Un=gf,ga="framebuffer",ia="renderbuffer",Kr=ia+"_width",zo=ia+"_height",aa=ia+"_attached",Go="depthtexture_attached",oa=D.FRAMEBUFFER,uo=D.RENDERBUFFER,Ea=D.DEPTH_ATTACHMENT,Hi=D.COLOR_ATTACHMENT0,bi=X.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},function(){this._cache=new Es,this._textures={}},{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var i=t.gl;i.bindFramebuffer(oa,this._getFrameBufferGL(t)),this._boundRenderer=t;var l=this._cache;l.put("viewport",t.viewport);var f=!1,c,p;for(var y in this._textures){f=!0;var x=this._textures[y];x&&(c=x.texture.width,p=x.texture.height,this._doAttach(t,x.texture,y,x.target))}this._width=c,this._height=p,!f&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,c,p,1);var w=l.get("attached_textures");if(w){for(var y in w)if(!this._textures[y]){var E=w[y];this._doDetach(i,y,E)}}if(!l.get(Go)&&this.depthBuffer){l.miss(ia)&&l.put(ia,i.createRenderbuffer());var B=l.get(ia);(c!==l.get(Kr)||p!==l.get(zo))&&(i.bindRenderbuffer(uo,B),i.renderbufferStorage(uo,i.DEPTH_COMPONENT16,c,p),l.put(Kr,c),l.put(zo,p),i.bindRenderbuffer(uo,null)),l.get(aa)||(i.framebufferRenderbuffer(oa,Ea,uo,B),l.put(aa,!0))}},unbind:function(t){t.__currentFrameBuffer=null;var i=t.gl;i.bindFramebuffer(oa,null),this._boundRenderer=null,this._cache.use(t.__uid__);var l=this._cache.get("viewport");l&&t.setViewport(l),this.updateMipmap(t)},updateMipmap:function(t){var i=t.gl;for(var l in this._textures){var f=this._textures[l];if(f){var c=f.texture;if(!c.NPOT&&c.useMipmap&&c.minFilter===pr.LINEAR_MIPMAP_LINEAR){var p=c.textureType==="textureCube"?D.TEXTURE_CUBE_MAP:D.TEXTURE_2D;i.bindTexture(p,c.getWebGLTexture(t)),i.generateMipmap(p),i.bindTexture(p,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(oa)},_getFrameBufferGL:function(t){var i=this._cache;return i.use(t.__uid__),i.miss(ga)&&i.put(ga,t.gl.createFramebuffer()),i.get(ga)},attach:function(t,i,l){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");i=i||Hi,l=l||D.TEXTURE_2D;var f=this._boundRenderer,c=f&&f.gl,p;if(c){var y=this._cache;y.use(f.__uid__),p=y.get("attached_textures")}var x=this._textures[i];if(!(x&&x.target===l&&x.texture===t&&p&&p[i]!=null)){var w=!0;f&&(w=this._doAttach(f,t,i,l),this.viewport||f.setViewport(0,0,t.width,t.height,1)),w&&(this._textures[i]=this._textures[i]||{},this._textures[i].texture=t,this._textures[i].target=l)}},_doAttach:function(t,i,l,f){var c=t.gl,p=i.getWebGLTexture(t),y=this._cache.get("attached_textures");if(y&&y[l]){var x=y[l];if(x.texture===i&&x.target===f)return}l=+l;var w=!0;if(l===Ea||l===D.DEPTH_STENCIL_ATTACHMENT){var E=t.getGLExtension("WEBGL_depth_texture");if(E||(console.error("Depth texture is not supported by the browser"),w=!1),i.format!==D.DEPTH_COMPONENT&&i.format!==D.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),w=!1),w){var B=this._cache.get(ia);B&&(c.framebufferRenderbuffer(oa,Ea,uo,null),c.deleteRenderbuffer(B),this._cache.put(ia,!1)),this._cache.put(aa,!1),this._cache.put(Go,!0)}}return c.framebufferTexture2D(oa,l,f,p,0),y||(y={},this._cache.put("attached_textures",y)),y[l]=y[l]||{},y[l].texture=i,y[l].target=f,w},_doDetach:function(t,i,l){t.framebufferTexture2D(oa,i,l,null,0);var f=this._cache.get("attached_textures");f&&f[i]&&(f[i]=null),(i===Ea||i===D.DEPTH_STENCIL_ATTACHMENT)&&this._cache.put(Go,!1)},detach:function(t,i){if(this._textures[t]=null,this._boundRenderer){var l=this._cache;l.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,i)}},dispose:function(t){var i=t.gl,l=this._cache;l.use(t.__uid__);var f=l.get(ia);f&&i.deleteRenderbuffer(f);var c=l.get(ga);c&&i.deleteFramebuffer(c),l.deleteContext(t.__uid__),this._textures={}}});bi.DEPTH_ATTACHMENT=Ea,bi.COLOR_ATTACHMENT0=Hi,bi.STENCIL_ATTACHMENT=D.STENCIL_ATTACHMENT,bi.DEPTH_STENCIL_ATTACHMENT=D.DEPTH_STENCIL_ATTACHMENT;var Pn=bi,du=["px","nx","py","ny","pz","nz"],Nt=X.extend(function(){var t={position:new ur,far:1e3,near:.1,texture:null,shadowMapPass:null},i=t._cameras={px:new Un({fov:90}),nx:new Un({fov:90}),py:new Un({fov:90}),ny:new Un({fov:90}),pz:new Un({fov:90}),nz:new Un({fov:90})};return i.px.lookAt(ur.POSITIVE_X,ur.NEGATIVE_Y),i.nx.lookAt(ur.NEGATIVE_X,ur.NEGATIVE_Y),i.py.lookAt(ur.POSITIVE_Y,ur.POSITIVE_Z),i.ny.lookAt(ur.NEGATIVE_Y,ur.NEGATIVE_Z),i.pz.lookAt(ur.POSITIVE_Z,ur.NEGATIVE_Y),i.nz.lookAt(ur.NEGATIVE_Z,ur.NEGATIVE_Y),t._frameBuffer=new Pn,t},{getCamera:function(t){return this._cameras[t]},render:function(t,i,l){var f=t.gl;l||i.update();for(var c=this.texture.width,p=2*Math.atan(c/(c-.5))/Math.PI*180,y=0;y<6;y++){var x=du[y],w=this._cameras[x];if(ur.copy(w.position,this.position),w.far=this.far,w.near=this.near,w.fov=p,this.shadowMapPass){w.update();var E=i.getBoundingBox();E.applyTransform(w.viewMatrix),i.viewBoundingBoxLastFrame.copy(E),this.shadowMapPass.render(t,i,w,!0)}this._frameBuffer.attach(this.texture,f.COLOR_ATTACHMENT0,f.TEXTURE_CUBE_MAP_POSITIVE_X+y),this._frameBuffer.bind(t),t.render(i,w,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}}),Wt=Nt,Rt=$r.extend({dynamic:!1,widthSegments:1,heightSegments:1},function(){this.build()},{build:function(){for(var t=this.heightSegments,i=this.widthSegments,l=this.attributes,f=[],c=[],p=[],y=[],x=0;x<=t;x++)for(var w=x/t,E=0;E<=i;E++){var B=E/i;if(f.push([2*B-1,2*w-1,0]),c&&c.push([B,w]),p&&p.push([0,0,1]),E<i&&x<t){var q=E+x*(i+1);y.push([q,q+1,q+i+1]),y.push([q+i+1,q+1,q+i+2])}}l.position.fromArray(f),l.texcoord0.fromArray(c),l.normal.fromArray(p),this.initIndicesFromArray(y),this.boundingBox=new Ie,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),Vt=Rt,Zt=new Cr,oe=$r.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},function(){this.build()},{build:function(){var t={px:de("px",this.depthSegments,this.heightSegments),nx:de("nx",this.depthSegments,this.heightSegments),py:de("py",this.widthSegments,this.depthSegments),ny:de("ny",this.widthSegments,this.depthSegments),pz:de("pz",this.widthSegments,this.heightSegments),nz:de("nz",this.widthSegments,this.heightSegments)},i=["position","texcoord0","normal"],l=0,f=0;for(var c in t)l+=t[c].vertexCount,f+=t[c].indices.length;for(var p=0;p<i.length;p++)this.attributes[i[p]].init(l);this.indices=new Z.Uint16Array(f);var y=0,x=0;for(var c in t){for(var w=t[c],p=0;p<i.length;p++)for(var E=i[p],B=w.attributes[E].value,q=w.attributes[E].size,yt=E==="normal",_t=0;_t<B.length;_t++){var Mt=B[_t];this.inside&&yt&&(Mt=-Mt),this.attributes[E].value[_t+q*x]=Mt}for(var Ct=w.indices.length,_t=0;_t<w.indices.length;_t++)this.indices[_t+y]=x+w.indices[this.inside?Ct-_t-1:_t];y+=w.indices.length,x+=w.vertexCount}this.boundingBox=new Ie,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function de(t,i,l){Zt.identity();var f=new Vt({widthSegments:i,heightSegments:l});switch(t){case"px":Cr.translate(Zt,Zt,ur.POSITIVE_X),Cr.rotateY(Zt,Zt,Math.PI/2);break;case"nx":Cr.translate(Zt,Zt,ur.NEGATIVE_X),Cr.rotateY(Zt,Zt,-Math.PI/2);break;case"py":Cr.translate(Zt,Zt,ur.POSITIVE_Y),Cr.rotateX(Zt,Zt,-Math.PI/2);break;case"ny":Cr.translate(Zt,Zt,ur.NEGATIVE_Y),Cr.rotateX(Zt,Zt,Math.PI/2);break;case"pz":Cr.translate(Zt,Zt,ur.POSITIVE_Z);break;case"nz":Cr.translate(Zt,Zt,ur.NEGATIVE_Z),Cr.rotateY(Zt,Zt,Math.PI);break}return f.applyTransform(Zt),f}var ke=oe,Ge=`@export clay.skybox.vertex
#define SHADER_NAME skybox
uniform mat4 world : WORLD;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
varying vec3 v_WorldPosition;
void main()
{
 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end
@export clay.skybox.fragment
#define PI 3.1415926
uniform mat4 viewInverse : VIEWINVERSE;
#ifdef EQUIRECTANGULAR
uniform sampler2D environmentMap;
#else
uniform samplerCube environmentMap;
#endif
uniform float lod: 0.0;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
@import clay.util.srgb
@import clay.util.ACES
void main()
{
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
#ifdef EQUIRECTANGULAR
 float phi = acos(V.y);
 float theta = atan(-V.x, V.z) + PI * 0.5;
 vec2 uv = vec2(theta / 2.0 / PI, phi / PI);
 vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));
#else
 #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)
 vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));
 #else
 vec4 texel = decodeHDR(textureCube(environmentMap, V));
 #endif
#endif
#ifdef SRGB_DECODE
 texel = sRGBToLinear(texel);
#endif
#ifdef TONEMAPPING
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
#ifdef SRGB_ENCODE
 texel = linearTosRGB(texel);
#endif
 gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));
}
@end`;_r.import(Ge);var Je=wa.extend(function(){var t=new _r({vertex:_r.source("clay.skybox.vertex"),fragment:_r.source("clay.skybox.fragment")}),i=new Oe({shader:t,depthMask:!1});return{scene:null,geometry:new ke,material:i,environmentMap:null,culling:!1,_dummyCamera:new Un}},function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)},{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){t.textureType==="texture2D"?(this.material.define("EQUIRECTANGULAR"),t.minFilter=pr.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,i,l){this.renderSkybox(t,l)},renderSkybox:function(t,i){var l=this._dummyCamera;l.aspect=t.getViewportAspect(),l.fov=i.fov||50,l.updateProjectionMatrix(),Cr.invert(l.invProjectionMatrix,l.projectionMatrix),l.worldTransform.copy(i.worldTransform),l.viewMatrix.copy(i.viewMatrix),this.position.copy(i.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],l)}}),ar=Je,ue=ar,Me=542327876,ye=1,ze=2,Ze=4,er=8,sr=4096,yr=131072,gr=524288,Gr=8388608,tn=8,Dr=4194304,dn=4096,_i=512,bn=1024,Fi=2048,Ca=4096,pu=8192,zs=16384,pn=32768,kn=2097152,sc=1,lc=2,Uo=4,uc=64,Hx=512,kd=131072;function mf(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function fc(t){return String.fromCharCode(t&255,t>>8&255,t>>16&255,t>>24&255)}var Vd=31,Zd=mf("DXT1"),hc=mf("DXT3"),Wd=mf("DXT5"),Hd=0,Gs=1,cc=2,ii=3,Xd=4,gn=7,Or=20,yf=21,Yd=27,Kd=28,fy=29,Pa=30,jd={parse:function(t,i){var l=new Int32Array(t,0,Vd);if(l[Hd]!==Me||!l(Or)&Uo)return null;var f=l(yf),c=l[Xd],p=l[ii],y=l[Kd]&_i,x=l[cc]&yr,w,E;switch(f){case Zd:w=8,E=pr.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case hc:w=16,E=pr.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Wd:w=16,E=pr.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var B=l[Gs]+4,q=y?6:1,yt=1;x&&(yt=Math.max(1,l[gn]));for(var _t=[],Mt=0;Mt<q;Mt++){var Ct=c,Gt=p;_t[Mt]=new Yr({width:Ct,height:Gt,format:E});for(var Xt=[],ne=0;ne<yt;ne++){var te=Math.max(4,Ct)/4*Math.max(4,Gt)/4*w,qt=new Uint8Array(t,B,te);B+=te,Ct*=.5,Gt*=.5,Xt[ne]=qt}_t[Mt].pixels=Xt[0],x&&(_t[Mt].mipmaps=Xt)}if(i)i.width=_t[0].width,i.height=_t[0].height,i.format=_t[0].format,i.pixels=_t[0].pixels,i.mipmaps=_t[0].mipmaps;else return _t[0]}},Jd=jd,Us=String.fromCharCode,vc=8,dc=32767;function ks(t,i,l,f){if(t[3]>0){var c=Math.pow(2,t[3]-128-8+f);i[l+0]=t[0]*c,i[l+1]=t[1]*c,i[l+2]=t[2]*c}else i[l+0]=0,i[l+1]=0,i[l+2]=0;return i[l+3]=1,i}function gu(t,i,l){for(var f="",c=i;c<l;c++)f+=Us(t[c]);return f}function _f(t,i){i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3]}function xf(t,i,l,f){for(var c=0,p=0,y=f;y>0;)if(t[p][0]=i[l++],t[p][1]=i[l++],t[p][2]=i[l++],t[p][3]=i[l++],t[p][0]===1&&t[p][1]===1&&t[p][2]===1){for(var x=t[p][3]<<c>>>0;x>0;x--)_f(t[p-1],t[p]),p++,y--;c+=8}else p++,y--,c=0;return l}function Qd(t,i,l,f){if(f<vc|f>dc)return xf(t,i,l,f);var c=i[l++];if(c!=2)return xf(t,i,l-1,f);if(t[0][1]=i[l++],t[0][2]=i[l++],c=i[l++],(t[0][2]<<8>>>0|c)>>>0!==f)return null;for(var c=0;c<4;c++)for(var p=0;p<f;){var y=i[l++];if(y>128){y=(y&127)>>>0;for(var x=i[l++];y--;)t[p++][c]=x}else for(;y--;)t[p++][c]=i[l++]}return l}var Sf={parseRGBE:function(t,i,l){l==null&&(l=0);var f=new Uint8Array(t),c=f.length;if(gu(f,0,2)==="#?"){for(var p=2;p<c&&!(Us(f[p])===`
`&&Us(f[p+1])===`
`);p++);if(!(p>=c)){p+=2;for(var y="";p<c;p++){var x=Us(f[p]);if(x===`
`)break;y+=x}var w=y.split(" "),E=parseInt(w[1]),B=parseInt(w[3]);if(!(!B||!E)){for(var q=p+1,yt=[],_t=0;_t<B;_t++){yt[_t]=[];for(var Mt=0;Mt<4;Mt++)yt[_t][Mt]=0}for(var Ct=new Float32Array(B*E*4),Gt=0,Xt=0;Xt<E;Xt++){var q=Qd(yt,f,q,B);if(!q)return null;for(var _t=0;_t<B;_t++)ks(yt[_t],Ct,Gt,l),Gt+=4}return i||(i=new Yr),i.width=B,i.height=E,i.pixels=Ct,i.type=pr.FLOAT,i}}}},parseRGBEFromPNG:function(t){}},pc=Sf,bl={loadTexture:function(t,i,l,f){var c;if(typeof i=="function"?(l=i,f=l,i={}):i=i||{},typeof t=="string"){if(t.match(/.hdr$/)||i.fileType==="hdr")return c=new Yr({width:0,height:0,sRGB:!1}),bl._fetchTexture(t,function(p){pc.parseRGBE(p,c,i.exposure),c.dirty(),l&&l(c)},f),c;t.match(/.dds$/)||i.fileType==="dds"?(c=new Yr({width:0,height:0}),bl._fetchTexture(t,function(p){Jd.parse(p,c),c.dirty(),l&&l(c)},f)):(c=new Yr,c.load(t),c.success(l),c.error(f))}else typeof t=="object"&&typeof t.px<"u"&&(c=new lo,c.load(t),c.success(l),c.error(f));return c},loadPanorama:function(t,i,l,f,c,p){var y=this;typeof f=="function"?(c=f,p=c,f={}):f=f||{},bl.loadTexture(i,f,function(x){x.flipY=f.flipY||!1,y.panoramaToCubeMap(t,x,l,f),x.dispose(t),c&&c(l)},p)},panoramaToCubeMap:function(t,i,l,f){var c=new Wt,p=new ue({scene:new Za});return p.setEnvironmentMap(i),f=f||{},f.encodeRGBM&&p.material.define("fragment","RGBM_ENCODE"),l.sRGB=i.sRGB,c.texture=l,c.render(t,p.scene),c.texture=null,c.dispose(t),l},heightToNormal:function(t,i){var l=document.createElement("canvas"),f=l.width=t.width,c=l.height=t.height,p=l.getContext("2d");p.drawImage(t,0,0,f,c),i=i||!1;for(var y=p.getImageData(0,0,f,c),x=p.createImageData(f,c),w=0;w<y.data.length;w+=4){if(i){var E=y.data[w],B=y.data[w+1],q=y.data[w+2],yt=Math.abs(E-B)+Math.abs(B-q);if(yt>20)return console.warn("Given image is not a height map"),t}var _t,Mt,Ct,Gt;w%(f*4)===0?(_t=y.data[w],Ct=y.data[w+4]):w%(f*4)===(f-1)*4?(_t=y.data[w-4],Ct=y.data[w]):(_t=y.data[w-4],Ct=y.data[w+4]),w<f*4?(Mt=y.data[w],Gt=y.data[w+f*4]):w>f*(c-1)*4?(Mt=y.data[w-f*4],Gt=y.data[w]):(Mt=y.data[w-f*4],Gt=y.data[w+f*4]),x.data[w]=_t-Ct+127,x.data[w+1]=Mt-Gt+127,x.data[w+2]=255,x.data[w+3]=255}return p.putImageData(x,0,0),l},isHeightImage:function(t,i,l){if(!t||!t.width||!t.height)return!1;var f=document.createElement("canvas"),c=f.getContext("2d"),p=i||32;l=l||20,f.width=f.height=p,c.drawImage(t,0,0,p,p);for(var y=c.getImageData(0,0,p,p),x=0;x<y.data.length;x+=4){var w=y.data[x],E=y.data[x+1],B=y.data[x+2],q=Math.abs(w-E)+Math.abs(E-B);if(q>l)return!1}return!0},_fetchTexture:function(t,i,l){Z.request.get({url:t,responseType:"arraybuffer",onload:i,onerror:l})},createChessboard:function(t,i,l,f){t=t||512,i=i||64,l=l||"black",f=f||"white";var c=Math.ceil(t/i),p=document.createElement("canvas");p.width=t,p.height=t;var y=p.getContext("2d");y.fillStyle=f,y.fillRect(0,0,t,t),y.fillStyle=l;for(var x=0;x<c;x++)for(var w=0;w<c;w++){var E=w%2?x%2:x%2-1;E&&y.fillRect(x*i,w*i,i,i)}var B=new Yr({image:p,anisotropic:8});return B},createBlank:function(t){var i=document.createElement("canvas");i.width=1,i.height=1;var l=i.getContext("2d");l.fillStyle=t,l.fillRect(0,0,1,1);var f=new Yr({image:i});return f}},ko=bl,Tf=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function Mi(t){return"_on"+t}var Xn=function(t){var i=this;this._texture=new Yr({anisotropic:32,flipY:!1,surface:this,dispose:function(l){i.dispose(),Yr.prototype.dispose.call(this,l)}}),Tf.forEach(function(l){this[Mi(l)]=function(f){!f.triangle||this._meshes.forEach(function(c){this.dispatchEvent(l,c,f.triangle,f.point)},this)}},this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};Xn.prototype={constructor:Xn,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var i=t.getDom();if(!(i instanceof HTMLCanvasElement))console.error("ECharts must init on canvas if it is used as texture."),i=document.createElement("canvas");else{var l=this,f=t.getZr(),c=f.__oldRefreshImmediately||f.refreshImmediately;f.refreshImmediately=function(){c.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},f.__oldRefreshImmediately=c}this._texture.image=i,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new ur,i=new ur,l=new ur,f=new le,c=new le,p=new le,y=new le,x=new ur;return function(w,E,B,q){var yt=E.geometry,_t=yt.attributes.position,Mt=yt.attributes.texcoord0,Ct=ur.dot,Gt=ur.cross;_t.get(B[0],t.array),_t.get(B[1],i.array),_t.get(B[2],l.array),Mt.get(B[0],f.array),Mt.get(B[1],c.array),Mt.get(B[2],p.array),Gt(x,i,l);var Xt=Ct(t,x),ne=Ct(q,x)/Xt;Gt(x,l,t);var te=Ct(q,x)/Xt;Gt(x,t,i);var qt=Ct(q,x)/Xt;le.scale(y,f,ne),le.scaleAndAdd(y,y,c,te),le.scaleAndAdd(y,y,p,qt);var ge=y.x*this._chart.getWidth(),ve=y.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(w,{zrX:ge,zrY:ve})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(Tf.forEach(function(i){t.on(i,this[Mi(i)],this)},this),this._meshes.push(t))},detachFromMesh:function(t){var i=this._meshes.indexOf(t);i>=0&&this._meshes.splice(i,1),Tf.forEach(function(l){t.off(l,this[Mi(l)])},this)},dispose:function(){this._meshes.forEach(function(t){this.detachFromMesh(t)},this)}};var fo=Xn,Vo=na.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=na.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}}),Zo=Vo,$d=`
@export clay.compositor.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
varying vec2 v_Texcoord;
void main()
{
 v_Texcoord = texcoord;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end`;_r.import($d);var qd=new Vt,Qi=new wa({geometry:qd,frustumCulling:!1}),gc=new Zo,mc=X.extend(function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}},function(){var t=new _r(_r.source("clay.compositor.vertex"),this.fragment),i=new Oe({shader:t});i.enableTexturesAll(),this.material=i},{setUniform:function(t,i){this.material.setUniform(t,i)},getUniform:function(t){var i=this.material.uniforms[t];if(i)return i.value},attachOutput:function(t,i){this.outputs||(this.outputs={}),i=i||D.COLOR_ATTACHMENT0,this.outputs[i]=t},detachOutput:function(t){for(var i in this.outputs)this.outputs[i]===t&&(this.outputs[i]=null)},bind:function(t,i){if(this.outputs)for(var l in this.outputs){var f=this.outputs[l];f&&i.attach(f,l)}i&&i.bind(t)},unbind:function(t,i){i.unbind(t)},render:function(t,i){var l=t.gl;if(i){this.bind(t,i);var f=t.getGLExtension("EXT_draw_buffers");if(f&&this.outputs){var c=[];for(var p in this.outputs)p=+p,p>=l.COLOR_ATTACHMENT0&&p<=l.COLOR_ATTACHMENT0+8&&c.push(p);f.drawBuffersEXT(c)}}this.trigger("beforerender",this,t);var y=this.clearDepth?l.DEPTH_BUFFER_BIT:0;if(l.depthMask(!0),this.clearColor){y=y|l.COLOR_BUFFER_BIT,l.colorMask(!0,!0,!0,!0);var x=this.clearColor;Array.isArray(x)&&l.clearColor(x[0],x[1],x[2],x[3])}l.clear(y),this.blendWithPrevious?(l.enable(l.BLEND),this.material.transparent=!0):(l.disable(l.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),i&&this.unbind(t,i)},renderQuad:function(t){Qi.material=this.material,t.renderPass([Qi],gc)},dispose:function(t){}}),Yn=mc,tp=`#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform sampler2D normalDistribution;
uniform vec2 viewportSize : [512, 256];
const vec3 N = vec3(0.0, 0.0, 1.0);
const float fSampleNumber = float(SAMPLE_NUMBER);
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
float G_Smith(float roughness, float NoV, float NoL) {
 float k = roughness * roughness / 2.0;
 float G1V = NoV / (NoV * (1.0 - k) + k);
 float G1L = NoL / (NoL * (1.0 - k) + k);
 return G1L * G1V;
}
void main() {
 vec2 uv = gl_FragCoord.xy / viewportSize;
 float NoV = uv.x;
 float roughness = uv.y;
 vec3 V;
 V.x = sqrt(1.0 - NoV * NoV);
 V.y = 0.0;
 V.z = NoV;
 float A = 0.0;
 float B = 0.0;
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(L.z, 0.0, 1.0);
 float NoH = clamp(H.z, 0.0, 1.0);
 float VoH = clamp(dot(V, H), 0.0, 1.0);
 if (NoL > 0.0) {
 float G = G_Smith(roughness, NoV, NoL);
 float G_Vis = G * VoH / (NoH * NoV);
 float Fc = pow(1.0 - VoH, 5.0);
 A += (1.0 - Fc) * G_Vis;
 B += Fc * G_Vis;
 }
 }
 gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);
}
`,ep=`#define SHADER_NAME prefilter
#define SAMPLE_NUMBER 1024
#define PI 3.14159265358979
uniform mat4 viewInverse : VIEWINVERSE;
uniform samplerCube environmentMap;
uniform sampler2D normalDistribution;
uniform float roughness : 0.5;
varying vec2 v_Texcoord;
varying vec3 v_WorldPosition;
@import clay.util.rgbm
vec3 importanceSampleNormal(float i, float roughness, vec3 N) {
 vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;
 vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
void main() {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(v_WorldPosition - eyePos);
 vec3 N = V;
 vec3 prefilteredColor = vec3(0.0);
 float totalWeight = 0.0;
 float fMaxSampleNumber = float(SAMPLE_NUMBER);
 for (int i = 0; i < SAMPLE_NUMBER; i++) {
 vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);
 vec3 L = reflect(-V, H);
 float NoL = clamp(dot(N, L), 0.0, 1.0);
 if (NoL > 0.0) {
 prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;
 totalWeight += NoL;
 }
 }
 gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));
}
`,Wo={},ma=["px","nx","py","ny","pz","nz"];Wo.prefilterEnvironmentMap=function(t,i,l,f,c){(!c||!f)&&(f=Wo.generateNormalDistribution(),c=Wo.integrateBRDF(t,f)),l=l||{};var p=l.width||64,y=l.height||64,x=l.type||i.type,w=new lo({width:p,height:y,type:x,flipY:!1,mipmaps:[]});w.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var E=Math.min(p,y),B=Math.log(E)/Math.log(2)+1,q=new Oe({shader:new _r({vertex:_r.source("clay.skybox.vertex"),fragment:ep})});q.set("normalDistribution",f),l.encodeRGBM&&q.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&q.define("fragment","RGBM_DECODE");var yt=new Za,_t;if(i.textureType==="texture2D"){var Mt=new lo({width:p,height:y,type:x===pr.FLOAT?pr.HALF_FLOAT:x});ko.panoramaToCubeMap(t,i,Mt,{encodeRGBM:l.decodeRGBM}),i=Mt}_t=new ar({scene:yt,material:q}),_t.material.set("environmentMap",i);var Ct=new Wt({texture:w});l.encodeRGBM&&(x=w.type=pr.UNSIGNED_BYTE);for(var Gt=new Yr({width:p,height:y,type:x}),Xt=new Pn({depthBuffer:!1}),ne=Z[x===pr.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],te=0;te<B;te++){w.mipmaps[te]={pixels:{}},_t.material.set("roughness",te/(B-1));for(var qt=Gt.width,ge=2*Math.atan(qt/(qt-.5))/Math.PI*180,ve=0;ve<ma.length;ve++){var Ne=new ne(Gt.width*Gt.height*4);Xt.attach(Gt),Xt.bind(t);var Ee=Ct.getCamera(ma[ve]);Ee.fov=ge,t.render(yt,Ee),t.gl.readPixels(0,0,Gt.width,Gt.height,pr.RGBA,x,Ne),Xt.unbind(t),w.mipmaps[te].pixels[ma[ve]]=Ne}Gt.width/=2,Gt.height/=2,Gt.dirty()}return Xt.dispose(t),Gt.dispose(t),_t.dispose(t),f.dispose(t),{environmentMap:w,brdfLookup:c,normalDistribution:f,maxMipmapLevel:B}},Wo.integrateBRDF=function(t,i){i=i||Wo.generateNormalDistribution();var l=new Pn({depthBuffer:!1}),f=new Yn({fragment:tp}),c=new Yr({width:512,height:256,type:pr.HALF_FLOAT,wrapS:pr.CLAMP_TO_EDGE,wrapT:pr.CLAMP_TO_EDGE,minFilter:pr.NEAREST,magFilter:pr.NEAREST,useMipmap:!1});return f.setUniform("normalDistribution",i),f.setUniform("viewportSize",[512,256]),f.attachOutput(c),f.render(t,l),l.dispose(t),c},Wo.generateNormalDistribution=function(l,f){for(var l=l||256,f=f||1024,c=new Yr({width:l,height:f,type:pr.FLOAT,minFilter:pr.NEAREST,magFilter:pr.NEAREST,wrapS:pr.CLAMP_TO_EDGE,wrapT:pr.CLAMP_TO_EDGE,useMipmap:!1}),p=new Float32Array(f*l*4),y=[],x=0;x<l;x++){for(var w=x/l,E=w*w,B=0;B<f;B++){var q=(B<<16|B>>>16)>>>0;q=((q&1431655765)<<1|(q&2863311530)>>>1)>>>0,q=((q&858993459)<<2|(q&3435973836)>>>2)>>>0,q=((q&252645135)<<4|(q&4042322160)>>>4)>>>0,q=(((q&16711935)<<8|(q&4278255360)>>>8)>>>0)/4294967296;var yt=Math.sqrt((1-q)/(1+(E*E-1)*q));y[B]=yt}for(var B=0;B<f;B++){var _t=(B*l+x)*4,yt=y[B],Mt=Math.sqrt(1-yt*yt),Ct=B/f,Gt=2*Math.PI*Ct;p[_t]=Mt*Math.cos(Gt),p[_t+1]=yt,p[_t+2]=Mt*Math.sin(Gt),p[_t+3]=1}}return c.pixels=p,c};var mu=Wo,rp=Bi.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,i){if(!t.getGLExtension("EXT_shader_texture_lod")){console.warn("Device not support textureCubeLodEXT");return}this._brdfLookup||(this._normalDistribution=mu.generateNormalDistribution(),this._brdfLookup=mu.integrateBRDF(t,this._normalDistribution));var l=this.cubemap;if(!l.__prefiltered){var f=mu.prefilterEnvironmentMap(t,l,{encodeRGBM:!0,width:i,height:i},this._normalDistribution,this._brdfLookup);this.cubemap=f.environmentMap,this.cubemap.__prefiltered=!0,l.dispose(t)}},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}}),np=rp,ip=Bi.extend({castShadow:!1,coefficients:[]},function(){this._coefficientsTmpArr=new Z.Float32Array(9*3)},{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var i=t._coefficientsTmpArr,l=0;l<t.coefficients.length;l++)i[l]=t.coefficients[l];return i}}}}),ap=ip,yu={},Ho=["px","nx","py","ny","pz","nz"];function yc(t,i){var l=new Texture2D({width:9,height:1,type:Texture.FLOAT}),f=new Pass({fragment:projectEnvMapShaderCode});f.material.define("fragment","TEXTURE_SIZE",i.width),f.setUniform("environmentMap",i);var c=new FrameBuffer;c.attach(l),f.render(t,c),c.bind(t);var p=new vendor.Float32Array(9*4);t.gl.readPixels(0,0,9,1,Texture.RGBA,Texture.FLOAT,p);for(var y=new vendor.Float32Array(9*3),x=0;x<9;x++)y[x*3]=p[x*4],y[x*3+1]=p[x*4+1],y[x*3+2]=p[x*4+2];return c.unbind(t),c.dispose(t),f.dispose(t),y}function op(t,i){var l=t[0],f=t[1],c=t[2];return i===0?1:i===1?l:i===2?f:i===3?c:i===4?l*c:i===5?f*c:i===6?l*f:i===7?3*c*c-1:l*l-f*f}var wf={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function Ml(t,i,l,f){for(var c=new Z.Float32Array(27),p=xe.create(),y=xe.create(),x=xe.create(),w=0;w<9;w++){for(var E=xe.create(),B=0;B<Ho.length;B++){for(var q=i[Ho[B]],yt=xe.create(),_t=0,Mt=0,Ct=wf[Ho[B]],Gt=0;Gt<f;Gt++)for(var Xt=0;Xt<l;Xt++){p[0]=Xt/(l-1)*2-1,p[1]=Gt/(f-1)*2-1,p[2]=-1,xe.normalize(p,p),x[0]=p[Ct[0]]*Ct[3],x[1]=p[Ct[1]]*Ct[4],x[2]=p[Ct[2]]*Ct[5],y[0]=q[Mt++]/255,y[1]=q[Mt++]/255,y[2]=q[Mt++]/255;var ne=q[Mt++]/255*8.12;y[0]*=ne,y[1]*=ne,y[2]*=ne,xe.scaleAndAdd(yt,yt,y,op(x,w)*-p[2]),_t+=-p[2]}xe.scaleAndAdd(E,E,yt,1/_t)}c[w*3]=E[0]/6,c[w*3+1]=E[1]/6,c[w*3+2]=E[2]/6}return c}yu.projectEnvironmentMap=function(t,i,l){l=l||{},l.lod=l.lod||0;var f,c=new Za,p=64;i.textureType==="texture2D"?f=new ue({scene:c,environmentMap:i}):(p=i.image&&i.image.px?i.image.px.width:i.width,f=new ar({scene:c,environmentMap:i}));var y=Math.ceil(p/Math.pow(2,l.lod)),x=Math.ceil(p/Math.pow(2,l.lod)),w=new Yr({width:y,height:x}),E=new Pn;f.material.define("fragment","RGBM_ENCODE"),l.decodeRGBM&&f.material.define("fragment","RGBM_DECODE"),f.material.set("lod",l.lod);for(var B=new Wt({texture:w}),q={},yt=0;yt<Ho.length;yt++){q[Ho[yt]]=new Uint8Array(y*x*4);var _t=B.getCamera(Ho[yt]);_t.fov=90,E.attach(w),E.bind(t),t.render(c,_t),t.gl.readPixels(0,0,y,x,pr.RGBA,pr.UNSIGNED_BYTE,q[Ho[yt]]),E.unbind(t)}return f.dispose(t),E.dispose(t),w.dispose(t),Ml(t,q,y,x)};var _c=yu,sp={firstNotNull:function(){for(var t=0,i=arguments.length;t<i;t++)if(arguments[t]!=null)return arguments[t]},queryDataIndex:function(t,i){if(i.dataIndexInside!=null)return i.dataIndexInside;if(i.dataIndex!=null)return N.D5.isArray(i.dataIndex)?N.D5.map(i.dataIndex,function(l){return t.indexOfRawIndex(l)}):t.indexOfRawIndex(i.dataIndex);if(i.name!=null)return N.D5.isArray(i.name)?N.D5.map(i.name,function(l){return t.indexOfName(l)}):t.indexOfName(i.name)}},Xr=sp,Df=$r.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:Math.PI*2,thetaStart:0,thetaLength:Math.PI,radius:1},function(){this.build()},{build:function(){var t=this.heightSegments,i=this.widthSegments,l=this.attributes.position,f=this.attributes.texcoord0,c=this.attributes.normal,p=(i+1)*(t+1);l.init(p),f.init(p),c.init(p);var y=p>65535?Uint32Array:Uint16Array,x=this.indices=new y(i*t*6),w,E,B,q,yt,_t,Mt,te=this.radius,Ct=this.phiStart,Gt=this.phiLength,Xt=this.thetaStart,ne=this.thetaLength,te=this.radius,qt=[],ge=[],ve=0,Ne=1/te;for(Mt=0;Mt<=t;Mt++)for(_t=0;_t<=i;_t++)q=_t/i,yt=Mt/t,w=-te*Math.cos(Ct+q*Gt)*Math.sin(Xt+yt*ne),E=te*Math.cos(Xt+yt*ne),B=te*Math.sin(Ct+q*Gt)*Math.sin(Xt+yt*ne),qt[0]=w,qt[1]=E,qt[2]=B,ge[0]=q,ge[1]=yt,l.set(ve,qt),f.set(ve,ge),qt[0]*=Ne,qt[1]*=Ne,qt[2]*=Ne,c.set(ve,qt),ve++;var Ee,Ve,Qe,We,rr=i+1,fr=0;for(Mt=0;Mt<t;Mt++)for(_t=0;_t<i;_t++)Ve=Mt*rr+_t,Ee=Mt*rr+_t+1,We=(Mt+1)*rr+_t+1,Qe=(Mt+1)*rr+_t,x[fr++]=Ee,x[fr++]=Ve,x[fr++]=We,x[fr++]=Ve,x[fr++]=Qe,x[fr++]=We;this.boundingBox=new Ie,this.boundingBox.max.set(te,te,te),this.boundingBox.min.set(-te,-te,-te)}}),xc=Df,Sc=Bi.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}}}),lp=Sc,up=Bi.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new ur,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Bi.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Tc=up,fp=Bi.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Bi.prototype.clone.call(this);return t.range=this.range,t}}),wc=fp,hp=Bi.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new ur,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var i=t.color,l=t.intensity;return[i[0]*l,i[1]*l,i[2]*l]}}},clone:function(){var t=Bi.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),hy=hp,nn=function(t,i,l,f){t=t||0,i=i||0,l=l||0,f=f||0,this.array=mr.fromValues(t,i,l,f),this._dirty=!0};nn.prototype={constructor:nn,add:function(t){return mr.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,i,l,f){return this.array[0]=t,this.array[1]=i,this.array[2]=l,this.array[3]=f,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new nn(this.x,this.y,this.z,this.w)},copy:function(t){return mr.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return mr.dist(this.array,t.array)},distance:function(t){return mr.distance(this.array,t.array)},div:function(t){return mr.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return mr.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return mr.dot(this.array,t.array)},len:function(){return mr.len(this.array)},length:function(){return mr.length(this.array)},lerp:function(t,i,l){return mr.lerp(this.array,t.array,i.array,l),this._dirty=!0,this},min:function(t){return mr.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return mr.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return mr.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return mr.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return mr.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return mr.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return mr.random(this.array,t),this._dirty=!0,this},scale:function(t){return mr.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,i){return mr.scaleAndAdd(this.array,this.array,t.array,i),this._dirty=!0,this},sqrDist:function(t){return mr.sqrDist(this.array,t.array)},squaredDistance:function(t){return mr.squaredDistance(this.array,t.array)},sqrLen:function(){return mr.sqrLen(this.array)},squaredLength:function(){return mr.squaredLength(this.array)},sub:function(t){return mr.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return mr.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return mr.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return mr.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Vs=Object.defineProperty;if(Vs){var El=nn.prototype;Vs(El,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Vs(El,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Vs(El,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Vs(El,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}nn.add=function(t,i,l){return mr.add(t.array,i.array,l.array),t._dirty=!0,t},nn.set=function(t,i,l,f,c){mr.set(t.array,i,l,f,c),t._dirty=!0},nn.copy=function(t,i){return mr.copy(t.array,i.array),t._dirty=!0,t},nn.dist=function(t,i){return mr.distance(t.array,i.array)},nn.distance=nn.dist,nn.div=function(t,i,l){return mr.divide(t.array,i.array,l.array),t._dirty=!0,t},nn.divide=nn.div,nn.dot=function(t,i){return mr.dot(t.array,i.array)},nn.len=function(t){return mr.length(t.array)},nn.lerp=function(t,i,l,f){return mr.lerp(t.array,i.array,l.array,f),t._dirty=!0,t},nn.min=function(t,i,l){return mr.min(t.array,i.array,l.array),t._dirty=!0,t},nn.max=function(t,i,l){return mr.max(t.array,i.array,l.array),t._dirty=!0,t},nn.mul=function(t,i,l){return mr.multiply(t.array,i.array,l.array),t._dirty=!0,t},nn.multiply=nn.mul,nn.negate=function(t,i){return mr.negate(t.array,i.array),t._dirty=!0,t},nn.normalize=function(t,i){return mr.normalize(t.array,i.array),t._dirty=!0,t},nn.random=function(t,i){return mr.random(t.array,i),t._dirty=!0,t},nn.scale=function(t,i,l){return mr.scale(t.array,i.array,l),t._dirty=!0,t},nn.scaleAndAdd=function(t,i,l,f){return mr.scaleAndAdd(t.array,i.array,l.array,f),t._dirty=!0,t},nn.sqrDist=function(t,i){return mr.sqrDist(t.array,i.array)},nn.squaredDistance=nn.sqrDist,nn.sqrLen=function(t){return mr.sqrLen(t.array)},nn.squaredLength=nn.sqrLen,nn.sub=function(t,i,l){return mr.subtract(t.array,i.array,l.array),t._dirty=!0,t},nn.subtract=nn.sub,nn.transformMat4=function(t,i,l){return mr.transformMat4(t.array,i.array,l.array),t._dirty=!0,t},nn.transformQuat=function(t,i,l){return mr.transformQuat(t.array,i.array,l.array),t._dirty=!0,t};var cp=nn,Li={};Li.create=function(){var t=new vr(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Li.clone=function(t){var i=new vr(4);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i},Li.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t},Li.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Li.transpose=function(t,i){if(t===i){var l=i[1];t[1]=i[2],t[2]=l}else t[0]=i[0],t[1]=i[2],t[2]=i[1],t[3]=i[3];return t},Li.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=l*p-c*f;return y?(y=1/y,t[0]=p*y,t[1]=-f*y,t[2]=-c*y,t[3]=l*y,t):null},Li.adjoint=function(t,i){var l=i[0];return t[0]=i[3],t[1]=-i[1],t[2]=-i[2],t[3]=l,t},Li.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},Li.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],w=l[1],E=l[2],B=l[3];return t[0]=f*x+p*w,t[1]=c*x+y*w,t[2]=f*E+p*B,t[3]=c*E+y*B,t},Li.mul=Li.multiply,Li.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=Math.sin(l),w=Math.cos(l);return t[0]=f*w+p*x,t[1]=c*w+y*x,t[2]=f*-x+p*w,t[3]=c*-x+y*w,t},Li.scale=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=l[0],w=l[1];return t[0]=f*x,t[1]=c*x,t[2]=p*w,t[3]=y*w,t},Li.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},Li.LDU=function(t,i,l,f){return t[2]=f[2]/f[0],l[0]=f[0],l[1]=f[1],l[3]=f[3]-t[2]*l[1],[t,i,l]};var On=Li,Ii=function(){this.array=On.create(),this._dirty=!0};Ii.prototype={constructor:Ii,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new Ii().copy(this)},copy:function(t){return On.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return On.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return On.determinant(this.array)},identity:function(){return On.identity(this.array),this._dirty=!0,this},invert:function(){return On.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return On.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return On.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return On.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return On.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return On.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return On.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return On.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Ii.adjoint=function(t,i){return On.adjoint(t.array,i.array),t._dirty=!0,t},Ii.copy=function(t,i){return On.copy(t.array,i.array),t._dirty=!0,t},Ii.determinant=function(t){return On.determinant(t.array)},Ii.identity=function(t){return On.identity(t.array),t._dirty=!0,t},Ii.invert=function(t,i){return On.invert(t.array,i.array),t._dirty=!0,t},Ii.mul=function(t,i,l){return On.mul(t.array,i.array,l.array),t._dirty=!0,t},Ii.multiply=Ii.mul,Ii.rotate=function(t,i,l){return On.rotate(t.array,i.array,l),t._dirty=!0,t},Ii.scale=function(t,i,l){return On.scale(t.array,i.array,l.array),t._dirty=!0,t},Ii.transpose=function(t,i){return On.transpose(t.array,i.array),t._dirty=!0,t};var vp=Ii,Ln={};Ln.create=function(){var t=new vr(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Ln.clone=function(t){var i=new vr(6);return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i},Ln.copy=function(t,i){return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t},Ln.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},Ln.invert=function(t,i){var l=i[0],f=i[1],c=i[2],p=i[3],y=i[4],x=i[5],w=l*p-f*c;return w?(w=1/w,t[0]=p*w,t[1]=-f*w,t[2]=-c*w,t[3]=l*w,t[4]=(c*x-p*y)*w,t[5]=(f*y-l*x)*w,t):null},Ln.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},Ln.multiply=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=l[0],B=l[1],q=l[2],yt=l[3],_t=l[4],Mt=l[5];return t[0]=f*E+p*B,t[1]=c*E+y*B,t[2]=f*q+p*yt,t[3]=c*q+y*yt,t[4]=f*_t+p*Mt+x,t[5]=c*_t+y*Mt+w,t},Ln.mul=Ln.multiply,Ln.rotate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=Math.sin(l),B=Math.cos(l);return t[0]=f*B+p*E,t[1]=c*B+y*E,t[2]=f*-E+p*B,t[3]=c*-E+y*B,t[4]=x,t[5]=w,t},Ln.scale=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=l[0],B=l[1];return t[0]=f*E,t[1]=c*E,t[2]=p*B,t[3]=y*B,t[4]=x,t[5]=w,t},Ln.translate=function(t,i,l){var f=i[0],c=i[1],p=i[2],y=i[3],x=i[4],w=i[5],E=l[0],B=l[1];return t[0]=f,t[1]=c,t[2]=p,t[3]=y,t[4]=f*E+p*B+x,t[5]=c*E+y*B+w,t},Ln.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var Qn=Ln,Xi=function(){this.array=Qn.create(),this._dirty=!0};Xi.prototype={constructor:Xi,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},clone:function(){return new Xi().copy(this)},copy:function(t){return Qn.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return Qn.determinant(this.array)},identity:function(){return Qn.identity(this.array),this._dirty=!0,this},invert:function(){return Qn.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return Qn.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Qn.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Qn.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Qn.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return Qn.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Qn.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return Qn.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Xi.copy=function(t,i){return Qn.copy(t.array,i.array),t._dirty=!0,t},Xi.determinant=function(t){return Qn.determinant(t.array)},Xi.identity=function(t){return Qn.identity(t.array),t._dirty=!0,t},Xi.invert=function(t,i){return Qn.invert(t.array,i.array),t._dirty=!0,t},Xi.mul=function(t,i,l){return Qn.mul(t.array,i.array,l.array),t._dirty=!0,t},Xi.multiply=Xi.mul,Xi.rotate=function(t,i,l){return Qn.rotate(t.array,i.array,l),t._dirty=!0,t},Xi.scale=function(t,i,l){return Qn.scale(t.array,i.array,l.array),t._dirty=!0,t},Xi.translate=function(t,i,l){return Qn.translate(t.array,i.array,l.array),t._dirty=!0,t};var Nn=Xi,ai=function(){this.array=Qr.create(),this._dirty=!0};ai.prototype={constructor:ai,setArray:function(t){for(var i=0;i<this.array.length;i++)this.array[i]=t[i];return this._dirty=!0,this},adjoint:function(){return Qr.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return new ai().copy(this)},copy:function(t){return Qr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return Qr.determinant(this.array)},fromMat2d:function(t){return Qr.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return Qr.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return Qr.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return Qr.identity(this.array),this._dirty=!0,this},invert:function(){return Qr.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return Qr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Qr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Qr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Qr.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return Qr.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Qr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return Qr.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return Qr.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return Qr.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},ai.adjoint=function(t,i){return Qr.adjoint(t.array,i.array),t._dirty=!0,t},ai.copy=function(t,i){return Qr.copy(t.array,i.array),t._dirty=!0,t},ai.determinant=function(t){return Qr.determinant(t.array)},ai.identity=function(t){return Qr.identity(t.array),t._dirty=!0,t},ai.invert=function(t,i){return Qr.invert(t.array,i.array),t},ai.mul=function(t,i,l){return Qr.mul(t.array,i.array,l.array),t._dirty=!0,t},ai.multiply=ai.mul,ai.fromMat2d=function(t,i){return Qr.fromMat2d(t.array,i.array),t._dirty=!0,t},ai.fromMat4=function(t,i){return Qr.fromMat4(t.array,i.array),t._dirty=!0,t},ai.fromQuat=function(t,i){return Qr.fromQuat(t.array,i.array),t._dirty=!0,t},ai.normalFromMat4=function(t,i){return Qr.normalFromMat4(t.array,i.array),t._dirty=!0,t},ai.rotate=function(t,i,l){return Qr.rotate(t.array,i.array,l),t._dirty=!0,t},ai.scale=function(t,i,l){return Qr.scale(t.array,i.array,l.array),t._dirty=!0,t},ai.transpose=function(t,i){return Qr.transpose(t.array,i.array),t._dirty=!0,t},ai.translate=function(t,i,l){return Qr.translate(t.array,i.array,l.array),t._dirty=!0,t};var dp=ai,Cl=F(95622),_u={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,i){this._animators=this._animators||[];var l=this,f;if(t){for(var c=t.split("."),p=l,y=0,x=c.length;y<x;y++)!p||(p=p[c[y]]);p&&(f=p)}else f=l;if(f==null)throw new Error("Target "+t+" not exists");var w=this._animators,E=new Cl.Z(f,i),B=this;return E.during(function(){B.__zr&&B.__zr.refresh()}).done(function(){var q=w.indexOf(E);q>=0&&w.splice(q,1)}),w.push(E),this.__zr&&this.__zr.animation.addAnimator(E),E},stopAnimation:function(t){this._animators=this._animators||[];for(var i=this._animators,l=i.length,f=0;f<l;f++)i[f].stop(t);return i.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.addAnimator(this._animators[i])},removeAnimatorsFromZr:function(t){if(this._animators)for(var i=0;i<this._animators.length;i++)t.animation.removeAnimator(this._animators[i])}},pp=_u,Dc=`
@export clay.util.rand
highp float rand(vec2 uv) {
 const highp float a = 12.9898, b = 78.233, c = 43758.5453;
 highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);
 return fract(sin(sn) * c);
}
@end
@export clay.util.calculate_attenuation
uniform float attenuationFactor : 5.0;
float lightAttenuation(float dist, float range)
{
 float attenuation = 1.0;
 attenuation = dist*dist/(range*range+1.0);
 float att_s = attenuationFactor;
 attenuation = 1.0/(attenuation*att_s+1.0);
 att_s = 1.0/(att_s+1.0);
 attenuation = attenuation - att_s;
 attenuation /= 1.0 - att_s;
 return clamp(attenuation, 0.0, 1.0);
}
@end
@export clay.util.edge_factor
#ifdef SUPPORT_STANDARD_DERIVATIVES
float edgeFactor(float width)
{
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#else
float edgeFactor(float width)
{
 return 1.0;
}
#endif
@end
@export clay.util.encode_float
vec4 encodeFloat(const in float depth)
{
 const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);
 const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);
 vec4 res = fract(depth * bitShifts);
 res -= res.xxyz * bit_mask;
 return res;
}
@end
@export clay.util.decode_float
float decodeFloat(const in vec4 color)
{
 const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);
 return dot(color, bitShifts);
}
@end
@export clay.util.float
@import clay.util.encode_float
@import clay.util.decode_float
@end
@export clay.util.rgbm_decode
vec3 RGBMDecode(vec4 rgbm, float range) {
 return range * rgbm.rgb * rgbm.a;
}
@end
@export clay.util.rgbm_encode
vec4 RGBMEncode(vec3 color, float range) {
 if (dot(color, color) == 0.0) {
 return vec4(0.0);
 }
 vec4 rgbm;
 color /= range;
 rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);
 rgbm.a = ceil(rgbm.a * 255.0) / 255.0;
 rgbm.rgb = color / rgbm.a;
 return rgbm;
}
@end
@export clay.util.rgbm
@import clay.util.rgbm_decode
@import clay.util.rgbm_encode
vec4 decodeHDR(vec4 color)
{
#if defined(RGBM_DECODE) || defined(RGBM)
 return vec4(RGBMDecode(color, 8.12), 1.0);
#else
 return color;
#endif
}
vec4 encodeHDR(vec4 color)
{
#if defined(RGBM_ENCODE) || defined(RGBM)
 return RGBMEncode(color.xyz, 8.12);
#else
 return color;
#endif
}
@end
@export clay.util.srgb
vec4 sRGBToLinear(in vec4 value) {
 return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);
}
vec4 linearTosRGB(in vec4 value) {
 return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);
}
@end
@export clay.chunk.skinning_header
#ifdef SKINNING
attribute vec3 weight : WEIGHT;
attribute vec4 joint : JOINT;
#ifdef USE_SKIN_MATRICES_TEXTURE
uniform sampler2D skinMatricesTexture : ignore;
uniform float skinMatricesTextureSize: ignore;
mat4 getSkinMatrix(sampler2D tex, float idx) {
 float j = idx * 4.0;
 float x = mod(j, skinMatricesTextureSize);
 float y = floor(j / skinMatricesTextureSize) + 0.5;
 vec2 scale = vec2(skinMatricesTextureSize);
 return mat4(
 texture2D(tex, vec2(x + 0.5, y) / scale),
 texture2D(tex, vec2(x + 1.5, y) / scale),
 texture2D(tex, vec2(x + 2.5, y) / scale),
 texture2D(tex, vec2(x + 3.5, y) / scale)
 );
}
mat4 getSkinMatrix(float idx) {
 return getSkinMatrix(skinMatricesTexture, idx);
}
#else
uniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;
mat4 getSkinMatrix(float idx) {
 return skinMatrix[int(idx)];
}
#endif
#endif
@end
@export clay.chunk.skin_matrix
mat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;
if (weight.y > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.y) * weight.y;
}
if (weight.z > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.z) * weight.z;
}
float weightW = 1.0-weight.x-weight.y-weight.z;
if (weightW > 1e-4)
{
 skinMatrixWS += getSkinMatrix(joint.w) * weightW;
}
@end
@export clay.chunk.instancing_header
#ifdef INSTANCING
attribute vec4 instanceMat1;
attribute vec4 instanceMat2;
attribute vec4 instanceMat3;
#endif
@end
@export clay.chunk.instancing_matrix
mat4 instanceMat = mat4(
 vec4(instanceMat1.xyz, 0.0),
 vec4(instanceMat2.xyz, 0.0),
 vec4(instanceMat3.xyz, 0.0),
 vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)
);
@end
@export clay.util.parallax_correct
vec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {
 vec3 first = (boxMax - pos) / dir;
 vec3 second = (boxMin - pos) / dir;
 vec3 further = max(first, second);
 float dist = min(further.x, min(further.y, further.z));
 vec3 fixedPos = pos + dir * dist;
 vec3 boxCenter = (boxMax + boxMin) * 0.5;
 return normalize(fixedPos - boxCenter);
}
@end
@export clay.util.clamp_sample
vec4 clampSample(const in sampler2D texture, const in vec2 coord)
{
#ifdef STEREO
 float eye = step(0.5, coord.x) * 0.5;
 vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));
#else
 vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));
#endif
 return texture2D(texture, coordClamped);
}
@end
@export clay.util.ACES
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
@end`,Xo=`
@export ecgl.common.transformUniforms
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
uniform mat4 world : WORLD;
@end

@export ecgl.common.attributes
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 normal : NORMAL;
@end

@export ecgl.common.uv.header
uniform vec2 uvRepeat : [1.0, 1.0];
uniform vec2 uvOffset : [0.0, 0.0];
uniform vec2 detailUvRepeat : [1.0, 1.0];
uniform vec2 detailUvOffset : [0.0, 0.0];

varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end

@export ecgl.common.uv.main
v_Texcoord = texcoord * uvRepeat + uvOffset;
v_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;
@end

@export ecgl.common.uv.fragmentHeader
varying vec2 v_Texcoord;
varying vec2 v_DetailTexcoord;
@end


@export ecgl.common.albedo.main

 vec4 albedoTexel = vec4(1.0);
#ifdef DIFFUSEMAP_ENABLED
 albedoTexel = texture2D(diffuseMap, v_Texcoord);
 #ifdef SRGB_DECODE
 albedoTexel = sRGBToLinear(albedoTexel);
 #endif
#endif

#ifdef DETAILMAP_ENABLED
 vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);
 #ifdef SRGB_DECODE
 detailTexel = sRGBToLinear(detailTexel);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);
 albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;
#endif

@end

@export ecgl.common.wireframe.vertexHeader

#ifdef WIREFRAME_QUAD
attribute vec4 barycentric;
varying vec4 v_Barycentric;
#elif defined(WIREFRAME_TRIANGLE)
attribute vec3 barycentric;
varying vec3 v_Barycentric;
#endif

@end

@export ecgl.common.wireframe.vertexMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 v_Barycentric = barycentric;
#endif

@end


@export ecgl.common.wireframe.fragmentHeader

uniform float wireframeLineWidth : 1;
uniform vec4 wireframeLineColor: [0, 0, 0, 0.5];

#ifdef WIREFRAME_QUAD
varying vec4 v_Barycentric;
float edgeFactor () {
 vec4 d = fwidth(v_Barycentric);
 vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(min(a4.x, a4.y), a4.z), a4.w);
}
#elif defined(WIREFRAME_TRIANGLE)
varying vec3 v_Barycentric;
float edgeFactor () {
 vec3 d = fwidth(v_Barycentric);
 vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);
 return min(min(a3.x, a3.y), a3.z);
}
#endif

@end


@export ecgl.common.wireframe.fragmentMain

#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)
 if (wireframeLineWidth > 0.) {
 vec4 lineColor = wireframeLineColor;
#ifdef SRGB_DECODE
 lineColor = sRGBToLinear(lineColor);
#endif

 gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);
 }
#endif
@end




@export ecgl.common.bumpMap.header

#ifdef BUMPMAP_ENABLED
uniform sampler2D bumpMap;
uniform float bumpScale : 1.0;


vec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)
{
 vec2 dSTdx = dFdx(v_Texcoord);
 vec2 dSTdy = dFdy(v_Texcoord);

 float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;
 float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;
 float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;

 vec3 vSigmaX = dFdx(surfPos);
 vec3 vSigmaY = dFdy(surfPos);
 vec3 vN = surfNormal;

 vec3 R1 = cross(vSigmaY, vN);
 vec3 R2 = cross(vN, vSigmaX);

 float fDet = dot(vSigmaX, R1);

 vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);
 return normalize(abs(fDet) * baseNormal - vGrad);

}
#endif

@end

@export ecgl.common.normalMap.vertexHeader

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.vertexMain

#ifdef NORMALMAP_ENABLED
 if (dot(tangent, tangent) > 0.0) {
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
 }
#endif

@end


@export ecgl.common.normalMap.fragmentHeader

#ifdef NORMALMAP_ENABLED
uniform sampler2D normalMap;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@end

@export ecgl.common.normalMap.fragmentMain
#ifdef NORMALMAP_ENABLED
 if (dot(v_Tangent, v_Tangent) > 0.0) {
 vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;
 if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;
 mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);
 N = normalize(tbn * N);
 }
 }
#endif
@end



@export ecgl.common.vertexAnimation.header

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevNormal;
uniform float percent;
#endif

@end

@export ecgl.common.vertexAnimation.main

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 vec3 norm = mix(prevNormal, normal, percent);
#else
 vec3 pos = position;
 vec3 norm = normal;
#endif

@end


@export ecgl.common.ssaoMap.header
#ifdef SSAOMAP_ENABLED
uniform sampler2D ssaoMap;
uniform vec4 viewport : VIEWPORT;
#endif
@end

@export ecgl.common.ssaoMap.main
 float ao = 1.0;
#ifdef SSAOMAP_ENABLED
 ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;
#endif
@end




@export ecgl.common.diffuseLayer.header

#if (LAYER_DIFFUSEMAP_COUNT > 0)
uniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];
uniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];
#endif

@end

@export ecgl.common.emissiveLayer.header

#if (LAYER_EMISSIVEMAP_COUNT > 0)
uniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];
uniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];
#endif

@end

@export ecgl.common.layers.header
@import ecgl.common.diffuseLayer.header
@import ecgl.common.emissiveLayer.header
@end

@export ecgl.common.diffuseLayer.main

#if (LAYER_DIFFUSEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{
 float intensity = layerDiffuseIntensity[_idx_];
 vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);
 albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;
 }}
#endif

@end

@export ecgl.common.emissiveLayer.main

#if (LAYER_EMISSIVEMAP_COUNT > 0)
 for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)
 {{
 vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];
 #ifdef SRGB_DECODE
 texel2 = sRGBToLinear(texel2);
 #endif
 float intensity = layerEmissionIntensity[_idx_];
 gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;
 }}
#endif

@end
`,Ac=`@export ecgl.color.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

@import ecgl.common.uv.header

attribute vec2 texcoord : TEXCOORD_0;
attribute vec3 position: POSITION;

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

#ifdef ATMOSPHERE_ENABLED
attribute vec3 normal: NORMAL;
uniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;
varying vec3 v_Normal;
#endif

void main()
{
#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 @import ecgl.common.uv.main

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef ATMOSPHERE_ENABLED
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end

@export ecgl.color.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
varying vec3 v_Normal;
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.layers.header

@import ecgl.common.uv.fragmentHeader

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain

}
@end`,gp=`/**
 * http: */

@export ecgl.lambert.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header


@import ecgl.common.attributes

@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif


@import ecgl.common.vertexAnimation.header


varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{
 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main


 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

 @import ecgl.common.wireframe.vertexMain
}

@end


@export ecgl.lambert.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;
uniform sampler2D detailMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color);
#else
 gl_FragColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 gl_FragColor *= sRGBToLinear(v_Color);
 #else
 gl_FragColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 gl_FragColor *= albedoTexel;

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseColor = vec3(0.0, 0.0, 0.0);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 diffuseColor += ambientLightColor[i] * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 vec3 lightColor = directionalLightColor[i];

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor.rgb *= diffuseColor;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,mp=`@export ecgl.realistic.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes


@import ecgl.common.wireframe.vertexHeader

#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

#ifdef NORMALMAP_ENABLED
attribute vec4 tangent : TANGENT;
varying vec3 v_Tangent;
varying vec3 v_Bitangent;
#endif

@import ecgl.common.vertexAnimation.header

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

void main()
{

 @import ecgl.common.uv.main

 @import ecgl.common.vertexAnimation.main

 gl_Position = worldViewProjection * vec4(pos, 1.0);

 v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif

#ifdef NORMALMAP_ENABLED
 v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);
 v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);
#endif

 @import ecgl.common.wireframe.vertexMain

}

@end



@export ecgl.realistic.fragment

#define LAYER_DIFFUSEMAP_COUNT 0
#define LAYER_EMISSIVEMAP_COUNT 0
#define PI 3.14159265358979
#define ROUGHNESS_CHANEL 0
#define METALNESS_CHANEL 1

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform sampler2D diffuseMap;

uniform sampler2D detailMap;
uniform sampler2D metalnessMap;
uniform sampler2D roughnessMap;

@import ecgl.common.layers.header

uniform float emissionIntensity: 1.0;

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

uniform float metalness : 0.0;
uniform float roughness : 0.5;

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef ATMOSPHERE_ENABLED
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform vec3 glowColor;
uniform float glowPower;
#endif

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
@import clay.header.ambient_cubemap_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.normalMap.fragmentHeader

@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import clay.util.rgbm

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}

float D_Phong(float g, float ndh) {
 float a = pow(8192.0, g);
 return (a + 2.0) / 8.0 * pow(ndh, a);
}

void main()
{
 vec4 albedoColor = color;

 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);
#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 albedoColor *= sRGBToLinear(v_Color);
 #else
 albedoColor *= v_Color;
 #endif
#endif

 @import ecgl.common.albedo.main

 @import ecgl.common.diffuseLayer.main

 albedoColor *= albedoTexel;

 float m = metalness;

#ifdef METALNESSMAP_ENABLED
 float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];
 m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 baseColor = albedoColor.rgb;
 albedoColor.rgb = baseColor * (1.0 - m);
 vec3 specFactor = mix(vec3(0.04), baseColor, m);

 float g = 1.0 - roughness;

#ifdef ROUGHNESSMAP_ENABLED
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
#endif

 vec3 N = v_Normal;

#ifdef DOUBLE_SIDED
 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

@import ecgl.common.normalMap.fragmentMain

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 vec3 diffuseTerm = vec3(0.0);
 vec3 specularTerm = vec3(0.0);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 vec3 fresnelTerm = F_Schlick(ndv, specFactor);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;
 }}
#endif

#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;
 }}
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)
 {{
 vec3 L = -directionalLightDirection[_idx_];
 vec3 lc = directionalLightColor[_idx_];

 vec3 H = normalize(L + V);
 float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[_idx_];
 }
#endif

 vec3 li = lc * ndl * shadowContrib;

 diffuseTerm += li;
 specularTerm += li * fresnelTerm * D_Phong(g, ndh);
 }}
#endif


#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT
 vec3 L = reflect(-V, N);
 L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);
 float rough2 = clamp(1.0 - g, 0.0, 1.0);
 float bias2 = rough2 * 5.0;
 vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;
 vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;
 vec3 envTexel2;
 for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)
 {{
 envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);
 specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;
 }}
#endif

 gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;
 gl_FragColor.a = albedoColor.a;

#ifdef ATMOSPHERE_ENABLED
 float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor.rgb += glowColor * atmoIntensity;
#endif

#ifdef SRGB_ENCODE
 gl_FragColor = linearTosRGB(gl_FragColor);
#endif

 @import ecgl.common.emissiveLayer.main

 @import ecgl.common.wireframe.fragmentMain
}

@end`,yp=`@export ecgl.hatching.vertex

@import ecgl.realistic.vertex

@end


@export ecgl.hatching.fragment

#define NORMAL_UP_AXIS 1
#define NORMAL_FRONT_AXIS 2

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform vec4 color : [0.0, 0.0, 0.0, 1.0];
uniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];

uniform mat4 viewInverse : VIEWINVERSE;

#ifdef AMBIENT_LIGHT_COUNT
@import clay.header.ambient_light
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
@import clay.header.ambient_sh_light
#endif

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif


@import ecgl.common.ssaoMap.header

@import ecgl.common.bumpMap.header

@import clay.util.srgb

@import ecgl.common.wireframe.fragmentHeader

@import clay.plugin.compute_shadow_map

uniform sampler2D hatch1;
uniform sampler2D hatch2;
uniform sampler2D hatch3;
uniform sampler2D hatch4;
uniform sampler2D hatch5;
uniform sampler2D hatch6;

float shade(in float tone) {
 vec4 c = vec4(1. ,1., 1., 1.);
 float step = 1. / 6.;
 vec2 uv = v_DetailTexcoord;
 if (tone <= step / 2.0) {
 c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);
 }
 else if (tone <= step) {
 c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);
 }
 if(tone > step && tone <= 2. * step){
 c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));
 }
 if(tone > 2. * step && tone <= 3. * step){
 c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));
 }
 if(tone > 3. * step && tone <= 4. * step){
 c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));
 }
 if(tone > 4. * step && tone <= 5. * step){
 c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));
 }
 if(tone > 5. * step){
 c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));
 }

 return c.r;
}

const vec3 w = vec3(0.2125, 0.7154, 0.0721);

void main()
{
#ifdef SRGB_DECODE
 vec4 inkColor = sRGBToLinear(color);
#else
 vec4 inkColor = color;
#endif

#ifdef VERTEX_COLOR
 #ifdef SRGB_DECODE
 inkColor *= sRGBToLinear(v_Color);
 #else
 inkColor *= v_Color;
 #endif
#endif

 vec3 N = v_Normal;
#ifdef DOUBLE_SIDED
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 N = -N;
 }
#endif

 float tone = 0.0;

 float ambientFactor = 1.0;

#ifdef BUMPMAP_ENABLED
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 ambientFactor = dot(v_Normal, N);
#endif

 vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);

 @import ecgl.common.ssaoMap.main

#ifdef AMBIENT_LIGHT_COUNT
 for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)
 {
 tone += dot(ambientLightColor[i], w) * ambientFactor * ao;
 }
#endif
#ifdef AMBIENT_SH_LIGHT_COUNT
 for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)
 {{
 tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;
 }}
#endif
#ifdef DIRECTIONAL_LIGHT_COUNT
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
#endif
 for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)
 {
 vec3 lightDirection = -directionalLightDirection[i];
 float lightTone = dot(directionalLightColor[i], w);

 float shadowContrib = 1.0;
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 if (shadowEnabled)
 {
 shadowContrib = shadowContribsDir[i];
 }
#endif

 float ndl = dot(N, normalize(lightDirection)) * shadowContrib;

 tone += lightTone * clamp(ndl, 0.0, 1.0);
 }
#endif

 gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));
 }
@end
`,_p=`@export ecgl.sm.depth.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
uniform float percent : 1.0;
#endif

varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;

void main(){

#ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
#else
 vec3 pos = position;
#endif

 v_ViewPosition = worldViewProjection * vec4(pos, 1.0);
 gl_Position = v_ViewPosition;

 v_Texcoord = texcoord;

}
@end



@export ecgl.sm.depth.fragment

@import clay.sm.depth.fragment

@end`;Object.assign(Pi.prototype,pp),_r.import(Dc),_r.import(su),_r.import(Xo),_r.import(Ac),_r.import(gp),_r.import(mp),_r.import(yp),_r.import(_p);function xp(t){return!t||t==="none"}function bc(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}function Sp(t){return t.getZr&&t.setOption}var Tp=Za.prototype.addToScene,wp=Za.prototype.removeFromScene;Za.prototype.addToScene=function(t){if(Tp.call(this,t),this.__zr){var i=this.__zr;t.traverse(function(l){l.__zr=i,l.addAnimatorsToZr&&l.addAnimatorsToZr(i)})}},Za.prototype.removeFromScene=function(t){wp.call(this,t),t.traverse(function(i){var l=i.__zr;i.__zr=null,l&&i.removeAnimatorsFromZr&&i.removeAnimatorsFromZr(l)})},Oe.prototype.setTextureImage=function(t,i,l,f){if(!!this.shader){var c=l.getZr(),p=this,y;return p.autoUpdateTextureStatus=!1,p.disableTexture(t),xp(i)||(y=Vr.loadTexture(i,l,f,function(x){p.enableTexture(t),c&&c.refresh()}),p.set(t,y)),y}};var Vr={};Vr.Renderer=no,Vr.Node=Pi,Vr.Mesh=wa,Vr.Shader=_r,Vr.Material=Oe,Vr.Texture=pr,Vr.Texture2D=Yr,Vr.Geometry=$r,Vr.SphereGeometry=xc,Vr.PlaneGeometry=Vt,Vr.CubeGeometry=ke,Vr.AmbientLight=lp,Vr.DirectionalLight=Tc,Vr.PointLight=wc,Vr.SpotLight=hy,Vr.PerspectiveCamera=Un,Vr.OrthographicCamera=Zo,Vr.Vector2=le,Vr.Vector3=ur,Vr.Vector4=cp,Vr.Quaternion=Sl,Vr.Matrix2=vp,Vr.Matrix2d=Nn,Vr.Matrix3=dp,Vr.Matrix4=Cr,Vr.Plane=Rs,Vr.Ray=Lo,Vr.BoundingBox=Ie,Vr.Frustum=Bo;var Ri=null;function xu(){return Ri!==null||(Ri=ko.createBlank("rgba(255,255,255,0)").image),Ri}function Af(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function Mc(t){if((t.wrapS===pr.REPEAT||t.wrapT===pr.REPEAT)&&t.image){var i=Af(t.width),l=Af(t.height);if(i!==t.width||l!==t.height){var f=document.createElement("canvas");f.width=i,f.height=l;var c=f.getContext("2d");c.drawImage(t.image,0,0,i,l),t.image=f}}}Vr.loadTexture=function(t,i,l,f){typeof l=="function"&&(f=l,l={}),l=l||{};for(var c=Object.keys(l).sort(),p="",y=0;y<c.length;y++)p+=c[y]+"_"+l[c[y]]+"_";var x=i.__textureCache=i.__textureCache||new vu.ZP(20);if(Sp(t)){var w=t.__textureid__,E=x.get(p+w);if(E)E.texture.surface.setECharts(t),f&&f(E.texture);else{var B=new fo(t);B.onupdate=function(){i.getZr().refresh()},E={texture:B.getTexture()};for(var y=0;y<c.length;y++)E.texture[c[y]]=l[c[y]];w=t.__textureid__||"__ecgl_ec__"+E.texture.__uid__,t.__textureid__=w,x.put(p+w,E),f&&f(E.texture)}return E.texture}else if(bc(t)){var w=t.__textureid__,E=x.get(p+w);if(!E){E={texture:new Vr.Texture2D({image:t})};for(var y=0;y<c.length;y++)E.texture[c[y]]=l[c[y]];w=t.__textureid__||"__ecgl_image__"+E.texture.__uid__,t.__textureid__=w,x.put(p+w,E),Mc(E.texture),f&&f(E.texture)}return E.texture}else{var E=x.get(p+t);if(E)E.callbacks?E.callbacks.push(f):f&&f(E.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){E={callbacks:[f]};var q=ko.loadTexture(t,{exposure:l.exposure,fileType:"hdr"},function(){q.dirty(),E.callbacks.forEach(function(Mt){Mt&&Mt(q)}),E.callbacks=null});E.texture=q,x.put(p+t,E)}else{for(var q=new Vr.Texture2D({image:new Image}),y=0;y<c.length;y++)q[c[y]]=l[c[y]];E={texture:q,callbacks:[f]};var yt=q.image;yt.onload=function(){q.image=yt,Mc(q),q.dirty(),E.callbacks.forEach(function(Ct){Ct&&Ct(q)}),E.callbacks=null},yt.crossOrigin="Anonymous",yt.src=t,q.image=xu(),x.put(p+t,E)}return E.texture}},Vr.createAmbientCubemap=function(t,i,l,f){t=t||{};var c=t.texture,p=Xr.firstNotNull(t.exposure,1),y=new np({intensity:Xr.firstNotNull(t.specularIntensity,1)}),x=new ap({intensity:Xr.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return y.cubemap=Vr.loadTexture(c,l,{exposure:p},function(){if(y.cubemap.flipY=!1,!1)var w;if(y.prefilter(i,32),!1)var E;x.coefficients=_c.projectEnvironmentMap(i,y.cubemap,{lod:1}),f&&f()}),{specular:y,diffuse:x}},Vr.createBlankTexture=ko.createBlank,Vr.isImage=bc,Vr.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)},Vr.parseColor=function(t,i){return t instanceof Array?(i||(i=[]),i[0]=t[0],i[1]=t[1],i[2]=t[2],t.length>3?i[3]=t[3]:i[3]=1,i):(i=N.$_.parse(t||"#000",i)||[0,0,0,0],i[0]/=255,i[1]/=255,i[2]/=255,i)},Vr.directionFromAlphaBeta=function(t,i){var l=t/180*Math.PI+Math.PI/2,f=-i/180*Math.PI+Math.PI/2,c=[],p=Math.sin(l);return c[0]=p*Math.cos(f),c[1]=-Math.cos(l),c[2]=p*Math.sin(f),c},Vr.getShadowResolution=function(t){var i=1024;switch(t){case"low":i=512;break;case"medium":break;case"high":i=2048;break;case"ultra":i=4096;break}return i},Vr.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],Vr.createShader=function(t){t==="ecgl.shadow"&&(t="ecgl.displayShadow");var i=_r.source(t+".vertex"),l=_r.source(t+".fragment");i||console.error("Vertex shader of '%s' not exits",t),l||console.error("Fragment shader of '%s' not exits",t);var f=new _r(i,l);return f.name=t,f},Vr.createMaterial=function(t,i){i instanceof Array||(i=[i]);var l=Vr.createShader(t),f=new Oe({shader:l});return i.forEach(function(c){typeof c=="string"&&f.define(c)}),f},Vr.setMaterialFromModel=function(t,i,l,f){i.autoUpdateTextureStatus=!1;var c=l.getModel(t+"Material"),p=c.get("detailTexture"),y=Xr.firstNotNull(c.get("textureTiling"),1),x=Xr.firstNotNull(c.get("textureOffset"),0);typeof y=="number"&&(y=[y,y]),typeof x=="number"&&(x=[x,x]);var w=y[0]>1||y[1]>1?Vr.Texture.REPEAT:Vr.Texture.CLAMP_TO_EDGE,E={anisotropic:8,wrapS:w,wrapT:w};if(t==="realistic"){var B=c.get("roughness"),q=c.get("metalness");q!=null?isNaN(q)&&(i.setTextureImage("metalnessMap",q,f,E),q=Xr.firstNotNull(c.get("metalnessAdjust"),.5)):q=0,B!=null?isNaN(B)&&(i.setTextureImage("roughnessMap",B,f,E),B=Xr.firstNotNull(c.get("roughnessAdjust"),.5)):B=.5;var yt=c.get("normalTexture");i.setTextureImage("detailMap",p,f,E),i.setTextureImage("normalMap",yt,f,E),i.set({roughness:B,metalness:q,detailUvRepeat:y,detailUvOffset:x})}else if(t==="lambert")i.setTextureImage("detailMap",p,f,E),i.set({detailUvRepeat:y,detailUvOffset:x});else if(t==="color")i.setTextureImage("detailMap",p,f,E),i.set({detailUvRepeat:y,detailUvOffset:x});else if(t==="hatching"){var _t=c.get("hatchingTextures")||[];_t.length<6;for(var Mt=0;Mt<6;Mt++)i.setTextureImage("hatch"+(Mt+1),_t[Mt],f,{anisotropic:8,wrapS:Vr.Texture.REPEAT,wrapT:Vr.Texture.REPEAT});i.set({detailUvRepeat:y,detailUvOffset:x})}},Vr.updateVertexAnimation=function(t,i,l,f){var c=f.get("animation"),p=f.get("animationDurationUpdate"),y=f.get("animationEasingUpdate"),x=l.shadowDepthMaterial;if(c&&i&&p>0&&i.geometry.vertexCount===l.geometry.vertexCount){l.material.define("vertex","VERTEX_ANIMATION"),l.ignorePreZ=!0,x&&x.define("vertex","VERTEX_ANIMATION");for(var w=0;w<t.length;w++)l.geometry.attributes[t[w][0]].value=i.geometry.attributes[t[w][1]].value;l.geometry.dirty(),l.__percent=0,l.material.set("percent",0),l.stopAnimation(),l.animate().when(p,{__percent:1}).during(function(){l.material.set("percent",l.__percent),x&&x.set("percent",l.__percent)}).done(function(){l.ignorePreZ=!1,l.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")}).start(y)}else l.material.undefine("vertex","VERTEX_ANIMATION"),x&&x.undefine("vertex","VERTEX_ANIMATION")};var se=Vr,Su=F(22795),xn=function(t,i){this.id=t,this.zr=i;try{this.renderer=new no({clearBit:0,devicePixelRatio:i.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(i.painter.getWidth(),i.painter.getHeight())}catch(f){this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",console.error(f);return}this.onglobalout=this.onglobalout.bind(this),i.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var l=this.dom.style;l.position="absolute",l.left="0",l.top="0",this.views=[],this._picking=new uu({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new N.Q.UL({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};xn.prototype.setUnpainted=function(){},xn.prototype.addView=function(t){if(t.layer!==this){var i=this._viewsToDispose.indexOf(t);i>=0&&this._viewsToDispose.splice(i,1),this.views.push(t),t.layer=this;var l=this.zr;t.scene.traverse(function(f){f.__zr=l,f.addAnimatorsToZr&&f.addAnimatorsToZr(l)})}};function Ec(t){var i=t.__zr;t.__zr=null,i&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(i)}xn.prototype.removeView=function(t){if(t.layer===this){var i=this.views.indexOf(t);i>=0&&(this.views.splice(i,1),t.scene.traverse(Ec,this),t.layer=null,this._viewsToDispose.push(t))}},xn.prototype.removeViewsAll=function(){this.views.forEach(function(t){t.scene.traverse(Ec,this),t.layer=null,this._viewsToDispose.push(t)},this),this.views.length=0},xn.prototype.resize=function(t,i){var l=this.renderer;l.resize(t,i)},xn.prototype.clear=function(){var t=this.renderer.gl,i=this._backgroundColor||[0,0,0,0];t.clearColor(i[0],i[1],i[2],i[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)},xn.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)},xn.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},xn.prototype.needsRefresh=function(){this.zr.refresh()},xn.prototype.refresh=function(t){this._backgroundColor=t?se.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var i=0;i<this.views.length;i++)this.views[i].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(var i=0;i<this._viewsToDispose.length;i++)this._viewsToDispose[i].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},xn.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)},xn.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var i=0;i<this.views.length;i++)this.views[i].render(this.renderer,t);this.renderer.restoreViewport()},xn.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var bf=1;xn.prototype._startAccumulating=function(t){var i=this;this._stopAccumulating();for(var l=!1,f=0;f<this.views.length;f++)l=this.views[f].needsAccumulate()||l;if(!l)return;function c(p){if(!(!i._accumulatingId||p!==i._accumulatingId)){for(var y=!0,x=0;x<i.views.length;x++)y=i.views[x].isAccumulateFinished()&&l;y||(i._doRender(!0),t?c(p):(0,Su.Z)(function(){c(p)}))}}this._accumulatingId=bf++,t?c(i._accumulatingId):this._accumulatingTimeout=setTimeout(function(){c(i._accumulatingId)},50)},xn.prototype._trackAndClean=function(){var t=[],i=[];this._textureList&&(Pl(this._textureList),Pl(this._geometriesList));for(var l=0;l<this.views.length;l++)Mf(this.views[l].scene,t,i);this._textureList&&(Yo(this.renderer,this._textureList),Yo(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=i};function Pl(t){for(var i=0;i<t.length;i++)t[i].__used__=0}function Yo(t,i){for(var l=0;l<i.length;l++)i[l].__used__||i[l].dispose(t)}function ho(t,i){t.__used__=t.__used__||0,t.__used__++,t.__used__===1&&i.push(t)}function Mf(t,i,l){var f,c;t.traverse(function(y){if(y.isRenderable()){var x=y.geometry,w=y.material;if(w!==f)for(var E=w.getTextureUniforms(),B=0;B<E.length;B++){var q=E[B],yt=w.uniforms[q].value;if(!!yt){if(yt instanceof pr)ho(yt,i);else if(yt instanceof Array)for(var _t=0;_t<yt.length;_t++)yt[_t]instanceof pr&&ho(yt[_t],i)}}x!==c&&ho(x,l),f=w,c=x}});for(var p=0;p<t.lights.length;p++)t.lights[p].cubemap&&ho(t.lights[p].cubemap,i)}xn.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Pl(this._textureList),Pl(this._geometriesList),Yo(this.renderer,this._textureList),Yo(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},xn.prototype.onmousedown=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mousedown",t,i),this._dispatchDataEvent("mousedown",t,i)),this._downX=t.offsetX,this._downY=t.offsetY}},xn.prototype.onmousemove=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY),l=i&&i.target,f=this._hovered;this._hovered=i,f&&l!==f.target&&(f.relatedTarget=l,this._dispatchEvent("mouseout",t,f),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,i),i&&(this.zr.setCursorStyle("pointer"),(!f||l!==f.target)&&this._dispatchEvent("mouseover",t,i)),this._dispatchDataEvent("mousemove",t,i)}},xn.prototype.onmouseup=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent("mouseup",t,i),this._dispatchDataEvent("mouseup",t,i)),this._upX=t.offsetX,this._upY=t.offsetY}},xn.prototype.onclick=xn.prototype.dblclick=function(t){if(!(t.target&&t.target.__isGLToZRProxy)){var i=this._upX-this._downX,l=this._upY-this._downY;if(!(Math.sqrt(i*i+l*l)>20)){t=t.event;var f=this.pickObject(t.offsetX,t.offsetY);f&&(this._dispatchEvent(t.type,t,f),this._dispatchDataEvent(t.type,t,f));var c=this._clickToSetFocusPoint(t);if(c){var p=c.view.setDOFFocusOnPoint(c.distance);p&&this.zr.refresh()}}}},xn.prototype._clickToSetFocusPoint=function(t){for(var i=this.renderer,l=i.viewport,f=this.views.length-1;f>=0;f--){var c=this.views[f];if(c.hasDOF()&&c.containPoint(t.offsetX,t.offsetY)){this._picking.scene=c.scene,this._picking.camera=c.camera,i.viewport=c.viewport;var p=this._picking.pick(t.offsetX,t.offsetY,!0);if(p)return p.view=c,p}}i.viewport=l},xn.prototype.onglobalout=function(t){var i=this._hovered;i&&this._dispatchEvent("mouseout",t,{target:i.target})},xn.prototype.pickObject=function(t,i){for(var l=[],f=this.renderer,c=f.viewport,p=0;p<this.views.length;p++){var y=this.views[p];y.containPoint(t,i)&&(this._picking.scene=y.scene,this._picking.camera=y.camera,f.viewport=y.viewport,this._picking.pickAll(t,i,l))}return f.viewport=c,l.sort(function(x,w){return x.distance-w.distance}),l[0]},xn.prototype._dispatchEvent=function(t,i,l){l||(l={});var f=l.target;for(l.cancelBubble=!1,l.event=i,l.type=t,l.offsetX=i.offsetX,l.offsetY=i.offsetY;f&&(f.trigger(t,l),f=f.getParent(),!l.cancelBubble););this._dispatchToView(t,l)},xn.prototype._dispatchDataEvent=function(t,i,l){var f=l&&l.target,c=f&&f.dataIndex,p=f&&f.seriesIndex,y=f&&f.eventData,x=!1,w=this._zrEventProxy;w.x=i.offsetX,w.y=i.offsetY,w.update();var E={target:w};const B=N._y.getECData(w);t==="mousemove"&&(c!=null?c!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(B.dataIndex=this._lastDataIndex,B.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(E,"mouseout",i)),x=!0):y!=null&&y!==this._lastEventData&&(this._lastEventData!=null&&(B.eventData=this._lastEventData,this.zr.handler.dispatchToElement(E,"mouseout",i)),x=!0),this._lastEventData=y,this._lastDataIndex=c,this._lastSeriesIndex=p),B.eventData=y,B.dataIndex=c,B.seriesIndex=p,(y!=null||parseInt(c,10)>=0&&parseInt(p,10)>=0)&&(this.zr.handler.dispatchToElement(E,t,i),x&&this.zr.handler.dispatchToElement(E,"mouseover",i))},xn.prototype._dispatchToView=function(t,i){for(var l=0;l<this.views.length;l++)this.views[l].containPoint(i.offsetX,i.offsetY)&&this.views[l].trigger(t,i)},Object.assign(xn.prototype,W);var Tu=xn,Dp=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function co(t,i){if(t&&t[i]&&(t[i].normal||t[i].emphasis)){var l=t[i].normal,f=t[i].emphasis;l&&(t[i]=l),f&&(t.emphasis=t.emphasis||{},t.emphasis[i]=f)}}function Ap(t){co(t,"itemStyle"),co(t,"lineStyle"),co(t,"areaStyle"),co(t,"label")}function Ko(t){!t||(t instanceof Array||(t=[t]),N.D5.each(t,function(i){if(i.axisLabel){var l=i.axisLabel;Object.assign(l,l.textStyle),l.textStyle=null}}))}function bp(t){N.D5.each(t.series,function(i){N.D5.indexOf(Dp,i.type)>=0&&(Ap(i),i.coordinateSystem==="mapbox"&&(i.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))}),Ko(t.xAxis3D),Ko(t.yAxis3D),Ko(t.zAxis3D),Ko(t.grid3D),co(t.geo3D)}function Ef(t){this._layers={},this._zr=t}Ef.prototype.update=function(t,i){var l=this,f=i.getZr();if(!f.getWidth()||!f.getHeight()){console.warn("Dom has no width or height");return}function c(x){f.setSleepAfterStill(0);var w;x.coordinateSystem&&x.coordinateSystem.model,w=x.get("zlevel");var E=l._layers,B=E[w];if(!B){if(B=E[w]=new Tu("gl-"+w,f),f.painter.isSingleCanvas()){B.virtual=!0;var q=new N.Q.Ee({z:1e4,style:{image:B.renderer.canvas},silent:!0});B.__hostImage=q,f.add(q)}f.painter.insertLayer(w,B)}return B.__hostImage&&B.__hostImage.setStyle({width:B.renderer.getWidth(),height:B.renderer.getHeight()}),B}function p(x,w){x&&x.traverse(function(E){E.isRenderable&&E.isRenderable()&&(E.ignorePicking=E.$ignorePicking!=null?E.$ignorePicking:w)})}for(var y in this._layers)this._layers[y].removeViewsAll();t.eachComponent(function(x,w){if(x!=="series"){var E=i.getViewOfComponentModel(w),B=w.coordinateSystem;if(E.__ecgl__){var q;if(B){if(!B.viewGL){console.error("Can't find viewGL in coordinateSystem of component "+w.id);return}q=B.viewGL}else{if(!w.viewGL){console.error("Can't find viewGL of component "+w.id);return}q=B.viewGL}var q=B.viewGL,yt=c(w);yt.addView(q),E.afterRender&&E.afterRender(w,t,i,yt),p(E.groupGL,w.get("silent"))}}}),t.eachSeries(function(x){var w=i.getViewOfSeriesModel(x),E=x.coordinateSystem;if(w.__ecgl__){if(E&&!E.viewGL&&!w.viewGL){console.error("Can't find viewGL of series "+w.id);return}var B=E&&E.viewGL||w.viewGL,q=c(x);q.addView(B),w.afterRender&&w.afterRender(x,t,i,q),p(w.groupGL,x.get("silent"))}})},N.sq(function(t){var i=t.getZr(),l=i.painter.dispose;i.painter.dispose=function(){typeof this.eachOtherLayer=="function"&&this.eachOtherLayer(function(f){f instanceof Tu&&f.dispose()}),l.call(this)},i.painter.getRenderedCanvas=function(f){if(f=f||{},this._singleCanvas)return this._layers[0].dom;var c=document.createElement("canvas"),p=f.pixelRatio||this.dpr;c.width=this.getWidth()*p,c.height=this.getHeight()*p;var y=c.getContext("2d");y.dpr=p,y.clearRect(0,0,c.width,c.height),f.backgroundColor&&(y.fillStyle=f.backgroundColor,y.fillRect(0,0,c.width,c.height));var x=this.storage.getDisplayList(!0),w={},E,B=this;function q(Ct,Gt){var Xt=B._zlevelList;Ct==null&&(Ct=-1/0);for(var ne,te=0;te<Xt.length;te++){var qt=Xt[te],ge=B._layers[qt];if(!ge.__builtin__&&qt>Ct&&qt<Gt){ne=ge;break}}ne&&ne.renderToCanvas&&(y.save(),ne.renderToCanvas(y),y.restore())}for(var yt={ctx:y},_t=0;_t<x.length;_t++){var Mt=x[_t];Mt.zlevel!==E&&(q(E,Mt.zlevel),E=Mt.zlevel),this._doPaintEl(Mt,yt,!0,null,w)}return q(E,1/0),c}}),N.Br(function(t,i){var l=i.getZr(),f=l.__egl=l.__egl||new Ef(l);f.update(t,i)}),N.ds(bp);var Cc=null,jo={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},t.alpha!=null&&(this.option.viewControl.alpha=t.alpha),t.beta!=null&&(this.option.viewControl.beta=t.beta),t.distance!=null&&(this.option.viewControl.distance=t.distance),t.center!=null&&(this.option.viewControl.center=t.center)}},Jo={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},Ha={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}},Ll=N.tF.extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});N.D5.merge(Ll.prototype,jo),N.D5.merge(Ll.prototype,Jo),N.D5.merge(Ll.prototype,Ha);var Mp=Ll,Il=F(36006),Zs=Xr.firstNotNull,Cf={left:0,middle:1,right:2};function $i(t){return t instanceof Array||(t=[t,t]),t}var Pf=X.extend(function(){return{zr:null,viewGL:null,_center:new ur,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new le,_panVelocity:new le,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}},function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach(function(t){this[t]=this[t].bind(this)},this)},{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,i){i=i||{};var l=i.baseDistance||0,f=i.baseOrthoSize||1,c=t.get("projection");c!=="perspective"&&c!=="orthographic"&&c!=="isometric"&&(c="perspective"),this._projection=c,this.viewGL.setProjection(c);var p=t.get("distance")+l,y=t.get("orthographicSize")+f;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach(function(yt){this[yt[0]]=Zs(t.get(yt[0]),yt[1])},this),this.minDistance+=l,this.maxDistance+=l,this.minOrthographicSize+=f,this.maxOrthographicSize+=f;var x=t.ecModel,w={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach(function(yt){w[yt]=Zs(t.get(yt),x&&x.get(yt))});var E=Zs(i.alpha,t.get("alpha"))||0,B=Zs(i.beta,t.get("beta"))||0,q=Zs(i.center,t.get("center"))||[0,0,0];w.animation&&w.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:E,beta:B,center:q,distance:p,orthographicSize:y,easing:w.animationEasingUpdate,duration:w.animationDurationUpdate}):(this.setDistance(p),this.setAlpha(E),this.setBeta(B),this.setCenter(q),this.setOrthographicSize(y)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){},animateTo:function(t){var i=this.zr,l=this,f={},c={};return t.distance!=null&&(f.distance=this.getDistance(),c.distance=t.distance),t.orthographicSize!=null&&(f.orthographicSize=this.getOrthographicSize(),c.orthographicSize=t.orthographicSize),t.alpha!=null&&(f.alpha=this.getAlpha(),c.alpha=t.alpha),t.beta!=null&&(f.beta=this.getBeta(),c.beta=t.beta),t.center!=null&&(f.center=this.getCenter(),c.center=t.center),this._addAnimator(i.animation.animate(f).when(t.duration||1e3,c).during(function(){f.alpha!=null&&l.setAlpha(f.alpha),f.beta!=null&&l.setBeta(f.beta),f.distance!=null&&l.setDistance(f.distance),f.center!=null&&l.setCenter(f.center),f.orthographicSize!=null&&l.setOrthographicSize(f.orthographicSize),l._needsUpdate=!0})).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var i=(this.autoRotateDirection==="cw"?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=i*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var i=this._rotateVelocity;this._phi=i.y*t/20+this._phi,this._theta=i.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(i,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){this._projection==="perspective"?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var i=this.getCamera(),l=this._orthoSize,f=l/this.viewGL.viewport.height*this.viewGL.viewport.width;i.left=-f/2,i.right=f/2,i.top=l/2,i.bottom=-l/2},_updatePan:function(t){var i=this._panVelocity,l=this._distance,f=this.getCamera(),c=f.worldTransform.y,p=f.worldTransform.x;this._center.scaleAndAdd(p,-i.x*l/200).scaleAndAdd(c,-i.y*l/200),this._vectorDamping(i,0)},_updateTransform:function(){var t=this.getCamera(),i=new ur,l=this._theta+Math.PI/2,f=this._phi+Math.PI/2,c=Math.sin(l);i.x=c*Math.cos(f),i.y=-Math.cos(l),i.z=c*Math.sin(f),t.position.copy(this._center).scaleAndAdd(i,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,i=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout(function(){i._rotating=!0},t*1e3))},_vectorDamping:function(t,i){var l=t.len();l=l*i,l<1e-4&&(l=0),t.normalize().scale(l)},_decomposeTransform:function(){if(!!this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,i=Math.asin(t.y),l=Math.atan2(t.x,t.z);this._theta=i,this._phi=-l,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){if(!t.target&&!this._isAnimating()){var i=t.offsetX,l=t.offsetY;this.viewGL&&!this.viewGL.containPoint(i,l)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?t.event.targetTouches.length===1&&(this._mode="rotate"):t.event.button===Cf[this.rotateMouseButton]?this._mode="rotate":t.event.button===Cf[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)}},_mouseMoveHandler:function(t){if(!(t.target&&t.target.__isGLToZRProxy)&&!this._isAnimating()){var i=$i(this.panSensitivity),l=$i(this.rotateSensitivity);this._mode==="rotate"?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*l[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*l[1]):this._mode==="pan"&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*i[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*i[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){if(!this._isAnimating()){var i=t.event.wheelDelta||-t.event.detail;this._zoomHandler(t,i)}},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,i){if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var c;this._projection==="perspective"?c=Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):c=Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(i>0?-1:1)*c*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&this._mode==="rotate"&&this._startCountingStill(),t.event.preventDefault()}}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return this.rotateMouseButton==="right"||this.panMouseButton==="right"},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var i=this._animators;return i.push(t),t.done(function(){var l=i.indexOf(t);l>=0&&i.splice(l,1)}),t}});Object.defineProperty(Pf.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});var Oi=Pf,Rl={convertToDynamicArray:function(t){t&&this.resetOffset();var i=this.attributes;for(var l in i)t||!i[l].value?i[l].value=[]:i[l].value=Array.prototype.slice.call(i[l].value);t||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var i in t)t[i].value&&t[i].value.length>0?t[i].value=new Float32Array(t[i].value):t[i].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},Ep={vec2:qe,vec3:xe,vec4:mr,mat2:On,mat2d:Qn,mat3:Qr,mat4:fe,quat:xr},Vn=Ep,Lf=Vn.vec3,Pc=[[0,0],[1,1]],Ol=$r.extend(function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION"),positionPrev:new $r.Attribute("positionPrev","float",3),positionNext:new $r.Attribute("positionNext","float",3),prevPositionPrev:new $r.Attribute("prevPositionPrev","float",3),prevPosition:new $r.Attribute("prevPosition","float",3),prevPositionNext:new $r.Attribute("prevPositionNext","float",3),offset:new $r.Attribute("offset","float",1),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.positionPrev.init(t),i.positionNext.init(t),i.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var c=Lf.dist(t,i)+Lf.dist(l,i)+Lf.dist(f,l),p=1/(c+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Pc)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Pc)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/3}return this.useNativeLine?0:Math.max(i-1,0)*2},addCubicCurve:function(t,i,l,f,c,p){p==null&&(p=1);for(var y=t[0],x=t[1],w=t[2],E=i[0],B=i[1],q=i[2],yt=l[0],_t=l[1],Mt=l[2],Ct=f[0],Gt=f[1],Xt=f[2],ne=this._getCubicCurveApproxStep(t,i,l,f),te=ne*ne,qt=te*ne,ge=3*ne,ve=3*te,Ne=6*te,Ee=6*qt,Ve=y-E*2+yt,Qe=x-B*2+_t,We=w-q*2+Mt,rr=(E-yt)*3-y+Ct,fr=(B-_t)*3-x+Gt,je=(q-Mt)*3-w+Xt,hr=y,wr=x,Ir=w,dr=(E-y)*ge+Ve*ve+rr*qt,un=(B-x)*ge+Qe*ve+fr*qt,Pr=(q-w)*ge+We*ve+je*qt,Zr=Ve*Ne+rr*Ee,sn=Qe*Ne+fr*Ee,Dn=We*Ne+je*Ee,An=rr*Ee,en=fr*Ee,si=je*Ee,Fn=0,Kn=0,pi=Math.ceil(1/ne),li=new Float32Array((pi+1)*3),li=[],ti=0,Kn=0;Kn<pi+1;Kn++)li[ti++]=hr,li[ti++]=wr,li[ti++]=Ir,hr+=dr,wr+=un,Ir+=Pr,dr+=Zr,un+=sn,Pr+=Dn,Zr+=An,sn+=en,Dn+=si,Fn+=ne,Fn>1&&(hr=dr>0?Math.min(hr,Ct):Math.max(hr,Ct),wr=un>0?Math.min(wr,Gt):Math.max(wr,Gt),Ir=Pr>0?Math.min(Ir,Xt):Math.max(Ir,Xt));return this.addPolyline(li,c,p)},addLine:function(t,i,l,f){return this.addPolyline([t,i],l,f)},addPolyline:function(t,i,l,f,c){if(!!t.length){var p=typeof t[0]!="number";if(c==null&&(c=p?t.length:t.length/3),!(c<2)){f==null&&(f=0),l==null&&(l=1),this._itemVertexOffsets.push(this._vertexOffset);var p=typeof t[0]!="number",y=p?typeof i[0]!="number":i.length/4===c,x=this.attributes.position,w=this.attributes.positionPrev,E=this.attributes.positionNext,B=this.attributes.color,q=this.attributes.offset,yt=this.indices,_t=this._vertexOffset,Mt,Ct;l=Math.max(l,.01);for(var Gt=f;Gt<c;Gt++){if(p)Mt=t[Gt],y?Ct=i[Gt]:Ct=i;else{var Xt=Gt*3;if(Mt=Mt||[],Mt[0]=t[Xt],Mt[1]=t[Xt+1],Mt[2]=t[Xt+2],y){var ne=Gt*4;Ct=Ct||[],Ct[0]=i[ne],Ct[1]=i[ne+1],Ct[2]=i[ne+2],Ct[3]=i[ne+3]}else Ct=i}if(this.useNativeLine?Gt>1&&(x.copy(_t,_t-1),B.copy(_t,_t-1),_t++):(Gt<c-1&&(w.set(_t+2,Mt),w.set(_t+3,Mt)),Gt>0&&(E.set(_t-2,Mt),E.set(_t-1,Mt)),x.set(_t,Mt),x.set(_t+1,Mt),B.set(_t,Ct),B.set(_t+1,Ct),q.set(_t,l/2),q.set(_t+1,-l/2),_t+=2),this.useNativeLine)B.set(_t,Ct),x.set(_t,Mt),_t++;else if(Gt>0){var te=this._triangleOffset*3,yt=this.indices;yt[te]=_t-4,yt[te+1]=_t-3,yt[te+2]=_t-2,yt[te+3]=_t-3,yt[te+4]=_t-1,yt[te+5]=_t-2,this._triangleOffset+=2}}if(!this.useNativeLine){var qt=this._vertexOffset,ge=this._vertexOffset+c*2;w.copy(qt,qt+2),w.copy(qt+1,qt+3),E.copy(ge-1,ge-3),E.copy(ge-2,ge-4)}return this._vertexOffset=_t,this._vertexOffset}}},setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,c=l;c<f;c++)this.attributes.color.set(c,i);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});N.D5.defaults(Ol.prototype,Rl);var Qo=Ol;function Ws(t,i,l,f,c,p,y){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=f,this.height=c,this.offsetX=i,this.offsetY=l,this.dpr=y,this.gap=p}Ws.prototype={constructor:Ws,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,i,l){var f=t.getBoundingRect();i==null&&(i=f.width),l==null&&(l=f.height),i*=this.dpr,l*=this.dpr,this._fitElement(t,i,l);var c=this._x,p=this._y,y=this.width*this.dpr,x=this.height*this.dpr,w=this.gap;if(c+i+w>y&&(c=this._x=0,p+=this._rowHeight+w,this._y=p,this._rowHeight=0),this._x+=i+w,this._rowHeight=Math.max(this._rowHeight,l),p+l+w>x)return null;t.x+=this.offsetX*this.dpr+c,t.y+=this.offsetY*this.dpr+p,this._zr.add(t);var E=[this.offsetX/this.width,this.offsetY/this.height],B=[[c/y+E[0],p/x+E[1]],[(c+i)/y+E[0],(p+l)/x+E[1]]];return B},_fitElement:function(t,i,l){var f=t.getBoundingRect(),c=i/f.width,p=l/f.height;t.x=-f.x*c,t.y=-f.y*p,t.scaleX=c,t.scaleY=p,t.update()}};function Lc(t){t=t||{},t.width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=t.gap==null?2:t.gap;var i=document.createElement("canvas");i.width=t.width*t.devicePixelRatio,i.height=t.height*t.devicePixelRatio,this._canvas=i,this._texture=new Yr({image:i,flipY:!1});var l=this;this._zr=N.x_.init(i);var f=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){f.call(this),l._texture.dirty(),l.onupdate&&l.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new Ws(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}Lc.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,i=this._textureAtlasNodes,l=i.length,f=l*this._nodeWidth%t,c=Math.floor(l*this._nodeWidth/t)*this._nodeHeight;if(!(c>=t)){var p=(f+this._nodeWidth)*this._dpr,y=(c+this._nodeHeight)*this._dpr;try{this._zr.resize({width:p,height:y})}catch{this._canvas.width=p,this._canvas.height=y}var x=new Ws(this._zr,f,c,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(x),x}},add:function(t,i,l){if(this._coords[t.id])return this._coords[t.id];var f=this._getCurrentNode().add(t,i,l);if(!f){var c=this._expand();if(!c)return;f=c.add(t,i,l)}return this._coords[t.id]=f,f},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};var wu=Lc;function Du(){}Du.prototype={constructor:Du,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new se.DirectionalLight({shadowBias:.005}),this.ambientLight=new se.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var i=this.mainLight,l=this.ambientLight,f=t.getModel("light"),c=f.getModel("main"),p=f.getModel("ambient");i.intensity=c.get("intensity"),l.intensity=p.get("intensity"),i.color=se.parseColor(c.get("color")).slice(0,3),l.color=se.parseColor(p.get("color")).slice(0,3);var y=c.get("alpha")||0,x=c.get("beta")||0;i.position.setArray(se.directionFromAlphaBeta(y,x)),i.lookAt(se.Vector3.ZERO),i.castShadow=c.get("shadow"),i.shadowResolution=se.getShadowResolution(c.get("shadowQuality"))},updateAmbientCubemap:function(t,i,l){var f=i.getModel("light.ambientCubemap"),c=f.get("texture");if(c){this._cubemapLightsCache=this._cubemapLightsCache||{};var p=this._cubemapLightsCache[c];if(!p){var y=this;p=this._cubemapLightsCache[c]=se.createAmbientCubemap(f.option,t,l,function(){y._isSkyboxFromAmbientCubemap&&y._skybox.setEnvironmentMap(p.specular.cubemap),l.getZr().refresh()})}this._lightRoot.add(p.diffuse),this._lightRoot.add(p.specular),this._currentCubemapLights=p}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,i,l){var f=i.get("environment"),c=this;function p(){return c._skybox=c._skybox||new ar,c._skybox}var y=p();if(f&&f!=="none")if(f==="auto")if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var x=this._currentCubemapLights.specular.cubemap;y.setEnvironmentMap(x),this._scene&&y.attachScene(this._scene),y.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if(typeof f=="object"&&f.colorStops||typeof f=="string"&&N.$_.parse(f)){this._isSkyboxFromAmbientCubemap=!1;var w=new se.Texture2D({anisotropic:8,flipY:!1});y.setEnvironmentMap(w);var E=w.image=document.createElement("canvas");E.width=E.height=16;var B=E.getContext("2d"),q=new N.Q.UL({shape:{x:0,y:0,width:16,height:16},style:{fill:f}});N.z$(B,q),y.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;var w=se.loadTexture(f,l,{anisotropic:8,flipY:!1});y.setEnvironmentMap(w),y.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var yt=i.coordinateSystem;if(this._skybox)if(yt&&yt.viewGL&&f!=="auto"&&!(f.match&&f.match(/.hdr$/))){var _t=yt.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[_t]("fragment","SRGB_DECODE")}else this._skybox.material.undefine("fragment","SRGB_DECODE")}};var Hs=Du,vo=Vn.vec3,Ic=$r.extend(function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION"),normal:new $r.Attribute("normal","float",3,"NORMAL"),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var i=this.attributes,l=this.getQuadVertexCount()*t,f=this.getQuadTriangleCount()*t;this.vertexCount!==l&&(i.position.init(l),i.normal.init(l),i.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=vo.create(),i=vo.create(),l=vo.create(),f=[0,3,1,3,2,1];return function(c,p){var y=this.attributes.position,x=this.attributes.normal,w=this.attributes.color;vo.sub(t,c[1],c[0]),vo.sub(i,c[2],c[1]),vo.cross(l,t,i),vo.normalize(l,l);for(var E=0;E<4;E++)y.set(this._vertexOffset+E,c[E]),w.set(this._vertexOffset+E,p),x.set(this._vertexOffset+E,l);for(var B=this._faceOffset*3,E=0;E<6;E++)this.indices[B+E]=f[E]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});N.D5.defaults(Ic.prototype,Rl);var Rc=Ic,If=Xr.firstNotNull,Cp={x:0,y:2,z:1};function Pp(t,i,l,f){var c=[0,0,0],p=f<0?l.getExtentMin():l.getExtentMax();c[Cp[l.dim]]=p,t.position.setArray(c),t.rotation.identity(),i.distance=-Math.abs(p),i.normal.set(0,0,0),l.dim==="x"?(t.rotation.rotateY(f*Math.PI/2),i.normal.x=-f):l.dim==="z"?(t.rotation.rotateX(-f*Math.PI/2),i.normal.y=-f):(f>0&&t.rotation.rotateY(Math.PI),i.normal.z=-f)}function Au(t,i,l){this.rootNode=new se.Node;var f=new se.Mesh({geometry:new Qo({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),c=new se.Mesh({geometry:new Rc,material:l,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(c),this.rootNode.add(f),this.faceInfo=t,this.plane=new se.Plane,this.linesMesh=f,this.quadsMesh=c}Au.prototype.update=function(t,i,l){var f=t.coordinateSystem,c=[f.getAxis(this.faceInfo[0]),f.getAxis(this.faceInfo[1])],p=this.linesMesh.geometry,y=this.quadsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0),this._updateSplitLines(p,c,t,l),this._udpateSplitAreas(y,c,t,l),p.convertToTypedArray(),y.convertToTypedArray();var x=f.getAxis(this.faceInfo[2]);Pp(this.rootNode,this.plane,x,this.faceInfo[3])},Au.prototype._updateSplitLines=function(t,i,l,f){var c=f.getDevicePixelRatio();i.forEach(function(p,y){var x=p.model,w=i[1-y].getExtent();if(!p.scale.isBlank()){var E=x.getModel("splitLine",l.getModel("splitLine"));if(E.get("show")){var B=E.getModel("lineStyle"),q=B.get("color"),yt=If(B.get("opacity"),1),_t=If(B.get("width"),1);q=N.D5.isArray(q)?q:[q];for(var Mt=p.getTicksCoords({tickModel:E}),Ct=0,Gt=0;Gt<Mt.length;Gt++){var Xt=Mt[Gt].coord,ne=se.parseColor(q[Ct%q.length]);ne[3]*=yt;var te=[0,0,0],qt=[0,0,0];te[y]=qt[y]=Xt,te[1-y]=w[0],qt[1-y]=w[1],t.addLine(te,qt,ne,_t*c),Ct++}}}})},Au.prototype._udpateSplitAreas=function(t,i,l,f){i.forEach(function(c,p){var y=c.model,x=i[1-p].getExtent();if(!c.scale.isBlank()){var w=y.getModel("splitArea",l.getModel("splitArea"));if(w.get("show")){var E=w.getModel("areaStyle"),B=E.get("color"),q=If(E.get("opacity"),1);B=N.D5.isArray(B)?B:[B];for(var yt=c.getTicksCoords({tickModel:w,clamp:!0}),_t=0,Mt=[0,0,0],Ct=[0,0,0],Gt=0;Gt<yt.length;Gt++){var Xt=yt[Gt].coord,ne=[0,0,0],te=[0,0,0];if(ne[p]=te[p]=Xt,ne[1-p]=x[0],te[1-p]=x[1],Gt===0){Mt=ne,Ct=te;continue}var qt=se.parseColor(B[_t%B.length]);qt[3]*=q,t.addQuad([Mt,ne,te,Ct],qt),Mt=ne,Ct=te,_t++}}}})};var Lp=Au,bu=[0,1,2,0,2,3],Rf=$r.extend(function(){return{attributes:{position:new $r.Attribute("position","float",3,"POSITION"),texcoord:new $r.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new $r.Attribute("offset","float",2),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var i=t*4,l=t*2;this.vertexCount!==i&&(this.attributes.position.init(i),this.attributes.offset.init(i),this.attributes.color.init(i)),this.triangleCount!==l&&(this.indices=i>65535?new Uint32Array(l*3):new Uint16Array(l*3))},setSpriteAlign:function(t,i,l,f,c){l==null&&(l="left"),f==null&&(f="top");var p,y,x,w;switch(c=c||0,l){case"left":p=c,x=i[0]+c;break;case"center":case"middle":p=-i[0]/2,x=i[0]/2;break;case"right":p=-i[0]-c,x=-c;break}switch(f){case"bottom":y=c,w=i[1]+c;break;case"middle":y=-i[1]/2,w=i[1]/2;break;case"top":y=-i[1]-c,w=-c;break}var E=t*4,B=this.attributes.offset;B.set(E,[p,w]),B.set(E+1,[x,w]),B.set(E+2,[x,y]),B.set(E+3,[p,y])},addSprite:function(t,i,l,f,c,p){var y=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,i,l,f,c,p);for(var x=0;x<bu.length;x++)this.indices[this._faceOffset*3+x]=bu[x]+y;return this._faceOffset+=2,this._vertexOffset+=4,y/4},setSprite:function(t,i,l,f,c,p,y){for(var x=t*4,w=this.attributes,E=0;E<4;E++)w.position.set(x+E,i);var B=w.texcoord;B.set(x,[f[0][0],f[0][1]]),B.set(x+1,[f[1][0],f[0][1]]),B.set(x+2,[f[1][0],f[1][1]]),B.set(x+3,[f[0][0],f[1][1]]),this.setSpriteAlign(t,l,c,p,y)}});N.D5.defaults(Rf.prototype,Rl);var $o=Rf,qo=`@export ecgl.labels.vertex

attribute vec3 position: POSITION;
attribute vec2 texcoord: TEXCOORD_0;
attribute vec2 offset;
#ifdef VERTEX_COLOR
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec2 v_Texcoord;

void main()
{
 vec4 proj = worldViewProjection * vec4(position, 1.0);

 vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;

 screen += offset;

 proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);
 gl_Position = proj;
#ifdef VERTEX_COLOR
 v_Color = a_Color;
#endif
 v_Texcoord = texcoord;
}
@end


@export ecgl.labels.fragment

uniform vec3 color : [1.0, 1.0, 1.0];
uniform float alpha : 1.0;
uniform sampler2D textureAtlas;
uniform vec2 uvScale: [1.0, 1.0];

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif
varying float v_Miter;

varying vec2 v_Texcoord;

void main()
{
 gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);
#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
#endif
}

@end`;se.Shader.import(qo);var po=se.Mesh.extend(function(){var t=new $o({dynamic:!0}),i=new se.Material({shader:se.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:t,material:i,culling:!1,castShadow:!1,ignorePicking:!0}}),ts=Xr.firstNotNull,es={x:0,y:2,z:1};function Of(t,i){var l=new se.Mesh({geometry:new Qo({useNativeLine:!1}),material:i,castShadow:!1,ignorePicking:!0,renderOrder:2}),f=new po;f.material.depthMask=!1;var c=new se.Node;c.add(l),c.add(f),this.rootNode=c,this.dim=t,this.linesMesh=l,this.labelsMesh=f,this.axisLineCoords=null,this.labelElements=[]}var Nf={x:"y",y:"x",z:"y"};Of.prototype.update=function(t,i,l){var f=t.coordinateSystem,c=f.getAxis(this.dim),p=this.linesMesh.geometry,y=this.labelsMesh.geometry;p.convertToDynamicArray(!0),y.convertToDynamicArray(!0);var x=c.model,w=c.getExtent(),We=l.getDevicePixelRatio(),E=x.getModel("axisLine",t.getModel("axisLine")),B=x.getModel("axisTick",t.getModel("axisTick")),q=x.getModel("axisLabel",t.getModel("axisLabel")),yt=E.get("lineStyle.color");if(E.get("show")){var _t=E.getModel("lineStyle"),Mt=[0,0,0],Ct=[0,0,0],Gt=es[c.dim];Mt[Gt]=w[0],Ct[Gt]=w[1],this.axisLineCoords=[Mt,Ct];var Xt=se.parseColor(yt),ne=ts(_t.get("width"),1),te=ts(_t.get("opacity"),1);Xt[3]*=te,p.addLine(Mt,Ct,Xt,ne*We)}if(B.get("show")){var qt=B.getModel("lineStyle"),ge=se.parseColor(ts(qt.get("color"),yt)),ne=ts(qt.get("width"),1);ge[3]*=ts(qt.get("opacity"),1);for(var ve=c.getTicksCoords(),Ne=B.get("length"),Ee=0;Ee<ve.length;Ee++){var Ve=ve[Ee].coord,Mt=[0,0,0],Ct=[0,0,0],Gt=es[c.dim],Qe=es[Nf[c.dim]];Mt[Gt]=Ct[Gt]=Ve,Ct[Qe]=Ne,p.addLine(Mt,Ct,ge,ne*We)}}this.labelElements=[];var We=l.getDevicePixelRatio();if(q.get("show"))for(var ve=c.getTicksCoords(),rr=x.get("data"),fr=q.get("margin"),je=c.getViewLabels(),Ee=0;Ee<je.length;Ee++){var hr=je[Ee].tickValue,wr=je[Ee].formattedLabel,Ir=je[Ee].rawLabel,Ve=c.dataToCoord(hr),dr=[0,0,0],Gt=es[c.dim],Qe=es[Nf[c.dim]];dr[Gt]=dr[Gt]=Ve,dr[Qe]=fr;var un=q;rr&&rr[hr]&&rr[hr].textStyle&&(un=new N.Hn(rr[hr].textStyle,q,x.ecModel));var Pr=ts(un.get("color"),yt),Zr=new N.Q.xv({style:(0,Il.Lr)(un,{text:wr,fill:typeof Pr=="function"?Pr(c.type==="category"?Ir:c.type==="value"?hr+"":hr,Ee):Pr,verticalAlign:"top",align:"left"})}),sn=i.add(Zr),Dn=Zr.getBoundingRect();y.addSprite(dr,[Dn.width*We,Dn.height*We],sn),this.labelElements.push(Zr)}if(x.get("name")){var An=x.getModel("nameTextStyle"),dr=[0,0,0],Gt=es[c.dim],Qe=es[Nf[c.dim]],en=ts(An.get("color"),yt),si=An.get("borderColor"),ne=An.get("borderWidth");dr[Gt]=dr[Gt]=(w[0]+w[1])/2,dr[Qe]=x.get("nameGap");var Zr=new N.Q.xv({style:(0,Il.Lr)(An,{text:x.get("name"),fill:en,stroke:si,lineWidth:ne})}),sn=i.add(Zr),Dn=Zr.getBoundingRect();y.addSprite(dr,[Dn.width*We,Dn.height*We],sn),Zr.__idx=this.labelElements.length,this.nameLabelElement=Zr}this.labelsMesh.material.set("textureAtlas",i.getTexture()),this.labelsMesh.material.set("uvScale",i.getCoordsScale()),p.convertToTypedArray(),y.convertToTypedArray()},Of.prototype.setSpriteAlign=function(t,i,l){for(var f=l.getDevicePixelRatio(),c=this.labelsMesh.geometry,p=0;p<this.labelElements.length;p++){var y=this.labelElements[p],x=y.getBoundingRect();c.setSpriteAlign(p,[x.width*f,x.height*f],t,i)}var w=this.nameLabelElement;if(w){var x=w.getBoundingRect();c.setSpriteAlign(w.__idx,[x.width*f,x.height*f],t,i),c.dirty()}this.textAlign=t,this.textVerticalAlign=i};var Ip=Of,Mu=`@export ecgl.lines3D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec3 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

void main()
{
 gl_Position = worldViewProjection * vec4(position, 1.0);
 v_Color = a_Color;
}

@end

@export ecgl.lines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif
}
@end



@export ecgl.lines3D.clipNear

vec4 clipNear(vec4 p1, vec4 p2) {
 float n = (p1.w - near) / (p1.w - p2.w);
 return vec4(mix(p1.xy, p2.xy, n), -near, near);
}

@end

@export ecgl.lines3D.expandLine
#ifdef VERTEX_ANIMATION
 vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);
 vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);
 vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);
#else
 vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);
 vec4 currProj = worldViewProjection * vec4(position, 1.0);
 vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);
#endif

 if (currProj.w < 0.0) {
 if (nextProj.w > 0.0) {
 currProj = clipNear(currProj, nextProj);
 }
 else if (prevProj.w > 0.0) {
 currProj = clipNear(currProj, prevProj);
 }
 }

 vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;
 vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;

 vec2 dir;
 float len = offset;
 if (position == positionPrev) {
 dir = normalize(nextScreen - currScreen);
 }
 else if (position == positionNext) {
 dir = normalize(currScreen - prevScreen);
 }
 else {
 vec2 dirA = normalize(currScreen - prevScreen);
 vec2 dirB = normalize(nextScreen - currScreen);

 vec2 tanget = normalize(dirA + dirB);

 float miter = 1.0 / max(dot(tanget, dirA), 0.5);
 len *= miter;
 dir = tanget;
 }

 dir = vec2(-dir.y, dir.x) * len;
 currScreen += dir;

 currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);
@end


@export ecgl.meshLines3D.vertex

attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute vec4 a_Color : COLOR;

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute vec3 prevPositionPrev;
attribute vec3 prevPositionNext;
uniform float percent : 1.0;
#endif

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

varying vec4 v_Color;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain
}
@end


@export ecgl.meshLines3D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain
}

@end`,Oc=Xr.firstNotNull;se.Shader.import(Mu);var rs={x:0,y:2,z:1},Nl=N.Ir.extend({type:"grid3D",__ecgl__:!0,init:function(t,i){var l=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],f=["x","y","z"],c=new se.Material({shader:se.createShader("ecgl.color"),depthMask:!1,transparent:!0}),p=new se.Material({shader:se.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});c.define("fragment","DOUBLE_SIDED"),c.define("both","VERTEX_COLOR"),this.groupGL=new se.Node,this._control=new Oi({zr:i.getZr()}),this._control.init(),this._faces=l.map(function(x){var w=new Lp(x,p,c);return this.groupGL.add(w.rootNode),w},this),this._axes=f.map(function(x){var w=new Ip(x,p);return this.groupGL.add(w.rootNode),w},this);var y=i.getDevicePixelRatio();this._axisLabelSurface=new wu({width:256,height:256,devicePixelRatio:y}),this._axisLabelSurface.onupdate=function(){i.getZr().refresh()},this._axisPointerLineMesh=new se.Mesh({geometry:new Qo({useNativeLine:!1}),material:p,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new wu({width:128,height:128,devicePixelRatio:y}),this._axisPointerLabelsMesh=new po({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new se.Node,this._sceneHelper=new Hs,this._sceneHelper.initLight(this._lightRoot)},render:function(t,i,l){this._model=t,this._api=l;var f=t.coordinateSystem;f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var c=this._control;c.setViewGL(f.viewGL);var p=t.getModel("viewControl");c.setFromViewControlModel(p,0),this._axisLabelSurface.clear(),c.off("update"),t.get("show")&&(this._faces.forEach(function(y){y.update(t,i,l)},this),this._axes.forEach(function(y){y.update(t,this._axisLabelSurface,l)},this)),c.on("update",this._onCameraChange.bind(this,t,l),this),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},showAxisPointer:function(t,i,l,f){this._doShowAxisPointer(),this._updateAxisPointer(f.value)},hideAxisPointer:function(t,i,l,f){this._doHideAxisPointer()},_initMouseHandler:function(t){var i=t.coordinateSystem,l=i.viewGL;t.get("show")&&t.get("axisPointer.show")?l.on("mousemove",this._updateAxisPointerOnMousePosition,this):l.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var i=this._model,l=i.coordinateSystem,f=l.viewGL,c=f.castRay(t.offsetX,t.offsetY,new se.Ray),p,y=0;y<this._faces.length;y++){var x=this._faces[y];if(!x.rootNode.invisible){x.plane.normal.dot(f.camera.worldTransform.z)<0&&x.plane.normal.negate();var w=c.intersectPlane(x.plane);if(!!w){var E=l.getAxis(x.faceInfo[0]),B=l.getAxis(x.faceInfo[1]),q=rs[x.faceInfo[0]],yt=rs[x.faceInfo[1]];E.contain(w.array[q])&&B.contain(w.array[yt])&&(p=w)}}}if(p){var _t=l.pointToData(p.array,[],!0);this._updateAxisPointer(_t),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,i){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var l=this._control;i.dispatchAction({type:"grid3DChangeCamera",alpha:l.getAlpha(),beta:l.getBeta(),distance:l.getDistance(),center:l.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),i=new se.Vector3;t.update();for(var l=0;l<this._faces.length/2;l++){for(var f=[],c=0;c<2;c++){var p=this._faces[l*2+c];p.rootNode.getWorldPosition(i),i.transformMat4(t.viewMatrix),f[c]=i.z}var y=f[0]>f[1]?0:1,x=this._faces[l*2+y],w=this._faces[l*2+1-y];x.rootNode.invisible=!0,w.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,i=t.getAxis("x"),l=t.getAxis("y"),f=t.getAxis("z"),c=f.getExtentMax(),p=f.getExtentMin(),y=i.getExtentMin(),x=i.getExtentMax(),w=l.getExtentMax(),E=l.getExtentMin(),B=this._axes[0].rootNode,q=this._axes[1].rootNode,yt=this._axes[2].rootNode,_t=this._faces,Mt=_t[4].rootNode.invisible?E:w,Ct=_t[2].rootNode.invisible?c:p,Gt=_t[0].rootNode.invisible?y:x,Xt=_t[2].rootNode.invisible?c:p,ne=_t[0].rootNode.invisible?x:y,te=_t[4].rootNode.invisible?E:w;B.rotation.identity(),q.rotation.identity(),yt.rotation.identity(),_t[4].rootNode.invisible&&(this._axes[0].flipped=!0,B.rotation.rotateX(Math.PI)),_t[0].rootNode.invisible&&(this._axes[1].flipped=!0,q.rotation.rotateZ(Math.PI)),_t[4].rootNode.invisible&&(this._axes[2].flipped=!0,yt.rotation.rotateY(Math.PI)),B.position.set(0,Ct,Mt),q.position.set(Gt,Xt,0),yt.position.set(ne,0,te),B.update(),q.update(),yt.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),i=[new se.Vector4,new se.Vector4],l=new se.Vector4;this.groupGL.getWorldPosition(l),l.w=1,l.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),l.x/=l.w,l.y/=l.w,this._axes.forEach(function(f){for(var c=f.axisLineCoords,p=f.labelsMesh.geometry,y=0;y<i.length;y++)i[y].setArray(c[y]),i[y].w=1,i[y].transformMat4(f.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),i[y].x/=i[y].w,i[y].y/=i[y].w;var x=i[1].x-i[0].x,w=i[1].y-i[0].y,E=(i[1].x+i[0].x)/2,B=(i[1].y+i[0].y)/2,q,yt;Math.abs(w/x)<.5?(q="center",yt=B>l.y?"bottom":"top"):(yt="middle",q=E>l.x?"left":"right"),f.setSpriteAlign(q,yt,this._api)},this)},_doShowAxisPointer:function(){!this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var i=this._model.coordinateSystem,l=i.dataToPoint(t),f=this._axisPointerLineMesh,c=f.geometry,p=this._model.getModel("axisPointer"),y=this._api.getDevicePixelRatio();c.convertToDynamicArray(!0);function x(Ee){return Xr.firstNotNull(Ee.model.get("axisPointer.show"),p.get("show"))}function w(Ee){var Ve=Ee.model.getModel("axisPointer",p),Qe=Ve.getModel("lineStyle"),We=se.parseColor(Qe.get("color")),rr=Oc(Qe.get("width"),1),fr=Oc(Qe.get("opacity"),1);return We[3]*=fr,{color:We,lineWidth:rr}}for(var E=0;E<this._faces.length;E++){var B=this._faces[E];if(!B.rootNode.invisible){for(var q=B.faceInfo,yt=q[3]<0?i.getAxis(q[2]).getExtentMin():i.getAxis(q[2]).getExtentMax(),_t=rs[q[2]],Mt=0;Mt<2;Mt++){var Ct=q[Mt],Gt=q[1-Mt],Xt=i.getAxis(Ct),ne=i.getAxis(Gt);if(!!x(Xt)){var te=[0,0,0],qt=[0,0,0],ge=rs[Ct],ve=rs[Gt];te[ge]=qt[ge]=l[ge],te[_t]=qt[_t]=yt,te[ve]=ne.getExtentMin(),qt[ve]=ne.getExtentMax();var Ne=w(Xt);c.addLine(te,qt,Ne.color,Ne.lineWidth*y)}}if(x(i.getAxis(q[2]))){var te=l.slice(),qt=l.slice();qt[_t]=yt;var Ne=w(i.getAxis(q[2]));c.addLine(te,qt,Ne.color,Ne.lineWidth*y)}}}c.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var i=this._model,l=this._axisPointerLabelsMesh,f=this._axisPointerLabelsSurface,c=i.coordinateSystem,p=i.getModel("axisPointer");l.geometry.convertToDynamicArray(!0),f.clear();var y={x:"y",y:"x",z:"y"};this._axes.forEach(function(x,w){var E=c.getAxis(x.dim),B=E.model,q=B.getModel("axisPointer",p),yt=q.getModel("label"),_t=q.get("lineStyle.color");if(!(!yt.get("show")||!q.get("show"))){var Mt=t[w],Ct=yt.get("formatter"),Gt=E.scale.getLabel({value:Mt});if(Ct!=null)Gt=Ct(Gt,t);else if(E.scale.type==="interval"||E.scale.type==="log"){var Xt=N.Rx.getPrecisionSafe(E.scale.getTicks()[0]);Gt=Mt.toFixed(Xt+2)}var ne=yt.get("color"),te=new N.Q.xv({style:(0,Il.Lr)(yt,{text:Gt,fill:ne||_t,align:"left",verticalAlign:"top"})}),qt=f.add(te),ge=te.getBoundingRect(),ve=this._api.getDevicePixelRatio(),Ne=x.rootNode.position.toArray(),Ee=rs[y[x.dim]];Ne[Ee]+=(x.flipped?-1:1)*yt.get("margin"),Ne[rs[x.dim]]=E.dataToCoord(t[w]),l.geometry.addSprite(Ne,[ge.width*ve,ge.height*ve],qt,x.textAlign,x.textVerticalAlign)}},this),f.getZr().refreshImmediately(),l.material.set("uvScale",f.getCoordsScale()),l.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}}),La=F(53907);function ns(t){La.Z.call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}ns.prototype={constructor:ns,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").dataToCoord(t[0],l),i[2]=this.getAxis("y").dataToCoord(t[1],l),i[1]=this.getAxis("z").dataToCoord(t[2],l),i},pointToData:function(t,i,l){return i=i||[],i[0]=this.getAxis("x").coordToData(t[0],l),i[1]=this.getAxis("y").coordToData(t[2],l),i[2]=this.getAxis("z").coordToData(t[1],l),i}},N.D5.inherits(ns,La.Z);var go=ns;function Xs(t,i,l){N.RD.call(this,t,i,l)}Xs.prototype={constructor:Xs,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},N.D5.inherits(Xs,N.RD);var Rp=Xs,Eu=F(76172),Bf=function(){this._pool={},this._allocatedTextures=[]};Bf.prototype={constructor:Bf,get:function(t){var i=zf(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];if(!l.length){var f=new Yr(t);return this._allocatedTextures.push(f),f}return l.pop()},put:function(t){var i=zf(t);this._pool.hasOwnProperty(i)||(this._pool[i]=[]);var l=this._pool[i];l.push(t)},clear:function(t){for(var i=0;i<this._allocatedTextures.length;i++)this._allocatedTextures[i].dispose(t);this._pool={},this._allocatedTextures=[]}};var Ff={width:512,height:512,type:D.UNSIGNED_BYTE,format:D.RGBA,wrapS:D.CLAMP_TO_EDGE,wrapT:D.CLAMP_TO_EDGE,minFilter:D.LINEAR_MIPMAP_LINEAR,magFilter:D.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},Ys=Object.keys(Ff);function zf(t){$.defaultsWithPropList(t,Ff,Ys),Op(t);for(var i="",l=0;l<Ys.length;l++){var f=Ys[l],c=t[f].toString();i+=c}return i}function Op(t){var i=Nc(t.width,t.height);t.format===D.DEPTH_COMPONENT&&(t.useMipmap=!1),(!i||!t.useMipmap)&&(t.minFilter==D.NEAREST_MIPMAP_NEAREST||t.minFilter==D.NEAREST_MIPMAP_LINEAR?t.minFilter=D.NEAREST:(t.minFilter==D.LINEAR_MIPMAP_LINEAR||t.minFilter==D.LINEAR_MIPMAP_NEAREST)&&(t.minFilter=D.LINEAR)),i||(t.wrapS=D.CLAMP_TO_EDGE,t.wrapT=D.CLAMP_TO_EDGE)}function Nc(t,i){return(t&t-1)===0&&(i&i-1)===0}var Gf=Bf,Bc=`@export clay.sm.depth.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
attribute vec3 position : POSITION;
attribute vec2 texcoord : TEXCOORD_0;
uniform vec2 uvRepeat = vec2(1.0, 1.0);
uniform vec2 uvOffset = vec2(0.0, 0.0);
@import clay.chunk.skinning_header
@import clay.chunk.instancing_header
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
void main(){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 v_ViewPosition = worldViewProjection * P;
 gl_Position = v_ViewPosition;
 v_Texcoord = texcoord * uvRepeat + uvOffset;
}
@end
@export clay.sm.depth.fragment
varying vec4 v_ViewPosition;
varying vec2 v_Texcoord;
uniform float bias : 0.001;
uniform float slopeScale : 1.0;
uniform sampler2D alphaMap;
uniform float alphaCutoff: 0.0;
@import clay.util.encode_float
void main(){
 float depth = v_ViewPosition.z / v_ViewPosition.w;
 if (alphaCutoff > 0.0) {
 if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {
 discard;
 }
 }
#ifdef USE_VSM
 depth = depth * 0.5 + 0.5;
 float moment1 = depth;
 float moment2 = depth * depth;
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 moment2 += 0.25*(dx*dx+dy*dy);
 #endif
 gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);
#else
 #ifdef SUPPORT_STANDARD_DERIVATIVES
 float dx = dFdx(depth);
 float dy = dFdy(depth);
 depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;
 #else
 depth += bias;
 #endif
 gl_FragColor = encodeFloat(depth * 0.5 + 0.5);
#endif
}
@end
@export clay.sm.debug_depth
uniform sampler2D depthMap;
varying vec2 v_Texcoord;
@import clay.util.decode_float
void main() {
 vec4 tex = texture2D(depthMap, v_Texcoord);
#ifdef USE_VSM
 gl_FragColor = vec4(tex.rgb, 1.0);
#else
 float depth = decodeFloat(tex);
 gl_FragColor = vec4(depth, depth, depth, 1.0);
#endif
}
@end
@export clay.sm.distance.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 world : WORLD;
attribute vec3 position : POSITION;
@import clay.chunk.skinning_header
varying vec3 v_WorldPosition;
void main (){
 vec4 P = vec4(position, 1.0);
#ifdef SKINNING
 @import clay.chunk.skin_matrix
 P = skinMatrixWS * P;
#endif
#ifdef INSTANCING
 @import clay.chunk.instancing_matrix
 P = instanceMat * P;
#endif
 gl_Position = worldViewProjection * P;
 v_WorldPosition = (world * P).xyz;
}
@end
@export clay.sm.distance.fragment
uniform vec3 lightPosition;
uniform float range : 100;
varying vec3 v_WorldPosition;
@import clay.util.encode_float
void main(){
 float dist = distance(lightPosition, v_WorldPosition);
#ifdef USE_VSM
 gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);
#else
 dist = dist / range;
 gl_FragColor = encodeFloat(dist);
#endif
}
@end
@export clay.plugin.shadow_map_common
@import clay.util.decode_float
float tapShadowMap(sampler2D map, vec2 uv, float z){
 vec4 tex = texture2D(map, uv);
 return step(z, decodeFloat(tex) * 2.0 - 1.0);
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {
 float shadowContrib = tapShadowMap(map, uv, z);
 vec2 offset = vec2(1.0 / textureSize) * scale;
#ifdef PCF_KERNEL_SIZE
 for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{
 shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);
 }}
 return shadowContrib / float(PCF_KERNEL_SIZE + 1);
#else
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);
 shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);
 shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);
 return shadowContrib / 9.0;
#endif
}
float pcf(sampler2D map, vec2 uv, float z, float textureSize) {
 return pcf(map, uv, z, textureSize, vec2(1.0));
}
float chebyshevUpperBound(vec2 moments, float z){
 float p = 0.0;
 z = z * 0.5 + 0.5;
 if (z <= moments.x) {
 p = 1.0;
 }
 float variance = moments.y - moments.x * moments.x;
 variance = max(variance, 0.0000001);
 float mD = moments.x - z;
 float pMax = variance / (variance + mD * mD);
 pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);
 return max(p, pMax);
}
float computeShadowContrib(
 sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset
) {
 vec4 posInLightSpace = lightVPM * vec4(position, 1.0);
 posInLightSpace.xyz /= posInLightSpace.w;
 float z = posInLightSpace.z;
 if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&
 all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){
 vec2 uv = (posInLightSpace.xy+1.0) / 2.0;
 #ifdef USE_VSM
 vec2 moments = texture2D(map, uv * scale + offset).xy;
 return chebyshevUpperBound(moments, z);
 #else
 return pcf(map, uv * scale + offset, z, textureSize, scale);
 #endif
 }
 return 1.0;
}
float computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {
 return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));
}
float computeShadowContribOmni(samplerCube map, vec3 direction, float range)
{
 float dist = length(direction);
 vec4 shadowTex = textureCube(map, direction);
#ifdef USE_VSM
 vec2 moments = shadowTex.xy;
 float variance = moments.y - moments.x * moments.x;
 float mD = moments.x - dist;
 float p = variance / (variance + mD * mD);
 if(moments.x + 0.001 < dist){
 return clamp(p, 0.0, 1.0);
 }else{
 return 1.0;
 }
#else
 return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);
#endif
}
@end
@export clay.plugin.compute_shadow_map
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)
#ifdef SPOT_LIGHT_SHADOWMAP_COUNT
uniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT
#if defined(SHADOW_CASCADE)
uniform sampler2D directionalLightShadowMaps[1]:unconfigurable;
uniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;
uniform float directionalLightShadowMapSizes[1]:unconfigurable;
uniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;
uniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;
#else
uniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
uniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
#endif
#ifdef POINT_LIGHT_SHADOWMAP_COUNT
uniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;
#endif
uniform bool shadowEnabled : true;
#ifdef PCF_KERNEL_SIZE
uniform vec2 pcfKernel[PCF_KERNEL_SIZE];
#endif
@import clay.plugin.shadow_map_common
#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,
 spotLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
#ifdef SHADOW_CASCADE
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)
 / (gl_DepthRange.far - gl_DepthRange.near);
 float shadowContrib;
 shadowContribs[0] = 1.0;
 for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{
 if (
 depth >= shadowCascadeClipsNear[_idx_] &&
 depth <= shadowCascadeClipsFar[_idx_]
 ) {
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[0],
 vec2(1.0 / float(SHADOW_CASCADE), 1.0),
 vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)
 );
 shadowContribs[0] = shadowContrib;
 }
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#else
void computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){
 float shadowContrib;
 for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 shadowContrib = computeShadowContrib(
 directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,
 directionalLightShadowMapSizes[_idx_]
 );
 shadowContribs[_idx_] = shadowContrib;
 }}
 for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
#if defined(POINT_LIGHT_SHADOWMAP_COUNT)
void computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){
 vec3 lightPosition;
 vec3 direction;
 for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{
 lightPosition = pointLightPosition[_idx_];
 direction = position - lightPosition;
 shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);
 }}
 for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{
 shadowContribs[_idx_] = 1.0;
 }}
}
#endif
#endif
@end`,Xa=["px","nx","py","ny","pz","nz"];_r.import(Bc);function Cu(t,i,l){if(l==="alphaMap")return t.material.get("diffuseMap");if(l==="alphaCutoff"){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var f=t.material.get("alphaCutoff");return f||0}return 0}else return l==="uvRepeat"?t.material.get("uvRepeat"):l==="uvOffset"?t.material.get("uvOffset"):i.get(l)}function Uf(t,i){var l=t.material,f=i.material;return l.get("diffuseMap")!==f.get("diffuseMap")||(l.get("alphaCutoff")||0)!==(f.get("alphaCutoff")||0)}var ya=X.extend(function(){return{softShadow:ya.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new Pn,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Gf}},function(){this._gaussianPassH=new Yn({fragment:_r.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new Yn({fragment:_r.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new Yn({fragment:_r.source("clay.sm.debug_depth")})},{render:function(t,i,l,f){l||(l=i.getMainCamera()),this.trigger("beforerender",this,t,i,l),this._renderShadowPass(t,i,l,f),this.trigger("afterrender",this,t,i,l)},renderDebug:function(t,i){t.saveClear();var l=t.viewport,f=0,c=0,p=i||l.width/4,y=p;this.softShadow===ya.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM");for(var x in this._textures){var w=this._textures[x];t.setViewport(f,c,p*w.width/w.height,y),this._outputDepthPass.setUniform("depthMap",w),this._outputDepthPass.render(t),f+=p*w.width/w.height}t.setViewport(l),t.restoreClear()},_updateReceivers:function(t,i){if(i.receiveShadow?(this._receivers.push(i),i.material.set("shadowEnabled",1),i.material.set("pcfKernel",this.kernelPCF)):i.material.set("shadowEnabled",0),this.softShadow===ya.VSM)i.material.define("fragment","USE_VSM"),i.material.undefine("fragment","PCF_KERNEL_SIZE");else{i.material.undefine("fragment","USE_VSM");var l=this.kernelPCF;l&&l.length?i.material.define("fragment","PCF_KERNEL_SIZE",l.length/2):i.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,i){var l=this;i.traverse(function(p){p.isRenderable()&&l._updateReceivers(t,p)});for(var f=0;f<i.lights.length;f++){var c=i.lights[f];c.castShadow&&!c.invisible&&this._lightsCastShadow.push(c)}},_renderShadowPass:function(t,i,l,f){for(var c in this._shadowMapNumber)this._shadowMapNumber[c]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var p=t.gl;if(f||i.update(),l&&l.update(),i.updateLights(),this._update(t,i),!this._lightsCastShadow.length&&this._lastRenderNotCastShadow)return;this._lastRenderNotCastShadow=this._lightsCastShadow===0,p.enable(p.DEPTH_TEST),p.depthMask(!0),p.disable(p.BLEND),p.clearColor(1,1,1,1);for(var y=[],x=[],w=[],E=[],B=[],q=[],yt,_t=0;_t<this._lightsCastShadow.length;_t++){var Mt=this._lightsCastShadow[_t];if(Mt.type==="DIRECTIONAL_LIGHT"){if(yt){console.warn("Only one direectional light supported with shadow cascade");continue}if(Mt.shadowCascade>4){console.warn("Support at most 4 cascade");continue}Mt.shadowCascade>1&&(yt=Mt),this.renderDirectionalLightShadow(t,i,l,Mt,B,E,w)}else Mt.type==="SPOT_LIGHT"?this.renderSpotLightShadow(t,i,Mt,x,y):Mt.type==="POINT_LIGHT"&&this.renderPointLightShadow(t,i,Mt,q);this._shadowMapNumber[Mt.type]++}for(var Ct in this._shadowMapNumber)for(var Gt=this._shadowMapNumber[Ct],Xt=Ct+"_SHADOWMAP_COUNT",_t=0;_t<this._receivers.length;_t++){var ne=this._receivers[_t],te=ne.material;te.fragmentDefines[Xt]!==Gt&&(Gt>0?te.define("fragment",Xt,Gt):te.isDefined("fragment",Xt)&&te.undefine("fragment",Xt))}for(var _t=0;_t<this._receivers.length;_t++){var ne=this._receivers[_t],te=ne.material;yt?te.define("fragment","SHADOW_CASCADE",yt.shadowCascade):te.undefine("fragment","SHADOW_CASCADE")}var qt=i.shadowUniforms;function ge(Qe){return Qe.height}if(w.length>0){var ve=w.map(ge);if(qt.directionalLightShadowMaps={value:w,type:"tv"},qt.directionalLightMatrices={value:E,type:"m4v"},qt.directionalLightShadowMapSizes={value:ve,type:"1fv"},yt){var Ne=B.slice(),Ee=B.slice();Ne.pop(),Ee.shift(),Ne.reverse(),Ee.reverse(),E.reverse(),qt.shadowCascadeClipsNear={value:Ne,type:"1fv"},qt.shadowCascadeClipsFar={value:Ee,type:"1fv"}}}if(y.length>0){var Ve=y.map(ge),qt=i.shadowUniforms;qt.spotLightShadowMaps={value:y,type:"tv"},qt.spotLightMatrices={value:x,type:"m4v"},qt.spotLightShadowMapSizes={value:Ve,type:"1fv"}}q.length>0&&(qt.pointLightShadowMaps={value:q,type:"tv"})},renderDirectionalLightShadow:function(){var t=new Bo,i=new Cr,l=new Ie,f=new Cr,c=new Cr,p=new Cr,y=new Cr;return function(x,w,E,B,q,yt,_t){var Mt=this._getDepthMaterial(B),Ct={getMaterial:function(Dn){return Dn.shadowDepthMaterial||Mt},isMaterialChanged:Uf,getUniform:Cu,ifRender:function(Dn){return Dn.castShadow},sortCompare:no.opaqueSortCompare};if(!w.viewBoundingBoxLastFrame.isFinite()){var Gt=w.getBoundingBox();w.viewBoundingBoxLastFrame.copy(Gt).applyTransform(E.viewMatrix)}var Xt=Math.min(-w.viewBoundingBoxLastFrame.min.z,E.far),ne=Math.max(-w.viewBoundingBoxLastFrame.max.z,E.near),te=this._getDirectionalLightCamera(B,w,E),qt=p.array;y.copy(te.projectionMatrix),fe.invert(c.array,te.worldTransform.array),fe.multiply(c.array,c.array,E.worldTransform.array),fe.multiply(qt,y.array,c.array);for(var ge=[],ve=E instanceof Un,Ne=(E.near+E.far)/(E.near-E.far),Ee=2*E.near*E.far/(E.near-E.far),Ve=0;Ve<=B.shadowCascade;Ve++){var Qe=ne*Math.pow(Xt/ne,Ve/B.shadowCascade),We=ne+(Xt-ne)*Ve/B.shadowCascade,rr=Qe*B.cascadeSplitLogFactor+We*(1-B.cascadeSplitLogFactor);ge.push(rr),q.push(-(-rr*Ne+Ee)/-rr)}var fr=this._getTexture(B,B.shadowCascade);_t.push(fr);var je=x.viewport,hr=x.gl;this._frameBuffer.attach(fr),this._frameBuffer.bind(x),hr.clear(hr.COLOR_BUFFER_BIT|hr.DEPTH_BUFFER_BIT);for(var Ve=0;Ve<B.shadowCascade;Ve++){var wr=ge[Ve],Ir=ge[Ve+1];ve?fe.perspective(i.array,E.fov/180*Math.PI,E.aspect,wr,Ir):fe.ortho(i.array,E.left,E.right,E.bottom,E.top,wr,Ir),t.setFromProjection(i),t.getTransformedBoundingBox(l,c),l.applyProjection(y);var dr=l.min.array,un=l.max.array;dr[0]=Math.max(dr[0],-1),dr[1]=Math.max(dr[1],-1),un[0]=Math.min(un[0],1),un[1]=Math.min(un[1],1),f.ortho(dr[0],un[0],dr[1],un[1],1,-1),te.projectionMatrix.multiplyLeft(f);var Pr=B.shadowResolution||512;x.setViewport((B.shadowCascade-Ve-1)*Pr,0,Pr,Pr,1);var Zr=w.updateRenderList(te);x.renderPass(Zr.opaque,te,Ct),this.softShadow===ya.VSM&&this._gaussianFilter(x,fr,fr.width);var sn=new Cr;sn.copy(te.viewMatrix).multiplyLeft(te.projectionMatrix),yt.push(sn.array),te.projectionMatrix.copy(y)}this._frameBuffer.unbind(x),x.setViewport(je)}}(),renderSpotLightShadow:function(t,i,l,f,c){var p=this._getTexture(l),y=this._getSpotLightCamera(l),x=t.gl;this._frameBuffer.attach(p),this._frameBuffer.bind(t),x.clear(x.COLOR_BUFFER_BIT|x.DEPTH_BUFFER_BIT);var w=this._getDepthMaterial(l),E={getMaterial:function(yt){return yt.shadowDepthMaterial||w},isMaterialChanged:Uf,getUniform:Cu,ifRender:function(yt){return yt.castShadow},sortCompare:no.opaqueSortCompare},B=i.updateRenderList(y);t.renderPass(B.opaque,y,E),this._frameBuffer.unbind(t),this.softShadow===ya.VSM&&this._gaussianFilter(t,p,p.width);var q=new Cr;q.copy(y.worldTransform).invert().multiplyLeft(y.projectionMatrix),c.push(p),f.push(q.array)},renderPointLightShadow:function(t,i,l,f){var c=this._getTexture(l),p=t.gl;f.push(c);var y=this._getDepthMaterial(l),x={getMaterial:function(ne){return ne.shadowDepthMaterial||y},getUniform:Cu,sortCompare:no.opaqueSortCompare},w={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},E=new Ie,B=l.getWorldPosition().array,q=new Ie,yt=l.range;q.min.setArray(B),q.max.setArray(B);var _t=new ur(yt,yt,yt);q.max.add(_t),q.min.sub(_t);var Mt={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};i.traverse(function(ne){if(ne.isRenderable()&&ne.castShadow){var te=ne.geometry;if(!te.boundingBox){for(var qt=0;qt<Xa.length;qt++)w[Xa[qt]].push(ne);return}if(E.transformFrom(te.boundingBox,ne.worldTransform),!E.intersectBoundingBox(q))return;E.updateVertices();for(var qt=0;qt<Xa.length;qt++)Mt[Xa[qt]]=!1;for(var qt=0;qt<8;qt++){var ge=E.vertices[qt],ve=ge[0]-B[0],Ne=ge[1]-B[1],Ee=ge[2]-B[2],Ve=Math.abs(ve),Qe=Math.abs(Ne),We=Math.abs(Ee);Ve>Qe?Ve>We?Mt[ve>0?"px":"nx"]=!0:Mt[Ee>0?"pz":"nz"]=!0:Qe>We?Mt[Ne>0?"py":"ny"]=!0:Mt[Ee>0?"pz":"nz"]=!0}for(var qt=0;qt<Xa.length;qt++)Mt[Xa[qt]]&&w[Xa[qt]].push(ne)}});for(var Ct=0;Ct<6;Ct++){var Gt=Xa[Ct],Xt=this._getPointLightCamera(l,Gt);this._frameBuffer.attach(c,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+Ct),this._frameBuffer.bind(t),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),t.renderPass(w[Gt],Xt,x)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var i=this._lightMaterials[t.__uid__],l=t.type==="POINT_LIGHT";if(!i){var f=l?"clay.sm.distance.":"clay.sm.depth.";i=new Oe({precision:this.precision,shader:new _r(_r.source(f+"vertex"),_r.source(f+"fragment"))}),this._lightMaterials[t.__uid__]=i}return t.shadowSlopeScale!=null&&i.setUniform("slopeScale",t.shadowSlopeScale),t.shadowBias!=null&&i.setUniform("bias",t.shadowBias),this.softShadow===ya.VSM?i.define("fragment","USE_VSM"):i.undefine("fragment","USE_VSM"),l&&(i.set("lightPosition",t.getWorldPosition().array),i.set("range",t.range)),i},_gaussianFilter:function(t,i,l){var f={width:l,height:l,type:pr.FLOAT},c=this._texturePool.get(f);this._frameBuffer.attach(c),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",i),this._gaussianPassH.setUniform("textureWidth",l),this._gaussianPassH.render(t),this._frameBuffer.attach(i),this._gaussianPassV.setUniform("texture",c),this._gaussianPassV.setUniform("textureHeight",l),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(c)},_getTexture:function(t,i){var l=t.__uid__,f=this._textures[l],c=t.shadowResolution||512;return i=i||1,f||(t.type==="POINT_LIGHT"?f=new lo:f=new Yr,f.width=c*i,f.height=c,this.softShadow===ya.VSM?(f.type=pr.FLOAT,f.anisotropic=4):(f.minFilter=D.NEAREST,f.magFilter=D.NEAREST,f.useMipmap=!1),this._textures[l]=f),f},_getPointLightCamera:function(t,i){this._lightCameras.point||(this._lightCameras.point={px:new Un,nx:new Un,py:new Un,ny:new Un,pz:new Un,nz:new Un});var l=this._lightCameras.point[i];switch(l.far=t.range,l.fov=90,l.position.set(0,0,0),i){case"px":l.lookAt(ur.POSITIVE_X,ur.NEGATIVE_Y);break;case"nx":l.lookAt(ur.NEGATIVE_X,ur.NEGATIVE_Y);break;case"py":l.lookAt(ur.POSITIVE_Y,ur.POSITIVE_Z);break;case"ny":l.lookAt(ur.NEGATIVE_Y,ur.NEGATIVE_Z);break;case"pz":l.lookAt(ur.POSITIVE_Z,ur.NEGATIVE_Y);break;case"nz":l.lookAt(ur.NEGATIVE_Z,ur.NEGATIVE_Y);break}return t.getWorldPosition(l.position),l.update(),l},_getDirectionalLightCamera:function(){var t=new Cr,i=new Ie,l=new Ie;return function(f,c,p){this._lightCameras.directional||(this._lightCameras.directional=new Zo);var y=this._lightCameras.directional;i.copy(c.viewBoundingBoxLastFrame),i.intersection(p.frustum.boundingBox),y.position.copy(i.min).add(i.max).scale(.5).transformMat4(p.worldTransform),y.rotation.copy(f.rotation),y.scale.copy(f.scale),y.updateWorldTransform(),Cr.invert(t,y.worldTransform),Cr.multiply(t,t,p.worldTransform),l.copy(i).applyTransform(t);var x=l.min.array,w=l.max.array;return y.position.set((x[0]+w[0])/2,(x[1]+w[1])/2,w[2]).transformMat4(y.worldTransform),y.near=0,y.far=-x[2]+w[2],isNaN(this.lightFrustumBias)?y.far*=4:y.far+=this.lightFrustumBias,y.left=x[0],y.right=w[0],y.top=w[1],y.bottom=x[1],y.update(!0),y}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new Un);var i=this._lightCameras.spot;return i.fov=t.penumbraAngle*2,i.far=t.range,i.worldTransform.copy(t.worldTransform),i.updateProjectionMatrix(),fe.invert(i.viewMatrix.array,i.worldTransform.array),i},dispose:function(t){var i=t.gl||t;this._frameBuffer&&this._frameBuffer.dispose(i);for(var l in this._textures)this._textures[l].dispose(i);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var f=0;f<this._receivers.length;f++){var c=this._receivers[f];if(c.material){var p=c.material;p.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),p.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),p.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),p.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});ya.VSM=1,ya.PCF=2;var Np=ya,Bp=X.extend(function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},{updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,c=l._parametersCopy;if(c||(c=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(c[p]=f[p]);var y,x;return f.width instanceof Function?y=f.width.call(this,i):y=f.width,f.height instanceof Function?x=f.height.call(this,i):x=f.height,(c.width!==y||c.height!==x)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i.gl),c.width=y,c.height=x,c},setParameter:function(t,i){},getParameter:function(t){},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},render:function(){},getOutput:function(t,i){if(i==null)return i=t,this._outputTextures[i];var l=this.outputs[i];if(!!l)return this._rendered?l.outputLastFrame?this._prevOutputTextures[i]:this._outputTextures[i]:this._rendering?(this._prevOutputTextures[i]||(this._prevOutputTextures[i]=this._compositor.allocateTexture(l.parameters||{})),this._prevOutputTextures[i]):(this.render(t),this._outputTextures[i])},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,i,l){this.inputLinks[t]={node:i,pin:l},i.outputLinks[l]||(i.outputLinks[l]=[]),i.outputLinks[l].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){this._rendering=!0;for(var i in this.inputLinks){var l=this.inputLinks[i];l.node.updateReference(l.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){this._rendered=!1;for(var t in this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),Bl=Bp,Fp=X.extend(function(){return{nodes:[]}},{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){typeof t=="string"&&(t=this.getNodeByName(t));var i=this.nodes.indexOf(t);i>=0&&(this.nodes.splice(i,1),this._dirty=!0)},getNodeByName:function(t){for(var i=0;i<this.nodes.length;i++)if(this.nodes[i].name===t)return this.nodes[i]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(var t=0;t<this.nodes.length;t++){var i=this.nodes[t];if(!!i.inputs){for(var l in i.inputs)if(!!i.inputs[l]){if(i.pass&&!i.pass.material.isUniformEnabled(l)){console.warn("Pin "+i.name+"."+l+" not used.");continue}var f=i.inputs[l],c=this.findPin(f);c?i.link(l,c.node,c.pin):console.warn(typeof f=="string"?"Node "+f+" not exist":"Pin of "+f.node+"."+f.pin+" not exist")}}}},findPin:function(t){var i;if((typeof t=="string"||t instanceof Bl)&&(t={node:t}),typeof t.node=="string")for(var l=0;l<this.nodes.length;l++){var f=this.nodes[l];f.name===t.node&&(i=f)}else i=t.node;if(i){var c=t.pin;if(c||i.outputs&&(c=Object.keys(i.outputs)[0]),i.outputs[c])return{node:i,pin:c}}}}),Fc=Fp,zp=Fc.extend(function(){return{_outputs:[],_texturePool:new Gf,_frameBuffer:new Pn({depthBuffer:!1})}},{addNode:function(t){Fc.prototype.addNode.call(this,t),t._compositor=this},render:function(t,i){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var l=0;l<this.nodes.length;l++)this.nodes[l].outputs||this._outputs.push(this.nodes[l])}for(var l=0;l<this.nodes.length;l++)this.nodes[l].beforeFrame();for(var l=0;l<this._outputs.length;l++)this._outputs[l].updateReference();for(var l=0;l<this._outputs.length;l++)this._outputs[l].render(t,i);for(var l=0;l<this.nodes.length;l++)this.nodes[l].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),Gp=zp,zc=Bl.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},function(){this.frameBuffer=new Pn},{render:function(t){this._rendering=!0;var i=t.gl;this.trigger("beforerender");var l;if(!this.outputs)l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);else{var f=this.frameBuffer;for(var c in this.outputs){var p=this.updateParameter(c,t),y=this.outputs[c],x=this._compositor.allocateTexture(p);this._outputTextures[c]=x;var w=y.attachment||i.COLOR_ATTACHMENT0;typeof w=="string"&&(w=i[w]),f.attach(x,w)}f.bind(t);var E=t.getGLExtension("EXT_draw_buffers");if(E){var B=[];for(var w in this.outputs)w=parseInt(w),w>=i.COLOR_ATTACHMENT0&&w<=i.COLOR_ATTACHMENT0+8&&B.push(w);E.drawBuffersEXT(B)}t.saveClear(),t.clearBit=D.DEPTH_BUFFER_BIT|D.COLOR_BUFFER_BIT,l=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),f.unbind(t)}this.trigger("afterrender",l),this._rendering=!1,this._rendered=!0}}),Up=zc,Gc=Bl.extend(function(){return{texture:null,outputs:{color:{}}}},function(){},{getOutput:function(t,i){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),Fl=Gc,kp=Bl.extend(function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}},function(){var t=new Yn({fragment:this.shader});this.pass=t},{render:function(t,i){this.trigger("beforerender",t),this._rendering=!0;var l=t.gl;for(var f in this.inputLinks){var c=this.inputLinks[f],p=c.node.getOutput(t,c.pin);this.pass.setUniform(f,p)}if(!this.outputs)this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,i);else{this.pass.outputs={};var y={};for(var x in this.outputs){var w=this.updateParameter(x,t);isNaN(w.width)&&this.updateParameter(x,t);var E=this.outputs[x],B=this._compositor.allocateTexture(w);this._outputTextures[x]=B;var q=E.attachment||l.COLOR_ATTACHMENT0;typeof q=="string"&&(q=l[q]),y[q]=B}this._compositor.getFrameBuffer().bind(t);for(var q in y)this._compositor.getFrameBuffer().attach(y[q],q);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}for(var f in this.inputLinks){var c=this.inputLinks[f];c.node.removeReference(c.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,i){var l=this.outputs[t],f=l.parameters,c=l._parametersCopy;if(c||(c=l._parametersCopy={}),f)for(var p in f)p!=="width"&&p!=="height"&&(c[p]=f[p]);var y,x;return typeof f.width=="function"?y=f.width.call(this,i):y=f.width,typeof f.height=="function"?x=f.height.call(this,i):x=f.height,y=Math.ceil(y),x=Math.ceil(x),(c.width!==y||c.height!==x)&&this._outputTextures[t]&&this._outputTextures[t].dispose(i),c.width=y,c.height=x,c},setParameter:function(t,i){this.pass.setUniform(t,i)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var i in t)this.setParameter(i,t[i])},define:function(t,i){this.pass.material.define("fragment",t,i)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,this._outputReferences[t]===0){var i=this.outputs[t];i.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){Bl.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),Uc=kp,kc=`@export clay.compositor.coloradjust
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float exposure : 0.0;
uniform float gamma : 1.0;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);
 color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 color = clamp( color * pow(2.0, exposure), 0.0, 1.0);
 color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);
 float luminance = dot( color, w );
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.brightness
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float brightness : 0.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = tex.rgb + vec3(brightness);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.contrast
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float contrast : 1.0;
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord);
 vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.exposure
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float exposure : 0.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb * pow(2.0, exposure);
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.gamma
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float gamma : 1.0;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = pow(tex.rgb, vec3(gamma));
 gl_FragColor = vec4(color, tex.a);
}
@end
@export clay.compositor.saturation
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float saturation : 1.0;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 vec3 color = tex.rgb;
 float luminance = dot(color, w);
 color = mix(vec3(luminance), color, saturation);
 gl_FragColor = vec4(color, tex.a);
}
@end`,kf=`@export clay.compositor.kernel.gaussian_9
float gaussianKernel[9];
gaussianKernel[0] = 0.07;
gaussianKernel[1] = 0.09;
gaussianKernel[2] = 0.12;
gaussianKernel[3] = 0.14;
gaussianKernel[4] = 0.16;
gaussianKernel[5] = 0.14;
gaussianKernel[6] = 0.12;
gaussianKernel[7] = 0.09;
gaussianKernel[8] = 0.07;
@end
@export clay.compositor.kernel.gaussian_13
float gaussianKernel[13];
gaussianKernel[0] = 0.02;
gaussianKernel[1] = 0.03;
gaussianKernel[2] = 0.06;
gaussianKernel[3] = 0.08;
gaussianKernel[4] = 0.11;
gaussianKernel[5] = 0.13;
gaussianKernel[6] = 0.14;
gaussianKernel[7] = 0.13;
gaussianKernel[8] = 0.11;
gaussianKernel[9] = 0.08;
gaussianKernel[10] = 0.06;
gaussianKernel[11] = 0.03;
gaussianKernel[12] = 0.02;
@end
@export clay.compositor.gaussian_blur
#define SHADER_NAME gaussian_blur
uniform sampler2D texture;varying vec2 v_Texcoord;
uniform float blurSize : 2.0;
uniform vec2 textureSize : [512.0, 512.0];
uniform float blurDir : 0.0;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main (void)
{
 @import clay.compositor.kernel.gaussian_9
 vec2 off = blurSize / textureSize;
 off *= vec2(1.0 - blurDir, blurDir);
 vec4 sum = vec4(0.0);
 float weightAll = 0.0;
 for (int i = 0; i < 9; i++) {
 float w = gaussianKernel[i];
 vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));
 sum += texel * w;
 weightAll += w;
 }
 gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));
}
@end
`,Vc=`@export clay.compositor.hdr.log_lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 float luminance = dot(tex.rgb, w);
 luminance = log(luminance + 0.001);
 gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));
}
@end
@export clay.compositor.hdr.lum_adaption
varying vec2 v_Texcoord;
uniform sampler2D adaptedLum;
uniform sampler2D currentLum;
uniform float frameTime : 0.02;
@import clay.util.rgbm
void main()
{
 float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;
 float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);
 fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));
 gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));
}
@end
@export clay.compositor.lum
varying vec2 v_Texcoord;
uniform sampler2D texture;
const vec3 w = vec3(0.2125, 0.7154, 0.0721);
void main()
{
 vec4 tex = texture2D( texture, v_Texcoord );
 float luminance = dot(tex.rgb, w);
 gl_FragColor = vec4(vec3(luminance), 1.0);
}
@end`,Vf=`
@export clay.compositor.lut
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform sampler2D lookup;
void main()
{
 vec4 tex = texture2D(texture, v_Texcoord);
 float blueColor = tex.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);
 vec4 newColor1 = texture2D(lookup, texPos1);
 vec4 newColor2 = texture2D(lookup, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 gl_FragColor = vec4(newColor.rgb, tex.w);
}
@end`,Vp=`@export clay.compositor.vignette
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
uniform float darkness: 1;
uniform float offset: 1;
@import clay.util.rgbm
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = texel.rgb;
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);
 gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));
}
@end`,Zc=`@export clay.compositor.output
#define OUTPUT_ALPHA
varying vec2 v_Texcoord;
uniform sampler2D texture;
@import clay.util.rgbm
void main()
{
 vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));
 gl_FragColor.rgb = tex.rgb;
#ifdef OUTPUT_ALPHA
 gl_FragColor.a = tex.a;
#else
 gl_FragColor.a = 1.0;
#endif
 gl_FragColor = encodeHDR(gl_FragColor);
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Wc=`@export clay.compositor.bright
uniform sampler2D texture;
uniform float threshold : 1;
uniform float scale : 1.0;
uniform vec2 textureSize: [512, 512];
varying vec2 v_Texcoord;
const vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);
@import clay.util.rgbm
vec4 median(vec4 a, vec4 b, vec4 c)
{
 return a + b + c - min(min(a, b), c) - max(max(a, b), c);
}
void main()
{
 vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));
#ifdef ANTI_FLICKER
 vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);
 vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));
 vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));
 vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));
 vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));
 texel = median(median(texel, s1, s2), s3, s4);
#endif
 float lum = dot(texel.rgb , lumWeight);
 vec4 color;
 if (lum > threshold && texel.a > 0.0)
 {
 color = vec4(texel.rgb * scale, texel.a * scale);
 }
 else
 {
 color = vec4(0.0);
 }
 gl_FragColor = encodeHDR(color);
}
@end
`,Zf=`@export clay.compositor.downsample
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
varying vec2 v_Texcoord;
@import clay.util.rgbm
float brightness(vec3 c)
{
 return max(max(c.r, c.g), c.b);
}
@import clay.util.clamp_sample
void main()
{
 vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;
#ifdef ANTI_FLICKER
 vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;
 vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;
 vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;
 vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;
 float s1w = 1.0 / (brightness(s1) + 1.0);
 float s2w = 1.0 / (brightness(s2) + 1.0);
 float s3w = 1.0 / (brightness(s3) + 1.0);
 float s4w = 1.0 / (brightness(s4) + 1.0);
 float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);
 vec4 color = vec4(
 (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,
 1.0
 );
#else
 vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 color *= 0.25;
#endif
 gl_FragColor = encodeHDR(color);
}
@end`,Hc=`
@export clay.compositor.upsample
#define HIGH_QUALITY
uniform sampler2D texture;
uniform vec2 textureSize : [512, 512];
uniform float sampleScale: 0.5;
varying vec2 v_Texcoord;
@import clay.util.rgbm
@import clay.util.clamp_sample
void main()
{
#ifdef HIGH_QUALITY
 vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 gl_FragColor = encodeHDR(s / 16.0);
#else
 vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;
 vec4 s;
 s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));
 s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));
 gl_FragColor = encodeHDR(s / 4.0);
#endif
}
@end`,Xc=`@export clay.compositor.hdr.composite
#define TONEMAPPING
uniform sampler2D texture;
#ifdef BLOOM_ENABLED
uniform sampler2D bloom;
#endif
#ifdef LENSFLARE_ENABLED
uniform sampler2D lensflare;
uniform sampler2D lensdirt;
#endif
#ifdef LUM_ENABLED
uniform sampler2D lum;
#endif
#ifdef LUT_ENABLED
uniform sampler2D lut;
#endif
#ifdef COLOR_CORRECTION
uniform float brightness : 0.0;
uniform float contrast : 1.0;
uniform float saturation : 1.0;
#endif
#ifdef VIGNETTE
uniform float vignetteDarkness: 1.0;
uniform float vignetteOffset: 1.0;
#endif
uniform float exposure : 1.0;
uniform float bloomIntensity : 0.25;
uniform float lensflareIntensity : 1;
varying vec2 v_Texcoord;
@import clay.util.srgb
vec3 ACESToneMapping(vec3 color)
{
 const float A = 2.51;
 const float B = 0.03;
 const float C = 2.43;
 const float D = 0.59;
 const float E = 0.14;
 return (color * (A * color + B)) / (color * (C * color + D) + E);
}
float eyeAdaption(float fLum)
{
 return mix(0.2, fLum, 0.5);
}
#ifdef LUT_ENABLED
vec3 lutTransform(vec3 color) {
 float blueColor = color.b * 63.0;
 vec2 quad1;
 quad1.y = floor(floor(blueColor) / 8.0);
 quad1.x = floor(blueColor) - (quad1.y * 8.0);
 vec2 quad2;
 quad2.y = floor(ceil(blueColor) / 8.0);
 quad2.x = ceil(blueColor) - (quad2.y * 8.0);
 vec2 texPos1;
 texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec2 texPos2;
 texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);
 texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);
 vec4 newColor1 = texture2D(lut, texPos1);
 vec4 newColor2 = texture2D(lut, texPos2);
 vec4 newColor = mix(newColor1, newColor2, fract(blueColor));
 return newColor.rgb;
}
#endif
@import clay.util.rgbm
void main()
{
 vec4 texel = vec4(0.0);
 vec4 originalTexel = vec4(0.0);
#ifdef TEXTURE_ENABLED
 texel = decodeHDR(texture2D(texture, v_Texcoord));
 originalTexel = texel;
#endif
#ifdef BLOOM_ENABLED
 vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));
 texel.rgb += bloomTexel.rgb * bloomIntensity;
 texel.a += bloomTexel.a * bloomIntensity;
#endif
#ifdef LENSFLARE_ENABLED
 texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;
#endif
 texel.a = min(texel.a, 1.0);
#ifdef LUM_ENABLED
 float fLum = texture2D(lum, vec2(0.5, 0.5)).r;
 float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));
 float exposureBias = adaptedLumDest * exposure;
#else
 float exposureBias = exposure;
#endif
#ifdef TONEMAPPING
 texel.rgb *= exposureBias;
 texel.rgb = ACESToneMapping(texel.rgb);
#endif
 texel = linearTosRGB(texel);
#ifdef LUT_ENABLED
 texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));
#endif
#ifdef COLOR_CORRECTION
 texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);
 texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);
 float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));
 texel.rgb = mix(vec3(lum), texel.rgb, saturation);
#endif
#ifdef VIGNETTE
 vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);
 texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));
#endif
 gl_FragColor = encodeHDR(texel);
#ifdef DEBUG
 #if DEBUG == 1
 gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));
 #elif DEBUG == 2
 gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);
 #elif DEBUG == 3
 gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));
 #endif
#endif
 if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {
 gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));
 }
#ifdef PREMULTIPLY_ALPHA
 gl_FragColor.rgb *= gl_FragColor.a;
#endif
}
@end`,Yc=`@export clay.compositor.lensflare
#define SAMPLE_NUMBER 8
uniform sampler2D texture;
uniform sampler2D lenscolor;
uniform vec2 textureSize : [512, 512];
uniform float dispersal : 0.3;
uniform float haloWidth : 0.4;
uniform float distortion : 1.0;
varying vec2 v_Texcoord;
@import clay.util.rgbm
vec4 textureDistorted(
 in vec2 texcoord,
 in vec2 direction,
 in vec3 distortion
) {
 return vec4(
 decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,
 decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,
 1.0
 );
}
void main()
{
 vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;
 vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;
 vec2 haloVec = normalize(ghostVec) * haloWidth;
 vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);
 vec4 result = vec4(0.0);
 for (int i = 0; i < SAMPLE_NUMBER; i++)
 {
 vec2 offset = fract(texcoord + ghostVec * float(i));
 float weight = length(vec2(0.5) - offset) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 }
 result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));
 float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));
 weight = pow(1.0 - weight, 10.0);
 vec2 offset = fract(texcoord + haloVec);
 result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;
 gl_FragColor = result;
}
@end`,Pu=`@export clay.compositor.blend
#define SHADER_NAME blend
#ifdef TEXTURE1_ENABLED
uniform sampler2D texture1;
uniform float weight1 : 1.0;
#endif
#ifdef TEXTURE2_ENABLED
uniform sampler2D texture2;
uniform float weight2 : 1.0;
#endif
#ifdef TEXTURE3_ENABLED
uniform sampler2D texture3;
uniform float weight3 : 1.0;
#endif
#ifdef TEXTURE4_ENABLED
uniform sampler2D texture4;
uniform float weight4 : 1.0;
#endif
#ifdef TEXTURE5_ENABLED
uniform sampler2D texture5;
uniform float weight5 : 1.0;
#endif
#ifdef TEXTURE6_ENABLED
uniform sampler2D texture6;
uniform float weight6 : 1.0;
#endif
varying vec2 v_Texcoord;
@import clay.util.rgbm
void main()
{
 vec4 tex = vec4(0.0);
#ifdef TEXTURE1_ENABLED
 tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;
#endif
#ifdef TEXTURE2_ENABLED
 tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;
#endif
#ifdef TEXTURE3_ENABLED
 tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;
#endif
#ifdef TEXTURE4_ENABLED
 tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;
#endif
#ifdef TEXTURE5_ENABLED
 tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;
#endif
#ifdef TEXTURE6_ENABLED
 tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;
#endif
 gl_FragColor = encodeHDR(tex);
}
@end`,Wf=`@export clay.compositor.fxaa
uniform sampler2D texture;
uniform vec4 viewport : VIEWPORT;
varying vec2 v_Texcoord;
#define FXAA_REDUCE_MIN (1.0/128.0)
#define FXAA_REDUCE_MUL (1.0/8.0)
#define FXAA_SPAN_MAX 8.0
@import clay.util.rgbm
void main()
{
 vec2 resolution = 1.0 / viewport.zw;
 vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;
 vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;
 vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );
 vec3 rgbM = rgbaM.xyz;
 float opacity = rgbaM.w;
 vec3 luma = vec3( 0.299, 0.587, 0.114 );
 float lumaNW = dot( rgbNW, luma );
 float lumaNE = dot( rgbNE, luma );
 float lumaSW = dot( rgbSW, luma );
 float lumaSE = dot( rgbSE, luma );
 float lumaM = dot( rgbM, luma );
 float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
 float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );
 vec2 dir;
 dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
 dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));
 float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );
 float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
 dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),
 max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
 dir * rcpDirMin)) * resolution;
 vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;
 rgbA *= 0.5;
 vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;
 rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;
 rgbB *= 0.25;
 rgbB += rgbA * 0.5;
 float lumaB = dot( rgbB, luma );
 if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )
 {
 gl_FragColor = vec4( rgbA, opacity );
 }
 else {
 gl_FragColor = vec4( rgbB, opacity );
 }
}
@end`;function Zp(t){t.import(kc),t.import(kf),t.import(Vc),t.import(Vf),t.import(Vp),t.import(Zc),t.import(Wc),t.import(Zf),t.import(Hc),t.import(Xc),t.import(Yc),t.import(Pu),t.import(Wf)}Zp(_r);var Wp=/^#source\((.*?)\)/;function Hp(t,i){var l=new Gp;i=i||{};var f={textures:{},parameters:{}},c=function(x,w){for(var E=0;E<t.nodes.length;E++){var B=t.nodes[E],q=Kc(B,f,i);q&&l.addNode(q)}};for(var p in t.parameters){var y=t.parameters[p];f.parameters[p]=Hf(y)}return Yp(t,f,i,function(x){f.textures=x,c()}),l}function Kc(t,i,l){var f=t.type||"filter",c,p,y;if(f==="filter"){var x=t.shader.trim(),w=Wp.exec(x);if(w?c=_r.source(w[1].trim()):x.charAt(0)==="#"&&(c=i.shaders[x.substr(1)]),c||(c=x),!c)return}if(t.inputs){p={};for(var E in t.inputs)typeof t.inputs[E]=="string"?p[E]=t.inputs[E]:p[E]={node:t.inputs[E].node,pin:t.inputs[E].pin}}if(t.outputs){y={};for(var E in t.outputs){var B=t.outputs[E];y[E]={},B.attachment!=null&&(y[E].attachment=B.attachment),B.keepLastFrame!=null&&(y[E].keepLastFrame=B.keepLastFrame),B.outputLastFrame!=null&&(y[E].outputLastFrame=B.outputLastFrame),B.parameters&&(y[E].parameters=Hf(B.parameters))}}var q;if(f==="scene"?q=new Up({name:t.name,scene:l.scene,camera:l.camera,outputs:y}):f==="texture"?q=new Fl({name:t.name,outputs:y}):q=new Uc({name:t.name,shader:c,inputs:p,outputs:y}),q){if(t.parameters)for(var E in t.parameters){var yt=t.parameters[E];typeof yt=="string"?(yt=yt.trim(),yt.charAt(0)==="#"?yt=i.textures[yt.substr(1)]:q.on("beforerender",Kp(E,Ks(yt)))):typeof yt=="function"&&q.on("beforerender",yt),q.setParameter(E,yt)}if(t.defines&&q.pass)for(var E in t.defines){var yt=t.defines[E];q.pass.material.define("fragment",E,yt)}}return q}function Xp(t,i){return t}function jc(t,i){return i}function Hf(t){var i={};if(!t)return i;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach(function(f){var c=t[f];c!=null&&(typeof c=="string"&&(c=pr[c]),i[f]=c)});var l=t.scale||1;return["width","height"].forEach(function(f){if(t[f]!=null){var c=t[f];typeof c=="string"?(c=c.trim(),i[f]=Jc(f,Ks(c),l)):i[f]=c}}),i.width||(i.width=Xp),i.height||(i.height=jc),t.useMipmap!=null&&(i.useMipmap=t.useMipmap),i}function Yp(t,i,l,f){if(!t.textures){f({});return}var c={},p=0,y=!1,x=l.textureRootPath;$.each(t.textures,function(w,E){var B,q=w.path,yt=Hf(w.parameters);if(Array.isArray(q)&&q.length===6)x&&(q=q.map(function(_t){return $.relative2absolute(_t,x)})),B=new lo(yt);else if(typeof q=="string")x&&(q=$.relative2absolute(q,x)),B=new Yr(yt);else return;B.load(q),p++,B.once("success",function(){c[E]=B,p--,p===0&&(f(c),y=!0)})}),p===0&&!y&&f(c)}function Kp(t,i){return function(l){var f=l.getDevicePixelRatio(),c=l.getWidth(),p=l.getHeight(),y=i(c,p,f);this.setParameter(t,y)}}function Jc(t,i,l){return l=l||1,function(f){var c=f.getDevicePixelRatio(),p=f.getWidth()*l,y=f.getHeight()*l;return i(p,y,c)}}function Ks(t){var i=/^expr\((.*)\)$/.exec(t);if(i)try{var l=new Function("width","height","dpr","return "+i[1]);return l(1,1),l}catch{throw new Error("Invalid expression.")}}var jp=Hp,Jp=jp;function Qp(t,i){for(var l=0,f=1/i,c=t;c>0;)l=l+f*(c%i),c=Math.floor(c/i),f=f/i;return l}var mo=Qp,Xf=`@export ecgl.ssao.estimate

uniform sampler2D depthTex;

uniform sampler2D normalTex;

uniform sampler2D noiseTex;

uniform vec2 depthTexSize;

uniform vec2 noiseTexSize;

uniform mat4 projection;

uniform mat4 projectionInv;

uniform mat4 viewInverseTranspose;

uniform vec3 kernel[KERNEL_SIZE];

uniform float radius : 1;

uniform float power : 1;

uniform float bias: 1e-2;

uniform float intensity: 1.0;

varying vec2 v_Texcoord;

float ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {
 float occlusion = 0.0;

 for (int i = 0; i < KERNEL_SIZE; i++) {
 vec3 samplePos = kernel[i];
#ifdef NORMALTEX_ENABLED
 samplePos = kernelBasis * samplePos;
#endif
 samplePos = samplePos * radius + originPos;

 vec4 texCoord = projection * vec4(samplePos, 1.0);
 texCoord.xy /= texCoord.w;

 vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);

 float sampleDepth = depthTexel.r * 2.0 - 1.0;
 if (projection[3][3] == 0.0) {
 sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);
 }
 else {
 sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];
 }
 
 float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));
 occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);
 }
#ifdef NORMALTEX_ENABLED
 occlusion = 1.0 - occlusion / float(KERNEL_SIZE);
#else
 occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);
#endif
 return pow(occlusion, power);
}

void main()
{

 vec4 depthTexel = texture2D(depthTex, v_Texcoord);

#ifdef NORMALTEX_ENABLED
 vec4 tex = texture2D(normalTex, v_Texcoord);
 if (dot(tex.rgb, tex.rgb) == 0.0) {
 gl_FragColor = vec4(1.0);
 return;
 }
 vec3 N = tex.rgb * 2.0 - 1.0;
 N = (viewInverseTranspose * vec4(N, 0.0)).xyz;

 vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;
 vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;
 vec3 T = normalize(rvec - N * dot(rvec, N));
 vec3 BT = normalize(cross(N, T));
 mat3 kernelBasis = mat3(T, BT, N);
#else
 if (depthTexel.r > 0.99999) {
 gl_FragColor = vec4(1.0);
 return;
 }
 mat3 kernelBasis;
#endif

 float z = depthTexel.r * 2.0 - 1.0;

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * projectedPos;

 vec3 position = p4.xyz / p4.w;

 float ao = ssaoEstimator(position, kernelBasis);
 ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);
 gl_FragColor = vec4(vec3(ao), 1.0);
}

@end


@export ecgl.ssao.blur
#define SHADER_NAME SSAO_BLUR

uniform sampler2D ssaoTexture;

#ifdef NORMALTEX_ENABLED
uniform sampler2D normalTex;
#endif

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

uniform int direction: 0.0;

#ifdef DEPTHTEX_ENABLED
uniform sampler2D depthTex;
uniform mat4 projection;
uniform float depthRange : 0.5;

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}
#endif

void main()
{
 float kernel[5];
 kernel[0] = 0.122581;
 kernel[1] = 0.233062;
 kernel[2] = 0.288713;
 kernel[3] = 0.233062;
 kernel[4] = 0.122581;

 vec2 off = vec2(0.0);
 if (direction == 0) {
 off[0] = blurSize / textureSize.x;
 }
 else {
 off[1] = blurSize / textureSize.y;
 }

 vec2 coord = v_Texcoord;

 float sum = 0.0;
 float weightAll = 0.0;

#ifdef NORMALTEX_ENABLED
 vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;
#endif
#if defined(DEPTHTEX_ENABLED)
 float centerDepth = getLinearDepth(v_Texcoord);
#endif

 for (int i = 0; i < 5; i++) {
 vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));

 float w = kernel[i];
#ifdef NORMALTEX_ENABLED
 vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;
 w *= clamp(dot(normal, centerNormal), 0.0, 1.0);
#endif
#ifdef DEPTHTEX_ENABLED
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));
#endif

 weightAll += w;
 sum += texture2D(ssaoTexture, coord).r * w;
 }

 gl_FragColor = vec4(vec3(sum / weightAll), 1.0);
}

@end
`;_r.import(Xf);function Qc(t){for(var i=new Uint8Array(t*t*4),l=0,f=new ur,c=0;c<t;c++)for(var p=0;p<t;p++)f.set(Math.random()*2-1,Math.random()*2-1,0).normalize(),i[l++]=(f.x*.5+.5)*255,i[l++]=(f.y*.5+.5)*255,i[l++]=0,i[l++]=255;return i}function $c(t){return new Yr({pixels:Qc(t),wrapS:pr.REPEAT,wrapT:pr.REPEAT,width:t,height:t})}function $p(t,i,l){var f=new Float32Array(t*3);i=i||0;for(var c=0;c<t;c++){var p=mo(c+i,2)*(l?1:2)*Math.PI,y=mo(c+i,3)*Math.PI,x=Math.random(),w=Math.cos(p)*Math.sin(y)*x,E=Math.cos(y)*x,B=Math.sin(p)*Math.sin(y)*x;f[c*3]=w,f[c*3+1]=E,f[c*3+2]=B}return f}function sa(t){t=t||{},this._ssaoPass=new Yn({fragment:_r.source("ecgl.ssao.estimate")}),this._blurPass=new Yn({fragment:_r.source("ecgl.ssao.blur")}),this._framebuffer=new Pn({depthBuffer:!1}),this._ssaoTexture=new Yr,this._blurTexture=new Yr,this._blurTexture2=new Yr,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),t.radius!=null&&this.setParameter("radius",t.radius),t.power!=null&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}sa.prototype.setDepthTexture=function(t){this._depthTex=t},sa.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},sa.prototype.update=function(t,i,l){var f=t.getWidth(),c=t.getHeight(),p=this._ssaoPass,y=this._blurPass;p.setUniform("kernel",this._kernels[l%this._kernels.length]),p.setUniform("depthTex",this._depthTex),this._normalTex!=null&&p.setUniform("normalTex",this._normalTex),p.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var x=new Cr;Cr.transpose(x,i.worldTransform),p.setUniform("projection",i.projectionMatrix.array),p.setUniform("projectionInv",i.invProjectionMatrix.array),p.setUniform("viewInverseTranspose",x.array);var w=this._ssaoTexture,E=this._blurTexture,B=this._blurTexture2;w.width=f/2,w.height=c/2,E.width=f,E.height=c,B.width=f,B.height=c,this._framebuffer.attach(w),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),p.render(t),y.setUniform("textureSize",[f/2,c/2]),y.setUniform("projection",i.projectionMatrix.array),this._framebuffer.attach(E),y.setUniform("direction",0),y.setUniform("ssaoTexture",w),y.render(t),this._framebuffer.attach(B),y.setUniform("textureSize",[f,c]),y.setUniform("direction",1),y.setUniform("ssaoTexture",E),y.render(t),this._framebuffer.unbind(t);var q=t.clearColor;t.gl.clearColor(q[0],q[1],q[2],q[3])},sa.prototype.getTargetTexture=function(){return this._blurTexture2},sa.prototype.setParameter=function(t,i){t==="noiseTexSize"?this.setNoiseSize(i):t==="kernelSize"?this.setKernelSize(i):t==="intensity"?this._ssaoPass.material.set("intensity",i):this._ssaoPass.setUniform(t,i)},sa.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var i=0;i<30;i++)this._kernels[i]=$p(t,i*t,!!this._normalTex)},sa.prototype.setNoiseSize=function(t){var i=this._ssaoPass.getUniform("noiseTex");i?(i.data=Qc(t),i.width=i.height=t,i.dirty()):(i=$c(t),this._ssaoPass.setUniform("noiseTex",$c(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])},sa.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};var qp=sa,tg=`@export ecgl.ssr.main

#define SHADER_NAME SSR
#define MAX_ITERATION 20;
#define SAMPLE_PER_FRAME 5;
#define TOTAL_SAMPLES 128;

uniform sampler2D sourceTexture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform sampler2D gBufferTexture3;
uniform samplerCube specularCubemap;
uniform float specularIntensity: 1;

uniform mat4 projection;
uniform mat4 projectionInv;
uniform mat4 toViewSpace;
uniform mat4 toWorldSpace;

uniform float maxRayDistance: 200;

uniform float pixelStride: 16;
uniform float pixelStrideZCutoff: 50; 
uniform float screenEdgeFadeStart: 0.9; 
uniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; 
uniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;

uniform float nearZ;
uniform vec2 viewportSize : VIEWPORT_SIZE;

uniform float jitterOffset: 0;

varying vec2 v_Texcoord;

#ifdef DEPTH_DECODE
@import clay.util.decode_float
#endif

#ifdef PHYSICALLY_CORRECT
uniform sampler2D normalDistribution;
uniform float sampleOffset: 0;
uniform vec2 normalDistributionSize;

vec3 transformNormal(vec3 H, vec3 N) {
 vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);
 vec3 tangentX = normalize(cross(N, upVector));
 vec3 tangentZ = cross(N, tangentX);
 return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);
}
vec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {
 float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));
 vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;
 return transformNormal(H, N);
}
float G_Smith(float g, float ndv, float ndl) {
 float roughness = 1.0 - g;
 float k = roughness * roughness / 2.0;
 float G1V = ndv / (ndv * (1.0 - k) + k);
 float G1L = ndl / (ndl * (1.0 - k) + k);
 return G1L * G1V;
}
vec3 F_Schlick(float ndv, vec3 spec) {
 return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);
}
#endif

float fetchDepth(sampler2D depthTexture, vec2 uv)
{
 vec4 depthTexel = texture2D(depthTexture, uv);
 return depthTexel.r * 2.0 - 1.0;
}

float linearDepth(float depth)
{
 if (projection[3][3] == 0.0) {
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
 }
 else {
 return (depth - projection[3][2]) / projection[2][2];
 }
}

bool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)
{
 if (rayZFar > rayZNear)
 {
 float t = rayZFar; rayZFar = rayZNear; rayZNear = t;
 }
 float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));
 return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;
}


bool traceScreenSpaceRay(
 vec3 rayOrigin, vec3 rayDir, float jitter,
 out vec2 hitPixel, out vec3 hitPoint, out float iterationCount
)
{
 float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)
 ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;

 vec3 rayEnd = rayOrigin + rayDir * rayLength;

 vec4 H0 = projection * vec4(rayOrigin, 1.0);
 vec4 H1 = projection * vec4(rayEnd, 1.0);

 float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;

 vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;

 vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;
 vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;

 P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;
 vec2 delta = P1 - P0;

 bool permute = false;
 if (abs(delta.x) < abs(delta.y)) {
 permute = true;
 delta = delta.yx;
 P0 = P0.yx;
 P1 = P1.yx;
 }
 float stepDir = sign(delta.x);
 float invdx = stepDir / delta.x;

 vec3 dQ = (Q1 - Q0) * invdx;
 float dk = (k1 - k0) * invdx;

 vec2 dP = vec2(stepDir, delta.y * invdx);

 float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);
 float pixStride = 1.0 + strideScaler * pixelStride;

 dP *= pixStride; dQ *= pixStride; dk *= pixStride;

 vec4 pqk = vec4(P0, Q0.z, k0);
 vec4 dPQK = vec4(dP, dQ.z, dk);

 pqk += dPQK * jitter;
 float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);
 float rayZNear;

 bool intersect = false;

 vec2 texelSize = 1.0 / viewportSize;

 iterationCount = 0.0;

 for (int i = 0; i < MAX_ITERATION; i++)
 {
 pqk += dPQK;

 rayZNear = rayZFar;
 rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);

 hitPixel = permute ? pqk.yx : pqk.xy;
 hitPixel *= texelSize;

 intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);

 iterationCount += 1.0;

 dPQK *= 1.2;

 if (intersect) {
 break;
 }
 }

 Q0.xy += dQ.xy * iterationCount;
 Q0.z = pqk.z;
 hitPoint = Q0 / pqk.w;

 return intersect;
}

float calculateAlpha(
 float iterationCount, float reflectivity,
 vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir
)
{
 float alpha = clamp(reflectivity, 0.0, 1.0);
 alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));
 vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;
 float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));
 alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);

 float _eyeFadeStart = eyeFadeStart;
 float _eyeFadeEnd = eyeFadeEnd;
 if (_eyeFadeStart > _eyeFadeEnd) {
 float tmp = _eyeFadeEnd;
 _eyeFadeEnd = _eyeFadeStart;
 _eyeFadeStart = tmp;
 }

 float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);
 alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);

 alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);

 return alpha;
}

@import clay.util.rand

@import clay.util.rgbm

void main()
{
 vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);

 if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {
 discard;
 }

 float g = normalAndGloss.a;
#if !defined(PHYSICALLY_CORRECT)
 if (g <= minGlossiness) {
 discard;
 }
#endif

 float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);

 vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);
 N = normalize((toViewSpace * vec4(N, 0.0)).xyz);

 vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);
 vec4 pos = projectionInv * projectedPos;
 vec3 rayOrigin = pos.xyz / pos.w;
 vec3 V = -normalize(rayOrigin);

 float ndv = clamp(dot(N, V), 0.0, 1.0);
 float iterationCount;
 float jitter = rand(fract(v_Texcoord + jitterOffset));

#ifdef PHYSICALLY_CORRECT
 vec4 color = vec4(vec3(0.0), 1.0);
 vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);
 vec3 albedo = albedoMetalness.rgb;
 float m = albedoMetalness.a;
 vec3 diffuseColor = albedo * (1.0 - m);
 vec3 spec = mix(vec3(0.04), albedo, m);

 float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);

 for (int i = 0; i < SAMPLE_PER_FRAME; i++) {
 vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);
 vec3 rayDir = normalize(reflect(-V, H));
#else
 vec3 rayDir = normalize(reflect(-V, N));
#endif
 vec2 hitPixel;
 vec3 hitPoint;

 bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);

 float dist = distance(rayOrigin, hitPoint);

 vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;
 hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);
#ifdef PHYSICALLY_CORRECT
 float ndl = clamp(dot(N, rayDir), 0.0, 1.0);
 float vdh = clamp(dot(V, H), 0.0, 1.0);
 float ndh = clamp(dot(N, H), 0.0, 1.0);
 vec3 litTexel = vec3(0.0);
 if (dot(hitNormal, rayDir) < 0.0 && intersect) {
 litTexel = texture2D(sourceTexture, hitPixel).rgb;
 litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);

 }
 else {
 #ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;
#endif
 }
 color.rgb += ndl * litTexel * (
 F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)
 );
 }
 color.rgb /= float(SAMPLE_PER_FRAME);
#else
 #if !defined(SPECULARCUBEMAP_ENABLED)
 if (dot(hitNormal, rayDir) >= 0.0) {
 discard;
 }
 if (!intersect) {
 discard;
 }
#endif
 float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);
 vec4 color = texture2D(sourceTexture, hitPixel);
 color.rgb *= alpha;

#ifdef SPECULARCUBEMAP_ENABLED
 vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;
 alpha = alpha * (intersect ? 1.0 : 0.0);
 float bias = (1.0 -g) * 5.0;
 color.rgb += (1.0 - alpha)
 * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb
 * specularIntensity;
#endif

#endif

 gl_FragColor = encodeHDR(color);
}
@end

@export ecgl.ssr.blur

uniform sampler2D texture;
uniform sampler2D gBufferTexture1;
uniform sampler2D gBufferTexture2;
uniform mat4 projection;
uniform float depthRange : 0.05;

varying vec2 v_Texcoord;

uniform vec2 textureSize;
uniform float blurSize : 1.0;

#ifdef BLEND
 #ifdef SSAOTEX_ENABLED
uniform sampler2D ssaoTex;
 #endif
uniform sampler2D sourceTexture;
#endif

float getLinearDepth(vec2 coord)
{
 float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;
 return projection[3][2] / (depth * projection[2][3] - projection[2][2]);
}

@import clay.util.rgbm


void main()
{
 @import clay.compositor.kernel.gaussian_9

 vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);
 float g = centerNTexel.a;
 float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;
#ifdef VERTICAL
 vec2 off = vec2(0.0, maxBlurSize / textureSize.y);
#else
 vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);
#endif

 vec2 coord = v_Texcoord;

 vec4 sum = vec4(0.0);
 float weightAll = 0.0;

 vec3 cN = centerNTexel.rgb * 2.0 - 1.0;
 float cD = getLinearDepth(v_Texcoord);
 for (int i = 0; i < 9; i++) {
 vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));
 float w = gaussianKernel[i]
 * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);
 float d = getLinearDepth(coord);
 w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));

 weightAll += w;
 sum += decodeHDR(texture2D(texture, coord)) * w;
 }

#ifdef BLEND
 float aoFactor = 1.0;
 #ifdef SSAOTEX_ENABLED
 aoFactor = texture2D(ssaoTex, v_Texcoord).r;
 #endif
 gl_FragColor = encodeHDR(
 sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))
 );
#else
 gl_FragColor = encodeHDR(sum / weightAll);
#endif
}

@end`;_r.import(tg);function Ya(t){t=t||{},this._ssrPass=new Yn({fragment:_r.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new Yn({fragment:_r.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new Yn({fragment:_r.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new Yn({fragment:_r.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new Yr({type:pr.HALF_FLOAT}),this._texture2=new Yr({type:pr.HALF_FLOAT}),this._texture3=new Yr({type:pr.HALF_FLOAT}),this._prevTexture=new Yr({type:pr.HALF_FLOAT}),this._currentTexture=new Yr({type:pr.HALF_FLOAT}),this._frameBuffer=new Pn({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}Ya.prototype.setAmbientCubemap=function(t,i){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",i);var l=t&&i;this._ssrPass.material[l?"enableTexture":"disableTexture"]("specularCubemap")},Ya.prototype.update=function(t,i,l,f){var c=t.getWidth(),p=t.getHeight(),y=this._ssrTexture,x=this._texture2,w=this._texture3;y.width=this._prevTexture.width=this._currentTexture.width=c/this._downScale,y.height=this._prevTexture.height=this._currentTexture.height=p/this._downScale,x.width=w.width=c,x.height=w.height=p;var E=this._frameBuffer,B=this._ssrPass,q=this._blurPass1,yt=this._blurPass2,_t=this._blendPass,Mt=new Cr,Ct=new Cr;Cr.transpose(Mt,i.worldTransform),Cr.transpose(Ct,i.viewMatrix),B.setUniform("sourceTexture",l),B.setUniform("projection",i.projectionMatrix.array),B.setUniform("projectionInv",i.invProjectionMatrix.array),B.setUniform("toViewSpace",Mt.array),B.setUniform("toWorldSpace",Ct.array),B.setUniform("nearZ",i.near);var Gt=f/this._totalSamples*this._samplePerFrame;if(B.setUniform("jitterOffset",Gt),B.setUniform("sampleOffset",f*this._samplePerFrame),q.setUniform("textureSize",[y.width,y.height]),yt.setUniform("textureSize",[c,p]),yt.setUniform("sourceTexture",l),q.setUniform("projection",i.projectionMatrix.array),yt.setUniform("projection",i.projectionMatrix.array),E.attach(y),E.bind(t),B.render(t),this._physicallyCorrect&&(E.attach(this._currentTexture),_t.setUniform("texture1",this._prevTexture),_t.setUniform("texture2",y),_t.material.set({weight1:f>=1?.95:0,weight2:f>=1?.05:1}),_t.render(t)),E.attach(x),q.setUniform("texture",this._physicallyCorrect?this._currentTexture:y),q.render(t),E.attach(w),yt.setUniform("texture",x),yt.render(t),E.unbind(t),this._physicallyCorrect){var Xt=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=Xt}},Ya.prototype.getTargetTexture=function(){return this._texture3},Ya.prototype.setParameter=function(t,i){t==="maxIteration"?this._ssrPass.material.define("fragment","MAX_ITERATION",i):this._ssrPass.setUniform(t,i)},Ya.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=mu.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t},Ya.prototype.setSSAOTexture=function(t){var i=this._blurPass2;t?(i.material.enableTexture("ssaoTex"),i.material.set("ssaoTex",t)):i.material.disableTexture("ssaoTex")},Ya.prototype.isFinished=function(t){return this._physicallyCorrect?t>this._totalSamples/this._samplePerFrame:!0},Ya.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};var qc=Ya,Yf=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],eg=`@export ecgl.normal.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

@import ecgl.common.normalMap.vertexHeader

@import ecgl.common.vertexAnimation.header

void main()
{

 @import ecgl.common.vertexAnimation.main

 @import ecgl.common.uv.main

 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);
 v_WorldPosition = (world * vec4(pos, 1.0)).xyz;

 @import ecgl.common.normalMap.vertexMain

 gl_Position = worldViewProjection * vec4(pos, 1.0);

}


@end


@export ecgl.normal.fragment

#define ROUGHNESS_CHANEL 0

uniform bool useBumpMap;
uniform bool useRoughnessMap;
uniform bool doubleSide;
uniform float roughness;

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform mat4 viewInverse : VIEWINVERSE;

@import ecgl.common.normalMap.fragmentHeader
@import ecgl.common.bumpMap.header

uniform sampler2D roughnessMap;

void main()
{
 vec3 N = v_Normal;
 
 bool flipNormal = false;
 if (doubleSide) {
 vec3 eyePos = viewInverse[3].xyz;
 vec3 V = normalize(eyePos - v_WorldPosition);

 if (dot(N, V) < 0.0) {
 flipNormal = true;
 }
 }

 @import ecgl.common.normalMap.fragmentMain

 if (useBumpMap) {
 N = bumpNormal(v_WorldPosition, v_Normal, N);
 }

 float g = 1.0 - roughness;

 if (useRoughnessMap) {
 float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];
 g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);
 }

 if (flipNormal) {
 N = -N;
 }

 gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;
 gl_FragColor.a = g;
}
@end`;_r.import(eg);function Lu(t,i,l,f,c){var p=t.gl;i.setUniform(p,"1i",l,c),p.activeTexture(p.TEXTURE0+c),f.isRenderable()?f.bind(t):f.unbind(t)}function tv(t,i,l,f,c){var p,y,x,w,E=t.gl;return function(B,q,yt){if(!(w&&w.material===B.material)){var _t=B.material,Mt=B.__program,Ct=_t.get("roughness");Ct==null&&(Ct=1);var Gt=_t.get("normalMap")||i,Xt=_t.get("roughnessMap"),ne=_t.get("bumpMap"),te=_t.get("uvRepeat"),qt=_t.get("uvOffset"),ge=_t.get("detailUvRepeat"),ve=_t.get("detailUvOffset"),Ne=!!ne&&_t.isTextureEnabled("bumpMap"),Ee=!!Xt&&_t.isTextureEnabled("roughnessMap"),Ve=_t.isDefined("fragment","DOUBLE_SIDED");ne=ne||l,Xt=Xt||f,yt!==q?(q.set("normalMap",Gt),q.set("bumpMap",ne),q.set("roughnessMap",Xt),q.set("useBumpMap",Ne),q.set("useRoughnessMap",Ee),q.set("doubleSide",Ve),te!=null&&q.set("uvRepeat",te),qt!=null&&q.set("uvOffset",qt),ge!=null&&q.set("detailUvRepeat",ge),ve!=null&&q.set("detailUvOffset",ve),q.set("roughness",Ct)):(Mt.setUniform(E,"1f","roughness",Ct),p!==Gt&&Lu(t,Mt,"normalMap",Gt,0),y!==ne&&ne&&Lu(t,Mt,"bumpMap",ne,1),x!==Xt&&Xt&&Lu(t,Mt,"roughnessMap",Xt,2),te!=null&&Mt.setUniform(E,"2f","uvRepeat",te),qt!=null&&Mt.setUniform(E,"2f","uvOffset",qt),ge!=null&&Mt.setUniform(E,"2f","detailUvRepeat",ge),ve!=null&&Mt.setUniform(E,"2f","detailUvOffset",ve),Mt.setUniform(E,"1i","useBumpMap",+Ne),Mt.setUniform(E,"1i","useRoughnessMap",+Ee),Mt.setUniform(E,"1i","doubleSide",+Ve)),p=Gt,y=ne,x=Xt,w=B}}}function is(t){t=t||{},this._depthTex=new Yr({format:pr.DEPTH_COMPONENT,type:pr.UNSIGNED_INT}),this._normalTex=new Yr({type:pr.HALF_FLOAT}),this._framebuffer=new Pn,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,Pn.DEPTH_ATTACHMENT),this._normalMaterial=new Oe({shader:new _r(_r.source("ecgl.normal.vertex"),_r.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=ko.createBlank("#000"),this._defaultBumpMap=ko.createBlank("#000"),this._defaultRoughessMap=ko.createBlank("#000"),this._debugPass=new Yn({fragment:_r.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}is.prototype.getDepthTexture=function(){return this._depthTex},is.prototype.getNormalTexture=function(){return this._normalTex},is.prototype.update=function(t,i,l){var f=t.getWidth(),c=t.getHeight(),p=this._depthTex,y=this._normalTex,x=this._normalMaterial;p.width=f,p.height=c,y.width=f,y.height=c;var w=i.getRenderList(l).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(w,l,{getMaterial:function(){return x},ifRender:function(E){return E.renderNormal},beforeRender:tv(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)},is.prototype.renderDebug=function(t){this._debugPass.render(t)},is.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};var Kf=is;function zl(t){t=t||{},this._edgePass=new Yn({fragment:_r.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new Yr({type:pr.HALF_FLOAT}),this._frameBuffer=new Pn,this._frameBuffer.attach(this._targetTexture)}zl.prototype.update=function(t,i,l,f){var c=t.getWidth(),p=t.getHeight(),y=this._targetTexture;y.width=c,y.height=p;var x=this._frameBuffer;x.bind(t),this._edgePass.setUniform("projectionInv",i.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[c,p]),this._edgePass.setUniform("texture",l),this._edgePass.render(t),x.unbind(t)},zl.prototype.getTargetTexture=function(){return this._targetTexture},zl.prototype.setParameter=function(t,i){this._edgePass.setUniform(t,i)},zl.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};var ev=zl,rg={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},ng=`@export ecgl.dof.coc

uniform sampler2D depth;

uniform float zNear: 0.1;
uniform float zFar: 2000;

uniform float focalDistance: 3;
uniform float focalRange: 1;
uniform float focalLength: 30;
uniform float fstop: 2.8;

varying vec2 v_Texcoord;

@import clay.util.encode_float

void main()
{
 float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;

 float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));

 float aperture = focalLength / fstop;

 float coc;

 float uppper = focalDistance + focalRange;
 float lower = focalDistance - focalRange;
 if (dist <= uppper && dist >= lower) {
 coc = 0.5;
 }
 else {
 float focalAdjusted = dist > uppper ? uppper : lower;

 coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));
 coc = clamp(coc, 0.0, 2.0) / 2.00001;

 if (dist < lower) {
 coc = -coc;
 }
 coc = coc * 0.5 + 0.5;
 }

 gl_FragColor = encodeFloat(coc);
}
@end


@export ecgl.dof.composite

#define DEBUG 0

uniform sampler2D original;
uniform sampler2D blurred;
uniform sampler2D nearfield;
uniform sampler2D coc;
uniform sampler2D nearcoc;
varying vec2 v_Texcoord;

@import clay.util.rgbm
@import clay.util.float

void main()
{
 vec4 blurredColor = texture2D(blurred, v_Texcoord);
 vec4 originalColor = texture2D(original, v_Texcoord);

 float fCoc = decodeFloat(texture2D(coc, v_Texcoord));

 fCoc = abs(fCoc * 2.0 - 1.0);

 float weight = smoothstep(0.0, 1.0, fCoc);
 
#ifdef NEARFIELD_ENABLED
 vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);
 float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));
 fNearCoc = abs(fNearCoc * 2.0 - 1.0);

 gl_FragColor = encodeHDR(
 mix(
 nearfieldColor, mix(originalColor, blurredColor, weight),
 pow(1.0 - fNearCoc, 4.0)
 )
 );
#else
 gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));
#endif

}

@end



@export ecgl.dof.diskBlur

#define POISSON_KERNEL_SIZE 16;

uniform sampler2D texture;
uniform sampler2D coc;
varying vec2 v_Texcoord;

uniform float blurRadius : 10.0;
uniform vec2 textureSize : [512.0, 512.0];

uniform vec2 poissonKernel[POISSON_KERNEL_SIZE];

uniform float percent;

float nrand(const in vec2 n) {
 return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

@import clay.util.rgbm
@import clay.util.float


void main()
{
 vec2 offset = blurRadius / textureSize;

 float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );
 float cosa = cos(rnd);
 float sina = sin(rnd);
 vec4 basis = vec4(cosa, -sina, sina, cosa);

#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)
 offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);
#endif

#ifdef BLUR_COC
 float cocSum = 0.0;
#else
 vec4 color = vec4(0.0);
#endif


 float weightSum = 0.0;

 for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {
 vec2 ofs = poissonKernel[i];

 ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));

 vec2 uv = v_Texcoord + ofs * offset;
 vec4 texel = texture2D(texture, uv);

 float w = 1.0;
#ifdef BLUR_COC
 float fCoc = decodeFloat(texel) * 2.0 - 1.0;
 cocSum += clamp(fCoc, -1.0, 0.0) * w;
#else
 texel = texel;
 #if !defined(BLUR_NEARFIELD)
 float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;
 w *= abs(fCoc);
 #endif
 texel.rgb *= texel.a;
 color += texel * w;
#endif

 weightSum += w;
 }

#ifdef BLUR_COC
 gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);
#else
 color /= weightSum;
 color.rgb /= (color.a + 0.0001);
 gl_FragColor = color;
#endif
}

@end`,ig=`@export ecgl.edge

uniform sampler2D texture;

uniform sampler2D normalTexture;
uniform sampler2D depthTexture;

uniform mat4 projectionInv;

uniform vec2 textureSize;

uniform vec4 edgeColor: [0,0,0,0.8];

varying vec2 v_Texcoord;

vec3 packColor(vec2 coord) {
 float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;
 vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);
 vec4 p4 = projectionInv * p;

 return vec3(
 texture2D(normalTexture, coord).rg,
 -p4.z / p4.w / 5.0
 );
}

void main() {
 vec2 cc = v_Texcoord;
 vec3 center = packColor(cc);

 float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;
 float dx = size / textureSize.x;
 float dy = size / textureSize.y;

 vec2 coord;
 vec3 topLeft = packColor(cc+vec2(-dx, -dy));
 vec3 top = packColor(cc+vec2(0.0, -dy));
 vec3 topRight = packColor(cc+vec2(dx, -dy));
 vec3 left = packColor(cc+vec2(-dx, 0.0));
 vec3 right = packColor(cc+vec2(dx, 0.0));
 vec3 bottomLeft = packColor(cc+vec2(-dx, dy));
 vec3 bottom = packColor(cc+vec2(0.0, dy));
 vec3 bottomRight = packColor(cc+vec2(dx, dy));

 vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;
 vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;

 float edge = sqrt(dot(h, h) + dot(v, v));

 edge = smoothstep(0.8, 1.0, edge);

 gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);
}
@end`;_r.import(kf),_r.import(Vf),_r.import(Zc),_r.import(Wc),_r.import(Zf),_r.import(Hc),_r.import(Xc),_r.import(Pu),_r.import(Wf),_r.import(ng),_r.import(ig);function Iu(t,i){return{color:{parameters:{width:t,height:i}}}}var as=["composite","FXAA"];function qr(){this._width,this._height,this._dpr,this._sourceTexture=new Yr({type:pr.HALF_FLOAT}),this._depthTexture=new Yr({format:pr.DEPTH_COMPONENT,type:pr.UNSIGNED_INT}),this._framebuffer=new Pn,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,Pn.DEPTH_ATTACHMENT),this._normalPass=new Kf,this._compositor=Jp(rg);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var i=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=i,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map(function(f){return this._compositor.getNodeByName(f)},this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=as.map(function(f){return this._compositor.getNodeByName(f)},this);var l={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new qp(l),this._ssrPass=new qc(l),this._edgePass=new ev(l)}qr.prototype.resize=function(f,c,l){l=l||1;var f=f*l,c=c*l,p=this._sourceTexture,y=this._depthTexture;p.width=f,p.height=c,y.width=f,y.height=c;var x={getWidth:function(){return f},getHeight:function(){return c},getDevicePixelRatio:function(){return l}};function w(E,B){if(typeof E[B]=="function"){var q=E[B].__original||E[B];E[B]=function(yt){return q.call(this,x)},E[B].__original=q}}this._compositor.nodes.forEach(function(E){for(var B in E.outputs){var q=E.outputs[B].parameters;q&&(w(q,"width"),w(q,"height"))}for(var yt in E.parameters)w(E.parameters,yt)}),this._width=f,this._height=c,this._dpr=l},qr.prototype.getWidth=function(){return this._width},qr.prototype.getHeight=function(){return this._height},qr.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},qr.prototype._getPrevNode=function(t){for(var i=as.indexOf(t.name)-1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i-=1,l=this._finalNodesChain[i];return l},qr.prototype._getNextNode=function(t){for(var i=as.indexOf(t.name)+1,l=this._finalNodesChain[i];l&&!this._compositor.getNodeByName(l.name);)i+=1,l=this._finalNodesChain[i];return l},qr.prototype._addChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);!i||(t.inputs.texture=i.name,l?(t.outputs=Iu(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))},qr.prototype._removeChainNode=function(t){var i=this._getPrevNode(t),l=this._getNextNode(t);!i||(l?(i.outputs=Iu(this.getWidth.bind(this),this.getHeight.bind(this)),l.inputs.texture=i.name):i.outputs=null,this._compositor.removeNode(t))},qr.prototype.updateNormal=function(t,i,l,f){this._ifRenderNormalPass()&&this._normalPass.update(t,i,l)},qr.prototype.updateSSAO=function(t,i,l,f){this._ssaoPass.update(t,l,f)},qr.prototype.enableSSAO=function(){this._enableSSAO=!0},qr.prototype.disableSSAO=function(){this._enableSSAO=!1},qr.prototype.enableSSR=function(){this._enableSSR=!0},qr.prototype.disableSSR=function(){this._enableSSR=!1},qr.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},qr.prototype.getSourceFrameBuffer=function(){return this._framebuffer},qr.prototype.getSourceTexture=function(){return this._sourceTexture},qr.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},qr.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},qr.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},qr.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},qr.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},qr.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},qr.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},qr.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},qr.prototype.enableEdge=function(){this._enableEdge=!0},qr.prototype.disableEdge=function(){this._enableEdge=!1},qr.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)},qr.prototype.setSSAOParameter=function(t,i){switch(t){case"quality":var l={low:6,medium:12,high:32,ultra:62}[i]||12;this._ssaoPass.setParameter("kernelSize",l);break;case"radius":this._ssaoPass.setParameter(t,i),this._ssaoPass.setParameter("bias",i/200);break;case"intensity":this._ssaoPass.setParameter(t,i);break;default:}},qr.prototype.setDOFParameter=function(t,i){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,i);break;case"blurRadius":for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].setParameter("blurRadius",i);break;case"quality":var f={low:4,medium:8,high:16,ultra:32}[i]||8;this._dofBlurKernelSize=f;for(var l=0;l<this._dofBlurNodes.length;l++)this._dofBlurNodes[l].pass.material.define("POISSON_KERNEL_SIZE",f);this._dofBlurKernel=new Float32Array(f*2);break;default:}},qr.prototype.setSSRParameter=function(t,i){if(i!=null)switch(t){case"quality":var l={low:10,medium:15,high:30,ultra:80}[i]||20,f={low:32,medium:16,high:8,ultra:4}[i]||16;this._ssrPass.setParameter("maxIteration",l),this._ssrPass.setParameter("pixelStride",f);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-i,1),0));break;case"physical":this.setPhysicallyCorrectSSR(i);break;default:console.warn("Unkown SSR parameter "+t)}},qr.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)},qr.prototype.setEdgeColor=function(t){var i=se.parseColor(t);this._edgePass.setParameter("edgeColor",i)},qr.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))},qr.prototype.setColorLookupTexture=function(t,i){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",i,{minFilter:se.Texture.NEAREST,magFilter:se.Texture.NEAREST,flipY:!1})},qr.prototype.setColorCorrection=function(t,i){this._compositeNode.setParameter(t,i)},qr.prototype.isSSREnabled=function(){return this._enableSSR},qr.prototype.composite=function(t,i,l,f,c){var p=this._sourceTexture,y=p;this._enableEdge&&(this._edgePass.update(t,l,p,c),p=y=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,l,p,c),y=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=y,this._cocNode.setParameter("depth",this._depthTexture);for(var x=this._dofBlurKernel,w=this._dofBlurKernelSize,E=Math.floor(Yf.length/2/w),B=c%E,q=0;q<w*2;q++)x[q]=Yf[q+B*w*2];for(var q=0;q<this._dofBlurNodes.length;q++)this._dofBlurNodes[q].setParameter("percent",c/30),this._dofBlurNodes[q].setParameter("poissonKernel",x);this._cocNode.setParameter("zNear",l.near),this._cocNode.setParameter("zFar",l.far),this._compositor.render(t,f)},qr.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};var jf=qr;function js(t){for(var i=[],l=0;l<30;l++)i.push([mo(l,2),mo(l,3)]);this._haltonSequence=i,this._frame=0,this._sourceTex=new Yr,this._sourceFb=new Pn,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new Yr,this._outputTex=new Yr;var f=this._blendPass=new Yn({fragment:_r.source("clay.compositor.blend")});f.material.disableTexturesAll(),f.material.enableTexture(["texture1","texture2"]),this._blendFb=new Pn({depthBuffer:!1}),this._outputPass=new Yn({fragment:_r.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(c){c.blendEquationSeparate(c.FUNC_ADD,c.FUNC_ADD),c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA)}}js.prototype={constructor:js,jitterProjection:function(t,i){var l=t.viewport,f=l.devicePixelRatio||t.getDevicePixelRatio(),c=l.width*f,p=l.height*f,y=this._haltonSequence[this._frame%this._haltonSequence.length],x=new Cr;x.array[12]=(y[0]*2-1)/c,x.array[13]=(y[1]*2-1)/p,Cr.mul(i.projectionMatrix,x,i.projectionMatrix),Cr.invert(i.invProjectionMatrix,i.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,i){this._prevFrameTex.width=t,this._prevFrameTex.height=i,this._outputTex.width=t,this._outputTex.height=i,this._sourceTex.width=t,this._sourceTex.height=i,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,i,l){var f=this._blendPass;this._frame===0?(f.setUniform("weight1",0),f.setUniform("weight2",1)):(f.setUniform("weight1",.9),f.setUniform("weight2",.1)),f.setUniform("texture1",this._prevFrameTex),f.setUniform("texture2",i||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),f.render(t),this._blendFb.unbind(t),l||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var c=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=c,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};var ag=js;function In(t){t=t||"perspective",this.layer=null,this.scene=new Za,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new jf,this._temporalSS=new ag,this._shadowMapPass=new Np;for(var i=[],l=0,f=0;f<30;f++){for(var c=[],p=0;p<6;p++)c.push(mo(l,2)*4-2),c.push(mo(l,3)*4-2),l++;i.push(c)}this._pcfKernels=i,this.scene.on("beforerender",function(y,x,w){this.needsTemporalSS()&&this._temporalSS.jitterProjection(y,w)},this)}In.prototype.setProjection=function(t){var i=this.camera;i&&i.update(),t==="perspective"?this.camera instanceof Un||(this.camera=new Un,i&&this.camera.setLocalTransform(i.localTransform)):this.camera instanceof Zo||(this.camera=new Zo,i&&this.camera.setLocalTransform(i.localTransform)),this.camera.near=.1,this.camera.far=2e3},In.prototype.setViewport=function(t,i,l,f,c){this.camera instanceof Un&&(this.camera.aspect=l/f),c=c||1,this.viewport.x=t,this.viewport.y=i,this.viewport.width=l,this.viewport.height=f,this.viewport.devicePixelRatio=c,this._compositor.resize(l*c,f*c),this._temporalSS.resize(l*c,f*c)},In.prototype.containPoint=function(t,i){var l=this.viewport,f=this.layer.renderer.getHeight();return i=f-i,t>=l.x&&i>=l.y&&t<=l.x+l.width&&i<=l.y+l.height};var rv=new le;In.prototype.castRay=function(t,i,l){var f=this.layer.renderer,c=f.viewport;return f.viewport=this.viewport,f.screenToNDC(t,i,rv),this.camera.castRay(rv,l),f.viewport=c,l},In.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var i=0;i<t.transparent.length;i++){var l=t.transparent[i],f=l.geometry;f.needsSortVerticesProgressively&&f.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),f.needsSortTrianglesProgressively&&f.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},In.prototype.render=function(t,i){this._doRender(t,i,this._frame),this._frame++},In.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},In.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return t==="auto"&&(t=this._enablePostEffect),t},In.prototype.hasDOF=function(){return this._enableDOF},In.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},In.prototype._doRender=function(t,i,l){var f=this.scene,c=this.camera;l=l||0,this._updateTransparent(t,f,c,l),i||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,f,c,!0)),this._updateShadowPCFKernel(l);var p=t.clearColor;if(t.gl.clearColor(p[0],p[1],p[2],p[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,c),this._compositor.updateNormal(t,f,c,this._temporalSS.getFrame())),this._updateSSAO(t,f,c,this._temporalSS.getFrame()),this._enablePostEffect){var y=this._compositor.getSourceFrameBuffer();y.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(f,c,!0,!0),y.unbind(t),this.needsTemporalSS()&&i?(this._compositor.composite(t,f,c,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,f,c,null,0))}else if(this.needsTemporalSS()&&i){var y=this._temporalSS.getSourceFrameBuffer();y.bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(f,c,!0,!0),t.restoreClear(),y.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(f,c,!0,!0)},In.prototype._updateTransparent=function(t,i,l,f){for(var c=new ur,p=new Cr,y=l.getWorldPosition(),x=i.getRenderList(l).transparent,w=0;w<x.length;w++){var E=x[w],B=E.geometry;Cr.invert(p,E.worldTransform),ur.transformMat4(c,y,p),B.needsSortTriangles&&B.needsSortTriangles()&&B.doSortTriangles(c,f),B.needsSortVertices&&B.needsSortVertices()&&B.doSortVertices(c,f)}},In.prototype._updateSSAO=function(t,i,l){var f=this._enableSSAO&&this._enablePostEffect;f&&this._compositor.updateSSAO(t,i,l,this._temporalSS.getFrame());for(var c=i.getRenderList(l),p=0;p<c.opaque.length;p++){var y=c.opaque[p];y.renderNormal&&y.material[f?"enableTexture":"disableTexture"]("ssaoMap"),f&&y.material.set("ssaoMap",this._compositor.getSSAOTexture())}},In.prototype._updateShadowPCFKernel=function(t){for(var i=this._pcfKernels[t%this._pcfKernels.length],l=this.scene.getRenderList(this.camera),f=l.opaque,c=0;c<f.length;c++)f[c].receiveShadow&&(f[c].material.set("pcfKernel",i),f[c].material.define("fragment","PCF_KERNEL_SIZE",i.length/2))},In.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)},In.prototype.setPostEffect=function(t,i){var l=this._compositor;this._enablePostEffect=t.get("enable");var f=t.getModel("bloom"),c=t.getModel("edge"),p=t.getModel("DOF",t.getModel("depthOfField")),y=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),x=t.getModel("SSR",t.getModel("screenSpaceReflection")),w=t.getModel("FXAA"),E=t.getModel("colorCorrection");f.get("enable")?l.enableBloom():l.disableBloom(),p.get("enable")?l.enableDOF():l.disableDOF(),x.get("enable")?l.enableSSR():l.disableSSR(),E.get("enable")?l.enableColorCorrection():l.disableColorCorrection(),c.get("enable")?l.enableEdge():l.disableEdge(),w.get("enable")?l.enableFXAA():l.disableFXAA(),this._enableDOF=p.get("enable"),this._enableSSAO=y.get("enable"),this._enableSSAO?l.enableSSAO():l.disableSSAO(),l.setBloomIntensity(f.get("intensity")),l.setEdgeColor(c.get("color")),l.setColorLookupTexture(E.get("lookupTexture"),i),l.setExposure(E.get("exposure")),["radius","quality","intensity"].forEach(function(B){l.setSSAOParameter(B,y.get(B))}),["quality","maxRoughness","physical"].forEach(function(B){l.setSSRParameter(B,x.get(B))}),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach(function(B){l.setDOFParameter(B,p.get(B))}),["brightness","contrast","saturation"].forEach(function(B){l.setColorCorrection(B,E.get(B))})},In.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect)return t>this.camera.far||t<this.camera.near?void 0:(this._compositor.setDOFParameter("focalDistance",t),!0)},In.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")},In.prototype.isLinearSpace=function(){return this._enablePostEffect},In.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var i=this.rootNode.children(),l=0;l<i.length;l++)t.add(i[l]);t!==this.scene&&this.scene.add(t),this.rootNode=t}},In.prototype.add=function(t){this.rootNode.add(t)},In.prototype.remove=function(t){this.rootNode.remove(t)},In.prototype.removeAll=function(t){this.rootNode.removeAll(t)},Object.assign(In.prototype,W);var la=In;function og(t,i){var l=t.getBoxLayoutParams(),f=(0,Eu.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var c=t.get("boxWidth"),p=t.get("boxHeight"),y=t.get("boxDepth");this.getAxis("x").setExtent(-c/2,c/2),this.getAxis("y").setExtent(y/2,-y/2),this.getAxis("z").setExtent(-p/2,p/2),this.size=[c,p,y]}function sg(t,i){var l={};function f(c,p){l[c]=l[c]||[1/0,-1/0],l[c][0]=Math.min(p[0],l[c][0]),l[c][1]=Math.max(p[1],l[c][1])}t.eachSeries(function(c){if(c.coordinateSystem===this){var p=c.getData();["x","y","z"].forEach(function(y){p.mapDimensionsAll(y,!0).forEach(function(x){f(y,p.getDataExtent(x,!0))})})}},this),["xAxis3D","yAxis3D","zAxis3D"].forEach(function(c){t.eachComponent(c,function(p){var y=c.charAt(0),x=p.getReferringComponents("grid3D").models[0],w=x.coordinateSystem;if(w===this){var E=w.getAxis(y);if(!E){var B=N._y.createScale(l[y]||[1/0,-1/0],p);E=new Rp(y,B),E.type=p.get("type");var q=E.type==="category";E.onBand=q&&p.get("boundaryGap"),E.inverse=p.get("inverse"),p.axis=E,E.model=p,E.getLabelModel=function(){return p.getModel("axisLabel",x.getModel("axisLabel"))},E.getTickModel=function(){return p.getModel("axisTick",x.getModel("axisTick"))},w.addAxis(E)}}},this)},this),this.resize(this.model,i)}var lg={dimensions:go.prototype.dimensions,create:function(t,i){var l=[];t.eachComponent("grid3D",function(p){p.__viewGL=p.__viewGL||new la;var y=new go;y.model=p,y.viewGL=p.__viewGL,p.coordinateSystem=y,l.push(y),y.resize=og,y.update=sg});var f=["xAxis3D","yAxis3D","zAxis3D"];function c(p,y){return f.map(function(x){var w=p.getReferringComponents(x).models[0];return w==null&&(w=y.getComponent(x)),w})}return t.eachSeries(function(p){if(p.get("coordinateSystem")==="cartesian3D"){var y=p.getReferringComponents("grid3D").models[0];if(y==null){var x=c(p,t),y=x[0].getCoordSysModel();x.forEach(function(B){var q=B.getCoordSysModel()})}var w=y.coordinateSystem;p.coordinateSystem=w}}),l}},ug=lg,nv=N.tF.extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});N._y.mixinAxisModelCommonMethods(nv);var iv=nv,av={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},Jf=N.D5.merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},av),Ru=N.D5.merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},av),fg=N.D5.defaults({scale:!0,min:"dataMin",max:"dataMax"},Ru),Qf=N.D5.defaults({logBase:10},Ru);Qf.scale=!0;var hg={categoryAxis3D:Jf,valueAxis3D:Ru,timeAxis3D:fg,logAxis3D:Qf},cg=F(51401),yo=["value","category","time","log"];function vg(t,i,l,f,c){yo.forEach(function(p){var y=l.extend({type:i+"Axis3D."+p,__ordinalMeta:null,mergeDefaultAndTheme:function(x,w){var E=w.getTheme();N.D5.merge(x,E.get(p+"Axis3D")),N.D5.merge(x,this.getDefaultOption()),x.type=f(i,x)},optionUpdated:function(){var x=this.option;x.type==="category"&&(this.__ordinalMeta=cg.Z.createByAxisModel(this))},getCategories:function(){if(this.option.type==="category")return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:N.D5.merge(N.D5.clone(hg[p+"Axis3D"]),c||{},!0)});t.registerComponentModel(y)}),t.registerSubTypeDefaulter(i+"Axis3D",N.D5.curry(f,i))}function ov(t,i){return i.type||(i.data?"category":"value")}function $f(t){t.registerComponentModel(Mp),t.registerComponentView(Nl),t.registerCoordinateSystem("grid3D",ug),["x","y","z"].forEach(function(i){vg(t,i,iv,ov,{name:i.toUpperCase()});const l=t.ComponentView.extend({type:i+"Axis3D"});t.registerComponentView(l)}),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"grid3D",query:i},function(f){f.setView(i)})}),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},function(i,l){}),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},function(i,l){})}(0,N.D$)($f);var Js={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},sv={getFilledRegions:function(t,i){var l=(t||[]).slice(),f;if(typeof i=="string"?(i=N.FU(i),f=i&&i.geoJson):i&&i.features&&(f=i),!f)return[];for(var c={},p=f.features,y=0;y<l.length;y++)c[l[y].name]=l[y];for(var y=0;y<p.length;y++){var x=p[y].properties.name;c[x]||l.push({name:x})}return l},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}},Qs=N.tF.extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var i=N._y.createDimensions(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),l=new N.aV(i,this);l.initData(t.regions);var f={};l.each(function(c){var p=l.getName(c),y=l.getItemModel(c);f[p]=y}),this._regionModelMap=f,this._data=l},getData:function(){return this._data},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new N.Hn(null,this)},getRegionPolygonCoords:function(t){var i=this.getData().getName(t),l=this.coordinateSystem.getRegion(i);return l?l.geometries:[]},getFormattedLabel:function(t,i){var l=this._data.getName(t),f=this.getRegionModel(t),c=f.get(i==="normal"?["label","formatter"]:["emphasis","label","formatter"]);c==null&&(c=f.get(["label","formatter"]));var p={name:l};if(typeof c=="function")return p.status=i,c(p);if(typeof c=="string"){var y=p.seriesName;return c.replace("{a}",y??"")}else return l},defaultOption:{regions:[]}});N.D5.merge(Qs.prototype,sv),N.D5.merge(Qs.prototype,jo),N.D5.merge(Qs.prototype,Jo),N.D5.merge(Qs.prototype,Ha),N.D5.merge(Qs.prototype,Js);var dg=Qs,pg=lv;function lv(t,i,l){l=l||2;var f=i&&i.length,c=f?i[0]*l:t.length,p=qf(t,0,c,l,!0),y=[];if(!p)return y;var x,w,E,B,q,yt,_t;if(f&&(p=mg(t,i,p,l)),t.length>80*l){x=E=t[0],w=B=t[1];for(var Mt=l;Mt<c;Mt+=l)q=t[Mt],yt=t[Mt+1],q<x&&(x=q),yt<w&&(w=yt),q>E&&(E=q),yt>B&&(B=yt);_t=Math.max(E-x,B-w)}return $s(p,y,l,x,w,_t),y}function qf(t,i,l,f,c){var p,y;if(c===hs(t,i,l,f)>0)for(p=i;p<l;p+=f)y=kl(p,t[p],t[p+1],y);else for(p=l-f;p>=i;p-=f)y=kl(p,t[p],t[p+1],y);return y&&us(y,y.next)&&(qs(y),y=y.next),y}function os(t,i){if(!t)return t;i||(i=t);var l=t,f;do if(f=!1,!l.steiner&&(us(l,l.next)||ci(l.prev,l,l.next)===0)){if(qs(l),l=i=l.prev,l===l.next)return null;f=!0}else l=l.next;while(f||l!==i);return i}function $s(t,i,l,f,c,p,y){if(!!t){!y&&p&&Ou(t,f,c,p);for(var x=t,w,E;t.prev!==t.next;){if(w=t.prev,E=t.next,p?fv(t,f,c,p):uv(t)){i.push(w.i/l),i.push(t.i/l),i.push(E.i/l),qs(t),t=E.next,x=E.next;continue}if(t=E,t===x){y?y===1?(t=hv(t,i,l),$s(t,i,l,f,c,p,2)):y===2&&gg(t,i,l,f,c,p):$s(os(t),i,l,f,c,p,1);break}}}}function uv(t){var i=t.prev,l=t,f=t.next;if(ci(i,l,f)>=0)return!1;for(var c=t.next.next;c!==t.prev;){if(Nu(i.x,i.y,l.x,l.y,f.x,f.y,c.x,c.y)&&ci(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function fv(t,i,l,f){var c=t.prev,p=t,y=t.next;if(ci(c,p,y)>=0)return!1;for(var x=c.x<p.x?c.x<y.x?c.x:y.x:p.x<y.x?p.x:y.x,w=c.y<p.y?c.y<y.y?c.y:y.y:p.y<y.y?p.y:y.y,E=c.x>p.x?c.x>y.x?c.x:y.x:p.x>y.x?p.x:y.x,B=c.y>p.y?c.y>y.y?c.y:y.y:p.y>y.y?p.y:y.y,q=ls(x,w,i,l,f),yt=ls(E,B,i,l,f),_t=t.nextZ;_t&&_t.z<=yt;){if(_t!==t.prev&&_t!==t.next&&Nu(c.x,c.y,p.x,p.y,y.x,y.y,_t.x,_t.y)&&ci(_t.prev,_t,_t.next)>=0)return!1;_t=_t.nextZ}for(_t=t.prevZ;_t&&_t.z>=q;){if(_t!==t.prev&&_t!==t.next&&Nu(c.x,c.y,p.x,p.y,y.x,y.y,_t.x,_t.y)&&ci(_t.prev,_t,_t.next)>=0)return!1;_t=_t.prevZ}return!0}function hv(t,i,l){var f=t;do{var c=f.prev,p=f.next.next;!us(c,p)&&Gl(c,f,f.next,p)&&Ul(c,p)&&Ul(p,c)&&(i.push(c.i/l),i.push(f.i/l),i.push(p.i/l),qs(f),qs(f.next),f=t=p),f=f.next}while(f!==t);return f}function gg(t,i,l,f,c,p){var y=t;do{for(var x=y.next.next;x!==y.prev;){if(y.i!==x.i&&Sg(y,x)){var w=Bu(y,x);y=os(y,y.next),w=os(w,w.next),$s(y,i,l,f,c,p),$s(w,i,l,f,c,p);return}x=x.next}y=y.next}while(y!==t)}function mg(t,i,l,f){var c=[],p,y,x,w,E;for(p=0,y=i.length;p<y;p++)x=i[p]*f,w=p<y-1?i[p+1]*f:t.length,E=qf(t,x,w,f,!1),E===E.next&&(E.steiner=!0),c.push(xg(E));for(c.sort(yg),p=0;p<c.length;p++)ss(c[p],l),l=os(l,l.next);return l}function yg(t,i){return t.x-i.x}function ss(t,i){if(i=cv(t,i),i){var l=Bu(i,t);os(l,l.next)}}function cv(t,i){var l=i,f=t.x,c=t.y,p=-1/0,y;do{if(c<=l.y&&c>=l.next.y&&l.next.y!==l.y){var x=l.x+(c-l.y)*(l.next.x-l.x)/(l.next.y-l.y);if(x<=f&&x>p){if(p=x,x===f){if(c===l.y)return l;if(c===l.next.y)return l.next}y=l.x<l.next.x?l:l.next}}l=l.next}while(l!==i);if(!y)return null;if(f===p)return y.prev;var w=y,E=y.x,B=y.y,q=1/0,yt;for(l=y.next;l!==w;)f>=l.x&&l.x>=E&&f!==l.x&&Nu(c<B?f:p,c,E,B,c<B?p:f,c,l.x,l.y)&&(yt=Math.abs(c-l.y)/(f-l.x),(yt<q||yt===q&&l.x>y.x)&&Ul(l,t)&&(y=l,q=yt)),l=l.next;return y}function Ou(t,i,l,f){var c=t;do c.z===null&&(c.z=ls(c.x,c.y,i,l,f)),c.prevZ=c.prev,c.nextZ=c.next,c=c.next;while(c!==t);c.prevZ.nextZ=null,c.prevZ=null,_g(c)}function _g(t){var i,l,f,c,p,y,x,w,E=1;do{for(l=t,t=null,p=null,y=0;l;){for(y++,f=l,x=0,i=0;i<E&&(x++,f=f.nextZ,!!f);i++);for(w=E;x>0||w>0&&f;)x!==0&&(w===0||!f||l.z<=f.z)?(c=l,l=l.nextZ,x--):(c=f,f=f.nextZ,w--),p?p.nextZ=c:t=c,c.prevZ=p,p=c;l=f}p.nextZ=null,E*=2}while(y>1);return t}function ls(t,i,l,f,c){return t=32767*(t-l)/c,i=32767*(i-f)/c,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t|i<<1}function xg(t){var i=t,l=t;do i.x<l.x&&(l=i),i=i.next;while(i!==t);return l}function Nu(t,i,l,f,c,p,y,x){return(c-y)*(i-x)-(t-y)*(p-x)>=0&&(t-y)*(f-x)-(l-y)*(i-x)>=0&&(l-y)*(p-x)-(c-y)*(f-x)>=0}function Sg(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!th(t,i)&&Ul(t,i)&&Ul(i,t)&&Tg(t,i)}function ci(t,i,l){return(i.y-t.y)*(l.x-i.x)-(i.x-t.x)*(l.y-i.y)}function us(t,i){return t.x===i.x&&t.y===i.y}function Gl(t,i,l,f){return us(t,i)&&us(l,f)||us(t,f)&&us(l,i)?!0:ci(t,i,l)>0!=ci(t,i,f)>0&&ci(l,f,t)>0!=ci(l,f,i)>0}function th(t,i){var l=t;do{if(l.i!==t.i&&l.next.i!==t.i&&l.i!==i.i&&l.next.i!==i.i&&Gl(l,l.next,t,i))return!0;l=l.next}while(l!==t);return!1}function Ul(t,i){return ci(t.prev,t,t.next)<0?ci(t,i,t.next)>=0&&ci(t,t.prev,i)>=0:ci(t,i,t.prev)<0||ci(t,t.next,i)<0}function Tg(t,i){var l=t,f=!1,c=(t.x+i.x)/2,p=(t.y+i.y)/2;do l.y>p!=l.next.y>p&&l.next.y!==l.y&&c<(l.next.x-l.x)*(p-l.y)/(l.next.y-l.y)+l.x&&(f=!f),l=l.next;while(l!==t);return f}function Bu(t,i){var l=new fs(t.i,t.x,t.y),f=new fs(i.i,i.x,i.y),c=t.next,p=i.prev;return t.next=i,i.prev=t,l.next=c,c.prev=l,f.next=l,l.prev=f,p.next=f,f.prev=p,f}function kl(t,i,l,f){var c=new fs(t,i,l);return f?(c.next=f.next,c.prev=f,f.next.prev=c,f.next=c):(c.prev=c,c.next=c),c}function qs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fs(t,i,l){this.i=t,this.x=i,this.y=l,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}lv.deviation=function(t,i,l,f){var c=i&&i.length,p=c?i[0]*l:t.length,y=Math.abs(hs(t,0,p,l));if(c)for(var x=0,w=i.length;x<w;x++){var E=i[x]*l,B=x<w-1?i[x+1]*l:t.length;y-=Math.abs(hs(t,E,B,l))}var q=0;for(x=0;x<f.length;x+=3){var yt=f[x]*l,_t=f[x+1]*l,Mt=f[x+2]*l;q+=Math.abs((t[yt]-t[Mt])*(t[_t+1]-t[yt+1])-(t[yt]-t[_t])*(t[Mt+1]-t[yt+1]))}return y===0&&q===0?0:Math.abs((q-y)/y)};function hs(t,i,l,f){for(var c=0,p=i,y=l-f;p<l;p+=f)c+=(t[y]-t[p])*(t[p+1]+t[y+1]),y=p;return c}function Ka(t,i,l){var f=t[i];t[i]=t[l],t[l]=f}function Fu(t,i,l,f,c){var p=l,y=t[i];Ka(t,i,f);for(var x=l;x<f;x++)c(t[x],y)<0&&(Ka(t,x,p),p++);return Ka(t,f,p),p}function tl(t,i,l,f){if(l<f){var c=Math.floor((l+f)/2),p=Fu(t,c,l,f,i);tl(t,i,l,p-1),tl(t,i,p+1,f)}}function zu(){this._parts=[]}zu.prototype.step=function(t,i,l){var f=t.length;if(l===0){this._parts=[],this._sorted=!1;var c=Math.floor(f/2);this._parts.push({pivot:c,left:0,right:f-1}),this._currentSortPartIdx=0}if(!this._sorted){var p=this._parts;if(p.length===0)return this._sorted=!0,!0;if(p.length<512){for(var y=0;y<p.length;y++)p[y].pivot=Fu(t,p[y].pivot,p[y].left,p[y].right,i);for(var x=[],y=0;y<p.length;y++){var w=p[y].left,E=p[y].pivot-1;E>w&&x.push({pivot:Math.floor((E+w)/2),left:w,right:E});var w=p[y].pivot+1,E=p[y].right;E>w&&x.push({pivot:Math.floor((E+w)/2),left:w,right:E})}p=this._parts=x}else for(var y=0;y<Math.floor(p.length/10);y++){var B=p.length-1-this._currentSortPartIdx;if(tl(t,i,p[B].left,p[B].right),this._currentSortPartIdx++,this._currentSortPartIdx===p.length)return this._sorted=!0,!0}return!1}},zu.sort=tl;var Gu=zu,ja=Vn.vec3,xi=ja.create(),vv=ja.create(),eh=ja.create(),rh={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,i){var l=this.indices;if(i===0){var f=this.attributes.position,t=t.array;(!this._triangleZList||this._triangleZList.length!==this.triangleCount)&&(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new l.constructor(l.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var c=0,p,y=0;y<l.length;){f.get(l[y++],xi),f.get(l[y++],vv),f.get(l[y++],eh);var x=ja.sqrDist(xi,t),w=ja.sqrDist(vv,t),E=ja.sqrDist(eh,t),B=Math.min(x,w);B=Math.min(B,E),y===3?(p=B,B=0):B=B-p,this._triangleZList[c++]=B}}for(var q=this._sortedTriangleIndices,y=0;y<q.length;y++)q[y]=y;if(this.triangleCount<2e4)i===0&&this._simpleSort(!0);else for(var y=0;y<3;y++)this._progressiveQuickSort(i*3+y);for(var yt=this._indicesTmp,_t=this._triangleZListTmp,Mt=this._triangleZList,y=0;y<this.triangleCount;y++){var Ct=q[y]*3,Gt=y*3;yt[Gt++]=l[Ct++],yt[Gt++]=l[Ct++],yt[Gt]=l[Ct],_t[y]=Mt[q[y]]}var Xt=this._indicesTmp;this._indicesTmp=this.indices,this.indices=Xt;var Xt=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=Xt,this.dirtyIndices()},_simpleSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;function f(c,p){return i[p]-i[c]}t?Array.prototype.sort.call(l,f):Gu.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._triangleZList,l=this._sortedTriangleIndices;this._quickSort=this._quickSort||new Gu,this._quickSort.step(l,function(f,c){return i[c]-i[f]},t)}};function dv(t){const i=t.getVisual("style");if(i){const l=t.getVisual("drawType");return i[l]}}function wg(t){return t.getVisual("style").opacity}function oi(t,i){const l=t.getItemVisual(i,"style");if(l){const f=t.getVisual("drawType");return l[f]}}function vi(t,i){const l=t.getItemVisual(i,"style");return l&&l.opacity}var Uu=1,pv=2;function Ja(t,i,l){this._labelsMesh=new po,this._labelTextureSurface=new wu({width:512,height:512,devicePixelRatio:l.getDevicePixelRatio(),onupdate:function(){l.getZr().refresh()}}),this._api=l,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}Ja.prototype.getLabelPosition=function(t,i,l){return[0,0,0]},Ja.prototype.getLabelDistance=function(t,i,l){return 0},Ja.prototype.getMesh=function(){return this._labelsMesh},Ja.prototype.updateData=function(t,i,l){i==null&&(i=0),l==null&&(l=t.count()),(!this._labelsVisibilitiesBits||this._labelsVisibilitiesBits.length!==l-i)&&(this._labelsVisibilitiesBits=new Uint8Array(l-i));for(var f=["label","show"],c=["emphasis","label","show"],p=i;p<l;p++){var y=t.getItemModel(p),x=y.get(f),w=y.get(c);w==null&&(w=x);var E=(x?Uu:0)|(w?pv:0);this._labelsVisibilitiesBits[p-i]=E}this._start=i,this._end=l,this._data=t},Ja.prototype.updateLabels=function(t){if(!!this._data){t=t||[];for(var i=t.length>0,l={},f=0;f<t.length;f++)l[t[f]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var c=["label"],p=["emphasis","label"],y=this._data.hostModel,x=this._data,w=y.getModel(c),E=y.getModel(p,w),B={left:"right",right:"left",top:"center",bottom:"center"},q={left:"middle",right:"middle",top:"bottom",bottom:"top"},yt=this._start;yt<this._end;yt++){var _t=!1;i&&l[yt]&&(_t=!0);var Mt=this._labelsVisibilitiesBits[yt-this._start]&(_t?pv:Uu);if(!!Mt){var Ct=x.getItemModel(yt),Gt=Ct.getModel(_t?p:c,_t?E:w),Xt=Gt.get("distance")||0,ne=Gt.get("position"),te=this._api.getDevicePixelRatio(),qt=y.getFormattedLabel(yt,_t?"emphasis":"normal");if(qt==null||qt==="")return;var ge=new N.Q.xv({style:(0,Il.Lr)(Gt,{text:qt,fill:Gt.get("color")||oi(x,yt)||"#000",align:"left",verticalAlign:"top",opacity:Xr.firstNotNull(Gt.get("opacity"),vi(x,yt),1)})}),ve=ge.getBoundingRect(),Ne=1.2;ve.height*=Ne;var Ee=this._labelTextureSurface.add(ge),Ve=B[ne]||"center",Qe=q[ne]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(yt,ne,Xt),[ve.width*te,ve.height*te],Ee,Ve,Qe,this.getLabelDistance(yt,ne,Xt)*te)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},Ja.prototype.dispose=function(){this._labelTextureSurface.dispose()};var nh=Ja,Si=Vn.vec3;se.Shader.import(Mu);function el(t){this.rootNode=new se.Node,this._triangulationResults={},this._shadersMap=se.COMMON_SHADERS.filter(function(l){return l!=="shadow"}).reduce(function(l,f){return l[f]=se.createShader("ecgl."+f),l},{}),this._linesShader=se.createShader("ecgl.meshLines3D");var i={};se.COMMON_SHADERS.forEach(function(l){i[l]=new se.Material({shader:se.createShader("ecgl."+l)})}),this._groundMaterials=i,this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new nh(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}el.prototype={constructor:el,extrudeY:!0,update:function(t,i,l,f,c){var p=t.getData();f==null&&(f=0),c==null&&(c=p.count()),this._startIndex=f,this._endIndex=c-1,this._triangulation(t,f,c);var y=this._getShader(t.get("shading"));this._prepareMesh(t,y,l,f,c),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,l,f,c);var x=t.coordinateSystem;x.type==="geo3D"&&this._updateGroundPlane(t,x,l);var w=this;this._labelsBuilder.updateData(p,f,c),this._labelsBuilder.getLabelPosition=function(E,B,q){var yt=p.getName(E),_t,Mt=q;if(x.type==="geo3D"){var Ct=x.getRegion(yt);if(!Ct)return[NaN,NaN,NaN];_t=Ct.getCenter();var Gt=x.dataToPoint([_t[0],_t[1],Mt]);return Gt}else var Xt=w._triangulationResults[E-w._startIndex],_t=w.extrudeY?[(Xt.max[0]+Xt.min[0])/2,Xt.max[1]+Mt,(Xt.max[2]+Xt.min[2])/2]:[(Xt.max[0]+Xt.min[0])/2,(Xt.max[1]+Xt.min[1])/2,Xt.max[2]+Mt]},this._data=p,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this;function i(){var c=new se.Mesh({name:"Polygon",material:new se.Material({shader:t._shadersMap.lambert}),geometry:new se.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(c.geometry,rh),c}var l=i(),f=new se.Mesh({material:new se.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Qo({useNativeLine:!1})});this.rootNode.add(l),this.rootNode.add(f),l.material.define("both","VERTEX_COLOR"),l.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=l,this._linesMesh=f,this.rootNode.add(this._groundMesh)},_getShader:function(t){var i=this._shadersMap[t];return i||(i=this._shadersMap.lambert),i.__shading=t,i},_prepareMesh:function(t,i,l,f,c){for(var p=0,y=0,x=0,w=0,E=f;E<c;E++){var B=this._getRegionPolygonInfo(E),q=this._getRegionLinesInfo(E,t,this._linesMesh.geometry);p+=B.vertexCount,y+=B.triangleCount,x+=q.vertexCount,w+=q.triangleCount}var yt=this._polygonMesh,_t=yt.geometry;["position","normal","texcoord0","color"].forEach(function(Mt){_t.attributes[Mt].init(p)}),_t.indices=p>65535?new Uint32Array(y*3):new Uint16Array(y*3),yt.material.shader!==i&&yt.material.attachShader(i,!0),se.setMaterialFromModel(i.__shading,yt.material,t,l),x>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(x),this._linesMesh.geometry.setTriangleCount(w)),this._dataIndexOfVertex=new Uint32Array(p),this._vertexRangeOfDataIndex=new Uint32Array((c-f)*2)},_updateRegionMesh:function(t,i,l,f){for(var c=t.getData(),p=0,y=0,x=!1,ve=this._polygonMesh,w=this._linesMesh,E=l;E<f;E++){var B=t.getRegionModel(E),q=B.getModel("itemStyle"),yt=Xr.firstNotNull(oi(c,E),q.get("color"),"#fff"),_t=Xr.firstNotNull(vi(c,E),q.get("opacity"),1),Mt=se.parseColor(yt),Ct=se.parseColor(q.get("borderColor"));Mt[3]*=_t,Ct[3]*=_t;var Gt=Mt[3]<.99;ve.material.set("color",[1,1,1,1]),x=x||Gt;for(var Xt=Xr.firstNotNull(B.get("height",!0),t.get("regionHeight")),ne=this._updatePolygonGeometry(t,ve.geometry,E,Xt,p,y,Mt),te=p;te<ne.vertexOffset;te++)this._dataIndexOfVertex[te]=E;this._vertexRangeOfDataIndex[(E-l)*2]=p,this._vertexRangeOfDataIndex[(E-l)*2+1]=ne.vertexOffset,p=ne.vertexOffset,y=ne.triangleOffset;var qt=q.get("borderWidth"),ge=qt>0;ge&&(qt*=i.getDevicePixelRatio(),this._updateLinesGeometry(w.geometry,t,E,Xt,qt,t.coordinateSystem.transform)),w.invisible=!ge,w.material.set({color:Ct})}var ve=this._polygonMesh;ve.material.transparent=x,ve.material.depthMask=!x,ve.geometry.updateBoundingBox(),ve.frontFace=this.extrudeY?se.Mesh.CCW:se.Mesh.CW,ve.material.get("normalMap")&&ve.geometry.generateTangents(),ve.seriesIndex=t.seriesIndex,ve.on("mousemove",this._onmousemove,this),ve.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var i=t.getModel("debug.wireframe");if(i.get("show")){var l=se.parseColor(i.get("lineStyle.color")||"rgba(0,0,0,0.5)"),f=Xr.firstNotNull(i.get("lineStyle.width"),1),c=this._polygonMesh;c.geometry.generateBarycentric(),c.material.define("both","WIREFRAME_TRIANGLE"),c.material.set("wireframeLineColor",l),c.material.set("wireframeLineWidth",f)}},_onmousemove:function(t){var i=this._dataIndexOfVertex[t.triangle[0]];i==null&&(i=-1),i!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(i),this._labelsBuilder.updateLabels([i])),this._lastHoverDataIndex=i,this._polygonMesh.dataIndex=i},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,i,l){var f=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!f.get("show",!0),!this._groundMesh.invisible){var c=t.get("shading"),p=this._groundMaterials[c];p||(p=this._groundMaterials.lambert),se.setMaterialFromModel(c,p,f,l),p.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=p,this._groundMesh.material.set("color",se.parseColor(f.get("color"))),this._groundMesh.scale.set(i.size[0],i.size[2],1)}},_triangulation:function(t,i,l){this._triangulationResults=[];for(var f=[1/0,1/0,1/0],c=[-1/0,-1/0,-1/0],p=t.coordinateSystem,y=i;y<l;y++){for(var x=[],w=t.getRegionPolygonCoords(y),E=0;E<w.length;E++){var B=w[E].exterior,q=w[E].interiors,yt=[],_t=[];if(!(B.length<3)){for(var Mt=0,Ct=0;Ct<B.length;Ct++){var Gt=B[Ct];yt[Mt++]=Gt[0],yt[Mt++]=Gt[1]}for(var Ct=0;Ct<q.length;Ct++)if(!(q[Ct].length<3)){for(var Xt=yt.length/2,ne=0;ne<q[Ct].length;ne++){var Gt=q[Ct][ne];yt.push(Gt[0]),yt.push(Gt[1])}_t.push(Xt)}for(var te=pg(yt,_t),qt=new Float64Array(yt.length/2*3),ge=[],ve=[1/0,1/0,1/0],Ne=[-1/0,-1/0,-1/0],Ee=0,Ct=0;Ct<yt.length;)Si.set(ge,yt[Ct++],0,yt[Ct++]),p&&p.transform&&Si.transformMat4(ge,ge,p.transform),Si.min(ve,ve,ge),Si.max(Ne,Ne,ge),qt[Ee++]=ge[0],qt[Ee++]=ge[1],qt[Ee++]=ge[2];Si.min(f,f,ve),Si.max(c,c,Ne),x.push({points:qt,indices:te,min:ve,max:Ne})}}this._triangulationResults.push(x)}this._geoBoundingBox=[f,c]},_getRegionPolygonInfo:function(t){for(var i=this._triangulationResults[t-this._startIndex],l=0,f=0,c=0;c<i.length;c++)l+=i[c].points.length/3,f+=i[c].indices.length/3;var p=l*2+l*4,y=f*2+l*2;return{vertexCount:p,triangleCount:y}},_updatePolygonGeometry:function(t,i,l,f,c,p,y){var x=t.get("projectUVOnGround"),w=i.attributes.position,E=i.attributes.normal,B=i.attributes.texcoord0,q=i.attributes.color,yt=this._triangulationResults[l-this._startIndex],_t=q.value&&y,Mt=i.indices,Ct=this.extrudeY?1:2,Gt=this.extrudeY?2:1,Xt=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],ne=Si.mul([],this._geoBoundingBox[0],Xt),te=Si.mul([],this._geoBoundingBox[1],Xt),qt=Math.max(te[0]-ne[0],te[2]-ne[2]);function ge(Kn,pi,li){for(var ti=Kn.points,tu=ti.length,ui=[],Sa=[],Ei=0;Ei<tu;Ei+=3)ui[0]=ti[Ei],ui[Ct]=pi,ui[Gt]=ti[Ei+2],Sa[0]=(ti[Ei]*Xt[0]-ne[0])/qt,Sa[1]=(ti[Ei+2]*Xt[Gt]-ne[2])/qt,w.set(c,ui),_t&&q.set(c,y),B.set(c++,Sa)}function ve(Kn,pi,li){var ti=c;ge(Kn,pi,li);for(var tu=Kn.indices.length,ui=0;ui<tu;ui++)Mt[p*3+ui]=Kn.indices[ui]+ti;p+=Kn.indices.length/3}for(var Ne=this.extrudeY?[0,1,0]:[0,0,1],Ee=Si.negate([],Ne),Ve=0;Ve<yt.length;Ve++){var Qe=c,We=yt[Ve];ve(We,0,0),ve(We,f,0);for(var rr=We.points.length/3,fr=0;fr<rr;fr++)E.set(Qe+fr,Ee),E.set(Qe+fr+rr,Ne);for(var je=[0,3,1,1,3,2],hr=[[],[],[],[]],wr=[],Ir=[],dr=[],un=[],Pr=0,fr=0;fr<rr;fr++){for(var Zr=(fr+1)%rr,sn=(We.points[Zr*3]-We.points[fr*3])*Xt[0],Dn=(We.points[Zr*3+2]-We.points[fr*3+2])*Xt[Gt],An=Math.sqrt(sn*sn+Dn*Dn),en=0;en<4;en++){var si=en===0||en===3,Fn=(si?fr:Zr)*3;hr[en][0]=We.points[Fn],hr[en][Ct]=en>1?f:0,hr[en][Gt]=We.points[Fn+2],w.set(c+en,hr[en]),x?(un[0]=(We.points[Fn]*Xt[0]-ne[0])/qt,un[1]=(We.points[Fn+2]*Xt[Gt]-ne[Gt])/qt):(un[0]=(si?Pr:Pr+An)/qt,un[1]=(hr[en][Ct]*Xt[Ct]-ne[Ct])/qt),B.set(c+en,un)}Si.sub(wr,hr[1],hr[0]),Si.sub(Ir,hr[3],hr[0]),Si.cross(dr,wr,Ir),Si.normalize(dr,dr);for(var en=0;en<4;en++)E.set(c+en,dr),_t&&q.set(c+en,y);for(var en=0;en<6;en++)Mt[p*3+en]=je[en]+c;c+=4,p+=2,Pr+=An}}return i.dirty(),{vertexOffset:c,triangleOffset:p}},_getRegionLinesInfo:function(t,i,l){var f=0,c=0,p=i.getRegionModel(t),y=p.getModel("itemStyle"),x=y.get("borderWidth");if(x>0){var w=i.getRegionPolygonCoords(t);w.forEach(function(E){var B=E.exterior,q=E.interiors;f+=l.getPolylineVertexCount(B),c+=l.getPolylineTriangleCount(B);for(var yt=0;yt<q.length;yt++)f+=l.getPolylineVertexCount(q[yt]),c+=l.getPolylineTriangleCount(q[yt])},this)}return{vertexCount:f,triangleCount:c}},_updateLinesGeometry:function(t,i,l,f,c,p){function y(E){for(var B=new Float64Array(E.length*3),q=0,yt=[],_t=0;_t<E.length;_t++)yt[0]=E[_t][0],yt[1]=f+.1,yt[2]=E[_t][1],p&&Si.transformMat4(yt,yt,p),B[q++]=yt[0],B[q++]=yt[1],B[q++]=yt[2];return B}var x=[1,1,1,1],w=i.getRegionPolygonCoords(l);w.forEach(function(E){var B=E.exterior,q=E.interiors;t.addPolyline(y(B),x,c);for(var yt=0;yt<q.length;yt++)t.addPolyline(y(q[yt]),x,c)})},highlight:function(t){var i=this._data;if(!!i){var l=i.getItemModel(t),f=l.getModel(["emphasis","itemStyle"]),c=f.get("color"),p=Xr.firstNotNull(f.get("opacity"),vi(i,t),1);if(c==null){var y=oi(i,t);c=N.$_.lift(y,-.4)}p==null&&(p=vi(i,t));var x=se.parseColor(c);x[3]*=p,this._setColorOfDataIndex(i,t,x)}},downplay:function(t){var i=this._data;if(!!i){var l=i.getItemModel(t),f=Xr.firstNotNull(oi(i,t),l.get(["itemStyle","color"]),"#fff"),c=Xr.firstNotNull(vi(i,t),l.get(["itemStyle","opacity"]),1),p=se.parseColor(f);p[3]*=c,this._setColorOfDataIndex(i,t,p)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,i,l){if(!(i<this._startIndex&&i>this._endIndex)){i-=this._startIndex;for(var f=this._vertexRangeOfDataIndex[i*2];f<this._vertexRangeOfDataIndex[i*2+1];f++)this._polygonMesh.geometry.attributes.color.set(f,l);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};var Vl=el,ih=N.Ir.extend({type:"geo3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new Vl(i),this.groupGL=new se.Node,this._lightRoot=new se.Node,this._sceneHelper=new Hs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new Oi({zr:i.getZr()}),this._control.init()},render:function(t,i,l){this.groupGL.add(this._geo3DBuilder.rootNode);var f=t.coordinateSystem;if(!(!f||!f.viewGL)){f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL);var c=this._control;c.setViewGL(f.viewGL);var p=t.getModel("viewControl");c.setFromViewControlModel(p,0),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,i,l,0,t.getData().count());var y=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(x){x.material&&x.material[y]("fragment","SRGB_DECODE")}),c.off("update"),c.on("update",function(){l.dispatchAction({type:"geo3DChangeCamera",alpha:c.getAlpha(),beta:c.getBeta(),distance:c.getDistance(),center:c.getCenter(),from:this.uid,geo3DId:t.id})}),c.update()}},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}}),gv=F(14901),Dg={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function Ag(t,i){if(t==="world"){var l=Dg[i.name];if(l){var f=[l[0],l[1]];i.setCenter(f)}}}var bg=Vn.vec3,rl=Vn.mat4,mv=[gv.Z,Ag];function ah(t,i,l,f,c){this.name=t,this.map=i,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(l,f,c),this.transform=rl.identity(new Float64Array(16)),this.invTransform=rl.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}ah.prototype={constructor:ah,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,i,l){var f=N.Nu||N.pQ;try{this.regions=t?f(t):[]}catch(E){throw`Invalid geoJson format
`+E}i=i||{},l=l||{};for(var c=this.regions,p={},y=0;y<c.length;y++){var x=c[y].name;x=l[x]||x,c[y].name=x,p[x]=c[y],this.addGeoCoord(x,c[y].getCenter());var w=i[x];w&&c[y].transformTo(w.left,w.top,w.width,w.height)}this._regionsMap=p,this._geoRect=null,mv.forEach(function(E){E(this)},this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,i=this.regions,l=0;l<i.length;l++){var f=i[l].getBoundingRect();t=t||f.clone(),t.union(f)}return this._geoRect=t||new N.Q.KC(0,0,0,0)},addGeoCoord:function(t,i){this._nameCoordMap[t]=i},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var i=this.regions,l=0;l<i.length;l++)if(i[l].contain(t))return i[l]},setSize:function(t,i,l){this.size=[t,i,l];var f=this.getGeoBoundingRect(),c=t/f.width,p=-l/f.height,y=-t/2-f.x*c,x=l/2-f.y*p,w=this.extrudeY?[y,0,x]:[y,x,0],E=this.extrudeY?[c,1,p]:[c,p,1],B=this.transform;rl.identity(B),rl.translate(B,B,w),rl.scale(B,B,E),rl.invert(this.invTransform,B)},dataToPoint:function(t,i){i=i||[];var l=this.extrudeY?1:2,f=this.extrudeY?2:1,c=t[2];return isNaN(c)&&(c=0),i[0]=t[0],i[f]=t[1],this.altitudeAxis?i[l]=this.altitudeAxis.dataToCoord(c):i[l]=0,i[l]+=this.regionHeight,bg.transformMat4(i,i,this.transform),i},pointToData:function(t,i){}};var yv=ah;function Mg(t,i){var l=t.getBoxLayoutParams(),f=(0,Eu.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio());var c=this.getGeoBoundingRect(),p=c.width/c.height*(t.get("aspectScale")||.75),y=t.get("boxWidth"),x=t.get("boxDepth"),w=t.get("boxHeight");w==null&&(w=5),isNaN(y)&&isNaN(x)&&(y=100),isNaN(x)?x=y/p:isNaN(y)&&(y=x/p),this.setSize(y,w,x),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(w-this.regionHeight,0))}function Eg(t,i){var l=[1/0,-1/0];if(t.eachSeries(function(c){if(c.coordinateSystem===this&&c.type!=="series.map3D"){var p=c.getData(),y=c.coordDimToDataDim("alt"),x=y&&y[0];if(x){var w=p.getDataExtent(x,!0);l[0]=Math.min(l[0],w[0]),l[1]=Math.max(l[1],w[1])}}},this),l&&isFinite(l[1]-l[0])){var f=N._y.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new N.RD("altitude",f),this.resize(this.model,i)}}if(!1)var cy;var oh=0,_v={dimensions:yv.prototype.dimensions,create:function(t,i){var l=[];if(!N.FU)throw new Error("geo3D component depends on geo component");function f(c,p){var y=_v.createGeo3D(c);c.__viewGL=c.__viewGL||new la,y.viewGL=c.__viewGL,c.coordinateSystem=y,y.model=c,l.push(y),y.resize=Mg,y.resize(c,i),y.update=Eg}return t.eachComponent("geo3D",function(c,p){f(c,p)}),t.eachSeriesByType("map3D",function(c,p){var y=c.get("coordinateSystem");y==null&&(y="geo3D"),y==="geo3D"&&f(c,p)}),t.eachSeries(function(c){if(c.get("coordinateSystem")==="geo3D"){if(c.type==="series.map3D")return;var p=c.getReferringComponents("geo3D").models[0];if(p||(p=t.getComponent("geo3D")),!p)throw new Error('geo "'+Xr.firstNotNull(c.get("geo3DIndex"),c.get("geo3DId"),0)+'" not found');c.coordinateSystem=p.coordinateSystem}}),l},createGeo3D:function(t){var i=t.get("map"),l;return typeof i=="string"?(l=i,i=N.FU(i)):i&&i.features&&(i={geoJson:i}),l==null&&(l="GEO_ANONYMOUS_"+oh++),new yv(l+oh++,l,i&&i.geoJson,i&&i.specialAreas,t.get("nameMap"))}},xv=_v;function sh(t){t.registerComponentModel(dg),t.registerComponentView(ih),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"geo3D",query:i},function(f){f.setView(i)})}),t.registerCoordinateSystem("geo3D",xv)}(0,N.D$)(sh);function lh(t,i){t.id=t.id||t.name||i+""}var cs=N.tF.extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){cs.superApply(this,"init",arguments),N.D5.each(this.option.layers,function(t,i){N.D5.merge(t,this.defaultLayerOption),lh(t,i)},this)},mergeOption:function(t){var i=this.option.layers;this.option.layers=null,cs.superApply(this,"mergeOption",arguments);function l(y){return N.D5.reduce(y,function(x,w,E){return lh(w,E),x[w.id]=w,x},{})}if(i&&i.length){var f=l(t.layers),c=l(i);for(var p in f)c[p]?N.D5.merge(c[p],f[p],!0):i.push(t.layers[p]);this.option.layers=i}N.D5.each(this.option.layers,function(y){N.D5.merge(y,this.defaultLayerOption)},this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),i=this.get("displacementScale");return(!t||t==="none")&&(i=0),i},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),i=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==i,this._displacementTexture=t,this._displacementScale=i},isDisplacementChanged:function(){return this._displacementChanged}});N.D5.merge(cs.prototype,jo),N.D5.merge(cs.prototype,Jo),N.D5.merge(cs.prototype,Ha),N.D5.merge(cs.prototype,Js);var Cg=cs,Sv=Math.PI,zi=Math.sin,Qa=Math.cos,ku=Math.tan,Zl=Math.asin,uh=Math.atan2,_a=Sv/180,Tv=1e3*60*60*24,Pg=2440588,Lg=2451545;function fh(t){return t.valueOf()/Tv-.5+Pg}function Ig(t){return fh(t)-Lg}var Vu=_a*23.4397;function hh(t,i){return uh(zi(t)*Qa(Vu)-ku(i)*zi(Vu),Qa(t))}function wv(t,i){return Zl(zi(i)*Qa(Vu)+Qa(i)*zi(Vu)*zi(t))}function Dv(t,i,l){return uh(zi(t),Qa(t)*zi(i)-ku(l)*Qa(i))}function Rg(t,i,l){return Zl(zi(i)*zi(l)+Qa(i)*Qa(l)*Qa(t))}function Wl(t,i){return _a*(280.16+360.9856235*t)-i}function Hl(t){return _a*(357.5291+.98560028*t)}function Av(t){var i=_a*(1.9148*zi(t)+.02*zi(2*t)+3e-4*zi(3*t)),l=_a*102.9372;return t+i+l+Sv}function ch(t){var i=Hl(t),l=Av(i);return{dec:wv(l,0),ra:hh(l,0)}}var vh={};vh.getPosition=function(t,i,l){var f=_a*-l,c=_a*i,p=Ig(t),y=ch(p),x=Wl(p,f)-y.ra;return{azimuth:Dv(x,c,y.dec),altitude:Rg(x,c,y.dec)}};var Og=vh,Ng=`@export ecgl.atmosphere.vertex
attribute vec3 position: POSITION;
attribute vec3 normal : NORMAL;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;

varying vec3 v_Normal;

void main() {
 v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);
 gl_Position = worldViewProjection * vec4(position, 1.0);
}
@end


@export ecgl.atmosphere.fragment
uniform mat4 viewTranspose: VIEWTRANSPOSE;
uniform float glowPower;
uniform vec3 glowColor;

varying vec3 v_Normal;

void main() {
 float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);
 gl_FragColor = vec4(glowColor, intensity * intensity);
}
@end`;se.Shader.import(Dc),se.Shader.import(Ng);var nl=N.Ir.extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,i){this.groupGL=new se.Node,this._sphereGeometry=new se.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new se.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new se.PlaneGeometry,this._earthMesh=new se.Mesh({renderNormal:!0}),this._atmosphereMesh=new se.Mesh,this._atmosphereGeometry=new se.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new se.Material({shader:new se.Shader(se.Shader.source("ecgl.atmosphere.vertex"),se.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=se.Mesh.CW,this._lightRoot=new se.Node,this._sceneHelper=new Hs,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new Oi({zr:i.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,i,l){var f=t.coordinateSystem,c=t.get("shading");f.viewGL.add(this._lightRoot),t.get("show")?f.viewGL.add(this.groupGL):f.viewGL.remove(this.groupGL),this._sceneHelper.setScene(f.viewGL.scene),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._earthMesh;p.geometry=this._sphereGeometry;var y="ecgl."+c;(!p.material||p.material.shader.name!==y)&&(p.material=se.createMaterial(y)),se.setMaterialFromModel(c,p.material,t,l),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach(function(q){var yt=p.material.get(q);yt&&(yt.flipY=!1)}),p.material.set("color",se.parseColor(t.get("baseColor")));var x=f.radius*.99;if(p.scale.set(x,x,x),t.get("atmosphere.show")){p.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),p.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var w=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(x+w,x+w,x+w)}else p.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var E=p.material.setTextureImage("diffuseMap",t.get("baseTexture"),l,{flipY:!1,anisotropic:8});E&&E.surface&&E.surface.attachToMesh(p);var B=p.material.setTextureImage("bumpMap",t.get("heightTexture"),l,{flipY:!1,anisotropic:8});B&&B.surface&&B.surface.attachToMesh(p),p.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,l),this._displaceVertices(t,l),this._updateViewControl(t,l),this._updateLayers(t,l)},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l)},_updateLayers:function(t,i){var l=t.coordinateSystem,f=t.get("layers"),c=l.radius,p=[],y=[],x=[],w=[];N.D5.each(f,function(_t){var Mt=new N.Hn(_t),Ct=Mt.get("type"),Gt=se.loadTexture(Mt.get("texture"),i,{flipY:!1,anisotropic:8});if(Gt.surface&&Gt.surface.attachToMesh(this._earthMesh),Ct==="blend"){var Xt=Mt.get("blendTo"),ne=Xr.firstNotNull(Mt.get("intensity"),1);Xt==="emission"?(x.push(Gt),w.push(ne)):(p.push(Gt),y.push(ne))}else{var te=Mt.get("id"),qt=this._layerMeshes[te];qt||(qt=this._layerMeshes[te]=new se.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var ge=Mt.get("shading");ge==="lambert"?(qt.material=qt.__lambertMaterial||new se.Material({autoUpdateTextureStatus:!1,shader:se.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),qt.__lambertMaterial=qt.material):(qt.material=qt.__colorMaterial||new se.Material({autoUpdateTextureStatus:!1,shader:se.createShader("ecgl.color"),transparent:!0,depthMask:!1}),qt.__colorMaterial=qt.material),qt.material.enableTexture("diffuseMap");var ve=Mt.get("distance"),Ne=c+(ve??l.radius/100);qt.scale.set(Ne,Ne,Ne),c=Ne;var Ee=this._blankTexture||(this._blankTexture=se.createBlankTexture("rgba(255, 255, 255, 0)"));qt.material.set("diffuseMap",Ee),se.loadTexture(Mt.get("texture"),i,{flipY:!1,anisotropic:8},function(Ve){Ve.surface&&Ve.surface.attachToMesh(qt),qt.material.set("diffuseMap",Ve),i.getZr().refresh()}),Mt.get("show")?this.groupGL.add(qt):this.groupGL.remove(qt)}},this);var E=this._earthMesh.material;E.define("fragment","LAYER_DIFFUSEMAP_COUNT",p.length),E.define("fragment","LAYER_EMISSIVEMAP_COUNT",x.length),E.set("layerDiffuseMap",p),E.set("layerDiffuseIntensity",y),E.set("layerEmissiveMap",x),E.set("layerEmissionIntensity",w);var B=t.getModel("debug.wireframe");if(B.get("show")){E.define("both","WIREFRAME_TRIANGLE");var q=se.parseColor(B.get("lineStyle.color")||"rgba(0,0,0,0.5)"),yt=Xr.firstNotNull(B.get("lineStyle.width"),1);E.set("wireframeLineWidth",yt),E.set("wireframeLineColor",q)}else E.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,i){var l=t.coordinateSystem,f=t.getModel("viewControl"),c=l.viewGL.camera,p=this;function y(){return{type:"globeChangeCamera",alpha:x.getAlpha(),beta:x.getBeta(),distance:x.getDistance()-l.radius,center:x.getCenter(),from:p.uid,globeId:t.id}}var x=this._control;x.setViewGL(l.viewGL);var w=f.get("targetCoord"),E,B;w!=null&&(B=w[0]+90,E=w[1]),x.setFromViewControlModel(f,{baseDistance:l.radius,alpha:E,beta:B}),x.off("update"),x.on("update",function(){i.dispatchAction(y())})},_displaceVertices:function(t,i){var l=t.get("displacementQuality"),f=t.get("debug.wireframe.show"),c=t.coordinateSystem;if(!(!t.isDisplacementChanged()&&l===this._displacementQuality&&f===this._showDebugWireframe)){this._displacementQuality=l,this._showDebugWireframe=f;var p=this._sphereGeometry,y={low:100,medium:200,high:400,ultra:800}[l]||200,x=y/2;(p.widthSegments!==y||f)&&(p.widthSegments=y,p.heightSegments=x,p.build()),this._doDisplaceVertices(p,c),f&&p.generateBarycentric()}},_doDisplaceVertices:function(t,i){var l=t.attributes.position.value,f=t.attributes.texcoord0.value,c=t.__originalPosition;(!c||c.length!==l.length)&&(c=new Float32Array(l.length),c.set(l),t.__originalPosition=c);for(var p=i.displacementWidth,y=i.displacementHeight,x=i.displacementData,w=0;w<t.vertexCount;w++){var E=w*3,B=w*2,q=c[E+1],yt=c[E+2],_t=c[E+3],Mt=f[B++],Ct=f[B++],Gt=Math.round(Mt*(p-1)),Xt=Math.round(Ct*(y-1)),ne=Xt*p+Gt,te=x?x[ne]:0;l[E+1]=q+q*te,l[E+2]=yt+yt*te,l[E+3]=_t+_t*te}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,i){var l=this._earthMesh;this._sceneHelper.updateLight(t);var f=this._sceneHelper.mainLight,c=t.get("light.main.time")||new Date,p=Og.getPosition(N.Rx.parseDate(c),0,0),y=Math.cos(p.altitude);f.position.y=-y*Math.cos(p.azimuth),f.position.x=Math.sin(p.altitude),f.position.z=y*Math.sin(p.azimuth),f.lookAt(l.getWorldPosition())},dispose:function(t,i){this.groupGL.removeAll(),this._control.dispose()}}),Bg=Vn.vec3;function dh(t){this.radius=t,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}dh.prototype={constructor:dh,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,i,l){this.displacementData=t,this.displacementWidth=i,this.displacementHeight=l},_getDisplacementScale:function(t,i){var l=(t+180)/360*(this.displacementWidth-1),f=(90-i)/180*(this.displacementHeight-1),c=Math.round(l)+Math.round(f)*this.displacementWidth;return this.displacementData[c]},dataToPoint:function(t,i){var l=t[0],f=t[1],c=t[2]||0,p=this.radius;this.displacementData&&(p*=1+this._getDisplacementScale(l,f)),this.altitudeAxis&&(p+=this.altitudeAxis.dataToCoord(c)),l=l*Math.PI/180,f=f*Math.PI/180;var y=Math.cos(f)*p;return i=i||[],i[0]=-y*Math.cos(l+Math.PI),i[1]=Math.sin(f)*p,i[2]=y*Math.sin(l+Math.PI),i},pointToData:function(t,i){var l=t[0],f=t[1],c=t[2],p=Bg.len(t);l/=p,f/=p,c/=p;var y=Math.asin(f),x=Math.atan2(c,-l);x<0&&(x=Math.PI*2+x);var w=y*180/Math.PI,E=x*180/Math.PI-180;return i=i||[],i[0]=E,i[1]=w,i[2]=p-this.radius,this.altitudeAxis&&(i[2]=this.altitudeAxis.coordToData(i[2])),i}};var bv=dh;function Fg(t,i){var l=document.createElement("canvas"),f=l.getContext("2d"),c=t.width,p=t.height;l.width=c,l.height=p,f.drawImage(t,0,0,c,p);for(var y=f.getImageData(0,0,c,p).data,x=new Float32Array(y.length/4),w=0;w<y.length/4;w++){var E=y[w*4];x[w]=E/255*i}return{data:x,width:c,height:p}}function Mv(t,i){var l=t.getBoxLayoutParams(),f=(0,Eu.ME)(l,{width:i.getWidth(),height:i.getHeight()});f.y=i.getHeight()-f.y-f.height,this.viewGL.setViewport(f.x,f.y,f.width,f.height,i.getDevicePixelRatio()),this.radius=t.get("globeRadius");var c=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,c-this.radius)}function ph(t,i){var l=[1/0,-1/0];if(t.eachSeries(function(c){if(c.coordinateSystem===this){var p=c.getData(),y=c.coordDimToDataDim("alt"),x=y&&y[0];if(x){var w=p.getDataExtent(x,!0);l[0]=Math.min(l[0],w[0]),l[1]=Math.max(l[1],w[1])}}},this),l&&isFinite(l[1]-l[0])){var f=N._y.createScale(l,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new N.RD("altitude",f),this.resize(this.model,i)}}var Ev={dimensions:bv.prototype.dimensions,create:function(t,i){var l=[];return t.eachComponent("globe",function(f){f.__viewGL=f.__viewGL||new la;var c=new bv;c.viewGL=f.__viewGL,f.coordinateSystem=c,c.model=f,l.push(c),c.resize=Mv,c.resize(f,i),c.update=ph}),t.eachSeries(function(f){if(f.get("coordinateSystem")==="globe"){var c=f.getReferringComponents("globe").models[0];if(c||(c=t.getComponent("globe")),!c)throw new Error('globe "'+Xr.firstNotNull(f.get("globe3DIndex"),f.get("globe3DId"),0)+'" not found');var p=c.coordinateSystem;f.coordinateSystem=p}}),t.eachComponent("globe",function(f,c){var p=f.coordinateSystem,y=f.getDisplacementTexture(),x=f.getDisplacemenScale();if(f.isDisplacementChanged()){if(f.hasDisplacement()){var w=!0;se.loadTexture(y,i,function(E){var B=E.image,q=Fg(B,x);f.setDisplacementData(q.data,q.width,q.height),w||i.dispatchAction({type:"globeUpdateDisplacment"})}),w=!1}else p.setDisplacementData(null,0,0);p.setDisplacementData(f.displacementData,f.displacementWidth,f.displacementHeight)}}),l}},vy=Ev;function gh(t){t.registerComponentModel(Cg),t.registerComponentView(nl),t.registerCoordinateSystem("globe",vy),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"globe",query:i},function(f){f.setView(i)})}),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},function(i,l){})}(0,N.D$)(gh);var Cv=["zoom","center","pitch","bearing"],mh=N.tF.extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return Cv.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMapboxCameraOption:function(t){t!=null&&Cv.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});N.D5.merge(mh.prototype,Jo),N.D5.merge(mh.prototype,Ha);var yh=mh;function $a(t,i){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}$a.prototype.setUnpainted=function(){},$a.prototype.resize=function(){this._mapbox.resize()},$a.prototype.getMapbox=function(){return this._mapbox},$a.prototype.clear=function(){},$a.prototype.refresh=function(){this._mapbox.resize()};var _h=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];$a.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},_h.forEach(function(i){this._handlers[i]=function(l){var f={};for(var c in l)f[c]=l[c];f.bubbles=!1;var p=new l.constructor(l.type,f);t.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},$a.prototype.dispose=function(){_h.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this)};var zg=$a,Zu=`
@export ecgl.displayShadow.vertex

@import ecgl.common.transformUniforms

@import ecgl.common.uv.header

@import ecgl.common.attributes

varying vec3 v_WorldPosition;

varying vec3 v_Normal;

void main()
{
 @import ecgl.common.uv.main
 v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);

 v_WorldPosition = (world * vec4(position, 1.0)).xyz;
 gl_Position = worldViewProjection * vec4(position, 1.0);
}

@end


@export ecgl.displayShadow.fragment

@import ecgl.common.uv.fragmentHeader

varying vec3 v_Normal;
varying vec3 v_WorldPosition;

uniform float roughness: 0.2;

#ifdef DIRECTIONAL_LIGHT_COUNT
@import clay.header.directional_light
#endif

@import ecgl.common.ssaoMap.header

@import clay.plugin.compute_shadow_map

void main()
{
 float shadow = 1.0;

 @import ecgl.common.ssaoMap.main

#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)
 float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];
 if(shadowEnabled)
 {
 computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);
 }
 for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {
 shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);
 }
#endif

 shadow *= 0.5 + ao * 0.5;
 shadow = clamp(shadow, 0.0, 1.0);

 gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);
}

@end`;se.Shader.import(Zu);var dy=512,xh=N.Ir.extend({type:"mapbox3D",__ecgl__:!0,init:function(t,i){var l=i.getZr();this._zrLayer=new zg("mapbox3D",l),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new se.Node,this._sceneHelper=new Hs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMapbox(),c=this._dispatchInteractAction.bind(this,i,f);["zoom","rotate","drag","pitch","rotate","move"].forEach(function(p){f.on(p,c)}),this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.displayShadow.vertex"),fragment:se.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,i,l){var f=this._zrLayer.getMapbox(),c=t.get("style"),p=JSON.stringify(c);p!==this._oldStyleStr&&c&&f.setStyle(c),this._oldStyleStr=p,f.setCenter(t.get("center")),f.setZoom(t.get("zoom")),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMapbox(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:i.getPitch(),zoom:i.getZoom(),center:i.getCenter().toArray(),bearing:i.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new se.Plane(new se.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new se.Vector2(-1,-1)),c=t.viewGL.camera.castRay(new se.Vector2(1,1)),p=f.intersectPlane(l),y=c.intersectPlane(l),x=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(x,x,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}}),_o=Vn.mat4,Xl=512,Wu=.6435011087932844,Gi=Math.PI,xo=1/10;function Yl(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}Yl.prototype={constructor:Yl,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,Xl)),this._initialZoom==null&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(!!this.height){var t=.5/Math.tan(Wu/2)*this.height*xo,i=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,l=Wu/2,f=Math.PI/2+i,c=Math.sin(l)*t/Math.sin(Math.PI-f-l),p=Math.cos(Math.PI/2-i)*c+t,y=p*1.1;this.pitch>50&&(y=1e3);var x=[];_o.perspective(x,Wu,this.width/this.height,1,y),this.viewGL.camera.projectionMatrix.setArray(x),this.viewGL.camera.decomposeProjectionMatrix();var x=_o.identity([]),w=this.dataToPoint(this.center);_o.scale(x,x,[1,-1,1]),_o.translate(x,x,[0,0,-t]),_o.rotateX(x,x,i),_o.rotateZ(x,x,-this.bearing/180*Math.PI),_o.translate(x,x,[-w[0]*this.getScale()*xo,-w[1]*this.getScale()*xo,0]),this.viewGL.camera.viewMatrix.array=x;var E=[];_o.invert(E,x),this.viewGL.camera.worldTransform.array=E,this.viewGL.camera.decomposeWorldTransform();var B=Xl*this.getScale(),q;if(this.altitudeExtent&&!isNaN(this.boxHeight)){var yt=this.altitudeExtent[1]-this.altitudeExtent[0];q=this.boxHeight/yt*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else q=B/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*xo;this.viewGL.rootNode.scale.set(this.getScale()*xo,this.getScale()*xo,q)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,i){return this.projectOnTileWithScale(t,this.getScale()*Xl,i)},projectOnTileWithScale:function(t,i,l){var f=t[0],c=t[1],p=f*Gi/180,y=c*Gi/180,x=i*(p+Gi)/(2*Gi),w=i*(Gi-Math.log(Math.tan(Gi/4+y*.5)))/(2*Gi);return l=l||[],l[0]=x,l[1]=w,l},unprojectFromTile:function(t,i){return this.unprojectOnTileWithScale(t,this.getScale()*Xl,i)},unprojectOnTileWithScale:function(t,i,l){var f=t[0],c=t[1],p=f/i*(2*Gi)-Gi,y=2*(Math.atan(Math.exp(Gi-c/i*(2*Gi)))-Gi/4);return l=l||[],l[0]=p*180/Gi,l[1]=y*180/Gi,l},dataToPoint:function(t,i){return i=this.projectOnTileWithScale(t,Xl,i),i[0]-=this._origin[0],i[1]-=this._origin[1],i[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(i[2]=t[2],this.altitudeExtent&&(i[2]-=this.altitudeExtent[0])),i}};var il=Yl;function vs(){il.apply(this,arguments)}vs.prototype=new il,vs.prototype.constructor=vs,vs.prototype.type="mapbox3D";var Sh=vs;function ds(t,i,l){function f(p,y){var x=y.getWidth(),w=y.getHeight(),E=y.getDevicePixelRatio();this.viewGL.setViewport(0,0,x,w,E),this.width=x,this.height=w,this.altitudeScale=p.get("altitudeScale"),this.boxHeight=p.get("boxHeight")}function c(p,y){if(this.model.get("boxHeight")!=="auto"){var x=[1/0,-1/0];p.eachSeries(function(w){if(w.coordinateSystem===this){var E=w.getData(),B=w.coordDimToDataDim("alt")[0];if(B){var q=E.getDataExtent(B,!0);x[0]=Math.min(x[0],q[0]),x[1]=Math.max(x[1],q[1])}}},this),x&&isFinite(x[1]-x[0])&&(this.altitudeExtent=x)}}return{dimensions:i.prototype.dimensions,create:function(p,y){var x=[];return p.eachComponent(t,function(w){var E=w.__viewGL;E||(E=w.__viewGL=new la,E.setRootNode(new se.Node));var B=new i;B.viewGL=w.__viewGL,B.resize=f,B.resize(w,y),x.push(B),w.coordinateSystem=B,B.model=w,B.update=c}),p.eachSeries(function(w){if(w.get("coordinateSystem")===t){var E=w.getReferringComponents(t).models[0];if(E||(E=p.getComponent(t)),!E)throw new Error(t+' "'+Xr.firstNotNull(w.get(t+"Index"),w.get(t+"Id"),0)+'" not found');w.coordinateSystem=E.coordinateSystem}}),l&&l(x,p,y),x}}}var Th=ds("mapbox3D",Sh,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMapboxCameraOption())})}),Pv=Th;function Lv(t){t.registerComponentModel(yh),t.registerComponentView(xh),t.registerCoordinateSystem("mapbox3D",Pv),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},function(i,l){l.eachComponent({mainType:"mapbox3D",query:i},function(f){f.setMapboxCameraOption(i)})})}(0,N.D$)(Lv);var Hu=["zoom","center","pitch","bearing"],Xu=N.tF.extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return Hu.reduce(function(i,l){return i[l]=t.get(l),i},{})},setMaptalksCameraOption:function(t){t!=null&&Hu.forEach(function(i){t[i]!=null&&(this.option[i]=t[i])},this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});N.D5.merge(Xu.prototype,Jo),N.D5.merge(Xu.prototype,Ha);var Gg=Xu;function So(t,i,l,f){if(this.id=t,this.zr=i,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:l,zoom:f,doubleClickZoom:!1,fog:!1}),this._initEvents()}So.prototype.setUnpainted=function(){},So.prototype.resize=function(){this._maptalks.checkSize()},So.prototype.getMaptalks=function(){return this._maptalks},So.prototype.clear=function(){},So.prototype.refresh=function(){this._maptalks.checkSize()};var Iv=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];So.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(i){return i.preventDefault(),!1}},Iv.forEach(function(i){this._handlers[i]=function(l){var f={};for(var c in l)f[c]=l[c];f.bubbles=!1;var p=new l.constructor(l.type,f);i==="mousewheel"||i==="DOMMouseScroll"?t.dispatchEvent(p):t.firstElementChild.dispatchEvent(p)},this.zr.dom.addEventListener(i,this._handlers[i])},this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},So.prototype.dispose=function(){Iv.forEach(function(t){this.zr.dom.removeEventListener(t,this._handlers[t])},this),this._maptalks.remove()};var Rv=So;se.Shader.import(Zu);var Ov=N.Ir.extend({type:"maptalks3D",__ecgl__:!0,init:function(t,i){this._groundMesh=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.displayShadow.vertex"),fragment:se.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,i){var l=i.getZr();this._zrLayer=new Rv("maptalks3D",l,t.get("center"),t.get("zoom")),l.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new se.Node,this._sceneHelper=new Hs(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var f=this._zrLayer.getMaptalks(),c=this._dispatchInteractAction.bind(this,i,f);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach(function(p){f.on(p,c)})},render:function(t,i,l){this._zrLayer||this._initMaptalksLayer(t,l);var f=this._zrLayer.getMaptalks(),c=t.get("urlTemplate"),p=f.getBaseLayer();c!==this._oldUrlTemplate&&(p?p.setOptions({urlTemplate:c,attribution:t.get("attribution")}):(p=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:c,subdomains:["a","b","c"],attribution:t.get("attribution")}),f.setBaseLayer(p))),this._oldUrlTemplate=c,f.setCenter(t.get("center")),f.setZoom(t.get("zoom"),{animation:!1}),f.setPitch(t.get("pitch")),f.setBearing(t.get("bearing")),t.setMaptalks(f);var y=t.coordinateSystem;y.viewGL.scene.add(this._lightRoot),y.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(y.viewGL.scene),this._sceneHelper.updateLight(t),y.viewGL.setPostEffect(t.getModel("postEffect"),l),y.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,i,l,f){var c=f.renderer;this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l),t.coordinateSystem.viewGL.scene.traverse(function(p){p.material&&(p.material.define("fragment","NORMAL_UP_AXIS",2),p.material.define("fragment","NORMAL_FRONT_AXIS",1))})},updateCamera:function(t,i,l,f){t.coordinateSystem.setCameraOption(f),this._updateGroundMesh(),l.getZr().refresh()},_dispatchInteractAction:function(t,i,l){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:i.getPitch(),zoom:kg(i.getResolution())+1,center:i.getCenter().toArray(),bearing:i.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,i=t.dataToPoint(t.center);this._groundMesh.position.set(i[0],i[1],-.001);var l=new se.Plane(new se.Vector3(0,0,1),0),f=t.viewGL.camera.castRay(new se.Vector2(-1,-1)),c=t.viewGL.camera.castRay(new se.Vector2(1,1)),p=f.intersectPlane(l),y=c.intersectPlane(l),x=p.dist(y)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(x,x,1)}},dispose:function(t,i){this._zrLayer&&this._zrLayer.dispose(),i.getZr().painter.delLayer(-1e3)}});const Ug=2*6378137*Math.PI/(256*Math.pow(2,20));function kg(t){return 19-Math.log(t/Ug)/Math.LN2}function Kl(){il.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Kl.prototype=new il,Kl.prototype.constructor=Kl,Kl.prototype.type="maptalks3D";var Vg=Kl,Zg=ds("maptalks3D",Vg,function(t){t.forEach(function(i){i.setCameraOption(i.model.getMaptalksCameraOption())})}),Wg=Zg;function Hg(t){t.registerComponentModel(Gg),t.registerComponentView(Ov),t.registerCoordinateSystem("maptalks3D",Wg),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},function(i,l){l.eachComponent({mainType:"maptalks3D",query:i},function(f){f.setMaptalksCameraOption(i)})})}(0,N.D$)(Hg);var Xg=Vn.vec3,Yg=N._y.dataStack.isDimensionStacked;function Yu(t){var i=t[0],l=t[1];return!(i>0&&l>0||i<0&&l<0)}function Kg(t,i){var l=t.getData(),f=t.get("barSize");if(f==null){var c=i.size,p,y,x=i.getAxis("x"),w=i.getAxis("y");x.type==="category"?p=x.getBandWidth()*.7:p=Math.round(c[0]/Math.sqrt(l.count()))*.6,w.type==="category"?y=w.getBandWidth()*.7:y=Math.round(c[1]/Math.sqrt(l.count()))*.6,f=[p,y]}else N.D5.isArray(f)||(f=[f,f]);var E=i.getAxis("z").scale.getExtent(),B=Yu(E),q=["x","y","z"].map(function(Mt){return t.coordDimToDataDim(Mt)[0]}),yt=Yg(l,q[2]),_t=yt?l.getCalculationInfo("stackResultDimension"):q[2];l.each(q,function(Mt,Ct,Gt,Xt){var ne=l.get(_t,Xt),te=yt?ne-Gt:B?0:E[0],qt=i.dataToPoint([Mt,Ct,te]),ge=i.dataToPoint([Mt,Ct,ne]),ve=Xg.dist(qt,ge),Ne=[0,ge[1]<qt[1]?-1:1,0];Math.abs(ve)===0&&(ve=.1);var Ee=[f[0],ve,f[1]];l.setItemLayout(Xt,[qt,Ne,Ee])}),l.setLayout("orient",[1,0,0])}var jg=Kg;function wh(t,i,l){for(var f=t.getDataExtent(i),c=t.getDataExtent(l),p=f[1]-f[0]||f[0],y=c[1]-c[0]||c[0],x=50,w=new Uint8Array(x*x),E=0;E<t.count();E++){var B=t.get(i,E),q=t.get(l,E),yt=Math.floor((B-f[0])/p*(x-1)),_t=Math.floor((q-c[0])/y*(x-1)),Mt=_t*x+yt;w[Mt]=w[Mt]||1}for(var Ct=0,E=0;E<w.length;E++)w[E]&&Ct++;return Ct/w.length}var Nv=Vn.vec3,Jg=N._y.dataStack.isDimensionStacked;function Qg(t,i){var l=t.getData(),f=t.get("minHeight")||0,c=t.get("barSize"),p=["lng","lat","alt"].map(function(E){return t.coordDimToDataDim(E)[0]});if(c==null){var y=i.radius*Math.PI,x=wh(l,p[0],p[1]);c=[y/Math.sqrt(l.count()/x),y/Math.sqrt(l.count()/x)]}else N.D5.isArray(c)||(c=[c,c]);var w=Dh(l,p);l.each(p,function(E,B,q,yt){var _t=l.get(w.dimension,yt),Mt=w.isStacked?_t-q:i.altitudeAxis.scale.getExtent()[0],Ct=Math.max(i.altitudeAxis.dataToCoord(q),f),Gt=i.dataToPoint([E,B,Mt]),Xt=i.dataToPoint([E,B,_t]),ne=Nv.sub([],Xt,Gt);Nv.normalize(ne,ne);var te=[c[0],Ct,c[1]];l.setItemLayout(yt,[Gt,ne,te])}),l.setLayout("orient",ur.UP.array)}function $g(t,i){var l=t.getData(),f=t.get("barSize"),c=t.get("minHeight")||0,p=["lng","lat","alt"].map(function(B){return t.coordDimToDataDim(B)[0]});if(f==null){var y=Math.min(i.size[0],i.size[2]),x=wh(l,p[0],p[1]);f=[y/Math.sqrt(l.count()/x),y/Math.sqrt(l.count()/x)]}else N.D5.isArray(f)||(f=[f,f]);var w=[0,1,0],E=Dh(l,p);l.each(p,function(B,q,yt,_t){var Mt=l.get(E.dimension,_t),Ct=E.isStacked?Mt-yt:i.altitudeAxis.scale.getExtent()[0],Gt=Math.max(i.altitudeAxis.dataToCoord(yt),c),Xt=i.dataToPoint([B,q,Ct]),ne=[f[0],Gt,f[1]];l.setItemLayout(_t,[Xt,w,ne])}),l.setLayout("orient",[1,0,0])}function qg(t,i){var l=t.getData(),f=t.coordDimToDataDim("lng")[0],c=t.coordDimToDataDim("lat")[0],p=t.coordDimToDataDim("alt")[0],y=t.get("barSize"),x=t.get("minHeight")||0;if(y==null){var w=l.getDataExtent(f),E=l.getDataExtent(c),B=i.dataToPoint([w[0],E[0]]),q=i.dataToPoint([w[1],E[1]]),yt=Math.min(Math.abs(B[0]-q[0]),Math.abs(B[1]-q[1]))||1,_t=wh(l,f,c);y=[yt/Math.sqrt(l.count()/_t),yt/Math.sqrt(l.count()/_t)]}else N.D5.isArray(y)||(y=[y,y]),y[0]/=i.getScale()/16,y[1]/=i.getScale()/16;var Mt=[0,0,1],Ct=[f,c,p],Gt=Dh(l,Ct);l.each(Ct,function(Xt,ne,te,qt){var ge=l.get(Gt.dimension,qt),ve=Gt.isStacked?ge-te:0,Ne=i.dataToPoint([Xt,ne,ve]),Ee=i.dataToPoint([Xt,ne,ge]),Ve=Math.max(Ee[2]-Ne[2],x),Qe=[y[0],Ve,y[1]];l.setItemLayout(qt,[Ne,Mt,Qe])}),l.setLayout("orient",[1,0,0])}function Dh(t,i){var l=Jg(t,i[2]);return{dimension:l?t.getCalculationInfo("stackResultDimension"):i[2],isStacked:l}}function t0(t){t.registerLayout(function(i,l){i.eachSeriesByType("bar3D",function(f){var c=f.coordinateSystem,p=c&&c.type;p==="globe"?Qg(f,c):p==="cartesian3D"?jg(f,c):p==="geo3D"?$g(f,c):(p==="mapbox3D"||p==="maptalks3D")&&qg(f,c)})})}var Ah={};Ah.getFormattedLabel=function(t,i,l,f,c){l=l||"normal";var p=t.getData(f),y=p.getItemModel(i),x=t.getDataParams(i,f);c!=null&&x.value instanceof Array&&(x.value=x.value[c]);var w=y.get(l==="normal"?["label","formatter"]:["emphasis","label","formatter"]);w==null&&(w=y.get(["label","formatter"]));var E;return typeof w=="function"?(x.status=l,E=w(x)):typeof w=="string"&&(E=N.WU.formatTpl(w,x)),E},Ah.normalizeToArray=function(t){return t instanceof Array?t:t==null?[]:[t]};var al=Ah;function e0(t,i){var l=[];return N.D5.each(t.dimensions,function(f){var c=t.getDimensionInfo(f),p=c.otherDims,y=p[i];y!=null&&y!==!1&&(l[y]=c.name)}),l}function jl(t,i,l){function f(q){var yt=!0,_t=[],Mt=e0(c,"tooltip");Mt.length?N.D5.each(Mt,function(Gt){Ct(c.get(Gt,i),Gt)}):N.D5.each(q,Ct);function Ct(Gt,Xt){var ne=c.getDimensionInfo(Xt);if(!(!ne||ne.otherDims.tooltip===!1)){var te=ne.type,qt=(yt?"- "+(ne.tooltipName||ne.name)+": ":"")+(te==="ordinal"?Gt+"":te==="time"?l?"":N.WU.formatTime("yyyy/MM/dd hh:mm:ss",Gt):N.WU.addCommas(Gt));qt&&_t.push(N.WU.encodeHTML(qt))}}return(yt?"<br/>":"")+_t.join(yt?"<br/>":", ")}var c=t.getData(),p=t.getRawValue(i),y=N.D5.isArray(p)?f(p):N.WU.encodeHTML(N.WU.addCommas(p)),x=c.getName(i),w=oi(c,i);N.D5.isObject(w)&&w.colorStops&&(w=(w.colorStops[0]||{}).color),w=w||"transparent";var E=N.WU.getTooltipMarker(w),B=t.name;return B==="\0-"&&(B=""),B=B?N.WU.encodeHTML(B)+(l?": ":"<br/>"):"",l?E+B+y:B+E+(x?N.WU.encodeHTML(x)+": "+y:y)}function Ku(t,i,l){l=l||t.getSource();var f=i||N.wL(t.get("coordinateSystem"))||["x","y","z"],c=N._y.createDimensions(l,{dimensionsDefine:l.dimensionsDefine||t.get("dimensions"),encodeDefine:l.encodeDefine||t.get("encode"),coordDimensions:f.map(function(x){var w=t.getReferringComponents(x+"Axis3D").models[0];return{type:w&&w.get("type")==="category"?"ordinal":"float",name:x}})});t.get("coordinateSystem")==="cartesian3D"&&c.forEach(function(x){if(f.indexOf(x.coordDim)>=0){var w=t.getReferringComponents(x.coordDim+"Axis3D").models[0];w&&w.get("type")==="category"&&(x.ordinalMeta=w.getOrdinalMeta())}});var p=N._y.dataStack.enableDataStack(t,c,{byIndex:!0,stackedCoordDimension:"z"}),y=new N.aV(c,t);return y.setCalculationInfo(p),y.initData(l),y}var Bv=N.wJ.extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,i){return Ku(this)},getFormattedLabel:function(t,i,l,f){var c=al.getFormattedLabel(this,t,i,l,f);return c==null&&(c=this.getData().get("z",t)),c},formatTooltip:function(t){return jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});N.D5.merge(Bv.prototype,Js);var r0=Bv,Bn=Vn.vec3,n0=Vn.mat3,ju=$r.extend(function(){return{attributes:{position:new $r.Attribute("position","float",3,"POSITION"),normal:new $r.Attribute("normal","float",3,"NORMAL"),color:new $r.Attribute("color","float",4,"COLOR"),prevPosition:new $r.Attribute("prevPosition","float",3),prevNormal:new $r.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}},{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var i=this.enableNormal,l=this.getBarVertexCount()*t,f=this.getBarTriangleCount()*t;this.vertexCount!==l&&(this.attributes.position.init(l),i?this.attributes.normal.init(l):this.attributes.normal.value=null,this.attributes.color.init(l)),this.triangleCount!==f&&(this.indices=l>65535?new Uint32Array(f*3):new Uint16Array(f*3),this._dataIndices=new Uint32Array(l))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return(t+1)*4*(t+1)*2},_getBevelBarTriangleCount:function(t){var i=t*4+3,l=t*2+1;return(i+1)*l*2+4},setColor:function(t,i){for(var l=this.getBarVertexCount(),f=l*t,c=l*(t+1),p=f;p<c;p++)this.attributes.color.set(p,i);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=Bn.create,i=Bn.scaleAndAdd,l=t(),f=t(),c=t(),p=t(),y=t(),x=t(),w=t(),E=[],B=[],q=0;q<8;q++)E[q]=t();for(var yt=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],_t=[0,1,2,0,2,3],Mt=[],q=0;q<yt.length;q++)for(var Ct=yt[q],Gt=0;Gt<2;Gt++){for(var Xt=[],ne=0;ne<3;ne++)Xt.push(Ct[_t[Gt*3+ne]]);Mt.push(Xt)}return function(te,qt,ge,ve,Ne,Ee){var Ve=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(te,qt,ge,ve,this.bevelSize,this.bevelSegments,Ne);else{Bn.copy(c,qt),Bn.normalize(c,c),Bn.cross(p,ge,c),Bn.normalize(p,p),Bn.cross(f,c,p),Bn.normalize(p,p),Bn.negate(y,f),Bn.negate(x,c),Bn.negate(w,p),i(E[0],te,f,ve[0]/2),i(E[0],E[0],p,ve[2]/2),i(E[1],te,f,ve[0]/2),i(E[1],E[1],w,ve[2]/2),i(E[2],te,y,ve[0]/2),i(E[2],E[2],w,ve[2]/2),i(E[3],te,y,ve[0]/2),i(E[3],E[3],p,ve[2]/2),i(l,te,c,ve[1]),i(E[4],l,f,ve[0]/2),i(E[4],E[4],p,ve[2]/2),i(E[5],l,f,ve[0]/2),i(E[5],E[5],w,ve[2]/2),i(E[6],l,y,ve[0]/2),i(E[6],E[6],w,ve[2]/2),i(E[7],l,y,ve[0]/2),i(E[7],E[7],p,ve[2]/2);var Qe=this.attributes;if(this.enableNormal){B[0]=f,B[1]=y,B[2]=c,B[3]=x,B[4]=p,B[5]=w;for(var We=this._vertexOffset,rr=0;rr<yt.length;rr++){for(var fr=this._triangleOffset*3,je=0;je<6;je++)this.indices[fr++]=We+_t[je];We+=4,this._triangleOffset+=2}for(var rr=0;rr<yt.length;rr++)for(var hr=B[rr],je=0;je<4;je++){var wr=yt[rr][je];Qe.position.set(this._vertexOffset,E[wr]),Qe.normal.set(this._vertexOffset,hr),Qe.color.set(this._vertexOffset++,Ne)}}else{for(var rr=0;rr<Mt.length;rr++){for(var fr=this._triangleOffset*3,je=0;je<3;je++)this.indices[fr+je]=Mt[rr][je]+this._vertexOffset;this._triangleOffset++}for(var rr=0;rr<E.length;rr++)Qe.position.set(this._vertexOffset,E[rr]),Qe.color.set(this._vertexOffset++,Ne)}}for(var Ir=this._vertexOffset,rr=Ve;rr<Ir;rr++)this._dataIndices[rr]=Ee}}(),_addBevelBar:function(){var t=Bn.create(),i=Bn.create(),l=Bn.create(),f=n0.create(),c=[],p=[1,-1,-1,1],y=[1,1,-1,-1],x=[2,0];return function(w,E,B,q,yt,_t,Mt){Bn.copy(i,E),Bn.normalize(i,i),Bn.cross(l,B,i),Bn.normalize(l,l),Bn.cross(t,i,l),Bn.normalize(l,l),f[0]=t[0],f[1]=t[1],f[2]=t[2],f[3]=i[0],f[4]=i[1],f[5]=i[2],f[6]=l[0],f[7]=l[1],f[8]=l[2],yt=Math.min(q[0],q[2])/2*yt;for(var Ct=0;Ct<3;Ct++)c[Ct]=Math.max(q[Ct]-yt*2,0);for(var Gt=(q[0]-c[0])/2,Xt=(q[1]-c[1])/2,ne=(q[2]-c[2])/2,te=[],qt=[],ge=this._vertexOffset,ve=[],Ct=0;Ct<2;Ct++){ve[Ct]=ve[Ct]=[];for(var Ne=0;Ne<=_t;Ne++)for(var Ee=0;Ee<4;Ee++){(Ne===0&&Ct===0||Ct===1&&Ne===_t)&&ve[Ct].push(ge);for(var Ve=0;Ve<=_t;Ve++){var Qe=Ve/_t*Math.PI/2+Math.PI/2*Ee,We=Ne/_t*Math.PI/2+Math.PI/2*Ct;qt[0]=Gt*Math.cos(Qe)*Math.sin(We),qt[1]=Xt*Math.cos(We),qt[2]=ne*Math.sin(Qe)*Math.sin(We),te[0]=qt[0]+p[Ee]*c[0]/2,te[1]=qt[1]+Xt+x[Ct]*c[1]/2,te[2]=qt[2]+y[Ee]*c[2]/2,Math.abs(Gt-Xt)<1e-6&&Math.abs(Xt-ne)<1e-6||(qt[0]/=Gt*Gt,qt[1]/=Xt*Xt,qt[2]/=ne*ne),Bn.normalize(qt,qt),Bn.transformMat3(te,te,f),Bn.transformMat3(qt,qt,f),Bn.add(te,te,w),this.attributes.position.set(ge,te),this.enableNormal&&this.attributes.normal.set(ge,qt),this.attributes.color.set(ge,Mt),ge++}}}for(var rr=_t*4+3,fr=_t*2+1,je=rr+1,Ee=0;Ee<fr;Ee++)for(var Ct=0;Ct<=rr;Ct++){var hr=Ee*je+Ct+this._vertexOffset,wr=Ee*je+(Ct+1)%je+this._vertexOffset,Ir=(Ee+1)*je+(Ct+1)%je+this._vertexOffset,dr=(Ee+1)*je+Ct+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[Ir,hr,wr]),this.setTriangleIndices(this._triangleOffset++,[Ir,dr,hr])}this.setTriangleIndices(this._triangleOffset++,[ve[0][0],ve[0][2],ve[0][1]]),this.setTriangleIndices(this._triangleOffset++,[ve[0][0],ve[0][3],ve[0][2]]),this.setTriangleIndices(this._triangleOffset++,[ve[1][0],ve[1][1],ve[1][2]]),this.setTriangleIndices(this._triangleOffset++,[ve[1][0],ve[1][2],ve[1][3]]),this._vertexOffset=ge}}()});N.D5.defaults(ju.prototype,Rl),N.D5.defaults(ju.prototype,rh);var Fv=ju,zv=Vn.vec3,bh=N.TA.extend({type:"bar3D",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this._api=i,this._labelsBuilder=new nh(256,256,i);var l=this;this._labelsBuilder.getLabelPosition=function(f,c,p){if(l._data){var y=l._data.getItemLayout(f),x=y[0],w=y[1],E=y[2][1];return zv.scaleAndAdd([],x,w,p+E)}else return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,i,l){var f=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=f,this._barMesh||(this._barMesh=new se.Mesh({geometry:new Fv,shadowDepthMaterial:new se.Material({shader:new se.Shader(se.Shader.source("ecgl.sm.depth.vertex"),se.Shader.source("ecgl.sm.depth.fragment"))}),culling:t.coordinateSystem.type==="cartesian3D",renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var c=t.coordinateSystem;if(this._doRender(t,l),c&&c.viewGL){c.viewGL.add(this.groupGL);var p=c.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[p]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){se.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,i){var l=t.getData(),f=t.get("shading"),c=f!=="color",p=this,y=this._barMesh,x="ecgl."+f;(!y.material||y.material.shader.name!==x)&&(y.material=se.createMaterial(x,["VERTEX_COLOR"])),se.setMaterialFromModel(f,y.material,t,i),y.geometry.enableNormal=c,y.geometry.resetOffset();var w=t.get("bevelSize"),E=t.get("bevelSmoothness");y.geometry.bevelSegments=E,y.geometry.bevelSize=w;var B=[],q=new Float32Array(l.count()*4),yt=0,Gt=0,_t=!1;l.each(function(ne){if(!!l.hasValue(ne)){var te=oi(l,ne),qt=vi(l,ne);qt==null&&(qt=1),se.parseColor(te,B),B[3]*=qt,q[yt++]=B[0],q[yt++]=B[1],q[yt++]=B[2],q[yt++]=B[3],B[3]>0&&(Gt++,B[3]<.99&&(_t=!0))}}),y.geometry.setBarCount(Gt);var Mt=l.getLayout("orient"),Ct=this._barIndexOfData=new Int32Array(l.count()),Gt=0;l.each(function(ne){if(!l.hasValue(ne)){Ct[ne]=-1;return}var te=l.getItemLayout(ne),qt=te[0],ge=te[1],ve=te[2],Ne=ne*4;B[0]=q[Ne++],B[1]=q[Ne++],B[2]=q[Ne++],B[3]=q[Ne++],B[3]>0&&(p._barMesh.geometry.addBar(qt,ge,Mt,ve,B,ne),Ct[ne]=Gt++)}),y.geometry.dirty(),y.geometry.updateBoundingBox();var Xt=y.material;Xt.transparent=_t,Xt.depthMask=!_t,y.geometry.sortTriangles=_t,this._initHandler(t,i)},_initHandler:function(t,i){var l=t.getData(),f=this._barMesh,c=t.coordinateSystem.type==="cartesian3D";f.seriesIndex=t.seriesIndex;var p=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(y){var x=f.geometry.getDataIndexOfVertex(y.triangle[0]);x!==p&&(this._downplay(p),this._highlight(x),this._labelsBuilder.updateLabels([x]),c&&i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",x),l.get("y",x),l.get("z",x,!0)]})),p=x,f.dataIndex=x},this),f.on("mouseout",function(y){this._downplay(p),this._labelsBuilder.updateLabels(),p=-1,f.dataIndex=-1,c&&i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_highlight:function(t){var i=this._data;if(!!i){var l=this._barIndexOfData[t];if(!(l<0)){var f=i.getItemModel(t),c=f.getModel("emphasis.itemStyle"),p=c.get("color"),y=c.get("opacity");if(p==null){var x=oi(i,t);p=N.$_.lift(x,-.4)}y==null&&(y=vi(i,t));var w=se.parseColor(p);w[3]*=y,this._barMesh.geometry.setColor(l,w),this._api.getZr().refresh()}}},_downplay:function(t){var i=this._data;if(!!i){var l=this._barIndexOfData[t];if(!(l<0)){var f=oi(i,t),c=vi(i,t),p=se.parseColor(f);p[3]*=c,this._barMesh.geometry.setColor(l,p),this._api.getZr().refresh()}}},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,c){var p=i.getData(),y=Xr.queryDataIndex(p,c),x=this;y!=null?N.D5.each(al.normalizeToArray(y),function(w){t==="highlight"?this._highlight(w):this._downplay(w)},this):p.each(function(w){t==="highlight"?x._highlight(w):x._downplay(w)})},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function i0(t){t.registerChartView(bh),t.registerSeriesModel(r0),t0(t),t.registerProcessor(function(i,l){i.eachSeriesByType("bar3d",function(f){var c=f.getData();c.filterSelf(function(p){return c.hasValue(p)})})})}(0,N.D$)(i0);var a0=N.wJ.extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){return Ku(this)},formatTooltip:function(t){return jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),o0=a0,s0=F(33640),l0=Vn.vec3;se.Shader.import(Mu);var u0=N.TA.extend({type:"line3D",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this._api=i},render:function(t,i,l){var f=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=f,this._line3DMesh||(this._line3DMesh=new se.Mesh({geometry:new Qo({useNativeLine:!1,sortTriangles:!0}),material:new se.Material({shader:se.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var c=t.coordinateSystem;if(c&&c.viewGL){c.viewGL.add(this.groupGL);var p=c.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[p]("fragment","SRGB_DECODE")}this._doRender(t,l),this._data=t.getData(),this._camera=c.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,i){var l=t.getData(),f=this._line3DMesh;f.geometry.resetOffset();var c=l.getLayout("points"),p=[],y=new Float32Array(c.length/3*4),x=0,w=!1;l.each(function(q){var yt=oi(l,q),_t=vi(l,q);_t==null&&(_t=1),se.parseColor(yt,p),p[3]*=_t,y[x++]=p[0],y[x++]=p[1],y[x++]=p[2],y[x++]=p[3],p[3]<.99&&(w=!0)}),f.geometry.setVertexCount(f.geometry.getPolylineVertexCount(c)),f.geometry.setTriangleCount(f.geometry.getPolylineTriangleCount(c)),f.geometry.addPolyline(c,y,Xr.firstNotNull(t.get("lineStyle.width"),1)),f.geometry.dirty(),f.geometry.updateBoundingBox();var E=f.material;E.transparent=w,E.depthMask=!w;var B=t.getModel("debug.wireframe");B.get("show")?(f.geometry.createAttribute("barycentric","float",3),f.geometry.generateBarycentric(),f.material.set("both","WIREFRAME_TRIANGLE"),f.material.set("wireframeLineColor",se.parseColor(B.get("lineStyle.color")||"rgba(0,0,0,0.5)")),f.material.set("wireframeLineWidth",Xr.firstNotNull(B.get("lineStyle.width"),1))):f.material.set("both","WIREFRAME_TRIANGLE"),this._points=c,this._initHandler(t,i)},_updateAnimation:function(t){se.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,i){var l=t.getData(),f=t.coordinateSystem,c=this._line3DMesh,p=-1;c.seriesIndex=t.seriesIndex,c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(y){var x=f.pointToData(y.point.array),w=l.indicesOfNearest("x",x[0])[0];w!==p&&(i.dispatchAction({type:"grid3DShowAxisPointer",value:[l.get("x",w),l.get("y",w),l.get("z",w)]}),c.dataIndex=w),p=w},this),c.on("mouseout",function(y){p=-1,c.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateNDCPosition:function(){var t=new Cr,i=this._camera;Cr.multiply(t,i.projectionMatrix,i.viewMatrix);var l=this._positionNDC,f=this._points,c=f.length/3;(!l||l.length/2!==c)&&(l=this._positionNDC=new Float32Array(c*2));for(var p=[],y=0;y<c;y++){var x=y*3,w=y*2;p[0]=f[x],p[1]=f[x+1],p[2]=f[x+2],p[3]=1,l0.transformMat4(p,p,t.array),l[w]=p[0]/p[3],l[w+1]=p[1]/p[3]}},_pick:function(t,i,l,f,c,p){var y=this._positionNDC,x=this._data.hostModel,w=x.get("lineStyle.width"),E=-1,B=l.viewport.width,q=l.viewport.height,yt=B*.5,_t=q*.5;t=(t+1)*yt,i=(i+1)*_t;for(var Mt=1;Mt<y.length/2;Mt++){var Ct=(y[(Mt-1)*2]+1)*yt,Gt=(y[(Mt-1)*2+1]+1)*_t,Xt=(y[Mt*2]+1)*yt,ne=(y[Mt*2+1]+1)*_t;if(s0.m(Ct,Gt,Xt,ne,w,t,i)){var te=(Ct-t)*(Ct-t)+(Gt-i)*(Gt-i),qt=(Xt-t)*(Xt-t)+(ne-i)*(ne-i);E=te<qt?Mt-1:Mt}}if(E>=0){var ge=E*3,ve=new ur(this._points[ge],this._points[ge+1],this._points[ge+2]);p.push({dataIndex:E,point:ve,pointWorld:ve.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(ve)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function f0(t){t.registerChartView(u0),t.registerSeriesModel(o0),t.registerLayout(function(i,l){i.eachSeriesByType("line3D",function(f){var c=f.getData(),p=f.coordinateSystem;if(p){if(p.type!=="cartesian3D")return;var y=new Float32Array(c.count()*3),x=[],w=[],E=p.dimensions,B=E.map(function(q){return f.coordDimToDataDim(q)[0]});p&&c.each(B,function(q,yt,_t,Mt){x[0]=q,x[1]=yt,x[2]=_t,p.dataToPoint(x,w),y[Mt*3]=w[0],y[Mt*3+1]=w[1],y[Mt*3+2]=w[2]}),c.setLayout("points",y)}})})}(0,N.D$)(f0);var h0=N.wJ.extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,i){return Ku(this)},getFormattedLabel:function(t,i,l,f){var c=al.getFormattedLabel(this,t,i,l,f);if(c==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];c=p.get(y,t)}return c},formatTooltip:function(t){return jl(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Mh(t,f,l){var f=f||document.createElement("canvas");f.width=t,f.height=t;var c=f.getContext("2d");return l&&l(c),f}function c0(t,i,l,f){N.D5.isArray(i)||(i=[i,i]);var c=Eh.getMarginByStyle(l,f),p=i[0]+c.left+c.right,y=i[1]+c.top+c.bottom,x=N._y.createSymbol(t,0,0,i[0],i[1]),w=Math.max(p,y);x.x=c.left,x.y=c.top,p>y?x.y+=(w-y)/2:x.x+=(w-p)/2;var E=x.getBoundingRect();return x.x-=E.x,x.y-=E.y,x.setStyle(l),x.update(),x.__size=w,x}function v0(t,i,l){var f=i.width,c=i.height,p=t.canvas.width,y=t.canvas.height,x=f/p,w=c/y;function E(Xt){return Xt<128?1:-1}function B(Xt,ne){var te=1/0;Xt=Math.floor(Xt*x),ne=Math.floor(ne*w);for(var qt=ne*f+Xt,ge=i.data[qt*4],ve=E(ge),Ne=Math.max(ne-l,0);Ne<Math.min(ne+l,c);Ne++)for(var Ee=Math.max(Xt-l,0);Ee<Math.min(Xt+l,f);Ee++){var qt=Ne*f+Ee,Ve=i.data[qt*4],Qe=E(Ve),We=Ee-Xt,rr=Ne-ne;if(ve!==Qe){var fr=We*We+rr*rr;fr<te&&(te=fr)}}return ve*Math.sqrt(te)}for(var q=t.createImageData(p,y),yt=0;yt<y;yt++)for(var _t=0;_t<p;_t++){var Mt=B(_t,yt),Ct=Mt/l*.5+.5,Gt=(yt*p+_t)*4;q.data[Gt++]=(1-Ct)*255,q.data[Gt++]=(1-Ct)*255,q.data[Gt++]=(1-Ct)*255,q.data[Gt++]=255}return q}var Eh={getMarginByStyle:function(t){var i=t.minMargin||0,l=0;t.stroke&&t.stroke!=="none"&&(l=t.lineWidth==null?1:t.lineWidth);var f=t.shadowBlur||0,c=t.shadowOffsetX||0,p=t.shadowOffsetY||0,y={};return y.left=Math.max(l/2,-c+f,i),y.right=Math.max(l/2,c+f,i),y.top=Math.max(l/2,-p+f,i),y.bottom=Math.max(l/2,p+f,i),y},createSymbolSprite:function(t,i,l,f){var c=c0(t,i,l),p=Eh.getMarginByStyle(l);return{image:Mh(c.__size,f,function(y){N.z$(y,c)}),margin:p}},createSDFFromCanvas:function(t,i,l,f){return Mh(i,f,function(c){var p=t.getContext("2d"),y=p.getImageData(0,0,t.width,t.height);c.putImageData(v0(c,y,l),0,0)})},createSimpleSprite:function(t,i){return Mh(t,i,function(l){var f=t/2;l.beginPath(),l.arc(f,f,60,0,Math.PI*2,!1),l.closePath();var c=l.createRadialGradient(f,f,0,f,f,f);c.addColorStop(0,"rgba(255, 255, 255, 1)"),c.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),c.addColorStop(1,"rgba(255, 255, 255, 0)"),l.fillStyle=c,l.fill()})}},Gv=Eh,Uv=Vn.vec3,d0={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,i){var l=this.indices,f=Uv.create();if(!l){l=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var c=0;c<l.length;c++)l[c]=c}if(i===0){var p=this.attributes.position,t=t.array,y=0;(!this._zList||this._zList.length!==this.vertexCount)&&(this._zList=new Float32Array(this.vertexCount));for(var x,c=0;c<this.vertexCount;c++){p.get(c,f);var w=Uv.sqrDist(f,t);isNaN(w)&&(w=1e7,y++),c===0?(x=w,w=0):w=w-x,this._zList[c]=w}this._noneCount=y}if(this.vertexCount<2e4)i===0&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(var c=0;c<3;c++)this._progressiveQuickSort(i*3+c);this.dirtyIndices()},_simpleSort:function(t){var i=this._zList,l=this.indices;function f(c,p){return i[p]-i[c]}t?Array.prototype.sort.call(l,f):Gu.sort(l,f,0,l.length-1)},_progressiveQuickSort:function(t){var i=this._zList,l=this.indices;this._quickSort=this._quickSort||new Gu,this._quickSort.step(l,function(f,c){return i[c]-i[f]},t)}},Ch=`@export ecgl.sdfSprite.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform float elapsedTime : 0;

attribute vec3 position : POSITION;

#ifdef VERTEX_SIZE
attribute float size;
#else
uniform float u_Size;
#endif

#ifdef VERTEX_COLOR
attribute vec4 a_FillColor: COLOR;
varying vec4 v_Color;
#endif

#ifdef VERTEX_ANIMATION
attribute vec3 prevPosition;
attribute float prevSize;
uniform float percent : 1.0;
#endif


#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

varying float v_Size;

void main()
{

#ifdef POSITIONTEXTURE_ENABLED
 gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);
#else

 #ifdef VERTEX_ANIMATION
 vec3 pos = mix(prevPosition, position, percent);
 #else
 vec3 pos = position;
 #endif
 gl_Position = worldViewProjection * vec4(pos, 1.0);
#endif

#ifdef VERTEX_SIZE
#ifdef VERTEX_ANIMATION
 v_Size = mix(prevSize, size, percent);
#else
 v_Size = size;
#endif
#else
 v_Size = u_Size;
#endif

#ifdef VERTEX_COLOR
 v_Color = a_FillColor;
 #endif

 gl_PointSize = v_Size;
}

@end

@export ecgl.sdfSprite.fragment

uniform vec4 color: [1, 1, 1, 1];
uniform vec4 strokeColor: [1, 1, 1, 1];
uniform float smoothing: 0.07;

uniform float lineWidth: 0.0;

#ifdef VERTEX_COLOR
varying vec4 v_Color;
#endif

varying float v_Size;

uniform sampler2D sprite;

@import clay.util.srgb

void main()
{
 gl_FragColor = color;

 vec4 _strokeColor = strokeColor;

#ifdef VERTEX_COLOR
 gl_FragColor *= v_Color;
 #endif

#ifdef SPRITE_ENABLED
 float d = texture2D(sprite, gl_PointCoord).r;
 gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);

 if (lineWidth > 0.0) {
 float sLineWidth = lineWidth / 2.0;

 float outlineMaxValue0 = 0.5 + sLineWidth;
 float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;
 float outlineMinValue0 = 0.5 - sLineWidth - smoothing;
 float outlineMinValue1 = 0.5 - sLineWidth;

 if (d <= outlineMaxValue1 && d >= outlineMinValue0) {
 float a = _strokeColor.a;
 if (d <= outlineMinValue1) {
 a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);
 }
 else {
 a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);
 }
 gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);
 gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;
 }
 }
#endif

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(gl_FragColor);
#endif
}
@end`,Ph=Vn.vec4;se.Shader.import(Ch);var p0=se.Mesh.extend(function(){var t=new se.Geometry({dynamic:!0,attributes:{color:new se.Geometry.Attribute("color","float",4,"COLOR"),position:new se.Geometry.Attribute("position","float",3,"POSITION"),size:new se.Geometry.Attribute("size","float",1),prevPosition:new se.Geometry.Attribute("prevPosition","float",3),prevSize:new se.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,d0);var i=new se.Material({shader:se.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});i.enableTexture("sprite"),i.define("both","VERTEX_COLOR"),i.define("both","VERTEX_SIZE");var l=new se.Texture2D({image:document.createElement("canvas"),flipY:!1});return i.set("sprite",l),t.pick=this._pick.bind(this),{geometry:t,material:i,mode:se.Mesh.POINTS,sizeScale:1}},{_pick:function(t,i,l,f,c,p){var y=this._positionNDC;if(!!y)for(var x=l.viewport,w=2/x.width,E=2/x.height,B=this.geometry.vertexCount-1;B>=0;B--){var q;this.geometry.indices?q=this.geometry.indices[B]:q=B;var yt=y[q*2],_t=y[q*2+1],Mt=this.geometry.attributes.size.get(q)/this.sizeScale,Ct=Mt/2;if(t>yt-Ct*w&&t<yt+Ct*w&&i>_t-Ct*E&&i<_t+Ct*E){var Gt=new se.Vector3,Xt=new se.Vector3;this.geometry.attributes.position.get(q,Gt.array),se.Vector3.transformMat4(Xt,Gt,this.worldTransform),p.push({vertexIndex:q,point:Gt,pointWorld:Xt,target:this,distance:Xt.distance(f.getWorldPosition())})}}},updateNDCPosition:function(t,i,l){var f=this._positionNDC,c=this.geometry;(!f||f.length/2!==c.vertexCount)&&(f=this._positionNDC=new Float32Array(c.vertexCount*2));for(var p=Ph.create(),y=0;y<c.vertexCount;y++)c.attributes.position.get(y,p),p[3]=1,Ph.transformMat4(p,p,t.array),Ph.scale(p,p,1/p[3]),f[y*2]=p[0],f[y*2+1]=p[1]}}),g0=p0,kv=20,Vv=-10;function ps(t,i){return t&&i&&t[0]===i[0]&&t[1]===i[1]}function Jl(t,i){this.rootNode=new se.Node,this.is2D=t,this._labelsBuilder=new nh(256,256,i),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=i,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}Jl.prototype={constructor:Jl,highlightOnMouseover:!0,update:function(t,i,l,f,c){var p=this._prevMesh;this._prevMesh=this._mesh,this._mesh=p;var y=t.getData();if(f==null&&(f=0),c==null&&(c=y.count()),this._startDataIndex=f,this._endDataIndex=c-1,!this._mesh){var x=this._prevMesh&&this._prevMesh.material;this._mesh=new g0({renderOrder:10,frustumCulling:!1}),x&&(this._mesh.material=x)}var x=this._mesh.material,w=this._mesh.geometry,E=w.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var B=this._getSymbolInfo(t,f,c),q=l.getDevicePixelRatio(),yt=t.getModel("itemStyle").getItemStyle(),_t=t.get("large"),Mt=1;B.maxSize>2?(Mt=this._updateSymbolSprite(t,yt,B,q),x.enableTexture("sprite")):x.disableTexture("sprite"),E.position.init(c-f);var Ct=[];if(_t){x.undefine("VERTEX_SIZE"),x.undefine("VERTEX_COLOR");var Gt=dv(y),Xt=wg(y);se.parseColor(Gt,Ct),Ct[3]*=Xt,x.set({color:Ct,u_Size:B.maxSize*this._sizeScale})}else x.set({color:[1,1,1,1]}),x.define("VERTEX_SIZE"),x.define("VERTEX_COLOR"),E.size.init(c-f),E.color.init(c-f),this._originalOpacity=new Float32Array(c-f);for(var ne=y.getLayout("points"),te=E.position.value,qt=!1,ge=0;ge<c-f;ge++){var ve=ge*3,Ne=ge*2;if(this.is2D?(te[ve]=ne[Ne],te[ve+1]=ne[Ne+1],te[ve+2]=Vv):(te[ve]=ne[ve],te[ve+1]=ne[ve+1],te[ve+2]=ne[ve+2]),!_t){var Gt=oi(y,ge),Xt=vi(y,ge);se.parseColor(Gt,Ct),Ct[3]*=Xt,E.color.set(ge,Ct),Ct[3]<.99&&(qt=!0);var Ee=y.getItemVisual(ge,"symbolSize");Ee=Ee instanceof Array?Math.max(Ee[0],Ee[1]):Ee,isNaN(Ee)&&(Ee=0),E.size.value[ge]=Ee*Mt*this._sizeScale,this._originalOpacity[ge]=Ct[3]}}this._mesh.sizeScale=Mt,w.updateBoundingBox(),w.dirty(),this._updateMaterial(t,yt);var Ve=t.coordinateSystem;if(Ve&&Ve.viewGL){var Qe=Ve.viewGL.isLinearSpace()?"define":"undefine";x[Qe]("fragment","SRGB_DECODE")}_t||this._updateLabelBuilder(t,f,c),this._updateHandler(t,i,l),this._updateAnimation(t),this._api=l},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,i,l,f){l.maxSize=Math.min(l.maxSize*2,200);var c=[];return l.aspect>1?(c[0]=l.maxSize,c[1]=l.maxSize/l.aspect):(c[1]=l.maxSize,c[0]=l.maxSize*l.aspect),c[0]=c[0]||1,c[1]=c[1]||1,(this._symbolType!==l.type||!ps(this._symbolSize,c)||this._lineWidth!==i.lineWidth)&&(Gv.createSymbolSprite(l.type,c,{fill:"#fff",lineWidth:i.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(c[0]/2,10)},this._spriteImageCanvas),Gv.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),kv,this._mesh.material.get("sprite").image),this._symbolType=l.type,this._symbolSize=c,this._lineWidth=i.lineWidth),this._spriteImageCanvas.width/l.maxSize*f},_updateMaterial:function(t,i){var l=t.get("blendMode")==="lighter"?se.additiveBlend:null,f=this._mesh.material;f.blend=l,f.set("lineWidth",i.lineWidth/kv);var c=se.parseColor(i.stroke);f.set("strokeColor",c),f.transparent=!0,f.depthMask=!1,f.depthTest=!this.is2D,f.sortVertices=!this.is2D},_updateLabelBuilder:function(t,y,l){var f=t.getData(),c=this._mesh.geometry,p=c.attributes.position.value,y=this._startDataIndex,x=this._mesh.sizeScale;this._labelsBuilder.updateData(f,y,l),this._labelsBuilder.getLabelPosition=function(w,E,B){var q=(w-y)*3;return[p[q],p[q+1],p[q+2]]},this._labelsBuilder.getLabelDistance=function(w,E,B){var q=c.attributes.size.get(w-y)/x;return q/2+B},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){se.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,i,l){var f=t.getData(),c=this._mesh,p=this,y=-1,x=t.coordinateSystem&&t.coordinateSystem.type==="cartesian3D",w;x&&(w=t.coordinateSystem.model),c.seriesIndex=t.seriesIndex,c.off("mousemove"),c.off("mouseout"),c.on("mousemove",function(E){var B=E.vertexIndex+p._startDataIndex;B!==y&&(this.highlightOnMouseover&&(this.downplay(f,y),this.highlight(f,B),this._labelsBuilder.updateLabels([B])),x&&l.dispatchAction({type:"grid3DShowAxisPointer",value:[f.get(t.coordDimToDataDim("x")[0],B),f.get(t.coordDimToDataDim("y")[0],B),f.get(t.coordDimToDataDim("z")[0],B)],grid3DIndex:w.componentIndex})),c.dataIndex=B,y=B},this),c.on("mouseout",function(E){var B=E.vertexIndex+p._startDataIndex;this.highlightOnMouseover&&(this.downplay(f,B),this._labelsBuilder.updateLabels()),y=-1,c.dataIndex=-1,x&&l.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:w.componentIndex})},this)},updateLayout:function(t,i,l){var f=t.getData();if(!!this._mesh){var c=this._mesh.geometry.attributes.position.value,p=f.getLayout("points");if(this.is2D)for(var y=0;y<p.length/2;y++){var x=y*3,w=y*2;c[x]=p[w],c[x+1]=p[w+1],c[x+2]=Vv}else for(var y=0;y<p.length;y++)c[y]=p[y];this._mesh.geometry.dirty(),l.getZr().refresh()}},updateView:function(t){if(!!this._mesh){var i=new Cr;Cr.mul(i,t.viewMatrix,this._mesh.worldTransform),Cr.mul(i,t.projectionMatrix,i),this._mesh.updateNDCPosition(i,this.is2D,this._api)}},highlight:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=t.getItemModel(i),f=l.getModel("emphasis.itemStyle"),c=f.get("color"),p=f.get("opacity");if(c==null){var y=oi(t,i);c=N.$_.lift(y,-.4)}p==null&&(p=vi(t,i));var x=se.parseColor(c);x[3]*=p,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,x),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,i){if(!(i>this._endDataIndex||i<this._startDataIndex)){var l=oi(t,i),f=vi(t,i),c=se.parseColor(l);c[3]*=f,this._mesh.geometry.attributes.color.set(i-this._startDataIndex,c),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var i=this._mesh.geometry,l=0;l<i.vertexCount;l++){var f=this._originalOpacity[l]*t;i.attributes.color.value[l*4+3]=f}i.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var i=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",i/this._sizeScale*t);var l=this._mesh.geometry.attributes;if(l.size.value)for(var f=0;f<l.size.value.length;f++)l.size.value[f]=l.size.value[f]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,i){i&&t.material.set("positionTexture",i),t.material[i?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,i,l){if(t.get("large")){var f=Xr.firstNotNull(t.get("symbolSize"),1),E,p;return f instanceof Array?(E=Math.max(f[0],f[1]),p=f[0]/f[1]):(E=f,p=1),{maxSize:f,type:t.get("symbol"),aspect:p}}for(var c=t.getData(),p,y=!1,x=c.getItemVisual(0,"symbol")||"circle",w=!1,E=0,B=i;B<l;B++){var f=c.getItemVisual(B,"symbolSize"),q=c.getItemVisual(B,"symbol"),yt;if(f instanceof Array)yt=f[0]/f[1],E=Math.max(Math.max(f[0],f[1]),E);else{if(isNaN(f))continue;yt=1,E=Math.max(f,E)}x=q,p=yt}return{maxSize:E,type:x,aspect:p}}};var Ia=Jl,Lh=N.TA.extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,i,l){if(this.groupGL.removeAll(),!!t.getData().count()){var f=t.coordinateSystem;if(f&&f.viewGL){f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera;var c=this._pointsBuilderList[0];c||(c=this._pointsBuilderList[0]=new Ia(!1,l)),this._pointsBuilderList.length=1,this.groupGL.add(c.rootNode),c.update(t,i,l),c.updateView(f.viewGL.camera)}}},incrementalPrepareRender:function(t,i,l){var f=t.coordinateSystem;f&&f.viewGL&&(f.viewGL.add(this.groupGL),this._camera=f.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var c=this._pointsBuilderList[this._currentStep];c||(c=new Ia(!1,f),this._pointsBuilderList[this._currentStep]=c),this.groupGL.add(c.rootNode),c.update(i,l,f,t.start,t.end),c.updateView(i.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach(function(t){t.updateView(this._camera)},this)},highlight:function(t,i,l,f){this._toggleStatus("highlight",t,i,l,f)},downplay:function(t,i,l,f){this._toggleStatus("downplay",t,i,l,f)},_toggleStatus:function(t,i,l,f,c){var p=i.getData(),y=Xr.queryDataIndex(p,c),x=t==="highlight";y!=null?N.D5.each(al.normalizeToArray(y),function(w){for(var E=0;E<this._pointsBuilderList.length;E++){var B=this._pointsBuilderList[E];x?B.highlight(p,w):B.downplay(p,w)}},this):p.each(function(w){for(var E=0;E<this._pointsBuilderList.length;E++){var B=this._pointsBuilderList[E];x?B.highlight(p,w):B.downplay(p,w)}})},dispose:function(){this._pointsBuilderList.forEach(function(t){t.dispose()}),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function Zv(t){t.registerChartView(Lh),t.registerSeriesModel(h0),t.registerLayout({seriesType:"scatter3D",reset:function(i){var l=i.coordinateSystem;if(l){var f=l.dimensions;if(f.length<3)return;var c=f.map(function(x){return i.coordDimToDataDim(x)[0]}),p=[],y=[];return{progress:function(x,w){for(var E=new Float32Array((x.end-x.start)*3),B=x.start;B<x.end;B++){var q=(B-x.start)*3;p[0]=w.get(c[0],B),p[1]=w.get(c[1],B),p[2]=w.get(c[2],B),l.dataToPoint(p,y),E[q]=y[0],E[q+1]=y[1],E[q+2]=y[2]}w.setLayout("points",E)}}}}})}(0,N.D$)(Zv);var $n=Vn.vec3,Ih=Vn.vec2,qa=$n.normalize,Ql=$n.cross,Wv=$n.sub,Rh=$n.add,xa=$n.create,To=xa(),ua=xa(),wo=xa(),$l=xa(),Hv=[],Xv=[];function Yv(t,i){Ih.copy(Hv,t[0]),Ih.copy(Xv,t[1]);var l=[],f=l[0]=xa(),c=l[1]=xa(),p=l[2]=xa(),y=l[3]=xa();i.dataToPoint(Hv,f),i.dataToPoint(Xv,y),qa(To,f),Wv(ua,y,f),qa(ua,ua),Ql(wo,ua,To),qa(wo,wo),Ql(ua,To,wo),Rh(c,To,ua),qa(c,c),qa(To,y),Wv(ua,f,y),qa(ua,ua),Ql(wo,ua,To),qa(wo,wo),Ql(ua,To,wo),Rh(p,To,ua),qa(p,p),Rh($l,f,y),qa($l,$l);var x=$n.dot(f,$l),w=$n.dot($l,c),E=(Math.max($n.len(f),$n.len(y))-x)/w*2;return $n.scaleAndAdd(c,f,c,E),$n.scaleAndAdd(p,y,p,E),l}function Kv(t,i,l){var f=[],c=f[0]=$n.create(),p=f[1]=$n.create(),y=f[2]=$n.create(),x=f[3]=$n.create();i.dataToPoint(t[0],c),i.dataToPoint(t[1],x);var w=$n.dist(c,x);return $n.lerp(p,c,x,.3),$n.lerp(y,c,x,.3),$n.scaleAndAdd(p,p,l,Math.min(w*.1,10)),$n.scaleAndAdd(y,y,l,Math.min(w*.1,10)),f}function Do(t,i){for(var l=new Float32Array(t.length*3),f=0,c=[],p=0;p<t.length;p++)i.dataToPoint(t[p],c),l[f++]=c[0],l[f++]=c[1],l[f++]=c[2];return l}function ol(t){var i=[];return t.each(function(l){var f=t.getItemModel(l),c=f.option instanceof Array?f.option:f.getShallow("coords",!0);i.push(c)}),{coordsList:i}}function sl(t,i){var l=t.getData(),f=t.get("polyline");l.setLayout("lineType",f?"polyline":"cubicBezier");var c=ol(l);l.each(function(p){var y=c.coordsList[p],x=f?Do:Yv;l.setItemLayout(p,x(y,i))})}function jv(t,i,l){var f=t.getData(),c=t.get("polyline"),p=ol(f);f.setLayout("lineType",c?"polyline":"cubicBezier"),f.each(function(y){var x=p.coordsList[y],w=c?Do(x,i):Kv(x,i,l);f.setItemLayout(y,w)})}function m0(t,i){t.eachSeriesByType("lines3D",function(l){var f=l.coordinateSystem;f.type==="globe"?sl(l,f):f.type==="geo3D"?jv(l,f,[0,1,0]):(f.type==="mapbox3D"||f.type==="maptalks3D")&&jv(l,f,[0,0,1])})}var y0=N.wJ.extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,i){var l=new N.aV(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,c,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var x=f.value;if(x!=null)return x instanceof Array?x[y]:x}),l},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),_0=`@export ecgl.trail2.vertex
attribute vec3 position: POSITION;
attribute vec3 positionPrev;
attribute vec3 positionNext;
attribute float offset;
attribute float dist;
attribute float distAll;
attribute float start;

attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;
uniform float near : NEAR;

uniform float speed : 0;
uniform float trailLength: 0.3;
uniform float time;
uniform float period: 1000;

uniform float spotSize: 1;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.vertexHeader

@import ecgl.lines3D.clipNear

void main()
{
 @import ecgl.lines3D.expandLine

 gl_Position = currProj;

 v_Color = a_Color;

 @import ecgl.common.wireframe.vertexMain

#ifdef CONSTANT_SPEED
 float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;
#else
 float t = mod((time + start) / period, 1. + trailLength) - trailLength;
#endif

 float trailLen = distAll * trailLength;

 v_Percent = (dist - t * distAll) / trailLen;

 v_SpotPercent = spotSize / distAll;

 }
@end


@export ecgl.trail2.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform float spotIntensity: 5;

varying vec4 v_Color;
varying float v_Percent;
varying float v_SpotPercent;

@import ecgl.common.wireframe.fragmentHeader

@import clay.util.srgb

void main()
{
 if (v_Percent > 1.0 || v_Percent < 0.0) {
 discard;
 }

 float fade = v_Percent;

#ifdef SRGB_DECODE
 gl_FragColor = sRGBToLinear(color * v_Color);
#else
 gl_FragColor = color * v_Color;
#endif

 @import ecgl.common.wireframe.fragmentMain

 if (v_Percent > (1.0 - v_SpotPercent)) {
 gl_FragColor.rgb *= spotIntensity;
 }

 gl_FragColor.a *= fade;
}

@end`,Oh=Vn.vec3;function x0(t){return t>0?1:-1}se.Shader.import(_0);var S0=se.Mesh.extend(function(){var t=new se.Material({shader:new se.Shader(se.Shader.source("ecgl.trail2.vertex"),se.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),i=new Qo({dynamic:!0});return i.createAttribute("dist","float",1),i.createAttribute("distAll","float",1),i.createAttribute("start","float",1),{geometry:i,material:t,culling:!1,$ignorePicking:!0}},{updateData:function(t,i,l){var f=t.hostModel,c=this.geometry,p=f.getModel("effect"),y=p.get("trailWidth")*i.getDevicePixelRatio(),x=p.get("trailLength"),w=f.get("effect.constantSpeed"),E=f.get("effect.period")*1e3,B=w!=null;B?this.material.set("speed",w/1e3):this.material.set("period",E),this.material[B?"define":"undefine"]("vertex","CONSTANT_SPEED");var q=f.get("polyline");c.trailLength=x,this.material.set("trailLength",x),c.resetOffset(),["position","positionPrev","positionNext"].forEach(function(Ne){c.attributes[Ne].value=l.attributes[Ne].value});var yt=["dist","distAll","start","offset","color"];yt.forEach(function(Ne){c.attributes[Ne].init(c.vertexCount)}),c.indices=l.indices;var _t=[],Mt=p.get("trailColor"),Ct=p.get("trailOpacity"),Gt=Mt!=null,Xt=Ct!=null;this.updateWorldTransform();var ne=this.worldTransform.x.len(),te=this.worldTransform.y.len(),qt=this.worldTransform.z.len(),ge=0,ve=0;t.each(function(Ne){var Ee=t.getItemLayout(Ne),Ve=Xt?Ct:vi(t,Ne),Qe=oi(t,Ne);Ve==null&&(Ve=1),_t=se.parseColor(Gt?Mt:Qe,_t),_t[3]*=Ve;for(var We=q?l.getPolylineVertexCount(Ee):l.getCubicCurveVertexCount(Ee[0],Ee[1],Ee[2],Ee[3]),rr=0,fr=[],je=[],hr=ge;hr<ge+We;hr++)c.attributes.position.get(hr,fr),fr[0]*=ne,fr[1]*=te,fr[2]*=qt,hr>ge&&(rr+=Oh.dist(fr,je)),c.attributes.dist.set(hr,rr),Oh.copy(je,fr);ve=Math.max(ve,rr);for(var wr=Math.random()*(B?rr:E),hr=ge;hr<ge+We;hr++)c.attributes.distAll.set(hr,rr),c.attributes.start.set(hr,wr),c.attributes.offset.set(hr,x0(l.attributes.offset.get(hr))*y/2),c.attributes.color.set(hr,_t);ge+=We}),this.material.set("spotSize",ve*.1*x),this.material.set("spotIntensity",p.get("spotIntensity")),c.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});se.Shader.import(Mu);function Jv(t){return t.radius!=null?t.radius:t.size!=null?Math.max(t.size[0],t.size[1],t.size[2]):100}var T0=N.TA.extend({type:"lines3D",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this._meshLinesMaterial=new se.Material({shader:se.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new se.Mesh({geometry:new Qo,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new S0},render:function(t,i,l){this.groupGL.add(this._linesMesh);var f=t.coordinateSystem,c=t.getData();if(f&&f.viewGL){var p=f.viewGL;p.add(this.groupGL),this._updateLines(t,i,l);var y=f.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[y]("fragment","SRGB_DECODE"),this._trailMesh.material[y]("fragment","SRGB_DECODE")}var x=this._trailMesh;if(x.stopAnimation(),t.get("effect.show")){this.groupGL.add(x),x.updateData(c,l,this._linesMesh.geometry),x.__time=x.__time||0;var w=3600*1e3;this._curveEffectsAnimator=x.animate("",{loop:!0}).when(w,{__time:w}).during(function(){x.setAnimationTime(x.__time)}).start()}else this.groupGL.remove(x),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend=t.get("blendMode")==="lighter"?se.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,i,l){var f=t.getData(),c=t.coordinateSystem,p=this._linesMesh.geometry,y=t.get("polyline");p.expandLine=!0;var x=Jv(c);p.segmentScale=x/20;var w="lineStyle.width".split("."),E=l.getDevicePixelRatio(),B=0;f.each(function(Mt){var Ct=f.getItemModel(Mt),Gt=Ct.get(w);Gt==null&&(Gt=1),f.setItemVisual(Mt,"lineWidth",Gt),B=Math.max(Gt,B)}),p.useNativeLine=!1;var q=0,yt=0;f.each(function(Mt){var Ct=f.getItemLayout(Mt);y?(q+=p.getPolylineVertexCount(Ct),yt+=p.getPolylineTriangleCount(Ct)):(q+=p.getCubicCurveVertexCount(Ct[0],Ct[1],Ct[2],Ct[3]),yt+=p.getCubicCurveTriangleCount(Ct[0],Ct[1],Ct[2],Ct[3]))}),p.setVertexCount(q),p.setTriangleCount(yt),p.resetOffset();var _t=[];f.each(function(Mt){var Ct=f.getItemLayout(Mt),Gt=oi(f,Mt),Xt=vi(f,Mt),ne=f.getItemVisual(Mt,"lineWidth")*E;Xt==null&&(Xt=1),_t=se.parseColor(Gt,_t),_t[3]*=Xt,y?p.addPolyline(Ct,_t,ne):p.addCubicCurve(Ct[0],Ct[1],Ct[2],Ct[3],_t,ne)}),p.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function w0(t){t.registerChartView(T0),t.registerSeriesModel(y0),t.registerLayout(m0),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},function(){}),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},function(){}),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},function(){})}(0,N.D$)(w0);function Nh(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var Bh=N.wJ.extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getItemModel(t),f=l.option instanceof Array?l.option:l.getShallow("coords");l.get("multiPolygon")||(f=[f]);for(var c=[],p=0;p<f.length;p++){for(var y=[],x=1;x<f[p].length;x++)y.push(Nh(i,f[p][x]));c.push({exterior:Nh(i,f[p][0]),interiors:y})}return c},getInitialData:function(t){var i=new N.aV(["value"],this);return i.hasItemOption=!1,i.initData(t.data,[],function(l,f,c,p){if(l instanceof Array)return NaN;i.hasItemOption=!0;var y=l.value;if(y!=null)return y instanceof Array?y[p]:y}),i},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});N.D5.merge(Bh.prototype,Js);var Qv=Bh,$v=N.TA.extend({type:"polygons3D",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL);var c=this._geo3DBuilderList[0];c||(c=new Vl(l),c.extrudeY=f.type!=="mapbox3D"&&f.type!=="maptalks3D",this._geo3DBuilderList[0]=c),this._updateShaderDefines(f,c),c.update(t,i,l),this._geo3DBuilderList.length=1,this.groupGL.add(c.rootNode)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll();var f=t.coordinateSystem;f&&f.viewGL&&f.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,i,l,f){var c=this._geo3DBuilderList[this._currentStep],p=i.coordinateSystem;c||(c=new Vl(f),c.extrudeY=p.type!=="mapbox3D"&&p.type!=="maptalks3D",this._geo3DBuilderList[this._currentStep]=c),c.update(i,l,f,t.start,t.end),this.groupGL.add(c.rootNode),this._updateShaderDefines(p,c),this._currentStep++},_updateShaderDefines:function(t,i){var l=t.viewGL.isLinearSpace()?"define":"undefine";i.rootNode.traverse(function(f){f.material&&(f.material[l]("fragment","SRGB_DECODE"),(t.type==="mapbox3D"||t.type==="maptalks3D")&&(f.material.define("fragment","NORMAL_UP_AXIS",2),f.material.define("fragment","NORMAL_FRONT_AXIS",1)))})},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach(function(t){t.dispose()})}});function Fh(t){t.registerChartView($v),t.registerSeriesModel(Qv)}(0,N.D$)(Fh);var Ju=N.wJ.extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return jl(this,t)},getInitialData:function(t,i){var l=t.data;function f(Ir){return!(isNaN(Ir.min)||isNaN(Ir.max)||isNaN(Ir.step))}function c(Ir){var dr=N.Rx.getPrecisionSafe;return Math.max(dr(Ir.min),dr(Ir.max),dr(Ir.step))+1}if(!l)if(t.parametric){var qt=t.parametricEquation||{},ge=qt.u||{},ve=qt.v||{};["u","v"].forEach(function(dr){f(qt[dr])}),["x","y","z"].forEach(function(dr){qt[dr]});var Ne=Math.floor((ge.max+ge.step-ge.min)/ge.step),Ee=Math.floor((ve.max+ve.step-ve.min)/ve.step);l=new Float32Array(Ne*Ee*5);for(var Ve=c(ge),Qe=c(ve),yt=0,_t=0;_t<Ee;_t++)for(var Mt=0;Mt<Ne;Mt++){var We=Mt*ge.step+ge.min,rr=_t*ve.step+ve.min,fr=N.Rx.round(Math.min(We,ge.max),Ve),je=N.Rx.round(Math.min(rr,ve.max),Qe),Ct=qt.x(fr,je),Gt=qt.y(fr,je),te=qt.z(fr,je);l[yt++]=Ct,l[yt++]=Gt,l[yt++]=te,l[yt++]=fr,l[yt++]=je}}else{var p=t.equation||{},y=p.x||{},x=p.y||{};if(["x","y"].forEach(function(Ir){f(p[Ir])}),typeof p.z!="function")return;var w=Math.floor((y.max+y.step-y.min)/y.step),E=Math.floor((x.max+x.step-x.min)/x.step);l=new Float32Array(w*E*3);for(var B=c(y),q=c(x),yt=0,_t=0;_t<E;_t++)for(var Mt=0;Mt<w;Mt++){var Ct=Mt*y.step+y.min,Gt=_t*x.step+x.min,Xt=N.Rx.round(Math.min(Ct,y.max),B),ne=N.Rx.round(Math.min(Gt,x.max),q),te=p.z(Xt,ne);l[yt++]=Xt,l[yt++]=ne,l[yt++]=te}}var hr=["x","y","z"];t.parametric&&hr.push("u","v");var wr=Ku(this,hr,l);return wr},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});N.D5.merge(Ju.prototype,Js);var zh=Ju,Ao=Vn.vec3;function Gh(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}var gs=N.TA.extend({type:"surface",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node},render:function(t,i,l){var f=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=f,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var c=t.coordinateSystem,p=t.get("shading"),y=t.getData(),x="ecgl."+p;if((!this._surfaceMesh.material||this._surfaceMesh.material.shader.name!==x)&&(this._surfaceMesh.material=se.createMaterial(x,["VERTEX_COLOR","DOUBLE_SIDED"])),se.setMaterialFromModel(p,this._surfaceMesh.material,t,l),c&&c.viewGL){c.viewGL.add(this.groupGL);var w=c.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[w]("fragment","SRGB_DECODE")}var E=t.get("parametric"),B=t.get("dataShape");B||(B=this._getDataShape(y,E));var q=t.getModel("wireframe"),yt=q.get("lineStyle.width"),_t=q.get("show")&&yt>0;this._updateSurfaceMesh(this._surfaceMesh,t,B,_t);var Mt=this._surfaceMesh.material;_t?(Mt.define("WIREFRAME_QUAD"),Mt.set("wireframeLineWidth",yt),Mt.set("wireframeLineColor",se.parseColor(q.get("lineStyle.color")))):Mt.undefine("WIREFRAME_QUAD"),this._initHandler(t,l),this._updateAnimation(t)},_updateAnimation:function(t){se.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new se.Mesh({geometry:new se.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new se.Material({shader:new se.Shader(se.Shader.source("ecgl.sm.depth.vertex"),se.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,rh),t},_initHandler:function(t,i){var l=t.getData(),f=this._surfaceMesh,c=t.coordinateSystem;function p(x,w){for(var E=1/0,B=-1,q=[],yt=0;yt<x.length;yt++){f.geometry.attributes.position.get(x[yt],q);var _t=Ao.dist(w.array,q);_t<E&&(E=_t,B=x[yt])}return B}f.seriesIndex=t.seriesIndex;var y=-1;f.off("mousemove"),f.off("mouseout"),f.on("mousemove",function(x){var w=p(x.triangle,x.point);if(w>=0){var E=[];f.geometry.attributes.position.get(w,E);for(var B=c.pointToData(E),q=1/0,yt=-1,_t=[],Mt=0;Mt<l.count();Mt++){_t[0]=l.get("x",Mt),_t[1]=l.get("y",Mt),_t[2]=l.get("z",Mt);var Ct=Ao.squaredDistance(_t,B);Ct<q&&(yt=Mt,q=Ct)}yt!==y&&i.dispatchAction({type:"grid3DShowAxisPointer",value:B}),y=yt,f.dataIndex=yt}else f.dataIndex=-1},this),f.on("mouseout",function(x){y=-1,f.dataIndex=-1,i.dispatchAction({type:"grid3DHideAxisPointer"})},this)},_updateSurfaceMesh:function(t,i,l,f){var c=t.geometry,p=i.getData(),y=p.getLayout("points"),x=0;p.each(function(ui){p.hasValue(ui)||x++});var w=x||f,E=c.attributes.position,B=c.attributes.normal,q=c.attributes.texcoord0,yt=c.attributes.barycentric,_t=c.attributes.color,Mt=l[0],Ct=l[1],Gt=i.get("shading"),Xt=Gt!=="color";if(w){var ne=(Mt-1)*(Ct-1)*4;E.init(ne),f&&yt.init(ne)}else E.value=new Float32Array(y);_t.init(c.vertexCount),q.init(c.vertexCount);var te=[0,3,1,1,3,2],qt=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],ge=c.indices=new(c.vertexCount>65535?Uint32Array:Uint16Array)((Mt-1)*(Ct-1)*6),ve=function(ui,Sa,Ei){Ei[1]=ui*Ct+Sa,Ei[0]=ui*Ct+Sa+1,Ei[3]=(ui+1)*Ct+Sa+1,Ei[2]=(ui+1)*Ct+Sa},Ne=!1;if(w){var Ee=[],Ve=[],Qe=0;Xt?B.init(c.vertexCount):B.value=null;for(var We=[[],[],[]],rr=[],fr=[],je=Ao.create(),hr=function(ui,Sa,Ei){var qu=Sa*3;return Ei[0]=ui[qu],Ei[1]=ui[qu+1],Ei[2]=ui[qu+2],Ei},wr=new Float32Array(y.length),Ir=new Float32Array(y.length/3*4),dr=0;dr<p.count();dr++)if(p.hasValue(dr)){var li=se.parseColor(oi(p,dr)),un=vi(p,dr);un!=null&&(li[3]*=un),li[3]<.99&&(Ne=!0);for(var Pr=0;Pr<4;Pr++)Ir[dr*4+Pr]=li[Pr]}for(var Zr=[1e7,1e7,1e7],dr=0;dr<Mt-1;dr++)for(var sn=0;sn<Ct-1;sn++){var Dn=dr*(Ct-1)+sn,An=Dn*4;ve(dr,sn,Ee);for(var en=!1,Pr=0;Pr<4;Pr++)hr(y,Ee[Pr],Ve),Gh(Ve)&&(en=!0);for(var Pr=0;Pr<4;Pr++)en?E.set(An+Pr,Zr):(hr(y,Ee[Pr],Ve),E.set(An+Pr,Ve)),f&&yt.set(An+Pr,qt[Pr]);for(var Pr=0;Pr<6;Pr++)ge[Qe++]=te[Pr]+An;if(Xt&&!en)for(var Pr=0;Pr<2;Pr++){for(var si=Pr*3,Fn=0;Fn<3;Fn++){var Kn=Ee[te[si]+Fn];hr(y,Kn,We[Fn])}Ao.sub(rr,We[0],We[1]),Ao.sub(fr,We[1],We[2]),Ao.cross(je,rr,fr);for(var Fn=0;Fn<3;Fn++){var pi=Ee[te[si]+Fn]*3;wr[pi]=wr[pi]+je[0],wr[pi+1]=wr[pi+1]+je[1],wr[pi+2]=wr[pi+2]+je[2]}}}if(Xt)for(var dr=0;dr<wr.length/3;dr++)hr(wr,dr,je),Ao.normalize(je,je),wr[dr*3]=je[0],wr[dr*3+1]=je[1],wr[dr*3+2]=je[2];for(var li=[],ti=[],dr=0;dr<Mt-1;dr++)for(var sn=0;sn<Ct-1;sn++){var Dn=dr*(Ct-1)+sn,An=Dn*4;ve(dr,sn,Ee);for(var Pr=0;Pr<4;Pr++){for(var Fn=0;Fn<4;Fn++)li[Fn]=Ir[Ee[Pr]*4+Fn];_t.set(An+Pr,li),Xt&&(hr(wr,Ee[Pr],je),B.set(An+Pr,je));var Kn=Ee[Pr];ti[0]=Kn%Ct/(Ct-1),ti[1]=Math.floor(Kn/Ct)/(Mt-1),q.set(An+Pr,ti)}Dn++}}else{for(var ti=[],dr=0;dr<p.count();dr++){ti[0]=dr%Ct/(Ct-1),ti[1]=Math.floor(dr/Ct)/(Mt-1);var li=se.parseColor(oi(p,dr)),un=vi(p,dr);un!=null&&(li[3]*=un),li[3]<.99&&(Ne=!0),_t.set(dr,li),q.set(dr,ti)}for(var Ee=[],tu=0,dr=0;dr<Mt-1;dr++)for(var sn=0;sn<Ct-1;sn++){ve(dr,sn,Ee);for(var Pr=0;Pr<6;Pr++)ge[tu++]=Ee[te[Pr]]}Xt?c.generateVertexNormals():B.value=null}t.material.get("normalMap")&&c.generateTangents(),c.updateBoundingBox(),c.dirty(),t.material.transparent=Ne,t.material.depthMask=!Ne},_getDataShape:function(t,i){for(var l=-1/0,f=0,c=0,p=0,y=!1,x=i?"u":"x",w=t.count(),E=0;E<w;E++){var B=t.get(x,E);B<l&&(p=c,c=0,f++),l=B,c++}if((!f||c===1)&&(y=!0),!y)return[f+1,c];for(var q=Math.floor(Math.sqrt(w));q>0;){if(Math.floor(w/q)===w/q)return[q,w/q];q--}return q=Math.floor(Math.sqrt(w)),[q,q]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function D0(t){t.registerChartView(gs),t.registerSeriesModel(zh),t.registerLayout(function(i,l){i.eachSeriesByType("surface",function(f){var c=f.coordinateSystem;!c||c.type;var p=f.getData(),y=new Float32Array(3*p.count()),x=[NaN,NaN,NaN];if(c&&c.type==="cartesian3D"){var w=c.dimensions,E=w.map(function(B){return f.coordDimToDataDim(B)[0]});p.each(E,function(B,q,yt,_t){var Mt;p.hasValue(_t)?Mt=c.dataToPoint([B,q,yt]):Mt=x,y[_t*3]=Mt[0],y[_t*3+1]=Mt[1],y[_t*3+2]=Mt[2]})}p.setLayout("points",y)})})}(0,N.D$)(D0);function Uh(t,i){for(var l=[],f=0;f<i.length;f++)l.push(t.dataToPoint(i[f]));return l}var ms=N.wJ.extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){t=t||{};var i=this.get("coordinateSystem");if(!(i==null||i==="geo3D")){if(!1)var l,f;this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null}},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var i=N._y.createDimensions(t.data,{coordDimensions:["value"]}),l=new N.aV(i,this);l.initData(t.data);var f={};return l.each(function(c){var p=l.getName(c),y=l.getItemModel(c);f[p]=y}),this._regionModelMap=f,l},formatTooltip:function(t){return jl(this,t)},getRegionModel:function(t){var i=this.getData().getName(t);return this._regionModelMap[i]||new N.Hn(null,this)},getRegionPolygonCoords:function(t){var i=this.coordinateSystem,l=this.getData().getName(t);if(i.transform){var f=i.getRegion(l);return f?f.geometries:[]}else{this._geo||(this._geo=xv.createGeo3D(this));for(var f=this._geo.getRegion(l),c=[],p=0;p<f.geometries.length;p++){var y=f.geometries[p],x=[],w=Uh(i,y.exterior);if(x&&x.length)for(var E=0;E<y.interiors.length;E++)x.push(Uh(i,x[E]));c.push({interiors:x,exterior:w})}return c}},getFormattedLabel:function(t,i){var l=al.getFormattedLabel(this,t,i);return l==null&&(l=this.getData().getName(t)),l},defaultOption:{coordinateSystem:"geo3D",data:null}});N.D5.merge(ms.prototype,sv),N.D5.merge(ms.prototype,jo),N.D5.merge(ms.prototype,Jo),N.D5.merge(ms.prototype,Ha),N.D5.merge(ms.prototype,Js);var qv=ms,kh=N.TA.extend({type:"map3D",__ecgl__:!0,init:function(t,i){this._geo3DBuilder=new Vl(i),this.groupGL=new se.Node},render:function(t,i,l){var f=t.coordinateSystem;if(!(!f||!f.viewGL)){this.groupGL.add(this._geo3DBuilder.rootNode),f.viewGL.add(this.groupGL);var c;if(f.type==="geo3D"){c=f,this._sceneHelper||(this._sceneHelper=new Hs,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(f.viewGL.scene),this._sceneHelper.updateLight(t),f.viewGL.setPostEffect(t.getModel("postEffect"),l),f.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var p=this._control;p||(p=this._control=new Oi({zr:l.getZr()}),this._control.init());var y=t.getModel("viewControl");p.setViewGL(f.viewGL),p.setFromViewControlModel(y,0),p.off("update"),p.on("update",function(){l.dispatchAction({type:"map3DChangeCamera",alpha:p.getAlpha(),beta:p.getBeta(),distance:p.getDistance(),from:this.uid,map3DId:t.id})}),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),c=t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,i,l,0,t.getData().count());var x=f.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse(function(w){w.material&&w.material[x]("fragment","SRGB_DECODE")})}},afterRender:function(t,i,l,f){var c=f.renderer,p=t.coordinateSystem;p&&p.type==="geo3D"&&(this._sceneHelper.updateAmbientCubemap(c,t,l),this._sceneHelper.updateSkybox(c,t,l))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function to(t){sh(t),t.registerChartView(kh),t.registerSeriesModel(qv),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},function(i,l){l.eachComponent({mainType:"series",subType:"map3D",query:i},function(f){f.setView(i)})})}(0,N.D$)(to);var Vh=N.wJ.extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return N._y.createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Zh=F(32892),td=F(45280);function Ra(t){this.viewGL=t}Ra.prototype.reset=function(t,i){this._updateCamera(i.getWidth(),i.getHeight(),i.getDevicePixelRatio()),this._viewTransform=Zh.Ue(),this.updateTransform(t,i)},Ra.prototype.updateTransform=function(t,i){var l=t.coordinateSystem;l.getRoamTransform&&(Zh.U_(this._viewTransform,l.getRoamTransform()),this._setCameraTransform(this._viewTransform),i.getZr().refresh())},Ra.prototype.dataToPoint=function(t,i,l){l=t.dataToPoint(i,null,l);var f=this._viewTransform;f&&td.Ne(l,l,f)},Ra.prototype.removeTransformInPoint=function(t){return this._viewTransform&&td.Ne(t,t,this._viewTransform),t},Ra.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1},Ra.prototype._setCameraTransform=function(t){var i=this.viewGL.camera;i.position.set(t[4],t[5],0),i.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)},Ra.prototype._updateCamera=function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.top=0,f.bottom=i,f.right=t,f.near=0,f.far=100};var ed=Ra,rd=N.TA.extend({type:"scatterGL",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this.viewGL=new la("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new ed(this.viewGL)},render:function(t,i,l){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,l),!!t.getData().count()){var f=this._pointsBuilderList[0];f||(f=this._pointsBuilderList[0]=new Ia(!0,l)),this._pointsBuilderList.length=1,this.groupGL.add(f.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),f.update(t,i,l),this.viewGL.setPostEffect(t.getModel("postEffect"),l)}},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){if(!(t.end<=t.start)){var c=this._pointsBuilderList[this._currentStep];c||(c=new Ia(!0,f),this._pointsBuilderList[this._currentStep]=c),this.groupGL.add(c.rootNode),this._removeTransformInPoints(i.getData().getLayout("points")),c.setSizeScale(this._sizeScale),c.update(i,l,f,t.start,t.end),f.getZr().refresh(),this._currentStep++}},updateTransform:function(t,i,l){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,l);var f=this._glViewHelper.getZoom(),c=Math.max((t.get("zoomScale")||0)*(f-1)+1,0);this._sizeScale=c,this._pointsBuilderList.forEach(function(p){p.setSizeScale(c)})}},_removeTransformInPoints:function(t){if(!!t)for(var i=[],l=0;l<t.length;l+=2)i[0]=t[l],i[1]=t[l+1],this._glViewHelper.removeTransformInPoint(i),t[l]=i[0],t[l+1]=i[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach(function(t){t.dispose()})},remove:function(){this.groupGL.removeAll()}});function A0(t){t.registerChartView(rd),t.registerSeriesModel(Vh),t.registerLayout({seriesType:"scatterGL",reset:function(i){var l=i.coordinateSystem,f=i.getData(),c;if(l){var p=l.dimensions.map(function(x){return f.mapDimension(x)}).slice(0,2),y=[];p.length===1?c=function(x){for(var w=new Float32Array((x.end-x.start)*2),E=x.start;E<x.end;E++){var B=(E-x.start)*2,q=f.get(p[0],E),yt=l.dataToPoint(q);w[B]=yt[0],w[B+1]=yt[1]}f.setLayout("points",w)}:p.length===2&&(c=function(x){for(var w=new Float32Array((x.end-x.start)*2),E=x.start;E<x.end;E++){var B=(E-x.start)*2,q=f.get(p[0],E),yt=f.get(p[1],E);y[0]=q,y[1]=yt,y=l.dataToPoint(y),w[B]=y[0],w[B+1]=y[1]}f.setLayout("points",w)})}return{progress:c}}})}(0,N.D$)(A0);var nd=F(85446),Wh=F(89344),b0=Wh.Z;function M0(t,i,l,f,c){for(var p=new nd.ZP(f),y=0;y<t.length;y++)p.addNode(Xr.firstNotNull(t[y].id,t[y].name,y),y);for(var x=[],w=[],E=0,y=0;y<i.length;y++){var B=i[y],q=B.source,yt=B.target;p.addEdge(q,yt,E)&&(w.push(B),x.push(Xr.firstNotNull(B.id,q+" > "+yt)),E++)}var _t,Mt=N._y.createDimensions(t,{coordDimensions:["value"]});_t=new N.aV(Mt,l),_t.initData(t);var Ct=new N.aV(["value"],l);return Ct.initData(w,x),c&&c(_t,Ct),b0({mainData:_t,struct:p,structAttr:"graph",datas:{node:_t,edge:Ct},datasAttr:{node:"data",edge:"edgeData"}}),p.update(),p}var ys=N.wJ.extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){ys.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){ys.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,i,l,f){var c=al.getFormattedLabel(this,t,i,l,f);if(c==null){var p=this.getData(),y=p.dimensions[p.dimensions.length-1];c=p.get(y,t)}return c},getInitialData:function(t,i){var l=t.edges||t.links||[],f=t.data||t.nodes||[],c=this;if(f&&l)return M0(f,l,this,!0,p).data;function p(y,x){y.wrapMethod("getItemModel",function(q){const yt=c._categoriesModels,_t=q.getShallow("category"),Mt=yt[_t];return Mt&&(Mt.parentModel=q.parentModel,q.parentModel=Mt),q});const w=i.getModel([]).getModel;function E(q,yt){const _t=w.call(this,q,yt);return _t.resolveParentPath=B,_t}x.wrapMethod("getItemModel",function(q){return q.resolveParentPath=B,q.getModel=E,q});function B(q){if(q&&(q[0]==="label"||q[1]==="label")){const yt=q.slice();return q[0]==="label"?yt[0]="edgeLabel":q[1]==="label"&&(yt[1]="edgeLabel"),yt}return q}}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,i,l){if(l==="edge"){var f=this.getData(),c=this.getDataParams(t,l),p=f.graph.getEdgeByIndex(t),y=f.getName(p.node1.dataIndex),x=f.getName(p.node2.dataIndex),w=[];return y!=null&&w.push(y),x!=null&&w.push(x),w=N.WU.encodeHTML(w.join(" > ")),c.value&&(w+=" : "+N.WU.encodeHTML(c.value)),w}else return ys.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map(function(l){return l.value!=null?l:Object.assign({value:0},l)}),i=new N.aV(["value"],this);i.initData(t),this._categoriesData=i,this._categoriesModels=i.mapArray(function(l){return i.getItemModel(l,!0)})},setView:function(t){t.zoom!=null&&(this.option.zoom=t.zoom),t.offset!=null&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var i=0;i<t.length/2;i++){var l=t[i*2],f=t[i*2+1],c=this.getData().getRawDataItem(i);c.x=l,c.y=f}},isAnimationEnabled:function(){return ys.superCall(this,"isAnimationEnabled")&&!(this.get("layout")==="force"&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),Hh=ys,qn=Vn.vec2,Xh=[[0,0],[1,1]],id=$r.extend(function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new $r.Attribute("position","float",2,"POSITION"),normal:new $r.Attribute("normal","float",2),offset:new $r.Attribute("offset","float",1),color:new $r.Attribute("color","float",4,"COLOR")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var i=this.attributes;this.vertexCount!==t&&(i.position.init(t),i.color.init(t),this.useNativeLine||(i.offset.init(t),i.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(t===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(t*3):new Uint16Array(t*3))},_getCubicCurveApproxStep:function(t,i,l,f){var c=qn.dist(t,i)+qn.dist(l,i)+qn.dist(f,l),p=1/(c+1)*this.segmentScale;return p},getCubicCurveVertexCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?p*2:p*2+2},getCubicCurveTriangleCount:function(t,i,l,f){var c=this._getCubicCurveApproxStep(t,i,l,f),p=Math.ceil(1/c);return this.useNativeLine?0:p*2},getLineVertexCount:function(){return this.getPolylineVertexCount(Xh)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(Xh)},getPolylineVertexCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?(i-1)*2:(i-1)*2+2},getPolylineTriangleCount:function(t){var i;if(typeof t=="number")i=t;else{var l=typeof t[0]!="number";i=l?t.length:t.length/2}return this.useNativeLine?0:(i-1)*2},addCubicCurve:function(t,i,l,f,c,p){p==null&&(p=1);for(var y=t[0],x=t[1],w=i[0],E=i[1],B=l[0],q=l[1],yt=f[0],_t=f[1],Mt=this._getCubicCurveApproxStep(t,i,l,f),Ct=Mt*Mt,Gt=Ct*Mt,Xt=3*Mt,ne=3*Ct,te=6*Ct,qt=6*Gt,ge=y-w*2+B,ve=x-E*2+q,Ne=(w-B)*3-y+yt,Ee=(E-q)*3-x+_t,Ve=y,Qe=x,We=(w-y)*Xt+ge*ne+Ne*Gt,rr=(E-x)*Xt+ve*ne+Ee*Gt,fr=ge*te+Ne*qt,je=ve*te+Ee*qt,hr=Ne*qt,wr=Ee*qt,Ir=0,dr=0,un=Math.ceil(1/Mt),Pr=new Float32Array((un+1)*3),Pr=[],Zr=0,dr=0;dr<un+1;dr++)Pr[Zr++]=Ve,Pr[Zr++]=Qe,Ve+=We,Qe+=rr,We+=fr,rr+=je,fr+=hr,je+=wr,Ir+=Mt,Ir>1&&(Ve=We>0?Math.min(Ve,yt):Math.max(Ve,yt),Qe=rr>0?Math.min(Qe,_t):Math.max(Qe,_t));this.addPolyline(Pr,c,p)},addLine:function(t,i,l,f){this.addPolyline([t,i],l,f)},addPolyline:function(){var t=qn.create(),i=qn.create(),l=qn.create(),f=qn.create(),c=[],p=[],y=[];return function(x,w,E,B,q){if(!!x.length){var yt=typeof x[0]!="number";if(q==null&&(q=yt?x.length:x.length/2),!(q<2)){B==null&&(B=0),E==null&&(E=1),this._itemVertexOffsets.push(this._vertexOffset);for(var _t=yt?typeof w[0]!="number":w.length/4===q,Mt=this.attributes.position,Ct=this.attributes.color,Gt=this.attributes.offset,Xt=this.attributes.normal,ne=this.indices,te=this._vertexOffset,qt,ge=0;ge<q;ge++){if(yt)c=x[ge+B],_t?qt=w[ge+B]:qt=w;else{var ve=ge*2+B;if(c=c||[],c[0]=x[ve],c[1]=x[ve+1],_t){var Ne=ge*4+B;qt=qt||[],qt[0]=w[Ne],qt[1]=w[Ne+1],qt[2]=w[Ne+2],qt[3]=w[Ne+3]}else qt=w}if(this.useNativeLine)ge>1&&(Mt.copy(te,te-1),Ct.copy(te,te-1),te++);else{var Ee;if(ge<q-1){if(yt)qn.copy(p,x[ge+1]);else{var ve=(ge+1)*2+B;p=p||[],p[0]=x[ve],p[1]=x[ve+1]}if(ge>0){qn.sub(t,c,y),qn.sub(i,p,c),qn.normalize(t,t),qn.normalize(i,i),qn.add(f,t,i),qn.normalize(f,f);var Ve=E/2*Math.min(1/qn.dot(t,f),2);l[0]=-f[1],l[1]=f[0],Ee=Ve}else qn.sub(t,p,c),qn.normalize(t,t),l[0]=-t[1],l[1]=t[0],Ee=E/2}else qn.sub(t,c,y),qn.normalize(t,t),l[0]=-t[1],l[1]=t[0],Ee=E/2;Xt.set(te,l),Xt.set(te+1,l),Gt.set(te,Ee),Gt.set(te+1,-Ee),qn.copy(y,c),Mt.set(te,c),Mt.set(te+1,c),Ct.set(te,qt),Ct.set(te+1,qt),te+=2}if(this.useNativeLine)Ct.set(te,qt),Mt.set(te,c),te++;else if(ge>0){var Qe=this._faceOffset*3,ne=this.indices;ne[Qe]=te-4,ne[Qe+1]=te-3,ne[Qe+2]=te-2,ne[Qe+3]=te-3,ne[Qe+4]=te-1,ne[Qe+5]=te-2,this._faceOffset+=2}}this._vertexOffset=te}}}}(),setItemColor:function(t,i){for(var l=this._itemVertexOffsets[t],f=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,c=l;c<f;c++)this.attributes.color.set(c,i);this.dirty("color")}});N.D5.defaults(id.prototype,Rl);var Yh=id,E0=`@export ecgl.forceAtlas2.updateNodeRepulsion

#define NODE_COUNT 0

uniform sampler2D positionTex;

uniform vec2 textureSize;
uniform float gravity;
uniform float scaling;
uniform vec2 gravityCenter;

uniform bool strongGravityMode;
uniform bool preventOverlap;

varying vec2 v_Texcoord;

void main() {

 vec4 n0 = texture2D(positionTex, v_Texcoord);

 vec2 force = vec2(0.0);
 for (int i = 0; i < NODE_COUNT; i++) {
 vec2 uv = vec2(
 mod(float(i), textureSize.x) / (textureSize.x - 1.0),
 floor(float(i) / textureSize.x) / (textureSize.y - 1.0)
 );
 vec4 n1 = texture2D(positionTex, uv);

 vec2 dir = n0.xy - n1.xy;
 float d2 = dot(dir, dir);

 if (d2 > 0.0) {
 float factor = 0.0;
 if (preventOverlap) {
 float d = sqrt(d2);
 d = d - n0.w - n1.w;
 if (d > 0.0) {
 factor = scaling * n0.z * n1.z / (d * d);
 }
 else if (d < 0.0) {
 factor = scaling * 100.0 * n0.z * n1.z;
 }
 }
 else {
 factor = scaling * n0.z * n1.z / d2;
 }
 force += dir * factor;
 }
 }

 vec2 dir = gravityCenter - n0.xy;
 float d = 1.0;
 if (!strongGravityMode) {
 d = length(dir);
 }

 force += dir * n0.z * gravity / (d + 1.0);

 gl_FragColor = vec4(force, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.vertex

attribute vec2 node1;
attribute vec2 node2;
attribute float weight;

uniform sampler2D positionTex;
uniform float edgeWeightInfluence;
uniform bool preventOverlap;
uniform bool linLogMode;

uniform vec2 windowSize: WINDOW_SIZE;

varying vec2 v_Force;

void main() {

 vec4 n0 = texture2D(positionTex, node1);
 vec4 n1 = texture2D(positionTex, node2);

 vec2 dir = n1.xy - n0.xy;
 float d = length(dir);
 float w;
 if (edgeWeightInfluence == 0.0) {
 w = 1.0;
 }
 else if (edgeWeightInfluence == 1.0) {
 w = weight;
 }
 else {
 w = pow(weight, edgeWeightInfluence);
 }
 vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);
 vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);
 vec2 pos = node1 * scale * 2.0 - 1.0;
 gl_Position = vec4(pos + offset, 0.0, 1.0);
 gl_PointSize = 1.0;

 float factor;
 if (preventOverlap) {
 d = d - n1.w - n0.w;
 }
 if (d <= 0.0) {
 v_Force = vec2(0.0);
 return;
 }

 if (linLogMode) {
 factor = w * log(d) / d;
 }
 else {
 factor = w;
 }
 v_Force = dir * factor;
}
@end

@export ecgl.forceAtlas2.updateEdgeAttraction.fragment

varying vec2 v_Force;

void main() {
 gl_FragColor = vec4(v_Force, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.vertex

attribute vec2 node;

varying vec2 v_NodeUv;

void main() {

 v_NodeUv = node;
 gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
 gl_PointSize = 1.0;
}
@end

@export ecgl.forceAtlas2.calcWeightedSum.fragment

varying vec2 v_NodeUv;

uniform sampler2D positionTex;
uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;

void main() {
 vec2 force = texture2D(forceTex, v_NodeUv).rg;
 vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;

 float mass = texture2D(positionTex, v_NodeUv).z;
 float swing = length(force - forcePrev) * mass;
 float traction = length(force + forcePrev) * 0.5 * mass;

 gl_FragColor = vec4(swing, traction, 0.0, 0.0);
}
@end

@export ecgl.forceAtlas2.calcGlobalSpeed

uniform sampler2D globalSpeedPrevTex;
uniform sampler2D weightedSumTex;
uniform float jitterTolerence;

void main() {
 vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;
 float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;
 float globalSpeed = jitterTolerence * jitterTolerence
 * weightedSum.y / weightedSum.x;
 if (prevGlobalSpeed > 0.0) {
 globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;
 }
 gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);
}
@end

@export ecgl.forceAtlas2.updatePosition

uniform sampler2D forceTex;
uniform sampler2D forcePrevTex;
uniform sampler2D positionTex;
uniform sampler2D globalSpeedTex;

varying vec2 v_Texcoord;

void main() {
 vec2 force = texture2D(forceTex, v_Texcoord).xy;
 vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;
 vec4 node = texture2D(positionTex, v_Texcoord);

 float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;
 float swing = length(force - forcePrev);
 float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));

 float df = length(force);
 if (df > 0.0) {
 speed = min(df * speed, 10.0) / df;

 gl_FragColor = vec4(node.xy + speed * force, node.zw);
 }
 else {
 gl_FragColor = node;
 }
}
@end

@export ecgl.forceAtlas2.edges.vertex
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 node;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

uniform sampler2D positionTex;

void main()
{
 gl_Position = worldViewProjection * vec4(
 texture2D(positionTex, node).xy, -10.0, 1.0
 );
 v_Color = a_Color;
}
@end

@export ecgl.forceAtlas2.edges.fragment
uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
varying vec4 v_Color;
void main() {
 gl_FragColor = color * v_Color;
}
@end`;se.Shader.import(E0);var ll={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function di(t){var i={type:se.Texture.FLOAT,minFilter:se.Texture.NEAREST,magFilter:se.Texture.NEAREST};this._positionSourceTex=new se.Texture2D(i),this._positionSourceTex.flipY=!1,this._positionTex=new se.Texture2D(i),this._positionPrevTex=new se.Texture2D(i),this._forceTex=new se.Texture2D(i),this._forcePrevTex=new se.Texture2D(i),this._weightedSumTex=new se.Texture2D(i),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new se.Texture2D(i),this._globalSpeedPrevTex=new se.Texture2D(i),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new Yn({fragment:se.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new Yn({fragment:se.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new Yn({fragment:se.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new Yn({fragment:se.Shader.source("clay.compositor.output")});var l=function(f){f.blendEquation(f.FUNC_ADD),f.blendFunc(f.ONE,f.ONE)};this._edgeForceMesh=new se.Mesh({geometry:new se.Geometry({attributes:{node1:new se.Geometry.Attribute("node1","float",2),node2:new se.Geometry.Attribute("node2","float",2),weight:new se.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new se.Material({transparent:!0,shader:se.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:l,depthMask:!1,depthText:!1}),mode:se.Mesh.POINTS}),this._weightedSumMesh=new se.Mesh({geometry:new se.Geometry({attributes:{node:new se.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new se.Material({transparent:!0,shader:se.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:l,depthMask:!1,depthText:!1}),mode:se.Mesh.POINTS}),this._framebuffer=new Pn({depthBuffer:!1}),this._dummyCamera=new se.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}di.prototype.updateOption=function(t){for(var i in ll)this[i]=ll[i];var l=this._nodes.length;if(l>5e4?this.jitterTolerence=10:l>5e3?this.jitterTolerence=1:this.jitterTolerence=.1,l>100?this.scaling=2:this.scaling=10,t)for(var i in ll)t[i]!=null&&(this[i]=t[i]);if(this.repulsionByDegree)for(var f=this._positionSourceTex.pixels,c=0;c<this._nodes.length;c++)f[c*4+2]=(this._nodes[c].degree||0)+1},di.prototype._updateGravityCenter=function(t){var i=this._nodes,l=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var f=[1/0,1/0],c=[-1/0,-1/0],p=0;p<i.length;p++)f[0]=Math.min(i[p].x,f[0]),f[1]=Math.min(i[p].y,f[1]),c[0]=Math.max(i[p].x,c[0]),c[1]=Math.max(i[p].y,c[1]);this._gravityCenter=[(f[0]+c[0])*.5,(f[1]+c[1])*.5]}for(var p=0;p<l.length;p++){var y=l[p].node1,x=l[p].node2;i[y].degree=(i[y].degree||0)+1,i[x].degree=(i[x].degree||0)+1}},di.prototype.initData=function(t,i){this._nodes=t,this._edges=i,this._updateGravityCenter();var l=Math.ceil(Math.sqrt(t.length)),f=l,c=new Float32Array(l*f*4);this._resize(l,f);for(var p=0,y=0;y<t.length;y++){var x=t[y];c[p++]=x.x||0,c[p++]=x.y||0,c[p++]=x.mass||1,c[p++]=x.size||1}this._positionSourceTex.pixels=c;var w=this._edgeForceMesh.geometry,E=i.length;w.attributes.node1.init(E*2),w.attributes.node2.init(E*2),w.attributes.weight.init(E*2);for(var B=[],y=0;y<i.length;y++){var q=w.attributes,yt=i[y].weight;yt==null&&(yt=1),q.node1.set(y,this.getNodeUV(i[y].node1,B)),q.node2.set(y,this.getNodeUV(i[y].node2,B)),q.weight.set(y,yt),q.node1.set(y+E,this.getNodeUV(i[y].node2,B)),q.node2.set(y+E,this.getNodeUV(i[y].node1,B)),q.weight.set(y+E,yt)}var _t=this._weightedSumMesh.geometry;_t.attributes.node.init(t.length);for(var y=0;y<t.length;y++)_t.attributes.node.set(y,this.getNodeUV(y,B));w.dirty(),_t.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[l,f]),this._inited=!1,this._frame=0},di.prototype.getNodes=function(){return this._nodes},di.prototype.getEdges=function(){return this._edges},di.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var i=this._nodeRepulsionPass;i.setUniform("strongGravityMode",this.strongGravityMode),i.setUniform("gravity",this.gravity),i.setUniform("gravityCenter",this._gravityCenter),i.setUniform("scaling",this.scaling),i.setUniform("preventOverlap",this.preventOverlap),i.setUniform("positionTex",this._positionPrevTex),i.render(t);var l=this._edgeForceMesh;l.material.set("linLogMode",this.linLogMode),l.material.set("edgeWeightInfluence",this.edgeWeightInfluence),l.material.set("preventOverlap",this.preventOverlap),l.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([l],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var f=this._weightedSumMesh;f.material.set("positionTex",this._positionPrevTex),f.material.set("forceTex",this._forceTex),f.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([f],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var c=this._globalSpeedPass;c.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),c.setUniform("weightedSumTex",this._weightedSumTex),c.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),c.render(t);var p=this._positionPass;this._framebuffer.attach(this._positionTex),p.setUniform("globalSpeedTex",this._globalSpeedTex),p.setUniform("positionTex",this._positionPrevTex),p.setUniform("forceTex",this._forceTex),p.setUniform("forcePrevTex",this._forcePrevTex),p.render(t),this._framebuffer.unbind(t),this._swapTexture()},di.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1);for(var f=0;f<i;f++)this.step(t);l&&l()},di.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},di.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1)||0,i},di.prototype.getNodePosition=function(t,i){var l=this._positionArr,f=this._positionTex.width,c=this._positionTex.height,p=f*c;(!l||l.length!==p*4)&&(l=this._positionArr=new Float32Array(p*4)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,f,c,t.gl.RGBA,t.gl.FLOAT,l),this._framebuffer.unbind(t),i||(i=new Float32Array(this._nodes.length*2));for(var y=0;y<this._nodes.length;y++)i[y*2]=l[y*4],i[y*2+1]=l[y*4+1];return i},di.prototype.getTextureData=function(t,i){var l=this["_"+i+"Tex"],f=l.width,c=l.height;this._framebuffer.bind(t),this._framebuffer.attach(l);var p=new Float32Array(f*c*4);return t.gl.readPixels(0,0,f,c,t.gl.RGBA,t.gl.FLOAT,p),this._framebuffer.unbind(t),p},di.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},di.prototype.isFinished=function(t){return this._frame>t},di.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t;var t=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=t;var t=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t},di.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)},di.prototype._resize=function(t,i){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach(function(l){this[l].width=t,this[l].height=i,this[l].dirty()},this)},di.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};var ql=di;function ad(){var t={create:function(){return new Float32Array(2)},dist:function(w,E){var B=E[0]-w[0],q=E[1]-w[1];return Math.sqrt(B*B+q*q)},len:function(w){var E=w[0],B=w[1];return Math.sqrt(E*E+B*B)},scaleAndAdd:function(w,E,B,q){return w[0]=E[0]+B[0]*q,w[1]=E[1]+B[1]*q,w},scale:function(w,E,B){return w[0]=E[0]*B,w[1]=E[1]*B,w},add:function(w,E,B){return w[0]=E[0]+B[0],w[1]=E[1]+B[1],w},sub:function(w,E,B){return w[0]=E[0]-B[0],w[1]=E[1]-B[1],w},normalize:function(w,E){var B=E[0],q=E[1],yt=B*B+q*q;return yt>0&&(yt=1/Math.sqrt(yt),w[0]=E[0]*yt,w[1]=E[1]*yt),w},negate:function(w,E){return w[0]=-E[0],w[1]=-E[1],w},copy:function(w,E){return w[0]=E[0],w[1]=E[1],w},set:function(w,E,B){return w[0]=E,w[1]=B,w}};function i(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var l=i.prototype;l.beforeUpdate=function(){for(var w=0;w<this.nSubRegions;w++)this.subRegions[w].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},l.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var w=0;w<this.nSubRegions;w++)this.subRegions[w].afterUpdate()},l.addNode=function(w){if(this.nSubRegions===0)if(this.node==null){this.node=w;return}else this._addNodeToSubRegion(this.node),this.node=null;this._addNodeToSubRegion(w),this._updateCenterOfMass(w)},l.findSubRegion=function(w,E){for(var B=0;B<this.nSubRegions;B++){var q=this.subRegions[B];if(q.contain(w,E))return q}},l.contain=function(w,E){return this.bbox[0]<=w&&this.bbox[2]>=w&&this.bbox[1]<=E&&this.bbox[3]>=E},l.setBBox=function(w,E,B,q){this.bbox[0]=w,this.bbox[1]=E,this.bbox[2]=B,this.bbox[3]=q,this.size=(B-w+q-E)/2},l._newSubRegion=function(){var w=this.subRegions[this.nSubRegions];return w||(w=new i,this.subRegions[this.nSubRegions]=w),this.nSubRegions++,w},l._addNodeToSubRegion=function(w){var E=this.findSubRegion(w.position[0],w.position[1]),B=this.bbox;if(!E){var q=(B[0]+B[2])/2,yt=(B[1]+B[3])/2,_t=(B[2]-B[0])/2,Mt=(B[3]-B[1])/2,Ct=w.position[0]>=q?1:0,Gt=w.position[1]>=yt?1:0,E=this._newSubRegion();E.setBBox(Ct*_t+B[0],Gt*Mt+B[1],(Ct+1)*_t+B[0],(Gt+1)*Mt+B[1])}E.addNode(w)},l._updateCenterOfMass=function(w){this.centerOfMass==null&&(this.centerOfMass=new Float32Array(2));var E=this.centerOfMass[0]*this.mass,B=this.centerOfMass[1]*this.mass;E+=w.position[0]*w.mass,B+=w.position[1]*w.mass,this.mass+=w.mass,this.centerOfMass[0]=E/this.mass,this.centerOfMass[1]=B/this.mass};function f(){this.position=new Float32Array(2),this.force=t.create(),this.forcePrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function c(w,E){this.source=w,this.target=E,this.weight=1}function p(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new i,this.rootRegion.centerOfMass=t.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}var y=p.prototype;y.initNodes=function(w,E,B){var q=E.length;this.nodes.length=0;for(var yt=typeof B<"u",_t=0;_t<q;_t++){var Mt=new f;Mt.position[0]=w[_t*2],Mt.position[1]=w[_t*2+1],Mt.mass=E[_t],yt&&(Mt.size=B[_t]),this.nodes.push(Mt)}this._massArr=E,this._swingingArr=new Float32Array(q),yt&&(this._sizeArr=B)},y.initEdges=function(w,E){var B=w.length/2;this.edges.length=0;for(var q=0;q<B;q++){var yt=w[q*2],_t=w[q*2+1],Mt=this.nodes[yt],Ct=this.nodes[_t];if(!Mt||!Ct){console.error("Node not exists, try initNodes before initEdges");return}Mt.outDegree++,Ct.inDegree++;var Gt=new c(Mt,Ct);E&&(Gt.weight=E[q]),this.edges.push(Gt)}},y.updateSettings=function(){if(this.repulsionByDegree)for(var w=0;w<this.nodes.length;w++){var E=this.nodes[w];E.mass=E.inDegree+E.outDegree+1}else for(var w=0;w<this.nodes.length;w++){var E=this.nodes[w];E.mass=this._massArr[w]}},y.update=function(){var w=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var E=0;E<w;E++)this.rootRegion.addNode(this.nodes[E]);this.rootRegion.afterUpdate()}for(var E=0;E<w;E++){var B=this.nodes[E];t.copy(B.forcePrev,B.force),t.set(B.force,0,0)}for(var E=0;E<w;E++){var q=this.nodes[E];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,q);else for(var yt=E+1;yt<w;yt++){var _t=this.nodes[yt];this.applyNodeToNodeRepulsion(q,_t,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(q):this.applyNodeGravity(q))}for(var E=0;E<this.edges.length;E++)this.applyEdgeAttraction(this.edges[E]);for(var Mt=0,Ct=0,Gt=t.create(),E=0;E<w;E++){var B=this.nodes[E],Xt=t.dist(B.force,B.forcePrev);Mt+=Xt*B.mass,t.add(Gt,B.force,B.forcePrev);var ne=t.len(Gt)*.5;Ct+=ne*B.mass,this._swingingArr[E]=Xt}var te=this.jitterTolerence*this.jitterTolerence*Ct/Mt;this._globalSpeed>0&&(te=Math.min(te/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=te;for(var E=0;E<w;E++){var B=this.nodes[E],Xt=this._swingingArr[E],qt=.1*te/(1+te*Math.sqrt(Xt)),ge=t.len(B.force);ge>0&&(qt=Math.min(ge*qt,10)/ge,t.scaleAndAdd(B.position,B.position,B.force,qt))}},y.applyRegionToNodeRepulsion=function(){var w=t.create();return function(B,q){if(B.node)this.applyNodeToNodeRepulsion(B.node,q,!0);else{t.sub(w,q.position,B.centerOfMass);var yt=w[0]*w[0]+w[1]*w[1];if(yt>this.barnesHutTheta*B.size*B.size){var _t=this.scaling*q.mass*B.mass/yt;t.scaleAndAdd(q.force,q.force,w,_t)}else for(var Mt=0;Mt<B.nSubRegions;Mt++)this.applyRegionToNodeRepulsion(B.subRegions[Mt],q)}}}(),y.applyNodeToNodeRepulsion=function(){var w=t.create();return function(B,q,yt){if(B!=q){t.sub(w,B.position,q.position);var _t=w[0]*w[0]+w[1]*w[1];if(_t!==0){var Mt;if(this.preventOverlap){var Ct=Math.sqrt(_t);if(Ct=Ct-B.size-q.size,Ct>0)Mt=this.scaling*B.mass*q.mass/(Ct*Ct);else if(Ct<0)Mt=this.scaling*100*B.mass*q.mass;else return}else Mt=this.scaling*B.mass*q.mass/_t;t.scaleAndAdd(B.force,B.force,w,Mt),t.scaleAndAdd(q.force,q.force,w,-Mt)}}}}(),y.applyEdgeAttraction=function(){var w=t.create();return function(B){var q=B.source,yt=B.target;t.sub(w,q.position,yt.position);var _t=t.len(w),Mt;this.edgeWeightInfluence===0?Mt=1:this.edgeWeightInfluence===1?Mt=B.weight:Mt=Math.pow(B.weight,this.edgeWeightInfluence);var Ct;this.preventOverlap&&(_t=_t-q.size-yt.size,_t<=0)||(this.linLogMode?Ct=-Mt*Math.log(_t+1)/(_t+1):Ct=-Mt,t.scaleAndAdd(q.force,q.force,w,Ct),t.scaleAndAdd(yt.force,yt.force,w,-Ct))}}(),y.applyNodeGravity=function(){var w=t.create();return function(E){t.sub(w,this.gravityCenter,E.position);var B=t.len(w);t.scaleAndAdd(E.force,E.force,w,this.gravity*E.mass/(B+1))}}(),y.applyNodeStrongGravity=function(){var w=t.create();return function(E){t.sub(w,this.gravityCenter,E.position),t.scaleAndAdd(E.force,E.force,w,this.gravity*E.mass)}}(),y.updateBBox=function(){for(var w=1/0,E=1/0,B=-1/0,q=-1/0,yt=0;yt<this.nodes.length;yt++){var _t=this.nodes[yt].position;w=Math.min(w,_t[0]),E=Math.min(E,_t[1]),B=Math.max(B,_t[0]),q=Math.max(q,_t[1])}this.bbox[0]=w,this.bbox[1]=E,this.bbox[2]=B,this.bbox[3]=q},y.getGlobalSpeed=function(){return this._globalSpeed};var x=null;self.onmessage=function(w){switch(w.data.cmd){case"init":x=new p,x.initNodes(w.data.nodesPosition,w.data.nodesMass,w.data.nodesSize),x.initEdges(w.data.edges,w.data.edgesWeight);break;case"updateConfig":if(x)for(var E in w.data.config)x[E]=w.data.config[E];break;case"update":var B=w.data.steps;if(x){for(var q=0;q<B;q++)x.update();for(var yt=x.nodes.length,_t=new Float32Array(yt*2),q=0;q<yt;q++){var Mt=x.nodes[q];_t[q*2]=Mt.position[0],_t[q*2+1]=Mt.position[1]}self.postMessage({buffer:_t.buffer,globalSpeed:x.getGlobalSpeed()},[_t.buffer])}else{var Ct=new Float32Array;self.postMessage({buffer:Ct.buffer,globalSpeed:x.getGlobalSpeed()},[Ct.buffer])}break}}}var od=ad,ul=od.toString();ul=ul.slice(ul.indexOf("{")+1,ul.lastIndexOf("}"));var _s={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},qi=function(t){for(var i in _s)this[i]=_s[i];if(t)for(var i in t)this[i]=t[i];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new Yr({type:pr.FLOAT,flipY:!1,minFilter:pr.NEAREST,magFilter:pr.NEAREST})};qi.prototype.initData=function(t,i){var l=new Blob([ul]),f=window.URL.createObjectURL(l);this._worker=new Worker(f),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=i,this._frame=0;for(var c=t.length,p=i.length,y=new Float32Array(c*2),x=new Float32Array(c),w=new Float32Array(c),E=new Float32Array(p*2),B=new Float32Array(p),q=0;q<t.length;q++){var yt=t[q];y[q*2]=yt.x,y[q*2+1]=yt.y,x[q]=yt.mass==null?1:yt.mass,w[q]=yt.size==null?1:yt.size}for(var q=0;q<i.length;q++){var _t=i[q],Mt=_t.node1,Ct=_t.node2;E[q*2]=Mt,E[q*2+1]=Ct,B[q]=_t.weight==null?1:_t.weight}var Gt=Math.ceil(Math.sqrt(t.length)),Xt=Gt,ne=new Float32Array(Gt*Xt*4),te=this._positionTex;te.width=Gt,te.height=Xt,te.pixels=ne,this._worker.postMessage({cmd:"init",nodesPosition:y,nodesMass:x,nodesSize:w,edges:E,edgesWeight:B}),this._globalSpeed=1/0},qi.prototype.updateOption=function(t){var i={};for(var l in _s)i[l]=_s[l];var f=this._nodes,c=this._edges,p=f.length;if(p>5e4?i.jitterTolerence=10:p>5e3?i.jitterTolerence=1:i.jitterTolerence=.1,p>100?i.scaling=2:i.scaling=10,p>1e3?i.barnesHutOptimize=!0:i.barnesHutOptimize=!1,t)for(var l in _s)t[l]!=null&&(i[l]=t[l]);if(!i.gravityCenter){for(var y=[1/0,1/0],x=[-1/0,-1/0],w=0;w<f.length;w++)y[0]=Math.min(f[w].x,y[0]),y[1]=Math.min(f[w].y,y[1]),x[0]=Math.max(f[w].x,x[0]),x[1]=Math.max(f[w].y,x[1]);i.gravityCenter=[(y[0]+x[0])*.5,(y[1]+x[1])*.5]}for(var w=0;w<c.length;w++){var E=c[w].node1,B=c[w].node2;f[E].degree=(f[E].degree||0)+1,f[B].degree=(f[B].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:i})},qi.prototype.update=function(t,i,l){i==null&&(i=1),i=Math.max(i,1),this._frame+=i,this._onupdate=l,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(i)})},qi.prototype._$onupdate=function(t){if(!this._disposed){var i=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=i,this._updateTexture(i),this._onupdate&&this._onupdate()}},qi.prototype.getNodePositionTexture=function(){return this._positionTex},qi.prototype.getNodeUV=function(t,i){i=i||[];var l=this._positionTex.width,f=this._positionTex.height;return i[0]=t%l/(l-1),i[1]=Math.floor(t/l)/(f-1),i},qi.prototype.getNodes=function(){return this._nodes},qi.prototype.getEdges=function(){return this._edges},qi.prototype.isFinished=function(t){return this._frame>t},qi.prototype.getNodePosition=function(t,i){if(i||(i=new Float32Array(this._nodes.length*2)),this._positionArr)for(var l=0;l<this._positionArr.length;l++)i[l]=this._positionArr[l];return i},qi.prototype._updateTexture=function(t){for(var i=this._positionTex.pixels,l=0,f=0;f<t.length;)i[l++]=t[f++],i[l++]=t[f++],i[l++]=1,i[l++]=1;this._positionTex.dirty()},qi.prototype.dispose=function(t){this._disposed=!0,this._worker=null};var sd=qi,C0=X.extend(function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}},function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)},{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(!!this._target&&!!this._needsUpdate){var t=this._target,i=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(i,i,i),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var i=t.offsetX,l=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(i,l))){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var f=this._convertPos(i,l);this._x=f.x,this._y=f.y}}},_convertPos:function(t,i){var l=this.viewGL.camera,f=this.viewGL.viewport;return{x:(t-f.x)/f.width*(l.right-l.left)+l.left,y:(i-f.y)/f.height*(l.bottom-l.top)+l.top}},_mouseMoveHandler:function(t){var i=this._convertPos(t.offsetX,t.offsetY);this._dx+=i.x-this._x,this._dy+=i.y-this._y,this._x=i.x,this._y=i.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){t=t.event;var i=t.wheelDelta||-t.detail;if(i!==0){var l=t.offsetX,f=t.offsetY;if(!(this.viewGL&&!this.viewGL.containPoint(l,f))){var c=i>0?1.1:.9,p=Math.max(Math.min(this._zoom*c,this.maxZoom),this.minZoom);c=p/this._zoom;var y=this._convertPos(l,f),x=(y.x-this._dx)*(c-1),w=(y.y-this._dy)*(c-1);this._dx-=x,this._dy-=w,this._zoom=p,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}}),P0=C0,L0=`@export ecgl.lines2D.vertex

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

attribute vec2 position: POSITION;
attribute vec4 a_Color : COLOR;
varying vec4 v_Color;

#ifdef POSITIONTEXTURE_ENABLED
uniform sampler2D positionTexture;
#endif

void main()
{
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 v_Color = a_Color;
}

@end

@export ecgl.lines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;

void main()
{
 gl_FragColor = color * v_Color;
}
@end


@export ecgl.meshLines2D.vertex

attribute vec2 position: POSITION;
attribute vec2 normal;
attribute float offset;
attribute vec4 a_Color : COLOR;

uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;
uniform vec4 viewport : VIEWPORT;

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);
 gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);

 p2.xy /= p2.w;
 gl_Position.xy /= gl_Position.w;

 vec2 N = normalize(p2.xy - gl_Position.xy);
 gl_Position.xy += N * offset / viewport.zw * 2.0;

 gl_Position.xy *= gl_Position.w;

 v_Color = a_Color;
}
@end


@export ecgl.meshLines2D.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];

varying vec4 v_Color;
varying float v_Miter;

void main()
{
 gl_FragColor = color * v_Color;
}

@end`,Qu=Vn.vec2;se.Shader.import(L0);var I0=1,R0=N.TA.extend({type:"graphGL",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this.viewGL=new la("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Ia(!0,i),this._forceEdgesMesh=new se.Mesh({material:new se.Material({shader:se.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new se.Geometry({attributes:{node:new se.Geometry.Attribute("node","float",2),color:new se.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:se.Mesh.LINES}),this._edgesMesh=new se.Mesh({material:new se.Material({shader:se.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new Yh({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new P0({zr:i.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,i,l){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=l,this._initLayout(t,i,l),this._pointsBuilder.update(t,i,l),this._forceLayoutInstance instanceof ql||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,l),this._control.off("update"),this._control.on("update",function(){l.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)},this),this._control.setZoom(Xr.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var f=this._pointsBuilder.getPointsMesh();if(f.off("mousemove",this._mousemoveHandler),f.off("mouseout",this._mouseOutHandler,this),l.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var c=t.get("focusNodeAdjacencyOn");c==="click"?l.getZr().on("click",this._clickHandler):c==="mouseover"&&(f.on("mousemove",this._mousemoveHandler,this),f.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var i=this._pointsBuilder.getPointsMesh().dataIndex;i>=0?i!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:i}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=i}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,i){var l=this._forceEdgesMesh.geometry,f=i.getEdgeData(),c=0,p=this._forceLayoutInstance,y=f.count()*2;l.attributes.node.init(y),l.attributes.color.init(y),f.each(function(x){var w=t[x];l.attributes.node.set(c,p.getNodeUV(w.node1)),l.attributes.node.set(c+1,p.getNodeUV(w.node2));var E=oi(f,w.dataIndex),B=se.parseColor(E);B[3]*=Xr.firstNotNull(vi(f,w.dataIndex),1),l.attributes.color.set(c,B),l.attributes.color.set(c+1,B),c+=2}),l.dirty()},_updateMeshLinesGeometry:function(){var i=this._model.getEdgeData(),t=this._edgesMesh.geometry,i=this._model.getEdgeData(),l=this._model.getData().getLayout("points");t.resetOffset(),t.setVertexCount(i.count()*t.getLineVertexCount()),t.setTriangleCount(i.count()*t.getLineTriangleCount());var f=[],c=[],p=["lineStyle","width"];this._originalEdgeColors=new Float32Array(i.count()*4),this._edgeIndicesMap=new Float32Array(i.count()),i.each(function(y){var x=i.graph.getEdgeByIndex(y),w=x.node1.dataIndex*2,E=x.node2.dataIndex*2;f[0]=l[w],f[1]=l[w+1],c[0]=l[E],c[1]=l[E+1];var B=oi(i,x.dataIndex),q=se.parseColor(B);q[3]*=Xr.firstNotNull(vi(i,x.dataIndex),1);var yt=i.getItemModel(x.dataIndex),_t=Xr.firstNotNull(yt.get(p),1)*this._api.getDevicePixelRatio();t.addLine(f,c,q,_t);for(var Mt=0;Mt<4;Mt++)this._originalEdgeColors[x.dataIndex*4+Mt]=q[Mt];this._edgeIndicesMap[x.dataIndex]=y},this),t.dirty()},_updateForceNodesGeometry:function(t){for(var i=this._pointsBuilder.getPointsMesh(),l=[],f=0;f<t.count();f++)this._forceLayoutInstance.getNodeUV(f,l),i.geometry.attributes.position.set(f,l);i.geometry.dirty("position")},_initLayout:function(t,i,l){var f=t.get("layout"),c=t.getGraph(),p=t.getBoxLayoutParams(),y=(0,Eu.ME)(p,{width:l.getWidth(),height:l.getHeight()});f==="force"&&(f="forceAtlas2"),this.stopLayout(t,i,l,{beforeLayout:!0});var x=t.getData(),w=t.getData();if(f==="forceAtlas2"){var E=t.getModel("forceAtlas2"),B=this._forceLayoutInstance,q=[],yt=[],_t=x.getDataExtent("value"),Mt=w.getDataExtent("value"),Ct=Xr.firstNotNull(E.get("edgeWeight"),1),Gt=Xr.firstNotNull(E.get("nodeWeight"),1);typeof Ct=="number"&&(Ct=[Ct,Ct]),typeof Gt=="number"&&(Gt=[Gt,Gt]);var Xt=0,ne={},te=new Float32Array(x.count()*2);if(c.eachNode(function(ge){var ve=ge.dataIndex,Ne=x.get("value",ve),Ee,Ve;if(x.hasItemOption){var Qe=x.getItemModel(ve);Ee=Qe.get("x"),Ve=Qe.get("y")}Ee==null&&(Ee=y.x+Math.random()*y.width,Ve=y.y+Math.random()*y.height),te[Xt*2]=Ee,te[Xt*2+1]=Ve,ne[ge.id]=Xt++;var We=N.Rx.linearMap(Ne,_t,Gt);isNaN(We)&&(isNaN(Gt[0])?We=1:We=Gt[0]),q.push({x:Ee,y:Ve,mass:We,size:x.getItemVisual(ve,"symbolSize")})}),x.setLayout("points",te),c.eachEdge(function(ge){var ve=ge.dataIndex,Ne=x.get("value",ve),Ee=N.Rx.linearMap(Ne,Mt,Ct);isNaN(Ee)&&(isNaN(Ct[0])?Ee=1:Ee=Ct[0]),yt.push({node1:ne[ge.node1.id],node2:ne[ge.node2.id],weight:Ee,dataIndex:ve})}),!B){var qt=E.get("GPU");this._forceLayoutInstance&&(qt&&!(this._forceLayoutInstance instanceof ql)||!qt&&!(this._forceLayoutInstance instanceof sd))&&(this._forceLayoutInstanceToDispose=this._forceLayoutInstance),B=this._forceLayoutInstance=qt?new ql:new sd}B.initData(q,yt),B.updateOption(E.option),this._updateForceEdgesGeometry(B.getEdges(),t),this._updatePositionTexture(),l.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{var te=new Float32Array(x.count()*2),Xt=0;c.eachNode(function(Ne){var Ee=Ne.dataIndex,Ve,Qe;if(x.hasItemOption){var We=x.getItemModel(Ee);Ve=We.get("x"),Qe=We.get("y")}te[Xt++]=Ve,te[Xt++]=Qe}),x.setLayout("points",te),this._updateAfterLayout(t,i,l)}},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,i,p,f){if(!(f&&f.from!=null&&f.from!==this.uid)){var c=this.viewGL,p=this._api,y=this._forceLayoutInstance,x=this._model.getData(),w=this._model.getModel("forceAtlas2");if(!!y&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),!!this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var E=this,B=this._layoutId=I0++,q=w.getShallow("maxSteps"),yt=w.getShallow("steps"),_t=0,Mt=Math.max(yt*2,20),Ct=function(Gt){if(Gt===E._layoutId){if(y.isFinished(q)){p.dispatchAction({type:"graphGLStopLayout",from:E.uid}),p.dispatchAction({type:"graphGLFinishLayout",points:x.getLayout("points"),from:E.uid});return}y.update(c.layer.renderer,yt,function(){E._updatePositionTexture(),_t+=yt,_t>=Mt&&(E._syncNodePosition(t),_t=0),p.getZr().refresh(),(0,Su.Z)(function(){Ct(Gt)})})}};(0,Su.Z)(function(){E._forceLayoutInstanceToDispose&&(E._forceLayoutInstanceToDispose.dispose(c.layer.renderer),E._forceLayoutInstanceToDispose=null),Ct(B)}),this._layouting=!0}}},stopLayout:function(t,i,l,f){f&&f.from!=null&&f.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&(!this.viewGL.layer||(f&&f.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,i,l)),this._api.getZr().refresh(),this._layouting=!1)))},_syncNodePosition:function(t){var i=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",i),t.setNodePosition(i)},_updateAfterLayout:function(t,i,l){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,i,l),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,i,l,f){var c=this._model.getData();this._downplayAll();var p=f.dataIndex,y=c.graph,x=[],w=y.getNodeByIndex(p);x.push(w),w.edges.forEach(function(B){B.dataIndex<0||(B.node1!==w&&x.push(B.node1),B.node2!==w&&x.push(B.node2))},this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),x.forEach(function(B){this._pointsBuilder.highlight(c,B.dataIndex)},this),this._pointsBuilder.updateLabels(x.map(function(B){return B.dataIndex}));var E=[];w.edges.forEach(function(B){B.dataIndex>=0&&(this._highlightEdge(B.dataIndex),E.push(B))},this),this._focusNodes=x,this._focusEdges=E},unfocusNodeAdjacency:function(t,i,l,f){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var i=this._model.getEdgeData().getItemModel(t),l=se.parseColor(i.get("emphasis.lineStyle.color")||i.get("lineStyle.color")),f=Xr.firstNotNull(i.get("emphasis.lineStyle.opacity"),i.get("lineStyle.opacity"),1);l[3]*=f,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],l)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach(function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)},this),this._focusEdges&&this._focusEdges.forEach(function(t){this._downplayEdge(t.dataIndex)},this)},_downplayEdge:function(t){var i=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],i)},_setEdgeFade:function(){var t=[];return function(i,l){this._getColor(i,t),t[3]*=l,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[i],t)}}(),_getColor:function(t,i){for(var l=0;l<4;l++)i[l]=this._originalEdgeColors[t*4+l];return i},_fadeOutEdgesAll:function(t){var i=this._model.getData().graph;i.eachEdge(function(l){this._setEdgeFade(l.dataIndex,t)},this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,i){this.viewGL.setViewport(0,0,i.getWidth(),i.getHeight(),i.getDevicePixelRatio());for(var l=this.viewGL.camera,f=t.getData(),c=f.getLayout("points"),p=Qu.create(1/0,1/0),y=Qu.create(-1/0,-1/0),x=[],w=0;w<c.length;)x[0]=c[w++],x[1]=c[w++],Qu.min(p,p,x),Qu.max(y,y,x);var E=(y[1]+p[1])/2,B=(y[0]+p[0])/2;if(!(B>l.left&&B<l.right&&E<l.bottom&&E>l.top)){var q=Math.max(y[0]-p[0],10),yt=q/i.getWidth()*i.getHeight();q*=1.4,yt*=1.4,p[0]-=q*.2,l.left=p[0],l.top=E-yt/2,l.bottom=E+yt/2,l.right=q+p[0],l.near=0,l.far=100}},dispose:function(){var t=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(t),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function $u(t){return t instanceof Array||(t=[t,t]),t}function ld(t){t.registerChartView(R0),t.registerSeriesModel(Hh),t.registerVisual(function(l){const f={};l.eachSeriesByType("graphGL",function(c){var p=c.getCategoriesData(),y=c.getData(),x={};p.each(function(w){var E=p.getName(w);x["ec-"+E]=w;var B=p.getItemModel(w),q=B.getModel("itemStyle").getItemStyle();q.fill||(q.fill=c.getColorFromPalette(E,f)),p.setItemVisual(w,"style",q);var yt=["symbol","symbolSize","symbolKeepAspect"];for(let Mt=0;Mt<yt.length;Mt++){var _t=B.getShallow(yt[Mt],!0);_t!=null&&p.setItemVisual(w,yt[Mt],_t)}}),p.count()&&y.each(function(w){var E=y.getItemModel(w);let B=E.getShallow("category");if(B!=null){typeof B=="string"&&(B=x["ec-"+B]);var q=p.getItemVisual(B,"style"),yt=y.ensureUniqueItemVisual(w,"style");N.D5.extend(yt,q);var _t=["symbol","symbolSize","symbolKeepAspect"];for(let Mt=0;Mt<_t.length;Mt++)y.setItemVisual(w,_t[Mt],p.getItemVisual(B,_t[Mt]))}})})}),t.registerVisual(function(l){l.eachSeriesByType("graphGL",function(f){var c=f.getGraph(),p=f.getEdgeData(),y=$u(f.get("edgeSymbol")),x=$u(f.get("edgeSymbolSize"));p.setVisual("drawType","stroke"),p.setVisual("fromSymbol",y&&y[0]),p.setVisual("toSymbol",y&&y[1]),p.setVisual("fromSymbolSize",x&&x[0]),p.setVisual("toSymbolSize",x&&x[1]),p.setVisual("style",f.getModel("lineStyle").getLineStyle()),p.each(function(w){var E=p.getItemModel(w),B=c.getEdgeByIndex(w),q=$u(E.getShallow("symbol",!0)),yt=$u(E.getShallow("symbolSize",!0)),_t=E.getModel("lineStyle").getLineStyle(),Mt=p.ensureUniqueItemVisual(w,"style");switch(N.D5.extend(Mt,_t),Mt.stroke){case"source":{var Ct=B.node1.getVisual("style");Mt.stroke=Ct&&Ct.fill;break}case"target":{var Ct=B.node2.getVisual("style");Mt.stroke=Ct&&Ct.fill;break}}q[0]&&B.setVisual("fromSymbol",q[0]),q[1]&&B.setVisual("toSymbol",q[1]),yt[0]&&B.setVisual("fromSymbolSize",yt[0]),yt[1]&&B.setVisual("toSymbolSize",yt[1])})})}),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},function(l,f){f.eachComponent({mainType:"series",query:l},function(c){c.setView(l)})});function i(){}t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},i),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},i),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},i),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},i)}(0,N.D$)(ld);var O0=N.wJ.extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,i){var l=this.get("coordinateSystem"),f=l==="geo"?["lng","lat"]:N.wL(l)||["x","y"];f.push("vx","vy");var c=N._y.createDimensions(this.getSource(),{coordDimensions:f,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),p=new N.aV(c,this);return p.initData(this.getSource()),p},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}}),N0=$r.extend(function(){return{dynamic:!0,attributes:{position:new $r.Attribute("position","float",3,"POSITION")}}},{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var i=this.attributes,l=4*t,f=2*t;this.vertexCount!==l&&i.position.init(l),this.triangleCount!==f&&(f===0?this.indices=null:this.indices=this.vertexCount>65535?new Uint32Array(f*3):new Uint16Array(f*3))},addLine:function(t){var i=this._vertexOffset;this.attributes.position.set(i,[t[0],t[1],1]),this.attributes.position.set(i+1,[t[0],t[1],-1]),this.attributes.position.set(i+2,[t[0],t[1],2]),this.attributes.position.set(i+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[i,i+1,i+2]),this.setTriangleIndices(this._faceOffset++,[i+1,i+2,i+3]),this._vertexOffset+=4}}),B0=N0,F0=`@export ecgl.vfParticle.particle.fragment

uniform sampler2D particleTexture;
uniform sampler2D spawnTexture;
uniform sampler2D velocityTexture;

uniform float deltaTime;
uniform float elapsedTime;

uniform float speedScaling : 1.0;

uniform vec2 textureSize;
uniform vec4 region : [0, 0, 1, 1];
uniform float firstFrameTime;

varying vec2 v_Texcoord;


void main()
{
 vec4 p = texture2D(particleTexture, v_Texcoord);
 bool spawn = false;
 if (p.w <= 0.0) {
 p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));
 p.w -= firstFrameTime;
 spawn = true;
 }
 vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;
 v = (v - 0.5) * 2.0;
 p.z = length(v);
 p.xy += v * deltaTime / 10.0 * speedScaling;
 p.w -= deltaTime;

 if (spawn || p.xy != fract(p.xy)) {
 p.z = 0.0;
 }
 p.xy = fract(p.xy);

 gl_FragColor = p;
}
@end

@export ecgl.vfParticle.renderPoints.vertex

#define PI 3.1415926

attribute vec2 texcoord : TEXCOORD_0;

uniform sampler2D particleTexture;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

uniform float size : 1.0;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 vec4 p = texture2D(particleTexture, texcoord);

 if (p.w > 0.0 && p.z > 1e-5) {
 gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }

 v_Mag = p.z;
 v_Uv = p.xy;

 gl_PointSize = size;
}

@end

@export ecgl.vfParticle.renderPoints.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;
uniform sampler2D spriteTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
#ifdef SPRITETEXTURE_ENABLED
 gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);
 if (color.a == 0.0) {
 discard;
 }
#endif
#ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end

@export ecgl.vfParticle.renderLines.vertex

#define PI 3.1415926

attribute vec3 position : POSITION;

uniform sampler2D particleTexture;
uniform sampler2D prevParticleTexture;

uniform float size : 1.0;
uniform vec4 vp: VIEWPORT;
uniform mat4 worldViewProjection : WORLDVIEWPROJECTION;

varying float v_Mag;
varying vec2 v_Uv;

@import clay.util.rand

void main()
{
 vec4 p = texture2D(particleTexture, position.xy);
 vec4 p2 = texture2D(prevParticleTexture, position.xy);

 p.xy = p.xy * 2.0 - 1.0;
 p2.xy = p2.xy * 2.0 - 1.0;

 if (p.w > 0.0 && p.z > 1e-5) {
 vec2 dir = normalize(p.xy - p2.xy);
 vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;
 if (abs(position.z) == 2.0) {
 gl_Position = vec4(p.xy + norm, 0.0, 1.0);
 v_Uv = p.xy;
 v_Mag = p.z;
 }
 else {
 gl_Position = vec4(p2.xy + norm, 0.0, 1.0);
 v_Mag = p2.z;
 v_Uv = p2.xy;
 }
 gl_Position = worldViewProjection * gl_Position;
 }
 else {
 gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);
 }
}

@end

@export ecgl.vfParticle.renderLines.fragment

uniform vec4 color : [1.0, 1.0, 1.0, 1.0];
uniform sampler2D gradientTexture;
uniform sampler2D colorTexture;

varying float v_Mag;
varying vec2 v_Uv;

void main()
{
 gl_FragColor = color;
 #ifdef GRADIENTTEXTURE_ENABLED
 gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));
#endif
#ifdef COLORTEXTURE_ENABLED
 gl_FragColor *= texture2D(colorTexture, v_Uv);
#endif
}

@end
`;_r.import(F0);function z0(t){var i=document.createElement("canvas");i.width=i.height=t;var l=i.getContext("2d");return l.fillStyle="#fff",l.arc(t/2,t/2,t/2,0,Math.PI*2),l.fill(),i}var Kh=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new Yr({type:pr.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};Kh.prototype={constructor:Kh,init:function(){var t={type:pr.FLOAT,minFilter:pr.NEAREST,magFilter:pr.NEAREST,useMipmap:!1};this._spawnTexture=new Yr(t),this._particleTexture0=new Yr(t),this._particleTexture1=new Yr(t),this._frameBuffer=new Pn({depthBuffer:!1}),this._particlePass=new Yn({fragment:_r.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new Yn({fragment:_r.source("clay.compositor.downsample")});var i=new wa({renderOrder:10,material:new Oe({shader:new _r(_r.source("ecgl.vfParticle.renderPoints.vertex"),_r.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:wa.POINTS,geometry:new $r({dynamic:!0,mainAttribute:"texcoord0"})}),l=new wa({renderOrder:10,material:new Oe({shader:new _r(_r.source("ecgl.vfParticle.renderLines.vertex"),_r.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new B0,culling:!1}),f=new wa({material:new Oe({shader:new _r(_r.source("ecgl.color.vertex"),_r.source("ecgl.color.fragment"))}),geometry:new Vt});f.material.enableTexture("diffuseMap"),this._particlePointsMesh=i,this._particleLinesMesh=l,this._lastFrameFullQuadMesh=f,this._camera=new Zo,this._thisFrameTexture=new Yr,this._lastFrameTexture=new Yr},setParticleDensity:function(t,i){for(var l=t*i,f=new Float32Array(l*4),c=0,p=this.particleLife,y=0;y<t;y++)for(var x=0;x<i;x++,c++){f[c*4]=Math.random(),f[c*4+1]=Math.random(),f[c*4+2]=Math.random();var w=(p[1]-p[0])*Math.random()+p[0];f[c*4+3]=w}this._particleType==="line"?this._setLineGeometry(t,i):this._setPointsGeometry(t,i),this._spawnTexture.width=t,this._spawnTexture.height=i,this._spawnTexture.pixels=f,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=i,this._particlePass.setUniform("textureSize",[t,i])},_setPointsGeometry:function(t,i){var l=t*i,f=this._particlePointsMesh.geometry,c=f.attributes;c.texcoord0.init(l);for(var p=0,y=0;y<t;y++)for(var x=0;x<i;x++,p++)c.texcoord0.value[p*2]=y/t,c.texcoord0.value[p*2+1]=x/i;f.dirty()},_setLineGeometry:function(t,i){var l=t*i,f=this._getParticleMesh().geometry;f.setLineCount(l),f.resetOffset();for(var c=0;c<t;c++)for(var p=0;p<i;p++)f.addLine([c/t,p/i]);f.dirty()},_getParticleMesh:function(){return this._particleType==="line"?this._particleLinesMesh:this._particlePointsMesh},update:function(t,i,l,f){var c=this._getParticleMesh(),p=this._frameBuffer,y=this._particlePass;f&&this._updateDownsampleTextures(t,i),c.material.set("size",this._particleSize*this._supersampling),c.material.set("color",this.particleColor),y.setUniform("speedScaling",this.particleSpeedScaling),p.attach(this._particleTexture1),y.setUniform("firstFrameTime",f?(this.particleLife[1]+this.particleLife[0])/2:0),y.setUniform("particleTexture",this._particleTexture0),y.setUniform("deltaTime",l),y.setUniform("elapsedTime",this._elapsedTime),y.render(t,p),c.material.set("particleTexture",this._particleTexture1),c.material.set("prevParticleTexture",this._particleTexture0),p.attach(this._thisFrameTexture),p.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var x=this._lastFrameFullQuadMesh;x.material.set("diffuseMap",this._lastFrameTexture),x.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([x,c],this._camera),p.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=l},_downsample:function(t){var i=this._downsampleTextures;if(i.length!==0)for(var l=0,f=this._thisFrameTexture,c=i[l];c;)this._frameBuffer.attach(c),this._downsamplePass.setUniform("texture",f),this._downsamplePass.setUniform("textureSize",[f.width,f.height]),this._downsamplePass.render(t,this._frameBuffer),f=c,c=i[++l]},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,i){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=i*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=i*this._supersampling,this._width=t,this._height=i},setParticleSize:function(t){var i=this._getParticleMesh();if(t<=2){i.material.disableTexture("spriteTexture"),i.material.transparent=!1;return}this._spriteTexture||(this._spriteTexture=new Yr),(!this._spriteTexture.image||this._spriteTexture.image.width!==t)&&(this._spriteTexture.image=z0(t),this._spriteTexture.dirty()),i.material.transparent=!0,i.material.enableTexture("spriteTexture"),i.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var i=this._getParticleMesh().material;i[t?"enableTexture":"disableTexture"]("gradientTexture"),i.setUniform("gradientTexture",t)},setColorTextureImage:function(t,i){var l=this._getParticleMesh().material;l.setTextureImage("colorTexture",t,i,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var i=this._frameBuffer;i.attach(this._lastFrameTexture),i.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),i.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,i){for(var l=this._downsampleTextures,f=Math.max(Math.floor(Math.log(this._supersampling/i.getDevicePixelRatio())/Math.log(2)),0),c=2,p=this._width*this._supersampling,y=this._height*this._supersampling,x=0;x<f;x++)l[x]=l[x]||new Yr,l[x].width=p/c,l[x].height=y/c,c*=2;for(;x<l.length;x++)l[x].dispose(t);l.length=f},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t;var t=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach(function(i){i.dispose(t)})}};var G0=Kh,U0=N.TA.extend({type:"flowGL",__ecgl__:!0,init:function(t,i){this.viewGL=new la("orthographic"),this.groupGL=new se.Node,this.viewGL.add(this.groupGL),this._particleSurface=new G0;var l=new se.Mesh({geometry:new se.PlaneGeometry,material:new se.Material({shader:new se.Shader({vertex:se.Shader.source("ecgl.color.vertex"),fragment:se.Shader.source("ecgl.color.fragment")}),transparent:!0})});l.material.enableTexture("diffuseMap"),this.groupGL.add(l),this._planeMesh=l},render:function(t,i,l){var f=this._particleSurface;f.setParticleType(t.get("particleType")),f.setSupersampling(t.get("supersampling")),this._updateData(t,l),this._updateCamera(l.getWidth(),l.getHeight(),l.getDevicePixelRatio());var c=Xr.firstNotNull(t.get("particleDensity"),128);f.setParticleDensity(c,c);var p=this._planeMesh,y=+new Date,x=this,w=!0;p.__percent=0,p.stopAnimation(),p.animate("",{loop:!0}).when(1e5,{__percent:1}).during(function(){var q=+new Date,yt=Math.min(q-y,20);y=y+yt,x._renderer&&(f.update(x._renderer,l,yt/1e3,w),p.material.set("diffuseMap",f.getSurfaceTexture())),w=!1}).start();var E=t.getModel("itemStyle"),B=se.parseColor(E.get("color"));B[3]*=Xr.firstNotNull(E.get("opacity"),1),p.material.set("color",B),f.setColorTextureImage(t.get("colorTexture"),l),f.setParticleSize(t.get("particleSize")),f.particleSpeedScaling=t.get("particleSpeed"),f.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,i,l){this._updateData(t,l)},afterRender:function(t,i,l,f){var c=f.renderer;this._renderer=c},_updateData:function(t,i){var l=t.coordinateSystem,f=l.dimensions.map(function(ne){return t.coordDimToDataDim(ne)[0]}),c=t.getData(),p=c.getDataExtent(f[0]),y=c.getDataExtent(f[1]),x=t.get("gridWidth"),w=t.get("gridHeight");if(x==null||x==="auto"){var E=(p[1]-p[0])/(y[1]-y[0]);x=Math.round(Math.sqrt(E*c.count()))}(w==null||w==="auto")&&(w=Math.ceil(c.count()/x));var B=this._particleSurface.vectorFieldTexture,q=B.pixels;if(!q||q.length!==w*x*4)q=B.pixels=new Float32Array(x*w*4);else for(var yt=0;yt<q.length;yt++)q[yt]=0;var _t=0,Mt=1/0,Ct=new Float32Array(c.count()*2),Gt=0,Xt=[[1/0,1/0],[-1/0,-1/0]];c.each([f[0],f[1],"vx","vy"],function(ne,te,qt,ge){var ve=l.dataToPoint([ne,te]);Ct[Gt++]=ve[0],Ct[Gt++]=ve[1],Xt[0][0]=Math.min(ve[0],Xt[0][0]),Xt[0][1]=Math.min(ve[1],Xt[0][1]),Xt[1][0]=Math.max(ve[0],Xt[1][0]),Xt[1][1]=Math.max(ve[1],Xt[1][1]);var Ne=Math.sqrt(qt*qt+ge*ge);_t=Math.max(_t,Ne),Mt=Math.min(Mt,Ne)}),c.each(["vx","vy"],function(ne,te,qt){var ge=Math.round((Ct[qt*2]-Xt[0][0])/(Xt[1][0]-Xt[0][0])*(x-1)),ve=w-1-Math.round((Ct[qt*2+1]-Xt[0][1])/(Xt[1][1]-Xt[0][1])*(w-1)),Ne=(ve*x+ge)*4;q[Ne]=ne/_t*.5+.5,q[Ne+1]=te/_t*.5+.5,q[Ne+3]=1}),B.width=x,B.height=w,t.get("coordinateSystem")==="bmap"&&this._fillEmptyPixels(B),B.dirty(),this._updatePlanePosition(Xt[0],Xt[1],t,i),this._updateGradientTexture(c.getVisual("visualMeta"),[Mt,_t])},_fillEmptyPixels:function(t){var i=t.pixels,l=t.width,f=t.height;function c(Ct,Gt,Xt){Ct=Math.max(Math.min(Ct,l-1),0),Gt=Math.max(Math.min(Gt,f-1),0);var ne=(Gt*(l-1)+Ct)*4;return i[ne+3]===0?!1:(Xt[0]=i[ne],Xt[1]=i[ne+1],!0)}function p(Ct,Gt,Xt){Xt[0]=Ct[0]+Gt[0],Xt[1]=Ct[1]+Gt[1]}for(var y=[],x=[],w=[],E=[],B=[],q=0,yt=0;yt<f;yt++)for(var _t=0;_t<l;_t++){var Mt=(yt*(l-1)+_t)*4;i[Mt+3]===0&&(q=y[0]=y[1]=0,c(_t-1,yt,x)&&(q++,p(x,y,y)),c(_t+1,yt,w)&&(q++,p(w,y,y)),c(_t,yt-1,E)&&(q++,p(E,y,y)),c(_t,yt+1,B)&&(q++,p(B,y,y)),y[0]/=q,y[1]/=q,i[Mt]=y[0],i[Mt+1]=y[1]),i[Mt+3]=1}},_updateGradientTexture:function(t,i){if(!t||!t.length){this._particleSurface.setGradientTexture(null);return}this._gradientTexture=this._gradientTexture||new se.Texture2D({image:document.createElement("canvas")});var l=this._gradientTexture,f=l.image;f.width=200,f.height=1;var c=f.getContext("2d"),p=c.createLinearGradient(0,.5,f.width,.5);t[0].stops.forEach(function(y){var x;i[1]===i[0]?x=0:(x=y.value/i[1],x=Math.min(Math.max(x,0),1)),p.addColorStop(x,y.color)}),c.fillStyle=p,c.fillRect(0,0,f.width,f.height),l.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)},_updatePlanePosition:function(t,i,l,f){var c=this._limitInViewportAndFullFill(t,i,l,f);t=c.leftTop,i=c.rightBottom,this._particleSurface.setRegion(c.region),this._planeMesh.position.set((t[0]+i[0])/2,f.getHeight()-(t[1]+i[1])/2,0);var p=i[0]-t[0],y=i[1]-t[1];this._planeMesh.scale.set(p/2,y/2,1),this._particleSurface.resize(Math.max(Math.min(p,2048),1),Math.max(Math.min(y,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,i,l,f){var c=[Math.max(t[0],0),Math.max(t[1],0)],p=[Math.min(i[0],f.getWidth()),Math.min(i[1],f.getHeight())];if(l.get("coordinateSystem")==="bmap"){var y=l.getData().getDataExtent(l.coordDimToDataDim("lng")[0]),x=Math.floor(y[1]-y[0])>=359;x&&(c[0]>0&&(c[0]=0),p[0]<f.getWidth()&&(p[0]=f.getWidth()))}var w=i[0]-t[0],E=i[1]-t[1],B=p[0]-c[0],q=p[1]-c[1],yt=[(c[0]-t[0])/w,1-q/E-(c[1]-t[1])/E,B/w,q/E];return{leftTop:c,rightBottom:p,region:yt}},_updateCamera:function(t,i,l){this.viewGL.setViewport(0,0,t,i,l);var f=this.viewGL.camera;f.left=f.bottom=0,f.top=i,f.right=t,f.near=0,f.far=100,f.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function k0(t){t.registerChartView(U0),t.registerSeriesModel(O0)}(0,N.D$)(k0);var ud=F(33051),jh=N.wJ.extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),jh.superApply(this,"init",arguments)},mergeOption:function(t){var i=this._processFlatCoordsArray(t.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(t.data=new Float32Array(i.count)),jh.superApply(this,"mergeOption",arguments)},appendData:function(t){var i=this._processFlatCoordsArray(t.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=(0,ud.WW)(this._flatCoords,i.flatCoords),this._flatCoordsOffset=(0,ud.WW)(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),t.data=new Float32Array(i.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var i=this.getData().getItemModel(t),l=i.option instanceof Array?i.option:i.getShallow("coords");return l},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[t*2+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,i){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[t*2],f=this._flatCoordsOffset[t*2+1],c=0;c<f;c++)i[c]=i[c]||[],i[c][0]=this._flatCoords[l+c*2],i[c][1]=this._flatCoords[l+c*2+1];return f}else{for(var p=this._getCoordsFromItemModel(t),c=0;c<p.length;c++)i[c]=i[c]||[],i[c][0]=p[c][0],i[c][1]=p[c][1];return p.length}},_processFlatCoordsArray:function(t){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),typeof t[0]=="number"){for(var l=t.length,f=new Uint32Array(l),c=new Float64Array(l),p=0,y=0,x=0,w=0;w<l;){x++;var E=t[w++];f[y++]=p+i,f[y++]=E;for(var B=0;B<E;B++){var q=t[w++],yt=t[w++];c[p++]=q,c[p++]=yt,w>l}}return{flatCoordsOffset:new Uint32Array(f.buffer,0,y),flatCoords:c,count:x}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,i){var l=new N.aV(["value"],this);return l.hasItemOption=!1,l.initData(t.data,[],function(f,c,p,y){if(f instanceof Array)return NaN;l.hasItemOption=!0;var x=f.value;if(x!=null)return x instanceof Array?x[y]:x}),l},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),V0=jh,Z0=N.TA.extend({type:"linesGL",__ecgl__:!0,init:function(t,i){this.groupGL=new se.Node,this.viewGL=new la("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new ed(this.viewGL),this._nativeLinesShader=se.createShader("ecgl.lines3D"),this._meshLinesShader=se.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l);var f=this._linesMeshes[0];f||(f=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(f),this._updateLinesMesh(t,f,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalPrepareRender:function(t,i,l){this.groupGL.removeAll(),this._glViewHelper.reset(t,l),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),l)},incrementalRender:function(t,i,l,f){var c=this._linesMeshes[this._currentStep];c||(c=this._createLinesMesh(i),this._linesMeshes[this._currentStep]=c),this._updateLinesMesh(i,c,t.start,t.end),this.groupGL.add(c),f.getZr().refresh(),this._currentStep++},updateTransform:function(t,i,l){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,l)},_createLinesMesh:function(t){var i=new se.Mesh({$ignorePicking:!0,material:new se.Material({shader:se.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new Yh({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:se.Mesh.LINES,culling:!1});return i},_updateLinesMesh:function(t,i,l,f){var c=t.getData();i.material.blend=t.get("blendMode")==="lighter"?se.additiveBlend:null;var p=t.get("lineStyle.curveness")||0,y=t.get("polyline"),x=i.geometry,w=t.coordinateSystem,E=Xr.firstNotNull(t.get("lineStyle.width"),1);E>1?(i.material.shader!==this._meshLinesShader&&i.material.attachShader(this._meshLinesShader),i.mode=se.Mesh.TRIANGLES):(i.material.shader!==this._nativeLinesShader&&i.material.attachShader(this._nativeLinesShader),i.mode=se.Mesh.LINES),l=l||0,f=f||c.count(),x.resetOffset();var B=0,q=0,yt=[],_t=[],Mt=[],Ct=[],Gt=[],Xt=.3,ne=.7;function te(){_t[0]=yt[0]*ne+Ct[0]*Xt-(yt[1]-Ct[1])*p,_t[1]=yt[1]*ne+Ct[1]*Xt-(Ct[0]-yt[0])*p,Mt[0]=yt[0]*Xt+Ct[0]*ne-(yt[1]-Ct[1])*p,Mt[1]=yt[1]*Xt+Ct[1]*ne-(Ct[0]-yt[0])*p}if(y||p!==0)for(var qt=l;qt<f;qt++)if(y){var ge=t.getLineCoordsCount(qt);B+=x.getPolylineVertexCount(ge),q+=x.getPolylineTriangleCount(ge)}else t.getLineCoords(qt,Gt),this._glViewHelper.dataToPoint(w,Gt[0],yt),this._glViewHelper.dataToPoint(w,Gt[1],Ct),te(),B+=x.getCubicCurveVertexCount(yt,_t,Mt,Ct),q+=x.getCubicCurveTriangleCount(yt,_t,Mt,Ct);else{var ve=f-l;B+=ve*x.getLineVertexCount(),q+=ve*x.getLineVertexCount()}x.setVertexCount(B),x.setTriangleCount(q);for(var Ne=l,Ee=[],qt=l;qt<f;qt++){se.parseColor(oi(c,Ne),Ee);var Ve=Xr.firstNotNull(vi(c,Ne),1);Ee[3]*=Ve;for(var ge=t.getLineCoords(qt,Gt),Qe=0;Qe<ge;Qe++)this._glViewHelper.dataToPoint(w,Gt[Qe],Gt[Qe]);y?x.addPolyline(Gt,Ee,E,0,ge):p!==0?(yt=Gt[0],Ct=Gt[1],te(),x.addCubicCurve(yt,_t,Mt,Ct,Ee,E)):x.addPolyline(Gt,Ee,E,0,2),Ne++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function fd(t){t.registerChartView(Z0),t.registerSeriesModel(V0)}(0,N.D$)(fd)},20002:function(Ce,Jt,F){"use strict";F.d(Jt,{S1:function(){return ct.S1},je:function(){return ct.je}});var N=F(68023),ct=F(78670),K=F(24839),dt=F(327),gt=F(44535),vt=F(80423),it=F(71505),et=Math.sin,H=Math.cos,J=Math.PI,at=Math.PI*2,G=180/J,U=function(){function a(){}return a.prototype.reset=function(r){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,r||4)},a.prototype.moveTo=function(r,e){this._add("M",r,e)},a.prototype.lineTo=function(r,e){this._add("L",r,e)},a.prototype.bezierCurveTo=function(r,e,n,o,s,u){this._add("C",r,e,n,o,s,u)},a.prototype.quadraticCurveTo=function(r,e,n,o){this._add("Q",r,e,n,o)},a.prototype.arc=function(r,e,n,o,s,u){this.ellipse(r,e,n,n,0,o,s,u)},a.prototype.ellipse=function(r,e,n,o,s,u,h,v){var d=h-u,m=!v,_=Math.abs(d),S=(0,K.zT)(_-at)||(m?d>=at:-d>=at),b=d>0?d%at:d%at+at,P=!1;S?P=!0:(0,K.zT)(_)?P=!1:P=b>=J==!!m;var R=r+n*H(u),Y=e+o*et(u);this._start&&this._add("M",R,Y);var nt=Math.round(s*G);if(S){var pt=1/this._p,mt=(m?1:-1)*(at-pt);this._add("A",n,o,nt,1,+m,r+n*H(u+mt),e+o*et(u+mt)),pt>.01&&this._add("A",n,o,nt,0,+m,R,Y)}else{var bt=r+n*H(h),Lt=e+o*et(h);this._add("A",n,o,nt,+P,+m,bt,Lt)}},a.prototype.rect=function(r,e,n,o){this._add("M",r,e),this._add("l",n,0),this._add("l",0,o),this._add("l",-n,0),this._add("Z")},a.prototype.closePath=function(){this._d.length>0&&this._add("Z")},a.prototype._add=function(r,e,n,o,s,u,h,v,d){for(var m=[],_=this._p,S=1;S<arguments.length;S++){var b=arguments[S];if(isNaN(b)){this._invalid=!0;return}m.push(Math.round(b*_)/_)}this._d.push(r+m.join(" ")),this._start=r==="Z"},a.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},a.prototype.getStr=function(){return this._str},a}(),W=U,lt=F(50810),g=F(33051),j="none",rt=Math.round;function $(a){var r=a.fill;return r!=null&&r!==j}function O(a){var r=a.stroke;return r!=null&&r!==j}var X=["lineCap","miterLimit","lineJoin"],Q=(0,g.UI)(X,function(a){return"stroke-"+a.toLowerCase()});function k(a,r,e,n){var o=r.opacity==null?1:r.opacity;if(e instanceof gt.ZP){a("opacity",o);return}if($(r)){var s=(0,K.ut)(r.fill);a("fill",s.color);var u=r.fillOpacity!=null?r.fillOpacity*s.opacity*o:s.opacity*o;(n||u<1)&&a("fill-opacity",u)}else a("fill",j);if(O(r)){var h=(0,K.ut)(r.stroke);a("stroke",h.color);var v=r.strokeNoScale?e.getLineScale():1,d=v?(r.lineWidth||0)/v:0,m=r.strokeOpacity!=null?r.strokeOpacity*h.opacity*o:h.opacity*o,_=r.strokeFirst;if((n||d!==1)&&a("stroke-width",d),(n||_)&&a("paint-order",_?"stroke":"fill"),(n||m<1)&&a("stroke-opacity",m),r.lineDash){var S=(0,lt.a)(e),b=S[0],P=S[1];b&&(P=rt(P||0),a("stroke-dasharray",b.join(",")),(P||n)&&a("stroke-dashoffset",P))}else n&&a("stroke-dasharray",j);for(var R=0;R<X.length;R++){var Y=X[R];if(n||r[Y]!==dt.$t[Y]){var nt=r[Y]||dt.$t[Y];nt&&a(Q[R],nt)}}}else n&&a("stroke",j)}var V="http://www.w3.org/2000/svg",I="http://www.w3.org/1999/xlink",D="http://www.w3.org/2000/xmlns/",C="http://www.w3.org/XML/1998/namespace";function M(a){return document.createElementNS(V,a)}function T(a,r,e,n,o){return{tag:a,attrs:e||{},children:n,text:o,key:r}}function A(a,r){var e=[];if(r)for(var n in r){var o=r[n],s=n;o!==!1&&(o!==!0&&o!=null&&(s+='="'+o+'"'),e.push(s))}return"<"+a+" "+e.join(" ")+">"}function L(a){return"</"+a+">"}function Z(a,r){r=r||{};var e=r.newline?`
`:"";function n(o){var s=o.children,u=o.tag,h=o.attrs;return A(u,h)+(o.text||"")+(s?""+e+(0,g.UI)(s,function(v){return n(v)}).join(e)+e:"")+L(u)}return n(a)}function z(a,r,e){e=e||{};var n=e.newline?`
`:"",o=" {"+n,s=n+"}",u=(0,g.UI)((0,g.XP)(a),function(v){return v+o+(0,g.UI)((0,g.XP)(a[v]),function(d){return d+":"+a[v][d]+";"}).join(n)+s}).join(n),h=(0,g.UI)((0,g.XP)(r),function(v){return"@keyframes "+v+o+(0,g.UI)((0,g.XP)(r[v]),function(d){return d+o+(0,g.UI)((0,g.XP)(r[v][d]),function(m){var _=r[v][d][m];return m==="d"&&(_='path("'+_+'")'),m+":"+_+";"}).join(n)+s}).join(n)+s}).join(n);return!u&&!h?"":["<![CDATA[",u,h,"]]>"].join(n)}function ut(a){return{zrId:a,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function ot(a,r,e,n){return T("svg","root",{width:a,height:r,xmlns:V,"xmlns:xlink":I,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+a+" "+r:!1},e)}var ht=F(8007),tt=F(87411),ft=F(14014),St=F(52776),st=F(75188),xt={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},wt="transform-origin";function Dt(a,r,e){var n=(0,g.l7)({},a.shape);(0,g.l7)(n,r),a.buildPath(e,n);var o=new W;return o.reset((0,K.Gk)(a)),e.rebuildPath(o,1),o.generateStr(),o.getStr()}function It(a,r){var e=r.originX,n=r.originY;(e||n)&&(a[wt]=e+"px "+n+"px")}var Et={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function zt(a,r){var e=r.zrId+"-ani-"+r.cssAnimIdx++;return r.cssAnims[e]=a,e}function Bt(a,r,e){var n=a.shape.paths,o={},s,u;if((0,g.S6)(n,function(v){var d=ut(e.zrId);d.animation=!0,$t(v,{},d,!0);var m=d.cssAnims,_=d.cssNodes,S=(0,g.XP)(m),b=S.length;if(!!b){u=S[b-1];var P=m[u];for(var R in P){var Y=P[R];o[R]=o[R]||{d:""},o[R].d+=Y.d||""}for(var nt in _){var pt=_[nt].animation;pt.indexOf(u)>=0&&(s=pt)}}}),!!s){r.d=!1;var h=zt(o,e);return s.replace(u,h)}}function Ht(a){return(0,g.HD)(a)?xt[a]?"cubic-bezier("+xt[a]+")":(0,st.H)(a)?a:"":""}function $t(a,r,e,n){var o=a.animators,s=o.length,u=[];if(a instanceof St.Z){var h=Bt(a,r,e);if(h)u.push(h);else if(!s)return}else if(!s)return;for(var v={},d=0;d<s;d++){var m=o[d],_=[m.getMaxTime()/1e3+"s"],S=Ht(m.getClip().easing),b=m.getDelay();S?_.push(S):_.push("linear"),b&&_.push(b/1e3+"s"),m.getLoop()&&_.push("infinite");var P=_.join(" ");v[P]=v[P]||[P,[]],v[P][1].push(m)}function R(pt){var mt=pt[1],bt=mt.length,Lt={},Pt={},Ot={},kt="animation-timing-function";function jt(Ur,Sn,mn){for(var wn=Ur.getTracks(),Ci=Ur.getMaxTime(),Ni=0;Ni<wn.length;Ni++){var Zn=wn[Ni];if(Zn.needsAnimate()){var Ti=Zn.keyframes,gi=Zn.propName;if(mn&&(gi=mn(gi)),gi)for(var Yi=0;Yi<Ti.length;Yi++){var ws=Ti[Yi],fa=Math.round(ws.time/Ci*100)+"%",Ud=Ht(ws.easing),yl=ws.rawValue;((0,g.HD)(yl)||(0,g.hj)(yl))&&(Sn[fa]=Sn[fa]||{},Sn[fa][gi]=ws.rawValue,Ud&&(Sn[fa][kt]=Ud))}}}}for(var re=0;re<bt;re++){var ae=mt[re],he=ae.targetName;he?he==="shape"&&jt(ae,Pt):!n&&jt(ae,Lt)}for(var me in Lt){var Te={};(0,tt.kY)(Te,a),(0,g.l7)(Te,Lt[me]);var be=(0,K.gA)(Te),Fe=Lt[me][kt];Ot[me]=be?{transform:be}:{},It(Ot[me],Te),Fe&&(Ot[me][kt]=Fe)}var Ye,Ue=!0;for(var me in Pt){Ot[me]=Ot[me]||{};var $e=!Ye,Fe=Pt[me][kt];$e&&(Ye=new ft.Z);var Sr=Ye.len();Ye.reset(),Ot[me].d=Dt(a,Pt[me],Ye);var Ar=Ye.len();if(!$e&&Sr!==Ar){Ue=!1;break}Fe&&(Ot[me][kt]=Fe)}if(!Ue)for(var me in Ot)delete Ot[me].d;if(!n)for(var re=0;re<bt;re++){var ae=mt[re],he=ae.targetName;he==="style"&&jt(ae,Ot,function(wn){return Et[wn]})}for(var Wr=(0,g.XP)(Ot),jr=!0,fn,re=1;re<Wr.length;re++){var zn=Wr[re-1],En=Wr[re];if(Ot[zn][wt]!==Ot[En][wt]){jr=!1;break}fn=Ot[zn][wt]}if(jr&&fn){for(var me in Ot)Ot[me][wt]&&delete Ot[me][wt];r[wt]=fn}if((0,g.hX)(Wr,function(Ur){return(0,g.XP)(Ot[Ur]).length>0}).length){var an=zt(Ot,e);return an+" "+pt[0]+" both"}}for(var Y in v){var h=R(v[Y]);h&&u.push(h)}if(u.length){var nt=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+nt]={animation:u.join(",")},r.class=nt}}var ee=F(96498),De=F(23132),Se=Math.round;function Be(a){return a&&(0,g.HD)(a.src)}function Ft(a){return a&&(0,g.mf)(a.toDataURL)}function Tt(a,r,e,n){k(function(o,s){var u=o==="fill"||o==="stroke";u&&(0,K.H3)(s)?_e(r,a,o,n):u&&(0,K.R)(s)?Ut(e,a,o,n):a[o]=s},r,e,!1),we(e,a,n)}function At(a){return(0,K.zT)(a[0]-1)&&(0,K.zT)(a[1])&&(0,K.zT)(a[2])&&(0,K.zT)(a[3]-1)}function Kt(a){return(0,K.zT)(a[4])&&(0,K.zT)(a[5])}function pe(a,r,e){if(r&&!(Kt(r)&&At(r))){var n=e?10:1e4;a.transform=At(r)?"translate("+Se(r[4]*n)/n+" "+Se(r[5]*n)/n+")":(0,K.qV)(r)}}function Oe(a,r,e){for(var n=a.points,o=[],s=0;s<n.length;s++)o.push(Se(n[s][0]*e)/e),o.push(Se(n[s][1]*e)/e);r.points=o.join(" ")}function Pe(a){return!a.smooth}function vr(a){var r=(0,g.UI)(a,function(e){return typeof e=="string"?[e,e]:e});return function(e,n,o){for(var s=0;s<r.length;s++){var u=r[s],h=e[u[0]];h!=null&&(n[u[1]]=Se(h*o)/o)}}}var Lr={circle:[vr(["cx","cy","r"])],polyline:[Oe,Pe],polygon:[Oe,Pe]};function nr(a){for(var r=a.animators,e=0;e<r.length;e++)if(r[e].targetName==="shape")return!0;return!1}function qe(a,r){var e=a.style,n=a.shape,o=Lr[a.type],s={},u=r.animation,h="path",v=a.style.strokePercent,d=r.compress&&(0,K.Gk)(a)||4;if(o&&!r.willUpdate&&!(o[1]&&!o[1](n))&&!(u&&nr(a))&&!(v<1)){h=a.type;var m=Math.pow(10,d);o[0](n,s,m)}else{a.path||a.createPathProxy();var _=a.path;a.shapeChanged()&&(_.beginPath(),a.buildPath(_,a.shape),a.pathUpdated());var S=_.getVersion(),b=a,P=b.__svgPathBuilder;(b.__svgPathVersion!==S||!P||v!==b.__svgPathStrokePercent)&&(P||(P=b.__svgPathBuilder=new W),P.reset(d),_.rebuildPath(P,v),P.generateStr(),b.__svgPathVersion=S,b.__svgPathStrokePercent=v),s.d=P.getStr()}return pe(s,a.transform),Tt(s,e,a,r),r.animation&&$t(a,s,r),T(h,a.id+"",s)}function lr(a,r){var e=a.style,n=e.image;if(n&&!(0,g.HD)(n)&&(Be(n)?n=n.src:Ft(n)&&(n=n.toDataURL())),!!n){var o=e.x||0,s=e.y||0,u=e.width,h=e.height,v={href:n,width:u,height:h};return o&&(v.x=o),s&&(v.y=s),pe(v,a.transform),Tt(v,e,a,r),r.animation&&$t(a,v,r),T("image",a.id+"",v)}}function Yt(a,r){var e=a.style,n=e.text;if(n!=null&&(n+=""),!(!n||isNaN(e.x)||isNaN(e.y))){var o=e.font||De.Uo,s=e.x||0,u=(0,K.mU)(e.y||0,(0,vt.Dp)(o),e.textBaseline),h=K.jY[e.textAlign]||e.textAlign,v={"dominant-baseline":"central","text-anchor":h};if((0,ee.Y1)(e)){var d="",m=e.fontStyle,_=(0,ee.VG)(e.fontSize);if(!parseFloat(_))return;var S=e.fontFamily||De.rk,b=e.fontWeight;d+="font-size:"+_+";font-family:"+S+";",m&&m!=="normal"&&(d+="font-style:"+m+";"),b&&b!=="normal"&&(d+="font-weight:"+b+";"),v.style=d}else v.style="font: "+o;return n.match(/\s/)&&(v["xml:space"]="preserve"),s&&(v.x=s),u&&(v.y=u),pe(v,a.transform),Tt(v,e,a,r),r.animation&&$t(a,v,r),T("text",a.id+"",v,void 0,n)}}function le(a,r){if(a instanceof dt.ZP)return qe(a,r);if(a instanceof gt.ZP)return lr(a,r);if(a instanceof it.Z)return Yt(a,r)}function we(a,r,e){var n=a.style;if((0,K.i2)(n)){var o=(0,K.n1)(a),s=e.shadowCache,u=s[o];if(!u){var h=a.getGlobalScale(),v=h[0],d=h[1];if(!v||!d)return;var m=n.shadowOffsetX||0,_=n.shadowOffsetY||0,S=n.shadowBlur,b=(0,K.ut)(n.shadowColor),P=b.opacity,R=b.color,Y=S/2/v,nt=S/2/d,pt=Y+" "+nt;u=e.zrId+"-s"+e.shadowIdx++,e.defs[u]=T("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[T("feDropShadow","",{dx:m/v,dy:_/d,stdDeviation:pt,"flood-color":R,"flood-opacity":P})]),s[o]=u}r.filter=(0,K.m1)(u)}}function _e(a,r,e,n){var o=a[e],s,u={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if((0,K.I1)(o))s="linearGradient",u.x1=o.x,u.y1=o.y,u.x2=o.x2,u.y2=o.y2;else if((0,K.gO)(o))s="radialGradient",u.cx=(0,g.pD)(o.x,.5),u.cy=(0,g.pD)(o.y,.5),u.r=(0,g.pD)(o.r,.5);else return;for(var h=o.colorStops,v=[],d=0,m=h.length;d<m;++d){var _=(0,K.Pn)(h[d].offset)*100+"%",S=h[d].color,b=(0,K.ut)(S),P=b.color,R=b.opacity,Y={offset:_};Y["stop-color"]=P,R<1&&(Y["stop-opacity"]=R),v.push(T("stop",d+"",Y))}var nt=T(s,"",u,v),pt=Z(nt),mt=n.gradientCache,bt=mt[pt];bt||(bt=n.zrId+"-g"+n.gradientIdx++,mt[pt]=bt,u.id=bt,n.defs[bt]=T(s,bt,u,v)),r[e]=(0,K.m1)(bt)}function Ut(a,r,e,n){var o=a.style[e],s={patternUnits:"userSpaceOnUse"},u;if((0,K.Cv)(o)){var h=o.imageWidth,v=o.imageHeight,d=void 0,m=o.image;if((0,g.HD)(m)?d=m:Be(m)?d=m.src:Ft(m)&&(d=m.toDataURL()),typeof Image>"u"){var _="Image width/height must been given explictly in svg-ssr renderer.";(0,g.hu)(h,_),(0,g.hu)(v,_)}else if(h==null||v==null){var S=function(pt,mt){if(pt){var bt=pt.elm,Lt=pt.attrs.width=h||mt.width,Pt=pt.attrs.height=v||mt.height;bt&&(bt.setAttribute("width",Lt),bt.setAttribute("height",Pt))}},b=(0,ht.Gq)(d,null,a,function(pt){S(P,pt),S(u,pt)});b&&b.width&&b.height&&(h=h||b.width,v=v||b.height)}u=T("image","img",{href:d,width:h,height:v}),s.width=h,s.height=v}else o.svgElement&&(u=(0,g.d9)(o.svgElement),s.width=o.svgWidth,s.height=o.svgHeight);if(!!u){s.patternTransform=(0,K.gA)(o);var P=T("pattern","",s,[u]),R=Z(P),Y=n.patternCache,nt=Y[R];nt||(nt=n.zrId+"-p"+n.patternIdx++,Y[R]=nt,s.id=nt,P=n.defs[nt]=T("pattern",nt,s,[u])),r[e]=(0,K.m1)(nt)}}function Qt(a,r,e){var n=e.clipPathCache,o=e.defs,s=n[a.id];if(!s){s=e.zrId+"-c"+e.clipPathIdx++;var u={id:s};n[a.id]=s,o[s]=T("clipPath",s,u,[qe(a,e)])}r["clip-path"]=(0,K.m1)(s)}function ie(a){return document.createTextNode(a)}function Ae(a){return document.createComment(a)}function He(a,r,e){a.insertBefore(r,e)}function tr(a,r){a.removeChild(r)}function ce(a,r){a.appendChild(r)}function Re(a){return a.parentNode}function Le(a){return a.nextSibling}function Ke(a){return a.tagName}function Tr(a,r){a.textContent=r}function Nr(a){return a.textContent}function Br(a){return a.nodeType===1}function rn(a){return a.nodeType===3}function Mn(a){return a.nodeType===8}var Jr=58,ei=120,jn=T("","");function mi(a){return a===void 0}function fi(a){return a!==void 0}function Fa(a,r,e){for(var n={},o=r;o<=e;++o){var s=a[o].key;s!==void 0&&(n[s]=o)}return n}function Ki(a,r){var e=a.key===r.key,n=a.tag===r.tag;return n&&e}function Ta(a){var r,e=a.children,n=a.tag;if(fi(n)){var o=a.elm=M(n);if(za(jn,a),(0,g.kJ)(e))for(r=0;r<e.length;++r){var s=e[r];s!=null&&ce(o,Ta(s))}else fi(a.text)&&!(0,g.Kn)(a.text)&&ce(o,ie(a.text))}else a.elm=ie(a.text);return a.elm}function au(a,r,e,n,o){for(;n<=o;++n){var s=e[n];s!=null&&He(a,Ta(s),r)}}function eo(a,r,e,n){for(;e<=n;++e){var o=r[e];if(o!=null)if(fi(o.tag)){var s=Re(o.elm);tr(s,o.elm)}else tr(a,o.elm)}}function za(a,r){var e,n=r.elm,o=a&&a.attrs||{},s=r.attrs||{};if(o!==s){for(e in s){var u=s[e],h=o[e];h!==u&&(u===!0?n.setAttribute(e,""):u===!1?n.removeAttribute(e):e.charCodeAt(0)!==ei?n.setAttribute(e,u):e==="xmlns:xlink"||e==="xmlns"?n.setAttributeNS(D,e,u):e.charCodeAt(3)===Jr?n.setAttributeNS(C,e,u):e.charCodeAt(5)===Jr?n.setAttributeNS(I,e,u):n.setAttribute(e,u))}for(e in o)e in s||n.removeAttribute(e)}}function hf(a,r,e){for(var n=0,o=0,s=r.length-1,u=r[0],h=r[s],v=e.length-1,d=e[0],m=e[v],_,S,b,P;n<=s&&o<=v;)u==null?u=r[++n]:h==null?h=r[--s]:d==null?d=e[++o]:m==null?m=e[--v]:Ki(u,d)?(ha(u,d),u=r[++n],d=e[++o]):Ki(h,m)?(ha(h,m),h=r[--s],m=e[--v]):Ki(u,m)?(ha(u,m),He(a,u.elm,Le(h.elm)),u=r[++n],m=e[--v]):Ki(h,d)?(ha(h,d),He(a,h.elm,u.elm),h=r[--s],d=e[++o]):(mi(_)&&(_=Fa(r,n,s)),S=_[d.key],mi(S)?He(a,Ta(d),u.elm):(b=r[S],b.tag!==d.tag?He(a,Ta(d),u.elm):(ha(b,d),r[S]=void 0,He(a,b.elm,u.elm))),d=e[++o]);(n<=s||o<=v)&&(n>s?(P=e[v+1]==null?null:e[v+1].elm,au(a,P,e,o,v)):eo(a,r,n,s))}function ha(a,r){var e=r.elm=a.elm,n=a.children,o=r.children;a!==r&&(za(a,r),mi(r.text)?fi(n)&&fi(o)?n!==o&&hf(e,n,o):fi(o)?(fi(a.text)&&Tr(e,""),au(e,null,o,0,o.length-1)):fi(n)?eo(e,n,0,n.length-1):fi(a.text)&&Tr(e,""):a.text!==r.text&&(fi(n)&&eo(e,n,0,n.length-1),Tr(e,r.text)))}function ro(a,r){if(Ki(a,r))ha(a,r);else{var e=a.elm,n=Re(e);Ta(r),n!==null&&(He(n,r.elm,Le(e)),eo(n,[a],0,0))}return r}var _l=F(5787),Wn=0,cf=function(){function a(r,e,n){if(this.type="svg",this.refreshHover=ou("refreshHover"),this.configLayer=ou("configLayer"),this.storage=e,this._opts=n=(0,g.l7)({},n),this.root=r,this._id="zr"+Wn++,this._oldVNode=ot(n.width,n.height),r&&!n.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var s=this._svgDom=this._oldVNode.elm=M("svg");za(null,this._oldVNode),o.appendChild(s),r.appendChild(o)}this.resize(n.width,n.height)}return a.prototype.getType=function(){return this.type},a.prototype.getViewportRoot=function(){return this._viewport},a.prototype.getViewportRootOffset=function(){var r=this.getViewportRoot();if(r)return{offsetLeft:r.offsetLeft||0,offsetTop:r.offsetTop||0}},a.prototype.getSvgDom=function(){return this._svgDom},a.prototype.refresh=function(){if(this.root){var r=this.renderToVNode({willUpdate:!0});r.attrs.style="position:absolute;left:0;top:0;user-select:none",ro(this._oldVNode,r),this._oldVNode=r}},a.prototype.renderOneToVNode=function(r){return le(r,ut(this._id))},a.prototype.renderToVNode=function(r){r=r||{};var e=this.storage.getDisplayList(!0),n=this._backgroundColor,o=this._width,s=this._height,u=ut(this._id);u.animation=r.animation,u.willUpdate=r.willUpdate,u.compress=r.compress;var h=[];if(n&&n!=="none"){var v=(0,K.ut)(n),d=v.color,m=v.opacity;this._bgVNode=T("rect","bg",{width:o,height:s,x:"0",y:"0",id:"0",fill:d,"fill-opacity":m}),h.push(this._bgVNode)}else this._bgVNode=null;var _=r.compress?null:this._mainVNode=T("g","main",{},[]);this._paintList(e,u,_?_.children:h),_&&h.push(_);var S=(0,g.UI)((0,g.XP)(u.defs),function(R){return u.defs[R]});if(S.length&&h.push(T("defs","defs",{},S)),r.animation){var b=z(u.cssNodes,u.cssAnims,{newline:!0});if(b){var P=T("style","stl",{},[],b);h.push(P)}}return ot(o,s,h,r.useViewBox)},a.prototype.renderToString=function(r){return r=r||{},Z(this.renderToVNode({animation:(0,g.pD)(r.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:(0,g.pD)(r.useViewBox,!0)}),{newline:!0})},a.prototype.setBackgroundColor=function(r){this._backgroundColor=r;var e=this._bgVNode;if(e&&e.elm){var n=(0,K.ut)(r),o=n.color,s=n.opacity;e.elm.setAttribute("fill",o),s<1&&e.elm.setAttribute("fill-opacity",s)}},a.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},a.prototype._paintList=function(r,e,n){for(var o=r.length,s=[],u=0,h,v,d=0,m=0;m<o;m++){var _=r[m];if(!_.invisible){var S=_.__clipPaths,b=S&&S.length||0,P=v&&v.length||0,R=void 0;for(R=Math.max(b-1,P-1);R>=0&&!(S&&v&&S[R]===v[R]);R--);for(var Y=P-1;Y>R;Y--)u--,h=s[u-1];for(var nt=R+1;nt<b;nt++){var pt={};Qt(S[nt],pt,e);var mt=T("g","clip-g-"+d++,pt,[]);(h?h.children:n).push(mt),s[u++]=mt,h=mt}v=S;var bt=le(_,e);bt&&(h?h.children:n).push(bt)}}},a.prototype.resize=function(r,e){var n=this._opts,o=this.root,s=this._viewport;if(r!=null&&(n.width=r),e!=null&&(n.height=e),o&&s&&(s.style.display="none",r=(0,_l.ap)(o,0,n),e=(0,_l.ap)(o,1,n),s.style.display=""),this._width!==r||this._height!==e){if(this._width=r,this._height=e,s){var u=s.style;u.width=r+"px",u.height=e+"px"}var h=this._svgDom;h&&(h.setAttribute("width",r),h.setAttribute("height",e))}},a.prototype.getWidth=function(){return this._width},a.prototype.getHeight=function(){return this._height},a.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},a.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},a.prototype.toDataURL=function(r){var e=encodeURIComponent(this.renderToString()),n="data:image/svg+xml;";return r?(e=(0,K.oF)(e),e&&n+"base64,"+e):n+"charset=UTF-8,"+e},a}();function ou(a){return function(){}}var _r=cf;function su(a){a.registerPainter("svg",_r)}var yn=F(70012),fe=F(70655),Er=F(38455),xe=F(93321),Rr=F(41525),Mr=F(38154),xl=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e){if(!1)var n;return(0,Er.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getLegendIcon=function(e){var n=new Mr.Z,o=(0,Rr.th)("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);n.add(o),o.setStyle(e.lineStyle);var s=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),h=s==="none"?"circle":s,v=e.itemHeight*.8,d=(0,Rr.th)(h,(e.itemWidth-v)/2,(e.itemHeight-v)/2,v,v,e.itemStyle.fill);n.add(d),d.setStyle(e.itemStyle);var m=e.iconRotate==="inherit"?u:e.iconRotate||0;return d.rotation=m*Math.PI/180,d.setOrigin([e.itemWidth/2,e.itemHeight/2]),h.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),n},r.type="series.line",r.dependencies=["grid","polar"],r.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},r}(xe.Z),Ds=xl,br=F(53842),cr=F(29266),Hr=F(30106),ir=F(26357),yi=F(68540);function Ga(a,r){var e=a.mapDimensionsAll("defaultedLabel"),n=e.length;if(n===1){var o=(0,yi.hk)(a,r,e[0]);return o!=null?o+"":null}else if(n){for(var s=[],u=0;u<e.length;u++)s.push((0,yi.hk)(a,r,e[u]));return s.join(" ")}}function Ui(a,r){var e=a.mapDimensionsAll("defaultedLabel");if(!(0,g.kJ)(r))return r+"";for(var n=[],o=0;o<e.length;o++){var s=a.getDimensionIndex(e[o]);s>=0&&n.push(r[s])}return n.join(" ")}var or=F(36006),no=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s){var u=a.call(this)||this;return u.updateData(e,n,o,s),u}return r.prototype._createSymbol=function(e,n,o,s,u){this.removeAll();var h=(0,Rr.th)(e,-1,-1,2,2,null,u);h.attr({z2:100,culling:!0,scaleX:s[0]/2,scaleY:s[1]/2}),h.drift=Fr,this._symbolType=e,this.add(h)},r.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},r.prototype.getSymbolType=function(){return this._symbolType},r.prototype.getSymbolPath=function(){return this.childAt(0)},r.prototype.highlight=function(){(0,ir.fD)(this.childAt(0))},r.prototype.downplay=function(){(0,ir.Mh)(this.childAt(0))},r.prototype.setZ=function(e,n){var o=this.childAt(0);o.zlevel=e,o.z=n},r.prototype.setDraggable=function(e,n){var o=this.childAt(0);o.draggable=e,o.cursor=!n&&e?"move":o.cursor},r.prototype.updateData=function(e,n,o,s){this.silent=!1;var u=e.getItemVisual(n,"symbol")||"circle",h=e.hostModel,v=r.getSymbolSize(e,n),d=u!==this._symbolType,m=s&&s.disableAnimation;if(d){var _=e.getItemVisual(n,"symbolKeepAspect");this._createSymbol(u,e,n,v,_)}else{var S=this.childAt(0);S.silent=!1;var b={scaleX:v[0]/2,scaleY:v[1]/2};m?S.attr(b):cr.D(S,b,h,n),(0,cr.Zi)(S)}if(this._updateCommon(e,n,v,o,s),d){var S=this.childAt(0);if(!m){var b={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:S.style.opacity}};S.scaleX=S.scaleY=0,S.style.opacity=0,cr.KZ(S,b,h,n)}}m&&this.childAt(0).stopAnimation("leave")},r.prototype._updateCommon=function(e,n,o,s,u){var h=this.childAt(0),v=e.hostModel,d,m,_,S,b,P,R,Y,nt;if(s&&(d=s.emphasisItemStyle,m=s.blurItemStyle,_=s.selectItemStyle,S=s.focus,b=s.blurScope,R=s.labelStatesModels,Y=s.hoverScale,nt=s.cursorStyle,P=s.emphasisDisabled),!s||e.hasItemOption){var pt=s&&s.itemModel?s.itemModel:e.getItemModel(n),mt=pt.getModel("emphasis");d=mt.getModel("itemStyle").getItemStyle(),_=pt.getModel(["select","itemStyle"]).getItemStyle(),m=pt.getModel(["blur","itemStyle"]).getItemStyle(),S=mt.get("focus"),b=mt.get("blurScope"),P=mt.get("disabled"),R=(0,or.k3)(pt),Y=mt.getShallow("scale"),nt=pt.getShallow("cursor")}var bt=e.getItemVisual(n,"symbolRotate");h.attr("rotation",(bt||0)*Math.PI/180||0);var Lt=(0,Rr.Cq)(e.getItemVisual(n,"symbolOffset"),o);Lt&&(h.x=Lt[0],h.y=Lt[1]),nt&&h.attr("cursor",nt);var Pt=e.getItemVisual(n,"style"),Ot=Pt.fill;if(h instanceof gt.ZP){var kt=h.style;h.useStyle((0,g.l7)({image:kt.image,x:kt.x,y:kt.y,width:kt.width,height:kt.height},Pt))}else h.__isEmptyBrush?h.useStyle((0,g.l7)({},Pt)):h.useStyle(Pt),h.style.decal=null,h.setColor(Ot,u&&u.symbolInnerColor),h.style.strokeNoScale=!0;var jt=e.getItemVisual(n,"liftZ"),re=this._z2;jt!=null?re==null&&(this._z2=h.z2,h.z2+=jt):re!=null&&(h.z2=re,this._z2=null);var ae=u&&u.useNameLabel;(0,or.ni)(h,R,{labelFetcher:v,labelDataIndex:n,defaultText:he,inheritColor:Ot,defaultOpacity:Pt.opacity});function he(be){return ae?e.getName(be):Ga(e,be)}this._sizeX=o[0]/2,this._sizeY=o[1]/2;var me=h.ensureState("emphasis");if(me.style=d,h.ensureState("select").style=_,h.ensureState("blur").style=m,Y){var Te=Math.max((0,g.hj)(Y)?Y:1.1,3/this._sizeY);me.scaleX=this._sizeX*Te,me.scaleY=this._sizeY*Te}this.setSymbolScale(1),(0,ir.k5)(this,S,b,P)},r.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},r.prototype.fadeOut=function(e,n,o){var s=this.childAt(0),u=(0,Hr.A)(this).dataIndex,h=o&&o.animation;if(this.silent=s.silent=!0,o&&o.fadeLabel){var v=s.getTextContent();v&&cr.bX(v,{style:{opacity:0}},n,{dataIndex:u,removeOpt:h,cb:function(){s.removeTextContent()}})}else s.removeTextContent();cr.bX(s,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:u,cb:e,removeOpt:h})},r.getSymbolSize=function(e,n){return(0,Rr.zp)(e.getItemVisual(n,"symbolSize"))},r}(Mr.Z);function Fr(a,r){this.parent.drift(a,r)}var ea=no;function Co(a,r,e,n){return r&&!isNaN(r[0])&&!isNaN(r[1])&&!(n.isIgnore&&n.isIgnore(e))&&!(n.clipShape&&!n.clipShape.contain(r[0],r[1]))&&a.getItemVisual(e,"symbol")!=="none"}function wi(a){return a!=null&&!(0,g.Kn)(a)&&(a={isIgnore:a}),a||{}}function hn(a){var r=a.hostModel,e=r.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:r.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:r.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:(0,or.k3)(r),cursorStyle:r.get("cursor")}}var ki=function(){function a(r){this.group=new Mr.Z,this._SymbolCtor=r||ea}return a.prototype.updateData=function(r,e){this._progressiveEls=null,e=wi(e);var n=this.group,o=r.hostModel,s=this._data,u=this._SymbolCtor,h=e.disableAnimation,v=hn(r),d={disableAnimation:h},m=e.getSymbolPoint||function(_){return r.getItemLayout(_)};s||n.removeAll(),r.diff(s).add(function(_){var S=m(_);if(Co(r,S,_,e)){var b=new u(r,_,v,d);b.setPosition(S),r.setItemGraphicEl(_,b),n.add(b)}}).update(function(_,S){var b=s.getItemGraphicEl(S),P=m(_);if(!Co(r,P,_,e)){n.remove(b);return}var R=r.getItemVisual(_,"symbol")||"circle",Y=b&&b.getSymbolType&&b.getSymbolType();if(!b||Y&&Y!==R)n.remove(b),b=new u(r,_,v,d),b.setPosition(P);else{b.updateData(r,_,v,d);var nt={x:P[0],y:P[1]};h?b.attr(nt):cr.D(b,nt,o)}n.add(b),r.setItemGraphicEl(_,b)}).remove(function(_){var S=s.getItemGraphicEl(_);S&&S.fadeOut(function(){n.remove(S)},o)}).execute(),this._getSymbolPoint=m,this._data=r},a.prototype.updateLayout=function(){var r=this,e=this._data;e&&e.eachItemGraphicEl(function(n,o){var s=r._getSymbolPoint(o);n.setPosition(s),n.markRedraw()})},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=hn(r),this._data=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e,n){this._progressiveEls=[],n=wi(n);function o(v){v.isGroup||(v.incremental=!0,v.ensureState("emphasis").hoverLayer=!0)}for(var s=r.start;s<r.end;s++){var u=e.getItemLayout(s);if(Co(e,u,s,n)){var h=new this._SymbolCtor(e,s,this._seriesScope);h.traverse(o),h.setPosition(u),this.group.add(h),e.setItemGraphicEl(s,h),this._progressiveEls.push(h)}}},a.prototype.eachRendered=function(r){br.traverseElements(this._progressiveEls||this.group,r)},a.prototype.remove=function(r){var e=this.group,n=this._data;n&&r?n.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},n.hostModel)}):e.removeAll()},a}(),ra=ki,ur=F(99936);function Po(a,r,e){var n=a.getBaseAxis(),o=a.getOtherAxis(n),s=As(o,e),u=n.dim,h=o.dim,v=r.mapDimension(h),d=r.mapDimension(u),m=h==="x"||h==="radius"?1:0,_=(0,g.UI)(a.dimensions,function(P){return r.mapDimension(P)}),S=!1,b=r.getCalculationInfo("stackResultDimension");return(0,ur.M)(r,_[0])&&(S=!0,_[0]=b),(0,ur.M)(r,_[1])&&(S=!0,_[1]=b),{dataDimsForPoint:_,valueStart:s,valueAxisDim:h,baseAxisDim:u,stacked:!!S,valueDim:v,baseDim:d,baseDataOffset:m,stackedOverDimension:r.getCalculationInfo("stackedOverDimension")}}function As(a,r){var e=0,n=a.scale.getExtent();return r==="start"?e=n[0]:r==="end"?e=n[1]:(0,g.hj)(r)&&!isNaN(r)?e=r:n[0]>0?e=n[0]:n[1]<0&&(e=n[1]),e}function Lo(a,r,e,n){var o=NaN;a.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=a.valueStart);var s=a.baseDataOffset,u=[];return u[s]=e.get(a.baseDim,n),u[1-s]=o,r.dataToPoint(u)}var kr=F(80887);function mr(a,r){var e=[];return r.diff(a).add(function(n){e.push({cmd:"+",idx:n})}).update(function(n,o){e.push({cmd:"=",idx:o,idx1:n})}).remove(function(n){e.push({cmd:"-",idx:n})}).execute(),e}function Gn(a,r,e,n,o,s,u,h){for(var v=mr(a,r),d=[],m=[],_=[],S=[],b=[],P=[],R=[],Y=Po(o,r,u),nt=a.getLayout("points")||[],pt=r.getLayout("points")||[],mt=0;mt<v.length;mt++){var bt=v[mt],Lt=!0,Pt=void 0,Ot=void 0;switch(bt.cmd){case"=":Pt=bt.idx*2,Ot=bt.idx1*2;var kt=nt[Pt],jt=nt[Pt+1],re=pt[Ot],ae=pt[Ot+1];(isNaN(kt)||isNaN(jt))&&(kt=re,jt=ae),d.push(kt,jt),m.push(re,ae),_.push(e[Pt],e[Pt+1]),S.push(n[Ot],n[Ot+1]),R.push(r.getRawIndex(bt.idx1));break;case"+":var he=bt.idx,me=Y.dataDimsForPoint,Te=o.dataToPoint([r.get(me[0],he),r.get(me[1],he)]);Ot=he*2,d.push(Te[0],Te[1]),m.push(pt[Ot],pt[Ot+1]);var be=Lo(Y,o,r,he);_.push(be[0],be[1]),S.push(n[Ot],n[Ot+1]),R.push(r.getRawIndex(he));break;case"-":Lt=!1}Lt&&(b.push(bt),P.push(P.length))}P.sort(function(zn,En){return R[zn]-R[En]});for(var Fe=d.length,Ye=(0,kr.o)(Fe),Ue=(0,kr.o)(Fe),$e=(0,kr.o)(Fe),Sr=(0,kr.o)(Fe),Ar=[],mt=0;mt<P.length;mt++){var Wr=P[mt],jr=mt*2,fn=Wr*2;Ye[jr]=d[fn],Ye[jr+1]=d[fn+1],Ue[jr]=m[fn],Ue[jr+1]=m[fn+1],$e[jr]=_[fn],$e[jr+1]=_[fn+1],Sr[jr]=S[fn],Sr[jr+1]=S[fn+1],Ar[mt]=b[Wr]}return{current:Ye,next:Ue,stackedOnCurrent:$e,stackedOnNext:Sr,status:Ar}}var Qr=F(74438),Xe=F(32234),xr=F(29023),ln=Math.min,Vi=Math.max;function ca(a,r){return isNaN(a)||isNaN(r)}function Cr(a,r,e,n,o,s,u,h,v){for(var d,m,_,S,b,P,R=e,Y=0;Y<n;Y++){var nt=r[R*2],pt=r[R*2+1];if(R>=o||R<0)break;if(ca(nt,pt)){if(v){R+=s;continue}break}if(R===e)a[s>0?"moveTo":"lineTo"](nt,pt),_=nt,S=pt;else{var mt=nt-d,bt=pt-m;if(mt*mt+bt*bt<.5){R+=s;continue}if(u>0){for(var Lt=R+s,Pt=r[Lt*2],Ot=r[Lt*2+1];Pt===nt&&Ot===pt&&Y<n;)Y++,Lt+=s,R+=s,Pt=r[Lt*2],Ot=r[Lt*2+1],nt=r[R*2],pt=r[R*2+1],mt=nt-d,bt=pt-m;var kt=Y+1;if(v)for(;ca(Pt,Ot)&&kt<n;)kt++,Lt+=s,Pt=r[Lt*2],Ot=r[Lt*2+1];var jt=.5,re=0,ae=0,he=void 0,me=void 0;if(kt>=n||ca(Pt,Ot))b=nt,P=pt;else{re=Pt-d,ae=Ot-m;var Te=nt-d,be=Pt-nt,Fe=pt-m,Ye=Ot-pt,Ue=void 0,$e=void 0;if(h==="x"){Ue=Math.abs(Te),$e=Math.abs(be);var Sr=re>0?1:-1;b=nt-Sr*Ue*u,P=pt,he=nt+Sr*$e*u,me=pt}else if(h==="y"){Ue=Math.abs(Fe),$e=Math.abs(Ye);var Ar=ae>0?1:-1;b=nt,P=pt-Ar*Ue*u,he=nt,me=pt+Ar*$e*u}else Ue=Math.sqrt(Te*Te+Fe*Fe),$e=Math.sqrt(be*be+Ye*Ye),jt=$e/($e+Ue),b=nt-re*u*(1-jt),P=pt-ae*u*(1-jt),he=nt+re*u*jt,me=pt+ae*u*jt,he=ln(he,Vi(Pt,nt)),me=ln(me,Vi(Ot,pt)),he=Vi(he,ln(Pt,nt)),me=Vi(me,ln(Ot,pt)),re=he-nt,ae=me-pt,b=nt-re*Ue/$e,P=pt-ae*Ue/$e,b=ln(b,Vi(d,nt)),P=ln(P,Vi(m,pt)),b=Vi(b,ln(d,nt)),P=Vi(P,ln(m,pt)),re=nt-b,ae=pt-P,he=nt+re*$e/Ue,me=pt+ae*$e/Ue}a.bezierCurveTo(_,S,b,P,nt,pt),_=he,S=me}else a.lineTo(nt,pt)}d=nt,m=pt,R+=s}return Y}var cn=function(){function a(){this.smooth=0,this.smoothConstraint=!0}return a}(),Io=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polyline",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new cn},r.prototype.buildPath=function(e,n){var o=n.points,s=0,u=o.length/2;if(n.connectNulls){for(;u>0&&ca(o[u*2-2],o[u*2-1]);u--);for(;s<u&&ca(o[s*2],o[s*2+1]);s++);}for(;s<u;)s+=Cr(e,o,s,u,u,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},r.prototype.getPointOn=function(e,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o=this.path,s=o.data,u=ft.Z.CMD,h,v,d=n==="x",m=[],_=0;_<s.length;){var S=s[_++],b=void 0,P=void 0,R=void 0,Y=void 0,nt=void 0,pt=void 0,mt=void 0;switch(S){case u.M:h=s[_++],v=s[_++];break;case u.L:if(b=s[_++],P=s[_++],mt=d?(e-h)/(b-h):(e-v)/(P-v),mt<=1&&mt>=0){var bt=d?(P-v)*mt+v:(b-h)*mt+h;return d?[e,bt]:[bt,e]}h=b,v=P;break;case u.C:b=s[_++],P=s[_++],R=s[_++],Y=s[_++],nt=s[_++],pt=s[_++];var Lt=d?(0,xr.kD)(h,b,R,nt,e,m):(0,xr.kD)(v,P,Y,pt,e,m);if(Lt>0)for(var Pt=0;Pt<Lt;Pt++){var Ot=m[Pt];if(Ot<=1&&Ot>=0){var bt=d?(0,xr.af)(v,P,Y,pt,Ot):(0,xr.af)(h,b,R,nt,Ot);return d?[e,bt]:[bt,e]}}h=nt,v=pt;break}}},r}(dt.ZP),bs=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(cn),Sl=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-polygon",n}return r.prototype.getDefaultShape=function(){return new bs},r.prototype.buildPath=function(e,n){var o=n.points,s=n.stackedOnPoints,u=0,h=o.length/2,v=n.smoothMonotone;if(n.connectNulls){for(;h>0&&ca(o[h*2-2],o[h*2-1]);h--);for(;u<h&&ca(o[u*2],o[u*2+1]);u++);}for(;u<h;){var d=Cr(e,o,u,h,h,1,n.smooth,v,n.connectNulls);Cr(e,s,u+d-1,d,h,-1,n.stackedOnSmooth,v,n.connectNulls),u+=d+1,e.closePath()}},r}(dt.ZP),vn=F(75797),on=F(35151),Di=F(27214),Ie=F(85669);function lu(a,r,e,n,o){var s=a.getArea(),u=s.x,h=s.y,v=s.width,d=s.height,m=e.get(["lineStyle","width"])||2;u-=m/2,h-=m/2,v+=m,d+=m,u=Math.floor(u),v=Math.round(v);var _=new on.Z({shape:{x:u,y:h,width:v,height:d}});if(r){var S=a.getBaseAxis(),b=S.isHorizontal(),P=S.inverse;b?(P&&(_.shape.x+=v),_.shape.width=0):(P||(_.shape.y+=d),_.shape.height=0);var R=(0,g.mf)(o)?function(Y){o(Y,_)}:null;cr.KZ(_,{shape:{width:v,height:d,x:u,y:h}},e,null,n,R)}return _}function Ms(a,r,e){var n=a.getArea(),o=(0,Ie.NM)(n.r0,1),s=(0,Ie.NM)(n.r,1),u=new Di.C({shape:{cx:(0,Ie.NM)(a.cx,1),cy:(0,Ie.NM)(a.cy,1),r0:o,r:s,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(r){var h=a.getBaseAxis().dim==="angle";h?u.shape.endAngle=n.startAngle:u.shape.r=o,cr.KZ(u,{shape:{endAngle:n.endAngle,r:s}},e)}return u}function Pi(a,r,e,n,o){if(a){if(a.type==="polar")return Ms(a,r,e);if(a.type==="cartesian2d")return lu(a,r,e,n,o)}else return null;return null}function Jn(a,r){return a.type===r}var Cn=F(78988),Rn=F(21092);function uu(a,r){if(a.length===r.length){for(var e=0;e<a.length;e++)if(a[e]!==r[e])return;return!0}}function io(a){for(var r=1/0,e=1/0,n=-1/0,o=-1/0,s=0;s<a.length;){var u=a[s++],h=a[s++];isNaN(u)||(r=Math.min(u,r),n=Math.max(u,n)),isNaN(h)||(e=Math.min(h,e),o=Math.max(h,o))}return[[r,e],[n,o]]}function ao(a,r){var e=io(a),n=e[0],o=e[1],s=io(r),u=s[0],h=s[1];return Math.max(Math.abs(n[0]-u[0]),Math.abs(n[1]-u[1]),Math.abs(o[0]-h[0]),Math.abs(o[1]-h[1]))}function Es(a){return g.hj(a)?a:a?.5:0}function zr(a,r,e){if(!e.valueDim)return[];for(var n=r.count(),o=(0,kr.o)(n*2),s=0;s<n;s++){var u=Lo(e,a,r,s);o[s*2]=u[0],o[s*2+1]=u[1]}return o}function pr(a,r,e,n){var o=r.getBaseAxis(),s=o.dim==="x"||o.dim==="radius"?0:1,u=[],h=0,v=[],d=[],m=[],_=[];if(n){for(h=0;h<a.length;h+=2)!isNaN(a[h])&&!isNaN(a[h+1])&&_.push(a[h],a[h+1]);a=_}for(h=0;h<a.length-2;h+=2)switch(m[0]=a[h+2],m[1]=a[h+3],d[0]=a[h],d[1]=a[h+1],u.push(d[0],d[1]),e){case"end":v[s]=m[s],v[1-s]=d[1-s],u.push(v[0],v[1]);break;case"middle":var S=(d[s]+m[s])/2,b=[];v[s]=b[s]=S,v[1-s]=d[1-s],b[1-s]=m[1-s],u.push(v[0],v[1]),u.push(b[0],b[1]);break;default:v[s]=d[s],v[1-s]=m[1-s],u.push(v[0],v[1])}return u.push(a[h++],a[h++]),u}function Ai(a,r){var e=[],n=a.length,o,s;function u(m,_,S){var b=m.coord,P=(S-b)/(_.coord-b),R=(0,Rn.lerp)(P,[m.color,_.color]);return{coord:S,color:R}}for(var h=0;h<n;h++){var v=a[h],d=v.coord;if(d<0)o=v;else if(d>r){s?e.push(u(s,v,r)):o&&e.push(u(o,v,0),u(o,v,r));break}else o&&(e.push(u(o,v,0)),o=null),e.push(v),s=v}return e}function wa(a,r,e){var n=a.getVisual("visualMeta");if(!(!n||!n.length||!a.count())&&r.type==="cartesian2d"){for(var o,s,u=n.length-1;u>=0;u--){var h=a.getDimensionInfo(n[u].dimension);if(o=h&&h.coordDim,o==="x"||o==="y"){s=n[u];break}}if(!!s){var v=r.getAxis(o),d=g.UI(s.stops,function(mt){return{coord:v.toGlobalCoord(v.dataToCoord(mt.value)),color:mt.color}}),m=d.length,_=s.outerColors.slice();m&&d[0].coord>d[m-1].coord&&(d.reverse(),_.reverse());var S=Ai(d,o==="x"?e.getWidth():e.getHeight()),b=S.length;if(!b&&m)return d[0].coord<0?_[1]?_[1]:d[m-1].color:_[0]?_[0]:d[0].color;var P=10,R=S[0].coord-P,Y=S[b-1].coord+P,nt=Y-R;if(nt<.001)return"transparent";g.S6(S,function(mt){mt.offset=(mt.coord-R)/nt}),S.push({offset:b?S[b-1].offset:.5,color:_[1]||"transparent"}),S.unshift({offset:b?S[0].offset:.5,color:_[0]||"transparent"});var pt=new Qr.Z(0,0,0,0,S,!0);return pt[o]=R,pt[o+"2"]=Y,pt}}}function oo(a,r,e){var n=a.get("showAllSymbol"),o=n==="auto";if(!(n&&!o)){var s=e.getAxesByScale("ordinal")[0];if(!!s&&!(o&&Tl(s,r))){var u=r.mapDimension(s.dim),h={};return g.S6(s.getViewLabels(),function(v){var d=s.scale.getRawOrdinalNumber(v.tickValue);h[d]=1}),function(v){return!h.hasOwnProperty(r.get(u,v))}}}}function Tl(a,r){var e=a.getExtent(),n=Math.abs(e[1]-e[0])/a.scale.count();isNaN(n)&&(n=0);for(var o=r.count(),s=Math.max(1,Math.round(o/5)),u=0;u<o;u+=s)if(ea.getSymbolSize(r,u)[a.isHorizontal()?1:0]*1.5>n)return!1;return!0}function fu(a,r){return isNaN(a)||isNaN(r)}function hu(a){for(var r=a.length/2;r>0&&fu(a[r*2-2],a[r*2-1]);r--);return r-1}function wl(a,r){return[a[r*2],a[r*2+1]]}function Cs(a,r,e){for(var n=a.length/2,o=e==="x"?0:1,s,u,h=0,v=-1,d=0;d<n;d++)if(u=a[d*2+o],!(isNaN(u)||isNaN(a[d*2+1-o]))){if(d===0){s=u;continue}if(s<=r&&u>=r||s>=r&&u<=r){v=d;break}h=d,s=u}return{range:[h,v],t:(r-s)/(u-s)}}function Yr(a){if(a.get(["endLabel","show"]))return!0;for(var r=0;r<ir.L1.length;r++)if(a.get([ir.L1[r],"endLabel","show"]))return!0;return!1}function Ro(a,r,e,n){if(Jn(r,"cartesian2d")){var o=n.getModel("endLabel"),s=o.get("valueAnimation"),u=n.getData(),h={lastFrameIndex:0},v=Yr(n)?function(b,P){a._endLabelOnDuring(b,P,u,h,s,o,r)}:null,d=r.getBaseAxis().isHorizontal(),m=lu(r,e,n,function(){var b=a._endLabel;b&&e&&h.originalX!=null&&b.attr({x:h.originalX,y:h.originalY})},v);if(!n.get("clip",!0)){var _=m.shape,S=Math.max(_.width,_.height);d?(_.y-=S,_.height+=S*2):(_.x-=S,_.width+=S*2)}return v&&v(1,m),m}else return Ms(r,e,n)}function Ps(a,r){var e=r.getBaseAxis(),n=e.isHorizontal(),o=e.inverse,s=n?o?"right":"left":"center",u=n?"middle":o?"top":"bottom";return{normal:{align:a.get("align")||s,verticalAlign:a.get("verticalAlign")||u}}}var ji=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(){var e=new Mr.Z,n=new ra;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=e},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem,h=this.group,v=e.getData(),d=e.getModel("lineStyle"),m=e.getModel("areaStyle"),_=v.getLayout("points")||[],S=u.type==="polar",b=this._coordSys,P=this._symbolDraw,R=this._polyline,Y=this._polygon,nt=this._lineGroup,pt=e.get("animation"),mt=!m.isEmpty(),bt=m.get("origin"),Lt=Po(u,v,bt),Pt=mt&&zr(u,v,Lt),Ot=e.get("showSymbol"),kt=e.get("connectNulls"),jt=Ot&&!S&&oo(e,v,u),re=this._data;re&&re.eachItemGraphicEl(function(En,an){En.__temp&&(h.remove(En),re.setItemGraphicEl(an,null))}),Ot||P.remove(),h.add(nt);var ae=S?!1:e.get("step"),he;u&&u.getArea&&e.get("clip",!0)&&(he=u.getArea(),he.width!=null?(he.x-=.1,he.y-=.1,he.width+=.2,he.height+=.2):he.r0&&(he.r0-=.5,he.r+=.5)),this._clipShapeForSymbol=he;var me=wa(v,u,o)||v.getVisual("style")[v.getVisual("drawType")];if(!(R&&b.type===u.type&&ae===this._step))Ot&&P.updateData(v,{isIgnore:jt,clipShape:he,disableAnimation:!0,getSymbolPoint:function(En){return[_[En*2],_[En*2+1]]}}),pt&&this._initSymbolLabelAnimation(v,u,he),ae&&(_=pr(_,u,ae,kt),Pt&&(Pt=pr(Pt,u,ae,kt))),R=this._newPolyline(_),mt?Y=this._newPolygon(_,Pt):Y&&(nt.remove(Y),Y=this._polygon=null),S||this._initOrUpdateEndLabel(e,u,(0,Cn.Lz)(me)),nt.setClipPath(Ro(this,u,!0,e));else{mt&&!Y?Y=this._newPolygon(_,Pt):Y&&!mt&&(nt.remove(Y),Y=this._polygon=null),S||this._initOrUpdateEndLabel(e,u,(0,Cn.Lz)(me));var Te=nt.getClipPath();if(Te){var be=Ro(this,u,!1,e);cr.KZ(Te,{shape:be.shape},e)}else nt.setClipPath(Ro(this,u,!0,e));Ot&&P.updateData(v,{isIgnore:jt,clipShape:he,disableAnimation:!0,getSymbolPoint:function(En){return[_[En*2],_[En*2+1]]}}),(!uu(this._stackedOnPoints,Pt)||!uu(this._points,_))&&(pt?this._doUpdateAnimation(v,Pt,u,o,ae,bt,kt):(ae&&(_=pr(_,u,ae,kt),Pt&&(Pt=pr(Pt,u,ae,kt))),R.setShape({points:_}),Y&&Y.setShape({points:_,stackedOnPoints:Pt})))}var Fe=e.getModel("emphasis"),Ye=Fe.get("focus"),Ue=Fe.get("blurScope"),$e=Fe.get("disabled");if(R.useStyle(g.ce(d.getLineStyle(),{fill:"none",stroke:me,lineJoin:"bevel"})),(0,ir.WO)(R,e,"lineStyle"),R.style.lineWidth>0&&e.get(["emphasis","lineStyle","width"])==="bolder"){var Sr=R.getState("emphasis").style;Sr.lineWidth=+R.style.lineWidth+1}(0,Hr.A)(R).seriesIndex=e.seriesIndex,(0,ir.k5)(R,Ye,Ue,$e);var Ar=Es(e.get("smooth")),Wr=e.get("smoothMonotone");if(R.setShape({smooth:Ar,smoothMonotone:Wr,connectNulls:kt}),Y){var jr=v.getCalculationInfo("stackedOnSeries"),fn=0;Y.useStyle(g.ce(m.getAreaStyle(),{fill:me,opacity:.7,lineJoin:"bevel",decal:v.getVisual("style").decal})),jr&&(fn=Es(jr.get("smooth"))),Y.setShape({smooth:Ar,stackedOnSmooth:fn,smoothMonotone:Wr,connectNulls:kt}),(0,ir.WO)(Y,e,"areaStyle"),(0,Hr.A)(Y).seriesIndex=e.seriesIndex,(0,ir.k5)(Y,Ye,Ue,$e)}var zn=function(En){s._changePolyState(En)};v.eachItemGraphicEl(function(En){En&&(En.onHoverStateChange=zn)}),this._polyline.onHoverStateChange=zn,this._data=v,this._coordSys=u,this._stackedOnPoints=Pt,this._points=_,this._step=ae,this._valueOrigin=bt,e.get("triggerLineEvent")&&(this.packEventData(e,R),Y&&this.packEventData(e,Y))},r.prototype.packEventData=function(e,n){(0,Hr.A)(n).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},r.prototype.highlight=function(e,n,o,s){var u=e.getData(),h=Xe.gO(u,s);if(this._changePolyState("emphasis"),!(h instanceof Array)&&h!=null&&h>=0){var v=u.getLayout("points"),d=u.getItemGraphicEl(h);if(!d){var m=v[h*2],_=v[h*2+1];if(isNaN(m)||isNaN(_)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(m,_))return;var S=e.get("zlevel"),b=e.get("z");d=new ea(u,h),d.x=m,d.y=_,d.setZ(S,b);var P=d.getSymbolPath().getTextContent();P&&(P.zlevel=S,P.z=b,P.z2=this._polyline.z2+1),d.__temp=!0,u.setItemGraphicEl(h,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else vn.Z.prototype.highlight.call(this,e,n,o,s)},r.prototype.downplay=function(e,n,o,s){var u=e.getData(),h=Xe.gO(u,s);if(this._changePolyState("normal"),h!=null&&h>=0){var v=u.getItemGraphicEl(h);v&&(v.__temp?(u.setItemGraphicEl(h,null),this.group.remove(v)):v.downplay())}else vn.Z.prototype.downplay.call(this,e,n,o,s)},r.prototype._changePolyState=function(e){var n=this._polygon;(0,ir.Gl)(this._polyline,e),n&&(0,ir.Gl)(n,e)},r.prototype._newPolyline=function(e){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new Io({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},r.prototype._newPolygon=function(e,n){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new Sl({shape:{points:e,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},r.prototype._initSymbolLabelAnimation=function(e,n,o){var s,u,h=n.getBaseAxis(),v=h.inverse;n.type==="cartesian2d"?(s=h.isHorizontal(),u=!1):n.type==="polar"&&(s=h.dim==="angle",u=!0);var d=e.hostModel,m=d.get("animationDuration");g.mf(m)&&(m=m(null));var _=d.get("animationDelay")||0,S=g.mf(_)?_(null):_;e.eachItemGraphicEl(function(b,P){var R=b;if(R){var Y=[b.x,b.y],nt=void 0,pt=void 0,mt=void 0;if(o)if(u){var bt=o,Lt=n.pointToCoord(Y);s?(nt=bt.startAngle,pt=bt.endAngle,mt=-Lt[1]/180*Math.PI):(nt=bt.r0,pt=bt.r,mt=Lt[0])}else{var Pt=o;s?(nt=Pt.x,pt=Pt.x+Pt.width,mt=b.x):(nt=Pt.y+Pt.height,pt=Pt.y,mt=b.y)}var Ot=pt===nt?0:(mt-nt)/(pt-nt);v&&(Ot=1-Ot);var kt=g.mf(_)?_(P):m*Ot+S,jt=R.getSymbolPath(),re=jt.getTextContent();R.attr({scaleX:0,scaleY:0}),R.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:kt}),re&&re.animateFrom({style:{opacity:0}},{duration:300,delay:kt}),jt.disableLabelAnimation=!0}})},r.prototype._initOrUpdateEndLabel=function(e,n,o){var s=e.getModel("endLabel");if(Yr(e)){var u=e.getData(),h=this._polyline,v=u.getLayout("points");if(!v){h.removeTextContent(),this._endLabel=null;return}var d=this._endLabel;d||(d=this._endLabel=new ee.ZP({z2:200}),d.ignoreClip=!0,h.setTextContent(this._endLabel),h.disableLabelAnimation=!0);var m=hu(v);m>=0&&((0,or.ni)(h,(0,or.k3)(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:m,defaultText:function(_,S,b){return b!=null?Ui(u,b):Ga(u,_)},enableTextSetter:!0},Ps(s,n)),h.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},r.prototype._endLabelOnDuring=function(e,n,o,s,u,h,v){var d=this._endLabel,m=this._polyline;if(d){e<1&&s.originalX==null&&(s.originalX=d.x,s.originalY=d.y);var _=o.getLayout("points"),S=o.hostModel,b=S.get("connectNulls"),P=h.get("precision"),R=h.get("distance")||0,Y=v.getBaseAxis(),nt=Y.isHorizontal(),pt=Y.inverse,mt=n.shape,bt=pt?nt?mt.x:mt.y+mt.height:nt?mt.x+mt.width:mt.y,Lt=(nt?R:0)*(pt?-1:1),Pt=(nt?0:-R)*(pt?-1:1),Ot=nt?"x":"y",kt=Cs(_,bt,Ot),jt=kt.range,re=jt[1]-jt[0],ae=void 0;if(re>=1){if(re>1&&!b){var he=wl(_,jt[0]);d.attr({x:he[0]+Lt,y:he[1]+Pt}),u&&(ae=S.getRawValue(jt[0]))}else{var he=m.getPointOn(bt,Ot);he&&d.attr({x:he[0]+Lt,y:he[1]+Pt});var me=S.getRawValue(jt[0]),Te=S.getRawValue(jt[1]);u&&(ae=Xe.pk(o,P,me,Te,kt.t))}s.lastFrameIndex=jt[0]}else{var be=e===1||s.lastFrameIndex>0?jt[0]:0,he=wl(_,be);u&&(ae=S.getRawValue(be)),d.attr({x:he[0]+Lt,y:he[1]+Pt})}u&&(0,or.qA)(d).setLabelText(ae)}},r.prototype._doUpdateAnimation=function(e,n,o,s,u,h,v){var d=this._polyline,m=this._polygon,_=e.hostModel,S=Gn(this._data,e,this._stackedOnPoints,n,this._coordSys,o,this._valueOrigin,h),b=S.current,P=S.stackedOnCurrent,R=S.next,Y=S.stackedOnNext;if(u&&(b=pr(S.current,o,u,v),P=pr(S.stackedOnCurrent,o,u,v),R=pr(S.next,o,u,v),Y=pr(S.stackedOnNext,o,u,v)),ao(b,R)>3e3||m&&ao(P,Y)>3e3){d.stopAnimation(),d.setShape({points:R}),m&&(m.stopAnimation(),m.setShape({points:R,stackedOnPoints:Y}));return}d.shape.__points=S.current,d.shape.points=b;var nt={shape:{points:R}};S.current!==b&&(nt.shape.__points=S.next),d.stopAnimation(),cr.D(d,nt,_),m&&(m.setShape({points:b,stackedOnPoints:P}),m.stopAnimation(),cr.D(m,{shape:{stackedOnPoints:Y}},_),d.shape.points!==m.shape.points&&(m.shape.points=d.shape.points));for(var pt=[],mt=S.status,bt=0;bt<mt.length;bt++){var Lt=mt[bt].cmd;if(Lt==="="){var Pt=e.getItemGraphicEl(mt[bt].idx1);Pt&&pt.push({el:Pt,ptIdx:bt})}}d.animators&&d.animators.length&&d.animators[0].during(function(){m&&m.dirtyShape();for(var Ot=d.shape.__points,kt=0;kt<pt.length;kt++){var jt=pt[kt].el,re=pt[kt].ptIdx*2;jt.x=Ot[re],jt.y=Ot[re+1],jt.markRedraw()}})},r.prototype.remove=function(e){var n=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(s,u){s.__temp&&(n.remove(s),o.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},r.type="line",r}(vn.Z),Ls=ji,Da=F(95682);function Hn(a,r){return{seriesType:a,plan:(0,Da.Z)(),reset:function(e){var n=e.getData(),o=e.coordinateSystem,s=e.pipelineContext,u=r||s.large;if(!!o){var h=(0,g.UI)(o.dimensions,function(b){return n.mapDimension(b)}).slice(0,2),v=h.length,d=n.getCalculationInfo("stackResultDimension");(0,ur.M)(n,h[0])&&(h[0]=d),(0,ur.M)(n,h[1])&&(h[1]=d);var m=n.getStore(),_=n.getDimensionIndex(h[0]),S=n.getDimensionIndex(h[1]);return v&&{progress:function(b,P){for(var R=b.end-b.start,Y=u&&(0,kr.o)(R*v),nt=[],pt=[],mt=b.start,bt=0;mt<b.end;mt++){var Lt=void 0;if(v===1){var Pt=m.get(_,mt);Lt=o.dataToPoint(Pt,null,pt)}else nt[0]=m.get(_,mt),nt[1]=m.get(S,mt),Lt=o.dataToPoint(nt,null,pt);u?(Y[bt++]=Lt[0],Y[bt++]=Lt[1]):P.setItemLayout(mt,Lt.slice())}u&&P.setLayout("points",Y)}}}}}}var va={average:function(a){for(var r=0,e=0,n=0;n<a.length;n++)isNaN(a[n])||(r+=a[n],e++);return e===0?NaN:r/e},sum:function(a){for(var r=0,e=0;e<a.length;e++)r+=a[e]||0;return r},max:function(a){for(var r=-1/0,e=0;e<a.length;e++)a[e]>r&&(r=a[e]);return isFinite(r)?r:NaN},min:function(a){for(var r=1/0,e=0;e<a.length;e++)a[e]<r&&(r=a[e]);return isFinite(r)?r:NaN},nearest:function(a){return a[0]}},hi=function(a){return Math.round(a.length/2)};function da(a){return{seriesType:a,reset:function(r,e,n){var o=r.getData(),s=r.get("sampling"),u=r.coordinateSystem,h=o.count();if(h>10&&u.type==="cartesian2d"&&s){var v=u.getBaseAxis(),d=u.getOtherAxis(v),m=v.getExtent(),_=n.getDevicePixelRatio(),S=Math.abs(m[1]-m[0])*(_||1),b=Math.round(h/S);if(isFinite(b)&&b>1){s==="lttb"&&r.setData(o.lttbDownSample(o.mapDimension(d.dim),1/b));var P=void 0;(0,g.HD)(s)?P=va[s]:(0,g.mf)(s)&&(P=s),P&&r.setData(o.downSample(o.mapDimension(d.dim),1/b,P,hi))}}}}}function Ji(a){a.registerChartView(Ls),a.registerSeriesModel(Ds),a.registerLayout(Hn("line",!0)),a.registerVisual({seriesType:"line",reset:function(r){var e=r.getData(),n=r.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,da("line"))}var ri=F(79093),pa=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(e){var n=this.coordinateSystem;if(n&&n.clampData){var o=n.dataToPoint(n.clampData(e)),s=this.getData(),u=s.getLayout("offset"),h=s.getLayout("size"),v=n.getBaseAxis().isHorizontal()?0:1;return o[v]+=u+h/2,o}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(xe.Z);xe.Z.registerClass(pa);var $r=pa,Zi=F(42151),Wi=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(){return(0,Er.Z)(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>e&&(e=n),e},r.prototype.brushSelector=function(e,n,o){return o.rect(n.getItemLayout(e))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=(0,Zi.ZL)($r.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}($r),Aa=Wi,ni=F(270),Ua=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),_n=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="sausage",n}return r.prototype.getDefaultShape=function(){return new Ua},r.prototype.buildPath=function(e,n){var o=n.cx,s=n.cy,u=Math.max(n.r0||0,0),h=Math.max(n.r,0),v=(h-u)*.5,d=u+v,m=n.startAngle,_=n.endAngle,S=n.clockwise,b=Math.PI*2,P=S?_-m<b:m-_<b;P||(m=_-(S?b:-b));var R=Math.cos(m),Y=Math.sin(m),nt=Math.cos(_),pt=Math.sin(_);P?(e.moveTo(R*u+o,Y*u+s),e.arc(R*d+o,Y*d+s,v,-Math.PI+m,m,!S)):e.moveTo(R*h+o,Y*h+s),e.arc(o,s,h,m,_,!S),e.arc(nt*d+o,pt*d+s,v,_-Math.PI*2,_-Math.PI,!S),u!==0&&e.arc(o,s,u,_,m,S)},r}(dt.ZP),Oo=_n;function Is(a,r){r=r||{};var e=r.isRoundCap;return function(n,o,s){var u=o.position;if(!u||u instanceof Array)return(0,vt.wI)(n,o,s);var h=a(u),v=o.distance!=null?o.distance:5,d=this.shape,m=d.cx,_=d.cy,S=d.r,b=d.r0,P=(S+b)/2,R=d.startAngle,Y=d.endAngle,nt=(R+Y)/2,pt=e?Math.abs(S-b)/2:0,mt=Math.cos,bt=Math.sin,Lt=m+S*mt(R),Pt=_+S*bt(R),Ot="left",kt="top";switch(h){case"startArc":Lt=m+(b-v)*mt(nt),Pt=_+(b-v)*bt(nt),Ot="center",kt="top";break;case"insideStartArc":Lt=m+(b+v)*mt(nt),Pt=_+(b+v)*bt(nt),Ot="center",kt="bottom";break;case"startAngle":Lt=m+P*mt(R)+ka(R,v+pt,!1),Pt=_+P*bt(R)+Rs(R,v+pt,!1),Ot="right",kt="middle";break;case"insideStartAngle":Lt=m+P*mt(R)+ka(R,-v+pt,!1),Pt=_+P*bt(R)+Rs(R,-v+pt,!1),Ot="left",kt="middle";break;case"middle":Lt=m+P*mt(nt),Pt=_+P*bt(nt),Ot="center",kt="middle";break;case"endArc":Lt=m+(S+v)*mt(nt),Pt=_+(S+v)*bt(nt),Ot="center",kt="bottom";break;case"insideEndArc":Lt=m+(S-v)*mt(nt),Pt=_+(S-v)*bt(nt),Ot="center",kt="top";break;case"endAngle":Lt=m+P*mt(Y)+ka(Y,v+pt,!0),Pt=_+P*bt(Y)+Rs(Y,v+pt,!0),Ot="left",kt="middle";break;case"insideEndAngle":Lt=m+P*mt(Y)+ka(Y,-v+pt,!0),Pt=_+P*bt(Y)+Rs(Y,-v+pt,!0),Ot="right",kt="middle";break;default:return(0,vt.wI)(n,o,s)}return n=n||{},n.x=Lt,n.y=Pt,n.align=Ot,n.verticalAlign=kt,n}}function Bi(a,r,e,n){if((0,g.hj)(n)){a.setTextConfig({rotation:n});return}else if((0,g.kJ)(r)){a.setTextConfig({rotation:0});return}var o=a.shape,s=o.clockwise?o.startAngle:o.endAngle,u=o.clockwise?o.endAngle:o.startAngle,h=(s+u)/2,v,d=e(r);switch(d){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":v=h;break;case"startAngle":case"insideStartAngle":v=s;break;case"endAngle":case"insideEndAngle":v=u;break;default:a.setTextConfig({rotation:0});return}var m=Math.PI*1.5-v;d==="middle"&&m>Math.PI/2&&m<Math.PI*1.5&&(m-=Math.PI),a.setTextConfig({rotation:m})}function ka(a,r,e){return r*Math.sin(a)*(e?-1:1)}function Rs(a,r,e){return r*Math.cos(a)*(e?1:-1)}var Tn=Math.max,ba=Math.min;function Os(a,r){var e=a.getArea&&a.getArea();if(Jn(a,"cartesian2d")){var n=a.getBaseAxis();if(n.type!=="category"||!n.onBand){var o=r.getLayout("bandWidth");n.isHorizontal()?(e.x-=o,e.width+=o*2):(e.y-=o,e.height+=o*2)}}return e}var No=function(a){(0,fe.ZT)(r,a);function r(){var e=a.call(this)||this;return e.type=r.type,e._isFirstFrame=!0,e}return r.prototype.render=function(e,n,o,s){this._model=e,this._removeOnRenderedListener(o),this._updateDrawMode(e);var u=e.get("coordinateSystem");(u==="cartesian2d"||u==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,n,o):this._renderNormal(e,n,o,s))},r.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},r.prototype.incrementalRender=function(e,n){this._progressiveEls=[],this._incrementalRenderLarge(e,n)},r.prototype.eachRendered=function(e){(0,br.traverseElements)(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e,n,o,s){var u=this.group,h=e.getData(),v=this._data,d=e.coordinateSystem,m=d.getBaseAxis(),_;d.type==="cartesian2d"?_=m.isHorizontal():d.type==="polar"&&(_=m.dim==="angle");var S=e.isAnimationEnabled()?e:null,b=Bo(e,d);b&&this._enableRealtimeSort(b,h,o);var P=e.get("clip",!0)||b,R=Os(d,h);u.removeClipPath();var Y=e.get("roundCap",!0),nt=e.get("showBackground",!0),pt=e.getModel("backgroundStyle"),mt=pt.get("borderRadius")||0,bt=[],Lt=this._backgroundEls,Pt=s&&s.isInitSort,Ot=s&&s.type==="changeAxisOrder";function kt(ae){var he=Bs[d.type](h,ae),me=gf(d,_,he);return me.useStyle(pt.getItemStyle()),d.type==="cartesian2d"&&me.setShape("r",mt),bt[ae]=me,me}h.diff(v).add(function(ae){var he=h.getItemModel(ae),me=Bs[d.type](h,ae,he);if(nt&&kt(ae),!(!h.hasValue(ae)||!so[d.type](me))){var Te=!1;P&&(Te=Va[d.type](R,me));var be=Ns[d.type](e,h,ae,me,_,S,m.model,!1,Y);b&&(be.forceLabelAnimation=!0),pf(be,h,ae,he,me,e,_,d.type==="polar"),Pt?be.attr({shape:me}):b?Ma(b,S,be,me,ae,_,!1,!1):(0,cr.KZ)(be,{shape:me},e,ae),h.setItemGraphicEl(ae,be),u.add(be),be.ignore=Te}}).update(function(ae,he){var me=h.getItemModel(ae),Te=Bs[d.type](h,ae,me);if(nt){var be=void 0;Lt.length===0?be=kt(he):(be=Lt[he],be.useStyle(pt.getItemStyle()),d.type==="cartesian2d"&&be.setShape("r",mt),bt[ae]=be);var Fe=Bs[d.type](h,ae),Ye=lo(_,Fe,d);(0,cr.D)(be,{shape:Ye},S,ae)}var Ue=v.getItemGraphicEl(he);if(!h.hasValue(ae)||!so[d.type](Te)){u.remove(Ue);return}var $e=!1;if(P&&($e=Va[d.type](R,Te),$e&&u.remove(Ue)),Ue?(0,cr.Zi)(Ue):Ue=Ns[d.type](e,h,ae,Te,_,S,m.model,!!Ue,Y),b&&(Ue.forceLabelAnimation=!0),Ot){var Sr=Ue.getTextContent();if(Sr){var Ar=(0,or.qA)(Sr);Ar.prevValue!=null&&(Ar.prevValue=Ar.value)}}else pf(Ue,h,ae,me,Te,e,_,d.type==="polar");Pt?Ue.attr({shape:Te}):b?Ma(b,S,Ue,Te,ae,_,!0,Ot):(0,cr.D)(Ue,{shape:Te},e,ae,null),h.setItemGraphicEl(ae,Ue),Ue.ignore=$e,u.add(Ue)}).remove(function(ae){var he=v.getItemGraphicEl(ae);he&&(0,cr.XD)(he,e,ae)}).execute();var jt=this._backgroundGroup||(this._backgroundGroup=new Mr.Z);jt.removeAll();for(var re=0;re<bt.length;++re)jt.add(bt[re]);u.add(jt),this._backgroundEls=bt,this._data=h},r.prototype._renderLarge=function(e,n,o){this._clear(),Al(e,this.group),this._updateLargeClip(e)},r.prototype._incrementalRenderLarge=function(e,n){this._removeBackground(),Al(n,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(e){var n=e.get("clip",!0)&&Pi(e.coordinateSystem,!1,e),o=this.group;n?o.setClipPath(n):o.removeClipPath()},r.prototype._enableRealtimeSort=function(e,n,o){var s=this;if(!!n.count()){var u=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,e,o),this._isFirstFrame=!1;else{var h=function(v){var d=n.getItemGraphicEl(v),m=d&&d.shape;return m&&Math.abs(u.isHorizontal()?m.height:m.width)||0};this._onRendered=function(){s._updateSortWithinSameData(n,h,u,o)},o.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(e,n,o){var s=[];return e.each(e.mapDimension(n.dim),function(u,h){var v=o(h);v=v??NaN,s.push({dataIndex:h,mappedValue:v,ordinalNumber:u})}),s.sort(function(u,h){return h.mappedValue-u.mappedValue}),{ordinalNumbers:(0,g.UI)(s,function(u){return u.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(e,n,o){for(var s=o.scale,u=e.mapDimension(o.dim),h=Number.MAX_VALUE,v=0,d=s.getOrdinalMeta().categories.length;v<d;++v){var m=e.rawIndexOf(u,s.getRawOrdinalNumber(v)),_=m<0?Number.MIN_VALUE:n(e.indexOfRawIndex(m));if(_>h)return!0;h=_}return!1},r.prototype._isOrderDifferentInView=function(e,n){for(var o=n.scale,s=o.getExtent(),u=Math.max(0,s[0]),h=Math.min(s[1],o.getOrdinalMeta().categories.length-1);u<=h;++u)if(e.ordinalNumbers[u]!==o.getRawOrdinalNumber(u))return!0},r.prototype._updateSortWithinSameData=function(e,n,o,s){if(!!this._isOrderChangedWithinSameData(e,n,o)){var u=this._dataSort(e,o,n);this._isOrderDifferentInView(u,o)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:u}))}},r.prototype._dispatchInitSort=function(e,n,o){var s=n.baseAxis,u=this._dataSort(e,s,function(h){return e.get(e.mapDimension(n.otherAxis.dim),h)});o.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:u})},r.prototype.remove=function(e,n){this._clear(this._model),this._removeOnRenderedListener(n)},r.prototype.dispose=function(e,n){this._removeOnRenderedListener(n)},r.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(e){var n=this.group,o=this._data;e&&e.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(s){(0,cr.XD)(s,e,(0,Hr.A)(s).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(vn.Z),Va={cartesian2d:function(a,r){var e=r.width<0?-1:1,n=r.height<0?-1:1;e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height);var o=a.x+a.width,s=a.y+a.height,u=Tn(r.x,a.x),h=ba(r.x+r.width,o),v=Tn(r.y,a.y),d=ba(r.y+r.height,s),m=h<u,_=d<v;return r.x=m&&u>o?h:u,r.y=_&&v>s?d:v,r.width=m?0:h-u,r.height=_?0:d-v,e<0&&(r.x+=r.width,r.width=-r.width),n<0&&(r.y+=r.height,r.height=-r.height),m||_},polar:function(a,r){var e=r.r0<=r.r?1:-1;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}var o=ba(r.r,a.r),s=Tn(r.r0,a.r0);r.r=o,r.r0=s;var u=o-s<0;if(e<0){var n=r.r;r.r=r.r0,r.r0=n}return u}},Ns={cartesian2d:function(a,r,e,n,o,s,u,h,v){var d=new on.Z({shape:(0,g.l7)({},n),z2:1});if(d.__dataIndex=e,d.name="item",s){var m=d.shape,_=o?"height":"width";m[_]=0}return d},polar:function(a,r,e,n,o,s,u,h,v){var d=!o&&v?Oo:Di.C,m=new d({shape:n,z2:1});m.name="item";var _=df(o);if(m.calculateTextPosition=Is(_,{isRoundCap:d===Oo}),s){var S=m.shape,b=o?"r":"endAngle",P={};S[b]=o?0:n.startAngle,P[b]=n[b],(h?cr.D:cr.KZ)(m,{shape:P},s)}return m}};function Bo(a,r){var e=a.get("realtimeSort",!0),n=r.getBaseAxis();if(e&&n.type==="category"&&r.type==="cartesian2d")return{baseAxis:n,otherAxis:r.getOtherAxis(n)}}function Ma(a,r,e,n,o,s,u,h){var v,d;s?(d={x:n.x,width:n.width},v={y:n.y,height:n.height}):(d={y:n.y,height:n.height},v={x:n.x,width:n.width}),h||(u?cr.D:cr.KZ)(e,{shape:v},r,o,null);var m=r?a.baseAxis.model:null;(u?cr.D:cr.KZ)(e,{shape:d},m,o)}function na(a,r){for(var e=0;e<r.length;e++)if(!isFinite(a[r[e]]))return!0;return!1}var vf=["x","y","width","height"],cu=["cx","cy","r","startAngle","endAngle"],so={cartesian2d:function(a){return!na(a,vf)},polar:function(a){return!na(a,cu)}},Bs={cartesian2d:function(a,r,e){var n=a.getItemLayout(r),o=e?Za(e,n):0,s=n.width>0?1:-1,u=n.height>0?1:-1;return{x:n.x+s*o/2,y:n.y+u*o/2,width:n.width-s*o,height:n.height-u*o}},polar:function(a,r,e){var n=a.getItemLayout(r);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Dl(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function df(a){return function(r){var e=r?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+e;default:return n}}}(a)}function pf(a,r,e,n,o,s,u,h){var v=r.getItemVisual(e,"style");h||a.setShape("r",n.get(["itemStyle","borderRadius"])||0),a.useStyle(v);var d=n.getShallow("cursor");d&&a.attr("cursor",d);var m=h?u?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":u?o.height>=0?"bottom":"top":o.width>=0?"right":"left",_=(0,or.k3)(n);(0,or.ni)(a,_,{labelFetcher:s,labelDataIndex:e,defaultText:Ga(s.getData(),e),inheritColor:v.fill,defaultOpacity:v.opacity,defaultOutsidePosition:m});var S=a.getTextContent();if(h&&S){var b=n.get(["label","position"]);a.textConfig.inside=b==="middle"?!0:null,Bi(a,b==="outside"?m:b,df(u),n.get(["label","rotate"]))}(0,or.pe)(S,_,s.getRawValue(e),function(R){return Ui(r,R)});var P=n.getModel(["emphasis"]);(0,ir.k5)(a,P.get("focus"),P.get("blurScope"),P.get("disabled")),(0,ir.WO)(a,n),Dl(o)&&(a.style.fill="none",a.style.stroke="none",(0,g.S6)(a.states,function(R){R.style&&(R.style.fill=R.style.stroke="none")}))}function Za(a,r){var e=a.get(["itemStyle","borderColor"]);if(!e||e==="none")return 0;var n=a.get(["itemStyle","borderWidth"])||0,o=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),s=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(n,o,s)}var vu=function(){function a(){}return a}(),Fs=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeBar",n}return r.prototype.getDefaultShape=function(){return new vu},r.prototype.buildPath=function(e,n){for(var o=n.points,s=this.baseDimIdx,u=1-this.baseDimIdx,h=[],v=[],d=this.barWidth,m=0;m<o.length;m+=3)v[s]=d,v[u]=o[m+2],h[s]=o[m+s],h[u]=o[m+u],e.rect(h[0],h[1],v[0],v[1])},r}(dt.ZP);function Al(a,r,e,n){var o=a.getData(),s=o.getLayout("valueAxisHorizontal")?1:0,u=o.getLayout("largeDataIndices"),h=o.getLayout("size"),v=a.getModel("backgroundStyle"),d=o.getLayout("largeBackgroundPoints");if(d){var m=new Fs({shape:{points:d},incremental:!!n,silent:!0,z2:0});m.baseDimIdx=s,m.largeDataIndices=u,m.barWidth=h,m.useStyle(v.getItemStyle()),r.add(m),e&&e.push(m)}var _=new Fs({shape:{points:o.getLayout("largePoints")},incremental:!!n,z2:1});_.baseDimIdx=s,_.largeDataIndices=u,_.barWidth=h,r.add(_),_.useStyle(o.getVisual("style")),(0,Hr.A)(_).seriesIndex=a.seriesIndex,a.get("silent")||(_.on("mousedown",Fo),_.on("mousemove",Fo)),e&&e.push(_)}var Fo=(0,ni.P2)(function(a){var r=this,e=Wa(r,a.offsetX,a.offsetY);(0,Hr.A)(r).dataIndex=e>=0?e:null},30,!1);function Wa(a,r,e){for(var n=a.baseDimIdx,o=1-n,s=a.shape.points,u=a.largeDataIndices,h=[],v=[],d=a.barWidth,m=0,_=s.length/3;m<_;m++){var S=m*3;if(v[n]=d,v[o]=s[S+2],h[n]=s[S+n],h[o]=s[S+o],v[o]<0&&(h[o]+=v[o],v[o]=-v[o]),r>=h[0]&&r<=h[0]+v[0]&&e>=h[1]&&e<=h[1]+v[1])return u[m]}return-1}function lo(a,r,e){if(Jn(e,"cartesian2d")){var n=r,o=e.getArea();return{x:a?n.x:o.x,y:a?o.y:n.y,width:a?n.width:o.width,height:a?o.height:n.height}}else{var o=e.getArea(),s=r;return{cx:o.cx,cy:o.cy,r0:a?o.r0:s.r0,r:a?o.r:s.r,startAngle:a?s.startAngle:0,endAngle:a?s.endAngle:Math.PI*2}}}function gf(a,r,e){var n=a.type==="polar"?Di.C:on.Z;return new n({shape:lo(r,e,a),silent:!0,z2:0})}var Un=No;function ga(a){a.registerChartView(Un),a.registerSeriesModel(Aa),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,g.WA(ri.bK,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,ri.Bk)("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,da("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,e){var n=r.componentType||"series";e.eachComponent({mainType:n,query:r},function(o){r.sortInfo&&o.axis.setCategorySortInfo(r.sortInfo)})})}var ia=F(31891),Kr=F(76172),zo=Math.PI*2,aa=Math.PI/180;function Go(a,r){return Kr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function oa(a,r){var e=Go(a,r),n=a.get("center"),o=a.get("radius");g.kJ(o)||(o=[0,o]),g.kJ(n)||(n=[n,n]);var s=(0,Ie.GM)(e.width,r.getWidth()),u=(0,Ie.GM)(e.height,r.getHeight()),h=Math.min(s,u),v=(0,Ie.GM)(n[0],s)+e.x,d=(0,Ie.GM)(n[1],u)+e.y,m=(0,Ie.GM)(o[0],h/2),_=(0,Ie.GM)(o[1],h/2);return{cx:v,cy:d,r0:m,r:_}}function uo(a,r,e){r.eachSeriesByType(a,function(n){var o=n.getData(),s=o.mapDimension("value"),u=Go(n,e),h=oa(n,e),v=h.cx,d=h.cy,m=h.r,_=h.r0,S=-n.get("startAngle")*aa,b=n.get("minAngle")*aa,P=0;o.each(s,function(re){!isNaN(re)&&P++});var R=o.getSum(s),Y=Math.PI/(R||P)*2,nt=n.get("clockwise"),pt=n.get("roseType"),mt=n.get("stillShowZeroSum"),bt=o.getDataExtent(s);bt[0]=0;var Lt=zo,Pt=0,Ot=S,kt=nt?1:-1;if(o.setLayout({viewRect:u,r:m}),o.each(s,function(re,ae){var he;if(isNaN(re)){o.setItemLayout(ae,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:nt,cx:v,cy:d,r0:_,r:pt?NaN:m});return}pt!=="area"?he=R===0&&mt?Y:re*Y:he=zo/P,he<b?(he=b,Lt-=b):Pt+=re;var me=Ot+kt*he;o.setItemLayout(ae,{angle:he,startAngle:Ot,endAngle:me,clockwise:nt,cx:v,cy:d,r0:_,r:pt?(0,Ie.NU)(re,bt,[_,m]):m}),Ot=me}),Lt<zo&&P)if(Lt<=.001){var jt=zo/P;o.each(s,function(re,ae){if(!isNaN(re)){var he=o.getItemLayout(ae);he.angle=jt,he.startAngle=S+kt*ae*jt,he.endAngle=S+kt*(ae+1)*jt}})}else Y=Lt/Pt,Ot=S,o.each(s,function(re,ae){if(!isNaN(re)){var he=o.getItemLayout(ae),me=he.angle===b?b:re*Y;he.startAngle=Ot,he.endAngle=Ot+kt*me,Ot+=kt*me}})})}function Ea(a){return{seriesType:a,reset:function(r,e){var n=e.findComponents({mainType:"legend"});if(!(!n||!n.length)){var o=r.getData();o.filterSelf(function(s){for(var u=o.getName(s),h=0;h<n.length;h++)if(!n[h].isSelected(u))return!1;return!0})}}}}var Hi=F(62514),bi=F(41610),Pn=F(87377),du=F(54162),Nt=Math.PI/180;function Wt(a,r,e,n,o,s,u,h,v,d){if(a.length<2)return;function m(R){for(var Y=R.rB,nt=Y*Y,pt=0;pt<R.list.length;pt++){var mt=R.list[pt],bt=Math.abs(mt.label.y-e),Lt=n+mt.len,Pt=Lt*Lt,Ot=Math.sqrt((1-Math.abs(bt*bt/nt))*Pt),kt=r+(Ot+mt.len2)*o,jt=kt-mt.label.x,re=mt.targetTextWidth-jt*o;Vt(mt,re,!0),mt.label.x=kt}}function _(R){for(var Y={list:[],maxY:0},nt={list:[],maxY:0},pt=0;pt<R.length;pt++)if(R[pt].labelAlignTo==="none"){var mt=R[pt],bt=mt.label.y>e?nt:Y,Lt=Math.abs(mt.label.y-e);if(Lt>=bt.maxY){var Pt=mt.label.x-r-mt.len2*o,Ot=n+mt.len,kt=Math.abs(Pt)<Ot?Math.sqrt(Lt*Lt/(1-Pt*Pt/Ot/Ot)):Ot;bt.rB=kt,bt.maxY=Lt}bt.list.push(mt)}m(Y),m(nt)}for(var S=a.length,b=0;b<S;b++)if(a[b].position==="outer"&&a[b].labelAlignTo==="labelLine"){var P=a[b].label.x-d;a[b].linePoints[1][0]+=P,a[b].label.x=d}(0,du.GI)(a,v,v+u)&&_(a)}function Rt(a,r,e,n,o,s,u,h){for(var v=[],d=[],m=Number.MAX_VALUE,_=-Number.MAX_VALUE,S=0;S<a.length;S++){var b=a[S].label;Zt(a[S])||(b.x<r?(m=Math.min(m,b.x),v.push(a[S])):(_=Math.max(_,b.x),d.push(a[S])))}for(var S=0;S<a.length;S++){var P=a[S];if(!Zt(P)&&P.linePoints){if(P.labelStyleWidth!=null)continue;var b=P.label,R=P.linePoints,Y=void 0;P.labelAlignTo==="edge"?b.x<r?Y=R[2][0]-P.labelDistance-u-P.edgeDistance:Y=u+o-P.edgeDistance-R[2][0]-P.labelDistance:P.labelAlignTo==="labelLine"?b.x<r?Y=m-u-P.bleedMargin:Y=u+o-_-P.bleedMargin:b.x<r?Y=b.x-u-P.bleedMargin:Y=u+o-b.x-P.bleedMargin,P.targetTextWidth=Y,Vt(P,Y)}}Wt(d,r,e,n,1,o,s,u,h,_),Wt(v,r,e,n,-1,o,s,u,h,m);for(var S=0;S<a.length;S++){var P=a[S];if(!Zt(P)&&P.linePoints){var b=P.label,R=P.linePoints,nt=P.labelAlignTo==="edge",pt=b.style.padding,mt=pt?pt[1]+pt[3]:0,bt=b.style.backgroundColor?0:mt,Lt=P.rect.width+bt,Pt=R[1][0]-R[2][0];nt?b.x<r?R[2][0]=u+P.edgeDistance+Lt+P.labelDistance:R[2][0]=u+o-P.edgeDistance-Lt-P.labelDistance:(b.x<r?R[2][0]=b.x+P.labelDistance:R[2][0]=b.x-P.labelDistance,R[1][0]=R[2][0]+Pt),R[1][1]=R[2][1]=b.y}}}function Vt(a,r,e){if(e===void 0&&(e=!1),a.labelStyleWidth==null){var n=a.label,o=n.style,s=a.rect,u=o.backgroundColor,h=o.padding,v=h?h[1]+h[3]:0,d=o.overflow,m=s.width+(u?0:v);if(r<m||e){var _=s.height;if(d&&d.match("break")){n.setStyle("backgroundColor",null),n.setStyle("width",r-v);var S=n.getBoundingRect();n.setStyle("width",Math.ceil(S.width)),n.setStyle("backgroundColor",u)}else{var b=r-v,P=r<m?b:e?b>a.unconstrainedWidth?null:b:null;n.setStyle("width",P)}var R=n.getBoundingRect();s.width=R.width;var Y=(n.style.margin||0)+2.1;s.height=R.height+Y,s.y-=(s.height-_)/2}}}function Zt(a){return a.position==="center"}function oe(a){var r=a.getData(),e=[],n,o,s=!1,u=(a.get("minShowLabelAngle")||0)*Nt,h=r.getLayout("viewRect"),v=r.getLayout("r"),d=h.width,m=h.x,_=h.y,S=h.height;function b(Pt){Pt.ignore=!0}function P(Pt){if(!Pt.ignore)return!0;for(var Ot in Pt.states)if(Pt.states[Ot].ignore===!1)return!0;return!1}r.each(function(Pt){var Ot=r.getItemGraphicEl(Pt),kt=Ot.shape,jt=Ot.getTextContent(),re=Ot.getTextGuideLine(),ae=r.getItemModel(Pt),he=ae.getModel("label"),me=he.get("position")||ae.get(["emphasis","label","position"]),Te=he.get("distanceToLabelLine"),be=he.get("alignTo"),Fe=(0,Ie.GM)(he.get("edgeDistance"),d),Ye=he.get("bleedMargin"),Ue=ae.getModel("labelLine"),$e=Ue.get("length");$e=(0,Ie.GM)($e,d);var Sr=Ue.get("length2");if(Sr=(0,Ie.GM)(Sr,d),Math.abs(kt.endAngle-kt.startAngle)<u){(0,g.S6)(jt.states,b),jt.ignore=!0;return}if(!!P(jt)){var Ar=(kt.startAngle+kt.endAngle)/2,Wr=Math.cos(Ar),jr=Math.sin(Ar),fn,zn,En,an;n=kt.cx,o=kt.cy;var Ur=me==="inside"||me==="inner";if(me==="center")fn=kt.cx,zn=kt.cy,an="center";else{var Sn=(Ur?(kt.r+kt.r0)/2*Wr:kt.r*Wr)+n,mn=(Ur?(kt.r+kt.r0)/2*jr:kt.r*jr)+o;if(fn=Sn+Wr*3,zn=mn+jr*3,!Ur){var wn=Sn+Wr*($e+v-kt.r),Ci=mn+jr*($e+v-kt.r),Ni=wn+(Wr<0?-1:1)*Sr,Zn=Ci;be==="edge"?fn=Wr<0?m+Fe:m+d-Fe:fn=Ni+(Wr<0?-Te:Te),zn=Zn,En=[[Sn,mn],[wn,Ci],[Ni,Zn]]}an=Ur?"center":be==="edge"?Wr>0?"right":"left":Wr>0?"left":"right"}var Ti=Math.PI,gi=0,Yi=he.get("rotate");if((0,g.hj)(Yi))gi=Yi*(Ti/180);else if(me==="center")gi=0;else if(Yi==="radial"||Yi===!0){var ws=Wr<0?-Ar+Ti:-Ar;gi=ws}else if(Yi==="tangential"&&me!=="outside"&&me!=="outer"){var fa=Math.atan2(Wr,jr);fa<0&&(fa=Ti*2+fa);var Ud=jr>0;Ud&&(fa=Ti+fa),gi=fa-Ti}if(s=!!gi,jt.x=fn,jt.y=zn,jt.rotation=gi,jt.setStyle({verticalAlign:"middle"}),Ur){jt.setStyle({align:an});var uy=jt.states.select;uy&&(uy.x+=jt.x,uy.y+=jt.y)}else{var yl=jt.getBoundingRect().clone();yl.applyTransform(jt.getComputedTransform());var Wx=(jt.style.margin||0)+2.1;yl.y-=Wx/2,yl.height+=Wx,e.push({label:jt,labelLine:re,position:me,len:$e,len2:Sr,minTurnAngle:Ue.get("minTurnAngle"),maxSurfaceAngle:Ue.get("maxSurfaceAngle"),surfaceNormal:new bi.Z(Wr,jr),linePoints:En,textAlign:an,labelDistance:Te,labelAlignTo:be,edgeDistance:Fe,bleedMargin:Ye,rect:yl,unconstrainedWidth:yl.width,labelStyleWidth:jt.style.width})}Ot.setTextConfig({inside:Ur})}}),!s&&a.get("avoidLabelOverlap")&&Rt(e,n,o,v,d,S,m,_);for(var R=0;R<e.length;R++){var Y=e[R],nt=Y.label,pt=Y.labelLine,mt=isNaN(nt.x)||isNaN(nt.y);if(nt){nt.setStyle({align:Y.textAlign}),mt&&((0,g.S6)(nt.states,b),nt.ignore=!0);var bt=nt.states.select;bt&&(bt.x+=nt.x,bt.y+=nt.y)}if(pt){var Lt=Y.linePoints;mt||!Lt?((0,g.S6)(pt.states,b),pt.ignore=!0):((0,Pn.qK)(Lt,Y.minTurnAngle),(0,Pn._A)(Lt,Y.surfaceNormal,Y.maxSurfaceAngle),pt.setShape({points:Lt}),nt.__hostTarget.textGuideLineConfig={anchor:new bi.Z(Lt[0][0],Lt[0][1])})}}}function de(a,r,e){var n=a.get("borderRadius");if(n==null)return e?{cornerRadius:0}:null;(0,g.kJ)(n)||(n=[n,n,n,n]);var o=Math.abs(r.r||0-r.r0||0);return{cornerRadius:(0,g.UI)(n,function(s){return(0,vt.GM)(s,o)})}}var ke=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;s.z2=2;var u=new ee.ZP;return s.setTextContent(u),s.updateData(e,n,o,!0),s}return r.prototype.updateData=function(e,n,o,s){var u=this,h=e.hostModel,v=e.getItemModel(n),d=v.getModel("emphasis"),m=e.getItemLayout(n),_=(0,g.l7)(de(v.getModel("itemStyle"),m,!0),m);if(isNaN(_.startAngle)){u.setShape(_);return}if(s){u.setShape(_);var S=h.getShallow("animationType");h.ecModel.ssr?(cr.KZ(u,{scaleX:0,scaleY:0},h,{dataIndex:n,isFrom:!0}),u.originX=_.cx,u.originY=_.cy):S==="scale"?(u.shape.r=m.r0,cr.KZ(u,{shape:{r:m.r}},h,n)):o!=null?(u.setShape({startAngle:o,endAngle:o}),cr.KZ(u,{shape:{startAngle:m.startAngle,endAngle:m.endAngle}},h,n)):(u.shape.endAngle=m.startAngle,cr.D(u,{shape:{endAngle:m.endAngle}},h,n))}else(0,cr.Zi)(u),cr.D(u,{shape:_},h,n);u.useStyle(e.getItemVisual(n,"style")),(0,ir.WO)(u,v);var b=(m.startAngle+m.endAngle)/2,P=h.get("selectedOffset"),R=Math.cos(b)*P,Y=Math.sin(b)*P,nt=v.getShallow("cursor");nt&&u.attr("cursor",nt),this._updateLabel(h,e,n),u.ensureState("emphasis").shape=(0,g.l7)({r:m.r+(d.get("scale")&&d.get("scaleSize")||0)},de(d.getModel("itemStyle"),m)),(0,g.l7)(u.ensureState("select"),{x:R,y:Y,shape:de(v.getModel(["select","itemStyle"]),m)}),(0,g.l7)(u.ensureState("blur"),{shape:de(v.getModel(["blur","itemStyle"]),m)});var pt=u.getTextGuideLine(),mt=u.getTextContent();pt&&(0,g.l7)(pt.ensureState("select"),{x:R,y:Y}),(0,g.l7)(mt.ensureState("select"),{x:R,y:Y}),(0,ir.k5)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n,o){var s=this,u=n.getItemModel(o),h=u.getModel("labelLine"),v=n.getItemVisual(o,"style"),d=v&&v.fill,m=v&&v.opacity;(0,or.ni)(s,(0,or.k3)(u),{labelFetcher:n.hostModel,labelDataIndex:o,inheritColor:d,defaultOpacity:m,defaultText:e.getFormattedLabel(o,"normal")||n.getName(o)});var _=s.getTextContent();s.setTextConfig({position:null,rotation:null}),_.attr({z2:10});var S=e.get(["label","position"]);if(S!=="outside"&&S!=="outer")s.removeTextGuideLine();else{var b=this.getTextGuideLine();b||(b=new Hi.Z,this.setTextGuideLine(b)),(0,Pn.Iu)(this,(0,Pn.$x)(u),{stroke:d,opacity:(0,g.R1)(h.get(["lineStyle","opacity"]),m,1)})}},r}(Di.C),Ge=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,n,o,s){var u=e.getData(),h=this._data,v=this.group,d;if(!h&&u.count()>0){for(var m=u.getItemLayout(0),_=1;isNaN(m&&m.startAngle)&&_<u.count();++_)m=u.getItemLayout(_);m&&(d=m.startAngle)}if(this._emptyCircleSector&&v.remove(this._emptyCircleSector),u.count()===0&&e.get("showEmptyCircle")){var S=new Di.C({shape:oa(e,o)});S.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=S,v.add(S)}u.diff(h).add(function(b){var P=new ke(u,b,d);u.setItemGraphicEl(b,P),v.add(P)}).update(function(b,P){var R=h.getItemGraphicEl(P);R.updateData(u,b,d),R.off("click"),v.add(R),u.setItemGraphicEl(b,R)}).remove(function(b){var P=h.getItemGraphicEl(b);cr.XD(P,e,b)}).execute(),oe(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},r.prototype.dispose=function(){},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,h=e[1]-s.cy,v=Math.sqrt(u*u+h*h);return v<=s.r&&v>=s.r0}},r.type="pie",r}(vn.Z),Je=Ge,ar=F(55623),ue=F(5101);function Me(a,r,e){r=(0,g.kJ)(r)&&{coordDimensions:r}||(0,g.l7)({encodeDefine:a.getEncode()},r);var n=a.getSource(),o=(0,ar.Z)(n,r).dimensions,s=new ue.Z(o,a);return s.initData(n,e),s}var ye=F(61772),ze=function(){function a(r,e){this._getDataWithEncodedVisual=r,this._getRawData=e}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var e=this._getRawData();return e.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var e=this._getDataWithEncodedVisual();return e.indexOfName(r)},a.prototype.getItemVisual=function(r,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(r,e)},a}(),Ze=ze,er=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ze(g.ak(this.getData,this),g.ak(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return Me(this,{coordDimensions:["value"],encodeDefaulter:g.WA(ye.Ss,this)})},r.prototype.getDataParams=function(e){var n=this.getData(),o=a.prototype.getDataParams.call(this,e),s=[];return n.each(n.mapDimension("value"),function(u){s.push(u)}),o.percent=(0,Ie.eJ)(s,e,n.hostModel.get("percentPrecision")),o.$vars.push("percent"),o},r.prototype._defaultLabelLine=function(e){Xe.Cc(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(xe.Z),sr=er;function yr(a){return{seriesType:a,reset:function(r,e){var n=r.getData();n.filterSelf(function(o){var s=n.mapDimension("value"),u=n.get(s,o);return!((0,g.hj)(u)&&!isNaN(u)&&u<0)})}}}function gr(a){a.registerChartView(Je),a.registerSeriesModel(sr),(0,ia.y)("pie",a.registerAction),a.registerLayout((0,g.WA)(uo,"pie")),a.registerProcessor(Ea("pie")),a.registerProcessor(yr("pie"))}var Gr=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?5e3:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?1e4:this.get("progressiveThreshold"))},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},r.type="series.scatter",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},r}(xe.Z),tn=Gr,Dr=F(60479),dn=4,_i=function(){function a(){}return a}(),bn=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.getDefaultShape=function(){return new _i},r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.buildPath=function(e,n){var o=n.points,s=n.size,u=this.symbolProxy,h=u.shape,v=e.getContext?e.getContext():e,d=v&&s[0]<dn,m=this.softClipShape,_;if(d){this._ctx=v;return}for(this._ctx=null,_=this._off;_<o.length;){var S=o[_++],b=o[_++];isNaN(S)||isNaN(b)||m&&!m.contain(S,b)||(h.x=S-s[0]/2,h.y=b-s[1]/2,h.width=s[0],h.height=s[1],u.buildPath(e,h,!0))}this.incremental&&(this._off=_,this.notClear=!0)},r.prototype.afterBrush=function(){var e=this.shape,n=e.points,o=e.size,s=this._ctx,u=this.softClipShape,h;if(!!s){for(h=this._off;h<n.length;){var v=n[h++],d=n[h++];isNaN(v)||isNaN(d)||u&&!u.contain(v,d)||s.fillRect(v-o[0]/2,d-o[1]/2,o[0],o[1])}this.incremental&&(this._off=h,this.notClear=!0)}},r.prototype.findDataIndex=function(e,n){for(var o=this.shape,s=o.points,u=o.size,h=Math.max(u[0],4),v=Math.max(u[1],4),d=s.length/2-1;d>=0;d--){var m=d*2,_=s[m]-h/2,S=s[m+1]-v/2;if(e>=_&&n>=S&&e<=_+h&&n<=S+v)return d}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.points,s=n.size,u=s[0],h=s[1],v=1/0,d=1/0,m=-1/0,_=-1/0,S=0;S<o.length;){var b=o[S++],P=o[S++];v=Math.min(b,v),m=Math.max(b,m),d=Math.min(P,d),_=Math.max(P,_)}e=this._rect=new Dr.Z(v-u/2,d-h/2,m-v+u,_-d+h)}return e},r}(dt.ZP),Fi=function(){function a(){this.group=new Mr.Z}return a.prototype.updateData=function(r,e){this._clear();var n=this._create();n.setShape({points:r.getLayout("points")}),this._setCommon(n,r,e)},a.prototype.updateLayout=function(r){var e=r.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var o=(n.endIndex-n.startIndex)*2,s=n.startIndex*4*2;e=new Float32Array(e.buffer,s,o)}n.setShape("points",e),n.reset()})},a.prototype.incrementalPrepareUpdate=function(r){this._clear()},a.prototype.incrementalUpdate=function(r,e,n){var o=this._newAdded[0],s=e.getLayout("points"),u=o&&o.shape.points;if(u&&u.length<2e4){var h=u.length,v=new Float32Array(h+s.length);v.set(u),v.set(s,h),o.endIndex=r.end,o.setShape({points:v})}else{this._newAdded=[];var d=this._create();d.startIndex=r.start,d.endIndex=r.end,d.incremental=!0,d.setShape({points:s}),this._setCommon(d,e,n)}},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new bn({cursor:"default"});return this.group.add(r),this._newAdded.push(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;n=n||{};var s=e.getVisual("symbolSize");r.setShape("size",s instanceof Array?s:[s,s]),r.softClipShape=n.clipShape||null,r.symbolProxy=(0,Rr.th)(e.getVisual("symbol"),0,0,0,0),r.setColor=r.symbolProxy.setColor;var u=r.shape.size[0]<dn;r.useStyle(o.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var h=e.getVisual("style"),v=h&&h.fill;v&&r.setColor(v);var d=(0,Hr.A)(r);d.seriesIndex=o.seriesIndex,r.on("mousemove",function(m){d.dataIndex=null;var _=r.hoverDataIdx;_>=0&&(d.dataIndex=_+(r.startIndex||0))})},a.prototype.remove=function(){this._clear()},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),Ca=Fi,pu=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.updateData(s,{clipShape:this._getClipShape(e)}),this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateSymbolDraw(s,e);u.incrementalPrepareUpdate(s),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._symbolDraw.incrementalUpdate(e,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=e.end===n.getData().count()},r.prototype.updateTransform=function(e,n,o){var s=e.getData();if(this.group.dirty(),!this._finished||s.count()>1e4)return{update:!0};var u=Hn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout(s)},r.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype._updateSymbolDraw=function(e,n){var o=this._symbolDraw,s=n.pipelineContext,u=s.large;return(!o||u!==this._isLargeDraw)&&(o&&o.remove(),o=this._symbolDraw=u?new Ca:new ra,this._isLargeDraw=u,this.group.removeAll()),this.group.add(o.group),o},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},r.prototype.dispose=function(){},r.type="scatter",r}(vn.Z),zs=pu,pn=F(33166),kn=F(98071),sc=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.type="grid",r.dependencies=["xAxis","yAxis"],r.layoutMode="box",r.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},r}(kn.Z),lc=sc,Uo=F(16650),uc=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Xe.C6).models[0]},r.type="cartesian2dAxis",r}(kn.Z);g.jB(uc,Uo.W);var Hx=null,kd={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},mf=g.TS({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},kd),fc=g.TS({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},kd),Vd=g.TS({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},fc),Zd=g.ce({logBase:10},fc),hc={category:mf,value:fc,time:Vd,log:Zd},Wd=F(51401),Hd={value:1,category:1,time:1,log:1};function Gs(a,r,e,n){(0,g.S6)(Hd,function(o,s){var u=(0,g.TS)((0,g.TS)({},hc[s],!0),n,!0),h=function(v){(0,fe.ZT)(d,v);function d(){var m=v!==null&&v.apply(this,arguments)||this;return m.type=r+"Axis."+s,m}return d.prototype.mergeDefaultAndTheme=function(m,_){var S=(0,Kr.YD)(this),b=S?(0,Kr.tE)(m):{},P=_.getTheme();(0,g.TS)(m,P.get(s+"Axis")),(0,g.TS)(m,this.getDefaultOption()),m.type=cc(m),S&&(0,Kr.dt)(m,b,S)},d.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=Wd.Z.createByAxisModel(this))},d.prototype.getCategories=function(m){var _=this.option;if(_.type==="category")return m?_.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=r+"Axis."+s,d.defaultOption=u,d}(e);a.registerComponentModel(h)}),a.registerSubTypeDefaulter(r+"Axis",cc)}function cc(a){return a.type||(a.data?"category":"value")}var ii=F(57947),Xd=F(53907),gn=F(32892),Or=F(45280),yf=["x","y"];function Yd(a){return a.type==="interval"||a.type==="time"}var Kd=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=yf,e}return r.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!Yd(e)||!Yd(n))){var o=e.getExtent(),s=n.getExtent(),u=this.dataToPoint([o[0],s[0]]),h=this.dataToPoint([o[1],s[1]]),v=o[1]-o[0],d=s[1]-s[0];if(!(!v||!d)){var m=(h[0]-u[0])/v,_=(h[1]-u[1])/d,S=u[0]-o[0]*m,b=u[1]-s[0]*_,P=this._transform=[m,0,0,_,S,b];this._invTransform=(0,gn.U_)([],P)}}},r.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},r.prototype.containPoint=function(e){var n=this.getAxis("x"),o=this.getAxis("y");return n.contain(n.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},r.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},r.prototype.containZone=function(e,n){var o=this.dataToPoint(e),s=this.dataToPoint(n),u=this.getArea(),h=new Dr.Z(o[0],o[1],s[0]-o[0],s[1]-o[1]);return u.intersect(h)},r.prototype.dataToPoint=function(e,n,o){o=o||[];var s=e[0],u=e[1];if(this._transform&&s!=null&&isFinite(s)&&u!=null&&isFinite(u))return(0,Or.Ne)(o,e,this._transform);var h=this.getAxis("x"),v=this.getAxis("y");return o[0]=h.toGlobalCoord(h.dataToCoord(s,n)),o[1]=v.toGlobalCoord(v.dataToCoord(u,n)),o},r.prototype.clampData=function(e,n){var o=this.getAxis("x").scale,s=this.getAxis("y").scale,u=o.getExtent(),h=s.getExtent(),v=o.parse(e[0]),d=s.parse(e[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(u[0],u[1]),v),Math.max(u[0],u[1])),n[1]=Math.min(Math.max(Math.min(h[0],h[1]),d),Math.max(h[0],h[1])),n},r.prototype.pointToData=function(e,n){var o=[];if(this._invTransform)return(0,Or.Ne)(o,e,this._invTransform);var s=this.getAxis("x"),u=this.getAxis("y");return o[0]=s.coordToData(s.toLocalCoord(e[0]),n),o[1]=u.coordToData(u.toLocalCoord(e[1]),n),o},r.prototype.getOtherAxis=function(e){return this.getAxis(e.dim==="x"?"y":"x")},r.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),o=Math.min(e[0],e[1]),s=Math.min(n[0],n[1]),u=Math.max(e[0],e[1])-o,h=Math.max(n[0],n[1])-s;return new Dr.Z(o,s,u,h)},r}(Xd.Z),fy=Kd,Pa=F(12950),jd=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.index=0,h.type=s||"value",h.position=u||"bottom",h}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.getGlobalExtent=function(e){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),e&&n[0]>n[1]&&n.reverse(),n},r.prototype.pointToData=function(e,n){return this.coordToData(this.toLocalCoord(e[this.dim==="x"?0:1]),n)},r.prototype.setCategorySortInfo=function(e){if(this.type!=="category")return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},r}(Pa.Z),Jd=jd;function Us(a,r,e){e=e||{};var n=a.coordinateSystem,o=r.axis,s={},u=o.getAxesOnZeroOf()[0],h=o.position,v=u?"onZero":h,d=o.dim,m=n.getRect(),_=[m.x,m.x+m.width,m.y,m.y+m.height],S={left:0,right:1,top:0,bottom:1,onZero:2},b=r.get("offset")||0,P=d==="x"?[_[2]-b,_[3]+b]:[_[0]-b,_[1]+b];if(u){var R=u.toGlobalCoord(u.dataToCoord(0));P[S.onZero]=Math.max(Math.min(R,P[1]),P[0])}s.position=[d==="y"?P[S[v]]:_[0],d==="x"?P[S[v]]:_[3]],s.rotation=Math.PI/2*(d==="x"?0:1);var Y={top:-1,bottom:1,left:-1,right:1};s.labelDirection=s.tickDirection=s.nameDirection=Y[h],s.labelOffset=u?P[S[h]]-P[S.onZero]:0,r.get(["axisTick","inside"])&&(s.tickDirection=-s.tickDirection),g.Jv(e.labelInside,r.get(["axisLabel","inside"]))&&(s.labelDirection=-s.labelDirection);var nt=r.get(["axisLabel","rotate"]);return s.labelRotate=v==="top"?-nt:nt,s.z2=1,s}function vc(a){return a.get("coordinateSystem")==="cartesian2d"}function dc(a){var r={xAxisModel:null,yAxisModel:null};return g.S6(r,function(e,n){var o=n.replace(/Model$/,""),s=a.getReferringComponents(o,Xe.C6).models[0];r[n]=s}),r}var ks=F(65021),gu=F(70103),_f=Math.log;function xf(a,r,e){var n=gu.Z.prototype,o=n.getTicks.call(e),s=n.getTicks.call(e,!0),u=o.length-1,h=n.getInterval.call(e),v=(0,ii.Xv)(a,r),d=v.extent,m=v.fixMin,_=v.fixMax;if(a.type==="log"){var S=_f(a.base);d=[_f(d[0])/S,_f(d[1])/S]}a.setExtent(d[0],d[1]),a.calcNiceExtent({splitNumber:u,fixMin:m,fixMax:_});var b=n.getExtent.call(a);m&&(d[0]=b[0]),_&&(d[1]=b[1]);var P=n.getInterval.call(a),R=d[0],Y=d[1];if(m&&_)P=(Y-R)/u;else if(m)for(Y=d[0]+P*u;Y<d[1]&&isFinite(Y)&&isFinite(d[1]);)P=(0,ks.r1)(P),Y=d[0]+P*u;else if(_)for(R=d[1]-P*u;R>d[0]&&isFinite(R)&&isFinite(d[0]);)P=(0,ks.r1)(P),R=d[1]-P*u;else{var nt=a.getTicks().length-1;nt>u&&(P=(0,ks.r1)(P));var pt=P*u;Y=Math.ceil(d[1]/P)*P,R=(0,Ie.NM)(Y-pt),R<0&&d[0]>=0?(R=0,Y=(0,Ie.NM)(pt)):Y>0&&d[1]<=0&&(Y=0,R=-(0,Ie.NM)(pt))}var mt=(o[0].value-s[0].value)/h,bt=(o[u].value-s[u].value)/h;if(n.setExtent.call(a,R+P*mt,Y+P*bt),n.setInterval.call(a,P),(mt||bt)&&n.setNiceExtent.call(a,R+P,Y-P),!1)var Lt}var Qd=function(){function a(r,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=yf,this._initCartesian(r,e,n),this.model=r}return a.prototype.getRect=function(){return this._rect},a.prototype.update=function(r,e){var n=this._axesMap;this._updateScale(r,this.model);function o(u){var h,v=(0,g.XP)(u),d=v.length;if(!!d){for(var m=[],_=d-1;_>=0;_--){var S=+v[_],b=u[S],P=b.model,R=b.scale;(0,ks.lM)(R)&&P.get("alignTicks")&&P.get("interval")==null?m.push(b):((0,ii.Jk)(R,P),(0,ks.lM)(R)&&(h=b))}m.length&&(h||(h=m.pop(),(0,ii.Jk)(h.scale,h.model)),(0,g.S6)(m,function(Y){xf(Y.scale,Y.model,h.scale)}))}}o(n.x),o(n.y);var s={};(0,g.S6)(n.x,function(u){pc(n,"y",u,s)}),(0,g.S6)(n.y,function(u){pc(n,"x",u,s)}),this.resize(this.model,e)},a.prototype.resize=function(r,e,n){var o=r.getBoxLayoutParams(),s=!n&&r.get("containLabel"),u=(0,Kr.ME)(o,{width:e.getWidth(),height:e.getHeight()});this._rect=u;var h=this._axesList;v(),s&&((0,g.S6)(h,function(d){if(!d.model.get(["axisLabel","inside"])){var m=(0,ii.Do)(d);if(m){var _=d.isHorizontal()?"height":"width",S=d.model.get(["axisLabel","margin"]);u[_]-=m[_]+S,d.position==="top"?u.y+=m.height+S:d.position==="left"&&(u.x+=m.width+S)}}}),v()),(0,g.S6)(this._coordsList,function(d){d.calcAffineTransform()});function v(){(0,g.S6)(h,function(d){var m=d.isHorizontal(),_=m?[0,u.width]:[0,u.height],S=d.inverse?1:0;d.setExtent(_[S],_[1-S]),ko(d,m?u.x:u.y)})}},a.prototype.getAxis=function(r,e){var n=this._axesMap[r];if(n!=null)return n[e||0]},a.prototype.getAxes=function(){return this._axesList.slice()},a.prototype.getCartesian=function(r,e){if(r!=null&&e!=null){var n="x"+r+"y"+e;return this._coordsMap[n]}(0,g.Kn)(r)&&(e=r.yAxisIndex,r=r.xAxisIndex);for(var o=0,s=this._coordsList;o<s.length;o++)if(s[o].getAxis("x").index===r||s[o].getAxis("y").index===e)return s[o]},a.prototype.getCartesians=function(){return this._coordsList.slice()},a.prototype.convertToPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},a.prototype.convertFromPixel=function(r,e,n){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},a.prototype._findConvertTarget=function(r){var e=r.seriesModel,n=r.xAxisModel||e&&e.getReferringComponents("xAxis",Xe.C6).models[0],o=r.yAxisModel||e&&e.getReferringComponents("yAxis",Xe.C6).models[0],s=r.gridModel,u=this._coordsList,h,v;if(e)h=e.coordinateSystem,(0,g.cq)(u,h)<0&&(h=null);else if(n&&o)h=this.getCartesian(n.componentIndex,o.componentIndex);else if(n)v=this.getAxis("x",n.componentIndex);else if(o)v=this.getAxis("y",o.componentIndex);else if(s){var d=s.coordinateSystem;d===this&&(h=this._coordsList[0])}return{cartesian:h,axis:v}},a.prototype.containPoint=function(r){var e=this._coordsList[0];if(e)return e.containPoint(r)},a.prototype._initCartesian=function(r,e,n){var o=this,s=this,u={left:!1,right:!1,top:!1,bottom:!1},h={x:{},y:{}},v={x:0,y:0};if(e.eachComponent("xAxis",d("x"),this),e.eachComponent("yAxis",d("y"),this),!v.x||!v.y){this._axesMap={},this._axesList=[];return}this._axesMap=h,(0,g.S6)(h.x,function(m,_){(0,g.S6)(h.y,function(S,b){var P="x"+_+"y"+b,R=new fy(P);R.master=o,R.model=r,o._coordsMap[P]=R,o._coordsList.push(R),R.addAxis(m),R.addAxis(S)})});function d(m){return function(_,S){if(!!Sf(_,r)){var b=_.get("position");m==="x"?b!=="top"&&b!=="bottom"&&(b=u.bottom?"top":"bottom"):b!=="left"&&b!=="right"&&(b=u.left?"right":"left"),u[b]=!0;var P=new Jd(m,(0,ii.aG)(_),[0,0],_.get("type"),b),R=P.type==="category";P.onBand=R&&_.get("boundaryGap"),P.inverse=_.get("inverse"),_.axis=P,P.model=_,P.grid=s,P.index=S,s._axesList.push(P),h[m][S]=P,v[m]++}}}},a.prototype._updateScale=function(r,e){(0,g.S6)(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),o.type==="category"){var s=o.model.get("categorySortInfo");o.scale.setSortInfo(s)}}),r.eachSeries(function(o){if(vc(o)){var s=dc(o),u=s.xAxisModel,h=s.yAxisModel;if(!Sf(u,e)||!Sf(h,e))return;var v=this.getCartesian(u.componentIndex,h.componentIndex),d=o.getData(),m=v.getAxis("x"),_=v.getAxis("y");n(d,m),n(d,_)}},this);function n(o,s){(0,g.S6)((0,ii.PY)(o,s.dim),function(u){s.scale.unionExtentFromData(o,u)})}},a.prototype.getTooltipAxes=function(r){var e=[],n=[];return(0,g.S6)(this.getCartesians(),function(o){var s=r!=null&&r!=="auto"?o.getAxis(r):o.getBaseAxis(),u=o.getOtherAxis(s);(0,g.cq)(e,s)<0&&e.push(s),(0,g.cq)(n,u)<0&&n.push(u)}),{baseAxes:e,otherAxes:n}},a.create=function(r,e){var n=[];return r.eachComponent("grid",function(o,s){var u=new a(o,r,e);u.name="grid_"+s,u.resize(o,e,!0),o.coordinateSystem=u,n.push(u)}),r.eachSeries(function(o){if(!!vc(o)){var s=dc(o),u=s.xAxisModel,h=s.yAxisModel,v=u.getCoordSysModel(),d=v.coordinateSystem;o.coordinateSystem=d.getCartesian(u.componentIndex,h.componentIndex)}}),n},a.dimensions=yf,a}();function Sf(a,r){return a.getCoordSysModel()===r}function pc(a,r,e,n){e.getAxesOnZeroOf=function(){return s?[s]:[]};var o=a[r],s,u=e.model,h=u.get(["axisLine","onZero"]),v=u.get(["axisLine","onZeroAxisIndex"]);if(!h)return;if(v!=null)bl(o[v])&&(s=o[v]);else for(var d in o)if(o.hasOwnProperty(d)&&bl(o[d])&&!n[m(o[d])]){s=o[d];break}s&&(n[m(s)]=!0);function m(_){return _.dim+"_"+_.index}}function bl(a){return a&&a.type!=="category"&&a.type!=="time"&&(0,ii.Yb)(a)}function ko(a,r){var e=a.getExtent(),n=e[0]+e[1];a.toGlobalCoord=a.dim==="x"?function(o){return o+r}:function(o){return n-o+r},a.toLocalCoord=a.dim==="x"?function(o){return o-r}:function(o){return n-o+r}}var Tf=Qd,Mi=F(22095),Xn=F(1497),fo=Math.PI,Vo=function(){function a(r,e){this.group=new Mr.Z,this.opt=e,this.axisModel=r,(0,g.ce)(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Mr.Z({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return a.prototype.hasBuilder=function(r){return!!Zo[r]},a.prototype.add=function(r){Zo[r](this.opt,this.axisModel,this.group,this._transformGroup)},a.prototype.getGroup=function(){return this.group},a.innerTextLayout=function(r,e,n){var o=(0,Ie.wW)(e-r),s,u;return(0,Ie.mW)(o)?(u=n>0?"top":"bottom",s="center"):(0,Ie.mW)(o-fo)?(u=n>0?"bottom":"top",s="center"):(u="middle",o>0&&o<fo?s=n>0?"right":"left":s=n>0?"left":"right"),{rotation:o,textAlign:s,textVerticalAlign:u}},a.makeAxisEventDataBase=function(r){var e={componentType:r.mainType,componentIndex:r.componentIndex};return e[r.mainType+"Index"]=r.componentIndex,e},a.isLabelSilent=function(r){var e=r.get("tooltip");return r.get("silent")||!(r.get("triggerEvent")||e&&e.show)},a}(),Zo={axisLine:function(a,r,e,n){var o=r.get(["axisLine","show"]);if(o==="auto"&&a.handleAutoShown&&(o=a.handleAutoShown("axisLine")),!!o){var s=r.axis.getExtent(),u=n.transform,h=[s[0],0],v=[s[1],0];u&&((0,Or.Ne)(h,h,u),(0,Or.Ne)(v,v,u));var d=(0,g.l7)({lineCap:"round"},r.getModel(["axisLine","lineStyle"]).getLineStyle()),m=new Mi.Z({subPixelOptimize:!0,shape:{x1:h[0],y1:h[1],x2:v[0],y2:v[1]},style:d,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1});m.anid="line",e.add(m);var _=r.get(["axisLine","symbol"]);if(_!=null){var S=r.get(["axisLine","symbolSize"]);(0,g.HD)(_)&&(_=[_,_]),((0,g.HD)(S)||(0,g.hj)(S))&&(S=[S,S]);var b=(0,Rr.Cq)(r.get(["axisLine","symbolOffset"])||0,S),P=S[0],R=S[1];(0,g.S6)([{rotate:a.rotation+Math.PI/2,offset:b[0],r:0},{rotate:a.rotation-Math.PI/2,offset:b[1],r:Math.sqrt((h[0]-v[0])*(h[0]-v[0])+(h[1]-v[1])*(h[1]-v[1]))}],function(Y,nt){if(_[nt]!=="none"&&_[nt]!=null){var pt=(0,Rr.th)(_[nt],-P/2,-R/2,P,R,d.stroke,!0),mt=Y.r+Y.offset;pt.attr({rotation:Y.rotate,x:h[0]+mt*Math.cos(a.rotation),y:h[1]-mt*Math.sin(a.rotation),silent:!0,z2:11}),e.add(pt)}})}}},axisTickLabel:function(a,r,e,n){var o=tp(e,n,r,a),s=Wo(e,n,r,a);if(qd(r,s,o),ep(e,n,r,a.tickDirection),r.get(["axisLabel","hideOverlap"])){var u=(0,du.VT)((0,g.UI)(s,function(h){return{label:h,priority:h.z2,defaultAttr:{ignore:h.ignore}}}));(0,du.yl)(u)}},axisName:function(a,r,e,n){var o=(0,g.Jv)(a.axisName,r.get("name"));if(!!o){var s=r.get("nameLocation"),u=a.nameDirection,h=r.getModel("nameTextStyle"),v=r.get("nameGap")||0,d=r.axis.getExtent(),m=d[0]>d[1]?-1:1,_=[s==="start"?d[0]-m*v:s==="end"?d[1]+m*v:(d[0]+d[1])/2,mc(s)?a.labelOffset+u*v:0],S,b=r.get("nameRotate");b!=null&&(b=b*fo/180);var P;mc(s)?S=Vo.innerTextLayout(a.rotation,b??a.rotation,u):(S=$d(a.rotation,s,b||0,d),P=a.axisNameAvailableWidth,P!=null&&(P=Math.abs(P/Math.sin(S.rotation)),!isFinite(P)&&(P=null)));var R=h.getFont(),Y=r.get("nameTruncate",!0)||{},nt=Y.ellipsis,pt=(0,g.Jv)(a.nameTruncateMaxWidth,Y.maxWidth,P),mt=new ee.ZP({x:_[0],y:_[1],rotation:S.rotation,silent:Vo.isLabelSilent(r),style:(0,or.Lr)(h,{text:o,font:R,overflow:"truncate",width:pt,ellipsis:nt,fill:h.getTextColor()||r.get(["axisLine","lineStyle","color"]),align:h.get("align")||S.textAlign,verticalAlign:h.get("verticalAlign")||S.textVerticalAlign}),z2:1});if(br.setTooltipConfig({el:mt,componentModel:r,itemName:o}),mt.__fullText=o,mt.anid="name",r.get("triggerEvent")){var bt=Vo.makeAxisEventDataBase(r);bt.targetType="axisName",bt.name=o,(0,Hr.A)(mt).eventData=bt}n.add(mt),mt.updateTransform(),e.add(mt),mt.decomposeTransform()}}};function $d(a,r,e,n){var o=(0,Ie.wW)(e-a),s,u,h=n[0]>n[1],v=r==="start"&&!h||r!=="start"&&h;return(0,Ie.mW)(o-fo/2)?(u=v?"bottom":"top",s="center"):(0,Ie.mW)(o-fo*1.5)?(u=v?"top":"bottom",s="center"):(u="middle",o<fo*1.5&&o>fo/2?s=v?"left":"right":s=v?"right":"left"),{rotation:o,textAlign:s,textVerticalAlign:u}}function qd(a,r,e){if(!(0,ii.WY)(a.axis)){var n=a.get(["axisLabel","showMinLabel"]),o=a.get(["axisLabel","showMaxLabel"]);r=r||[],e=e||[];var s=r[0],u=r[1],h=r[r.length-1],v=r[r.length-2],d=e[0],m=e[1],_=e[e.length-1],S=e[e.length-2];n===!1?(Qi(s),Qi(d)):gc(s,u)&&(n?(Qi(u),Qi(m)):(Qi(s),Qi(d))),o===!1?(Qi(h),Qi(_)):gc(v,h)&&(o?(Qi(v),Qi(S)):(Qi(h),Qi(_)))}}function Qi(a){a&&(a.ignore=!0)}function gc(a,r){var e=a&&a.getBoundingRect().clone(),n=r&&r.getBoundingRect().clone();if(!(!e||!n)){var o=gn.yR([]);return gn.U1(o,o,-a.rotation),e.applyTransform(gn.dC([],o,a.getLocalTransform())),n.applyTransform(gn.dC([],o,r.getLocalTransform())),e.intersect(n)}}function mc(a){return a==="middle"||a==="center"}function Yn(a,r,e,n,o){for(var s=[],u=[],h=[],v=0;v<a.length;v++){var d=a[v].coord;u[0]=d,u[1]=0,h[0]=d,h[1]=e,r&&((0,Or.Ne)(u,u,r),(0,Or.Ne)(h,h,r));var m=new Mi.Z({subPixelOptimize:!0,shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:n,z2:2,autoBatch:!0,silent:!0});m.anid=o+"_"+a[v].tickValue,s.push(m)}return s}function tp(a,r,e,n){var o=e.axis,s=e.getModel("axisTick"),u=s.get("show");if(u==="auto"&&n.handleAutoShown&&(u=n.handleAutoShown("axisTick")),!(!u||o.scale.isBlank())){for(var h=s.getModel("lineStyle"),v=n.tickDirection*s.get("length"),d=o.getTicksCoords(),m=Yn(d,r.transform,v,(0,g.ce)(h.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}),"ticks"),_=0;_<m.length;_++)a.add(m[_]);return m}}function ep(a,r,e,n){var o=e.axis,s=e.getModel("minorTick");if(!(!s.get("show")||o.scale.isBlank())){var u=o.getMinorTicksCoords();if(!!u.length)for(var h=s.getModel("lineStyle"),v=n*s.get("length"),d=(0,g.ce)(h.getLineStyle(),(0,g.ce)(e.getModel("axisTick").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})),m=0;m<u.length;m++)for(var _=Yn(u[m],r.transform,v,d,"minorticks_"+m),S=0;S<_.length;S++)a.add(_[S])}}function Wo(a,r,e,n){var o=e.axis,s=(0,g.Jv)(n.axisLabelShow,e.get(["axisLabel","show"]));if(!(!s||o.scale.isBlank())){var u=e.getModel("axisLabel"),h=u.get("margin"),v=o.getViewLabels(),d=((0,g.Jv)(n.labelRotate,u.get("rotate"))||0)*fo/180,m=Vo.innerTextLayout(n.rotation,d,n.labelDirection),_=e.getCategories&&e.getCategories(!0),S=[],b=Vo.isLabelSilent(e),P=e.get("triggerEvent");return(0,g.S6)(v,function(R,Y){var nt=o.scale.type==="ordinal"?o.scale.getRawOrdinalNumber(R.tickValue):R.tickValue,pt=R.formattedLabel,mt=R.rawLabel,bt=u;if(_&&_[nt]){var Lt=_[nt];(0,g.Kn)(Lt)&&Lt.textStyle&&(bt=new Xn.Z(Lt.textStyle,u,e.ecModel))}var Pt=bt.getTextColor()||e.get(["axisLine","lineStyle","color"]),Ot=o.dataToCoord(nt),kt=new ee.ZP({x:Ot,y:n.labelOffset+n.labelDirection*h,rotation:m.rotation,silent:b,z2:10+(R.level||0),style:(0,or.Lr)(bt,{text:pt,align:bt.getShallow("align",!0)||m.textAlign,verticalAlign:bt.getShallow("verticalAlign",!0)||bt.getShallow("baseline",!0)||m.textVerticalAlign,fill:(0,g.mf)(Pt)?Pt(o.type==="category"?mt:o.type==="value"?nt+"":nt,Y):Pt})});if(kt.anid="label_"+nt,P){var jt=Vo.makeAxisEventDataBase(e);jt.targetType="axisLabel",jt.value=mt,jt.tickIndex=Y,o.type==="category"&&(jt.dataIndex=nt),(0,Hr.A)(kt).eventData=jt}r.add(kt),kt.updateTransform(),S.push(kt),a.add(kt),kt.decomposeTransform()}),S}}var ma=Vo;function mu(a,r){var e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return rp(e,a,r),e.seriesInvolved&&ip(e,a),e}function rp(a,r,e){var n=r.getComponent("tooltip"),o=r.getComponent("axisPointer"),s=o.get("link",!0)||[],u=[];(0,g.S6)(e.getCoordinateSystems(),function(h){if(!h.axisPointerEnabled)return;var v=Ml(h.model),d=a.coordSysAxesInfo[v]={};a.coordSysMap[v]=h;var m=h.model,_=m.getModel("tooltip",n);if((0,g.S6)(h.getAxes(),(0,g.WA)(R,!1,null)),h.getTooltipAxes&&n&&_.get("show")){var S=_.get("trigger")==="axis",b=_.get(["axisPointer","type"])==="cross",P=h.getTooltipAxes(_.get(["axisPointer","axis"]));(S||b)&&(0,g.S6)(P.baseAxes,(0,g.WA)(R,b?"cross":!0,S)),b&&(0,g.S6)(P.otherAxes,(0,g.WA)(R,"cross",!1))}function R(Y,nt,pt){var mt=pt.model.getModel("axisPointer",o),bt=mt.get("show");if(!(!bt||bt==="auto"&&!Y&&!wf(mt))){nt==null&&(nt=mt.get("triggerTooltip")),mt=Y?np(pt,_,o,r,Y,nt):mt;var Lt=mt.get("snap"),Pt=Ml(pt.model),Ot=nt||Lt||pt.type==="category",kt=a.axesInfo[Pt]={key:Pt,axis:pt,coordSys:h,axisPointerModel:mt,triggerTooltip:nt,involveSeries:Ot,snap:Lt,useHandle:wf(mt),seriesModels:[],linkGroup:null};d[Pt]=kt,a.seriesInvolved=a.seriesInvolved||Ot;var jt=ap(s,pt);if(jt!=null){var re=u[jt]||(u[jt]={axesInfo:{}});re.axesInfo[Pt]=kt,re.mapper=s[jt].mapper,kt.linkGroup=re}}}})}function np(a,r,e,n,o,s){var u=r.getModel("axisPointer"),h=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],v={};(0,g.S6)(h,function(S){v[S]=(0,g.d9)(u.get(S))}),v.snap=a.type!=="category"&&!!s,u.get("type")==="cross"&&(v.type="line");var d=v.label||(v.label={});if(d.show==null&&(d.show=!1),o==="cross"){var m=u.get(["label","show"]);if(d.show=m??!0,!s){var _=v.lineStyle=u.get("crossStyle");_&&(0,g.ce)(d,_.textStyle)}}return a.model.getModel("axisPointer",new Xn.Z(v,e,n))}function ip(a,r){r.eachSeries(function(e){var n=e.coordinateSystem,o=e.get(["tooltip","trigger"],!0),s=e.get(["tooltip","show"],!0);!n||o==="none"||o===!1||o==="item"||s===!1||e.get(["axisPointer","show"],!0)===!1||(0,g.S6)(a.coordSysAxesInfo[Ml(n.model)],function(u){var h=u.axis;n.getAxis(h.dim)===h&&(u.seriesModels.push(e),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=e.getData().count())})})}function ap(a,r){for(var e=r.model,n=r.dim,o=0;o<a.length;o++){var s=a[o]||{};if(yu(s[n+"AxisId"],e.id)||yu(s[n+"AxisIndex"],e.componentIndex)||yu(s[n+"AxisName"],e.name))return o}}function yu(a,r){return a==="all"||(0,g.kJ)(a)&&(0,g.cq)(a,r)>=0||a===r}function Ho(a){var r=yc(a);if(!!r){var e=r.axisPointerModel,n=r.axis.scale,o=e.option,s=e.get("status"),u=e.get("value");u!=null&&(u=n.parse(u));var h=wf(e);s==null&&(o.status=h?"show":"hide");var v=n.getExtent().slice();v[0]>v[1]&&v.reverse(),(u==null||u>v[1])&&(u=v[1]),u<v[0]&&(u=v[0]),o.value=u,h&&(o.status=r.axis.scale.isBlank()?"hide":"show")}}function yc(a){var r=(a.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return r&&r.axesInfo[Ml(a)]}function op(a){var r=yc(a);return r&&r.axisPointerModel}function wf(a){return!!a.get(["handle","show"])}function Ml(a){return a.type+"||"+a.id}var _c={},sp=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.axisPointerClass&&Ho(e),a.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,o,!0)},r.prototype.updateAxisPointer=function(e,n,o,s){this._doUpdateAxisPointerClass(e,o,!1)},r.prototype.remove=function(e,n){var o=this._axisPointer;o&&o.remove(n)},r.prototype.dispose=function(e,n){this._disposeAxisPointer(n),a.prototype.dispose.apply(this,arguments)},r.prototype._doUpdateAxisPointerClass=function(e,n,o){var s=r.getAxisPointerClass(this.axisPointerClass);if(!!s){var u=op(e);u?(this._axisPointer||(this._axisPointer=new s)).render(e,u,n,o):this._disposeAxisPointer(n)}},r.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},r.registerAxisPointerClass=function(e,n){_c[e]=n},r.getAxisPointerClass=function(e){return e&&_c[e]},r.type="axis",r}(pn.Z),Xr=sp,Df=(0,Xe.Yf)();function xc(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitArea"),u=s.getModel("areaStyle"),h=u.get("color"),v=n.coordinateSystem.getRect(),d=o.getTicksCoords({tickModel:s,clamp:!0});if(!!d.length){var m=h.length,_=Df(a).splitAreaColors,S=g.kW(),b=0;if(_)for(var P=0;P<d.length;P++){var R=_.get(d[P].tickValue);if(R!=null){b=(R+(m-1)*P)%m;break}}var Y=o.toGlobalCoord(d[0].coord),nt=u.getAreaStyle();h=g.kJ(h)?h:[h];for(var P=1;P<d.length;P++){var pt=o.toGlobalCoord(d[P].coord),mt=void 0,bt=void 0,Lt=void 0,Pt=void 0;o.isHorizontal()?(mt=Y,bt=v.y,Lt=pt-mt,Pt=v.height,Y=mt+Lt):(mt=v.x,bt=Y,Lt=v.width,Pt=pt-bt,Y=bt+Pt);var Ot=d[P-1].tickValue;Ot!=null&&S.set(Ot,b),r.add(new on.Z({anid:Ot!=null?"area_"+Ot:null,shape:{x:mt,y:bt,width:Lt,height:Pt},style:g.ce({fill:h[b]},nt),autoBatch:!0,silent:!0})),b=(b+1)%m}Df(a).splitAreaColors=S}}}function Sc(a){Df(a).splitAreaColors=null}var lp=["axisLine","axisTickLabel","axisName"],up=["splitArea","splitLine","minorSplitLine"],Tc=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="CartesianAxisPointer",e}return r.prototype.render=function(e,n,o,s){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Mr.Z,this.group.add(this._axisGroup),!!e.get("show")){var h=e.getCoordSysModel(),v=Us(h,e),d=new ma(e,g.l7({handleAutoShown:function(_){for(var S=h.coordinateSystem.getCartesians(),b=0;b<S.length;b++)if((0,ks.lM)(S[b].getOtherAxis(e.axis).scale))return!0;return!1}},v));g.S6(lp,d.add,d),this._axisGroup.add(d.getGroup()),g.S6(up,function(_){e.get([_,"show"])&&fp[_](this,this._axisGroup,e,h)},this);var m=s&&s.type==="changeAxisOrder"&&s.isInitSort;m||br.groupTransition(u,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)}},r.prototype.remove=function(){Sc(this)},r.type="cartesianAxis",r}(Xr),fp={splitLine:function(a,r,e,n){var o=e.axis;if(!o.scale.isBlank()){var s=e.getModel("splitLine"),u=s.getModel("lineStyle"),h=u.get("color");h=g.kJ(h)?h:[h];for(var v=n.coordinateSystem.getRect(),d=o.isHorizontal(),m=0,_=o.getTicksCoords({tickModel:s}),S=[],b=[],P=u.getLineStyle(),R=0;R<_.length;R++){var Y=o.toGlobalCoord(_[R].coord);d?(S[0]=Y,S[1]=v.y,b[0]=Y,b[1]=v.y+v.height):(S[0]=v.x,S[1]=Y,b[0]=v.x+v.width,b[1]=Y);var nt=m++%h.length,pt=_[R].tickValue;r.add(new Mi.Z({anid:pt!=null?"line_"+_[R].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:S[0],y1:S[1],x2:b[0],y2:b[1]},style:g.ce({stroke:h[nt]},P),silent:!0}))}}},minorSplitLine:function(a,r,e,n){var o=e.axis,s=e.getModel("minorSplitLine"),u=s.getModel("lineStyle"),h=n.coordinateSystem.getRect(),v=o.isHorizontal(),d=o.getMinorTicksCoords();if(!!d.length)for(var m=[],_=[],S=u.getLineStyle(),b=0;b<d.length;b++)for(var P=0;P<d[b].length;P++){var R=o.toGlobalCoord(d[b][P].coord);v?(m[0]=R,m[1]=h.y,_[0]=R,_[1]=h.y+h.height):(m[0]=h.x,m[1]=R,_[0]=h.x+h.width,_[1]=R),r.add(new Mi.Z({anid:"minor_line_"+d[b][P].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:_[0],y2:_[1]},style:S,silent:!0}))}},splitArea:function(a,r,e,n){xc(a,r,e,n)}},wc=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="xAxis",r}(Tc),hp=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=wc.type,e}return r.type="yAxis",r}(Tc),hy=null,nn=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="grid",e}return r.prototype.render=function(e,n){this.group.removeAll(),e.get("show")&&this.group.add(new on.Z({shape:e.coordinateSystem.getRect(),style:(0,g.ce)({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},r.type="grid",r}(pn.Z),Vs={offset:0};function El(a){a.registerComponentView(nn),a.registerComponentModel(lc),a.registerCoordinateSystem("cartesian2d",Tf),Gs(a,"x",uc,Vs),Gs(a,"y",uc,Vs),a.registerComponentView(wc),a.registerComponentView(hp),a.registerPreprocessor(function(r){r.xAxis&&r.yAxis&&!r.grid&&(r.grid={})})}function cp(a){(0,N.D)(El),a.registerSeriesModel(tn),a.registerChartView(zs),a.registerLayout(Hn("scatter"))}function Li(a){a.eachSeriesByType("radar",function(r){var e=r.getData(),n=[],o=r.coordinateSystem;if(!!o){var s=o.getIndicatorAxes();g.S6(s,function(u,h){e.each(e.mapDimension(s[h].dim),function(v,d){n[d]=n[d]||[];var m=o.dataToPoint(v,h);n[d][h]=On(m)?m:Ii(o)})}),e.each(function(u){var h=g.sE(n[u],function(v){return On(v)})||Ii(o);n[u].push(h.slice()),e.setItemLayout(u,n[u])})}})}function On(a){return!isNaN(a[0])&&!isNaN(a[1])}function Ii(a){return[a.cx,a.cy]}function vp(a){var r=a.polar;if(r){g.kJ(r)||(r=[r]);var e=[];g.S6(r,function(n,o){n.indicator?(n.type&&!n.shape&&(n.shape=n.type),a.radar=a.radar||[],g.kJ(a.radar)||(a.radar=[a.radar]),a.radar.push(n)):e.push(n)}),a.polar=e}g.S6(a.series,function(n){n&&n.type==="radar"&&n.polarIndex&&(n.radarIndex=n.polarIndex)})}var Ln=F(95094),Qn=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.coordinateSystem,u=this.group,h=e.getData(),v=this._data;function d(S,b){var P=S.getItemVisual(b,"symbol")||"circle";if(P!=="none"){var R=Rr.zp(S.getItemVisual(b,"symbolSize")),Y=Rr.th(P,-1,-1,2,2),nt=S.getItemVisual(b,"symbolRotate")||0;return Y.attr({style:{strokeNoScale:!0},z2:100,scaleX:R[0]/2,scaleY:R[1]/2,rotation:nt*Math.PI/180||0}),Y}}function m(S,b,P,R,Y,nt){P.removeAll();for(var pt=0;pt<b.length-1;pt++){var mt=d(R,Y);mt&&(mt.__dimIdx=pt,S[pt]?(mt.setPosition(S[pt]),br[nt?"initProps":"updateProps"](mt,{x:b[pt][0],y:b[pt][1]},e,Y)):mt.setPosition(b[pt]),P.add(mt))}}function _(S){return g.UI(S,function(b){return[s.cx,s.cy]})}h.diff(v).add(function(S){var b=h.getItemLayout(S);if(!!b){var P=new Ln.Z,R=new Hi.Z,Y={shape:{points:b}};P.shape.points=_(b),R.shape.points=_(b),cr.KZ(P,Y,e,S),cr.KZ(R,Y,e,S);var nt=new Mr.Z,pt=new Mr.Z;nt.add(R),nt.add(P),nt.add(pt),m(R.shape.points,b,pt,h,S,!0),h.setItemGraphicEl(S,nt)}}).update(function(S,b){var P=v.getItemGraphicEl(b),R=P.childAt(0),Y=P.childAt(1),nt=P.childAt(2),pt={shape:{points:h.getItemLayout(S)}};!pt.shape.points||(m(R.shape.points,pt.shape.points,nt,h,S,!1),(0,cr.Zi)(Y),(0,cr.Zi)(R),cr.D(R,pt,e),cr.D(Y,pt,e),h.setItemGraphicEl(S,P))}).remove(function(S){u.remove(v.getItemGraphicEl(S))}).execute(),h.eachItemGraphicEl(function(S,b){var P=h.getItemModel(b),R=S.childAt(0),Y=S.childAt(1),nt=S.childAt(2),pt=h.getItemVisual(b,"style"),mt=pt.fill;u.add(S),R.useStyle(g.ce(P.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:mt})),(0,ir.WO)(R,P,"lineStyle"),(0,ir.WO)(Y,P,"areaStyle");var bt=P.getModel("areaStyle"),Lt=bt.isEmpty()&&bt.parentModel.isEmpty();Y.ignore=Lt,g.S6(["emphasis","select","blur"],function(kt){var jt=P.getModel([kt,"areaStyle"]),re=jt.isEmpty()&&jt.parentModel.isEmpty();Y.ensureState(kt).ignore=re&&Lt}),Y.useStyle(g.ce(bt.getAreaStyle(),{fill:mt,opacity:.7,decal:pt.decal}));var Pt=P.getModel("emphasis"),Ot=Pt.getModel("itemStyle").getItemStyle();nt.eachChild(function(kt){if(kt instanceof gt.ZP){var jt=kt.style;kt.useStyle(g.l7({image:jt.image,x:jt.x,y:jt.y,width:jt.width,height:jt.height},pt))}else kt.useStyle(pt),kt.setColor(mt),kt.style.strokeNoScale=!0;var re=kt.ensureState("emphasis");re.style=g.d9(Ot);var ae=h.getStore().get(h.getDimensionIndex(kt.__dimIdx),b);(ae==null||isNaN(ae))&&(ae=""),(0,or.ni)(kt,(0,or.k3)(P),{labelFetcher:h.hostModel,labelDataIndex:b,labelDimIndex:kt.__dimIdx,defaultText:ae,inheritColor:mt,defaultOpacity:pt.opacity})}),(0,ir.k5)(S,Pt.get("focus"),Pt.get("blurScope"),Pt.get("disabled"))}),this._data=h},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.type="radar",r}(vn.Z),Xi=Qn,Nn=F(5685),ai=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ze(g.ak(this.getData,this),g.ak(this.getRawData,this))},r.prototype.getInitialData=function(e,n){return Me(this,{generateCoord:"indicator_",generateCoordCount:1/0})},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.coordinateSystem,h=u.getIndicatorAxes(),v=this.getData().getName(e),d=v===""?this.name:v,m=(0,Nn.jT)(this,e);return(0,Nn.TX)("section",{header:d,sortBlocks:!0,blocks:g.UI(h,function(_){var S=s.get(s.mapDimension(_.dim),e);return(0,Nn.TX)("nameValue",{markerType:"subItem",markerColor:m,name:_.name,value:S,sortParam:S})})})},r.prototype.getTooltipPosition=function(e){if(e!=null){for(var n=this.getData(),o=this.coordinateSystem,s=n.getValues(g.UI(o.dimensions,function(d){return n.mapDimension(d)}),e),u=0,h=s.length;u<h;u++)if(!isNaN(s[u])){var v=o.getIndicatorAxes();return o.coordToPoint(v[u].dataToCoord(s[u]),u)}}},r.type="series.radar",r.dependencies=["radar"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},r}(xe.Z),dp=ai,Cl=hc.value;function _u(a,r){return g.ce({show:r},a)}var pp=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),n=this.get("splitNumber"),o=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),h=this.get("axisLabel"),v=this.get("axisName"),d=this.get(["axisName","show"]),m=this.get(["axisName","formatter"]),_=this.get("axisNameGap"),S=this.get("triggerEvent"),b=g.UI(this.get("indicator")||[],function(P){P.max!=null&&P.max>0&&!P.min?P.min=0:P.min!=null&&P.min<0&&!P.max&&(P.max=0);var R=v;P.color!=null&&(R=g.ce({color:P.color},v));var Y=g.TS(g.d9(P),{boundaryGap:e,splitNumber:n,scale:o,axisLine:s,axisTick:u,axisLabel:h,name:P.text,showName:d,nameLocation:"end",nameGap:_,nameTextStyle:R,triggerEvent:S},!1);if(g.HD(m)){var nt=Y.name;Y.name=m.replace("{value}",nt??"")}else g.mf(m)&&(Y.name=m(Y.name,Y));var pt=new Xn.Z(Y,null,this.ecModel);return g.jB(pt,Uo.W.prototype),pt.mainType="radar",pt.componentIndex=this.componentIndex,pt},this);this._indicatorModels=b},r.prototype.getIndicatorModels=function(){return this._indicatorModels},r.type="radar",r.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:g.TS({lineStyle:{color:"#bbb"}},Cl.axisLine),axisLabel:_u(Cl.axisLabel,!1),axisTick:_u(Cl.axisTick,!1),splitLine:_u(Cl.splitLine,!0),splitArea:_u(Cl.splitArea,!0),indicator:[]},r}(kn.Z),Dc=pp,Xo=F(69538),Ac=F(85795),gp=["axisLine","axisTickLabel","axisName"],mp=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},r.prototype._buildAxes=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes(),s=g.UI(o,function(u){var h=u.model.get("showName")?u.name:"",v=new ma(u.model,{axisName:h,position:[n.cx,n.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return v});g.S6(s,function(u){g.S6(gp,u.add,u),this.group.add(u.getGroup())},this)},r.prototype._buildSplitLineAndArea=function(e){var n=e.coordinateSystem,o=n.getIndicatorAxes();if(!o.length)return;var s=e.get("shape"),u=e.getModel("splitLine"),h=e.getModel("splitArea"),v=u.getModel("lineStyle"),d=h.getModel("areaStyle"),m=u.get("show"),_=h.get("show"),S=v.get("color"),b=d.get("color"),P=g.kJ(S)?S:[S],R=g.kJ(b)?b:[b],Y=[],nt=[];function pt(be,Fe,Ye){var Ue=Ye%Fe.length;return be[Ue]=be[Ue]||[],Ue}if(s==="circle")for(var mt=o[0].getTicksCoords(),bt=n.cx,Lt=n.cy,Pt=0;Pt<mt.length;Pt++){if(m){var Ot=pt(Y,P,Pt);Y[Ot].push(new Xo.Z({shape:{cx:bt,cy:Lt,r:mt[Pt].coord}}))}if(_&&Pt<mt.length-1){var Ot=pt(nt,R,Pt);nt[Ot].push(new Ac.Z({shape:{cx:bt,cy:Lt,r0:mt[Pt].coord,r:mt[Pt+1].coord}}))}}else for(var kt,jt=g.UI(o,function(be,Fe){var Ye=be.getTicksCoords();return kt=kt==null?Ye.length-1:Math.min(Ye.length-1,kt),g.UI(Ye,function(Ue){return n.coordToPoint(Ue.coord,Fe)})}),re=[],Pt=0;Pt<=kt;Pt++){for(var ae=[],he=0;he<o.length;he++)ae.push(jt[he][Pt]);if(ae[0]&&ae.push(ae[0].slice()),m){var Ot=pt(Y,P,Pt);Y[Ot].push(new Hi.Z({shape:{points:ae}}))}if(_&&re){var Ot=pt(nt,R,Pt-1);nt[Ot].push(new Ln.Z({shape:{points:ae.concat(re)}}))}re=ae.slice().reverse()}var me=v.getLineStyle(),Te=d.getAreaStyle();g.S6(nt,function(be,Fe){this.group.add(br.mergePath(be,{style:g.ce({stroke:"none",fill:R[Fe%R.length]},Te),silent:!0}))},this),g.S6(Y,function(be,Fe){this.group.add(br.mergePath(be,{style:g.ce({fill:"none",stroke:P[Fe%P.length]},me),silent:!0}))},this)},r.type="radar",r}(pn.Z),yp=mp,_p=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this,e,n,o)||this;return s.type="value",s.angle=0,s.name="",s}return r}(Pa.Z),xp=_p,bc=function(){function a(r,e,n){this.dimensions=[],this._model=r,this._indicatorAxes=(0,g.UI)(r.getIndicatorModels(),function(o,s){var u="indicator_"+s,h=new xp(u,new gu.Z);return h.name=o.get("name"),h.model=o,o.axis=h,this.dimensions.push(u),h},this),this.resize(r,n)}return a.prototype.getIndicatorAxes=function(){return this._indicatorAxes},a.prototype.dataToPoint=function(r,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(r),e)},a.prototype.coordToPoint=function(r,e){var n=this._indicatorAxes[e],o=n.angle,s=this.cx+r*Math.cos(o),u=this.cy-r*Math.sin(o);return[s,u]},a.prototype.pointToData=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=Math.sqrt(e*e+n*n);e/=o,n/=o;for(var s=Math.atan2(-n,e),u=1/0,h,v=-1,d=0;d<this._indicatorAxes.length;d++){var m=this._indicatorAxes[d],_=Math.abs(s-m.angle);_<u&&(h=m,v=d,u=_)}return[v,+(h&&h.coordToData(o))]},a.prototype.resize=function(r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight(),u=Math.min(o,s)/2;this.cx=Ie.GM(n[0],o),this.cy=Ie.GM(n[1],s),this.startAngle=r.get("startAngle")*Math.PI/180;var h=r.get("radius");((0,g.HD)(h)||(0,g.hj)(h))&&(h=[0,h]),this.r0=Ie.GM(h[0],u),this.r=Ie.GM(h[1],u),(0,g.S6)(this._indicatorAxes,function(v,d){v.setExtent(this.r0,this.r);var m=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;m=Math.atan2(Math.sin(m),Math.cos(m)),v.angle=m},this)},a.prototype.update=function(r,e){var n=this._indicatorAxes,o=this._model;(0,g.S6)(n,function(h){h.scale.setExtent(1/0,-1/0)}),r.eachSeriesByType("radar",function(h,v){if(!(h.get("coordinateSystem")!=="radar"||r.getComponent("radar",h.get("radarIndex"))!==o)){var d=h.getData();(0,g.S6)(n,function(m){m.scale.unionExtentFromData(d,d.mapDimension(m.dim))})}},this);var s=o.get("splitNumber"),u=new gu.Z;u.setExtent(0,s),u.setInterval(1),(0,g.S6)(n,function(h,v){xf(h.scale,h.model,u)})},a.prototype.convertToPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.convertFromPixel=function(r,e,n){return console.warn("Not implemented."),null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.create=function(r,e){var n=[];return r.eachComponent("radar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeriesByType("radar",function(o){o.get("coordinateSystem")==="radar"&&(o.coordinateSystem=n[o.get("radarIndex")||0])}),n},a.dimensions=[],a}(),Sp=bc;function Tp(a){a.registerCoordinateSystem("radar",Sp),a.registerComponentModel(Dc),a.registerComponentView(yp),a.registerVisual({seriesType:"radar",reset:function(r){var e=r.getData();e.each(function(n){e.setItemVisual(n,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}function wp(a){(0,N.D)(Tp),a.registerChartView(Xi),a.registerSeriesModel(dp),a.registerLayout(Li),a.registerProcessor(Ea("radar")),a.registerPreprocessor(vp)}var Vr=F(23510),Ri=F(61158),xu=F(81615),Af="\0_ec_interaction_mutex";function Mc(a,r,e){var n=xn(a);n[r]=e}function se(a,r,e){var n=xn(a),o=n[r];o===e&&(n[r]=null)}function Su(a,r){return!!xn(a)[r]}function xn(a){return a[Af]||(a[Af]={})}xu.zl({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},g.ZT);var Ec=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this)||this;n._zr=e;var o=(0,g.ak)(n._mousedownHandler,n),s=(0,g.ak)(n._mousemoveHandler,n),u=(0,g.ak)(n._mouseupHandler,n),h=(0,g.ak)(n._mousewheelHandler,n),v=(0,g.ak)(n._pinchHandler,n);return n.enable=function(d,m){this.disable(),this._opt=(0,g.ce)((0,g.d9)(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),d==null&&(d=!0),(d===!0||d==="move"||d==="pan")&&(e.on("mousedown",o),e.on("mousemove",s),e.on("mouseup",u)),(d===!0||d==="scale"||d==="zoom")&&(e.on("mousewheel",h),e.on("pinch",v))},n.disable=function(){e.off("mousedown",o),e.off("mousemove",s),e.off("mouseup",u),e.off("mousewheel",h),e.off("pinch",v)},n}return r.prototype.isDragging=function(){return this._dragging},r.prototype.isPinching=function(){return this._pinching},r.prototype.setPointerChecker=function(e){this.pointerChecker=e},r.prototype.dispose=function(){this.disable()},r.prototype._mousedownHandler=function(e){if(!(Ri.x1(e)||e.target&&e.target.draggable)){var n=e.offsetX,o=e.offsetY;this.pointerChecker&&this.pointerChecker(e,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},r.prototype._mousemoveHandler=function(e){if(!(!this._dragging||!Yo("moveOnMouseMove",e,this._opt)||e.gestureEvent==="pinch"||Su(this._zr,"globalPan"))){var n=e.offsetX,o=e.offsetY,s=this._x,u=this._y,h=n-s,v=o-u;this._x=n,this._y=o,this._opt.preventDefaultMouseMove&&Ri.sT(e.event),Pl(this,"pan","moveOnMouseMove",e,{dx:h,dy:v,oldX:s,oldY:u,newX:n,newY:o,isAvailableBehavior:null})}},r.prototype._mouseupHandler=function(e){Ri.x1(e)||(this._dragging=!1)},r.prototype._mousewheelHandler=function(e){var n=Yo("zoomOnMouseWheel",e,this._opt),o=Yo("moveOnMouseWheel",e,this._opt),s=e.wheelDelta,u=Math.abs(s),h=e.offsetX,v=e.offsetY;if(!(s===0||!n&&!o)){if(n){var d=u>3?1.4:u>1?1.2:1.1,m=s>0?d:1/d;bf(this,"zoom","zoomOnMouseWheel",e,{scale:m,originX:h,originY:v,isAvailableBehavior:null})}if(o){var _=Math.abs(s),S=(s>0?1:-1)*(_>3?.4:_>1?.15:.05);bf(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:S,originX:h,originY:v,isAvailableBehavior:null})}}},r.prototype._pinchHandler=function(e){if(!Su(this._zr,"globalPan")){var n=e.pinchScale>1?1.1:1/1.1;bf(this,"zoom",null,e,{scale:n,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},r}(Vr.Z);function bf(a,r,e,n,o){a.pointerChecker&&a.pointerChecker(n,o.originX,o.originY)&&(Ri.sT(n.event),Pl(a,r,e,n,o))}function Pl(a,r,e,n,o){o.isAvailableBehavior=(0,g.ak)(Yo,null,e,n),a.trigger(r,o)}function Yo(a,r,e){var n=e[a];return!a||n&&(!(0,g.HD)(n)||r.event[n+"Key"])}var ho=Ec;function Mf(a,r,e){var n=a.target;n.x+=r,n.y+=e,n.dirty()}function Tu(a,r,e,n){var o=a.target,s=a.zoomLimit,u=a.zoom=a.zoom||1;if(u*=r,s){var h=s.min||0,v=s.max||1/0;u=Math.max(Math.min(v,u),h)}var d=u/a.zoom;a.zoom=u,o.x-=(e-o.x)*(d-1),o.y-=(n-o.y)*(d-1),o.scaleX*=d,o.scaleY*=d,o.dirty()}var Dp={axisPointer:1,tooltip:1,brush:1};function co(a,r,e){var n=r.getComponentByElement(a.topTarget),o=n&&n.coordinateSystem;return n&&n!==e&&!Dp.hasOwnProperty(n.mainType)&&o&&o.model!==e}var Ap=F(92797),Ko=F(7494),bp=F(36369);function Ef(a){if((0,g.HD)(a)){var r=new DOMParser;a=r.parseFromString(a,"text/xml")}var e=a;for(e.nodeType===9&&(e=e.firstChild);e.nodeName.toLowerCase()!=="svg"||e.nodeType!==1;)e=e.nextSibling;return e}var Cc,jo={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Jo=(0,g.XP)(jo),Ha={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Ll=(0,g.XP)(Ha),Mp=function(){function a(){this._defs={},this._root=null}return a.prototype.parse=function(r,e){e=e||{};var n=Ef(r);this._defsUsePending=[];var o=new Mr.Z;this._root=o;var s=[],u=n.getAttribute("viewBox")||"",h=parseFloat(n.getAttribute("width")||e.width),v=parseFloat(n.getAttribute("height")||e.height);isNaN(h)&&(h=null),isNaN(v)&&(v=null),Oi(n,o,null,!0,!1);for(var d=n.firstChild;d;)this._parseNode(d,o,s,null,!1,!1),d=d.nextSibling;Lf(this._defs,this._defsUsePending),this._defsUsePending=[];var m,_;if(u){var S=Ol(u);S.length>=4&&(m={x:parseFloat(S[0]||0),y:parseFloat(S[1]||0),width:parseFloat(S[2]),height:parseFloat(S[3])})}if(m&&h!=null&&v!=null&&(_=vo(m,{x:0,y:0,width:h,height:v}),!e.ignoreViewBox)){var b=o;o=new Mr.Z,o.add(b),b.scaleX=b.scaleY=_.scale,b.x=_.x,b.y=_.y}return!e.ignoreRootClip&&h!=null&&v!=null&&o.setClipPath(new on.Z({shape:{x:0,y:0,width:h,height:v}})),{root:o,width:h,height:v,viewBoxRect:m,viewBoxTransform:_,named:s}},a.prototype._parseNode=function(r,e,n,o,s,u){var h=r.nodeName.toLowerCase(),v,d=o;if(h==="defs"&&(s=!0),h==="text"&&(u=!0),h==="defs"||h==="switch")v=e;else{if(!s){var m=Cc[h];if(m&&(0,g.RI)(Cc,h)){v=m.call(this,r,e);var _=r.getAttribute("name");if(_){var S={name:_,namedFrom:null,svgNodeTagLower:h,el:v};n.push(S),h==="g"&&(d=S)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:h,el:v});e.add(v)}}var b=Il[h];if(b&&(0,g.RI)(Il,h)){var P=b.call(this,r),R=r.getAttribute("id");R&&(this._defs[R]=P)}}if(v&&v.isGroup)for(var Y=r.firstChild;Y;)Y.nodeType===1?this._parseNode(Y,v,n,d,s,u):Y.nodeType===3&&u&&this._parseText(Y,v),Y=Y.nextSibling},a.prototype._parseText=function(r,e){var n=new it.Z({style:{text:r.textContent},silent:!0,x:this._textX||0,y:this._textY||0});$i(e,n),Oi(r,n,this._defsUsePending,!1,!1),Rl(n,e);var o=n.style,s=o.fontSize;s&&s<9&&(o.fontSize=9,n.scaleX*=s/9,n.scaleY*=s/9);var u=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=u;var h=n.getBoundingRect();return this._textX+=h.width,e.add(n),n},a.internalField=function(){Cc={g:function(r,e){var n=new Mr.Z;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n},rect:function(r,e){var n=new on.Z;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(r.getAttribute("x")||"0"),y:parseFloat(r.getAttribute("y")||"0"),width:parseFloat(r.getAttribute("width")||"0"),height:parseFloat(r.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(r,e){var n=new Xo.Z;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),r:parseFloat(r.getAttribute("r")||"0")}),n.silent=!0,n},line:function(r,e){var n=new Mi.Z;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(r.getAttribute("x1")||"0"),y1:parseFloat(r.getAttribute("y1")||"0"),x2:parseFloat(r.getAttribute("x2")||"0"),y2:parseFloat(r.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(r,e){var n=new Ap.Z;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(r.getAttribute("cx")||"0"),cy:parseFloat(r.getAttribute("cy")||"0"),rx:parseFloat(r.getAttribute("rx")||"0"),ry:parseFloat(r.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(r,e){var n=r.getAttribute("points"),o;n&&(o=Pf(n));var s=new Ln.Z({shape:{points:o||[]},silent:!0});return $i(e,s),Oi(r,s,this._defsUsePending,!1,!1),s},polyline:function(r,e){var n=r.getAttribute("points"),o;n&&(o=Pf(n));var s=new Hi.Z({shape:{points:o||[]},silent:!0});return $i(e,s),Oi(r,s,this._defsUsePending,!1,!1),s},image:function(r,e){var n=new gt.ZP;return $i(e,n),Oi(r,n,this._defsUsePending,!1,!1),n.setStyle({image:r.getAttribute("xlink:href")||r.getAttribute("href"),x:+r.getAttribute("x"),y:+r.getAttribute("y"),width:+r.getAttribute("width"),height:+r.getAttribute("height")}),n.silent=!0,n},text:function(r,e){var n=r.getAttribute("x")||"0",o=r.getAttribute("y")||"0",s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(s),this._textY=parseFloat(o)+parseFloat(u);var h=new Mr.Z;return $i(e,h),Oi(r,h,this._defsUsePending,!1,!0),h},tspan:function(r,e){var n=r.getAttribute("x"),o=r.getAttribute("y");n!=null&&(this._textX=parseFloat(n)),o!=null&&(this._textY=parseFloat(o));var s=r.getAttribute("dx")||"0",u=r.getAttribute("dy")||"0",h=new Mr.Z;return $i(e,h),Oi(r,h,this._defsUsePending,!1,!0),this._textX+=parseFloat(s),this._textY+=parseFloat(u),h},path:function(r,e){var n=r.getAttribute("d")||"",o=(0,Ko.iR)(n);return $i(e,o),Oi(r,o,this._defsUsePending,!1,!1),o.silent=!0,o}}}(),a}(),Il={lineargradient:function(a){var r=parseInt(a.getAttribute("x1")||"0",10),e=parseInt(a.getAttribute("y1")||"0",10),n=parseInt(a.getAttribute("x2")||"10",10),o=parseInt(a.getAttribute("y2")||"0",10),s=new Qr.Z(r,e,n,o);return Zs(a,s),Cf(a,s),s},radialgradient:function(a){var r=parseInt(a.getAttribute("cx")||"0",10),e=parseInt(a.getAttribute("cy")||"0",10),n=parseInt(a.getAttribute("r")||"0",10),o=new bp.Z(r,e,n);return Zs(a,o),Cf(a,o),o}};function Zs(a,r){var e=a.getAttribute("gradientUnits");e==="userSpaceOnUse"&&(r.global=!0)}function Cf(a,r){for(var e=a.firstChild;e;){if(e.nodeType===1&&e.nodeName.toLocaleLowerCase()==="stop"){var n=e.getAttribute("offset"),o=void 0;n&&n.indexOf("%")>0?o=parseInt(n,10)/100:n?o=parseFloat(n):o=0;var s={};Du(e,s,s);var u=s.stopColor||e.getAttribute("stop-color")||"#000000";r.colorStops.push({offset:o,color:u})}e=e.nextSibling}}function $i(a,r){a&&a.__inheritedStyle&&(r.__inheritedStyle||(r.__inheritedStyle={}),(0,g.ce)(r.__inheritedStyle,a.__inheritedStyle))}function Pf(a){for(var r=Ol(a),e=[],n=0;n<r.length;n+=2){var o=parseFloat(r[n]),s=parseFloat(r[n+1]);e.push([o,s])}return e}function Oi(a,r,e,n,o){var s=r,u=s.__inheritedStyle=s.__inheritedStyle||{},h={};a.nodeType===1&&(Lc(a,r),Du(a,u,h),n||Hs(a,u,h)),s.style=s.style||{},u.fill!=null&&(s.style.fill=Vn(s,"fill",u.fill,e)),u.stroke!=null&&(s.style.stroke=Vn(s,"stroke",u.stroke,e)),(0,g.S6)(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(v){u[v]!=null&&(s.style[v]=parseFloat(u[v]))}),(0,g.S6)(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(v){u[v]!=null&&(s.style[v]=u[v])}),o&&(s.__selfStyle=h),u.lineDash&&(s.style.lineDash=(0,g.UI)(Ol(u.lineDash),function(v){return parseFloat(v)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(s.invisible=!0),u.display==="none"&&(s.ignore=!0)}function Rl(a,r){var e=r.__selfStyle;if(e){var n=e.textBaseline,o=n;!n||n==="auto"||n==="baseline"?o="alphabetic":n==="before-edge"||n==="text-before-edge"?o="top":n==="after-edge"||n==="text-after-edge"?o="bottom":(n==="central"||n==="mathematical")&&(o="middle"),a.style.textBaseline=o}var s=r.__inheritedStyle;if(s){var u=s.textAlign,h=u;u&&(u==="middle"&&(h="center"),a.style.textAlign=h)}}var Ep=/^url\(\s*#(.*?)\)/;function Vn(a,r,e,n){var o=e&&e.match(Ep);if(o){var s=(0,g.fy)(o[1]);n.push([a,r,s]);return}return e==="none"&&(e=null),e}function Lf(a,r){for(var e=0;e<r.length;e++){var n=r[e];n[0].style[n[1]]=a[n[2]]}}var Pc=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Ol(a){return a.match(Pc)||[]}var Qo=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Ws=Math.PI/180;function Lc(a,r){var e=a.getAttribute("transform");if(e){e=e.replace(/,/g," ");var n=[],o=null;e.replace(Qo,function(_,S,b){return n.push(S,b),""});for(var s=n.length-1;s>0;s-=2){var u=n[s],h=n[s-1],v=Ol(u);switch(o=o||gn.Ue(),h){case"translate":gn.Iu(o,o,[parseFloat(v[0]),parseFloat(v[1]||"0")]);break;case"scale":gn.bA(o,o,[parseFloat(v[0]),parseFloat(v[1]||v[0])]);break;case"rotate":gn.U1(o,o,-parseFloat(v[0])*Ws);break;case"skewX":var d=Math.tan(parseFloat(v[0])*Ws);gn.dC(o,[1,0,d,1,0,0],o);break;case"skewY":var m=Math.tan(parseFloat(v[0])*Ws);gn.dC(o,[1,m,0,1,0,0],o);break;case"matrix":o[0]=parseFloat(v[0]),o[1]=parseFloat(v[1]),o[2]=parseFloat(v[2]),o[3]=parseFloat(v[3]),o[4]=parseFloat(v[4]),o[5]=parseFloat(v[5]);break}}r.setLocalTransform(o)}}var wu=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Du(a,r,e){var n=a.getAttribute("style");if(!!n){wu.lastIndex=0;for(var o;(o=wu.exec(n))!=null;){var s=o[1],u=(0,g.RI)(jo,s)?jo[s]:null;u&&(r[u]=o[2]);var h=(0,g.RI)(Ha,s)?Ha[s]:null;h&&(e[h]=o[2])}}}function Hs(a,r,e){for(var n=0;n<Jo.length;n++){var o=Jo[n],s=a.getAttribute(o);s!=null&&(r[jo[o]]=s)}for(var n=0;n<Ll.length;n++){var o=Ll[n],s=a.getAttribute(o);s!=null&&(e[Ha[o]]=s)}}function vo(a,r){var e=r.width/a.width,n=r.height/a.height,o=Math.min(e,n);return{scale:o,x:-(a.x+a.width/2)*o+(r.x+r.width/2),y:-(a.y+a.height/2)*o+(r.y+r.height/2)}}function Ic(a,r){var e=new Mp;return e.parse(a,r)}var Rc=F(64215),If=(0,g.kW)(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Cp=function(){function a(r,e){this.type="geoSVG",this._usedGraphicMap=(0,g.kW)(),this._freedGraphics=[],this._mapName=r,this._parsedXML=Ef(e)}return a.prototype.load=function(){var r=this._firstGraphic;if(!r){r=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(r),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Au(r.named),n=e.regions,o=e.regionsMap;this._regions=n,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},a.prototype._buildGraphic=function(r){var e,n;try{e=r&&Ic(r,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,(0,g.hu)(n!=null)}catch(Y){throw new Error(`Invalid svg format
`+Y.message)}var o=new Mr.Z;o.add(n),o.isGeoSVGGraphicRoot=!0;var s=e.width,u=e.height,h=e.viewBoxRect,v=this._boundingRect;if(!v){var d=void 0,m=void 0,_=void 0,S=void 0;if(s!=null?(d=0,_=s):h&&(d=h.x,_=h.width),u!=null?(m=0,S=u):h&&(m=h.y,S=h.height),d==null||m==null){var b=n.getBoundingRect();d==null&&(d=b.x,_=b.width),m==null&&(m=b.y,S=b.height)}v=this._boundingRect=new Dr.Z(d,m,_,S)}if(h){var P=vo(h,v);n.scaleX=n.scaleY=P.scale,n.x=P.x,n.y=P.y}o.setClipPath(new on.Z({shape:v.plain()}));var R=[];return(0,g.S6)(e.named,function(Y){If.get(Y.svgNodeTagLower)!=null&&(R.push(Y),Pp(Y.el))}),{root:o,boundingRect:v,named:R}},a.prototype.useGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(r,n),n)},a.prototype.freeGraphic=function(r){var e=this._usedGraphicMap,n=e.get(r);n&&(e.removeKey(r),this._freedGraphics.push(n))},a}();function Pp(a){a.silent=!1,a.isGroup&&a.traverse(function(r){r.silent=!1})}function Au(a){var r=[],e=(0,g.kW)();return(0,g.S6)(a,function(n){if(n.namedFrom==null){var o=new Rc.Im(n.name,n.el);r.push(o),e.set(n.name,o)}}),{regions:r,regionsMap:e}}for(var Lp=F(76672),bu=[126,25],Rf="\u5357\u6D77\u8BF8\u5C9B",$o=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],qo=0;qo<$o.length;qo++)for(var po=0;po<$o[qo].length;po++)$o[qo][po][0]/=10.5,$o[qo][po][1]/=-10.5/.75,$o[qo][po][0]+=bu[0],$o[qo][po][1]+=bu[1];function ts(a,r){if(a==="china"){for(var e=0;e<r.length;e++)if(r[e].name===Rf)return;r.push(new Rc.Ni(Rf,g.UI($o,function(n){return{type:"polygon",exterior:n}}),bu))}}var es=F(14901),Of=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function Nf(a,r){a==="china"&&r.name==="\u53F0\u6E7E"&&r.geometries.push({type:"polygon",exterior:Of[0]})}var Ip="name",Mu=function(){function a(r,e,n){this.type="geoJSON",this._parsedMap=(0,g.kW)(),this._mapName=r,this._specialAreas=n,this._geoJSON=rs(e)}return a.prototype.load=function(r,e){e=e||Ip;var n=this._parsedMap.get(e);if(!n){var o=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:o,boundingRect:Oc(o)})}var s=(0,g.kW)(),u=[];return(0,g.S6)(n.regions,function(h){var v=h.name;r&&(0,g.RI)(r,v)&&(h=h.cloneShallow(v=r[v])),u.push(h),s.set(v,h)}),{regions:u,boundingRect:n.boundingRect||new Dr.Z(0,0,0,0),regionsMap:s}},a.prototype._parseToRegions=function(r){var e=this._mapName,n=this._geoJSON,o;try{o=n?(0,Lp.Z)(n,r):[]}catch(s){throw new Error(`Invalid geoJson format
`+s.message)}return ts(e,o),(0,g.S6)(o,function(s){var u=s.name;(0,es.Z)(e,s),Nf(e,s);var h=this._specialAreas&&this._specialAreas[u];h&&s.transformTo(h.left,h.top,h.width,h.height)},this),o},a.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},a}();function Oc(a){for(var r,e=0;e<a.length;e++){var n=a[e].getBoundingRect();r=r||n.clone(),r.union(n)}return r}function rs(a){return(0,g.HD)(a)?typeof JSON<"u"&&JSON.parse?JSON.parse(a):new Function("return ("+a+");")():a}var Nl=(0,g.kW)(),La={registerMap:function(a,r,e){if(r.svg){var n=new Cp(a,r.svg);Nl.set(a,n)}else{var o=r.geoJson||r.geoJSON;o&&!r.features?e=r.specialAreas:o=r;var n=new Mu(a,o,e);Nl.set(a,n)}},getGeoResource:function(a){return Nl.get(a)},getMapForUser:function(a){var r=Nl.get(a);return r&&r.type==="geoJSON"&&r.getMapForUser()},load:function(a,r,e){var n=Nl.get(a);if(!!n)return n.load(r,e)}},ns=F(48625),go=F(7719),Xs=["rect","circle","line","ellipse","polygon","polyline","path"],Rp=g.kW(Xs),Eu=g.kW(Xs.concat(["g"])),Bf=g.kW(Xs.concat(["g"])),Ff=(0,Xe.Yf)();function Ys(a){var r=a.getItemStyle(),e=a.get("areaColor");return e!=null&&(r.fill=e),r}function zf(a){var r=a.style;r&&(r.stroke=r.stroke||r.fill,r.fill=null)}var Op=function(){function a(r){var e=new Mr.Z;this.uid=(0,Zi.Kr)("ec_map_draw"),this._controller=new ho(r.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Mr.Z),e.add(this._svgGroup=new Mr.Z)}return a.prototype.draw=function(r,e,n,o,s){var u=r.mainType==="geo",h=r.getData&&r.getData();u&&e.eachComponent({mainType:"series",subType:"map"},function(nt){!h&&nt.getHostGeoModel()===r&&(h=nt.getData())});var v=r.coordinateSystem,d=this._regionsGroup,m=this.group,_=v.getTransformInfo(),S=_.raw,b=_.roam,P=!d.childAt(0)||s;P?(m.x=b.x,m.y=b.y,m.scaleX=b.scaleX,m.scaleY=b.scaleY,m.dirty()):cr.D(m,b,r);var R=h&&h.getVisual("visualMeta")&&h.getVisual("visualMeta").length>0,Y={api:n,geo:v,mapOrGeoModel:r,data:h,isVisualEncodedByVisualMap:R,isGeo:u,transformInfoRaw:S};v.resourceType==="geoJSON"?this._buildGeoJSON(Y):v.resourceType==="geoSVG"&&this._buildSVG(Y),this._updateController(r,e,n),this._updateMapSelectHandler(r,d,n,o)},a.prototype._buildGeoJSON=function(r){var e=this._regionsGroupByName=g.kW(),n=g.kW(),o=this._regionsGroup,s=r.transformInfoRaw,u=r.mapOrGeoModel,h=r.data,v=r.geo.projection,d=v&&v.stream;function m(b,P){return P&&(b=P(b)),b&&[b[0]*s.scaleX+s.x,b[1]*s.scaleY+s.y]}function _(b){for(var P=[],R=!d&&v&&v.project,Y=0;Y<b.length;++Y){var nt=m(b[Y],R);nt&&P.push(nt)}return P}function S(b){return{shape:{points:_(b)}}}o.removeAll(),g.S6(r.geo.regions,function(b){var P=b.name,R=e.get(P),Y=n.get(P)||{},nt=Y.dataIdx,pt=Y.regionModel;R||(R=e.set(P,new Mr.Z),o.add(R),nt=h?h.indexOfName(P):null,pt=r.isGeo?u.getRegionModel(P):h?h.getItemModel(nt):null,n.set(P,{dataIdx:nt,regionModel:pt}));var mt=[],bt=[];g.S6(b.geometries,function(Ot){if(Ot.type==="polygon"){var kt=[Ot.exterior].concat(Ot.interiors||[]);d&&(kt=Uf(kt,d)),g.S6(kt,function(re){mt.push(new Ln.Z(S(re)))})}else{var jt=Ot.points;d&&(jt=Uf(jt,d,!0)),g.S6(jt,function(re){bt.push(new Hi.Z(S(re)))})}});var Lt=m(b.getCenter(),v&&v.project);function Pt(Ot,kt){if(!!Ot.length){var jt=new St.Z({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Ot}});R.add(jt),Nc(r,jt,nt,pt),Gf(r,jt,P,pt,u,nt,Lt),kt&&(zf(jt),g.S6(jt.states,zf))}}Pt(mt),Pt(bt,!0)}),e.each(function(b,P){var R=n.get(P),Y=R.dataIdx,nt=R.regionModel;Bc(r,b,P,nt,u,Y),Xa(r,b,P,nt,u),Cu(r,b,P,nt,u)},this)},a.prototype._buildSVG=function(r){var e=r.geo.map,n=r.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=g.kW(),s=!1;g.S6(this._svgGraphicRecord.named,function(u){var h=u.name,v=r.mapOrGeoModel,d=r.data,m=u.svgNodeTagLower,_=u.el,S=d?d.indexOfName(h):null,b=v.getRegionModel(h);if(Rp.get(m)!=null&&_ instanceof go.ZP&&Nc(r,_,S,b),_ instanceof go.ZP&&(_.culling=!0),_.z2EmphasisLift=0,!u.namedFrom&&(Bf.get(m)!=null&&Gf(r,_,h,b,v,S,null),Bc(r,_,h,b,v,S),Xa(r,_,h,b,v),Eu.get(m)!=null)){var P=Cu(r,_,h,b,v);P==="self"&&(s=!0);var R=o.get(h)||o.set(h,[]);R.push(_)}},this),this._enableBlurEntireSVG(s,r)},a.prototype._enableBlurEntireSVG=function(r,e){if(r&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),o=n.opacity;this._svgGraphicRecord.root.traverse(function(s){if(!s.isGroup){(0,ir.MA)(s);var u=s.ensureState("blur").style||{};u.opacity==null&&o!=null&&(u.opacity=o),s.ensureState("emphasis")}})}},a.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},a.prototype.findHighDownDispatchers=function(r,e){if(r==null)return[];var n=e.coordinateSystem;if(n.resourceType==="geoJSON"){var o=this._regionsGroupByName;if(o){var s=o.get(r);return s?[s]:[]}}else if(n.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(r)||[]},a.prototype._svgResourceChanged=function(r){return this._svgMapName!==r},a.prototype._useSVG=function(r){var e=La.getGeoResource(r);if(e&&e.type==="geoSVG"){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=r}},a.prototype._freeSVG=function(){var r=this._svgMapName;if(r!=null){var e=La.getGeoResource(r);e&&e.type==="geoSVG"&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},a.prototype._updateController=function(r,e,n){var o=r.coordinateSystem,s=this._controller,u=this._controllerHost;u.zoomLimit=r.get("scaleLimit"),u.zoom=o.getZoom(),s.enable(r.get("roam")||!1);var h=r.mainType;function v(){var d={type:"geoRoam",componentType:h};return d[h+"Id"]=r.id,d}s.off("pan").on("pan",function(d){this._mouseDownFlag=!1,Mf(u,d.dx,d.dy),n.dispatchAction(g.l7(v(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),s.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,Tu(u,d.scale,d.originX,d.originY),n.dispatchAction(g.l7(v(),{zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),s.setPointerChecker(function(d,m,_){return o.containPoint([m,_])&&!co(d,n,r)})},a.prototype.resetForLabelLayout=function(){this.group.traverse(function(r){var e=r.getTextContent();e&&(e.ignore=Ff(e).ignore)})},a.prototype._updateMapSelectHandler=function(r,e,n,o){var s=this;e.off("mousedown"),e.off("click"),r.get("selectedMode")&&(e.on("mousedown",function(){s._mouseDownFlag=!0}),e.on("click",function(u){!s._mouseDownFlag||(s._mouseDownFlag=!1)}))},a}();function Nc(a,r,e,n){var o=n.getModel("itemStyle"),s=n.getModel(["emphasis","itemStyle"]),u=n.getModel(["blur","itemStyle"]),h=n.getModel(["select","itemStyle"]),v=Ys(o),d=Ys(s),m=Ys(h),_=Ys(u),S=a.data;if(S){var b=S.getItemVisual(e,"style"),P=S.getItemVisual(e,"decal");a.isVisualEncodedByVisualMap&&b.fill&&(v.fill=b.fill),P&&(v.decal=(0,ns.I)(P,a.api))}r.setStyle(v),r.style.strokeNoScale=!0,r.ensureState("emphasis").style=d,r.ensureState("select").style=m,r.ensureState("blur").style=_,(0,ir.MA)(r)}function Gf(a,r,e,n,o,s,u){var h=a.data,v=a.isGeo,d=h&&isNaN(h.get(h.mapDimension("value"),s)),m=h&&h.getItemLayout(s);if(v||d||m&&m.showLabel){var _=v?e:s,S=void 0;(!h||s>=0)&&(S=o);var b=u?{normal:{align:"center",verticalAlign:"middle"}}:null;(0,or.ni)(r,(0,or.k3)(n),{labelFetcher:S,labelDataIndex:_,defaultText:e},b);var P=r.getTextContent();if(P&&(Ff(P).ignore=P.ignore,r.textConfig&&u)){var R=r.getBoundingRect().clone();r.textConfig.layoutRect=R,r.textConfig.position=[(u[0]-R.x)/R.width*100+"%",(u[1]-R.y)/R.height*100+"%"]}r.disableLabelAnimation=!0}else r.removeTextContent(),r.removeTextConfig(),r.disableLabelAnimation=null}function Bc(a,r,e,n,o,s){a.data?a.data.setItemGraphicEl(s,r):(0,Hr.A)(r).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:e,region:n&&n.option||{}}}function Xa(a,r,e,n,o){a.data||br.setTooltipConfig({el:r,componentModel:o,itemName:e,itemTooltipOption:n.get("tooltip")})}function Cu(a,r,e,n,o){r.highDownSilentOnTouch=!!o.get("selectedMode");var s=n.getModel("emphasis"),u=s.get("focus");return(0,ir.k5)(r,u,s.get("blurScope"),s.get("disabled")),a.isGeo&&(0,ir.th)(r,o,e),u}function Uf(a,r,e){var n=[],o;function s(){o=[]}function u(){o.length&&(n.push(o),o=[])}var h=r({polygonStart:s,polygonEnd:u,lineStart:s,lineEnd:u,point:function(v,d){isFinite(v)&&isFinite(d)&&o.push([v,d])},sphere:function(){}});return!e&&h.polygonStart(),g.S6(a,function(v){h.lineStart();for(var d=0;d<v.length;d++)h.point(v[d][0],v[d][1]);h.lineEnd()}),!e&&h.polygonEnd(),n}var ya=Op,Np=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){if(!(s&&s.type==="mapToggleSelect"&&s.from===this.uid)){var u=this.group;if(u.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&s&&s.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),s&&s.type==="geoRoam"&&s.componentType==="series"&&s.seriesId===e.id){var h=this._mapDraw;h&&u.add(h.group)}else if(e.needsDrawMap){var h=this._mapDraw||new ya(o);u.add(h.group),h.draw(e,n,o,this,s),this._mapDraw=h}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&n.getComponent("legend")&&this._renderSymbols(e,n,o)}}},r.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},r.prototype._renderSymbols=function(e,n,o){var s=e.originalData,u=this.group;s.each(s.mapDimension("value"),function(h,v){if(!isNaN(h)){var d=s.getItemLayout(v);if(!(!d||!d.point)){var m=d.point,_=d.offset,S=new Xo.Z({style:{fill:e.getData().getVisual("style").fill},shape:{cx:m[0]+_*9,cy:m[1],r:3},silent:!0,z2:8+(_?0:ir.zr+1)});if(!_){var b=e.mainSeries.getData(),P=s.getName(v),R=b.indexOfName(P),Y=s.getItemModel(v),nt=Y.getModel("label"),pt=b.getItemGraphicEl(R);(0,or.ni)(S,(0,or.k3)(Y),{labelFetcher:{getFormattedLabel:function(mt,bt){return e.getFormattedLabel(R,bt)}},defaultText:P}),S.disableLabelAnimation=!0,nt.get("position")||S.setTextConfig({position:"bottom"}),pt.onHoverStateChange=function(mt){(0,ir.Gl)(S,mt)}}u.add(S)}}})},r.type="map",r}(vn.Z),Bp=Np,Bl=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(n){if(n!=null){var o=this.getData().getName(n),s=this.coordinateSystem,u=s.getRegion(o);return u&&s.dataToPoint(u.getCenter())}},e}return r.prototype.getInitialData=function(e){for(var n=Me(this,{coordDimensions:["value"],encodeDefaulter:g.WA(ye.Ss,this)}),o=g.kW(),s=[],u=0,h=n.count();u<h;u++){var v=n.getName(u);o.set(v,!0)}var d=La.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return g.S6(d.regions,function(m){var _=m.name;o.get(_)||s.push(_)}),n.appendValues([],s),n},r.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return e!=null?this.ecModel.getComponent("geo",e):null},r.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},r.prototype.getRawValue=function(e){var n=this.getData();return n.get(n.mapDimension("value"),e)},r.prototype.getRegionModel=function(e){var n=this.getData();return n.getItemModel(n.indexOfName(e))},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData(),u=this.getRawValue(e),h=s.getName(e),v=this.seriesGroup,d=[],m=0;m<v.length;m++){var _=v[m].originalData.indexOfName(h),S=s.mapDimension("value");isNaN(v[m].originalData.get(S,_))||d.push(v[m].name)}return(0,Nn.TX)("section",{header:d.join(", "),noHeader:!d.length,blocks:[(0,Nn.TX)("nameValue",{name:h,value:u})]})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.getLegendIcon=function(e){var n=e.icon||"roundRect",o=(0,Rr.th)(n,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return o.setStyle(e.itemStyle),o.style.stroke="none",n.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},r.type="series.map",r.dependencies=["geo"],r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},r}(xe.Z),Fp=Bl;function Fc(a,r){var e={};return g.S6(a,function(n){n.each(n.mapDimension("value"),function(o,s){var u="ec-"+n.getName(s);e[u]=e[u]||[],isNaN(o)||e[u].push(o)})}),a[0].map(a[0].mapDimension("value"),function(n,o){for(var s="ec-"+a[0].getName(o),u=0,h=1/0,v=-1/0,d=e[s].length,m=0;m<d;m++)h=Math.min(h,e[s][m]),v=Math.max(v,e[s][m]),u+=e[s][m];var _;return r==="min"?_=h:r==="max"?_=v:r==="average"?_=u/d:_=u,d===0?NaN:_})}function zp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getHostGeoModel(),o=n?"o"+n.id:"i"+e.getMapType();(r[o]=r[o]||[]).push(e)}),g.S6(r,function(e,n){for(var o=Fc(g.UI(e,function(u){return u.getData()}),e[0].get("mapValueCalculation")),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(var s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=s===0&&!e[s].getHostGeoModel(),e[s].setData(o.cloneShallow()),e[s].mainSeries=e[0]})}function Gp(a){var r={};a.eachSeriesByType("map",function(e){var n=e.getMapType();if(!(e.getHostGeoModel()||r[n])){var o={};g.S6(e.seriesGroup,function(u){var h=u.coordinateSystem,v=u.originalData;u.get("showLegendSymbol")&&a.getComponent("legend")&&v.each(v.mapDimension("value"),function(d,m){var _=v.getName(m),S=h.getRegion(_);if(!(!S||isNaN(d))){var b=o[_]||0,P=h.dataToPoint(S.getCenter());o[_]=b+1,v.setItemLayout(m,{point:P,offset:b})}})});var s=e.getData();s.each(function(u){var h=s.getName(u),v=s.getItemLayout(u)||{};v.showLabel=!o[h],s.setItemLayout(u,v)}),r[n]=!0}})}var zc=Or.Ne,Up=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new tt.ZP,n._rawTransformable=new tt.ZP,n.name=e,n}return r.prototype.setBoundingRect=function(e,n,o,s){return this._rect=new Dr.Z(e,n,o,s),this._rect},r.prototype.getBoundingRect=function(){return this._rect},r.prototype.setViewRect=function(e,n,o,s){this._transformTo(e,n,o,s),this._viewRect=new Dr.Z(e,n,o,s)},r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),h=this._rawTransformable;h.transform=u.calculateTransform(new Dr.Z(e,n,o,s));var v=h.parent;h.parent=null,h.decomposeTransform(),h.parent=v,this._updateTransform()},r.prototype.setCenter=function(e,n){!e||(this._center=[(0,Ie.GM)(e[0],n.getWidth()),(0,Ie.GM)(e[1],n.getHeight())],this._updateCenterAndZoom())},r.prototype.setZoom=function(e){e=e||1;var n=this.zoomLimit;n&&(n.max!=null&&(e=Math.min(n.max,e)),n.min!=null&&(e=Math.max(n.min,e))),this._zoom=e,this._updateCenterAndZoom()},r.prototype.getDefaultCenter=function(){var e=this.getBoundingRect(),n=e.x+e.width/2,o=e.y+e.height/2;return[n,o]},r.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},r.prototype.getZoom=function(){return this._zoom||1},r.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},r.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,o=this.getDefaultCenter(),s=this.getCenter(),u=this.getZoom();s=Or.Ne([],s,e),o=Or.Ne([],o,e),n.originX=s[0],n.originY=s[1],n.x=o[0]-s[0],n.y=o[1]-s[1],n.scaleX=n.scaleY=u,this._updateTransform()},r.prototype._updateTransform=function(){var e=this._roamTransformable,n=this._rawTransformable;n.parent=e,e.updateTransform(),n.updateTransform(),gn.JG(this.transform||(this.transform=[]),n.transform||gn.Ue()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],gn.U_(this.invTransform,this.transform),this.decomposeTransform()},r.prototype.getTransformInfo=function(){var e=this._rawTransformable,n=this._roamTransformable,o=new tt.ZP;return o.transform=n.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},r.prototype.getViewRect=function(){return this._viewRect},r.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},r.prototype.dataToPoint=function(e,n,o){var s=n?this._rawTransform:this.transform;return o=o||[],s?zc(o,e,s):Or.JG(o,e)},r.prototype.pointToData=function(e){var n=this.invTransform;return n?zc([],e,n):[e[0],e[1]]},r.prototype.convertToPixel=function(e,n,o){var s=Gc(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=Gc(n);return s===this?s.pointToData(o):null},r.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},r.dimensions=["x","y"],r}(tt.ZP);function Gc(a){var r=a.seriesModel;return r?r.coordinateSystem:null}var Fl=Up,kp={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Uc=["lng","lat"],kc=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this,e)||this;s.dimensions=Uc,s.type="geo",s._nameCoordMap=g.kW(),s.map=n;var u=o.projection,h=La.load(n,o.nameMap,o.nameProperty),v=La.getGeoResource(n),d=s.resourceType=v?v.type:null,m=s.regions=h.regions,_=kp[v.type];s._regionsMap=h.regionsMap,s.regions=h.regions,s.projection=u;var S;if(u)for(var b=0;b<m.length;b++){var P=m[b].getBoundingRect(u);S=S||P.clone(),S.union(P)}else S=h.boundingRect;return s.setBoundingRect(S.x,S.y,S.width,S.height),s.aspectScale=u?1:g.pD(o.aspectScale,_.aspectScale),s._invertLongitute=u?!1:_.invertLongitute,s}return r.prototype._transformTo=function(e,n,o,s){var u=this.getBoundingRect(),h=this._invertLongitute;u=u.clone(),h&&(u.y=-u.y-u.height);var v=this._rawTransformable;v.transform=u.calculateTransform(new Dr.Z(e,n,o,s));var d=v.parent;v.parent=null,v.decomposeTransform(),v.parent=d,h&&(v.scaleY=-v.scaleY),this._updateTransform()},r.prototype.getRegion=function(e){return this._regionsMap.get(e)},r.prototype.getRegionByCoord=function(e){for(var n=this.regions,o=0;o<n.length;o++){var s=n[o];if(s.type==="geoJSON"&&s.contain(e))return n[o]}},r.prototype.addGeoCoord=function(e,n){this._nameCoordMap.set(e,n)},r.prototype.getGeoCoord=function(e){var n=this._regionsMap.get(e);return this._nameCoordMap.get(e)||n&&n.getCenter()},r.prototype.dataToPoint=function(e,n,o){if(g.HD(e)&&(e=this.getGeoCoord(e)),e){var s=this.projection;return s&&(e=s.project(e)),e&&this.projectedToPoint(e,n,o)}},r.prototype.pointToData=function(e){var n=this.projection;return n&&(e=n.unproject(e)),e&&this.pointToProjected(e)},r.prototype.pointToProjected=function(e){return a.prototype.pointToData.call(this,e)},r.prototype.projectedToPoint=function(e,n,o){return a.prototype.dataToPoint.call(this,e,n,o)},r.prototype.convertToPixel=function(e,n,o){var s=kf(n);return s===this?s.dataToPoint(o):null},r.prototype.convertFromPixel=function(e,n,o){var s=kf(n);return s===this?s.pointToData(o):null},r}(Fl);g.jB(kc,Fl);function kf(a){var r=a.geoModel,e=a.seriesModel;return r?r.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",Xe.C6).models[0]||{}).coordinateSystem:null}var Vc=kc;function Vf(a,r){var e=a.get("boundingCoords");if(e!=null){var n=e[0],o=e[1];if(isFinite(n[0])&&isFinite(n[1])&&isFinite(o[0])&&isFinite(o[1])){var s=this.projection;if(s){var u=n[0],h=n[1],v=o[0],d=o[1];n=[1/0,1/0],o=[-1/0,-1/0];var m=function(Pt,Ot,kt,jt){for(var re=kt-Pt,ae=jt-Ot,he=0;he<=100;he++){var me=he/100,Te=s.project([Pt+re*me,Ot+ae*me]);Or.VV(n,n,Te),Or.Fp(o,o,Te)}};m(u,h,v,h),m(v,h,v,d),m(v,d,u,d),m(u,d,v,h)}this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}}var _=this.getBoundingRect(),S=a.get("layoutCenter"),b=a.get("layoutSize"),P=r.getWidth(),R=r.getHeight(),Y=_.width/_.height*this.aspectScale,nt=!1,pt,mt;S&&b&&(pt=[Ie.GM(S[0],P),Ie.GM(S[1],R)],mt=Ie.GM(b,Math.min(P,R)),!isNaN(pt[0])&&!isNaN(pt[1])&&!isNaN(mt)&&(nt=!0));var bt;if(nt)bt={},Y>1?(bt.width=mt,bt.height=mt/Y):(bt.height=mt,bt.width=mt*Y),bt.y=pt[1]-bt.height/2,bt.x=pt[0]-bt.width/2;else{var Lt=a.getBoxLayoutParams();Lt.aspect=Y,bt=Kr.ME(Lt,{width:P,height:R})}this.setViewRect(bt.x,bt.y,bt.width,bt.height),this.setCenter(a.get("center"),r),this.setZoom(a.get("zoom"))}function Vp(a,r){g.S6(r.get("geoCoord"),function(e,n){a.addGeoCoord(n,e)})}var Zc=function(){function a(){this.dimensions=Uc}return a.prototype.create=function(r,e){var n=[];function o(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}r.eachComponent("geo",function(u,h){var v=u.get("map"),d=new Vc(v+h,v,g.l7({nameMap:u.get("nameMap")},o(u)));d.zoomLimit=u.get("scaleLimit"),n.push(d),u.coordinateSystem=d,d.model=u,d.resize=Vf,d.resize(u,e)}),r.eachSeries(function(u){var h=u.get("coordinateSystem");if(h==="geo"){var v=u.get("geoIndex")||0;u.coordinateSystem=n[v]}});var s={};return r.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var h=u.getMapType();s[h]=s[h]||[],s[h].push(u)}}),g.S6(s,function(u,h){var v=g.UI(u,function(m){return m.get("nameMap")}),d=new Vc(h,h,g.l7({nameMap:g.Jn(v)},o(u[0])));d.zoomLimit=g.Jv.apply(null,g.UI(u,function(m){return m.get("scaleLimit")})),n.push(d),d.resize=Vf,d.resize(u[0],e),g.S6(u,function(m){m.coordinateSystem=d,Vp(d,m)})}),n},a.prototype.getFilledRegions=function(r,e,n,o){for(var s=(r||[]).slice(),u=g.kW(),h=0;h<s.length;h++)u.set(s[h].name,s[h]);var v=La.load(e,n,o);return g.S6(v.regions,function(d){var m=d.name;!u.get(m)&&s.push({name:m})}),s},a}(),Wc=new Zc,Zf=Wc,Hc=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=La.getGeoResource(e.map);if(s&&s.type==="geoJSON"){var u=e.itemStyle=e.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(e,o),Xe.Cc(e,"label",["show"])},r.prototype.optionUpdated=function(){var e=this,n=this.option;n.regions=Zf.getFilledRegions(n.regions,n.map,n.nameMap,n.nameProperty);var o={};this._optionModelMap=g.u4(n.regions||[],function(s,u){var h=u.name;return h&&(s.set(h,new Xn.Z(u,e,e.ecModel)),u.selected&&(o[h]=!0)),s},g.kW()),n.selectedMap||(n.selectedMap=o)},r.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new Xn.Z(null,this,this.ecModel)},r.prototype.getFormattedLabel=function(e,n){var o=this.getRegionModel(e),s=n==="normal"?o.get(["label","formatter"]):o.get(["emphasis","label","formatter"]),u={name:e};if(g.mf(s))return u.status=n,s(u);if(g.HD(s))return s.replace("{a}",e??"")},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.select=function(e){var n=this.option,o=n.selectedMode;if(!!o){o!=="multiple"&&(n.selectedMap=null);var s=n.selectedMap||(n.selectedMap={});s[e]=!0}},r.prototype.unSelect=function(e){var n=this.option.selectedMap;n&&(n[e]=!1)},r.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},r.prototype.isSelected=function(e){var n=this.option.selectedMap;return!!(n&&n[e])},r.type="geo",r.layoutMode="box",r.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},r}(kn.Z),Xc=Hc;function Yc(a,r){return a.pointToProjected?a.pointToProjected(r):a.pointToData(r)}function Pu(a,r,e,n){var o=a.getZoom(),s=a.getCenter(),u=r.zoom,h=a.projectedToPoint?a.projectedToPoint(s):a.dataToPoint(s);if(r.dx!=null&&r.dy!=null&&(h[0]-=r.dx,h[1]-=r.dy,a.setCenter(Yc(a,h),n)),u!=null){if(e){var v=e.min||0,d=e.max||1/0;u=Math.max(Math.min(o*u,d),v)/o}a.scaleX*=u,a.scaleY*=u;var m=(r.originX-a.x)*(u-1),_=(r.originY-a.y)*(u-1);a.x-=m,a.y-=_,a.updateTransform(),a.setCenter(Yc(a,h),n),a.setZoom(u*o)}return{center:a.getCenter(),zoom:a.getZoom()}}var Wf=F(18310),Zp=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.focusBlurEnabled=!0,e}return r.prototype.init=function(e,n){this._api=n},r.prototype.render=function(e,n,o,s){if(this._model=e,!e.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new ya(o));var u=this._mapDraw;u.draw(e,n,o,this,s),u.group.on("click",this._handleRegionClick,this),u.group.silent=e.get("silent"),this.group.add(u.group),this.updateSelectStatus(e,n,o)},r.prototype._handleRegionClick=function(e){var n;(0,Wf.o)(e.target,function(o){return(n=(0,Hr.A)(o).eventData)!=null},!0),n&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:n.name})},r.prototype.updateSelectStatus=function(e,n,o){var s=this;this._mapDraw.group.traverse(function(u){var h=(0,Hr.A)(u).eventData;if(h)return s._model.isSelected(h.name)?o.enterSelect(u):o.leaveSelect(u),!0})},r.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},r.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},r.type="geo",r}(pn.Z),Wp=Zp;function Hp(a,r,e){La.registerMap(a,r,e)}function Kc(a){a.registerCoordinateSystem("geo",Zf),a.registerComponentModel(Xc),a.registerComponentView(Wp),a.registerImpl("registerMap",Hp),a.registerImpl("getMap",function(e){return La.getMapForUser(e)});function r(e,n){n.update="geo:updateSelectStatus",a.registerAction(n,function(o,s){var u={},h=[];return s.eachComponent({mainType:"geo",query:o},function(v){v[e](o.name);var d=v.coordinateSystem;(0,g.S6)(d.regions,function(_){u[_.name]=v.isSelected(_.name)||!1});var m=[];(0,g.S6)(u,function(_,S){u[S]&&m.push(S)}),h.push({geoIndex:v.componentIndex,name:m})}),{selected:u,allSelected:h,name:o.name}})}r("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),r("select",{type:"geoSelect",event:"geoselected"}),r("unSelect",{type:"geoUnSelect",event:"geounselected"}),a.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,n,o){var s=e.componentType||"series";n.eachComponent({mainType:s,query:e},function(u){var h=u.coordinateSystem;if(h.type==="geo"){var v=Pu(h,e,u.get("scaleLimit"),o);u.setCenter&&u.setCenter(v.center),u.setZoom&&u.setZoom(v.zoom),s==="series"&&(0,g.S6)(u.seriesGroup,function(d){d.setCenter(v.center),d.setZoom(v.zoom)})}})})}function Xp(a){(0,N.D)(Kc),a.registerChartView(Bp),a.registerSeriesModel(Fp),a.registerLayout(Gp),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,zp),(0,ia.y)("map",a.registerAction)}var jc=F(54174);function Hf(a){var r=a;r.hierNode={defaultAncestor:null,ancestor:r,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e=[r],n,o;n=e.pop();)if(o=n.children,n.isExpand&&o.length)for(var s=o.length,u=s-1;u>=0;u--){var h=o[u];h.hierNode={defaultAncestor:null,ancestor:h,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},e.push(h)}}function Yp(a,r){var e=a.isExpand?a.children:[],n=a.parentNode.children,o=a.hierNode.i?n[a.hierNode.i-1]:null;if(e.length){Jp(a);var s=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;o?(a.hierNode.prelim=o.hierNode.prelim+r(a,o),a.hierNode.modifier=a.hierNode.prelim-s):a.hierNode.prelim=s}else o&&(a.hierNode.prelim=o.hierNode.prelim+r(a,o));a.parentNode.hierNode.defaultAncestor=Qp(a,o,a.parentNode.hierNode.defaultAncestor||n[0],r)}function Kp(a){var r=a.hierNode.prelim+a.parentNode.hierNode.modifier;a.setLayout({x:r},!0),a.hierNode.modifier+=a.parentNode.hierNode.modifier}function Jc(a){return arguments.length?a:$p}function Ks(a,r){return a-=Math.PI/2,{x:r*Math.cos(a),y:r*Math.sin(a)}}function jp(a,r){return Kr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Jp(a){for(var r=a.children,e=r.length,n=0,o=0;--e>=0;){var s=r[e];s.hierNode.prelim+=n,s.hierNode.modifier+=n,o+=s.hierNode.change,n+=s.hierNode.shift+o}}function Qp(a,r,e,n){if(r){for(var o=a,s=a,u=s.parentNode.children[0],h=r,v=o.hierNode.modifier,d=s.hierNode.modifier,m=u.hierNode.modifier,_=h.hierNode.modifier;h=mo(h),s=Xf(s),h&&s;){o=mo(o),u=Xf(u),o.hierNode.ancestor=a;var S=h.hierNode.prelim+_-s.hierNode.prelim-d+n(h,s);S>0&&($c(Qc(h,a,e),a,S),d+=S,v+=S),_+=h.hierNode.modifier,d+=s.hierNode.modifier,v+=o.hierNode.modifier,m+=u.hierNode.modifier}h&&!mo(o)&&(o.hierNode.thread=h,o.hierNode.modifier+=_-v),s&&!Xf(u)&&(u.hierNode.thread=s,u.hierNode.modifier+=d-m,e=a)}return e}function mo(a){var r=a.children;return r.length&&a.isExpand?r[r.length-1]:a.hierNode.thread}function Xf(a){var r=a.children;return r.length&&a.isExpand?r[0]:a.hierNode.thread}function Qc(a,r,e){return a.hierNode.ancestor.parentNode===r.parentNode?a.hierNode.ancestor:e}function $c(a,r,e){var n=e/(r.hierNode.i-a.hierNode.i);r.hierNode.change-=n,r.hierNode.shift+=e,r.hierNode.modifier+=e,r.hierNode.prelim+=e,a.hierNode.change+=n}function $p(a,r){return a.parentNode===r.parentNode?1:2}var sa=F(3726),qp=function(){function a(){this.parentPoint=[],this.childPoints=[]}return a}(),tg=function(a){(0,fe.ZT)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new qp},r.prototype.buildPath=function(e,n){var o=n.childPoints,s=o.length,u=n.parentPoint,h=o[0],v=o[s-1];if(s===1){e.moveTo(u[0],u[1]),e.lineTo(h[0],h[1]);return}var d=n.orient,m=d==="TB"||d==="BT"?0:1,_=1-m,S=(0,Ie.GM)(n.forkPosition,1),b=[];b[m]=u[m],b[_]=u[_]+(v[_]-u[_])*S,e.moveTo(u[0],u[1]),e.lineTo(b[0],b[1]),e.moveTo(h[0],h[1]),b[m]=h[m],e.lineTo(b[0],b[1]),b[m]=v[m],e.lineTo(b[0],b[1]),e.lineTo(v[0],v[1]);for(var P=1;P<s-1;P++){var R=o[P];e.moveTo(R[0],R[1]),b[m]=R[m],e.lineTo(b[0],b[1])}},r}(dt.ZP),Ya=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._mainGroup=new Mr.Z,e}return r.prototype.init=function(e,n){this._controller=new ho(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},r.prototype.render=function(e,n,o){var s=e.getData(),u=e.layoutInfo,h=this._mainGroup,v=e.get("layout");v==="radial"?(h.x=u.x+u.width/2,h.y=u.y+u.height/2):(h.x=u.x,h.y=u.y),this._updateViewCoordSys(e,o),this._updateController(e,n,o);var d=this._data;s.diff(d).add(function(m){qc(s,m)&&Yf(s,m,null,h,e)}).update(function(m,_){var S=d.getItemGraphicEl(_);if(!qc(s,m)){S&&is(d,_,S,h,e);return}Yf(s,m,S,h,e)}).remove(function(m){var _=d.getItemGraphicEl(m);_&&is(d,m,_,h,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),e.get("expandAndCollapse")===!0&&s.eachItemGraphicEl(function(m,_){m.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:_})})}),this._data=s},r.prototype._updateViewCoordSys=function(e,n){var o=e.getData(),s=[];o.each(function(_){var S=o.getItemLayout(_);S&&!isNaN(S.x)&&!isNaN(S.y)&&s.push([+S.x,+S.y])});var u=[],h=[];sa.zk(s,u,h);var v=this._min,d=this._max;h[0]-u[0]===0&&(u[0]=v?v[0]:u[0]-1,h[0]=d?d[0]:h[0]+1),h[1]-u[1]===0&&(u[1]=v?v[1]:u[1]-1,h[1]=d?d[1]:h[1]+1);var m=e.coordinateSystem=new Fl;m.zoomLimit=e.get("scaleLimit"),m.setBoundingRect(u[0],u[1],h[0]-u[0],h[1]-u[1]),m.setCenter(e.get("center"),n),m.setZoom(e.get("zoom")),this.group.attr({x:m.x,y:m.y,scaleX:m.scaleX,scaleY:m.scaleY}),this._min=u,this._max=h},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,h=this._controllerHost,v=this.group;u.setPointerChecker(function(d,m,_){var S=v.getBoundingRect();return S.applyTransform(v.transform),S.contain(m,_)&&!co(d,o,e)}),u.enable(e.get("roam")),h.zoomLimit=e.get("scaleLimit"),h.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Mf(h,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){Tu(h,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(e),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(e){var n=e.getData(),o=this._getNodeGlobalScale(e);n.eachItemGraphicEl(function(s,u){s.setSymbolScale(o)})},r.prototype._getNodeGlobalScale=function(e){var n=e.coordinateSystem;if(n.type!=="view")return 1;var o=this._nodeScaleRatio,s=n.scaleX||1,u=n.getZoom(),h=(u-1)*o+1;return h/s},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},r.type="tree",r}(vn.Z);function qc(a,r){var e=a.getItemLayout(r);return e&&!isNaN(e.x)&&!isNaN(e.y)}function Yf(a,r,e,n,o){var s=!e,u=a.tree.getNodeByDataIndex(r),h=u.getModel(),v=u.getVisual("style").fill,d=u.isExpand===!1&&u.children.length!==0?v:"#fff",m=a.tree.root,_=u.parentNode===m?u:u.parentNode||u,S=a.getItemGraphicEl(_.dataIndex),b=_.getLayout(),P=S?{x:S.__oldX,y:S.__oldY,rawX:S.__radialOldRawX,rawY:S.__radialOldRawY}:b,R=u.getLayout();s?(e=new ea(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.x=P.x,e.y=P.y):e.updateData(a,r,null,{symbolInnerColor:d,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=R.rawX,e.__radialRawY=R.rawY,n.add(e),a.setItemGraphicEl(r,e),e.__oldX=e.x,e.__oldY=e.y,cr.D(e,{x:R.x,y:R.y},o);var Y=e.getSymbolPath();if(o.get("layout")==="radial"){var nt=m.children[0],pt=nt.getLayout(),mt=nt.children.length,bt=void 0,Lt=void 0;if(R.x===pt.x&&u.isExpand===!0&&nt.children.length){var Pt={x:(nt.children[0].getLayout().x+nt.children[mt-1].getLayout().x)/2,y:(nt.children[0].getLayout().y+nt.children[mt-1].getLayout().y)/2};bt=Math.atan2(Pt.y-pt.y,Pt.x-pt.x),bt<0&&(bt=Math.PI*2+bt),Lt=Pt.x<pt.x,Lt&&(bt=bt-Math.PI)}else bt=Math.atan2(R.y-pt.y,R.x-pt.x),bt<0&&(bt=Math.PI*2+bt),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(Lt=R.x<pt.x,Lt&&(bt=bt-Math.PI)):(Lt=R.x>pt.x,Lt||(bt=bt-Math.PI));var Ot=Lt?"left":"right",kt=h.getModel("label"),jt=kt.get("rotate"),re=jt*(Math.PI/180),ae=Y.getTextContent();ae&&(Y.setTextConfig({position:kt.get("position")||Ot,rotation:jt==null?-bt:re,origin:"center"}),ae.setStyle("verticalAlign","middle"))}var he=h.get(["emphasis","focus"]),me=he==="relative"?g.WW(u.getAncestorsIndices(),u.getDescendantIndices()):he==="ancestor"?u.getAncestorsIndices():he==="descendant"?u.getDescendantIndices():null;me&&((0,Hr.A)(e).focus=me),eg(o,u,m,e,P,b,R,n),e.__edge&&(e.onHoverStateChange=function(Te){if(Te!=="blur"){var be=u.parentNode&&a.getItemGraphicEl(u.parentNode.dataIndex);be&&be.hoverState===ir.CX||(0,ir.Gl)(e.__edge,Te)}})}function eg(a,r,e,n,o,s,u,h){var v=r.getModel(),d=a.get("edgeShape"),m=a.get("layout"),_=a.getOrient(),S=a.get(["lineStyle","curveness"]),b=a.get("edgeForkPosition"),P=v.getModel("lineStyle").getLineStyle(),R=n.__edge;if(d==="curve")r.parentNode&&r.parentNode!==e&&(R||(R=n.__edge=new jc.Z({shape:Kf(m,_,S,o,o)})),cr.D(R,{shape:Kf(m,_,S,s,u)},a));else if(d==="polyline"&&m==="orthogonal"&&r!==e&&r.children&&r.children.length!==0&&r.isExpand===!0){for(var Y=r.children,nt=[],pt=0;pt<Y.length;pt++){var mt=Y[pt].getLayout();nt.push([mt.x,mt.y])}R||(R=n.__edge=new tg({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:_,forkPosition:b}})),cr.D(R,{shape:{parentPoint:[u.x,u.y],childPoints:nt}},a)}R&&!(d==="polyline"&&!r.isExpand)&&(R.useStyle(g.ce({strokeNoScale:!0,fill:null},P)),(0,ir.WO)(R,v,"lineStyle"),(0,ir.MA)(R),h.add(R))}function Lu(a,r,e,n,o){var s=r.tree.root,u=tv(s,a),h=u.source,v=u.sourceLayout,d=r.getItemGraphicEl(a.dataIndex);if(!!d){var m=r.getItemGraphicEl(h.dataIndex),_=m.__edge,S=d.__edge||(h.isExpand===!1||h.children.length===1?_:void 0),b=n.get("edgeShape"),P=n.get("layout"),R=n.get("orient"),Y=n.get(["lineStyle","curveness"]);S&&(b==="curve"?cr.bX(S,{shape:Kf(P,R,Y,v,v),style:{opacity:0}},n,{cb:function(){e.remove(S)},removeOpt:o}):b==="polyline"&&n.get("layout")==="orthogonal"&&cr.bX(S,{shape:{parentPoint:[v.x,v.y],childPoints:[[v.x,v.y]]},style:{opacity:0}},n,{cb:function(){e.remove(S)},removeOpt:o}))}}function tv(a,r){for(var e=r.parentNode===a?r:r.parentNode||r,n;n=e.getLayout(),n==null;)e=e.parentNode===a?e:e.parentNode||e;return{source:e,sourceLayout:n}}function is(a,r,e,n,o){var s=a.tree.getNodeByDataIndex(r),u=a.tree.root,h=tv(u,s).sourceLayout,v={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};cr.bX(e,{x:h.x+1,y:h.y+1},o,{cb:function(){n.remove(e),a.setItemGraphicEl(r,null)},removeOpt:v}),e.fadeOut(null,a.hostModel,{fadeLabel:!0,animation:v}),s.children.forEach(function(d){Lu(d,a,n,o,v)}),Lu(s,a,n,o,v)}function Kf(a,r,e,n,o){var s,u,h,v,d,m,_,S;if(a==="radial"){d=n.rawX,_=n.rawY,m=o.rawX,S=o.rawY;var b=Ks(d,_),P=Ks(d,_+(S-_)*e),R=Ks(m,S+(_-S)*e),Y=Ks(m,S);return{x1:b.x||0,y1:b.y||0,x2:Y.x||0,y2:Y.y||0,cpx1:P.x||0,cpy1:P.y||0,cpx2:R.x||0,cpy2:R.y||0}}else d=n.x,_=n.y,m=o.x,S=o.y,(r==="LR"||r==="RL")&&(s=d+(m-d)*e,u=_,h=m+(d-m)*e,v=S),(r==="TB"||r==="BT")&&(s=d,u=_+(S-_)*e,h=m,v=S+(_-S)*e);return{x1:d,y1:_,x2:m,y2:S,cpx1:s,cpy1:u,cpx2:h,cpy2:v}}var zl=Ya,ev=F(89344),rg=function(){function a(r,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=r||"",this.hostTree=e}return a.prototype.isRemoved=function(){return this.dataIndex<0},a.prototype.eachNode=function(r,e,n){g.mf(r)&&(n=e,e=r,r=null),r=r||{},g.HD(r)&&(r={order:r});var o=r.order||"preorder",s=this[r.attr||"children"],u;o==="preorder"&&(u=e.call(n,this));for(var h=0;!u&&h<s.length;h++)s[h].eachNode(r,e,n);o==="postorder"&&e.call(n,this)},a.prototype.updateDepthAndHeight=function(r){var e=0;this.depth=r;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(r+1),o.height>e&&(e=o.height)}this.height=e+1},a.prototype.getNodeById=function(r){if(this.getId()===r)return this;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].getNodeById(r);if(s)return s}},a.prototype.contains=function(r){if(r===this)return!0;for(var e=0,n=this.children,o=n.length;e<o;e++){var s=n[e].contains(r);if(s)return s}},a.prototype.getAncestors=function(r){for(var e=[],n=r?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},a.prototype.getAncestorsIndices=function(){for(var r=[],e=this;e;)r.push(e.dataIndex),e=e.parentNode;return r.reverse(),r},a.prototype.getDescendantIndices=function(){var r=[];return this.eachNode(function(e){r.push(e.dataIndex)}),r},a.prototype.getValue=function(r){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(r||"value"),this.dataIndex)},a.prototype.setLayout=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,r,e)},a.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},a.prototype.getModel=function(r){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(r)}},a.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},a.prototype.setVisual=function(r,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,r,e)},a.prototype.getVisual=function(r){return this.hostTree.data.getItemVisual(this.dataIndex,r)},a.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},a.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},a.prototype.getChildIndex=function(){if(this.parentNode){for(var r=this.parentNode.children,e=0;e<r.length;++e)if(r[e]===this)return e;return-1}return-1},a.prototype.isAncestorOf=function(r){for(var e=r.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},a.prototype.isDescendantOf=function(r){return r!==this&&r.isAncestorOf(this)},a}(),ng=function(){function a(r){this.type="tree",this._nodes=[],this.hostModel=r}return a.prototype.eachNode=function(r,e,n){this.root.eachNode(r,e,n)},a.prototype.getNodeByDataIndex=function(r){var e=this.data.getRawIndex(r);return this._nodes[e]},a.prototype.getNodeById=function(r){return this.root.getNodeById(r)},a.prototype.update=function(){for(var r=this.data,e=this._nodes,n=0,o=e.length;n<o;n++)e[n].dataIndex=-1;for(var n=0,o=r.count();n<o;n++)e[r.getRawIndex(n)].dataIndex=n},a.prototype.clearLayouts=function(){this.data.clearItemLayouts()},a.createTree=function(r,e,n){var o=new a(e),s=[],u=1;h(r);function h(m,_){var S=m.value;u=Math.max(u,g.kJ(S)?S.length:1),s.push(m);var b=new rg((0,Xe.U5)(m.name,""),o);_?ig(b,_):o.root=b,o._nodes.push(b);var P=m.children;if(P)for(var R=0;R<P.length;R++)h(P[R],b)}o.root.updateDepthAndHeight(0);var v=(0,ar.Z)(s,{coordDimensions:["value"],dimensionsCount:u}).dimensions,d=new ue.Z(v,e);return d.initData(s),n&&n(d),(0,ev.Z)({mainData:d,struct:o,structAttr:"tree"}),o.update(),o},a}();function ig(a,r){var e=r.children;a.parentNode!==r&&(e.push(a),a.parentNode=r)}var Iu=ng;function as(a,r,e){if(a&&g.cq(r,a.type)>=0){var n=e.getData().tree.root,o=a.targetNode;if(g.HD(o)&&(o=n.getNodeById(o)),o&&n.contains(o))return{node:o};var s=a.targetNodeId;if(s!=null&&(o=n.getNodeById(s)))return{node:o}}}function qr(a){for(var r=[];a;)a=a.parentNode,a&&r.push(a);return r.reverse()}function jf(a,r){var e=qr(a);return g.cq(e,r)>=0}function js(a,r){for(var e=[];a;){var n=a.dataIndex;e.push({name:a.name,dataIndex:n,value:r.getRawValue(n)}),a=a.parentNode}return e.reverse(),e}var ag=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e){var n={name:e.name,children:e.data},o=e.leaves||{},s=new Xn.Z(o,this,this.ecModel),u=Iu.createTree(n,this,h);function h(_){_.wrapMethod("getItemModel",function(S,b){var P=u.getNodeByDataIndex(b);return P&&P.children.length&&P.isExpand||(S.parentModel=s),S})}var v=0;u.eachNode("preorder",function(_){_.depth>v&&(v=_.depth)});var d=e.expandAndCollapse,m=d&&e.initialTreeDepth>=0?e.initialTreeDepth:v;return u.root.eachNode("preorder",function(_){var S=_.hostTree.data.getRawDataItem(_.dataIndex);_.isExpand=S&&S.collapsed!=null?!S.collapsed:_.depth<=m}),u.data},r.prototype.getOrient=function(){var e=this.get("orient");return e==="horizontal"?e="LR":e==="vertical"&&(e="TB"),e},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.formatTooltip=function(e,n,o){for(var s=this.getData().tree,u=s.root.children[0],h=s.getNodeByDataIndex(e),v=h.getValue(),d=h.name;h&&h!==u;)d=h.parentNode.name+"."+d,h=h.parentNode;return(0,Nn.TX)("nameValue",{name:d,value:v,noValue:isNaN(v)||v==null})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=js(o,this),n.collapsed=!o.isExpand,n},r.type="series.tree",r.layoutMode="box",r.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},r}(xe.Z),In=ag;function rv(a,r,e){for(var n=[a],o=[],s;s=n.pop();)if(o.push(s),s.isExpand){var u=s.children;if(u.length)for(var h=0;h<u.length;h++)n.push(u[h])}for(;s=o.pop();)r(s,e)}function la(a,r){for(var e=[a],n;n=e.pop();)if(r(n),n.isExpand){var o=n.children;if(o.length)for(var s=o.length-1;s>=0;s--)e.push(o[s])}}function og(a,r){a.eachSeriesByType("tree",function(e){sg(e,r)})}function sg(a,r){var e=jp(a,r);a.layoutInfo=e;var n=a.get("layout"),o=0,s=0,u=null;n==="radial"?(o=2*Math.PI,s=Math.min(e.height,e.width)/2,u=Jc(function(mt,bt){return(mt.parentNode===bt.parentNode?1:2)/mt.depth})):(o=e.width,s=e.height,u=Jc());var h=a.getData().tree.root,v=h.children[0];if(v){Hf(h),rv(v,Yp,u),h.hierNode.modifier=-v.hierNode.prelim,la(v,Kp);var d=v,m=v,_=v;la(v,function(mt){var bt=mt.getLayout().x;bt<d.getLayout().x&&(d=mt),bt>m.getLayout().x&&(m=mt),mt.depth>_.depth&&(_=mt)});var S=d===m?1:u(d,m)/2,b=S-d.getLayout().x,P=0,R=0,Y=0,nt=0;if(n==="radial")P=o/(m.getLayout().x+S+b),R=s/(_.depth-1||1),la(v,function(mt){Y=(mt.getLayout().x+b)*P,nt=(mt.depth-1)*R;var bt=Ks(Y,nt);mt.setLayout({x:bt.x,y:bt.y,rawX:Y,rawY:nt},!0)});else{var pt=a.getOrient();pt==="RL"||pt==="LR"?(R=s/(m.getLayout().x+S+b),P=o/(_.depth-1||1),la(v,function(mt){nt=(mt.getLayout().x+b)*R,Y=pt==="LR"?(mt.depth-1)*P:o-(mt.depth-1)*P,mt.setLayout({x:Y,y:nt},!0)})):(pt==="TB"||pt==="BT")&&(P=o/(m.getLayout().x+S+b),R=s/(_.depth-1||1),la(v,function(mt){Y=(mt.getLayout().x+b)*P,nt=pt==="TB"?(mt.depth-1)*R:s-(mt.depth-1)*R,mt.setLayout({x:Y,y:nt},!0)}))}}}function lg(a){a.eachSeriesByType("tree",function(r){var e=r.getData(),n=e.tree;n.eachNode(function(o){var s=o.getModel(),u=s.getModel("itemStyle").getItemStyle(),h=e.ensureUniqueItemVisual(o.dataIndex,"style");(0,g.l7)(h,u)})})}function ug(a){a.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"tree",query:r},function(n){var o=r.dataIndex,s=n.getData().tree,u=s.getNodeByDataIndex(o);u.isExpand=!u.isExpand})}),a.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(r,e,n){e.eachComponent({mainType:"series",subType:"tree",query:r},function(o){var s=o.coordinateSystem,u=Pu(s,r,void 0,n);o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom)})})}function nv(a){a.registerChartView(zl),a.registerSeriesModel(In),a.registerLayout(og),a.registerVisual(lg),ug(a)}var iv=["treemapZoomToNode","treemapRender","treemapMove"];function av(a){for(var r=0;r<iv.length;r++)a.registerAction({type:iv[r],update:"updateView"},g.ZT);a.registerAction({type:"treemapRootToNode",update:"updateView"},function(e,n){n.eachComponent({mainType:"series",subType:"treemap",query:e},o);function o(s,u){var h=["treemapZoomToNode","treemapRootToNode"],v=as(e,h,s);if(v){var d=s.getViewRoot();d&&(e.direction=jf(d,v.node)?"rollUp":"drillDown"),s.resetViewRoot(v.node)}}})}var Jf=F(75494);function Ru(a){var r=a.getData(),e=r.tree,n={};e.eachNode(function(o){for(var s=o;s&&s.depth>1;)s=s.parentNode;var u=(0,Jf.i)(a.ecModel,s.name||s.dataIndex+"",n);o.setVisual("decal",u)})}var fg=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventUsingHoverLayer=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};Qf(o);var s=e.levels||[],u=this.designatedVisualItemStyle={},h=new Xn.Z({itemStyle:u},this,n);s=e.levels=hg(s,n);var v=g.UI(s||[],function(_){return new Xn.Z(_,h,n)},this),d=Iu.createTree(o,this,m);function m(_){_.wrapMethod("getItemModel",function(S,b){var P=d.getNodeByDataIndex(b),R=P?v[P.depth]:null;return S.parentModel=R||h,S})}return d.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),h=s.getName(e);return(0,Nn.TX)("nameValue",{name:h,value:u})},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=js(o,this),n.treePathInfo=n.treeAncestors,n},r.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},g.l7(this.layoutInfo,e)},r.prototype.mapIdToIndex=function(e){var n=this._idIndexMap;n||(n=this._idIndexMap=g.kW(),this._idIndexMapCount=0);var o=n.get(e);return o==null&&n.set(e,o=this._idIndexMapCount++),o},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){Ru(this)},r.type="series.treemap",r.layoutMode="box",r.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25B6",zoomToNodeRatio:.32*.32,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},r}(xe.Z);function Qf(a){var r=0;g.S6(a.children,function(n){Qf(n);var o=n.value;g.kJ(o)&&(o=o[0]),r+=o});var e=a.value;g.kJ(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.kJ(a.value)?a.value[0]=e:a.value=e}function hg(a,r){var e=(0,Xe.kF)(r.get("color")),n=(0,Xe.kF)(r.get(["aria","decal","decals"]));if(!!e){a=a||[];var o,s;g.S6(a,function(h){var v=new Xn.Z(h),d=v.get("color"),m=v.get("decal");(v.get(["itemStyle","color"])||d&&d!=="none")&&(o=!0),(v.get(["itemStyle","decal"])||m&&m!=="none")&&(s=!0)});var u=a[0]||(a[0]={});return o||(u.color=e.slice()),!s&&n&&(u.decal=n.slice()),a}}var cg=fg,yo=F(4130),vg=8,ov=8,$f=5,Js=function(){function a(r){this.group=new Mr.Z,r.add(this.group)}return a.prototype.render=function(r,e,n,o){var s=r.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!s.get("show")||!n)){var h=s.getModel("itemStyle"),v=h.getModel("textStyle"),d={pos:{left:s.get("left"),right:s.get("right"),top:s.get("top"),bottom:s.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:s.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,d,v),this._renderContent(r,d,h,v,o),Kr.p$(u,d.pos,d.box)}},a.prototype._prepare=function(r,e,n){for(var o=r;o;o=o.parentNode){var s=(0,Xe.U5)(o.getModel().get("name"),""),u=n.getTextRect(s),h=Math.max(u.width+vg*2,e.emptyItemWidth);e.totalWidth+=h+ov,e.renderList.push({node:o,text:s,width:h})}},a.prototype._renderContent=function(r,e,n,o,s){for(var u=0,h=e.emptyItemWidth,v=r.get(["breadcrumb","height"]),d=Kr.lq(e.pos,e.box),m=e.totalWidth,_=e.renderList,S=_.length-1;S>=0;S--){var b=_[S],P=b.node,R=b.width,Y=b.text;m>d.width&&(m-=R-h,R=h,Y=null);var nt=new Ln.Z({shape:{points:sv(u,0,R,v,S===_.length-1,S===0)},style:(0,g.ce)(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new ee.ZP({style:{text:Y,fill:o.getTextColor(),font:o.getFont()}}),textConfig:{position:"inside"},z2:ir.zr*1e4,onclick:(0,g.WA)(s,P)});nt.disableLabelAnimation=!0,this.group.add(nt),Qs(nt,r,P),u+=R+ov}},a.prototype.remove=function(){this.group.removeAll()},a}();function sv(a,r,e,n,o,s){var u=[[o?a:a-$f,r],[a+e,r],[a+e,r+n],[o?a:a-$f,r+n]];return!s&&u.splice(2,0,[a+e+$f,r+n/2]),!o&&u.push([a,r+n/2]),u}function Qs(a,r,e){(0,Hr.A)(a).eventData={componentType:"series",componentSubType:"treemap",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&js(e,r)}}var dg=Js,pg=function(){function a(){this._storage=[],this._elExistsMap={}}return a.prototype.add=function(r,e,n,o,s){return this._elExistsMap[r.id]?!1:(this._elExistsMap[r.id]=!0,this._storage.push({el:r,target:e,duration:n,delay:o,easing:s}),!0)},a.prototype.finished=function(r){return this._finishedCallback=r,this},a.prototype.start=function(){for(var r=this,e=this._storage.length,n=function(){e--,e<=0&&(r._storage.length=0,r._elExistsMap={},r._finishedCallback&&r._finishedCallback())},o=0,s=this._storage.length;o<s;o++){var u=this._storage[o];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:n,aborted:n})}return this},a}();function lv(){return new pg}var qf=F(59066),os=Mr.Z,$s=on.Z,uv=3,fv="label",hv="upperLabel",gg=ir.zr*10,mg=ir.zr*2,yg=ir.zr*3,ss=(0,qf.Z)([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),cv=function(a){var r=ss(a);return r.stroke=r.fill=r.lineWidth=null,r},Ou=(0,Xe.Yf)(),_g=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._state="ready",e._storage=ls(),e}return r.prototype.render=function(e,n,o,s){var u=n.findComponents({mainType:"series",subType:"treemap",query:s});if(!((0,g.cq)(u,e)<0)){this.seriesModel=e,this.api=o,this.ecModel=n;var h=["treemapZoomToNode","treemapRootToNode"],v=as(s,h,e),d=s&&s.type,m=e.layoutInfo,_=!this._oldTree,S=this._storage,b=d==="treemapRootToNode"&&v&&S?{rootNodeGroup:S.nodeGroup[v.node.getRawIndex()],direction:s.direction}:null,P=this._giveContainerGroup(m),R=e.get("animation"),Y=this._doRender(P,e,b);R&&!_&&(!d||d==="treemapZoomToNode"||d==="treemapRootToNode")?this._doAnimation(P,Y,e,b):Y.renderFinally(),this._resetController(o),this._renderBreadcrumb(e,o,v)}},r.prototype._giveContainerGroup=function(e){var n=this._containerGroup;return n||(n=this._containerGroup=new os,this._initEvents(n),this.group.add(n)),n.x=e.x,n.y=e.y,n},r.prototype._doRender=function(e,n,o){var s=n.getData().tree,u=this._oldTree,h=ls(),v=ls(),d=this._storage,m=[];function _(Y,nt,pt,mt){return xg(n,v,d,o,h,m,Y,nt,pt,mt)}b(s.root?[s.root]:[],u&&u.root?[u.root]:[],e,s===u||!u,0);var S=P(d);return this._oldTree=s,this._storage=v,{lastsForAnimation:h,willDeleteEls:S,renderFinally:R};function b(Y,nt,pt,mt,bt){mt?(nt=Y,(0,g.S6)(Y,function(Ot,kt){!Ot.isRemoved()&&Pt(kt,kt)})):new yo.Z(nt,Y,Lt,Lt).add(Pt).update(Pt).remove((0,g.WA)(Pt,null)).execute();function Lt(Ot){return Ot.getId()}function Pt(Ot,kt){var jt=Ot!=null?Y[Ot]:null,re=kt!=null?nt[kt]:null,ae=_(jt,re,pt,bt);ae&&b(jt&&jt.viewChildren||[],re&&re.viewChildren||[],ae,mt,bt+1)}}function P(Y){var nt=ls();return Y&&(0,g.S6)(Y,function(pt,mt){var bt=nt[mt];(0,g.S6)(pt,function(Lt){Lt&&(bt.push(Lt),Ou(Lt).willDelete=!0)})}),nt}function R(){(0,g.S6)(S,function(Y){(0,g.S6)(Y,function(nt){nt.parent&&nt.parent.remove(nt)})}),(0,g.S6)(m,function(Y){Y.invisible=!0,Y.dirty()})}},r.prototype._doAnimation=function(e,n,o,s){var u=o.get("animationDurationUpdate"),h=o.get("animationEasing"),v=((0,g.mf)(u)?0:u)||0,d=((0,g.mf)(h)?null:h)||"cubicOut",m=lv();(0,g.S6)(n.willDeleteEls,function(_,S){(0,g.S6)(_,function(b,P){if(!b.invisible){var R=b.parent,Y,nt=Ou(R);if(s&&s.direction==="drillDown")Y=R===s.rootNodeGroup?{shape:{x:0,y:0,width:nt.nodeWidth,height:nt.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var pt=0,mt=0;nt.willDelete||(pt=nt.nodeWidth/2,mt=nt.nodeHeight/2),Y=S==="nodeGroup"?{x:pt,y:mt,style:{opacity:0}}:{shape:{x:pt,y:mt,width:0,height:0},style:{opacity:0}}}Y&&m.add(b,Y,v,0,d)}})}),(0,g.S6)(this._storage,function(_,S){(0,g.S6)(_,function(b,P){var R=n.lastsForAnimation[S][P],Y={};!R||(b instanceof Mr.Z?R.oldX!=null&&(Y.x=b.x,Y.y=b.y,b.x=R.oldX,b.y=R.oldY):(R.oldShape&&(Y.shape=(0,g.l7)({},b.shape),b.setShape(R.oldShape)),R.fadein?(b.setStyle("opacity",0),Y.style={opacity:1}):b.style.opacity!==1&&(Y.style={opacity:1})),m.add(b,Y,v,0,d))})},this),this._state="animating",m.finished((0,g.ak)(function(){this._state="ready",n.renderFinally()},this)).start()},r.prototype._resetController=function(e){var n=this._controller;n||(n=this._controller=new ho(e.getZr()),n.enable(this.seriesModel.get("roam")),n.on("pan",(0,g.ak)(this._onPan,this)),n.on("zoom",(0,g.ak)(this._onZoom,this)));var o=new Dr.Z(0,0,e.getWidth(),e.getHeight());n.setPointerChecker(function(s,u,h){return o.contain(u,h)})},r.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},r.prototype._onPan=function(e){if(this._state!=="animating"&&(Math.abs(e.dx)>uv||Math.abs(e.dy)>uv)){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},r.prototype._onZoom=function(e){var n=e.originX,o=e.originY;if(this._state!=="animating"){var s=this.seriesModel.getData().tree.root;if(!s)return;var u=s.getLayout();if(!u)return;var h=new Dr.Z(u.x,u.y,u.width,u.height),v=this.seriesModel.layoutInfo;n-=v.x,o-=v.y;var d=gn.Ue();gn.Iu(d,d,[-n,-o]),gn.bA(d,d,[e.scale,e.scale]),gn.Iu(d,d,[n,o]),h.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},r.prototype._initEvents=function(e){var n=this;e.on("click",function(o){if(n._state==="ready"){var s=n.seriesModel.get("nodeClick",!0);if(!!s){var u=n.findTarget(o.offsetX,o.offsetY);if(!!u){var h=u.node;if(h.getLayout().isLeafRoot)n._rootToNode(u);else if(s==="zoomToNode")n._zoomToNode(u);else if(s==="link"){var v=h.hostTree.data.getItemModel(h.dataIndex),d=v.get("link",!0),m=v.get("target",!0)||"blank";d&&(0,Cn.MI)(d,m)}}}}},this)},r.prototype._renderBreadcrumb=function(e,n,o){var s=this;o||(o=e.get("leafDepth",!0)!=null?{node:e.getViewRoot()}:this.findTarget(n.getWidth()/2,n.getHeight()/2),o||(o={node:e.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new dg(this.group))).render(e,n,o.node,function(u){s._state!=="animating"&&(jf(e.getViewRoot(),u)?s._rootToNode({node:u}):s._zoomToNode({node:u}))})},r.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=ls(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},r.prototype.dispose=function(){this._clearController()},r.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},r.prototype.findTarget=function(e,n){var o,s=this.seriesModel.getViewRoot();return s.eachNode({attr:"viewChildren",order:"preorder"},function(u){var h=this._storage.background[u.getRawIndex()];if(h){var v=h.transformCoordToLocal(e,n),d=h.shape;if(d.x<=v[0]&&v[0]<=d.x+d.width&&d.y<=v[1]&&v[1]<=d.y+d.height)o={node:u,offsetX:v[0],offsetY:v[1]};else return!1}},this),o},r.type="treemap",r}(vn.Z);function ls(){return{nodeGroup:[],background:[],content:[]}}function xg(a,r,e,n,o,s,u,h,v,d){if(!u)return;var m=u.getLayout(),_=a.getData(),S=u.getModel();if(_.setItemGraphicEl(u.dataIndex,null),!m||!m.isInView)return;var b=m.width,P=m.height,R=m.borderWidth,Y=m.invisible,nt=u.getRawIndex(),pt=h&&h.getRawIndex(),mt=u.viewChildren,bt=m.upperHeight,Lt=mt&&mt.length,Pt=S.getModel("itemStyle"),Ot=S.getModel(["emphasis","itemStyle"]),kt=S.getModel(["blur","itemStyle"]),jt=S.getModel(["select","itemStyle"]),re=Pt.get("borderRadius")||0,ae=fn("nodeGroup",os);if(!ae)return;if(v.add(ae),ae.x=m.x||0,ae.y=m.y||0,ae.markRedraw(),Ou(ae).nodeWidth=b,Ou(ae).nodeHeight=P,m.isAboveViewRoot)return ae;var he=fn("background",$s,d,mg);he&&$e(ae,he,Lt&&m.upperLabelHeight);var me=S.getModel("emphasis"),Te=me.get("focus"),be=me.get("blurScope"),Fe=me.get("disabled"),Ye=Te==="ancestor"?u.getAncestorsIndices():Te==="descendant"?u.getDescendantIndices():Te;if(Lt)(0,ir.Av)(ae)&&(0,ir.Nj)(ae,!1),he&&((0,ir.Nj)(he,!Fe),_.setItemGraphicEl(u.dataIndex,he),(0,ir.Ib)(he,Ye,be));else{var Ue=fn("content",$s,d,yg);Ue&&Sr(ae,Ue),he.disableMorphing=!0,he&&(0,ir.Av)(he)&&(0,ir.Nj)(he,!1),(0,ir.Nj)(ae,!Fe),_.setItemGraphicEl(u.dataIndex,ae),(0,ir.Ib)(ae,Ye,be)}return ae;function $e(an,Ur,Sn){var mn=(0,Hr.A)(Ur);if(mn.dataIndex=u.dataIndex,mn.seriesIndex=a.seriesIndex,Ur.setShape({x:0,y:0,width:b,height:P,r:re}),Y)Ar(Ur);else{Ur.invisible=!1;var wn=u.getVisual("style"),Ci=wn.stroke,Ni=cv(Pt);Ni.fill=Ci;var Zn=ss(Ot);Zn.fill=Ot.get("borderColor");var Ti=ss(kt);Ti.fill=kt.get("borderColor");var gi=ss(jt);if(gi.fill=jt.get("borderColor"),Sn){var Yi=b-2*R;Wr(Ur,Ci,wn.opacity,{x:R,y:0,width:Yi,height:bt})}else Ur.removeTextContent();Ur.setStyle(Ni),Ur.ensureState("emphasis").style=Zn,Ur.ensureState("blur").style=Ti,Ur.ensureState("select").style=gi,(0,ir.MA)(Ur)}an.add(Ur)}function Sr(an,Ur){var Sn=(0,Hr.A)(Ur);Sn.dataIndex=u.dataIndex,Sn.seriesIndex=a.seriesIndex;var mn=Math.max(b-2*R,0),wn=Math.max(P-2*R,0);if(Ur.culling=!0,Ur.setShape({x:R,y:R,width:mn,height:wn,r:re}),Y)Ar(Ur);else{Ur.invisible=!1;var Ci=u.getVisual("style"),Ni=Ci.fill,Zn=cv(Pt);Zn.fill=Ni,Zn.decal=Ci.decal;var Ti=ss(Ot),gi=ss(kt),Yi=ss(jt);Wr(Ur,Ni,Ci.opacity,null),Ur.setStyle(Zn),Ur.ensureState("emphasis").style=Ti,Ur.ensureState("blur").style=gi,Ur.ensureState("select").style=Yi,(0,ir.MA)(Ur)}an.add(Ur)}function Ar(an){!an.invisible&&s.push(an)}function Wr(an,Ur,Sn,mn){var wn=S.getModel(mn?hv:fv),Ci=(0,Xe.U5)(S.get("name"),null),Ni=wn.getShallow("show");(0,or.ni)(an,(0,or.k3)(S,mn?hv:fv),{defaultText:Ni?Ci:null,inheritColor:Ur,defaultOpacity:Sn,labelFetcher:a,labelDataIndex:u.dataIndex});var Zn=an.getTextContent();if(!!Zn){var Ti=Zn.style,gi=(0,g.MY)(Ti.padding||0);mn&&(an.setTextConfig({layoutRect:mn}),Zn.disableLabelLayout=!0),Zn.beforeUpdate=function(){var ws=Math.max((mn?mn.width:an.shape.width)-gi[1]-gi[3],0),fa=Math.max((mn?mn.height:an.shape.height)-gi[0]-gi[2],0);(Ti.width!==ws||Ti.height!==fa)&&Zn.setStyle({width:ws,height:fa})},Ti.truncateMinChar=2,Ti.lineOverflow="truncate",jr(Ti,mn,m);var Yi=Zn.getState("emphasis");jr(Yi?Yi.style:null,mn,m)}}function jr(an,Ur,Sn){var mn=an?an.text:null;if(!Ur&&Sn.isLeafRoot&&mn!=null){var wn=a.get("drillDownIcon",!0);an.text=wn?wn+" "+mn:mn}}function fn(an,Ur,Sn,mn){var wn=pt!=null&&e[an][pt],Ci=o[an];return wn?(e[an][pt]=null,zn(Ci,wn)):Y||(wn=new Ur,wn instanceof go.ZP&&(wn.z2=Nu(Sn,mn)),En(Ci,wn)),r[an][nt]=wn}function zn(an,Ur){var Sn=an[nt]={};Ur instanceof os?(Sn.oldX=Ur.x,Sn.oldY=Ur.y):Sn.oldShape=(0,g.l7)({},Ur.shape)}function En(an,Ur){var Sn=an[nt]={},mn=u.parentNode,wn=Ur instanceof Mr.Z;if(mn&&(!n||n.direction==="drillDown")){var Ci=0,Ni=0,Zn=o.background[mn.getRawIndex()];!n&&Zn&&Zn.oldShape&&(Ci=Zn.oldShape.width,Ni=Zn.oldShape.height),wn?(Sn.oldX=0,Sn.oldY=Ni):Sn.oldShape={x:Ci,y:Ni,width:0,height:0}}Sn.fadein=!wn}}function Nu(a,r){return a*gg+r}var Sg=_g,ci=g.S6,us=g.Kn,Gl=-1,th=function(){function a(r){var e=r.mappingMethod,n=r.type,o=this.option=g.d9(r);this.type=n,this.mappingMethod=e,this._normalizeData=Gu[e];var s=a.visualHandlers[n];this.applyVisual=s.applyVisual,this.getColorMapper=s.getColorMapper,this._normalizedToVisual=s._normalizedToVisual[e],e==="piecewise"?(Bu(o),Ul(o)):e==="category"?o.categories?Tg(o):Bu(o,!0):(g.hu(e!=="linear"||o.dataExtent),Bu(o))}return a.prototype.mapValueToVisual=function(r){var e=this._normalizeData(r);return this._normalizedToVisual(e,r)},a.prototype.getNormalizer=function(){return g.ak(this._normalizeData,this)},a.listVisualTypes=function(){return g.XP(a.visualHandlers)},a.isValidType=function(r){return a.visualHandlers.hasOwnProperty(r)},a.eachVisual=function(r,e,n){g.Kn(r)?g.S6(r,e,n):e.call(n,r)},a.mapVisual=function(r,e,n){var o,s=g.kJ(r)?[]:g.Kn(r)?{}:(o=!0,null);return a.eachVisual(r,function(u,h){var v=e.call(n,u,h);o?s=v:s[h]=v}),s},a.retrieveVisuals=function(r){var e={},n;return r&&ci(a.visualHandlers,function(o,s){r.hasOwnProperty(s)&&(e[s]=r[s],n=!0)}),n?e:null},a.prepareVisualTypes=function(r){if(g.kJ(r))r=r.slice();else if(us(r)){var e=[];ci(r,function(n,o){e.push(o)}),r=e}else return[];return r.sort(function(n,o){return o==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),r},a.dependsOn=function(r,e){return e==="color"?!!(r&&r.indexOf(e)===0):r===e},a.findPieceIndex=function(r,e,n){for(var o,s=1/0,u=0,h=e.length;u<h;u++){var v=e[u].value;if(v!=null){if(v===r||g.HD(v)&&v===r+"")return u;n&&S(v,u)}}for(var u=0,h=e.length;u<h;u++){var d=e[u],m=d.interval,_=d.close;if(m){if(m[0]===-1/0){if(ja(_[1],r,m[1]))return u}else if(m[1]===1/0){if(ja(_[0],m[0],r))return u}else if(ja(_[0],m[0],r)&&ja(_[1],r,m[1]))return u;n&&S(m[0],u),n&&S(m[1],u)}}if(n)return r===1/0?e.length-1:r===-1/0?0:o;function S(b,P){var R=Math.abs(b-r);R<s&&(s=R,o=P)}},a.visualHandlers={color:{applyVisual:fs("color"),getColorMapper:function(){var r=this.option;return g.ak(r.mappingMethod==="category"?function(e,n){return!n&&(e=this._normalizeData(e)),hs.call(this,e)}:function(e,n,o){var s=!!o;return!n&&(e=this._normalizeData(e)),o=Rn.fastLerp(e,r.parsedVisual,o),s?o:Rn.stringify(o,"rgba")},this)},_normalizedToVisual:{linear:function(r){return Rn.stringify(Rn.fastLerp(r,this.option.parsedVisual),"rgba")},category:hs,piecewise:function(r,e){var n=tl.call(this,e);return n==null&&(n=Rn.stringify(Rn.fastLerp(r,this.option.parsedVisual),"rgba")),n},fixed:Ka}},colorHue:kl(function(r,e){return Rn.modifyHSL(r,e)}),colorSaturation:kl(function(r,e){return Rn.modifyHSL(r,null,e)}),colorLightness:kl(function(r,e){return Rn.modifyHSL(r,null,null,e)}),colorAlpha:kl(function(r,e){return Rn.modifyAlpha(r,e)}),decal:{applyVisual:fs("decal"),_normalizedToVisual:{linear:null,category:hs,piecewise:null,fixed:null}},opacity:{applyVisual:fs("opacity"),_normalizedToVisual:Fu([0,1])},liftZ:{applyVisual:fs("liftZ"),_normalizedToVisual:{linear:Ka,category:Ka,piecewise:Ka,fixed:Ka}},symbol:{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("symbol",o)},_normalizedToVisual:{linear:qs,category:hs,piecewise:function(r,e){var n=tl.call(this,e);return n==null&&(n=qs.call(this,r)),n},fixed:Ka}},symbolSize:{applyVisual:fs("symbolSize"),_normalizedToVisual:Fu([0,1])}},a}();function Ul(a){var r=a.pieceList;a.hasSpecialVisual=!1,g.S6(r,function(e,n){e.originIndex=n,e.visual!=null&&(a.hasSpecialVisual=!0)})}function Tg(a){var r=a.categories,e=a.categoryMap={},n=a.visual;if(ci(r,function(u,h){e[u]=h}),!g.kJ(n)){var o=[];g.Kn(n)?ci(n,function(u,h){var v=e[h];o[v??Gl]=u}):o[Gl]=n,n=zu(a,o)}for(var s=r.length-1;s>=0;s--)n[s]==null&&(delete e[r[s]],r.pop())}function Bu(a,r){var e=a.visual,n=[];g.Kn(e)?ci(e,function(s){n.push(s)}):e!=null&&n.push(e);var o={color:1,symbol:1};!r&&n.length===1&&!o.hasOwnProperty(a.type)&&(n[1]=n[0]),zu(a,n)}function kl(a){return{applyVisual:function(r,e,n){var o=this.mapValueToVisual(r);n("color",a(e("color"),o))},_normalizedToVisual:Fu([0,1])}}function qs(a){var r=this.option.visual;return r[Math.round((0,Ie.NU)(a,[0,1],[0,r.length-1],!0))]||{}}function fs(a){return function(r,e,n){n(a,this.mapValueToVisual(r))}}function hs(a){var r=this.option.visual;return r[this.option.loop&&a!==Gl?a%r.length:a]}function Ka(){return this.option.visual[0]}function Fu(a){return{linear:function(r){return(0,Ie.NU)(r,a,this.option.visual,!0)},category:hs,piecewise:function(r,e){var n=tl.call(this,e);return n==null&&(n=(0,Ie.NU)(r,a,this.option.visual,!0)),n},fixed:Ka}}function tl(a){var r=this.option,e=r.pieceList;if(r.hasSpecialVisual){var n=th.findPieceIndex(a,e),o=e[n];if(o&&o.visual)return o.visual[this.type]}}function zu(a,r){return a.visual=r,a.type==="color"&&(a.parsedVisual=g.UI(r,function(e){var n=Rn.parse(e);return n||[0,0,0,1]})),r}var Gu={linear:function(a){return(0,Ie.NU)(a,this.option.dataExtent,[0,1],!0)},piecewise:function(a){var r=this.option.pieceList,e=th.findPieceIndex(a,r,!0);if(e!=null)return(0,Ie.NU)(e,[0,r.length-1],[0,1],!0)},category:function(a){var r=this.option.categories?this.option.categoryMap[a]:a;return r??Gl},fixed:g.ZT};function ja(a,r,e){return a?r<=e:r<e}var xi=th,vv="itemStyle",eh=(0,Xe.Yf)(),rh={seriesType:"treemap",reset:function(a){var r=a.getData().tree,e=r.root;e.isRemoved()||dv(e,{},a.getViewRoot().getAncestors(),a)}};function dv(a,r,e,n){var o=a.getModel(),s=a.getLayout(),u=a.hostTree.data;if(!(!s||s.invisible||!s.isInView)){var h=o.getModel(vv),v=wg(h,r,n),d=u.ensureUniqueItemVisual(a.dataIndex,"style"),m=h.get("borderColor"),_=h.get("borderColorSaturation"),S;_!=null&&(S=oi(v),m=vi(_,S)),d.stroke=m;var b=a.viewChildren;if(!b||!b.length)S=oi(v),d.fill=S;else{var P=pv(a,o,s,h,v,b);(0,g.S6)(b,function(R,Y){if(R.depth>=e.length||R===e[R.depth]){var nt=nh(o,v,R,Y,P,n);dv(R,nt,e,n)}})}}}function wg(a,r,e){var n=(0,g.l7)({},r),o=e.designatedVisualItemStyle;return(0,g.S6)(["color","colorAlpha","colorSaturation"],function(s){o[s]=r[s];var u=a.get(s);o[s]=null,u!=null&&(n[s]=u)}),n}function oi(a){var r=Uu(a,"color");if(r){var e=Uu(a,"colorAlpha"),n=Uu(a,"colorSaturation");return n&&(r=(0,Rn.modifyHSL)(r,null,null,n)),e&&(r=(0,Rn.modifyAlpha)(r,e)),r}}function vi(a,r){return r!=null?(0,Rn.modifyHSL)(r,null,null,a):null}function Uu(a,r){var e=a[r];if(e!=null&&e!=="none")return e}function pv(a,r,e,n,o,s){if(!(!s||!s.length)){var u=Ja(r,"color")||o.color!=null&&o.color!=="none"&&(Ja(r,"colorAlpha")||Ja(r,"colorSaturation"));if(!!u){var h=r.get("visualMin"),v=r.get("visualMax"),d=e.dataExtent.slice();h!=null&&h<d[0]&&(d[0]=h),v!=null&&v>d[1]&&(d[1]=v);var m=r.get("colorMappingBy"),_={type:u.name,dataExtent:d,visual:u.range};_.type==="color"&&(m==="index"||m==="id")?(_.mappingMethod="category",_.loop=!0):_.mappingMethod="linear";var S=new xi(_);return eh(S).drColorMappingBy=m,S}}}function Ja(a,r){var e=a.get(r);return(0,g.kJ)(e)&&e.length?{name:r,range:e}:null}function nh(a,r,e,n,o,s){var u=(0,g.l7)({},r);if(o){var h=o.type,v=h==="color"&&eh(o).drColorMappingBy,d=v==="index"?n:v==="id"?s.mapIdToIndex(e.getId()):e.getValue(a.get("visualDimension"));u[h]=o.mapValueToVisual(d)}return u}var Si=Math.max,el=Math.min,Vl=g.Jv,ih=g.S6,gv=["itemStyle","borderWidth"],Dg=["itemStyle","gapWidth"],Ag=["upperLabel","show"],bg=["upperLabel","height"],rl={seriesType:"treemap",reset:function(a,r,e,n){var o=e.getWidth(),s=e.getHeight(),u=a.option,h=Kr.ME(a.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),v=u.size||[],d=(0,Ie.GM)(Vl(h.width,v[0]),o),m=(0,Ie.GM)(Vl(h.height,v[1]),s),_=n&&n.type,S=["treemapZoomToNode","treemapRootToNode"],b=as(n,S,a),P=_==="treemapRender"||_==="treemapMove"?n.rootRect:null,R=a.getViewRoot(),Y=qr(R);if(_!=="treemapMove"){var nt=_==="treemapZoomToNode"?_v(a,b,R,d,m):P?[P.width,P.height]:[d,m],pt=u.sort;pt&&pt!=="asc"&&pt!=="desc"&&(pt="desc");var mt={squareRatio:u.squareRatio,sort:pt,leafDepth:u.leafDepth};R.hostTree.clearLayouts();var bt={x:0,y:0,width:nt[0],height:nt[1],area:nt[0]*nt[1]};R.setLayout(bt),mv(R,mt,!1,0),bt=R.getLayout(),ih(Y,function(Pt,Ot){var kt=(Y[Ot+1]||R).getValue();Pt.setLayout(g.l7({dataExtent:[kt,kt],borderWidth:0,upperHeight:0},bt))})}var Lt=a.getData().tree.root;Lt.setLayout(xv(h,P,b),!0),a.setLayoutInfo(h),sh(Lt,new Dr.Z(-h.x,-h.y,o,s),Y,R,0)}};function mv(a,r,e,n){var o,s;if(!a.isRemoved()){var u=a.getLayout();o=u.width,s=u.height;var h=a.getModel(),v=h.get(gv),d=h.get(Dg)/2,m=lh(h),_=Math.max(v,m),S=v-d,b=_-d;a.setLayout({borderWidth:v,upperHeight:_,upperLabelHeight:m},!0),o=Si(o-2*S,0),s=Si(s-S-b,0);var P=o*s,R=ah(a,h,P,r,e,n);if(!!R.length){var Y={x:S,y:b,width:o,height:s},nt=el(o,s),pt=1/0,mt=[];mt.area=0;for(var bt=0,Lt=R.length;bt<Lt;){var Pt=R[bt];mt.push(Pt),mt.area+=Pt.getLayout().area;var Ot=cy(mt,nt,r.squareRatio);Ot<=pt?(bt++,pt=Ot):(mt.area-=mt.pop().getLayout().area,oh(mt,nt,Y,d,!1),nt=el(Y.width,Y.height),mt.length=mt.area=0,pt=1/0)}if(mt.length&&oh(mt,nt,Y,d,!0),!e){var kt=h.get("childrenVisibleMin");kt!=null&&P<kt&&(e=!0)}for(var bt=0,Lt=R.length;bt<Lt;bt++)mv(R[bt],r,e,n+1)}}}function ah(a,r,e,n,o,s){var u=a.children||[],h=n.sort;h!=="asc"&&h!=="desc"&&(h=null);var v=n.leafDepth!=null&&n.leafDepth<=s;if(o&&!v)return a.viewChildren=[];u=g.hX(u,function(b){return!b.isRemoved()}),Mg(u,h);var d=Eg(r,u,h);if(d.sum===0)return a.viewChildren=[];if(d.sum=yv(r,e,d.sum,h,u),d.sum===0)return a.viewChildren=[];for(var m=0,_=u.length;m<_;m++){var S=u[m].getValue()/d.sum*e;u[m].setLayout({area:S})}return v&&(u.length&&a.setLayout({isLeafRoot:!0},!0),u.length=0),a.viewChildren=u,a.setLayout({dataExtent:d.dataExtent},!0),u}function yv(a,r,e,n,o){if(!n)return e;for(var s=a.get("visibleMin"),u=o.length,h=u,v=u-1;v>=0;v--){var d=o[n==="asc"?u-v-1:v].getValue();d/e*r<s&&(h=v,e-=d)}return n==="asc"?o.splice(0,u-h):o.splice(h,u-h),e}function Mg(a,r){return r&&a.sort(function(e,n){var o=r==="asc"?e.getValue()-n.getValue():n.getValue()-e.getValue();return o===0?r==="asc"?e.dataIndex-n.dataIndex:n.dataIndex-e.dataIndex:o}),a}function Eg(a,r,e){for(var n=0,o=0,s=r.length;o<s;o++)n+=r[o].getValue();var u=a.get("visualDimension"),h;return!r||!r.length?h=[NaN,NaN]:u==="value"&&e?(h=[r[r.length-1].getValue(),r[0].getValue()],e==="asc"&&h.reverse()):(h=[1/0,-1/0],ih(r,function(v){var d=v.getValue(u);d<h[0]&&(h[0]=d),d>h[1]&&(h[1]=d)})),{sum:n,dataExtent:h}}function cy(a,r,e){for(var n=0,o=1/0,s=0,u=void 0,h=a.length;s<h;s++)u=a[s].getLayout().area,u&&(u<o&&(o=u),u>n&&(n=u));var v=a.area*a.area,d=r*r*e;return v?Si(d*n/v,v/(d*o)):1/0}function oh(a,r,e,n,o){var s=r===e.width?0:1,u=1-s,h=["x","y"],v=["width","height"],d=e[h[s]],m=r?a.area/r:0;(o||m>e[v[u]])&&(m=e[v[u]]);for(var _=0,S=a.length;_<S;_++){var b=a[_],P={},R=m?b.getLayout().area/m:0,Y=P[v[u]]=Si(m-2*n,0),nt=e[h[s]]+e[v[s]]-d,pt=_===S-1||nt<R?nt:R,mt=P[v[s]]=Si(pt-2*n,0);P[h[u]]=e[h[u]]+el(n,Y/2),P[h[s]]=d+el(n,mt/2),d+=pt,b.setLayout(P,!0)}e[h[u]]+=m,e[v[u]]-=m}function _v(a,r,e,n,o){var s=(r||{}).node,u=[n,o];if(!s||s===e)return u;for(var h,v=n*o,d=v*a.option.zoomToNodeRatio;h=s.parentNode;){for(var m=0,_=h.children,S=0,b=_.length;S<b;S++)m+=_[S].getValue();var P=s.getValue();if(P===0)return u;d*=m/P;var R=h.getModel(),Y=R.get(gv),nt=Math.max(Y,lh(R));d+=4*Y*Y+(3*Y+nt)*Math.pow(d,.5),d>Ie.YM&&(d=Ie.YM),s=h}d<v&&(d=v);var pt=Math.pow(d/v,.5);return[n*pt,o*pt]}function xv(a,r,e){if(r)return{x:r.x,y:r.y};var n={x:0,y:0};if(!e)return n;var o=e.node,s=o.getLayout();if(!s)return n;for(var u=[s.width/2,s.height/2],h=o;h;){var v=h.getLayout();u[0]+=v.x,u[1]+=v.y,h=h.parentNode}return{x:a.width/2-u[0],y:a.height/2-u[1]}}function sh(a,r,e,n,o){var s=a.getLayout(),u=e[o],h=u&&u===a;if(!(u&&!h||o===e.length&&a!==n)){a.setLayout({isInView:!0,invisible:!h&&!r.intersect(s),isAboveViewRoot:h},!0);var v=new Dr.Z(r.x-s.x,r.y-s.y,r.width,r.height);ih(a.viewChildren||[],function(d){sh(d,v,e,n,o+1)})}}function lh(a){return a.get(Ag)?a.get(bg):0}function cs(a){a.registerSeriesModel(cg),a.registerChartView(Sg),a.registerVisual(rh),a.registerLayout(rl),av(a)}function Cg(a){var r=a.findComponents({mainType:"legend"});!r||!r.length||a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getGraph(),s=o.data,u=n.mapArray(n.getName);s.filterSelf(function(h){var v=s.getItemModel(h),d=v.getShallow("category");if(d!=null){(0,g.hj)(d)&&(d=u[d]);for(var m=0;m<r.length;m++)if(!r[m].isSelected(d))return!1}return!0})})}function Sv(a){var r={};a.eachSeriesByType("graph",function(e){var n=e.getCategoriesData(),o=e.getData(),s={};n.each(function(u){var h=n.getName(u);s["ec-"+h]=u;var v=n.getItemModel(u),d=v.getModel("itemStyle").getItemStyle();d.fill||(d.fill=e.getColorFromPalette(h,r)),n.setItemVisual(u,"style",d);for(var m=["symbol","symbolSize","symbolKeepAspect"],_=0;_<m.length;_++){var S=v.getShallow(m[_],!0);S!=null&&n.setItemVisual(u,m[_],S)}}),n.count()&&o.each(function(u){var h=o.getItemModel(u),v=h.getShallow("category");if(v!=null){(0,g.HD)(v)&&(v=s["ec-"+v]);var d=n.getItemVisual(v,"style"),m=o.ensureUniqueItemVisual(u,"style");(0,g.l7)(m,d);for(var _=["symbol","symbolSize","symbolKeepAspect"],S=0;S<_.length;S++)o.setItemVisual(u,_[S],n.getItemVisual(v,_[S]))}})})}function zi(a){return a instanceof Array||(a=[a,a]),a}function Qa(a){a.eachSeriesByType("graph",function(r){var e=r.getGraph(),n=r.getEdgeData(),o=zi(r.get("edgeSymbol")),s=zi(r.get("edgeSymbolSize"));n.setVisual("fromSymbol",o&&o[0]),n.setVisual("toSymbol",o&&o[1]),n.setVisual("fromSymbolSize",s&&s[0]),n.setVisual("toSymbolSize",s&&s[1]),n.setVisual("style",r.getModel("lineStyle").getLineStyle()),n.each(function(u){var h=n.getItemModel(u),v=e.getEdgeByIndex(u),d=zi(h.getShallow("symbol",!0)),m=zi(h.getShallow("symbolSize",!0)),_=h.getModel("lineStyle").getLineStyle(),S=n.ensureUniqueItemVisual(u,"style");switch((0,g.l7)(S,_),S.stroke){case"source":{var b=v.node1.getVisual("style");S.stroke=b&&b.fill;break}case"target":{var b=v.node2.getVisual("style");S.stroke=b&&b.fill;break}}d[0]&&v.setVisual("fromSymbol",d[0]),d[1]&&v.setVisual("toSymbol",d[1]),m[0]&&v.setVisual("fromSymbolSize",m[0]),m[1]&&v.setVisual("toSymbolSize",m[1])})})}var ku="-->",Zl=function(a){return a.get("autoCurveness")||null},uh=function(a,r){var e=Zl(a),n=20,o=[];if(g.hj(e))n=e;else if(g.kJ(e)){a.__curvenessList=e;return}r>n&&(n=r);var s=n%2?n+2:n+3;o=[];for(var u=0;u<s;u++)o.push((u%2?u+1:u)/10*(u%2?-1:1));a.__curvenessList=o},_a=function(a,r,e){var n=[a.id,a.dataIndex].join("."),o=[r.id,r.dataIndex].join(".");return[e.uid,n,o].join(ku)},Tv=function(a){var r=a.split(ku);return[r[0],r[2],r[1]].join(ku)},Pg=function(a,r){var e=_a(a.node1,a.node2,r);return r.__edgeMap[e]},Lg=function(a,r){var e=fh(_a(a.node1,a.node2,r),r),n=fh(_a(a.node2,a.node1,r),r);return e+n},fh=function(a,r){var e=r.__edgeMap;return e[a]?e[a].length:0};function Ig(a){!Zl(a)||(a.__curvenessList=[],a.__edgeMap={},uh(a))}function Vu(a,r,e,n){if(!!Zl(e)){var o=_a(a,r,e),s=e.__edgeMap,u=s[Tv(o)];s[o]&&!u?s[o].isForward=!0:u&&s[o]&&(u.isForward=!0,s[o].isForward=!1),s[o]=s[o]||[],s[o].push(n)}}function hh(a,r,e,n){var o=Zl(r),s=g.kJ(o);if(!o)return null;var u=Pg(a,r);if(!u)return null;for(var h=-1,v=0;v<u.length;v++)if(u[v]===e){h=v;break}var d=Lg(a,r);uh(r,d),a.lineStyle=a.lineStyle||{};var m=_a(a.node1,a.node2,r),_=r.__curvenessList,S=s||d%2?0:1;if(u.isForward)return _[S+h];var b=Tv(m),P=fh(b,r),R=_[h+P+S];return n?s?o&&o[0]===0?(P+S)%2?R:-R:((P%2?0:1)+S)%2?R:-R:(P+S)%2?R:-R:_[h+P+S]}function wv(a){var r=a.coordinateSystem;if(!(r&&r.type!=="view")){var e=a.getGraph();e.eachNode(function(n){var o=n.getModel();n.setLayout([+o.get("x"),+o.get("y")])}),Dv(e,a)}}function Dv(a,r){a.eachEdge(function(e,n){var o=g.R1(e.getModel().get(["lineStyle","curveness"]),-hh(e,r,n,!0),0),s=Or.d9(e.node1.getLayout()),u=Or.d9(e.node2.getLayout()),h=[s,u];+o&&h.push([(s[0]+u[0])/2-(s[1]-u[1])*o,(s[1]+u[1])/2-(u[0]-s[0])*o]),e.setLayout(h)})}function Rg(a,r){a.eachSeriesByType("graph",function(e){var n=e.get("layout"),o=e.coordinateSystem;if(o&&o.type!=="view"){var s=e.getData(),u=[];(0,g.S6)(o.dimensions,function(S){u=u.concat(s.mapDimensionsAll(S))});for(var h=0;h<s.count();h++){for(var v=[],d=!1,m=0;m<u.length;m++){var _=s.get(u[m],h);isNaN(_)||(d=!0),v.push(_)}d?s.setItemLayout(h,o.dataToPoint(v)):s.setItemLayout(h,[NaN,NaN])}Dv(s.graph,e)}else(!n||n==="none")&&wv(e)})}function Wl(a){var r=a.coordinateSystem;if(r.type!=="view")return 1;var e=a.option.nodeScaleRatio,n=r.scaleX,o=r.getZoom(),s=(o-1)*e+1;return s/n}function Hl(a){var r=a.getVisual("symbolSize");return r instanceof Array&&(r=(r[0]+r[1])/2),+r}var Av=Math.PI,ch=[];function vh(a,r){var e=a.coordinateSystem;if(!(e&&e.type!=="view")){var n=e.getBoundingRect(),o=a.getData(),s=o.graph,u=n.width/2+n.x,h=n.height/2+n.y,v=Math.min(n.width,n.height)/2,d=o.count();o.setLayout({cx:u,cy:h}),d&&(Og[r](a,s,o,v,u,h,d),s.eachEdge(function(m,_){var S=g.R1(m.getModel().get(["lineStyle","curveness"]),hh(m,a,_),0),b=Or.d9(m.node1.getLayout()),P=Or.d9(m.node2.getLayout()),R,Y=(b[0]+P[0])/2,nt=(b[1]+P[1])/2;+S&&(S*=3,R=[u*S+Y*(1-S),h*S+nt*(1-S)]),m.setLayout([b,P,R])}))}}var Og={value:function(a,r,e,n,o,s,u){var h=0,v=e.getSum("value"),d=Math.PI*2/(v||u);r.eachNode(function(m){var _=m.getValue("value"),S=d*(v?_:1)/2;h+=S,m.setLayout([n*Math.cos(h)+o,n*Math.sin(h)+s]),h+=S})},symbolSize:function(a,r,e,n,o,s,u){var h=0;ch.length=u;var v=Wl(a);r.eachNode(function(_){var S=Hl(_);isNaN(S)&&(S=2),S<0&&(S=0),S*=v;var b=Math.asin(S/2/n);isNaN(b)&&(b=Av/2),ch[_.dataIndex]=b,h+=b*2});var d=(2*Av-h)/u/2,m=0;r.eachNode(function(_){var S=d+ch[_.dataIndex];m+=S,_.setLayout([n*Math.cos(m)+o,n*Math.sin(m)+s]),m+=S})}};function Ng(a){a.eachSeriesByType("graph",function(r){r.get("layout")==="circular"&&vh(r,"symbolSize")})}var nl=Or.od;function Bg(a,r,e){for(var n=a,o=r,s=e.rect,u=s.width,h=s.height,v=[s.x+u/2,s.y+h/2],d=e.gravity==null?.1:e.gravity,m=0;m<n.length;m++){var _=n[m];_.p||(_.p=Or.Ue(u*(Math.random()-.5)+v[0],h*(Math.random()-.5)+v[1])),_.pp=Or.d9(_.p),_.edges=null}var S=e.friction==null?.6:e.friction,b=S,P,R;return{warmUp:function(){b=S*.8},setFixed:function(Y){n[Y].fixed=!0},setUnfixed:function(Y){n[Y].fixed=!1},beforeStep:function(Y){P=Y},afterStep:function(Y){R=Y},step:function(Y){P&&P(n,o);for(var nt=[],pt=n.length,mt=0;mt<o.length;mt++){var bt=o[mt];if(!bt.ignoreForceLayout){var Lt=bt.n1,Pt=bt.n2;Or.lu(nt,Pt.p,Lt.p);var Ot=Or.Zh(nt)-bt.d,kt=Pt.w/(Lt.w+Pt.w);isNaN(kt)&&(kt=0),Or.Fv(nt,nt),!Lt.fixed&&nl(Lt.p,Lt.p,nt,kt*Ot*b),!Pt.fixed&&nl(Pt.p,Pt.p,nt,-(1-kt)*Ot*b)}}for(var mt=0;mt<pt;mt++){var jt=n[mt];jt.fixed||(Or.lu(nt,v,jt.p),nl(jt.p,jt.p,nt,d*b))}for(var mt=0;mt<pt;mt++)for(var Lt=n[mt],re=mt+1;re<pt;re++){var Pt=n[re];Or.lu(nt,Pt.p,Lt.p);var Ot=Or.Zh(nt);Ot===0&&(Or.t8(nt,Math.random()-.5,Math.random()-.5),Ot=1);var ae=(Lt.rep+Pt.rep)/Ot/Ot;!Lt.fixed&&nl(Lt.pp,Lt.pp,nt,ae),!Pt.fixed&&nl(Pt.pp,Pt.pp,nt,-ae)}for(var he=[],mt=0;mt<pt;mt++){var jt=n[mt];jt.fixed||(Or.lu(he,jt.p,jt.pp),nl(jt.p,jt.p,he,b),Or.JG(jt.pp,jt.p))}b=b*.992;var me=b<.01;R&&R(n,o,me),Y&&Y(me)}}}function dh(a){a.eachSeriesByType("graph",function(r){var e=r.coordinateSystem;if(!(e&&e.type!=="view"))if(r.get("layout")==="force"){var n=r.preservedPoints||{},o=r.getGraph(),s=o.data,u=o.edgeData,h=r.getModel("force"),v=h.get("initLayout");r.preservedPoints?s.each(function(mt){var bt=s.getId(mt);s.setItemLayout(mt,n[bt]||[NaN,NaN])}):!v||v==="none"?wv(r):v==="circular"&&vh(r,"value");var d=s.getDataExtent("value"),m=u.getDataExtent("value"),_=h.get("repulsion"),S=h.get("edgeLength"),b=g.kJ(_)?_:[_,_],P=g.kJ(S)?S:[S,S];P=[P[1],P[0]];var R=s.mapArray("value",function(mt,bt){var Lt=s.getItemLayout(bt),Pt=(0,Ie.NU)(mt,d,b);return isNaN(Pt)&&(Pt=(b[0]+b[1])/2),{w:Pt,rep:Pt,fixed:s.getItemModel(bt).get("fixed"),p:!Lt||isNaN(Lt[0])||isNaN(Lt[1])?null:Lt}}),Y=u.mapArray("value",function(mt,bt){var Lt=o.getEdgeByIndex(bt),Pt=(0,Ie.NU)(mt,m,P);isNaN(Pt)&&(Pt=(P[0]+P[1])/2);var Ot=Lt.getModel(),kt=g.R1(Lt.getModel().get(["lineStyle","curveness"]),-hh(Lt,r,bt,!0),0);return{n1:R[Lt.node1.dataIndex],n2:R[Lt.node2.dataIndex],d:Pt,curveness:kt,ignoreForceLayout:Ot.get("ignoreForceLayout")}}),nt=e.getBoundingRect(),pt=Bg(R,Y,{rect:nt,gravity:h.get("gravity"),friction:h.get("friction")});pt.beforeStep(function(mt,bt){for(var Lt=0,Pt=mt.length;Lt<Pt;Lt++)mt[Lt].fixed&&Or.JG(mt[Lt].p,o.getNodeByIndex(Lt).getLayout())}),pt.afterStep(function(mt,bt,Lt){for(var Pt=0,Ot=mt.length;Pt<Ot;Pt++)mt[Pt].fixed||o.getNodeByIndex(Pt).setLayout(mt[Pt].p),n[s.getId(Pt)]=mt[Pt].p;for(var Pt=0,Ot=bt.length;Pt<Ot;Pt++){var kt=bt[Pt],jt=o.getEdgeByIndex(Pt),re=kt.n1.p,ae=kt.n2.p,he=jt.getLayout();he=he?he.slice():[],he[0]=he[0]||[],he[1]=he[1]||[],Or.JG(he[0],re),Or.JG(he[1],ae),+kt.curveness&&(he[2]=[(re[0]+ae[0])/2-(re[1]-ae[1])*kt.curveness,(re[1]+ae[1])/2-(ae[0]-re[0])*kt.curveness]),jt.setLayout(he)}}),r.forceLayout=pt,r.preservedPoints=n,pt.step()}else r.forceLayout=null})}function bv(a,r,e){var n=(0,g.l7)(a.getBoxLayoutParams(),{aspect:e});return(0,Kr.ME)(n,{width:r.getWidth(),height:r.getHeight()})}function Fg(a,r){var e=[];return a.eachSeriesByType("graph",function(n){var o=n.get("coordinateSystem");if(!o||o==="view"){var s=n.getData(),u=s.mapArray(function(Y){var nt=s.getItemModel(Y);return[+nt.get("x"),+nt.get("y")]}),h=[],v=[];sa.zk(u,h,v),v[0]-h[0]===0&&(v[0]+=1,h[0]-=1),v[1]-h[1]===0&&(v[1]+=1,h[1]-=1);var d=(v[0]-h[0])/(v[1]-h[1]),m=bv(n,r,d);isNaN(d)&&(h=[m.x,m.y],v=[m.x+m.width,m.y+m.height]);var _=v[0]-h[0],S=v[1]-h[1],b=m.width,P=m.height,R=n.coordinateSystem=new Fl;R.zoomLimit=n.get("scaleLimit"),R.setBoundingRect(h[0],h[1],_,S),R.setViewRect(m.x,m.y,b,P),R.setCenter(n.get("center"),r),R.setZoom(n.get("zoom")),e.push(R)}}),e}var Mv=Mi.Z.prototype,ph=jc.Z.prototype,Ev=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return a}(),vy=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r}(Ev);function gh(a){return isNaN(+a.cpx1)||isNaN(+a.cpy1)}var Cv=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="ec-line",n}return r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new Ev},r.prototype.buildPath=function(e,n){gh(n)?Mv.buildPath.call(this,e,n):ph.buildPath.call(this,e,n)},r.prototype.pointAt=function(e){return gh(this.shape)?Mv.pointAt.call(this,e):ph.pointAt.call(this,e)},r.prototype.tangentAt=function(e){var n=this.shape,o=gh(n)?[n.x2-n.x1,n.y2-n.y1]:ph.tangentAt.call(this,e);return Or.Fv(o,o)},r}(dt.ZP),mh=Cv,yh=["fromSymbol","toSymbol"];function $a(a){return"_"+a+"Type"}function _h(a,r,e){var n=r.getItemVisual(e,a);if(!(!n||n==="none")){var o=r.getItemVisual(e,a+"Size"),s=r.getItemVisual(e,a+"Rotate"),u=r.getItemVisual(e,a+"Offset"),h=r.getItemVisual(e,a+"KeepAspect"),v=Rr.zp(o),d=Rr.Cq(u||0,v),m=Rr.th(n,-v[0]/2+d[0],-v[1]/2+d[1],v[0],v[1],null,h);return m.__specifiedRotation=s==null||isNaN(s)?void 0:+s*Math.PI/180||0,m.name=a,m}}function zg(a){var r=new mh({name:"line",subPixelOptimize:!0});return Zu(r.shape,a),r}function Zu(a,r){a.x1=r[0][0],a.y1=r[0][1],a.x2=r[1][0],a.y2=r[1][1],a.percent=1;var e=r[2];e?(a.cpx1=e[0],a.cpy1=e[1]):(a.cpx1=NaN,a.cpy1=NaN)}var dy=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createLine(e,n,o),s}return r.prototype._createLine=function(e,n,o){var s=e.hostModel,u=e.getItemLayout(n),h=zg(u);h.shape.percent=0,cr.KZ(h,{shape:{percent:1}},s,n),this.add(h),(0,g.S6)(yh,function(v){var d=_h(v,e,n);this.add(d),this[$a(v)]=e.getItemVisual(n,v)},this),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),h=e.getItemLayout(n),v={shape:{}};Zu(v.shape,h),cr.D(u,v,s,n),(0,g.S6)(yh,function(d){var m=e.getItemVisual(n,d),_=$a(d);if(this[_]!==m){this.remove(this.childOfName(d));var S=_h(d,e,n);this.add(S)}this[_]=m},this),this._updateCommonStl(e,n,o)},r.prototype.getLinePath=function(){return this.childAt(0)},r.prototype._updateCommonStl=function(e,n,o){var s=e.hostModel,u=this.childOfName("line"),h=o&&o.emphasisLineStyle,v=o&&o.blurLineStyle,d=o&&o.selectLineStyle,m=o&&o.labelStatesModels,_=o&&o.emphasisDisabled,S=o&&o.focus,b=o&&o.blurScope;if(!o||e.hasItemOption){var P=e.getItemModel(n),R=P.getModel("emphasis");h=R.getModel("lineStyle").getLineStyle(),v=P.getModel(["blur","lineStyle"]).getLineStyle(),d=P.getModel(["select","lineStyle"]).getLineStyle(),_=R.get("disabled"),S=R.get("focus"),b=R.get("blurScope"),m=(0,or.k3)(P)}var Y=e.getItemVisual(n,"style"),nt=Y.stroke;u.useStyle(Y),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=h,u.ensureState("blur").style=v,u.ensureState("select").style=d,(0,g.S6)(yh,function(Pt){var Ot=this.childOfName(Pt);if(Ot){Ot.setColor(nt),Ot.style.opacity=Y.opacity;for(var kt=0;kt<ir.L1.length;kt++){var jt=ir.L1[kt],re=u.getState(jt);if(re){var ae=re.style||{},he=Ot.ensureState(jt),me=he.style||(he.style={});ae.stroke!=null&&(me[Ot.__isEmptyBrush?"stroke":"fill"]=ae.stroke),ae.opacity!=null&&(me.opacity=ae.opacity)}}Ot.markRedraw()}},this);var pt=s.getRawValue(n);(0,or.ni)(this,m,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(Pt,Ot){return s.getFormattedLabel(Pt,Ot,e.dataType)}},inheritColor:nt||"#000",defaultOpacity:Y.opacity,defaultText:(pt==null?e.getName(n):isFinite(pt)?(0,Ie.NM)(pt):pt)+""});var mt=this.getTextContent();if(mt){var bt=m.normal;mt.__align=mt.style.align,mt.__verticalAlign=mt.style.verticalAlign,mt.__position=bt.get("position")||"middle";var Lt=bt.get("distance");(0,g.kJ)(Lt)||(Lt=[Lt,Lt]),mt.__labelDistance=Lt}this.setTextConfig({position:null,local:!0,inside:!1}),(0,ir.k5)(this,S,b,_)},r.prototype.highlight=function(){(0,ir.fD)(this)},r.prototype.downplay=function(){(0,ir.Mh)(this)},r.prototype.updateLayout=function(e,n){this.setLinePoints(e.getItemLayout(n))},r.prototype.setLinePoints=function(e){var n=this.childOfName("line");Zu(n.shape,e),n.dirty()},r.prototype.beforeUpdate=function(){var e=this,n=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),s=e.getTextContent();if(!n&&!o&&(!s||s.ignore))return;for(var u=1,h=this.parent;h;)h.scaleX&&(u/=h.scaleX),h=h.parent;var v=e.childOfName("line");if(!this.__dirty&&!v.__dirty)return;var d=v.shape.percent,m=v.pointAt(0),_=v.pointAt(d),S=Or.lu([],_,m);Or.Fv(S,S);function b(re,ae){var he=re.__specifiedRotation;if(he==null){var me=v.tangentAt(ae);re.attr("rotation",(ae===1?-1:1)*Math.PI/2-Math.atan2(me[1],me[0]))}else re.attr("rotation",he)}if(n&&(n.setPosition(m),b(n,0),n.scaleX=n.scaleY=u*d,n.markRedraw()),o&&(o.setPosition(_),b(o,1),o.scaleX=o.scaleY=u*d,o.markRedraw()),s&&!s.ignore){s.x=s.y=0,s.originX=s.originY=0;var P=void 0,R=void 0,Y=s.__labelDistance,nt=Y[0]*u,pt=Y[1]*u,mt=d/2,bt=v.tangentAt(mt),Lt=[bt[1],-bt[0]],Pt=v.pointAt(mt);Lt[1]>0&&(Lt[0]=-Lt[0],Lt[1]=-Lt[1]);var Ot=bt[0]<0?-1:1;if(s.__position!=="start"&&s.__position!=="end"){var kt=-Math.atan2(bt[1],bt[0]);_[0]<m[0]&&(kt=Math.PI+kt),s.rotation=kt}var jt=void 0;switch(s.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":jt=-pt,R="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":jt=pt,R="top";break;default:jt=0,R="middle"}switch(s.__position){case"end":s.x=S[0]*nt+_[0],s.y=S[1]*pt+_[1],P=S[0]>.8?"left":S[0]<-.8?"right":"center",R=S[1]>.8?"top":S[1]<-.8?"bottom":"middle";break;case"start":s.x=-S[0]*nt+m[0],s.y=-S[1]*pt+m[1],P=S[0]>.8?"right":S[0]<-.8?"left":"center",R=S[1]>.8?"bottom":S[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":s.x=nt*Ot+m[0],s.y=m[1]+jt,P=bt[0]<0?"right":"left",s.originX=-nt*Ot,s.originY=-jt;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":s.x=Pt[0],s.y=Pt[1]+jt,P="center",s.originY=-jt;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":s.x=-nt*Ot+_[0],s.y=_[1]+jt,P=bt[0]>=0?"right":"left",s.originX=nt*Ot,s.originY=-jt;break}s.scaleX=s.scaleY=u,s.setStyle({verticalAlign:s.__verticalAlign||R,align:s.__align||P})}},r}(Mr.Z),xh=dy,_o=function(){function a(r){this.group=new Mr.Z,this._LineCtor=r||xh}return a.prototype.updateData=function(r){var e=this;this._progressiveEls=null;var n=this,o=n.group,s=n._lineData;n._lineData=r,s||o.removeAll();var u=Wu(r);r.diff(s).add(function(h){e._doAdd(r,h,u)}).update(function(h,v){e._doUpdate(s,r,v,h,u)}).remove(function(h){o.remove(s.getItemGraphicEl(h))}).execute()},a.prototype.updateLayout=function(){var r=this._lineData;!r||r.eachItemGraphicEl(function(e,n){e.updateLayout(r,n)},this)},a.prototype.incrementalPrepareUpdate=function(r){this._seriesScope=Wu(r),this._lineData=null,this.group.removeAll()},a.prototype.incrementalUpdate=function(r,e){this._progressiveEls=[];function n(h){!h.isGroup&&!Xl(h)&&(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var o=r.start;o<r.end;o++){var s=e.getItemLayout(o);if(xo(s)){var u=new this._LineCtor(e,o,this._seriesScope);u.traverse(n),this.group.add(u),e.setItemGraphicEl(o,u),this._progressiveEls.push(u)}}},a.prototype.remove=function(){this.group.removeAll()},a.prototype.eachRendered=function(r){br.traverseElements(this._progressiveEls||this.group,r)},a.prototype._doAdd=function(r,e,n){var o=r.getItemLayout(e);if(!!xo(o)){var s=new this._LineCtor(r,e,n);r.setItemGraphicEl(e,s),this.group.add(s)}},a.prototype._doUpdate=function(r,e,n,o,s){var u=r.getItemGraphicEl(n);if(!xo(e.getItemLayout(o))){this.group.remove(u);return}u?u.updateData(e,o,s):u=new this._LineCtor(e,o,s),e.setItemGraphicEl(o,u),this.group.add(u)},a}();function Xl(a){return a.animators&&a.animators.length>0}function Wu(a){var r=a.hostModel,e=r.getModel("emphasis");return{lineStyle:r.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:r.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:r.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:(0,or.k3)(r)}}function Gi(a){return isNaN(a[0])||isNaN(a[1])}function xo(a){return a&&!Gi(a[0])&&!Gi(a[1])}var Yl=_o,il=[],vs=[],Sh=[],ds=xr.Zm,Th=Or.WU,Pv=Math.abs;function Lv(a,r,e){for(var n=a[0],o=a[1],s=a[2],u=1/0,h,v=e*e,d=.1,m=.1;m<=.9;m+=.1){il[0]=ds(n[0],o[0],s[0],m),il[1]=ds(n[1],o[1],s[1],m);var _=Pv(Th(il,r)-v);_<u&&(u=_,h=m)}for(var S=0;S<32;S++){var b=h+d;vs[0]=ds(n[0],o[0],s[0],h),vs[1]=ds(n[1],o[1],s[1],h),Sh[0]=ds(n[0],o[0],s[0],b),Sh[1]=ds(n[1],o[1],s[1],b);var _=Th(vs,r)-v;if(Pv(_)<.01)break;var P=Th(Sh,r)-v;d/=2,_<0?P>=0?h=h+d:h=h-d:P>=0?h=h-d:h=h+d}return h}function Hu(a,r){var e=[],n=xr.Lx,o=[[],[],[]],s=[[],[]],u=[];r/=2,a.eachEdge(function(h,v){var d=h.getLayout(),m=h.getVisual("fromSymbol"),_=h.getVisual("toSymbol");d.__original||(d.__original=[Or.d9(d[0]),Or.d9(d[1])],d[2]&&d.__original.push(Or.d9(d[2])));var S=d.__original;if(d[2]!=null){if(Or.JG(o[0],S[0]),Or.JG(o[1],S[2]),Or.JG(o[2],S[1]),m&&m!=="none"){var b=Hl(h.node1),P=Lv(o,S[0],b*r);n(o[0][0],o[1][0],o[2][0],P,e),o[0][0]=e[3],o[1][0]=e[4],n(o[0][1],o[1][1],o[2][1],P,e),o[0][1]=e[3],o[1][1]=e[4]}if(_&&_!=="none"){var b=Hl(h.node2),P=Lv(o,S[1],b*r);n(o[0][0],o[1][0],o[2][0],P,e),o[1][0]=e[1],o[2][0]=e[2],n(o[0][1],o[1][1],o[2][1],P,e),o[1][1]=e[1],o[2][1]=e[2]}Or.JG(d[0],o[0]),Or.JG(d[1],o[2]),Or.JG(d[2],o[1])}else{if(Or.JG(s[0],S[0]),Or.JG(s[1],S[1]),Or.lu(u,s[1],s[0]),Or.Fv(u,u),m&&m!=="none"){var b=Hl(h.node1);Or.od(s[0],s[0],u,b*r)}if(_&&_!=="none"){var b=Hl(h.node2);Or.od(s[1],s[1],u,-b*r)}Or.JG(d[0],s[0]),Or.JG(d[1],s[1])}})}function Xu(a){return a.type==="view"}var Gg=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){var o=new ra,s=new Yl,u=this.group;this._controller=new ho(n.getZr()),this._controllerHost={target:u},u.add(o.group),u.add(s.group),this._symbolDraw=o,this._lineDraw=s,this._firstRender=!0},r.prototype.render=function(e,n,o){var s=this,u=e.coordinateSystem;this._model=e;var h=this._symbolDraw,v=this._lineDraw,d=this.group;if(Xu(u)){var m={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?d.attr(m):cr.D(d,m,e)}Hu(e.getGraph(),Wl(e));var _=e.getData();h.updateData(_);var S=e.getEdgeData();v.updateData(S),this._updateNodeAndLinkScale(),this._updateController(e,n,o),clearTimeout(this._layoutTimeout);var b=e.forceLayout,P=e.get(["force","layoutAnimation"]);b&&this._startForceLayoutIteration(b,P),_.graph.eachNode(function(pt){var mt=pt.dataIndex,bt=pt.getGraphicEl(),Lt=pt.getModel();if(!!bt){bt.off("drag").off("dragend");var Pt=Lt.get("draggable");Pt&&bt.on("drag",function(){b&&(b.warmUp(),!s._layouting&&s._startForceLayoutIteration(b,P),b.setFixed(mt),_.setItemLayout(mt,[bt.x,bt.y]))}).on("dragend",function(){b&&b.setUnfixed(mt)}),bt.setDraggable(Pt&&!!b,!!Lt.get("cursor"));var Ot=Lt.get(["emphasis","focus"]);Ot==="adjacency"&&((0,Hr.A)(bt).focus=pt.getAdjacentDataIndices())}}),_.graph.eachEdge(function(pt){var mt=pt.getGraphicEl(),bt=pt.getModel().get(["emphasis","focus"]);!mt||bt==="adjacency"&&((0,Hr.A)(mt).focus={edge:[pt.dataIndex],node:[pt.node1.dataIndex,pt.node2.dataIndex]})});var R=e.get("layout")==="circular"&&e.get(["circular","rotateLabel"]),Y=_.getLayout("cx"),nt=_.getLayout("cy");_.eachItemGraphicEl(function(pt,mt){var bt=_.getItemModel(mt),Lt=bt.get(["label","rotate"])||0,Pt=pt.getSymbolPath();if(R){var Ot=_.getItemLayout(mt),kt=Math.atan2(Ot[1]-nt,Ot[0]-Y);kt<0&&(kt=Math.PI*2+kt);var jt=Ot[0]<Y;jt&&(kt=kt-Math.PI);var re=jt?"left":"right";Pt.setTextConfig({rotation:-kt,position:re,origin:"center"});var ae=Pt.ensureState("emphasis");g.l7(ae.textConfig||(ae.textConfig={}),{position:re})}else Pt.setTextConfig({rotation:Lt*=Math.PI/180})}),this._firstRender=!1},r.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},r.prototype._startForceLayoutIteration=function(e,n){var o=this;(function s(){e.step(function(u){o.updateLayout(o._model),(o._layouting=!u)&&(n?o._layoutTimeout=setTimeout(s,16):s())})})()},r.prototype._updateController=function(e,n,o){var s=this,u=this._controller,h=this._controllerHost,v=this.group;if(u.setPointerChecker(function(d,m,_){var S=v.getBoundingRect();return S.applyTransform(v.transform),S.contain(m,_)&&!co(d,o,e)}),!Xu(e.coordinateSystem)){u.disable();return}u.enable(e.get("roam")),h.zoomLimit=e.get("scaleLimit"),h.zoom=e.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(d){Mf(h,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){Tu(h,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),s._updateNodeAndLinkScale(),Hu(e.getGraph(),Wl(e)),s._lineDraw.updateLayout(),o.updateLabelLayout()})},r.prototype._updateNodeAndLinkScale=function(){var e=this._model,n=e.getData(),o=Wl(e);n.eachItemGraphicEl(function(s,u){s&&s.setSymbolScale(o)})},r.prototype.updateLayout=function(e){Hu(e.getGraph(),Wl(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},r.type="graph",r}(vn.Z),So=Gg,Iv=F(85446),Rv=F(54267);function Ov(a,r,e,n,o){for(var s=new Iv.ZP(n),u=0;u<a.length;u++)s.addNode(g.Jv(a[u].id,a[u].name,u),u);for(var h=[],v=[],d=0,u=0;u<r.length;u++){var m=r[u],_=m.source,S=m.target;s.addEdge(_,S,d)&&(v.push(m),h.push(g.Jv((0,Xe.U5)(m.id,null),_+" > "+S)),d++)}var b=e.get("coordinateSystem"),P;if(b==="cartesian2d"||b==="polar")P=(0,Er.Z)(a,e);else{var R=Rv.Z.get(b),Y=R?R.dimensions||[]:[];g.cq(Y,"value")<0&&Y.concat(["value"]);var nt=(0,ar.Z)(a,{coordDimensions:Y,encodeDefine:e.getEncode()}).dimensions;P=new ue.Z(nt,e),P.initData(a)}var pt=new ue.Z(["value"],e);return pt.initData(v,h),o&&o(P,pt),(0,ev.Z)({mainData:P,struct:s,structAttr:"graph",datas:{node:P,edge:pt},datasAttr:{node:"data",edge:"edgeData"}}),s.update(),s}var Ug=F(53993),kg=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments);var n=this;function o(){return n._categoriesData}this.legendVisualProvider=new Ze(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},r.prototype.mergeDefaultAndTheme=function(e){a.prototype.mergeDefaultAndTheme.apply(this,arguments),(0,Xe.Cc)(e,"edgeLabel",["show"])},r.prototype.getInitialData=function(e,n){var o=e.edges||e.links||[],s=e.data||e.nodes||[],u=this;if(s&&o){Ig(this);var h=Ov(s,o,this,!0,v);return g.S6(h.edges,function(d){Vu(d.node1,d.node2,this,d.dataIndex)},this),h.data}function v(d,m){d.wrapMethod("getItemModel",function(P){var R=u._categoriesModels,Y=P.getShallow("category"),nt=R[Y];return nt&&(nt.parentModel=P.parentModel,P.parentModel=nt),P});var _=Xn.Z.prototype.getModel;function S(P,R){var Y=_.call(this,P,R);return Y.resolveParentPath=b,Y}m.wrapMethod("getItemModel",function(P){return P.resolveParentPath=b,P.getModel=S,P});function b(P){if(P&&(P[0]==="label"||P[1]==="label")){var R=P.slice();return P[0]==="label"?R[0]="edgeLabel":P[1]==="label"&&(R[1]="edgeLabel"),R}return P}}},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.getCategoriesData=function(){return this._categoriesData},r.prototype.formatTooltip=function(e,n,o){if(o==="edge"){var s=this.getData(),u=this.getDataParams(e,o),h=s.graph.getEdgeByIndex(e),v=s.getName(h.node1.dataIndex),d=s.getName(h.node2.dataIndex),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),(0,Nn.TX)("nameValue",{name:m.join(" > "),value:u.value,noValue:u.value==null})}var _=(0,Ug.w)({series:this,dataIndex:e,multipleSeries:n});return _},r.prototype._updateCategoriesData=function(){var e=g.UI(this.option.categories||[],function(o){return o.value!=null?o:g.l7({value:0},o)}),n=new ue.Z(["value"],this);n.initData(e),this._categoriesData=n,this._categoriesModels=n.mapArray(function(o){return n.getItemModel(o)})},r.prototype.setZoom=function(e){this.option.zoom=e},r.prototype.setCenter=function(e){this.option.center=e},r.prototype.isAnimationEnabled=function(){return a.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},r.type="series.graph",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(xe.Z),Kl=kg,Vg={type:"graphRoam",event:"graphRoam",update:"none"};function Zg(a){a.registerChartView(So),a.registerSeriesModel(Kl),a.registerProcessor(Cg),a.registerVisual(Sv),a.registerVisual(Qa),a.registerLayout(Rg),a.registerLayout(a.PRIORITY.VISUAL.POST_CHART_LAYOUT,Ng),a.registerLayout(dh),a.registerCoordinateSystem("graphView",{dimensions:Fl.dimensions,create:Fg}),a.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},g.ZT),a.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},g.ZT),a.registerAction(Vg,function(r,e,n){e.eachComponent({mainType:"series",query:r},function(o){var s=o.coordinateSystem,u=Pu(s,r,void 0,n);o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom)})})}var Wg=function(){function a(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return a}(),Hg=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="pointer",n}return r.prototype.getDefaultShape=function(){return new Wg},r.prototype.buildPath=function(e,n){var o=Math.cos,s=Math.sin,u=n.r,h=n.width,v=n.angle,d=n.x-o(v)*h*(h>=u/3?1:2),m=n.y-s(v)*h*(h>=u/3?1:2);v=n.angle-Math.PI/2,e.moveTo(d,m),e.lineTo(n.x+o(v)*h,n.y+s(v)*h),e.lineTo(n.x+o(n.angle)*u,n.y+s(n.angle)*u),e.lineTo(n.x-o(v)*h,n.y-s(v)*h),e.lineTo(d,m)},r}(dt.ZP),Xg=Hg;function Yg(a,r){var e=a.get("center"),n=r.getWidth(),o=r.getHeight(),s=Math.min(n,o),u=(0,Ie.GM)(e[0],r.getWidth()),h=(0,Ie.GM)(e[1],r.getHeight()),v=(0,Ie.GM)(a.get("radius"),s/2);return{cx:u,cy:h,r:v}}function Yu(a,r){var e=a==null?"":a+"";return r&&((0,g.HD)(r)?e=r.replace("{value}",e):(0,g.mf)(r)&&(e=r(a))),e}var Kg=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeAll();var s=e.get(["axisLine","lineStyle","color"]),u=Yg(e,o);this._renderMain(e,n,o,s,u),this._data=e.getData()},r.prototype.dispose=function(){},r.prototype._renderMain=function(e,n,o,s,u){var h=this.group,v=e.get("clockwise"),d=-e.get("startAngle")/180*Math.PI,m=-e.get("endAngle")/180*Math.PI,_=e.getModel("axisLine"),S=_.get("roundCap"),b=S?Oo:Di.C,P=_.get("show"),R=_.getModel("lineStyle"),Y=R.get("width"),nt=[d,m];(0,ft.L)(nt,!v),d=nt[0],m=nt[1];for(var pt=m-d,mt=d,bt=0;P&&bt<s.length;bt++){var Lt=Math.min(Math.max(s[bt][0],0),1);m=d+pt*Lt;var Pt=new b({shape:{startAngle:mt,endAngle:m,cx:u.cx,cy:u.cy,clockwise:v,r0:u.r-Y,r:u.r},silent:!0});Pt.setStyle({fill:s[bt][1]}),Pt.setStyle(R.getLineStyle(["color","width"])),h.add(Pt),mt=m}var Ot=function(kt){if(kt<=0)return s[0][1];var jt;for(jt=0;jt<s.length;jt++)if(s[jt][0]>=kt&&(jt===0?0:s[jt-1][0])<kt)return s[jt][1];return s[jt-1][1]};this._renderTicks(e,n,o,Ot,u,d,m,v,Y),this._renderTitleAndDetail(e,n,o,Ot,u),this._renderAnchor(e,u),this._renderPointer(e,n,o,Ot,u,d,m,v,Y)},r.prototype._renderTicks=function(e,n,o,s,u,h,v,d,m){for(var _=this.group,S=u.cx,b=u.cy,P=u.r,R=+e.get("min"),Y=+e.get("max"),nt=e.getModel("splitLine"),pt=e.getModel("axisTick"),mt=e.getModel("axisLabel"),bt=e.get("splitNumber"),Lt=pt.get("splitNumber"),Pt=(0,Ie.GM)(nt.get("length"),P),Ot=(0,Ie.GM)(pt.get("length"),P),kt=h,jt=(v-h)/bt,re=jt/Lt,ae=nt.getModel("lineStyle").getLineStyle(),he=pt.getModel("lineStyle").getLineStyle(),me=nt.get("distance"),Te,be,Fe=0;Fe<=bt;Fe++){if(Te=Math.cos(kt),be=Math.sin(kt),nt.get("show")){var Ye=me?me+m:m,Ue=new Mi.Z({shape:{x1:Te*(P-Ye)+S,y1:be*(P-Ye)+b,x2:Te*(P-Pt-Ye)+S,y2:be*(P-Pt-Ye)+b},style:ae,silent:!0});ae.stroke==="auto"&&Ue.setStyle({stroke:s(Fe/bt)}),_.add(Ue)}if(mt.get("show")){var Ye=mt.get("distance")+me,$e=Yu((0,Ie.NM)(Fe/bt*(Y-R)+R),mt.get("formatter")),Sr=s(Fe/bt);_.add(new ee.ZP({style:(0,or.Lr)(mt,{text:$e,x:Te*(P-Pt-Ye)+S,y:be*(P-Pt-Ye)+b,verticalAlign:be<-.8?"top":be>.8?"bottom":"middle",align:Te<-.4?"left":Te>.4?"right":"center"},{inheritColor:Sr}),silent:!0}))}if(pt.get("show")&&Fe!==bt){var Ye=pt.get("distance");Ye=Ye?Ye+m:m;for(var Ar=0;Ar<=Lt;Ar++){Te=Math.cos(kt),be=Math.sin(kt);var Wr=new Mi.Z({shape:{x1:Te*(P-Ye)+S,y1:be*(P-Ye)+b,x2:Te*(P-Ot-Ye)+S,y2:be*(P-Ot-Ye)+b},silent:!0,style:he});he.stroke==="auto"&&Wr.setStyle({stroke:s((Fe+Ar/Lt)/bt)}),_.add(Wr),kt+=re}kt-=re}else kt+=jt}},r.prototype._renderPointer=function(e,n,o,s,u,h,v,d,m){var _=this.group,S=this._data,b=this._progressEls,P=[],R=e.get(["pointer","show"]),Y=e.getModel("progress"),nt=Y.get("show"),pt=e.getData(),mt=pt.mapDimension("value"),bt=+e.get("min"),Lt=+e.get("max"),Pt=[bt,Lt],Ot=[h,v];function kt(re,ae){var he=pt.getItemModel(re),me=he.getModel("pointer"),Te=(0,Ie.GM)(me.get("width"),u.r),be=(0,Ie.GM)(me.get("length"),u.r),Fe=e.get(["pointer","icon"]),Ye=me.get("offsetCenter"),Ue=(0,Ie.GM)(Ye[0],u.r),$e=(0,Ie.GM)(Ye[1],u.r),Sr=me.get("keepAspect"),Ar;return Fe?Ar=(0,Rr.th)(Fe,Ue-Te/2,$e-be,Te,be,null,Sr):Ar=new Xg({shape:{angle:-Math.PI/2,width:Te,r:be,x:Ue,y:$e}}),Ar.rotation=-(ae+Math.PI/2),Ar.x=u.cx,Ar.y=u.cy,Ar}function jt(re,ae){var he=Y.get("roundCap"),me=he?Oo:Di.C,Te=Y.get("overlap"),be=Te?Y.get("width"):m/pt.count(),Fe=Te?u.r-be:u.r-(re+1)*be,Ye=Te?u.r:u.r-re*be,Ue=new me({shape:{startAngle:h,endAngle:ae,cx:u.cx,cy:u.cy,clockwise:d,r0:Fe,r:Ye}});return Te&&(Ue.z2=Lt-pt.get(mt,re)%Lt),Ue}(nt||R)&&(pt.diff(S).add(function(re){var ae=pt.get(mt,re);if(R){var he=kt(re,h);cr.KZ(he,{rotation:-((isNaN(+ae)?Ot[0]:(0,Ie.NU)(ae,Pt,Ot,!0))+Math.PI/2)},e),_.add(he),pt.setItemGraphicEl(re,he)}if(nt){var me=jt(re,h),Te=Y.get("clip");cr.KZ(me,{shape:{endAngle:(0,Ie.NU)(ae,Pt,Ot,Te)}},e),_.add(me),(0,Hr.Q)(e.seriesIndex,pt.dataType,re,me),P[re]=me}}).update(function(re,ae){var he=pt.get(mt,re);if(R){var me=S.getItemGraphicEl(ae),Te=me?me.rotation:h,be=kt(re,Te);be.rotation=Te,cr.D(be,{rotation:-((isNaN(+he)?Ot[0]:(0,Ie.NU)(he,Pt,Ot,!0))+Math.PI/2)},e),_.add(be),pt.setItemGraphicEl(re,be)}if(nt){var Fe=b[ae],Ye=Fe?Fe.shape.endAngle:h,Ue=jt(re,Ye),$e=Y.get("clip");cr.D(Ue,{shape:{endAngle:(0,Ie.NU)(he,Pt,Ot,$e)}},e),_.add(Ue),(0,Hr.Q)(e.seriesIndex,pt.dataType,re,Ue),P[re]=Ue}}).execute(),pt.each(function(re){var ae=pt.getItemModel(re),he=ae.getModel("emphasis"),me=he.get("focus"),Te=he.get("blurScope"),be=he.get("disabled");if(R){var Fe=pt.getItemGraphicEl(re),Ye=pt.getItemVisual(re,"style"),Ue=Ye.fill;if(Fe instanceof gt.ZP){var $e=Fe.style;Fe.useStyle((0,g.l7)({image:$e.image,x:$e.x,y:$e.y,width:$e.width,height:$e.height},Ye))}else Fe.useStyle(Ye),Fe.type!=="pointer"&&Fe.setColor(Ue);Fe.setStyle(ae.getModel(["pointer","itemStyle"]).getItemStyle()),Fe.style.fill==="auto"&&Fe.setStyle("fill",s((0,Ie.NU)(pt.get(mt,re),Pt,[0,1],!0))),Fe.z2EmphasisLift=0,(0,ir.WO)(Fe,ae),(0,ir.k5)(Fe,me,Te,be)}if(nt){var Sr=P[re];Sr.useStyle(pt.getItemVisual(re,"style")),Sr.setStyle(ae.getModel(["progress","itemStyle"]).getItemStyle()),Sr.z2EmphasisLift=0,(0,ir.WO)(Sr,ae),(0,ir.k5)(Sr,me,Te,be)}}),this._progressEls=P)},r.prototype._renderAnchor=function(e,n){var o=e.getModel("anchor"),s=o.get("show");if(s){var u=o.get("size"),h=o.get("icon"),v=o.get("offsetCenter"),d=o.get("keepAspect"),m=(0,Rr.th)(h,n.cx-u/2+(0,Ie.GM)(v[0],n.r),n.cy-u/2+(0,Ie.GM)(v[1],n.r),u,u,null,d);m.z2=o.get("showAbove")?1:0,m.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(m)}},r.prototype._renderTitleAndDetail=function(e,n,o,s,u){var h=this,v=e.getData(),d=v.mapDimension("value"),m=+e.get("min"),_=+e.get("max"),S=new Mr.Z,b=[],P=[],R=e.isAnimationEnabled(),Y=e.get(["pointer","showAbove"]);v.diff(this._data).add(function(nt){b[nt]=new ee.ZP({silent:!0}),P[nt]=new ee.ZP({silent:!0})}).update(function(nt,pt){b[nt]=h._titleEls[pt],P[nt]=h._detailEls[pt]}).execute(),v.each(function(nt){var pt=v.getItemModel(nt),mt=v.get(d,nt),bt=new Mr.Z,Lt=s((0,Ie.NU)(mt,[m,_],[0,1],!0)),Pt=pt.getModel("title");if(Pt.get("show")){var Ot=Pt.get("offsetCenter"),kt=u.cx+(0,Ie.GM)(Ot[0],u.r),jt=u.cy+(0,Ie.GM)(Ot[1],u.r),re=b[nt];re.attr({z2:Y?0:2,style:(0,or.Lr)(Pt,{x:kt,y:jt,text:v.getName(nt),align:"center",verticalAlign:"middle"},{inheritColor:Lt})}),bt.add(re)}var ae=pt.getModel("detail");if(ae.get("show")){var he=ae.get("offsetCenter"),me=u.cx+(0,Ie.GM)(he[0],u.r),Te=u.cy+(0,Ie.GM)(he[1],u.r),be=(0,Ie.GM)(ae.get("width"),u.r),Fe=(0,Ie.GM)(ae.get("height"),u.r),Ye=e.get(["progress","show"])?v.getItemVisual(nt,"style").fill:Lt,re=P[nt],Ue=ae.get("formatter");re.attr({z2:Y?0:2,style:(0,or.Lr)(ae,{x:me,y:Te,text:Yu(mt,Ue),width:isNaN(be)?null:be,height:isNaN(Fe)?null:Fe,align:"center",verticalAlign:"middle"},{inheritColor:Ye})}),(0,or.pe)(re,{normal:ae},mt,function(Sr){return Yu(Sr,Ue)}),R&&(0,or.tD)(re,nt,v,e,{getFormattedLabel:function(Sr,Ar,Wr,jr,fn,zn){return Yu(zn?zn.interpolatedValue:mt,Ue)}}),bt.add(re)}S.add(bt)}),this.group.add(S),this._titleEls=b,this._detailEls=P},r.type="gauge",r}(vn.Z),jg=Kg,wh=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="itemStyle",e}return r.prototype.getInitialData=function(e,n){return Me(this,["value"])},r.type="series.gauge",r.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},r}(xe.Z),Nv=wh;function Jg(a){a.registerChartView(jg),a.registerSeriesModel(Nv)}var Qg=["itemStyle","opacity"],$g=function(a){(0,fe.ZT)(r,a);function r(e,n){var o=a.call(this)||this,s=o,u=new Hi.Z,h=new ee.ZP;return s.setTextContent(h),o.setTextGuideLine(u),o.updateData(e,n,!0),o}return r.prototype.updateData=function(e,n,o){var s=this,u=e.hostModel,h=e.getItemModel(n),v=e.getItemLayout(n),d=h.getModel("emphasis"),m=h.get(Qg);m=m??1,o||(0,cr.Zi)(s),s.useStyle(e.getItemVisual(n,"style")),s.style.lineJoin="round",o?(s.setShape({points:v.points}),s.style.opacity=0,cr.KZ(s,{style:{opacity:m}},u,n)):cr.D(s,{style:{opacity:m},shape:{points:v.points}},u,n),(0,ir.WO)(s,h),this._updateLabel(e,n),(0,ir.k5)(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e,n){var o=this,s=this.getTextGuideLine(),u=o.getTextContent(),h=e.hostModel,v=e.getItemModel(n),d=e.getItemLayout(n),m=d.label,_=e.getItemVisual(n,"style"),S=_.fill;(0,or.ni)(u,(0,or.k3)(v),{labelFetcher:e.hostModel,labelDataIndex:n,defaultOpacity:_.opacity,defaultText:e.getName(n)},{normal:{align:m.textAlign,verticalAlign:m.verticalAlign}}),o.setTextConfig({local:!0,inside:!!m.inside,insideStroke:S,outsideFill:S});var b=m.linePoints;s.setShape({points:b}),o.textGuideLineConfig={anchor:b?new bi.Z(b[0][0],b[0][1]):null},cr.D(u,{style:{x:m.x,y:m.y}},h,n),u.attr({rotation:m.rotation,originX:m.x,originY:m.y,z2:10}),(0,Pn.Iu)(o,(0,Pn.$x)(v),{stroke:S})},r}(Ln.Z),qg=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreLabelLineUpdate=!0,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._data,h=this.group;s.diff(u).add(function(v){var d=new $g(s,v);s.setItemGraphicEl(v,d),h.add(d)}).update(function(v,d){var m=u.getItemGraphicEl(d);m.updateData(s,v),h.add(m),s.setItemGraphicEl(v,m)}).remove(function(v){var d=u.getItemGraphicEl(v);cr.XD(d,e,v)}).execute(),this._data=s},r.prototype.remove=function(){this.group.removeAll(),this._data=null},r.prototype.dispose=function(){},r.type="funnel",r}(vn.Z),Dh=qg,t0=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ze(g.ak(this.getData,this),g.ak(this.getRawData,this)),this._defaultLabelLine(e)},r.prototype.getInitialData=function(e,n){return Me(this,{coordDimensions:["value"],encodeDefaulter:g.WA(ye.Ss,this)})},r.prototype._defaultLabelLine=function(e){(0,Xe.Cc)(e,"labelLine",["show"]);var n=e.labelLine,o=e.emphasis.labelLine;n.show=n.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},r.prototype.getDataParams=function(e){var n=this.getData(),o=a.prototype.getDataParams.call(this,e),s=n.mapDimension("value"),u=n.getSum(s);return o.percent=u?+(n.get(s,e)/u*100).toFixed(2):0,o.$vars.push("percent"),o},r.type="series.funnel",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},r}(xe.Z),Ah=t0;function al(a,r){return Kr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function e0(a,r){for(var e=a.mapDimension("value"),n=a.mapArray(e,function(v){return v}),o=[],s=r==="ascending",u=0,h=a.count();u<h;u++)o[u]=u;return(0,g.mf)(r)?o.sort(r):r!=="none"&&o.sort(function(v,d){return s?n[v]-n[d]:n[d]-n[v]}),o}function jl(a){var r=a.hostModel,e=r.get("orient");a.each(function(n){var o=a.getItemModel(n),s=o.getModel("label"),u=s.get("position"),h=o.getModel("labelLine"),v=a.getItemLayout(n),d=v.points,m=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",_,S,b,P;if(m)u==="insideLeft"?(S=(d[0][0]+d[3][0])/2+5,b=(d[0][1]+d[3][1])/2,_="left"):u==="insideRight"?(S=(d[1][0]+d[2][0])/2-5,b=(d[1][1]+d[2][1])/2,_="right"):(S=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,b=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4,_="center"),P=[[S,b],[S,b]];else{var R=void 0,Y=void 0,nt=void 0,pt=void 0,mt=h.get("length");u==="left"?(R=(d[3][0]+d[0][0])/2,Y=(d[3][1]+d[0][1])/2,nt=R-mt,S=nt-5,_="right"):u==="right"?(R=(d[1][0]+d[2][0])/2,Y=(d[1][1]+d[2][1])/2,nt=R+mt,S=nt+5,_="left"):u==="top"?(R=(d[3][0]+d[0][0])/2,Y=(d[3][1]+d[0][1])/2,pt=Y-mt,b=pt-5,_="center"):u==="bottom"?(R=(d[1][0]+d[2][0])/2,Y=(d[1][1]+d[2][1])/2,pt=Y+mt,b=pt+5,_="center"):u==="rightTop"?(R=e==="horizontal"?d[3][0]:d[1][0],Y=e==="horizontal"?d[3][1]:d[1][1],e==="horizontal"?(pt=Y-mt,b=pt-5,_="center"):(nt=R+mt,S=nt+5,_="top")):u==="rightBottom"?(R=d[2][0],Y=d[2][1],e==="horizontal"?(pt=Y+mt,b=pt+5,_="center"):(nt=R+mt,S=nt+5,_="bottom")):u==="leftTop"?(R=d[0][0],Y=e==="horizontal"?d[0][1]:d[1][1],e==="horizontal"?(pt=Y-mt,b=pt-5,_="center"):(nt=R-mt,S=nt-5,_="right")):u==="leftBottom"?(R=e==="horizontal"?d[1][0]:d[3][0],Y=e==="horizontal"?d[1][1]:d[2][1],e==="horizontal"?(pt=Y+mt,b=pt+5,_="center"):(nt=R-mt,S=nt-5,_="right")):(R=(d[1][0]+d[2][0])/2,Y=(d[1][1]+d[2][1])/2,e==="horizontal"?(pt=Y+mt,b=pt+5,_="center"):(nt=R+mt,S=nt+5,_="left")),e==="horizontal"?(nt=R,S=nt):(pt=Y,b=pt),P=[[R,Y],[nt,pt]]}v.label={linePoints:P,x:S,y:b,verticalAlign:"middle",textAlign:_,inside:m}})}function Ku(a,r){a.eachSeriesByType("funnel",function(e){var n=e.getData(),o=n.mapDimension("value"),s=e.get("sort"),u=al(e,r),h=e.get("orient"),v=u.width,d=u.height,m=e0(n,s),_=u.x,S=u.y,b=h==="horizontal"?[(0,Ie.GM)(e.get("minSize"),d),(0,Ie.GM)(e.get("maxSize"),d)]:[(0,Ie.GM)(e.get("minSize"),v),(0,Ie.GM)(e.get("maxSize"),v)],P=n.getDataExtent(o),R=e.get("min"),Y=e.get("max");R==null&&(R=Math.min(P[0],0)),Y==null&&(Y=P[1]);var nt=e.get("funnelAlign"),pt=e.get("gap"),mt=h==="horizontal"?v:d,bt=(mt-pt*(n.count()-1))/n.count(),Lt=function(Te,be){if(h==="horizontal"){var Fe=n.get(o,Te)||0,Ye=(0,Ie.NU)(Fe,[R,Y],b,!0),Ue=void 0;switch(nt){case"top":Ue=S;break;case"center":Ue=S+(d-Ye)/2;break;case"bottom":Ue=S+(d-Ye);break}return[[be,Ue],[be,Ue+Ye]]}var $e=n.get(o,Te)||0,Sr=(0,Ie.NU)($e,[R,Y],b,!0),Ar;switch(nt){case"left":Ar=_;break;case"center":Ar=_+(v-Sr)/2;break;case"right":Ar=_+v-Sr;break}return[[Ar,be],[Ar+Sr,be]]};s==="ascending"&&(bt=-bt,pt=-pt,h==="horizontal"?_+=v:S+=d,m=m.reverse());for(var Pt=0;Pt<m.length;Pt++){var Ot=m[Pt],kt=m[Pt+1],jt=n.getItemModel(Ot);if(h==="horizontal"){var re=jt.get(["itemStyle","width"]);re==null?re=bt:(re=(0,Ie.GM)(re,v),s==="ascending"&&(re=-re));var ae=Lt(Ot,_),he=Lt(kt,_+re);_+=re+pt,n.setItemLayout(Ot,{points:ae.concat(he.slice().reverse())})}else{var me=jt.get(["itemStyle","height"]);me==null?me=bt:(me=(0,Ie.GM)(me,d),s==="ascending"&&(me=-me));var ae=Lt(Ot,S),he=Lt(kt,S+me);S+=me+pt,n.setItemLayout(Ot,{points:ae.concat(he.slice().reverse())})}}jl(n)})}function Bv(a){a.registerChartView(Dh),a.registerSeriesModel(Ah),a.registerLayout(Ku),a.registerProcessor(Ea("funnel"))}var r0=.3,Bn=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._dataGroup=new Mr.Z,e._initialized=!1,e}return r.prototype.init=function(){this.group.add(this._dataGroup)},r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._dataGroup,h=e.getData(),v=this._data,d=e.coordinateSystem,m=d.dimensions,_=zv(e);h.diff(v).add(S).update(b).remove(P).execute();function S(Y){var nt=Fv(h,u,Y,m,d);bh(nt,h,Y,_)}function b(Y,nt){var pt=v.getItemGraphicEl(nt),mt=ju(h,Y,m,d);h.setItemGraphicEl(Y,pt),cr.D(pt,{shape:{points:mt}},e,Y),(0,cr.Zi)(pt),bh(pt,h,Y,_)}function P(Y){var nt=v.getItemGraphicEl(Y);u.remove(nt)}if(!this._initialized){this._initialized=!0;var R=n0(d,e,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(R)}this._data=h},r.prototype.incrementalPrepareRender=function(e,n,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},r.prototype.incrementalRender=function(e,n,o){for(var s=n.getData(),u=n.coordinateSystem,h=u.dimensions,v=zv(n),d=this._progressiveEls=[],m=e.start;m<e.end;m++){var _=Fv(s,this._dataGroup,m,h,u);_.incremental=!0,bh(_,s,m,v),d.push(_)}},r.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},r.type="parallel",r}(vn.Z);function n0(a,r,e){var n=a.model,o=a.getRect(),s=new on.Z({shape:{x:o.x,y:o.y,width:o.width,height:o.height}}),u=n.get("layout")==="horizontal"?"width":"height";return s.setShape(u,0),cr.KZ(s,{shape:{width:o.width,height:o.height}},r,e),s}function ju(a,r,e,n){for(var o=[],s=0;s<e.length;s++){var u=e[s],h=a.get(a.mapDimension(u),r);i0(h,n.getAxis(u).type)||o.push(n.dataToPoint(h,u))}return o}function Fv(a,r,e,n,o){var s=ju(a,e,n,o),u=new Hi.Z({shape:{points:s},z2:10});return r.add(u),a.setItemGraphicEl(e,u),u}function zv(a){var r=a.get("smooth",!0);return r===!0&&(r=r0),r=(0,Ie.FK)(r),(0,g.Bu)(r)&&(r=0),{smooth:r}}function bh(a,r,e,n){a.useStyle(r.getItemVisual(e,"style")),a.style.fill=null,a.setShape("smooth",n.smooth);var o=r.getItemModel(e),s=o.getModel("emphasis");(0,ir.WO)(a,o,"lineStyle"),(0,ir.k5)(a,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function i0(a,r){return r==="category"?a==null:a==null||isNaN(a)}var a0=Bn,o0=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this,{useEncodeDefaulter:(0,g.ak)(s0,null,this)})},r.prototype.getRawIndicesByActiveState=function(e){var n=this.coordinateSystem,o=this.getData(),s=[];return n.eachActiveState(o,function(u,h){e===u&&s.push(o.getRawIndex(h))}),s},r.type="series.parallel",r.dependencies=["parallel"],r.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},r}(xe.Z);function s0(a){var r=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(!!r){var e={};return(0,g.S6)(r.dimensions,function(n){var o=l0(n);e[n]=o}),e}}function l0(a){return+a.replace("dim","")}var u0=o0,f0=["lineStyle","opacity"],h0={seriesType:"parallel",reset:function(a,r){var e=a.coordinateSystem,n={normal:a.get(["lineStyle","opacity"]),active:a.get("activeOpacity"),inactive:a.get("inactiveOpacity")};return{progress:function(o,s){e.eachActiveState(s,function(u,h){var v=n[u];if(u==="normal"&&s.hasItemOption){var d=s.getItemModel(h).get(f0,!0);d!=null&&(v=d)}var m=s.ensureUniqueItemVisual(h,"style");m.opacity=v},o.start,o.end)}}}},Mh=h0;function c0(a){v0(a),Eh(a)}function v0(a){if(!a.parallel){var r=!1;g.S6(a.series,function(e){e&&e.type==="parallel"&&(r=!0)}),r&&(a.parallel=[{}])}}function Eh(a){var r=Xe.kF(a.parallelAxis);g.S6(r,function(e){if(!!g.Kn(e)){var n=e.parallelIndex||0,o=Xe.kF(a.parallel)[n];o&&o.parallelAxisDefault&&g.TS(e,o.parallelAxisDefault,!1)}})}var Gv=5,Uv=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this._model=e,this._api=o,this._handlers||(this._handlers={},(0,g.S6)(d0,function(s,u){o.getZr().on(u,this._handlers[u]=(0,g.ak)(s,this))},this)),(0,ni.T9)(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},r.prototype.dispose=function(e,n){(0,ni.ZH)(this,"_throttledDispatchExpand"),(0,g.S6)(this._handlers,function(o,s){n.getZr().off(s,o)}),this._handlers=null},r.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},r.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction((0,g.l7)({type:"parallelAxisExpand"},e))},r.type="parallel",r}(pn.Z),d0={mousedown:function(a){Ch(this,"click")&&(this._mouseDownPoint=[a.offsetX,a.offsetY])},mouseup:function(a){var r=this._mouseDownPoint;if(Ch(this,"click")&&r){var e=[a.offsetX,a.offsetY],n=Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2);if(n>Gv)return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]);o.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(a){if(!(this._mouseDownPoint||!Ch(this,"mousemove"))){var r=this._model,e=r.coordinateSystem.getSlidedAxisExpandWindow([a.offsetX,a.offsetY]),n=e.behavior;n==="jump"&&this._throttledDispatchExpand.debounceNextCall(r.get("axisExpandDebounce")),this._throttledDispatchExpand(n==="none"?null:{axisExpandWindow:e.axisExpandWindow,animation:n==="jump"?null:{duration:0}})}}};function Ch(a,r){var e=a._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===r}var Ph=Uv,p0=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){a.prototype.init.apply(this,arguments),this.mergeOption({})},r.prototype.mergeOption=function(e){var n=this.option;e&&g.TS(n,e,!0),this._initDimensions()},r.prototype.contains=function(e,n){var o=e.get("parallelIndex");return o!=null&&n.getComponent("parallel",o)===this},r.prototype.setAxisExpand=function(e){g.S6(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(n){e.hasOwnProperty(n)&&(this.option[n]=e[n])},this)},r.prototype._initDimensions=function(){var e=this.dimensions=[],n=this.parallelAxisIndex=[],o=g.hX(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(s){return(s.get("parallelIndex")||0)===this.componentIndex},this);g.S6(o,function(s){e.push("dim"+s.get("dim")),n.push(s.componentIndex)})},r.type="parallel",r.dependencies=["parallelAxis"],r.layoutMode="box",r.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},r}(kn.Z),g0=p0,kv=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.type=s||"value",h.axisIndex=u,h}return r.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},r}(Pa.Z),Vv=kv;function ps(a,r,e,n,o,s){a=a||0;var u=e[1]-e[0];if(o!=null&&(o=Ia(o,[0,u])),s!=null&&(s=Math.max(s,o??0)),n==="all"){var h=Math.abs(r[1]-r[0]);h=Ia(h,[0,u]),o=s=Ia(h,[o,s]),n=0}r[0]=Ia(r[0],e),r[1]=Ia(r[1],e);var v=Jl(r,n);r[n]+=a;var d=o||0,m=e.slice();v.sign<0?m[0]+=d:m[1]-=d,r[n]=Ia(r[n],m);var _;return _=Jl(r,n),o!=null&&(_.sign!==v.sign||_.span<o)&&(r[1-n]=r[n]+v.sign*o),_=Jl(r,n),s!=null&&_.span>s&&(r[1-n]=r[n]+_.sign*s),r}function Jl(a,r){var e=a[r]-a[1-r];return{span:Math.abs(e),sign:e>0?-1:e<0?1:r?-1:1}}function Ia(a,r){return Math.min(r[1]!=null?r[1]:1/0,Math.max(r[0]!=null?r[0]:-1/0,a))}var Lh=g.S6,Zv=Math.min,$n=Math.max,Ih=Math.floor,qa=Math.ceil,Ql=Ie.NM,Wv=Math.PI,Rh=function(){function a(r,e,n){this.type="parallel",this._axesMap=g.kW(),this._axesLayout={},this.dimensions=r.dimensions,this._model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=r.dimensions,s=r.parallelAxisIndex;Lh(o,function(u,h){var v=s[h],d=e.getComponent("parallelAxis",v),m=this._axesMap.set(u,new Vv(u,ii.aG(d),[0,0],d.get("type"),v)),_=m.type==="category";m.onBand=_&&d.get("boundaryGap"),m.inverse=d.get("inverse"),d.axis=m,m.model=d,m.coordinateSystem=d.coordinateSystem=this},this)},a.prototype.update=function(r,e){this._updateAxesFromSeries(this._model,r)},a.prototype.containPoint=function(r){var e=this._makeLayoutInfo(),n=e.axisBase,o=e.layoutBase,s=e.pixelDimIndex,u=r[1-s],h=r[s];return u>=n&&u<=n+e.axisLength&&h>=o&&h<=o+e.layoutLength},a.prototype.getModel=function(){return this._model},a.prototype._updateAxesFromSeries=function(r,e){e.eachSeries(function(n){if(!!r.contains(n,e)){var o=n.getData();Lh(this.dimensions,function(s){var u=this._axesMap.get(s);u.scale.unionExtentFromData(o,o.mapDimension(s)),ii.Jk(u.scale,u.model)},this)}},this)},a.prototype.resize=function(r,e){this._rect=Kr.ME(r.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},a.prototype.getRect=function(){return this._rect},a.prototype._makeLayoutInfo=function(){var r=this._model,e=this._rect,n=["x","y"],o=["width","height"],s=r.get("layout"),u=s==="horizontal"?0:1,h=e[o[u]],v=[0,h],d=this.dimensions.length,m=xa(r.get("axisExpandWidth"),v),_=xa(r.get("axisExpandCount")||0,[0,d]),S=r.get("axisExpandable")&&d>3&&d>_&&_>1&&m>0&&h>0,b=r.get("axisExpandWindow"),P;if(b)P=xa(b[1]-b[0],v),b[1]=b[0]+P;else{P=xa(m*(_-1),v);var R=r.get("axisExpandCenter")||Ih(d/2);b=[m*R-P/2],b[1]=b[0]+P}var Y=(h-P)/(d-_);Y<3&&(Y=0);var nt=[Ih(Ql(b[0]/m,1))+1,qa(Ql(b[1]/m,1))-1],pt=Y/m*b[0];return{layout:s,pixelDimIndex:u,layoutBase:e[n[u]],layoutLength:h,axisBase:e[n[1-u]],axisLength:e[o[1-u]],axisExpandable:S,axisExpandWidth:m,axisCollapseWidth:Y,axisExpandWindow:b,axisCount:d,winInnerIndices:nt,axisExpandWindow0Pos:pt}},a.prototype._layoutAxes=function(){var r=this._rect,e=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),s=o.layout;e.each(function(u){var h=[0,o.axisLength],v=u.inverse?1:0;u.setExtent(h[v],h[1-v])}),Lh(n,function(u,h){var v=(o.axisExpandable?ua:To)(h,o),d={horizontal:{x:v.position,y:o.axisLength},vertical:{x:0,y:v.position}},m={horizontal:Wv/2,vertical:0},_=[d[s].x+r.x,d[s].y+r.y],S=m[s],b=gn.Ue();gn.U1(b,b,S),gn.Iu(b,b,_),this._axesLayout[u]={position:_,rotation:S,transform:b,axisNameAvailableWidth:v.axisNameAvailableWidth,axisLabelShow:v.axisLabelShow,nameTruncateMaxWidth:v.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},a.prototype.getAxis=function(r){return this._axesMap.get(r)},a.prototype.dataToPoint=function(r,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(r),e)},a.prototype.eachActiveState=function(r,e,n,o){n==null&&(n=0),o==null&&(o=r.count());var s=this._axesMap,u=this.dimensions,h=[],v=[];g.S6(u,function(Y){h.push(r.mapDimension(Y)),v.push(s.get(Y).model)});for(var d=this.hasAxisBrushed(),m=n;m<o;m++){var _=void 0;if(!d)_="normal";else{_="active";for(var S=r.getValues(h,m),b=0,P=u.length;b<P;b++){var R=v[b].getActiveState(S[b]);if(R==="inactive"){_="inactive";break}}}e(_,m)}},a.prototype.hasAxisBrushed=function(){for(var r=this.dimensions,e=this._axesMap,n=!1,o=0,s=r.length;o<s;o++)e.get(r[o]).model.getActiveState()!=="normal"&&(n=!0);return n},a.prototype.axisCoordToPoint=function(r,e){var n=this._axesLayout[e];return br.applyTransform([r,0],n.transform)},a.prototype.getAxisLayout=function(r){return g.d9(this._axesLayout[r])},a.prototype.getSlidedAxisExpandWindow=function(r){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,o=e.axisExpandWindow.slice(),s=o[1]-o[0],u=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(r))return{behavior:"none",axisExpandWindow:o};var h=r[n]-e.layoutBase-e.axisExpandWindow0Pos,v,d="slide",m=e.axisCollapseWidth,_=this._model.get("axisExpandSlideTriggerArea"),S=_[0]!=null;if(m)S&&m&&h<s*_[0]?(d="jump",v=h-s*_[2]):S&&m&&h>s*(1-_[0])?(d="jump",v=h-s*(1-_[2])):(v=h-s*_[1])>=0&&(v=h-s*(1-_[1]))<=0&&(v=0),v*=e.axisExpandWidth/m,v?ps(v,o,u,"all"):d="none";else{var b=o[1]-o[0],P=u[1]*h/b;o=[$n(0,P-b/2)],o[1]=Zv(u[1],o[0]+b),o[0]=o[1]-b}return{axisExpandWindow:o,behavior:d}},a}();function xa(a,r){return Zv($n(a,r[0]),r[1])}function To(a,r){var e=r.layoutLength/(r.axisCount-1);return{position:e*a,axisNameAvailableWidth:e,axisLabelShow:!0}}function ua(a,r){var e=r.layoutLength,n=r.axisExpandWidth,o=r.axisCount,s=r.axisCollapseWidth,u=r.winInnerIndices,h,v=s,d=!1,m;return a<u[0]?(h=a*s,m=s):a<=u[1]?(h=r.axisExpandWindow0Pos+a*n-r.axisExpandWindow[0],v=n,d=!0):(h=e-(o-1-a)*s,m=s),{position:h,axisNameAvailableWidth:v,axisLabelShow:d,nameTruncateMaxWidth:m}}var wo=Rh;function $l(a,r){var e=[];return a.eachComponent("parallel",function(n,o){var s=new wo(n,a,r);s.name="parallel_"+o,s.resize(n,r),n.coordinateSystem=s,s.model=n,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="parallel"){var o=n.getReferringComponents("parallel",Xe.C6).models[0];n.coordinateSystem=o.coordinateSystem}}),e}var Hv={create:$l},Xv=Hv,Yv=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.activeIntervals=[],e}return r.prototype.getAreaSelectStyle=function(){return(0,qf.Z)([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},r.prototype.setActiveIntervals=function(e){var n=this.activeIntervals=g.d9(e);if(n)for(var o=n.length-1;o>=0;o--)Ie.dt(n[o])},r.prototype.getActiveState=function(e){var n=this.activeIntervals;if(!n.length)return"normal";if(e==null||isNaN(+e))return"inactive";if(n.length===1){var o=n[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var s=0,u=n.length;s<u;s++)if(n[s][0]<=e&&e<=n[s][1])return"active";return"inactive"},r}(kn.Z);g.jB(Yv,Uo.W);var Kv=Yv,Do=!0,ol=Math.min,sl=Math.max,jv=Math.pow,m0=1e4,y0=6,_0=6,Oh="globalPan",x0={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},S0={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Jv={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},T0=0,w0=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Mr.Z,n._uid="brushController_"+T0++,(0,g.S6)(id,function(o,s){this._handlers[s]=(0,g.ak)(o,this)},n),n}return r.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},r.prototype._doEnableBrush=function(e){var n=this._zr;this._enableGlobalPan||Mc(n,Oh,this._uid),(0,g.S6)(this._handlers,function(o,s){n.on(s,o)}),this._brushType=e.brushType,this._brushOption=(0,g.TS)((0,g.d9)(Jv),e,!0)},r.prototype._doDisableBrush=function(){var e=this._zr;se(e,Oh,this._uid),(0,g.S6)(this._handlers,function(n,o){e.off(o,n)}),this._brushType=this._brushOption=null},r.prototype.setPanels=function(e){if(e&&e.length){var n=this._panels={};(0,g.S6)(e,function(o){n[o.panelId]=(0,g.d9)(o)})}else this._panels=null;return this},r.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var n=this.group;return this._zr.add(n),n.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=n.getLocalTransform(),this},r.prototype.updateCovers=function(e){e=(0,g.UI)(e,function(S){return(0,g.TS)((0,g.d9)(Jv),S,!0)});var n="\0-brush-index-",o=this._covers,s=this._covers=[],u=this,h=this._creatingCover;return new yo.Z(o,e,d,v).add(m).update(m).remove(_).execute(),this;function v(S,b){return(S.id!=null?S.id:n+b)+"-"+S.brushType}function d(S,b){return v(S.__brushOption,b)}function m(S,b){var P=e[S];if(b!=null&&o[b]===h)s[S]=o[b];else{var R=s[S]=b!=null?(o[b].__brushOption=P,o[b]):Bh(u,Nh(u,P));Fh(u,R)}}function _(S){o[S]!==h&&u.group.remove(o[S])}},r.prototype.unmount=function(){return this.enableBrush(!1),Gh(this),this._zr.remove(this.group),this},r.prototype.dispose=function(){this.unmount(),this.off()},r}(Vr.Z);function Nh(a,r){var e=ll[r.brushType].createCover(a,r);return e.__brushOption=r,$v(e,r),a.group.add(e),e}function Bh(a,r){var e=Ju(r);return e.endCreating&&(e.endCreating(a,r),$v(r,r.__brushOption)),r}function Qv(a,r){var e=r.__brushOption;Ju(r).updateCoverShape(a,r,e.range,e)}function $v(a,r){var e=r.z;e==null&&(e=m0),a.traverse(function(n){n.z=e,n.z2=e})}function Fh(a,r){Ju(r).updateCommon(a,r),Qv(a,r)}function Ju(a){return ll[a.__brushOption.brushType]}function zh(a,r,e){var n=a._panels;if(!n)return Do;var o,s=a._transform;return(0,g.S6)(n,function(u){u.isTargetByCursor(r,e,s)&&(o=u)}),o}function Ao(a,r){var e=a._panels;if(!e)return Do;var n=r.__brushOption.panelId;return n!=null?e[n]:Do}function Gh(a){var r=a._covers,e=r.length;return(0,g.S6)(r,function(n){a.group.remove(n)},a),r.length=0,!!e}function gs(a,r){var e=(0,g.UI)(a._covers,function(n){var o=n.__brushOption,s=(0,g.d9)(o.range);return{brushType:o.brushType,panelId:o.panelId,range:s}});a.trigger("brush",{areas:e,isEnd:!!r.isEnd,removeOnClick:!!r.removeOnClick})}function D0(a){var r=a._track;if(!r.length)return!1;var e=r[r.length-1],n=r[0],o=e[0]-n[0],s=e[1]-n[1],u=jv(o*o+s*s,.5);return u>y0}function Uh(a){var r=a.length-1;return r<0&&(r=0),[a[0],a[r]]}function ms(a,r,e,n){var o=new Mr.Z;return o.add(new on.Z({name:"main",style:Vh(e),silent:!0,draggable:!0,cursor:"move",drift:(0,g.WA)(rd,a,r,o,["n","s","w","e"]),ondragend:(0,g.WA)(gs,r,{isEnd:!0})})),(0,g.S6)(n,function(s){o.add(new on.Z({name:s.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:(0,g.WA)(rd,a,r,o,s),ondragend:(0,g.WA)(gs,r,{isEnd:!0})}))}),o}function qv(a,r,e,n){var o=n.brushStyle.lineWidth||0,s=sl(o,_0),u=e[0][0],h=e[1][0],v=u-o/2,d=h-o/2,m=e[0][1],_=e[1][1],S=m-s+o/2,b=_-s+o/2,P=m-u,R=_-h,Y=P+o,nt=R+o;to(a,r,"main",u,h,P,R),n.transformable&&(to(a,r,"w",v,d,s,nt),to(a,r,"e",S,d,s,nt),to(a,r,"n",v,d,Y,s),to(a,r,"s",v,b,Y,s),to(a,r,"nw",v,d,s,s),to(a,r,"ne",S,d,s,s),to(a,r,"sw",v,b,s,s),to(a,r,"se",S,b,s,s))}function kh(a,r){var e=r.__brushOption,n=e.transformable,o=r.childAt(0);o.useStyle(Vh(e)),o.attr({silent:!n,cursor:n?"move":"default"}),(0,g.S6)([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(s){var u=r.childOfName(s.join("")),h=s.length===1?Ra(a,s[0]):ed(a,s);u&&u.attr({silent:!n,invisible:!n,cursor:n?S0[h]+"-resize":null})})}function to(a,r,e,n,o,s,u){var h=r.childOfName(e);h&&h.setShape(b0(Wh(a,r,[[n,o],[n+s,o+u]])))}function Vh(a){return(0,g.ce)({strokeNoScale:!0},a.brushStyle)}function Zh(a,r,e,n){var o=[ol(a,e),ol(r,n)],s=[sl(a,e),sl(r,n)];return[[o[0],s[0]],[o[1],s[1]]]}function td(a){return br.getTransform(a.group)}function Ra(a,r){var e={w:"left",e:"right",n:"top",s:"bottom"},n={left:"w",right:"e",top:"n",bottom:"s"},o=br.transformDirection(e[r],td(a));return n[o]}function ed(a,r){var e=[Ra(a,r[0]),Ra(a,r[1])];return(e[0]==="e"||e[0]==="w")&&e.reverse(),e.join("")}function rd(a,r,e,n,o,s){var u=e.__brushOption,h=a.toRectRange(u.range),v=nd(r,o,s);(0,g.S6)(n,function(d){var m=x0[d];h[m[0]][m[1]]+=v[m[0]]}),u.range=a.fromRectRange(Zh(h[0][0],h[1][0],h[0][1],h[1][1])),Fh(r,e),gs(r,{isEnd:!1})}function A0(a,r,e,n){var o=r.__brushOption.range,s=nd(a,e,n);(0,g.S6)(o,function(u){u[0]+=s[0],u[1]+=s[1]}),Fh(a,r),gs(a,{isEnd:!1})}function nd(a,r,e){var n=a.group,o=n.transformCoordToLocal(r,e),s=n.transformCoordToLocal(0,0);return[o[0]-s[0],o[1]-s[1]]}function Wh(a,r,e){var n=Ao(a,r);return n&&n!==Do?n.clipPath(e,a._transform):(0,g.d9)(e)}function b0(a){var r=ol(a[0][0],a[1][0]),e=ol(a[0][1],a[1][1]),n=sl(a[0][0],a[1][0]),o=sl(a[0][1],a[1][1]);return{x:r,y:e,width:n-r,height:o-e}}function M0(a,r,e){if(!(!a._brushType||E0(a,r.offsetX,r.offsetY))){var n=a._zr,o=a._covers,s=zh(a,r,e);if(!a._dragging)for(var u=0;u<o.length;u++){var h=o[u].__brushOption;if(s&&(s===Do||h.panelId===s.panelId)&&ll[h.brushType].contain(o[u],e[0],e[1]))return}s&&n.setCursorStyle("crosshair")}}function ys(a){var r=a.event;r.preventDefault&&r.preventDefault()}function Hh(a,r,e){return a.childOfName("main").contain(r,e)}function qn(a,r,e,n){var o=a._creatingCover,s=a._creatingPanel,u=a._brushOption,h;if(a._track.push(e.slice()),D0(a)||o){if(s&&!o){u.brushMode==="single"&&Gh(a);var v=(0,g.d9)(u);v.brushType=Xh(v.brushType,s),v.panelId=s===Do?null:s.panelId,o=a._creatingCover=Nh(a,v),a._covers.push(o)}if(o){var d=ll[Xh(a._brushType,s)],m=o.__brushOption;m.range=d.getCreatingRange(Wh(a,o,a._track)),n&&(Bh(a,o),d.updateCommon(a,o)),Qv(a,o),h={isEnd:n}}}else n&&u.brushMode==="single"&&u.removeOnClick&&zh(a,r,e)&&Gh(a)&&(h={isEnd:n,removeOnClick:!0});return h}function Xh(a,r){return a==="auto"?r.defaultBrushType:a}var id={mousedown:function(a){if(this._dragging)Yh(this,a);else if(!a.target||!a.target.draggable){ys(a);var r=this.group.transformCoordToLocal(a.offsetX,a.offsetY);this._creatingCover=null;var e=this._creatingPanel=zh(this,a,r);e&&(this._dragging=!0,this._track=[r.slice()])}},mousemove:function(a){var r=a.offsetX,e=a.offsetY,n=this.group.transformCoordToLocal(r,e);if(M0(this,a,n),this._dragging){ys(a);var o=qn(this,a,n,!1);o&&gs(this,o)}},mouseup:function(a){Yh(this,a)}};function Yh(a,r){if(a._dragging){ys(r);var e=r.offsetX,n=r.offsetY,o=a.group.transformCoordToLocal(e,n),s=qn(a,r,o,!0);a._dragging=!1,a._track=[],a._creatingCover=null,s&&gs(a,s)}}function E0(a,r,e){var n=a._zr;return r<0||r>n.getWidth()||e<0||e>n.getHeight()}var ll={lineX:di(0),lineY:di(1),rect:{createCover:function(a,r){function e(n){return n}return ms({toRectRange:e,fromRectRange:e},a,r,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(a){var r=Uh(a);return Zh(r[1][0],r[1][1],r[0][0],r[0][1])},updateCoverShape:function(a,r,e,n){qv(a,r,e,n)},updateCommon:kh,contain:Hh},polygon:{createCover:function(a,r){var e=new Mr.Z;return e.add(new Hi.Z({name:"main",style:Vh(r),silent:!0})),e},getCreatingRange:function(a){return a},endCreating:function(a,r){r.remove(r.childAt(0)),r.add(new Ln.Z({name:"main",draggable:!0,drift:(0,g.WA)(A0,a,r),ondragend:(0,g.WA)(gs,a,{isEnd:!0})}))},updateCoverShape:function(a,r,e,n){r.childAt(0).setShape({points:Wh(a,r,e)})},updateCommon:kh,contain:Hh}};function di(a){return{createCover:function(r,e){return ms({toRectRange:function(n){var o=[n,[0,100]];return a&&o.reverse(),o},fromRectRange:function(n){return n[a]}},r,e,[[["w"],["e"]],[["n"],["s"]]][a])},getCreatingRange:function(r){var e=Uh(r),n=ol(e[0][a],e[1][a]),o=sl(e[0][a],e[1][a]);return[n,o]},updateCoverShape:function(r,e,n,o){var s,u=Ao(r,e);if(u!==Do&&u.getLinearBrushOtherExtent)s=u.getLinearBrushOtherExtent(a);else{var h=r._zr;s=[0,[h.getWidth(),h.getHeight()][1-a]]}var v=[n,s];a&&v.reverse(),qv(r,e,v,o)},updateCommon:kh,contain:Hh}}var ql=w0;function ad(a){return a=_s(a),function(r){return br.clipPointsByRect(r,a)}}function od(a,r){return a=_s(a),function(e){var n=r??e,o=n?a.width:a.height,s=n?a.x:a.y;return[s,s+(o||0)]}}function ul(a,r,e){var n=_s(a);return function(o,s){return n.contain(s[0],s[1])&&!co(o,r,e)}}function _s(a){return Dr.Z.create(a)}var qi=["axisLine","axisTickLabel","axisName"],sd=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){a.prototype.init.apply(this,arguments),(this._brushController=new ql(n.getZr())).on("brush",g.ak(this._onBrush,this))},r.prototype.render=function(e,n,o,s){if(!C0(e,n,s)){this.axisModel=e,this.api=o,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Mr.Z,this.group.add(this._axisGroup),!!e.get("show")){var h=L0(e,n),v=h.coordinateSystem,d=e.getAreaSelectStyle(),m=d.width,_=e.axis.dim,S=v.getAxisLayout(_),b=g.l7({strokeContainThreshold:m},S),P=new ma(e,b);g.S6(qi,P.add,P),this._axisGroup.add(P.getGroup()),this._refreshBrushController(b,d,e,h,m,o),br.groupTransition(u,this._axisGroup,e)}}},r.prototype._refreshBrushController=function(e,n,o,s,u,h){var v=o.axis.getExtent(),d=v[1]-v[0],m=Math.min(30,Math.abs(d)*.1),_=Dr.Z.create({x:v[0],y:-u/2,width:d,height:u});_.x-=m,_.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:ad(_),isTargetByCursor:ul(_,h,s),getLinearBrushOtherExtent:od(_,0)}]).enableBrush({brushType:"lineX",brushStyle:n,removeOnClick:!0}).updateCovers(P0(o))},r.prototype._onBrush=function(e){var n=e.areas,o=this.axisModel,s=o.axis,u=g.UI(n,function(h){return[s.coordToData(h.range[0],!0),s.coordToData(h.range[1],!0)]});(!o.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:u})},r.prototype.dispose=function(){this._brushController.dispose()},r.type="parallelAxis",r}(pn.Z);function C0(a,r,e){return e&&e.type==="axisAreaSelect"&&r.findComponents({mainType:"parallelAxis",query:e})[0]===a}function P0(a){var r=a.axis;return g.UI(a.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[r.dataToCoord(e[0],!0),r.dataToCoord(e[1],!0)]}})}function L0(a,r){return r.getComponent("parallel",a.get("parallelIndex"))}var Qu=sd,I0={type:"axisAreaSelect",event:"axisAreaSelected"};function R0(a){a.registerAction(I0,function(r,e){e.eachComponent({mainType:"parallelAxis",query:r},function(n){n.axis.model.setActiveIntervals(r.intervals)})}),a.registerAction("parallelAxisExpand",function(r,e){e.eachComponent({mainType:"parallel",query:r},function(n){n.setAxisExpand(r)})})}var $u={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function ld(a){a.registerComponentView(Ph),a.registerComponentModel(g0),a.registerCoordinateSystem("parallel",Xv),a.registerPreprocessor(c0),a.registerComponentModel(Kv),a.registerComponentView(Qu),Gs(a,"parallel",Kv,$u),R0(a)}function O0(a){(0,N.D)(ld),a.registerChartView(a0),a.registerSeriesModel(u0),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,Mh)}var N0=function(){function a(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return a}(),B0=function(a){(0,fe.ZT)(r,a);function r(e){return a.call(this,e)||this}return r.prototype.getDefaultShape=function(){return new N0},r.prototype.buildPath=function(e,n){var o=n.extent;e.moveTo(n.x1,n.y1),e.bezierCurveTo(n.cpx1,n.cpy1,n.cpx2,n.cpy2,n.x2,n.y2),n.orient==="vertical"?(e.lineTo(n.x2+o,n.y2),e.bezierCurveTo(n.cpx2+o,n.cpy2,n.cpx1+o,n.cpy1,n.x1+o,n.y1)):(e.lineTo(n.x2,n.y2+o),e.bezierCurveTo(n.cpx2,n.cpy2+o,n.cpx1,n.cpy1+o,n.x1,n.y1+o)),e.closePath()},r.prototype.highlight=function(){(0,ir.fD)(this)},r.prototype.downplay=function(){(0,ir.Mh)(this)},r}(dt.ZP),F0=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._focusAdjacencyDisabled=!1,e}return r.prototype.render=function(e,n,o){var s=this,u=e.getGraph(),h=this.group,v=e.layoutInfo,d=v.width,m=v.height,_=e.getData(),S=e.getData("edge"),b=e.get("orient");this._model=e,h.removeAll(),h.x=v.x,h.y=v.y,u.eachEdge(function(P){var R=new B0,Y=(0,Hr.A)(R);Y.dataIndex=P.dataIndex,Y.seriesIndex=e.seriesIndex,Y.dataType="edge";var nt=P.getModel(),pt=nt.getModel("lineStyle"),mt=pt.get("curveness"),bt=P.node1.getLayout(),Lt=P.node1.getModel(),Pt=Lt.get("localX"),Ot=Lt.get("localY"),kt=P.node2.getLayout(),jt=P.node2.getModel(),re=jt.get("localX"),ae=jt.get("localY"),he=P.getLayout(),me,Te,be,Fe,Ye,Ue,$e,Sr;switch(R.shape.extent=Math.max(1,he.dy),R.shape.orient=b,b==="vertical"?(me=(Pt!=null?Pt*d:bt.x)+he.sy,Te=(Ot!=null?Ot*m:bt.y)+bt.dy,be=(re!=null?re*d:kt.x)+he.ty,Fe=ae!=null?ae*m:kt.y,Ye=me,Ue=Te*(1-mt)+Fe*mt,$e=be,Sr=Te*mt+Fe*(1-mt)):(me=(Pt!=null?Pt*d:bt.x)+bt.dx,Te=(Ot!=null?Ot*m:bt.y)+he.sy,be=re!=null?re*d:kt.x,Fe=(ae!=null?ae*m:kt.y)+he.ty,Ye=me*(1-mt)+be*mt,Ue=Te,$e=me*mt+be*(1-mt),Sr=Fe),R.setShape({x1:me,y1:Te,x2:be,y2:Fe,cpx1:Ye,cpy1:Ue,cpx2:$e,cpy2:Sr}),R.useStyle(pt.getItemStyle()),R.style.fill){case"source":R.style.fill=P.node1.getVisual("color"),R.style.decal=P.node1.getVisual("style").decal;break;case"target":R.style.fill=P.node2.getVisual("color"),R.style.decal=P.node2.getVisual("style").decal;break;case"gradient":var Ar=P.node1.getVisual("color"),Wr=P.node2.getVisual("color");(0,g.HD)(Ar)&&(0,g.HD)(Wr)&&(R.style.fill=new Qr.Z(0,0,+(b==="horizontal"),+(b==="vertical"),[{color:Ar,offset:0},{color:Wr,offset:1}]))}var jr=nt.getModel("emphasis");(0,ir.WO)(R,nt,"lineStyle",function(zn){return zn.getItemStyle()}),h.add(R),S.setItemGraphicEl(P.dataIndex,R);var fn=jr.get("focus");(0,ir.k5)(R,fn==="adjacency"?P.getAdjacentDataIndices():fn,jr.get("blurScope"),jr.get("disabled")),(0,Hr.A)(R).dataType="edge"}),u.eachNode(function(P){var R=P.getLayout(),Y=P.getModel(),nt=Y.get("localX"),pt=Y.get("localY"),mt=Y.getModel("emphasis"),bt=new on.Z({shape:{x:nt!=null?nt*d:R.x,y:pt!=null?pt*m:R.y,width:R.dx,height:R.dy},style:Y.getModel("itemStyle").getItemStyle(),z2:10});(0,or.ni)(bt,(0,or.k3)(Y),{labelFetcher:e,labelDataIndex:P.dataIndex,defaultText:P.id}),bt.disableLabelAnimation=!0,bt.setStyle("fill",P.getVisual("color")),bt.setStyle("decal",P.getVisual("style").decal),(0,ir.WO)(bt,Y),h.add(bt),_.setItemGraphicEl(P.dataIndex,bt),(0,Hr.A)(bt).dataType="node";var Lt=mt.get("focus");(0,ir.k5)(bt,Lt==="adjacency"?P.getAdjacentDataIndices():Lt,mt.get("blurScope"),mt.get("disabled"))}),_.eachItemGraphicEl(function(P,R){var Y=_.getItemModel(R);Y.get("draggable")&&(P.drift=function(nt,pt){s._focusAdjacencyDisabled=!0,this.shape.x+=nt,this.shape.y+=pt,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:_.getRawIndex(R),localX:this.shape.x/d,localY:this.shape.y/m})},P.ondragend=function(){s._focusAdjacencyDisabled=!1},P.draggable=!0,P.cursor="move")}),!this._data&&e.isAnimationEnabled()&&h.setClipPath(z0(h.getBoundingRect(),e,function(){h.removeClipPath()})),this._data=e.getData()},r.prototype.dispose=function(){},r.type="sankey",r}(vn.Z);function z0(a,r,e){var n=new on.Z({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return cr.KZ(n,{shape:{width:a.width+20}},r,e),n}var Kh=F0,G0=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){var o=e.edges||e.links,s=e.data||e.nodes,u=e.levels;this.levelModels=[];for(var h=this.levelModels,v=0;v<u.length;v++)u[v].depth!=null&&u[v].depth>=0&&(h[u[v].depth]=new Xn.Z(u[v],this,n));if(s&&o){var d=Ov(s,o,this,!0,m);return d.data}function m(_,S){_.wrapMethod("getItemModel",function(b,P){var R=b.parentModel,Y=R.getData().getItemLayout(P);if(Y){var nt=Y.depth,pt=R.levelModels[nt];pt&&(b.parentModel=pt)}return b}),S.wrapMethod("getItemModel",function(b,P){var R=b.parentModel,Y=R.getGraph().getEdgeByIndex(P),nt=Y.node1.getLayout();if(nt){var pt=nt.depth,mt=R.levelModels[pt];mt&&(b.parentModel=mt)}return b})}},r.prototype.setNodePosition=function(e,n){var o=this.option.data||this.option.nodes,s=o[e];s.localX=n[0],s.localY=n[1]},r.prototype.getGraph=function(){return this.getData().graph},r.prototype.getEdgeData=function(){return this.getGraph().edgeData},r.prototype.formatTooltip=function(e,n,o){function s(b){return isNaN(b)||b==null}if(o==="edge"){var u=this.getDataParams(e,o),h=u.data,v=u.value,d=h.source+" -- "+h.target;return(0,Nn.TX)("nameValue",{name:d,value:v,noValue:s(v)})}else{var m=this.getGraph().getNodeByIndex(e),_=m.getLayout().value,S=this.getDataParams(e,o).data.name;return(0,Nn.TX)("nameValue",{name:S!=null?S+"":null,value:_,noValue:s(_)})}},r.prototype.optionUpdated=function(){},r.prototype.getDataParams=function(e,n){var o=a.prototype.getDataParams.call(this,e,n);if(o.value==null&&n==="node"){var s=this.getGraph().getNodeByIndex(e),u=s.getLayout().value;o.value=u}return o},r.type="series.sankey",r.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},r}(xe.Z),U0=G0;function k0(a,r){a.eachSeriesByType("sankey",function(e){var n=e.get("nodeWidth"),o=e.get("nodeGap"),s=ud(e,r);e.layoutInfo=s;var u=s.width,h=s.height,v=e.getGraph(),d=v.nodes,m=v.edges;V0(d);var _=g.hX(d,function(R){return R.getLayout().value===0}),S=_.length!==0?0:e.get("layoutIterations"),b=e.get("orient"),P=e.get("nodeAlign");jh(d,m,n,o,u,h,S,b,P)})}function ud(a,r){return Kr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function jh(a,r,e,n,o,s,u,h,v){Z0(a,r,e,o,s,h,v),f(a,r,s,o,n,u,h),Gt(a,h)}function V0(a){g.S6(a,function(r){var e=Mt(r.outEdges,_t),n=Mt(r.inEdges,_t),o=r.getValue()||0,s=Math.max(e,n,o);r.setLayout({value:s},!0)})}function Z0(a,r,e,n,o,s,u){for(var h=[],v=[],d=[],m=[],_=0,S=0;S<r.length;S++)h[S]=1;for(var S=0;S<a.length;S++)v[S]=a[S].inEdges.length,v[S]===0&&d.push(a[S]);for(var b=-1;d.length;){for(var P=0;P<d.length;P++){var R=d[P],Y=R.hostGraph.data.getRawDataItem(R.dataIndex),nt=Y.depth!=null&&Y.depth>=0;nt&&Y.depth>b&&(b=Y.depth),R.setLayout({depth:nt?Y.depth:_},!0),s==="vertical"?R.setLayout({dy:e},!0):R.setLayout({dx:e},!0);for(var pt=0;pt<R.outEdges.length;pt++){var mt=R.outEdges[pt],bt=r.indexOf(mt);h[bt]=0;var Lt=mt.node2,Pt=a.indexOf(Lt);--v[Pt]===0&&m.indexOf(Lt)<0&&m.push(Lt)}}++_,d=m,m=[]}for(var S=0;S<h.length;S++)if(h[S]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var Ot=b>_-1?b:_-1;u&&u!=="left"&&t(a,u,s,Ot);var kt=s==="vertical"?(o-e)/Ot:(n-e)/Ot;l(a,kt,s)}function fd(a){var r=a.hostGraph.data.getRawDataItem(a.dataIndex);return r.depth!=null&&r.depth>=0}function t(a,r,e,n){if(r==="right"){for(var o=[],s=a,u=0;s.length;){for(var h=0;h<s.length;h++){var v=s[h];v.setLayout({skNodeHeight:u},!0);for(var d=0;d<v.inEdges.length;d++){var m=v.inEdges[d];o.indexOf(m.node1)<0&&o.push(m.node1)}}s=o,o=[],++u}g.S6(a,function(_){fd(_)||_.setLayout({depth:Math.max(0,n-_.getLayout().skNodeHeight)},!0)})}else r==="justify"&&i(a,n)}function i(a,r){g.S6(a,function(e){!fd(e)&&!e.outEdges.length&&e.setLayout({depth:r},!0)})}function l(a,r,e){g.S6(a,function(n){var o=n.getLayout().depth*r;e==="vertical"?n.setLayout({y:o},!0):n.setLayout({x:o},!0)})}function f(a,r,e,n,o,s,u){var h=c(a,u);p(h,r,e,n,o,u),y(h,o,e,n,u);for(var v=1;s>0;s--)v*=.99,x(h,v,u),y(h,o,e,n,u),Ct(h,v,u),y(h,o,e,n,u)}function c(a,r){var e=[],n=r==="vertical"?"y":"x",o=(0,Xe.pv)(a,function(s){return s.getLayout()[n]});return o.keys.sort(function(s,u){return s-u}),g.S6(o.keys,function(s){e.push(o.buckets.get(s))}),e}function p(a,r,e,n,o,s){var u=1/0;g.S6(a,function(h){var v=h.length,d=0;g.S6(h,function(_){d+=_.getLayout().value});var m=s==="vertical"?(n-(v-1)*o)/d:(e-(v-1)*o)/d;m<u&&(u=m)}),g.S6(a,function(h){g.S6(h,function(v,d){var m=v.getLayout().value*u;s==="vertical"?(v.setLayout({x:d},!0),v.setLayout({dx:m},!0)):(v.setLayout({y:d},!0),v.setLayout({dy:m},!0))})}),g.S6(r,function(h){var v=+h.getValue()*u;h.setLayout({dy:v},!0)})}function y(a,r,e,n,o){var s=o==="vertical"?"x":"y";g.S6(a,function(u){u.sort(function(R,Y){return R.getLayout()[s]-Y.getLayout()[s]});for(var h,v,d,m=0,_=u.length,S=o==="vertical"?"dx":"dy",b=0;b<_;b++)v=u[b],d=m-v.getLayout()[s],d>0&&(h=v.getLayout()[s]+d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0)),m=v.getLayout()[s]+v.getLayout()[S]+r;var P=o==="vertical"?n:e;if(d=m-r-P,d>0){h=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0),m=h;for(var b=_-2;b>=0;--b)v=u[b],d=v.getLayout()[s]+v.getLayout()[S]+r-m,d>0&&(h=v.getLayout()[s]-d,o==="vertical"?v.setLayout({x:h},!0):v.setLayout({y:h},!0)),m=v.getLayout()[s]}})}function x(a,r,e){g.S6(a.slice().reverse(),function(n){g.S6(n,function(o){if(o.outEdges.length){var s=Mt(o.outEdges,w,e)/Mt(o.outEdges,_t);if(isNaN(s)){var u=o.outEdges.length;s=u?Mt(o.outEdges,E,e)/u:0}if(e==="vertical"){var h=o.getLayout().x+(s-yt(o,e))*r;o.setLayout({x:h},!0)}else{var v=o.getLayout().y+(s-yt(o,e))*r;o.setLayout({y:v},!0)}}})})}function w(a,r){return yt(a.node2,r)*a.getValue()}function E(a,r){return yt(a.node2,r)}function B(a,r){return yt(a.node1,r)*a.getValue()}function q(a,r){return yt(a.node1,r)}function yt(a,r){return r==="vertical"?a.getLayout().x+a.getLayout().dx/2:a.getLayout().y+a.getLayout().dy/2}function _t(a){return a.getValue()}function Mt(a,r,e){for(var n=0,o=a.length,s=-1;++s<o;){var u=+r(a[s],e);isNaN(u)||(n+=u)}return n}function Ct(a,r,e){g.S6(a,function(n){g.S6(n,function(o){if(o.inEdges.length){var s=Mt(o.inEdges,B,e)/Mt(o.inEdges,_t);if(isNaN(s)){var u=o.inEdges.length;s=u?Mt(o.inEdges,q,e)/u:0}if(e==="vertical"){var h=o.getLayout().x+(s-yt(o,e))*r;o.setLayout({x:h},!0)}else{var v=o.getLayout().y+(s-yt(o,e))*r;o.setLayout({y:v},!0)}}})})}function Gt(a,r){var e=r==="vertical"?"x":"y";g.S6(a,function(n){n.outEdges.sort(function(o,s){return o.node2.getLayout()[e]-s.node2.getLayout()[e]}),n.inEdges.sort(function(o,s){return o.node1.getLayout()[e]-s.node1.getLayout()[e]})}),g.S6(a,function(n){var o=0,s=0;g.S6(n.outEdges,function(u){u.setLayout({sy:o},!0),o+=u.getLayout().dy}),g.S6(n.inEdges,function(u){u.setLayout({ty:s},!0),s+=u.getLayout().dy})})}function Xt(a){a.eachSeriesByType("sankey",function(r){var e=r.getGraph(),n=e.nodes;if(n.length){var o=1/0,s=-1/0;g.S6(n,function(u){var h=u.getLayout().value;h<o&&(o=h),h>s&&(s=h)}),g.S6(n,function(u){var h=new xi({type:"color",mappingMethod:"linear",dataExtent:[o,s],visual:r.get("color")}),v=h.mapValueToVisual(u.getLayout().value),d=u.getModel().get(["itemStyle","color"]);d!=null?(u.setVisual("color",d),u.setVisual("style",{fill:d})):(u.setVisual("color",v),u.setVisual("style",{fill:v}))})}})}function ne(a){a.registerChartView(Kh),a.registerSeriesModel(U0),a.registerLayout(k0),a.registerVisual(Xt),a.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(r,e){e.eachComponent({mainType:"series",subType:"sankey",query:r},function(n){n.setNodePosition(r.dataIndex,[r.localX,r.localY])})})}var te=F(10381),qt=function(){function a(){}return a.prototype.getInitialData=function(r,e){var n,o=e.getComponent("xAxis",this.get("xAxisIndex")),s=e.getComponent("yAxis",this.get("yAxisIndex")),u=o.get("type"),h=s.get("type"),v;u==="category"?(r.layout="horizontal",n=o.getOrdinalMeta(),v=!0):h==="category"?(r.layout="vertical",n=s.getOrdinalMeta(),v=!0):r.layout=r.layout||"horizontal";var d=["x","y"],m=r.layout==="horizontal"?0:1,_=this._baseAxisDim=d[m],S=d[1-m],b=[o,s],P=b[m].get("type"),R=b[1-m].get("type"),Y=r.data;if(Y&&v){var nt=[];g.S6(Y,function(bt,Lt){var Pt;g.kJ(bt)?(Pt=bt.slice(),bt.unshift(Lt)):g.kJ(bt.value)?(Pt=g.l7({},bt),Pt.value=Pt.value.slice(),bt.value.unshift(Lt)):Pt=bt,nt.push(Pt)}),r.data=nt}var pt=this.defaultValueDimensions,mt=[{name:_,type:(0,te.T)(P),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:S,type:(0,te.T)(R),dimsDef:pt.slice()}];return Me(this,{coordDimensions:mt,dimensionsCount:pt.length+1,encodeDefaulter:g.WA(ye.pY,mt,this)})},a.prototype.getBaseAxis=function(){var r=this._baseAxisDim;return this.ecModel.getComponent(r+"Axis",this.get(r+"AxisIndex")).axis},a}(),ge=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return r.type="series.boxplot",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},r}(xe.Z);(0,g.jB)(ge,qt,!0);var ve=ge,Ne=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this.group,h=this._data;this._data||u.removeAll();var v=e.get("layout")==="horizontal"?1:0;s.diff(h).add(function(d){if(s.hasValue(d)){var m=s.getItemLayout(d),_=Qe(m,s,d,v,!0);s.setItemGraphicEl(d,_),u.add(_)}}).update(function(d,m){var _=h.getItemGraphicEl(m);if(!s.hasValue(d)){u.remove(_);return}var S=s.getItemLayout(d);_?((0,cr.Zi)(_),We(S,_,s,d)):_=Qe(S,s,d,v),u.add(_),s.setItemGraphicEl(d,_)}).remove(function(d){var m=h.getItemGraphicEl(d);m&&u.remove(m)}).execute(),this._data=s},r.prototype.remove=function(e){var n=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(s){s&&n.remove(s)})},r.type="boxplot",r}(vn.Z),Ee=function(){function a(){}return a}(),Ve=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="boxplotBoxPath",n}return r.prototype.getDefaultShape=function(){return new Ee},r.prototype.buildPath=function(e,n){var o=n.points,s=0;for(e.moveTo(o[s][0],o[s][1]),s++;s<4;s++)e.lineTo(o[s][0],o[s][1]);for(e.closePath();s<o.length;s++)e.moveTo(o[s][0],o[s][1]),s++,e.lineTo(o[s][0],o[s][1])},r}(dt.ZP);function Qe(a,r,e,n,o){var s=a.ends,u=new Ve({shape:{points:o?rr(s,n,a):s}});return We(a,u,r,e,o),u}function We(a,r,e,n,o){var s=e.hostModel,u=br[o?"initProps":"updateProps"];u(r,{shape:{points:a.ends}},s,n),r.useStyle(e.getItemVisual(n,"style")),r.style.strokeNoScale=!0,r.z2=100;var h=e.getItemModel(n),v=h.getModel("emphasis");(0,ir.WO)(r,h),(0,ir.k5)(r,v.get("focus"),v.get("blurScope"),v.get("disabled"))}function rr(a,r,e){return g.UI(a,function(n){return n=n.slice(),n[r]=e.initBaseline,n})}var fr=Ne;function je(a,r){}var hr=g.S6;function wr(a){var r=Ir(a);hr(r,function(e){var n=e.seriesModels;!n.length||(dr(e),hr(n,function(o,s){un(o,e.boxOffsetList[s],e.boxWidthList[s])}))})}function Ir(a){var r=[],e=[];return a.eachSeriesByType("boxplot",function(n){var o=n.getBaseAxis(),s=g.cq(e,o);s<0&&(s=e.length,e[s]=o,r[s]={axis:o,seriesModels:[]}),r[s].seriesModels.push(n)}),r}function dr(a){var r=a.axis,e=a.seriesModels,n=e.length,o=a.boxWidthList=[],s=a.boxOffsetList=[],u=[],h;if(r.type==="category")h=r.getBandWidth();else{var v=0;hr(e,function(P){v=Math.max(v,P.getData().count())});var d=r.getExtent();h=Math.abs(d[1]-d[0])/v}hr(e,function(P){var R=P.get("boxWidth");g.kJ(R)||(R=[R,R]),u.push([(0,Ie.GM)(R[0],h)||0,(0,Ie.GM)(R[1],h)||0])});var m=h*.8-2,_=m/n*.3,S=(m-_*(n-1))/n,b=S/2-m/2;hr(e,function(P,R){s.push(b),b+=_+S,o.push(Math.min(Math.max(S,u[R][0]),u[R][1]))})}function un(a,r,e){var n=a.coordinateSystem,o=a.getData(),s=e/2,u=a.get("layout")==="horizontal"?0:1,h=1-u,v=["x","y"],d=o.mapDimension(v[u]),m=o.mapDimensionsAll(v[h]);if(d==null||m.length<5)return;for(var _=0;_<o.count();_++){var S=o.get(d,_),b=mt(S,m[2],_),P=mt(S,m[0],_),R=mt(S,m[1],_),Y=mt(S,m[3],_),nt=mt(S,m[4],_),pt=[];bt(pt,R,!1),bt(pt,Y,!0),pt.push(P,R,nt,Y),Lt(pt,P),Lt(pt,nt),Lt(pt,b),o.setItemLayout(_,{initBaseline:b[h],ends:pt})}function mt(Pt,Ot,kt){var jt=o.get(Ot,kt),re=[];re[u]=Pt,re[h]=jt;var ae;return isNaN(Pt)||isNaN(jt)?ae=[NaN,NaN]:(ae=n.dataToPoint(re),ae[u]+=r),ae}function bt(Pt,Ot,kt){var jt=Ot.slice(),re=Ot.slice();jt[u]+=s,re[u]-=s,kt?Pt.push(jt,re):Pt.push(re,jt)}function Lt(Pt,Ot){var kt=Ot.slice(),jt=Ot.slice();kt[u]-=s,jt[u]+=s,Pt.push(kt,jt)}}function Pr(a,r){r=r||{};for(var e=[],n=[],o=r.boundIQR,s=o==="none"||o===0,u=0;u<a.length;u++){var h=(0,Ie.dt)(a[u].slice()),v=(0,Ie.VR)(h,.25),d=(0,Ie.VR)(h,.5),m=(0,Ie.VR)(h,.75),_=h[0],S=h[h.length-1],b=(o??1.5)*(m-v),P=s?_:Math.max(_,v-b),R=s?S:Math.min(S,m+b),Y=r.itemNameFormatter,nt=(0,g.mf)(Y)?Y({value:u}):(0,g.HD)(Y)?Y.replace("{value}",u+""):u+"";e.push([nt,P,v,d,m,R]);for(var pt=0;pt<h.length;pt++){var mt=h[pt];if(mt<P||mt>R){var bt=[nt,mt];n.push(bt)}}}return{boxData:e,outliers:n}}var Zr=F(70175),sn=F(94279),Dn={type:"echarts:boxplot",transform:function(r){var e=r.upstream;if(e.sourceFormat!==sn.XD){var n="";(0,Zr._y)(n)}var o=Pr(e.getRawData(),r.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:o.boxData},{data:o.outliers}]}};function An(a){a.registerSeriesModel(ve),a.registerChartView(fr),a.registerVisual(je),a.registerLayout(wr),a.registerTransform(Dn)}var en=["color","borderColor"],si=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},r.prototype.incrementalPrepareRender=function(e,n,o){this._clear(),this._updateDrawMode(e)},r.prototype.incrementalRender=function(e,n,o,s){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,n):this._incrementalRenderNormal(e,n)},r.prototype.eachRendered=function(e){br.traverseElements(this._progressiveEls||this.group,e)},r.prototype._updateDrawMode=function(e){var n=e.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},r.prototype._renderNormal=function(e){var n=e.getData(),o=this._data,s=this.group,u=n.getLayout("isSimpleBox"),h=e.get("clip",!0),v=e.coordinateSystem,d=v.getArea&&v.getArea();this._data||s.removeAll(),n.diff(o).add(function(m){if(n.hasValue(m)){var _=n.getItemLayout(m);if(h&&li(d,_))return;var S=pi(_,m,!0);cr.KZ(S,{shape:{points:_.ends}},e,m),ti(S,n,m,u),s.add(S),n.setItemGraphicEl(m,S)}}).update(function(m,_){var S=o.getItemGraphicEl(_);if(!n.hasValue(m)){s.remove(S);return}var b=n.getItemLayout(m);if(h&&li(d,b)){s.remove(S);return}S?(cr.D(S,{shape:{points:b.ends}},e,m),(0,cr.Zi)(S)):S=pi(b,m),ti(S,n,m,u),s.add(S),n.setItemGraphicEl(m,S)}).remove(function(m){var _=o.getItemGraphicEl(m);_&&s.remove(_)}).execute(),this._data=n},r.prototype._renderLarge=function(e){this._clear(),Ei(e,this.group);var n=e.get("clip",!0)?Pi(e.coordinateSystem,!1,e):null;n?this.group.setClipPath(n):this.group.removeClipPath()},r.prototype._incrementalRenderNormal=function(e,n){for(var o=n.getData(),s=o.getLayout("isSimpleBox"),u;(u=e.next())!=null;){var h=o.getItemLayout(u),v=pi(h,u);ti(v,o,u,s),v.incremental=!0,this.group.add(v),this._progressiveEls.push(v)}},r.prototype._incrementalRenderLarge=function(e,n){Ei(n,this.group,this._progressiveEls,!0)},r.prototype.remove=function(e){this._clear()},r.prototype._clear=function(){this.group.removeAll(),this._data=null},r.type="candlestick",r}(vn.Z),Fn=function(){function a(){}return a}(),Kn=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="normalCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new Fn},r.prototype.buildPath=function(e,n){var o=n.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))},r}(dt.ZP);function pi(a,r,e){var n=a.ends;return new Kn({shape:{points:e?tu(n,a):n},z2:100})}function li(a,r){for(var e=!0,n=0;n<r.ends.length;n++)if(a.contain(r.ends[n][0],r.ends[n][1])){e=!1;break}return e}function ti(a,r,e,n){var o=r.getItemModel(e);a.useStyle(r.getItemVisual(e,"style")),a.style.strokeNoScale=!0,a.__simpleBox=n,(0,ir.WO)(a,o)}function tu(a,r){return g.UI(a,function(e){return e=e.slice(),e[1]=r.initBaseline,e})}var ui=function(){function a(){}return a}(),Sa=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n.type="largeCandlestickBox",n}return r.prototype.getDefaultShape=function(){return new ui},r.prototype.buildPath=function(e,n){for(var o=n.points,s=0;s<o.length;)if(this.__sign===o[s++]){var u=o[s++];e.moveTo(u,o[s++]),e.lineTo(u,o[s++])}else s+=3},r}(dt.ZP);function Ei(a,r,e,n){var o=a.getData(),s=o.getLayout("largePoints"),u=new Sa({shape:{points:s},__sign:1});r.add(u);var h=new Sa({shape:{points:s},__sign:-1});r.add(h),qu(1,u,a,o),qu(-1,h,a,o),n&&(u.incremental=!0,h.incremental=!0),e&&e.push(u,h)}function qu(a,r,e,n){var o=e.get(["itemStyle",a>0?"borderColor":"borderColor0"])||e.get(["itemStyle",a>0?"color":"color0"]),s=e.getModel("itemStyle").getItemStyle(en);r.useStyle(s),r.style.fill=null,r.style.stroke=o}var Xx=si,py=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return r.prototype.getShadowDim=function(){return"open"},r.prototype.brushSelector=function(e,n,o){var s=n.getItemLayout(e);return s&&o.rect(s.brushRect)},r.type="series.candlestick",r.dependencies=["xAxis","yAxis","grid"],r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},r}(xe.Z);(0,g.jB)(py,qt,!0);var Yx=py;function Kx(a){!a||!g.kJ(a.series)||g.S6(a.series,function(r){g.Kn(r)&&r.type==="k"&&(r.type="candlestick")})}var jx=["itemStyle","borderColor"],Jx=["itemStyle","borderColor0"],Qx=["itemStyle","color"],$x=["itemStyle","color0"],qx={seriesType:"candlestick",plan:(0,Da.Z)(),performRawSeries:!0,reset:function(a,r){function e(s,u){return u.get(s>0?Qx:$x)}function n(s,u){return u.get(s>0?jx:Jx)}if(!r.isSeriesFiltered(a)){var o=a.pipelineContext.large;return!o&&{progress:function(s,u){for(var h;(h=s.next())!=null;){var v=u.getItemModel(h),d=u.getItemLayout(h).sign,m=v.getItemStyle();m.fill=e(d,v),m.stroke=n(d,v)||m.fill;var _=u.ensureUniqueItemVisual(h,"style");(0,g.l7)(_,m)}}}}}},tS=qx,eS={seriesType:"candlestick",plan:(0,Da.Z)(),reset:function(a){var r=a.coordinateSystem,e=a.getData(),n=rS(a,e),o=0,s=1,u=["x","y"],h=e.getDimensionIndex(e.mapDimension(u[o])),v=(0,g.UI)(e.mapDimensionsAll(u[s]),e.getDimensionIndex,e),d=v[0],m=v[1],_=v[2],S=v[3];if(e.setLayout({candleWidth:n,isSimpleBox:n<=1.3}),h<0||v.length<4)return;return{progress:a.pipelineContext.large?P:b};function b(R,Y){for(var nt,pt=Y.getStore();(nt=R.next())!=null;){var mt=pt.get(h,nt),bt=pt.get(d,nt),Lt=pt.get(m,nt),Pt=pt.get(_,nt),Ot=pt.get(S,nt),kt=Math.min(bt,Lt),jt=Math.max(bt,Lt),re=be(kt,mt),ae=be(jt,mt),he=be(Pt,mt),me=be(Ot,mt),Te=[];Fe(Te,ae,0),Fe(Te,re,1),Te.push(Ue(me),Ue(ae),Ue(he),Ue(re)),Y.setItemLayout(nt,{sign:gy(pt,nt,bt,Lt,m),initBaseline:bt>Lt?ae[s]:re[s],ends:Te,brushRect:Ye(Pt,Ot,mt)})}function be($e,Sr){var Ar=[];return Ar[o]=Sr,Ar[s]=$e,isNaN(Sr)||isNaN($e)?[NaN,NaN]:r.dataToPoint(Ar)}function Fe($e,Sr,Ar){var Wr=Sr.slice(),jr=Sr.slice();Wr[o]=(0,br.subPixelOptimize)(Wr[o]+n/2,1,!1),jr[o]=(0,br.subPixelOptimize)(jr[o]-n/2,1,!0),Ar?$e.push(Wr,jr):$e.push(jr,Wr)}function Ye($e,Sr,Ar){var Wr=be($e,Ar),jr=be(Sr,Ar);return Wr[o]-=n/2,jr[o]-=n/2,{x:Wr[0],y:Wr[1],width:s?n:jr[0]-Wr[0],height:s?jr[1]-Wr[1]:n}}function Ue($e){return $e[o]=(0,br.subPixelOptimize)($e[o],1),$e}}function P(R,Y){for(var nt=(0,kr.o)(R.count*4),pt=0,mt,bt=[],Lt=[],Pt,Ot=Y.getStore();(Pt=R.next())!=null;){var kt=Ot.get(h,Pt),jt=Ot.get(d,Pt),re=Ot.get(m,Pt),ae=Ot.get(_,Pt),he=Ot.get(S,Pt);if(isNaN(kt)||isNaN(ae)||isNaN(he)){nt[pt++]=NaN,pt+=3;continue}nt[pt++]=gy(Ot,Pt,jt,re,m),bt[o]=kt,bt[s]=ae,mt=r.dataToPoint(bt,null,Lt),nt[pt++]=mt?mt[0]:NaN,nt[pt++]=mt?mt[1]:NaN,bt[s]=he,mt=r.dataToPoint(bt,null,Lt),nt[pt++]=mt?mt[1]:NaN}Y.setLayout("largePoints",nt)}}};function gy(a,r,e,n,o){var s;return e>n?s=-1:e<n?s=1:s=r>0?a.get(o,r-1)<=n?1:-1:1,s}function rS(a,r){var e=a.getBaseAxis(),n,o=e.type==="category"?e.getBandWidth():(n=e.getExtent(),Math.abs(n[1]-n[0])/r.count()),s=(0,Ie.GM)((0,g.pD)(a.get("barMaxWidth"),o),o),u=(0,Ie.GM)((0,g.pD)(a.get("barMinWidth"),1),o),h=a.get("barWidth");return h!=null?(0,Ie.GM)(h,o):Math.max(Math.min(o/2,s),u)}var nS=eS;function iS(a){a.registerChartView(Xx),a.registerSeriesModel(Yx),a.registerPreprocessor(Kx),a.registerVisual(tS),a.registerLayout(nS)}function my(a,r){var e=r.rippleEffectColor||r.color;a.eachChild(function(n){n.attr({z:r.z,zlevel:r.zlevel,style:{stroke:r.brushType==="stroke"?e:null,fill:r.brushType==="fill"?e:null}})})}var aS=function(a){(0,fe.ZT)(r,a);function r(e,n){var o=a.call(this)||this,s=new ea(e,n),u=new Mr.Z;return o.add(s),o.add(u),o.updateData(e,n),o}return r.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},r.prototype.startEffectAnimation=function(e){for(var n=e.symbolType,o=e.color,s=e.rippleNumber,u=this.childAt(1),h=0;h<s;h++){var v=(0,Rr.th)(n,-1,-1,2,2,o);v.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-h/s*e.period+e.effectOffset;v.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(d).start(),v.animateStyle(!0).when(e.period,{opacity:0}).delay(d).start(),u.add(v)}my(u,e)},r.prototype.updateEffectAnimation=function(e){for(var n=this._effectCfg,o=this.childAt(1),s=["symbolType","period","rippleScale","rippleNumber"],u=0;u<s.length;u++){var h=s[u];if(n[h]!==e[h]){this.stopEffectAnimation(),this.startEffectAnimation(e);return}}my(o,e)},r.prototype.highlight=function(){(0,ir.fD)(this)},r.prototype.downplay=function(){(0,ir.Mh)(this)},r.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},r.prototype.updateData=function(e,n){var o=this,s=e.hostModel;this.childAt(0).updateData(e,n);var u=this.childAt(1),h=e.getItemModel(n),v=e.getItemVisual(n,"symbol"),d=(0,Rr.zp)(e.getItemVisual(n,"symbolSize")),m=e.getItemVisual(n,"style"),_=m&&m.fill,S=h.getModel("emphasis");u.setScale(d),u.traverse(function(Y){Y.setStyle("fill",_)});var b=(0,Rr.Cq)(e.getItemVisual(n,"symbolOffset"),d);b&&(u.x=b[0],u.y=b[1]);var P=e.getItemVisual(n,"symbolRotate");u.rotation=(P||0)*Math.PI/180||0;var R={};R.showEffectOn=s.get("showEffectOn"),R.rippleScale=h.get(["rippleEffect","scale"]),R.brushType=h.get(["rippleEffect","brushType"]),R.period=h.get(["rippleEffect","period"])*1e3,R.effectOffset=n/e.count(),R.z=s.getShallow("z")||0,R.zlevel=s.getShallow("zlevel")||0,R.symbolType=v,R.color=_,R.rippleEffectColor=h.get(["rippleEffect","color"]),R.rippleNumber=h.get(["rippleEffect","number"]),R.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(R):this.startEffectAnimation(R),this._effectCfg=R):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(Y){Y==="emphasis"?R.showEffectOn!=="render"&&o.startEffectAnimation(R):Y==="normal"&&R.showEffectOn!=="render"&&o.stopEffectAnimation()}),this._effectCfg=R,(0,ir.k5)(this,S.get("focus"),S.get("blurScope"),S.get("disabled"))},r.prototype.fadeOut=function(e){e&&e()},r}(Mr.Z),oS=aS,sS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._symbolDraw=new ra(oS)},r.prototype.render=function(e,n,o){var s=e.getData(),u=this._symbolDraw;u.updateData(s,{clipShape:this._getClipShape(e)}),this.group.add(u.group)},r.prototype._getClipShape=function(e){var n=e.coordinateSystem,o=n&&n.getArea&&n.getArea();return e.get("clip",!0)?o:null},r.prototype.updateTransform=function(e,n,o){var s=e.getData();this.group.dirty();var u=Hn("").reset(e,n,o);u.progress&&u.progress({start:0,end:s.count(),count:s.count()},s),this._symbolDraw.updateLayout()},r.prototype._updateGroupTransform=function(e){var n=e.coordinateSystem;n&&n.getRoamTransform&&(this.group.transform=gn.d9(n.getRoamTransform()),this.group.decomposeTransform())},r.prototype.remove=function(e,n){this._symbolDraw&&this._symbolDraw.remove(!0)},r.type="effectScatter",r}(vn.Z),lS=sS,uS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e}return r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this,{useEncodeDefaulter:!0})},r.prototype.brushSelector=function(e,n,o){return o.point(n.getItemLayout(e))},r.type="series.effectScatter",r.dependencies=["grid","polar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},r}(xe.Z),fS=uS;function hS(a){a.registerChartView(lS),a.registerSeriesModel(fS),a.registerLayout(Hn("effectScatter"))}var cS=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s.add(s.createLine(e,n,o)),s._updateEffectSymbol(e,n),s}return r.prototype.createLine=function(e,n,o){return new xh(e,n,o)},r.prototype._updateEffectSymbol=function(e,n){var o=e.getItemModel(n),s=o.getModel("effect"),u=s.get("symbolSize"),h=s.get("symbol");g.kJ(u)||(u=[u,u]);var v=e.getItemVisual(n,"style"),d=s.get("color")||v&&v.stroke,m=this.childAt(1);this._symbolType!==h&&(this.remove(m),m=(0,Rr.th)(h,-.5,-.5,1,1,d),m.z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",d),m.setStyle(s.getItemStyle(["color"])),m.scaleX=u[0],m.scaleY=u[1],m.setColor(d),this._symbolType=h,this._symbolScale=u,this._updateEffectAnimation(e,s,n))},r.prototype._updateEffectAnimation=function(e,n,o){var s=this.childAt(1);if(!!s){var u=e.getItemLayout(o),h=n.get("period")*1e3,v=n.get("loop"),d=n.get("constantSpeed"),m=g.Jv(n.get("delay"),function(S){return S/e.count()*h/3});if(s.ignore=!0,this._updateAnimationPoints(s,u),d>0&&(h=this._getLineLength(s)/d*1e3),h!==this._period||v!==this._loop){s.stopAnimation();var _=void 0;g.mf(m)?_=m(o):_=m,s.__t>0&&(_=-h*s.__t),this._animateSymbol(s,h,_,v)}this._period=h,this._loop=v}},r.prototype._animateSymbol=function(e,n,o,s){if(n>0){e.__t=0;var u=this,h=e.animate("",s).when(n,{__t:1}).delay(o).during(function(){u._updateSymbolPosition(e)});s||h.done(function(){u.remove(e)}),h.start()}},r.prototype._getLineLength=function(e){return Or.TK(e.__p1,e.__cp1)+Or.TK(e.__cp1,e.__p2)},r.prototype._updateAnimationPoints=function(e,n){e.__p1=n[0],e.__p2=n[1],e.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},r.prototype.updateData=function(e,n,o){this.childAt(0).updateData(e,n,o),this._updateEffectSymbol(e,n)},r.prototype._updateSymbolPosition=function(e){var n=e.__p1,o=e.__p2,s=e.__cp1,u=e.__t,h=[e.x,e.y],v=h.slice(),d=xr.Zm,m=xr.AZ;h[0]=d(n[0],s[0],o[0],u),h[1]=d(n[1],s[1],o[1],u);var _=m(n[0],s[0],o[0],u),S=m(n[1],s[1],o[1],u);e.rotation=-Math.atan2(S,_)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(e.__lastT!==void 0&&e.__lastT<e.__t?(e.scaleY=Or.TK(v,h)*1.05,u===1&&(h[0]=v[0]+(h[0]-v[0])/2,h[1]=v[1]+(h[1]-v[1])/2)):e.__lastT===1?e.scaleY=2*Or.TK(n,h):e.scaleY=this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=h[0],e.y=h[1]},r.prototype.updateLayout=function(e,n){this.childAt(0).updateLayout(e,n);var o=e.getItemModel(n).getModel("effect");this._updateEffectAnimation(e,o,n)},r}(Mr.Z),yy=cS,vS=function(a){(0,fe.ZT)(r,a);function r(e,n,o){var s=a.call(this)||this;return s._createPolyline(e,n,o),s}return r.prototype._createPolyline=function(e,n,o){var s=e.getItemLayout(n),u=new Hi.Z({shape:{points:s}});this.add(u),this._updateCommonStl(e,n,o)},r.prototype.updateData=function(e,n,o){var s=e.hostModel,u=this.childAt(0),h={shape:{points:e.getItemLayout(n)}};cr.D(u,h,s,n),this._updateCommonStl(e,n,o)},r.prototype._updateCommonStl=function(e,n,o){var s=this.childAt(0),u=e.getItemModel(n),h=o&&o.emphasisLineStyle,v=o&&o.focus,d=o&&o.blurScope,m=o&&o.emphasisDisabled;if(!o||e.hasItemOption){var _=u.getModel("emphasis");h=_.getModel("lineStyle").getLineStyle(),m=_.get("disabled"),v=_.get("focus"),d=_.get("blurScope")}s.useStyle(e.getItemVisual(n,"style")),s.style.fill=null,s.style.strokeNoScale=!0;var S=s.ensureState("emphasis");S.style=h,(0,ir.k5)(this,v,d,m)},r.prototype.updateLayout=function(e,n){var o=this.childAt(0);o.setShape("points",e.getItemLayout(n))},r}(Mr.Z),_y=vS,dS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return r.prototype.createLine=function(e,n,o){return new _y(e,n,o)},r.prototype._updateAnimationPoints=function(e,n){this._points=n;for(var o=[0],s=0,u=1;u<n.length;u++){var h=n[u-1],v=n[u];s+=Or.TK(h,v),o.push(s)}if(s===0){this._length=0;return}for(var u=0;u<o.length;u++)o[u]/=s;this._offsets=o,this._length=s},r.prototype._getLineLength=function(){return this._length},r.prototype._updateSymbolPosition=function(e){var n=e.__t,o=this._points,s=this._offsets,u=o.length;if(!!s){var h=this._lastFrame,v;if(n<this._lastFramePercent){var d=Math.min(h+1,u-1);for(v=d;v>=0&&!(s[v]<=n);v--);v=Math.min(v,u-2)}else{for(v=h;v<u&&!(s[v]>n);v++);v=Math.min(v-1,u-2)}var m=(n-s[v])/(s[v+1]-s[v]),_=o[v],S=o[v+1];e.x=_[0]*(1-m)+m*S[0],e.y=_[1]*(1-m)+m*S[1];var b=S[0]-_[0],P=S[1]-_[1];e.rotation=-Math.atan2(P,b)-Math.PI/2,this._lastFrame=v,this._lastFramePercent=n,e.ignore=!1}},r}(yy),pS=dS,xy=F(33640),gS=F(25674),mS=function(){function a(){this.polyline=!1,this.curveness=0,this.segs=[]}return a}(),yS=function(a){(0,fe.ZT)(r,a);function r(e){var n=a.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return r.prototype.reset=function(){this.notClear=!1,this._off=0},r.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},r.prototype.getDefaultShape=function(){return new mS},r.prototype.buildPath=function(e,n){var o=n.segs,s=n.curveness,u;if(n.polyline)for(u=this._off;u<o.length;){var h=o[u++];if(h>0){e.moveTo(o[u++],o[u++]);for(var v=1;v<h;v++)e.lineTo(o[u++],o[u++])}}else for(u=this._off;u<o.length;){var d=o[u++],m=o[u++],_=o[u++],S=o[u++];if(e.moveTo(d,m),s>0){var b=(d+_)/2-(m-S)*s,P=(m+S)/2-(_-d)*s;e.quadraticCurveTo(b,P,_,S)}else e.lineTo(_,S)}this.incremental&&(this._off=u,this.notClear=!0)},r.prototype.findDataIndex=function(e,n){var o=this.shape,s=o.segs,u=o.curveness,h=this.style.lineWidth;if(o.polyline)for(var v=0,d=0;d<s.length;){var m=s[d++];if(m>0)for(var _=s[d++],S=s[d++],b=1;b<m;b++){var P=s[d++],R=s[d++];if(xy.m(_,S,P,R,h,e,n))return v}v++}else for(var v=0,d=0;d<s.length;){var _=s[d++],S=s[d++],P=s[d++],R=s[d++];if(u>0){var Y=(_+P)/2-(S-R)*u,nt=(S+R)/2-(P-_)*u;if(gS.m(_,S,Y,nt,P,R,h,e,n))return v}else if(xy.m(_,S,P,R,h,e,n))return v;v++}return-1},r.prototype.contain=function(e,n){var o=this.transformCoordToLocal(e,n),s=this.getBoundingRect();if(e=o[0],n=o[1],s.contain(e,n)){var u=this.hoverDataIdx=this.findDataIndex(e,n);return u>=0}return this.hoverDataIdx=-1,!1},r.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var n=this.shape,o=n.segs,s=1/0,u=1/0,h=-1/0,v=-1/0,d=0;d<o.length;){var m=o[d++],_=o[d++];s=Math.min(m,s),h=Math.max(m,h),u=Math.min(_,u),v=Math.max(_,v)}e=this._rect=new Dr.Z(s,u,h,v)}return e},r}(dt.ZP),_S=function(){function a(){this.group=new Mr.Z}return a.prototype.updateData=function(r){this._clear();var e=this._create();e.setShape({segs:r.getLayout("linesPoints")}),this._setCommon(e,r)},a.prototype.incrementalPrepareUpdate=function(r){this.group.removeAll(),this._clear()},a.prototype.incrementalUpdate=function(r,e){var n=this._newAdded[0],o=e.getLayout("linesPoints"),s=n&&n.shape.segs;if(s&&s.length<2e4){var u=s.length,h=new Float32Array(u+o.length);h.set(s),h.set(o,u),n.setShape({segs:h})}else{this._newAdded=[];var v=this._create();v.incremental=!0,v.setShape({segs:o}),this._setCommon(v,e),v.__startIndex=r.start}},a.prototype.remove=function(){this._clear()},a.prototype.eachRendered=function(r){this._newAdded[0]&&r(this._newAdded[0])},a.prototype._create=function(){var r=new yS({cursor:"default"});return this._newAdded.push(r),this.group.add(r),r},a.prototype._setCommon=function(r,e,n){var o=e.hostModel;r.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),r.useStyle(o.getModel("lineStyle").getLineStyle()),r.style.strokeNoScale=!0;var s=e.getVisual("style");s&&s.stroke&&r.setStyle("stroke",s.stroke),r.setStyle("fill",null);var u=(0,Hr.A)(r);u.seriesIndex=o.seriesIndex,r.on("mousemove",function(h){u.dataIndex=null;var v=r.hoverDataIdx;v>0&&(u.dataIndex=v+r.__startIndex)})},a.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},a}(),xS=_S,SS={seriesType:"lines",plan:(0,Da.Z)(),reset:function(a){var r=a.coordinateSystem;if(!!r){var e=a.get("polyline"),n=a.pipelineContext.large;return{progress:function(o,s){var u=[];if(n){var h=void 0,v=o.end-o.start;if(e){for(var d=0,m=o.start;m<o.end;m++)d+=a.getLineCoordsCount(m);h=new Float32Array(v+d*2)}else h=new Float32Array(v*4);for(var _=0,S=[],m=o.start;m<o.end;m++){var b=a.getLineCoords(m,u);e&&(h[_++]=b);for(var P=0;P<b;P++)S=r.dataToPoint(u[P],!1,S),h[_++]=S[0],h[_++]=S[1]}s.setLayout("linesPoints",h)}else for(var m=o.start;m<o.end;m++){var R=s.getItemModel(m),b=a.getLineCoords(m,u),Y=[];if(e)for(var nt=0;nt<b;nt++)Y.push(r.dataToPoint(u[nt]));else{Y[0]=r.dataToPoint(u[0]),Y[1]=r.dataToPoint(u[1]);var pt=R.get(["lineStyle","curveness"]);+pt&&(Y[2]=[(Y[0][0]+Y[1][0])/2-(Y[0][1]-Y[1][1])*pt,(Y[0][1]+Y[1][1])/2-(Y[1][0]-Y[0][0])*pt])}s.setItemLayout(m,Y)}}}}}},Sy=SS,TS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e),h=e.get("zlevel"),v=e.get(["effect","trailLength"]),d=o.getZr(),m=d.painter.getType()==="svg";m||d.painter.getLayer(h).clear(!0),this._lastZlevel!=null&&!m&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&v>0&&(m||d.configLayer(h,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(v/10+.9,1),0)})),u.updateData(s);var _=e.get("clip",!0)&&Pi(e.coordinateSystem,!1,e);_?this.group.setClipPath(_):this.group.removeClipPath(),this._lastZlevel=h,this._finished=!0},r.prototype.incrementalPrepareRender=function(e,n,o){var s=e.getData(),u=this._updateLineDraw(s,e);u.incrementalPrepareUpdate(s),this._clearLayer(o),this._finished=!1},r.prototype.incrementalRender=function(e,n,o){this._lineDraw.incrementalUpdate(e,n.getData()),this._finished=e.end===n.getData().count()},r.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},r.prototype.updateTransform=function(e,n,o){var s=e.getData(),u=e.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var h=Sy.reset(e,n,o);h.progress&&h.progress({start:0,end:s.count(),count:s.count()},s),this._lineDraw.updateLayout(),this._clearLayer(o)},r.prototype._updateLineDraw=function(e,n){var o=this._lineDraw,s=this._showEffect(n),u=!!n.get("polyline"),h=n.pipelineContext,v=h.large;return(!o||s!==this._hasEffet||u!==this._isPolyline||v!==this._isLargeDraw)&&(o&&o.remove(),o=this._lineDraw=v?new xS:new Yl(u?s?pS:_y:s?yy:xh),this._hasEffet=s,this._isPolyline=u,this._isLargeDraw=v),this.group.add(o.group),o},r.prototype._showEffect=function(e){return!!e.get(["effect","show"])},r.prototype._clearLayer=function(e){var n=e.getZr(),o=n.painter.getType()==="svg";!o&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},r.prototype.remove=function(e,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.type="lines",r}(vn.Z),wS=TS,DS=typeof Uint32Array>"u"?Array:Uint32Array,AS=typeof Float64Array>"u"?Array:Float64Array;function Ty(a){var r=a.data;r&&r[0]&&r[0][0]&&r[0][0].coord&&(a.data=(0,g.UI)(r,function(e){var n=[e[0].coord,e[1].coord],o={coords:n};return e[0].name&&(o.fromName=e[0].name),e[1].name&&(o.toName=e[1].name),(0,g.Jn)([o,e[0],e[1]])}))}var bS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return r.prototype.init=function(e){e.data=e.data||[],Ty(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),a.prototype.init.apply(this,arguments)},r.prototype.mergeOption=function(e){if(Ty(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}a.prototype.mergeOption.apply(this,arguments)},r.prototype.appendData=function(e){var n=this._processFlatCoordsArray(e.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=(0,g.WW)(this._flatCoords,n.flatCoords),this._flatCoordsOffset=(0,g.WW)(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),e.data=new Float32Array(n.count)),this.getRawData().appendData(e.data)},r.prototype._getCoordsFromItemModel=function(e){var n=this.getData().getItemModel(e),o=n.option instanceof Array?n.option:n.getShallow("coords");return o},r.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[e*2+1]:this._getCoordsFromItemModel(e).length},r.prototype.getLineCoords=function(e,n){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[e*2],s=this._flatCoordsOffset[e*2+1],u=0;u<s;u++)n[u]=n[u]||[],n[u][0]=this._flatCoords[o+u*2],n[u][1]=this._flatCoords[o+u*2+1];return s}else{for(var h=this._getCoordsFromItemModel(e),u=0;u<h.length;u++)n[u]=n[u]||[],n[u][0]=h[u][0],n[u][1]=h[u][1];return h.length}},r.prototype._processFlatCoordsArray=function(e){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),(0,g.hj)(e[0])){for(var o=e.length,s=new DS(o),u=new AS(o),h=0,v=0,d=0,m=0;m<o;){d++;var _=e[m++];s[v++]=h+n,s[v++]=_;for(var S=0;S<_;S++){var b=e[m++],P=e[m++];u[h++]=b,u[h++]=P,m>o}}return{flatCoordsOffset:new Uint32Array(s.buffer,0,v),flatCoords:u,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},r.prototype.getInitialData=function(e,n){if(!1)var o;var s=new ue.Z(["value"],this);return s.hasItemOption=!1,s.initData(e.data,[],function(u,h,v,d){if(u instanceof Array)return NaN;s.hasItemOption=!0;var m=u.value;if(m!=null)return m instanceof Array?m[d]:m}),s},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getItemModel(e),h=u.get("name");if(h)return h;var v=u.get("fromName"),d=u.get("toName"),m=[];return v!=null&&m.push(v),d!=null&&m.push(d),(0,Nn.TX)("nameValue",{name:m.join(" > ")})},r.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},r.prototype.getProgressive=function(){var e=this.option.progressive;return e??(this.option.large?1e4:this.get("progressive"))},r.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return e??(this.option.large?2e4:this.get("progressiveThreshold"))},r.prototype.getZLevelKey=function(){var e=this.getModel("effect"),n=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&n>0?n+"":""},r.type="series.lines",r.dependencies=["grid","polar","geo","calendar"],r.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},r}(xe.Z),MS=bS;function hd(a){return a instanceof Array||(a=[a,a]),a}var ES={seriesType:"lines",reset:function(a){var r=hd(a.get("symbol")),e=hd(a.get("symbolSize")),n=a.getData();n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",e&&e[0]),n.setVisual("toSymbolSize",e&&e[1]);function o(s,u){var h=s.getItemModel(u),v=hd(h.getShallow("symbol",!0)),d=hd(h.getShallow("symbolSize",!0));v[0]&&s.setItemVisual(u,"fromSymbol",v[0]),v[1]&&s.setItemVisual(u,"toSymbol",v[1]),d[0]&&s.setItemVisual(u,"fromSymbolSize",d[0]),d[1]&&s.setItemVisual(u,"toSymbolSize",d[1])}return{dataEach:n.hasItemOption?o:null}}},CS=ES;function PS(a){a.registerChartView(wS),a.registerSeriesModel(MS),a.registerLayout(Sy),a.registerVisual(CS)}var LS=256,IS=function(){function a(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var r=De.qW.createCanvas();this.canvas=r}return a.prototype.update=function(r,e,n,o,s,u){var h=this._getBrush(),v=this._getGradient(s,"inRange"),d=this._getGradient(s,"outOfRange"),m=this.pointSize+this.blurSize,_=this.canvas,S=_.getContext("2d"),b=r.length;_.width=e,_.height=n;for(var P=0;P<b;++P){var R=r[P],Y=R[0],nt=R[1],pt=R[2],mt=o(pt);S.globalAlpha=mt,S.drawImage(h,Y-m,nt-m)}if(!_.width||!_.height)return _;for(var bt=S.getImageData(0,0,_.width,_.height),Lt=bt.data,Pt=0,Ot=Lt.length,kt=this.minOpacity,jt=this.maxOpacity,re=jt-kt;Pt<Ot;){var mt=Lt[Pt+3]/256,ae=Math.floor(mt*(LS-1))*4;if(mt>0){var he=u(mt)?v:d;mt>0&&(mt=mt*re+kt),Lt[Pt++]=he[ae],Lt[Pt++]=he[ae+1],Lt[Pt++]=he[ae+2],Lt[Pt++]=he[ae+3]*mt*256}else Pt+=4}return S.putImageData(bt,0,0),_},a.prototype._getBrush=function(){var r=this._brushCanvas||(this._brushCanvas=De.qW.createCanvas()),e=this.pointSize+this.blurSize,n=e*2;r.width=n,r.height=n;var o=r.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,Math.PI*2,!0),o.closePath(),o.fill(),r},a.prototype._getGradient=function(r,e){for(var n=this._gradientPixels,o=n[e]||(n[e]=new Uint8ClampedArray(256*4)),s=[0,0,0,0],u=0,h=0;h<256;h++)r[e](h/255,!0,s),o[u++]=s[0],o[u++]=s[1],o[u++]=s[2],o[u++]=s[3];return o},a}(),RS=IS;function OS(a,r,e){var n=a[1]-a[0];r=g.UI(r,function(u){return{interval:[(u.interval[0]-a[0])/n,(u.interval[1]-a[0])/n]}});var o=r.length,s=0;return function(u){var h;for(h=s;h<o;h++){var v=r[h].interval;if(v[0]<=u&&u<=v[1]){s=h;break}}if(h===o)for(h=s-1;h>=0;h--){var v=r[h].interval;if(v[0]<=u&&u<=v[1]){s=h;break}}return h>=0&&h<o&&e[h]}}function NS(a,r){var e=a[1]-a[0];return r=[(r[0]-a[0])/e,(r[1]-a[0])/e],function(n){return n>=r[0]&&n<=r[1]}}function wy(a){var r=a.dimensions;return r[0]==="lng"&&r[1]==="lat"}var BS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s;n.eachComponent("visualMap",function(h){h.eachTargetSeries(function(v){v===e&&(s=h)})}),this._progressiveEls=null,this.group.removeAll();var u=e.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):wy(u)&&this._renderOnGeo(u,e,s,o)},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll()},r.prototype.incrementalRender=function(e,n,o,s){var u=n.coordinateSystem;u&&(wy(u)?this.render(n,o,s):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(n,s,e.start,e.end,!0)))},r.prototype.eachRendered=function(e){br.traverseElements(this._progressiveEls||this.group,e)},r.prototype._renderOnCartesianAndCalendar=function(e,n,o,s,u){var h=e.coordinateSystem,v=Jn(h,"cartesian2d"),d,m,_,S;if(v){var b=h.getAxis("x"),P=h.getAxis("y");d=b.getBandWidth()+.5,m=P.getBandWidth()+.5,_=b.scale.getExtent(),S=P.scale.getExtent()}for(var R=this.group,Y=e.getData(),nt=e.getModel(["emphasis","itemStyle"]).getItemStyle(),pt=e.getModel(["blur","itemStyle"]).getItemStyle(),mt=e.getModel(["select","itemStyle"]).getItemStyle(),bt=e.get(["itemStyle","borderRadius"]),Lt=(0,or.k3)(e),Pt=e.getModel("emphasis"),Ot=Pt.get("focus"),kt=Pt.get("blurScope"),jt=Pt.get("disabled"),re=v?[Y.mapDimension("x"),Y.mapDimension("y"),Y.mapDimension("value")]:[Y.mapDimension("time"),Y.mapDimension("value")],ae=o;ae<s;ae++){var he=void 0,me=Y.getItemVisual(ae,"style");if(v){var Te=Y.get(re[0],ae),be=Y.get(re[1],ae);if(isNaN(Y.get(re[2],ae))||Te<_[0]||Te>_[1]||be<S[0]||be>S[1])continue;var Fe=h.dataToPoint([Te,be]);he=new on.Z({shape:{x:Fe[0]-d/2,y:Fe[1]-m/2,width:d,height:m},style:me})}else{if(isNaN(Y.get(re[1],ae)))continue;he=new on.Z({z2:1,shape:h.dataToRect([Y.get(re[0],ae)]).contentShape,style:me})}if(Y.hasItemOption){var Ye=Y.getItemModel(ae),Ue=Ye.getModel("emphasis");nt=Ue.getModel("itemStyle").getItemStyle(),pt=Ye.getModel(["blur","itemStyle"]).getItemStyle(),mt=Ye.getModel(["select","itemStyle"]).getItemStyle(),bt=Ye.get(["itemStyle","borderRadius"]),Ot=Ue.get("focus"),kt=Ue.get("blurScope"),jt=Ue.get("disabled"),Lt=(0,or.k3)(Ye)}he.shape.r=bt;var $e=e.getRawValue(ae),Sr="-";$e&&$e[2]!=null&&(Sr=$e[2]+""),(0,or.ni)(he,Lt,{labelFetcher:e,labelDataIndex:ae,defaultOpacity:me.opacity,defaultText:Sr}),he.ensureState("emphasis").style=nt,he.ensureState("blur").style=pt,he.ensureState("select").style=mt,(0,ir.k5)(he,Ot,kt,jt),he.incremental=u,u&&(he.states.emphasis.hoverLayer=!0),R.add(he),Y.setItemGraphicEl(ae,he),this._progressiveEls&&this._progressiveEls.push(he)}},r.prototype._renderOnGeo=function(e,n,o,s){var u=o.targetVisuals.inRange,h=o.targetVisuals.outOfRange,v=n.getData(),d=this._hmLayer||this._hmLayer||new RS;d.blurSize=n.get("blurSize"),d.pointSize=n.get("pointSize"),d.minOpacity=n.get("minOpacity"),d.maxOpacity=n.get("maxOpacity");var m=e.getViewRect().clone(),_=e.getRoamTransform();m.applyTransform(_);var S=Math.max(m.x,0),b=Math.max(m.y,0),P=Math.min(m.width+m.x,s.getWidth()),R=Math.min(m.height+m.y,s.getHeight()),Y=P-S,nt=R-b,pt=[v.mapDimension("lng"),v.mapDimension("lat"),v.mapDimension("value")],mt=v.mapArray(pt,function(Ot,kt,jt){var re=e.dataToPoint([Ot,kt]);return re[0]-=S,re[1]-=b,re.push(jt),re}),bt=o.getExtent(),Lt=o.type==="visualMap.continuous"?NS(bt,o.option.range):OS(bt,o.getPieceList(),o.option.selected);d.update(mt,Y,nt,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:h.color.getColorMapper()},Lt);var Pt=new gt.ZP({style:{width:Y,height:nt,x:S,y:b,image:d.canvas},silent:!0});this.group.add(Pt)},r.type="heatmap",r}(vn.Z),FS=BS,zS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this,{generateCoord:"value"})},r.prototype.preventIncremental=function(){var e=Rv.Z.get(this.get("coordinateSystem"));if(e&&e.dimensions)return e.dimensions[0]==="lng"&&e.dimensions[1]==="lat"},r.type="series.heatmap",r.dependencies=["grid","geo","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},r}(xe.Z),GS=zS;function US(a){a.registerChartView(FS),a.registerSeriesModel(GS)}var kS=["itemStyle","borderWidth"],Dy=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],W0=new Xo.Z,VS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group,u=e.getData(),h=this._data,v=e.coordinateSystem,d=v.getBaseAxis(),m=d.isHorizontal(),_=v.master.getRect(),S={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:v,coordSysExtent:[[_.x,_.x+_.width],[_.y,_.y+_.height]],isHorizontal:m,valueDim:Dy[+m],categoryDim:Dy[1-+m]};return u.diff(h).add(function(b){if(!!u.hasValue(b)){var P=Ly(u,b),R=Ay(u,b,P,S),Y=Iy(u,S,R);u.setItemGraphicEl(b,Y),s.add(Y),Ny(Y,S,R)}}).update(function(b,P){var R=h.getItemGraphicEl(P);if(!u.hasValue(b)){s.remove(R);return}var Y=Ly(u,b),nt=Ay(u,b,Y,S),pt=Oy(u,nt);R&&pt!==R.__pictorialShapeStr&&(s.remove(R),u.setItemGraphicEl(b,null),R=null),R?jS(R,S,nt):R=Iy(u,S,nt,!0),u.setItemGraphicEl(b,R),R.__pictorialSymbolMeta=nt,s.add(R),Ny(R,S,nt)}).remove(function(b){var P=h.getItemGraphicEl(b);P&&Ry(h,b,P.__pictorialSymbolMeta.animationModel,P)}).execute(),this._data=u,this.group},r.prototype.remove=function(e,n){var o=this.group,s=this._data;e.get("animation")?s&&s.eachItemGraphicEl(function(u){Ry(s,(0,Hr.A)(u).dataIndex,e,u)}):o.removeAll()},r.type="pictorialBar",r}(vn.Z);function Ay(a,r,e,n){var o=a.getItemLayout(r),s=e.get("symbolRepeat"),u=e.get("symbolClip"),h=e.get("symbolPosition")||"start",v=e.get("symbolRotate"),d=(v||0)*Math.PI/180||0,m=e.get("symbolPatternSize")||2,_=e.isAnimationEnabled(),S={dataIndex:r,layout:o,itemModel:e,symbolType:a.getItemVisual(r,"symbol")||"circle",style:a.getItemVisual(r,"style"),symbolClip:u,symbolRepeat:s,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:m,rotation:d,animationModel:_?e:null,hoverScale:_&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};ZS(e,s,o,n,S),WS(a,r,o,s,u,S.boundingLength,S.pxSign,m,n,S),HS(e,S.symbolScale,d,n,S);var b=S.symbolSize,P=(0,Rr.Cq)(e.get("symbolOffset"),b);return XS(e,b,o,s,u,P,h,S.valueLineWidth,S.boundingLength,S.repeatCutLength,n,S),S}function ZS(a,r,e,n,o){var s=n.valueDim,u=a.get("symbolBoundingData"),h=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),v=h.toGlobalCoord(h.dataToCoord(0)),d=1-+(e[s.wh]<=0),m;if(g.kJ(u)){var _=[H0(h,u[0])-v,H0(h,u[1])-v];_[1]<_[0]&&_.reverse(),m=_[d]}else u!=null?m=H0(h,u)-v:r?m=n.coordSysExtent[s.index][d]-v:m=e[s.wh];o.boundingLength=m,r&&(o.repeatCutLength=e[s.wh]),o.pxSign=m>0?1:-1}function H0(a,r){return a.toGlobalCoord(a.dataToCoord(a.scale.parse(r)))}function WS(a,r,e,n,o,s,u,h,v,d){var m=v.valueDim,_=v.categoryDim,S=Math.abs(e[_.wh]),b=a.getItemVisual(r,"symbolSize"),P;g.kJ(b)?P=b.slice():b==null?P=["100%","100%"]:P=[b,b],P[_.index]=(0,Ie.GM)(P[_.index],S),P[m.index]=(0,Ie.GM)(P[m.index],n?S:Math.abs(s)),d.symbolSize=P;var R=d.symbolScale=[P[0]/h,P[1]/h];R[m.index]*=(v.isHorizontal?-1:1)*u}function HS(a,r,e,n,o){var s=a.get(kS)||0;s&&(W0.attr({scaleX:r[0],scaleY:r[1],rotation:e}),W0.updateTransform(),s/=W0.getLineScale(),s*=r[n.valueDim.index]),o.valueLineWidth=s||0}function XS(a,r,e,n,o,s,u,h,v,d,m,_){var S=m.categoryDim,b=m.valueDim,P=_.pxSign,R=Math.max(r[b.index]+h,0),Y=R;if(n){var nt=Math.abs(v),pt=g.Jv(a.get("symbolMargin"),"15%")+"",mt=!1;pt.lastIndexOf("!")===pt.length-1&&(mt=!0,pt=pt.slice(0,pt.length-1));var bt=(0,Ie.GM)(pt,r[b.index]),Lt=Math.max(R+bt*2,0),Pt=mt?0:bt*2,Ot=(0,Ie.kE)(n),kt=Ot?n:By((nt+Pt)/Lt),jt=nt-kt*R;bt=jt/2/(mt?kt:Math.max(kt-1,1)),Lt=R+bt*2,Pt=mt?0:bt*2,!Ot&&n!=="fixed"&&(kt=d?By((Math.abs(d)+Pt)/Lt):0),Y=kt*Lt-Pt,_.repeatTimes=kt,_.symbolMargin=bt}var re=P*(Y/2),ae=_.pathPosition=[];ae[S.index]=e[S.wh]/2,ae[b.index]=u==="start"?re:u==="end"?v-re:v/2,s&&(ae[0]+=s[0],ae[1]+=s[1]);var he=_.bundlePosition=[];he[S.index]=e[S.xy],he[b.index]=e[b.xy];var me=_.barRectShape=g.l7({},e);me[b.wh]=P*Math.max(Math.abs(e[b.wh]),Math.abs(ae[b.index]+re)),me[S.wh]=e[S.wh];var Te=_.clipShape={};Te[S.xy]=-e[S.xy],Te[S.wh]=m.ecSize[S.wh],Te[b.xy]=0,Te[b.wh]=e[b.wh]}function by(a){var r=a.symbolPatternSize,e=(0,Rr.th)(a.symbolType,-r/2,-r/2,r,r);return e.attr({culling:!0}),e.type!=="image"&&e.setStyle({strokeNoScale:!0}),e}function My(a,r,e,n){var o=a.__pictorialBundle,s=e.symbolSize,u=e.valueLineWidth,h=e.pathPosition,v=r.valueDim,d=e.repeatTimes||0,m=0,_=s[r.valueDim.index]+u+e.symbolMargin*2;for(X0(a,function(R){R.__pictorialAnimationIndex=m,R.__pictorialRepeatTimes=d,m<d?tf(R,null,P(m),e,n):tf(R,null,{scaleX:0,scaleY:0},e,n,function(){o.remove(R)}),m++});m<d;m++){var S=by(e);S.__pictorialAnimationIndex=m,S.__pictorialRepeatTimes=d,o.add(S);var b=P(m);tf(S,{x:b.x,y:b.y,scaleX:0,scaleY:0},{scaleX:b.scaleX,scaleY:b.scaleY,rotation:b.rotation},e,n)}function P(R){var Y=h.slice(),nt=e.pxSign,pt=R;return(e.symbolRepeatDirection==="start"?nt>0:nt<0)&&(pt=d-1-R),Y[v.index]=_*(pt-d/2+.5)+h[v.index],{x:Y[0],y:Y[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function Ey(a,r,e,n){var o=a.__pictorialBundle,s=a.__pictorialMainPath;s?tf(s,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,n):(s=a.__pictorialMainPath=by(e),o.add(s),tf(s,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,n))}function Cy(a,r,e){var n=g.l7({},r.barRectShape),o=a.__pictorialBarRect;o?tf(o,null,{shape:n},r,e):(o=a.__pictorialBarRect=new on.Z({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),o.disableMorphing=!0,a.add(o))}function Py(a,r,e,n){if(e.symbolClip){var o=a.__pictorialClipPath,s=g.l7({},e.clipShape),u=r.valueDim,h=e.animationModel,v=e.dataIndex;if(o)cr.D(o,{shape:s},h,v);else{s[u.wh]=0,o=new on.Z({shape:s}),a.__pictorialBundle.setClipPath(o),a.__pictorialClipPath=o;var d={};d[u.wh]=e.clipShape[u.wh],br[n?"updateProps":"initProps"](o,{shape:d},h,v)}}}function Ly(a,r){var e=a.getItemModel(r);return e.getAnimationDelayParams=YS,e.isAnimationEnabled=KS,e}function YS(a){return{index:a.__pictorialAnimationIndex,count:a.__pictorialRepeatTimes}}function KS(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Iy(a,r,e,n){var o=new Mr.Z,s=new Mr.Z;return o.add(s),o.__pictorialBundle=s,s.x=e.bundlePosition[0],s.y=e.bundlePosition[1],e.symbolRepeat?My(o,r,e):Ey(o,r,e),Cy(o,e,n),Py(o,r,e,n),o.__pictorialShapeStr=Oy(a,e),o.__pictorialSymbolMeta=e,o}function jS(a,r,e){var n=e.animationModel,o=e.dataIndex,s=a.__pictorialBundle;cr.D(s,{x:e.bundlePosition[0],y:e.bundlePosition[1]},n,o),e.symbolRepeat?My(a,r,e,!0):Ey(a,r,e,!0),Cy(a,e,!0),Py(a,r,e,!0)}function Ry(a,r,e,n){var o=n.__pictorialBarRect;o&&o.removeTextContent();var s=[];X0(n,function(u){s.push(u)}),n.__pictorialMainPath&&s.push(n.__pictorialMainPath),n.__pictorialClipPath&&(e=null),g.S6(s,function(u){cr.bX(u,{scaleX:0,scaleY:0},e,r,function(){n.parent&&n.parent.remove(n)})}),a.setItemGraphicEl(r,null)}function Oy(a,r){return[a.getItemVisual(r.dataIndex,"symbol")||"none",!!r.symbolRepeat,!!r.symbolClip].join(":")}function X0(a,r,e){g.S6(a.__pictorialBundle.children(),function(n){n!==a.__pictorialBarRect&&r.call(e,n)})}function tf(a,r,e,n,o,s){r&&a.attr(r),n.symbolClip&&!o?e&&a.attr(e):e&&br[o?"updateProps":"initProps"](a,e,n.animationModel,n.dataIndex,s)}function Ny(a,r,e){var n=e.dataIndex,o=e.itemModel,s=o.getModel("emphasis"),u=s.getModel("itemStyle").getItemStyle(),h=o.getModel(["blur","itemStyle"]).getItemStyle(),v=o.getModel(["select","itemStyle"]).getItemStyle(),d=o.getShallow("cursor"),m=s.get("focus"),_=s.get("blurScope"),S=s.get("scale");X0(a,function(R){if(R instanceof gt.ZP){var Y=R.style;R.useStyle(g.l7({image:Y.image,x:Y.x,y:Y.y,width:Y.width,height:Y.height},e.style))}else R.useStyle(e.style);var nt=R.ensureState("emphasis");nt.style=u,S&&(nt.scaleX=R.scaleX*1.1,nt.scaleY=R.scaleY*1.1),R.ensureState("blur").style=h,R.ensureState("select").style=v,d&&(R.cursor=d),R.z2=e.z2});var b=r.valueDim.posDesc[+(e.boundingLength>0)],P=a.__pictorialBarRect;(0,or.ni)(P,(0,or.k3)(o),{labelFetcher:r.seriesModel,labelDataIndex:n,defaultText:Ga(r.seriesModel.getData(),n),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:b}),(0,ir.k5)(a,m,_,s.get("disabled"))}function By(a){var r=Math.round(a);return Math.abs(a-r)<1e-4?r:Math.ceil(a)}var JS=VS,QS=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return r.prototype.getInitialData=function(e){return e.stack=null,a.prototype.getInitialData.apply(this,arguments)},r.type="series.pictorialBar",r.dependencies=["grid"],r.defaultOption=(0,Zi.ZL)($r.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),r}($r),$S=QS;function qS(a){a.registerChartView(JS),a.registerSeriesModel($S),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,(0,g.WA)(ri.bK,"pictorialBar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,(0,ri.Bk)("pictorialBar"))}var tT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._layers=[],e}return r.prototype.render=function(e,n,o){var s=e.getData(),u=this,h=this.group,v=e.getLayerSeries(),d=s.getLayout("layoutInfo"),m=d.rect,_=d.boundaryGap;h.x=0,h.y=m.y+_[0];function S(Y){return Y.name}var b=new yo.Z(this._layersSeries||[],v,S,S),P=[];b.add((0,g.ak)(R,this,"add")).update((0,g.ak)(R,this,"update")).remove((0,g.ak)(R,this,"remove")).execute();function R(Y,nt,pt){var mt=u._layers;if(Y==="remove"){h.remove(mt[nt]);return}for(var bt=[],Lt=[],Pt,Ot=v[nt].indices,kt=0;kt<Ot.length;kt++){var jt=s.getItemLayout(Ot[kt]),re=jt.x,ae=jt.y0,he=jt.y;bt.push(re,ae),Lt.push(re,ae+he),Pt=s.getItemVisual(Ot[kt],"style")}var me,Te=s.getItemLayout(Ot[0]),be=e.getModel("label"),Fe=be.get("margin"),Ye=e.getModel("emphasis");if(Y==="add"){var Ue=P[nt]=new Mr.Z;me=new Sl({shape:{points:bt,stackedOnPoints:Lt,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),Ue.add(me),h.add(Ue),e.isAnimationEnabled()&&me.setClipPath(eT(me.getBoundingRect(),e,function(){me.removeClipPath()}))}else{var Ue=mt[pt];me=Ue.childAt(0),h.add(Ue),P[nt]=Ue,cr.D(me,{shape:{points:bt,stackedOnPoints:Lt}},e),(0,cr.Zi)(me)}(0,or.ni)(me,(0,or.k3)(e),{labelDataIndex:Ot[kt-1],defaultText:s.getName(Ot[kt-1]),inheritColor:Pt.fill},{normal:{verticalAlign:"middle"}}),me.setTextConfig({position:null,local:!0});var $e=me.getTextContent();$e&&($e.x=Te.x-Fe,$e.y=Te.y0+Te.y/2),me.useStyle(Pt),s.setItemGraphicEl(nt,me),(0,ir.WO)(me,e),(0,ir.k5)(me,Ye.get("focus"),Ye.get("blurScope"),Ye.get("disabled"))}this._layersSeries=v,this._layers=P},r.type="themeRiver",r}(vn.Z);function eT(a,r,e){var n=new on.Z({shape:{x:a.x-10,y:a.y-10,width:0,height:a.height+20}});return cr.KZ(n,{shape:{x:a.x-50,width:a.width+100,height:a.height+20}},r,e),n}var rT=tT,Y0=2,nT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Ze(g.ak(this.getData,this),g.ak(this.getRawData,this))},r.prototype.fixData=function(e){var n=e.length,o={},s=(0,Xe.pv)(e,function(S){return o.hasOwnProperty(S[0]+"")||(o[S[0]+""]=-1),S[2]}),u=[];s.buckets.each(function(S,b){u.push({name:b,dataList:S})});for(var h=u.length,v=0;v<h;++v){for(var d=u[v].name,m=0;m<u[v].dataList.length;++m){var _=u[v].dataList[m][0]+"";o[_]=v}for(var _ in o)o.hasOwnProperty(_)&&o[_]!==v&&(o[_]=v,e[n]=[_,0,d],n++)}return e},r.prototype.getInitialData=function(e,n){for(var o=this.getReferringComponents("singleAxis",Xe.C6).models[0],s=o.get("type"),u=g.hX(e.data,function(P){return P[2]!==void 0}),h=this.fixData(u||[]),v=[],d=this.nameMap=g.kW(),m=0,_=0;_<h.length;++_)v.push(h[_][Y0]),d.get(h[_][Y0])||(d.set(h[_][Y0],m),m++);var S=(0,ar.Z)(h,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:(0,te.T)(s)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,b=new ue.Z(S,this);return b.initData(h),b},r.prototype.getLayerSeries=function(){for(var e=this.getData(),n=e.count(),o=[],s=0;s<n;++s)o[s]=s;var u=e.mapDimension("single"),h=(0,Xe.pv)(o,function(d){return e.get("name",d)}),v=[];return h.buckets.each(function(d,m){d.sort(function(_,S){return e.get(u,_)-e.get(u,S)}),v.push({name:m,indices:d})}),v},r.prototype.getAxisTooltipData=function(e,n,o){g.kJ(e)||(e=e?[e]:[]);for(var s=this.getData(),u=this.getLayerSeries(),h=[],v=u.length,d,m=0;m<v;++m){for(var _=Number.MAX_VALUE,S=-1,b=u[m].indices.length,P=0;P<b;++P){var R=s.get(e[0],u[m].indices[P]),Y=Math.abs(R-n);Y<=_&&(d=R,_=Y,S=u[m].indices[P])}h.push(S)}return{dataIndices:h,nestestValue:d}},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=s.getName(e),h=s.get(s.mapDimension("value"),e);return(0,Nn.TX)("nameValue",{name:u,value:h})},r.type="series.themeRiver",r.dependencies=["singleAxis"],r.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},r}(xe.Z),iT=nT;function aT(a,r){a.eachSeriesByType("themeRiver",function(e){var n=e.getData(),o=e.coordinateSystem,s={},u=o.getRect();s.rect=u;var h=e.get("boundaryGap"),v=o.getAxis();if(s.boundaryGap=h,v.orient==="horizontal"){h[0]=Ie.GM(h[0],u.height),h[1]=Ie.GM(h[1],u.height);var d=u.height-h[0]-h[1];Fy(n,e,d)}else{h[0]=Ie.GM(h[0],u.width),h[1]=Ie.GM(h[1],u.width);var m=u.width-h[0]-h[1];Fy(n,e,m)}n.setLayout("layoutInfo",s)})}function Fy(a,r,e){if(!!a.count())for(var n=r.coordinateSystem,o=r.getLayerSeries(),s=a.mapDimension("single"),u=a.mapDimension("value"),h=g.UI(o,function(Y){return g.UI(Y.indices,function(nt){var pt=n.dataToPoint(a.get(s,nt));return pt[1]=a.get(u,nt),pt})}),v=oT(h),d=v.y0,m=e/v.max,_=o.length,S=o[0].indices.length,b,P=0;P<S;++P){b=d[P]*m,a.setItemLayout(o[0].indices[P],{layerIndex:0,x:h[0][P][0],y0:b,y:h[0][P][1]*m});for(var R=1;R<_;++R)b+=h[R-1][P][1]*m,a.setItemLayout(o[R].indices[P],{layerIndex:R,x:h[R][P][0],y0:b,y:h[R][P][1]*m})}}function oT(a){for(var r=a.length,e=a[0].length,n=[],o=[],s=0,u=0;u<e;++u){for(var h=0,v=0;v<r;++v)h+=a[v][u][1];h>s&&(s=h),n.push(h)}for(var d=0;d<e;++d)o[d]=(s-n[d])/2;s=0;for(var m=0;m<e;++m){var _=n[m]+o[m];_>s&&(s=_)}return{y0:o,max:s}}function sT(a){a.registerChartView(rT),a.registerSeriesModel(iT),a.registerLayout(aT),a.registerProcessor(Ea("themeRiver"))}var lT=2,uT=4,fT=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s){var u=a.call(this)||this;u.z2=lT,u.textConfig={inside:!0},(0,Hr.A)(u).seriesIndex=n.seriesIndex;var h=new ee.ZP({z2:uT,silent:e.getModel().get(["label","silent"])});return u.setTextContent(h),u.updateData(!0,e,n,o,s),u}return r.prototype.updateData=function(e,n,o,s,u){this.node=n,n.piece=this,o=o||this._seriesModel,s=s||this._ecModel;var h=this;(0,Hr.A)(h).dataIndex=n.dataIndex;var v=n.getModel(),d=v.getModel("emphasis"),m=n.getLayout(),_=g.l7({},m);_.label=null;var S=n.getVisual("style");S.lineJoin="bevel";var b=n.getVisual("decal");b&&(S.decal=(0,ns.I)(b,u));var P=de(v.getModel("itemStyle"),_,!0);g.l7(_,P),g.S6(ir.L1,function(pt){var mt=h.ensureState(pt),bt=v.getModel([pt,"itemStyle"]);mt.style=bt.getItemStyle();var Lt=de(bt,_);Lt&&(mt.shape=Lt)}),e?(h.setShape(_),h.shape.r=m.r0,cr.D(h,{shape:{r:m.r}},o,n.dataIndex)):(cr.D(h,{shape:_},o),(0,cr.Zi)(h)),h.useStyle(S),this._updateLabel(o);var R=v.getShallow("cursor");R&&h.attr("cursor",R),this._seriesModel=o||this._seriesModel,this._ecModel=s||this._ecModel;var Y=d.get("focus"),nt=Y==="ancestor"?n.getAncestorsIndices():Y==="descendant"?n.getDescendantIndices():Y;(0,ir.k5)(this,nt,d.get("blurScope"),d.get("disabled"))},r.prototype._updateLabel=function(e){var n=this,o=this.node.getModel(),s=o.getModel("label"),u=this.node.getLayout(),h=u.endAngle-u.startAngle,v=(u.startAngle+u.endAngle)/2,d=Math.cos(v),m=Math.sin(v),_=this,S=_.getTextContent(),b=this.node.dataIndex,P=s.get("minAngle")/180*Math.PI,R=s.get("show")&&!(P!=null&&Math.abs(h)<P);S.ignore=!R,g.S6(ir.qc,function(nt){var pt=nt==="normal"?o.getModel("label"):o.getModel([nt,"label"]),mt=nt==="normal",bt=mt?S:S.ensureState(nt),Lt=e.getFormattedLabel(b,nt);mt&&(Lt=Lt||n.node.name),bt.style=(0,or.Lr)(pt,{},null,nt!=="normal",!0),Lt&&(bt.style.text=Lt);var Pt=pt.get("show");Pt!=null&&!mt&&(bt.ignore=!Pt);var Ot=Y(pt,"position"),kt=mt?_:_.states[nt],jt=kt.style.fill;kt.textConfig={outsideFill:pt.get("color")==="inherit"?jt:null,inside:Ot!=="outside"};var re,ae=Y(pt,"distance")||0,he=Y(pt,"align");Ot==="outside"?(re=u.r+ae,he=v>Math.PI/2?"right":"left"):!he||he==="center"?(h===2*Math.PI&&u.r0===0?re=0:re=(u.r+u.r0)/2,he="center"):he==="left"?(re=u.r0+ae,v>Math.PI/2&&(he="right")):he==="right"&&(re=u.r-ae,v>Math.PI/2&&(he="left")),bt.style.align=he,bt.style.verticalAlign=Y(pt,"verticalAlign")||"middle",bt.x=re*d+u.cx,bt.y=re*m+u.cy;var me=Y(pt,"rotate"),Te=0;me==="radial"?(Te=-v,Te<-Math.PI/2&&(Te+=Math.PI)):me==="tangential"?(Te=Math.PI/2-v,Te>Math.PI/2?Te-=Math.PI:Te<-Math.PI/2&&(Te+=Math.PI)):g.hj(me)&&(Te=me*Math.PI/180),bt.rotation=Te});function Y(nt,pt){var mt=nt.get(pt);return mt??s.get(pt)}S.dirtyStyle()},r}(Di.C),zy=fT,K0="sunburstRootToNode",Gy="sunburstHighlight",hT="sunburstUnhighlight";function cT(a){a.registerAction({type:K0,update:"updateView"},function(r,e){e.eachComponent({mainType:"series",subType:"sunburst",query:r},n);function n(o,s){var u=as(r,[K0],o);if(u){var h=o.getViewRoot();h&&(r.direction=jf(h,u.node)?"rollUp":"drillDown"),o.resetViewRoot(u.node)}}}),a.registerAction({type:Gy,update:"none"},function(r,e,n){r=(0,g.l7)({},r),e.eachComponent({mainType:"series",subType:"sunburst",query:r},o);function o(s){var u=as(r,[Gy],s);u&&(r.dataIndex=u.node.dataIndex)}n.dispatchAction((0,g.l7)(r,{type:"highlight"}))}),a.registerAction({type:hT,update:"updateView"},function(r,e,n){r=(0,g.l7)({},r),n.dispatchAction((0,g.l7)(r,{type:"downplay"}))})}var vT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){var u=this;this.seriesModel=e,this.api=o,this.ecModel=n;var h=e.getData(),v=h.tree.root,d=e.getViewRoot(),m=this.group,_=e.get("renderLabelForZeroData"),S=[];d.eachNode(function(pt){S.push(pt)});var b=this._oldChildren||[];P(S,b),nt(v,d),this._initEvents(),this._oldChildren=S;function P(pt,mt){if(pt.length===0&&mt.length===0)return;new yo.Z(mt,pt,bt,bt).add(Lt).update(Lt).remove(g.WA(Lt,null)).execute();function bt(Pt){return Pt.getId()}function Lt(Pt,Ot){var kt=Pt==null?null:pt[Pt],jt=Ot==null?null:mt[Ot];R(kt,jt)}}function R(pt,mt){if(!_&&pt&&!pt.getValue()&&(pt=null),pt!==v&&mt!==v){if(mt&&mt.piece)pt?(mt.piece.updateData(!1,pt,e,n,o),h.setItemGraphicEl(pt.dataIndex,mt.piece)):Y(mt);else if(pt){var bt=new zy(pt,e,n,o);m.add(bt),h.setItemGraphicEl(pt.dataIndex,bt)}}}function Y(pt){!pt||pt.piece&&(m.remove(pt.piece),pt.piece=null)}function nt(pt,mt){mt.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,pt,e,n,o):(u.virtualPiece=new zy(pt,e,n,o),m.add(u.virtualPiece)),mt.piece.off("click"),u.virtualPiece.on("click",function(bt){u._rootToNode(mt.parentNode)})):u.virtualPiece&&(m.remove(u.virtualPiece),u.virtualPiece=null)}},r.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(n){var o=!1,s=e.seriesModel.getViewRoot();s.eachNode(function(u){if(!o&&u.piece&&u.piece===n.target){var h=u.getModel().get("nodeClick");if(h==="rootToNode")e._rootToNode(u);else if(h==="link"){var v=u.getModel(),d=v.get("link");if(d){var m=v.get("target",!0)||"_blank";(0,Cn.MI)(d,m)}}o=!0}})})},r.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:K0,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},r.prototype.containPoint=function(e,n){var o=n.getData(),s=o.getItemLayout(0);if(s){var u=e[0]-s.cx,h=e[1]-s.cy,v=Math.sqrt(u*u+h*h);return v<=s.r&&v>=s.r0}},r.type="sunburst",r}(vn.Z),dT=vT,pT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.ignoreStyleOnData=!0,e}return r.prototype.getInitialData=function(e,n){var o={name:e.name,children:e.data};Uy(o);var s=this._levelModels=g.UI(e.levels||[],function(v){return new Xn.Z(v,this,n)},this),u=Iu.createTree(o,this,h);function h(v){v.wrapMethod("getItemModel",function(d,m){var _=u.getNodeByDataIndex(m),S=s[_.depth];return S&&(d.parentModel=S),d})}return u.data},r.prototype.optionUpdated=function(){this.resetViewRoot()},r.prototype.getDataParams=function(e){var n=a.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=js(o,this),n},r.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},r.prototype.getViewRoot=function(){return this._viewRoot},r.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var n=this.getRawData().tree.root;(!e||e!==n&&!n.contains(e))&&(this._viewRoot=n)},r.prototype.enableAriaDecal=function(){Ru(this)},r.type="series.sunburst",r.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},r}(xe.Z);function Uy(a){var r=0;g.S6(a.children,function(n){Uy(n);var o=n.value;g.kJ(o)&&(o=o[0]),r+=o});var e=a.value;g.kJ(e)&&(e=e[0]),(e==null||isNaN(e))&&(e=r),e<0&&(e=0),g.kJ(a.value)?a.value[0]=e:a.value=e}var gT=pT,ky=Math.PI/180;function mT(a,r,e){r.eachSeriesByType(a,function(n){var o=n.get("center"),s=n.get("radius");g.kJ(s)||(s=[0,s]),g.kJ(o)||(o=[o,o]);var u=e.getWidth(),h=e.getHeight(),v=Math.min(u,h),d=(0,Ie.GM)(o[0],u),m=(0,Ie.GM)(o[1],h),_=(0,Ie.GM)(s[0],v/2),S=(0,Ie.GM)(s[1],v/2),b=-n.get("startAngle")*ky,P=n.get("minAngle")*ky,R=n.getData().tree.root,Y=n.getViewRoot(),nt=Y.depth,pt=n.get("sort");pt!=null&&Vy(Y,pt);var mt=0;g.S6(Y.children,function(Fe){!isNaN(Fe.getValue())&&mt++});var bt=Y.getValue(),Lt=Math.PI/(bt||mt)*2,Pt=Y.depth>0,Ot=Y.height-(Pt?-1:1),kt=(S-_)/(Ot||1),jt=n.get("clockwise"),re=n.get("stillShowZeroSum"),ae=jt?1:-1,he=function(Fe,Ye){if(!!Fe){var Ue=Ye;if(Fe!==R){var $e=Fe.getValue(),Sr=bt===0&&re?Lt:$e*Lt;Sr<P&&(Sr=P),Ue=Ye+ae*Sr;var Ar=Fe.depth-nt-(Pt?-1:1),Wr=_+kt*Ar,jr=_+kt*(Ar+1),fn=n.getLevelModel(Fe);if(fn){var zn=fn.get("r0",!0),En=fn.get("r",!0),an=fn.get("radius",!0);an!=null&&(zn=an[0],En=an[1]),zn!=null&&(Wr=(0,Ie.GM)(zn,v/2)),En!=null&&(jr=(0,Ie.GM)(En,v/2))}Fe.setLayout({angle:Sr,startAngle:Ye,endAngle:Ue,clockwise:jt,cx:d,cy:m,r0:Wr,r:jr})}if(Fe.children&&Fe.children.length){var Ur=0;g.S6(Fe.children,function(Sn){Ur+=he(Sn,Ye+Ur)})}return Ue-Ye}};if(Pt){var me=_,Te=_+kt,be=Math.PI*2;R.setLayout({angle:be,startAngle:b,endAngle:b+be,clockwise:jt,cx:d,cy:m,r0:me,r:Te})}he(Y,b)})}function Vy(a,r){var e=a.children||[];a.children=yT(e,r),e.length&&g.S6(a.children,function(n){Vy(n,r)})}function yT(a,r){if(g.mf(r)){var e=g.UI(a,function(o,s){var u=o.getValue();return{params:{depth:o.depth,height:o.height,dataIndex:o.dataIndex,getValue:function(){return u}},index:s}});return e.sort(function(o,s){return r(o.params,s.params)}),g.UI(e,function(o){return a[o.index]})}else{var n=r==="asc";return a.sort(function(o,s){var u=(o.getValue()-s.getValue())*(n?1:-1);return u===0?(o.dataIndex-s.dataIndex)*(n?-1:1):u})}}function _T(a){var r={};function e(n,o,s){for(var u=n;u&&u.depth>1;)u=u.parentNode;var h=o.getColorFromPalette(u.name||u.dataIndex+"",r);return n.depth>1&&(0,g.HD)(h)&&(h=(0,Rn.lift)(h,(n.depth-1)/(s-1)*.5)),h}a.eachSeriesByType("sunburst",function(n){var o=n.getData(),s=o.tree;s.eachNode(function(u){var h=u.getModel(),v=h.getModel("itemStyle").getItemStyle();v.fill||(v.fill=e(u,n,s.root.height));var d=o.ensureUniqueItemVisual(u.dataIndex,"style");(0,g.l7)(d,v)})})}function xT(a){a.registerChartView(dT),a.registerSeriesModel(gT),a.registerLayout((0,g.WA)(mT,"sunburst")),a.registerProcessor((0,g.WA)(Ea,"sunburst")),a.registerVisual(_T),cT(a)}var Zy={color:"fill",borderColor:"stroke"},ST={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},xs=(0,Xe.Yf)(),TT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},r.prototype.getInitialData=function(e,n){return(0,Er.Z)(null,this)},r.prototype.getDataParams=function(e,n,o){var s=a.prototype.getDataParams.call(this,e,n);return o&&(s.info=xs(o).info),s},r.type="series.custom",r.dependencies=["grid","polar","geo","singleAxis","calendar"],r.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},r}(xe.Z),wT=TT;function DT(a,r){return r=r||[0,0],g.UI(["x","y"],function(e,n){var o=this.getAxis(e),s=r[n],u=a[n]/2;return o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(s-u)-o.dataToCoord(s+u))},this)}function AT(a){var r=a.master.getRect();return{coordSys:{type:"cartesian2d",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:g.ak(DT,a)}}}function bT(a,r){return r=r||[0,0],g.UI([0,1],function(e){var n=r[e],o=a[e]/2,s=[],u=[];return s[e]=n-o,u[e]=n+o,s[1-e]=u[1-e]=r[1-e],Math.abs(this.dataToPoint(s)[e]-this.dataToPoint(u)[e])},this)}function MT(a){var r=a.getBoundingRect();return{coordSys:{type:"geo",x:r.x,y:r.y,width:r.width,height:r.height,zoom:a.getZoom()},api:{coord:function(e){return a.dataToPoint(e)},size:g.ak(bT,a)}}}function ET(a,r){var e=this.getAxis(),n=r instanceof Array?r[0]:r,o=(a instanceof Array?a[0]:a)/2;return e.type==="category"?e.getBandWidth():Math.abs(e.dataToCoord(n-o)-e.dataToCoord(n+o))}function CT(a){var r=a.getRect();return{coordSys:{type:"singleAxis",x:r.x,y:r.y,width:r.width,height:r.height},api:{coord:function(e){return a.dataToPoint(e)},size:(0,g.ak)(ET,a)}}}function PT(a,r){return r=r||[0,0],g.UI(["Radius","Angle"],function(e,n){var o="get"+e+"Axis",s=this[o](),u=r[n],h=a[n]/2,v=s.type==="category"?s.getBandWidth():Math.abs(s.dataToCoord(u-h)-s.dataToCoord(u+h));return e==="Angle"&&(v=v*Math.PI/180),v},this)}function LT(a){var r=a.getRadiusAxis(),e=a.getAngleAxis(),n=r.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:a.cx,cy:a.cy,r:n[1],r0:n[0]},api:{coord:function(o){var s=r.dataToRadius(o[0]),u=e.dataToAngle(o[1]),h=a.coordToPoint([s,u]);return h.push(s,u*Math.PI/180),h},size:g.ak(PT,a)}}}function IT(a){var r=a.getRect(),e=a.getRangeInfo();return{coordSys:{type:"calendar",x:r.x,y:r.y,width:r.width,height:r.height,cellWidth:a.getCellWidth(),cellHeight:a.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(n,o){return a.dataToPoint(n,o)}}}}var PE={};function Wy(a,r,e,n){return a&&(a.legacy||a.legacy!==!1&&!e&&!n&&r!=="tspan"&&(r==="text"||(0,g.RI)(a,"text")))}function Hy(a,r,e){var n=a,o,s,u;if(r==="text")u=n;else{u={},(0,g.RI)(n,"text")&&(u.text=n.text),(0,g.RI)(n,"rich")&&(u.rich=n.rich),(0,g.RI)(n,"textFill")&&(u.fill=n.textFill),(0,g.RI)(n,"textStroke")&&(u.stroke=n.textStroke),(0,g.RI)(n,"fontFamily")&&(u.fontFamily=n.fontFamily),(0,g.RI)(n,"fontSize")&&(u.fontSize=n.fontSize),(0,g.RI)(n,"fontStyle")&&(u.fontStyle=n.fontStyle),(0,g.RI)(n,"fontWeight")&&(u.fontWeight=n.fontWeight),s={type:"text",style:u,silent:!0},o={};var h=(0,g.RI)(n,"textPosition");e?o.position=h?n.textPosition:"inside":h&&(o.position=n.textPosition),(0,g.RI)(n,"textPosition")&&(o.position=n.textPosition),(0,g.RI)(n,"textOffset")&&(o.offset=n.textOffset),(0,g.RI)(n,"textRotation")&&(o.rotation=n.textRotation),(0,g.RI)(n,"textDistance")&&(o.distance=n.textDistance)}return Xy(u,a),(0,g.S6)(u.rich,function(v){Xy(v,v)}),{textConfig:o,textContent:s}}function Xy(a,r){!r||(r.font=r.textFont||r.font,(0,g.RI)(r,"textStrokeWidth")&&(a.lineWidth=r.textStrokeWidth),(0,g.RI)(r,"textAlign")&&(a.align=r.textAlign),(0,g.RI)(r,"textVerticalAlign")&&(a.verticalAlign=r.textVerticalAlign),(0,g.RI)(r,"textLineHeight")&&(a.lineHeight=r.textLineHeight),(0,g.RI)(r,"textWidth")&&(a.width=r.textWidth),(0,g.RI)(r,"textHeight")&&(a.height=r.textHeight),(0,g.RI)(r,"textBackgroundColor")&&(a.backgroundColor=r.textBackgroundColor),(0,g.RI)(r,"textPadding")&&(a.padding=r.textPadding),(0,g.RI)(r,"textBorderColor")&&(a.borderColor=r.textBorderColor),(0,g.RI)(r,"textBorderWidth")&&(a.borderWidth=r.textBorderWidth),(0,g.RI)(r,"textBorderRadius")&&(a.borderRadius=r.textBorderRadius),(0,g.RI)(r,"textBoxShadowColor")&&(a.shadowColor=r.textBoxShadowColor),(0,g.RI)(r,"textBoxShadowBlur")&&(a.shadowBlur=r.textBoxShadowBlur),(0,g.RI)(r,"textBoxShadowOffsetX")&&(a.shadowOffsetX=r.textBoxShadowOffsetX),(0,g.RI)(r,"textBoxShadowOffsetY")&&(a.shadowOffsetY=r.textBoxShadowOffsetY))}function Yy(a,r,e){var n=a;n.textPosition=n.textPosition||e.position||"inside",e.offset!=null&&(n.textOffset=e.offset),e.rotation!=null&&(n.textRotation=e.rotation),e.distance!=null&&(n.textDistance=e.distance);var o=n.textPosition.indexOf("inside")>=0,s=a.fill||"#000";Ky(n,r);var u=n.textFill==null;return o?u&&(n.textFill=e.insideFill||"#fff",!n.textStroke&&e.insideStroke&&(n.textStroke=e.insideStroke),!n.textStroke&&(n.textStroke=s),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(u&&(n.textFill=a.fill||e.outsideFill||"#000"),!n.textStroke&&e.outsideStroke&&(n.textStroke=e.outsideStroke)),n.text=r.text,n.rich=r.rich,(0,g.S6)(r.rich,function(h){Ky(h,h)}),n}function Ky(a,r){!r||((0,g.RI)(r,"fill")&&(a.textFill=r.fill),(0,g.RI)(r,"stroke")&&(a.textStroke=r.fill),(0,g.RI)(r,"lineWidth")&&(a.textStrokeWidth=r.lineWidth),(0,g.RI)(r,"font")&&(a.font=r.font),(0,g.RI)(r,"fontStyle")&&(a.fontStyle=r.fontStyle),(0,g.RI)(r,"fontWeight")&&(a.fontWeight=r.fontWeight),(0,g.RI)(r,"fontSize")&&(a.fontSize=r.fontSize),(0,g.RI)(r,"fontFamily")&&(a.fontFamily=r.fontFamily),(0,g.RI)(r,"align")&&(a.textAlign=r.align),(0,g.RI)(r,"verticalAlign")&&(a.textVerticalAlign=r.verticalAlign),(0,g.RI)(r,"lineHeight")&&(a.textLineHeight=r.lineHeight),(0,g.RI)(r,"width")&&(a.textWidth=r.width),(0,g.RI)(r,"height")&&(a.textHeight=r.height),(0,g.RI)(r,"backgroundColor")&&(a.textBackgroundColor=r.backgroundColor),(0,g.RI)(r,"padding")&&(a.textPadding=r.padding),(0,g.RI)(r,"borderColor")&&(a.textBorderColor=r.borderColor),(0,g.RI)(r,"borderWidth")&&(a.textBorderWidth=r.borderWidth),(0,g.RI)(r,"borderRadius")&&(a.textBorderRadius=r.borderRadius),(0,g.RI)(r,"shadowColor")&&(a.textBoxShadowColor=r.shadowColor),(0,g.RI)(r,"shadowBlur")&&(a.textBoxShadowBlur=r.shadowBlur),(0,g.RI)(r,"shadowOffsetX")&&(a.textBoxShadowOffsetX=r.shadowOffsetX),(0,g.RI)(r,"shadowOffsetY")&&(a.textBoxShadowOffsetY=r.shadowOffsetY),(0,g.RI)(r,"textShadowColor")&&(a.textShadowColor=r.textShadowColor),(0,g.RI)(r,"textShadowBlur")&&(a.textShadowBlur=r.textShadowBlur),(0,g.RI)(r,"textShadowOffsetX")&&(a.textShadowOffsetX=r.textShadowOffsetX),(0,g.RI)(r,"textShadowOffsetY")&&(a.textShadowOffsetY=r.textShadowOffsetY))}function LE(a,r){if(!1)var e}var RT=F(95622),jy={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Jy=(0,g.XP)(jy),IE=(0,g.u4)(tt.dN,function(a,r){return a[r]=1,a},{}),RE=tt.dN.join(", "),cd=["","style","shape","extra"],ef=(0,Xe.Yf)();function j0(a,r,e,n,o){var s=a+"Animation",u=(0,cr.ke)(a,n,o)||{},h=ef(r).userDuring;return u.duration>0&&(u.during=h?(0,g.ak)(zT,{el:r,userDuring:h}):null,u.setToFinal=!0,u.scope=a),(0,g.l7)(u,e[s]),u}function vd(a,r,e,n){n=n||{};var o=n.dataIndex,s=n.isInit,u=n.clearStyle,h=e.isAnimationEnabled(),v=ef(a),d=r.style;v.userDuring=r.during;var m={},_={};if(UT(a,r,_),qy("shape",r,_),qy("extra",r,_),!s&&h&&(GT(a,r,m),$y("shape",a,r,m),$y("extra",a,r,m),kT(a,r,d,m)),_.style=d,OT(a,_,u),BT(a,r),h)if(s){var S={};(0,g.S6)(cd,function(P){var R=P?r[P]:r;R&&R.enterFrom&&(P&&(S[P]=S[P]||{}),(0,g.l7)(P?S[P]:S,R.enterFrom))});var b=j0("enter",a,r,e,o);b.duration>0&&a.animateFrom(S,b)}else NT(a,r,o||0,e,m);Qy(a,r),d?a.dirty():a.markRedraw()}function Qy(a,r){for(var e=ef(a).leaveToProps,n=0;n<cd.length;n++){var o=cd[n],s=o?r[o]:r;s&&s.leaveTo&&(e||(e=ef(a).leaveToProps={}),o&&(e[o]=e[o]||{}),(0,g.l7)(o?e[o]:e,s.leaveTo))}}function dd(a,r,e,n){if(a){var o=a.parent,s=ef(a).leaveToProps;if(s){var u=j0("update",a,r,e,0);u.done=function(){o.remove(a),n&&n()},a.animateTo(s,u)}else o.remove(a),n&&n()}}function eu(a){return a==="all"}function OT(a,r,e){var n=r.style;if(!a.isGroup&&n){if(e){a.useStyle({});for(var o=a.animators,s=0;s<o.length;s++){var u=o[s];u.targetName==="style"&&u.changeTarget(a.style)}}a.setStyle(n)}r&&(r.style=null,r&&a.attr(r),r.style=n)}function NT(a,r,e,n,o){if(o){var s=j0("update",a,r,n,e);s.duration>0&&a.animateFrom(o,s)}}function BT(a,r){(0,g.RI)(r,"silent")&&(a.silent=r.silent),(0,g.RI)(r,"ignore")&&(a.ignore=r.ignore),a instanceof go.ZP&&(0,g.RI)(r,"invisible")&&(a.invisible=r.invisible),a instanceof dt.ZP&&(0,g.RI)(r,"autoBatch")&&(a.autoBatch=r.autoBatch)}var bo={},FT={setTransform:function(a,r){return bo.el[a]=r,this},getTransform:function(a){return bo.el[a]},setShape:function(a,r){var e=bo.el,n=e.shape||(e.shape={});return n[a]=r,e.dirtyShape&&e.dirtyShape(),this},getShape:function(a){var r=bo.el.shape;if(r)return r[a]},setStyle:function(a,r){var e=bo.el,n=e.style;return n&&(n[a]=r,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(a){var r=bo.el.style;if(r)return r[a]},setExtra:function(a,r){var e=bo.el.extra||(bo.el.extra={});return e[a]=r,this},getExtra:function(a){var r=bo.el.extra;if(r)return r[a]}};function OE(a){}function zT(){var a=this,r=a.el;if(!!r){var e=ef(r).userDuring,n=a.userDuring;if(e!==n){a.el=a.userDuring=null;return}bo.el=r,n(FT)}}function $y(a,r,e,n){var o=e[a];if(!!o){var s=r[a],u;if(s){var h=e.transition,v=o.transition;if(v)if(!u&&(u=n[a]={}),eu(v))(0,g.l7)(u,s);else for(var d=(0,Xe.kF)(v),m=0;m<d.length;m++){var _=d[m],S=s[_];u[_]=S}else if(eu(h)||(0,g.cq)(h,a)>=0){!u&&(u=n[a]={});for(var b=(0,g.XP)(s),m=0;m<b.length;m++){var _=b[m],S=s[_];VT(o[_],S)&&(u[_]=S)}}}}}function qy(a,r,e){var n=r[a];if(!!n)for(var o=e[a]={},s=(0,g.XP)(n),u=0;u<s.length;u++){var h=s[u];o[h]=(0,RT.V)(n[h])}}function GT(a,r,e){for(var n=r.transition,o=eu(n)?tt.dN:(0,Xe.kF)(n||[]),s=0;s<o.length;s++){var u=o[s];if(!(u==="style"||u==="shape"||u==="extra")){var h=a[u];e[u]=h}}}function UT(a,r,e){for(var n=0;n<Jy.length;n++){var o=Jy[n],s=jy[o],u=r[o];u&&(e[s[0]]=u[0],e[s[1]]=u[1])}for(var n=0;n<tt.dN.length;n++){var h=tt.dN[n];r[h]!=null&&(e[h]=r[h])}}function kT(a,r,e,n){if(!!e){var o=a.style,s;if(o){var u=e.transition,h=r.transition;if(u&&!eu(u)){var v=(0,Xe.kF)(u);!s&&(s=n.style={});for(var d=0;d<v.length;d++){var m=v[d],_=o[m];s[m]=_}}else if(a.getAnimationStyleProps&&(eu(h)||eu(u)||(0,g.cq)(h,"style")>=0)){var S=a.getAnimationStyleProps(),b=S?S.style:null;if(b){!s&&(s=n.style={});for(var P=(0,g.XP)(e),d=0;d<P.length;d++){var m=P[d];if(b[m]){var _=o[m];s[m]=_}}}}}}}function VT(a,r){return(0,g.zG)(a)?a!==r:a!=null&&isFinite(a)}var NE,t_=(0,Xe.Yf)(),ZT=["percent","easing","shape","style","extra"];function e_(a){a.stopAnimation("keyframe"),a.attr(t_(a))}function pd(a,r,e){if(!(!e.isAnimationEnabled()||!r)){if((0,g.kJ)(r)){(0,g.S6)(r,function(h){pd(a,h,e)});return}var n=r.keyframes,o=r.duration;if(e&&o==null){var s=(0,cr.ke)("enter",e,0);o=s&&s.duration}if(!(!n||!o)){var u=t_(a);(0,g.S6)(cd,function(h){if(!(h&&!a[h])){var v,d=!1;n.sort(function(m,_){return m.percent-_.percent}),(0,g.S6)(n,function(m){var _=a.animators,S=h?m[h]:m;if(!!S){var b=(0,g.XP)(S);if(h||(b=(0,g.hX)(b,function(Y){return(0,g.cq)(ZT,Y)<0})),!!b.length){v||(v=a.animate(h,r.loop,!0),v.scope="keyframe");for(var P=0;P<_.length;P++)_[P]!==v&&_[P].targetName===v.targetName&&_[P].stopTracks(b);h&&(u[h]=u[h]||{});var R=h?u[h]:u;(0,g.S6)(b,function(Y){R[Y]=((h?a[h]:a)||{})[Y]}),v.whenWithKeys(o*m.percent,S,b,m.easing)}}}),v&&v.delay(r.delay||0).duration(o).start(r.easing)}})}}}var Ss="emphasis",fl="normal",J0="blur",Q0="select",hl=[fl,Ss,J0,Q0],$0={normal:["itemStyle"],emphasis:[Ss,"itemStyle"],blur:[J0,"itemStyle"],select:[Q0,"itemStyle"]},q0={normal:["label"],emphasis:[Ss,"label"],blur:[J0,"label"],select:[Q0,"label"]},WT=["x","y"],HT="e\0\0",Oa={normal:{},emphasis:{},blur:{},select:{}},XT={cartesian2d:AT,geo:MT,single:CT,polar:LT,calendar:IT};function tm(a){return a instanceof dt.ZP}function em(a){return a instanceof go.ZP}function YT(a,r){r.copyTransform(a),em(r)&&em(a)&&(r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel,r.invisible=a.invisible,r.ignore=a.ignore,tm(r)&&tm(a)&&r.setShape(a.shape))}var KT=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this._progressiveEls=null;var u=this._data,h=e.getData(),v=this.group,d=n_(e,h,n,o);u||v.removeAll(),h.diff(u).add(function(_){im(o,null,_,d(_,s),e,v,h)}).remove(function(_){var S=u.getItemGraphicEl(_);dd(S,xs(S).option,e)}).update(function(_,S){var b=u.getItemGraphicEl(S);im(o,b,_,d(_,s),e,v,h)}).execute();var m=e.get("clip",!0)?Pi(e.coordinateSystem,!1,e):null;m?v.setClipPath(m):v.removeClipPath(),this._data=h},r.prototype.incrementalPrepareRender=function(e,n,o){this.group.removeAll(),this._data=null},r.prototype.incrementalRender=function(e,n,o,s,u){var h=n.getData(),v=n_(n,h,o,s),d=this._progressiveEls=[];function m(b){b.isGroup||(b.incremental=!0,b.ensureState("emphasis").hoverLayer=!0)}for(var _=e.start;_<e.end;_++){var S=im(null,null,_,v(_,u),n,this.group,h);S&&(S.traverse(m),d.push(S))}},r.prototype.eachRendered=function(e){br.traverseElements(this._progressiveEls||this.group,e)},r.prototype.filterForExposedEvent=function(e,n,o,s){var u=n.element;if(u==null||o.name===u)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===u)return!0;return!1},r.type="custom",r}(vn.Z),jT=KT;function rm(a){var r=a.type,e;if(r==="path"){var n=a.shape,o=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,s=l_(n);e=br.makePath(s,null,o,n.layout||"center"),xs(e).customPathData=s}else if(r==="image")e=new gt.ZP({}),xs(e).customImagePath=a.style.image;else if(r==="text")e=new ee.ZP({});else if(r==="group")e=new Mr.Z;else{if(r==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=br.getShapeClass(r);if(!u){var h="";(0,Zr._y)(h)}e=new u}return xs(e).customGraphicType=r,e.name=a.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function nm(a,r,e,n,o,s,u){e_(r);var h=o&&o.normal.cfg;h&&r.setTextConfig(h),n&&n.transition==null&&(n.transition=WT);var v=n&&n.style;if(v){if(r.type==="text"){var d=v;(0,g.RI)(d,"textFill")&&(d.fill=d.textFill),(0,g.RI)(d,"textStroke")&&(d.stroke=d.textStroke)}var m=void 0,_=tm(r)?v.decal:null;a&&_&&(_.dirty=!0,m=(0,ns.I)(_,a)),v.__decalPattern=m}if(em(r)&&v){var m=v.__decalPattern;m&&(v.decal=m)}vd(r,n,s,{dataIndex:e,isInit:u,clearStyle:!0}),pd(r,n.keyframeAnimation,s)}function r_(a,r,e,n,o){var s=r.isGroup?null:r,u=o&&o[a].cfg;if(s){var h=s.ensureState(a);if(n===!1){var v=s.getState(a);v&&(v.style=null)}else h.style=n||null;u&&(h.textConfig=u),(0,ir.MA)(s)}}function JT(a,r,e){if(!a.isGroup){var n=a,o=e.currentZ,s=e.currentZLevel;n.z=o,n.zlevel=s;var u=r.z2;u!=null&&(n.z2=u||0);for(var h=0;h<hl.length;h++)QT(n,r,hl[h])}}function QT(a,r,e){var n=e===fl,o=n?r:gd(r,e),s=o?o.z2:null,u;s!=null&&(u=n?a:a.ensureState(e),u.z2=s||0)}function n_(a,r,e,n){var o=a.get("renderItem"),s=a.coordinateSystem,u={};s&&(u=s.prepareCustoms?s.prepareCustoms(s):XT[s.type](s));for(var h=(0,g.ce)({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:bt,style:Pt,ordinalRawValue:Lt,styleEmphasis:Ot,visual:re,barLayout:ae,currentSeriesIndices:he,font:me},u.api||{}),v={context:{},seriesId:a.id,seriesName:a.name,seriesIndex:a.seriesIndex,coordSys:u.coordSys,dataInsideLength:r.count(),encode:$T(a.getData())},d,m,_={},S={},b={},P={},R=0;R<hl.length;R++){var Y=hl[R];b[Y]=a.getModel($0[Y]),P[Y]=a.getModel(q0[Y])}function nt(Te){return Te===d?m||(m=r.getItemModel(Te)):r.getItemModel(Te)}function pt(Te,be){return r.hasItemOption?Te===d?_[be]||(_[be]=nt(Te).getModel($0[be])):nt(Te).getModel($0[be]):b[be]}function mt(Te,be){return r.hasItemOption?Te===d?S[be]||(S[be]=nt(Te).getModel(q0[be])):nt(Te).getModel(q0[be]):P[be]}return function(Te,be){return d=Te,m=null,_={},S={},o&&o((0,g.ce)({dataIndexInside:Te,dataIndex:r.getRawIndex(Te),actionType:be?be.type:null},v),h)};function bt(Te,be){return be==null&&(be=d),r.getStore().get(r.getDimensionIndex(Te||0),be)}function Lt(Te,be){be==null&&(be=d),Te=Te||0;var Fe=r.getDimensionInfo(Te);if(!Fe){var Ye=r.getDimensionIndex(Te);return Ye>=0?r.getStore().get(Ye,be):void 0}var Ue=r.get(Fe.name,be),$e=Fe&&Fe.ordinalMeta;return $e?$e.categories[Ue]:Ue}function Pt(Te,be){be==null&&(be=d);var Fe=r.getItemVisual(be,"style"),Ye=Fe&&Fe.fill,Ue=Fe&&Fe.opacity,$e=pt(be,fl).getItemStyle();Ye!=null&&($e.fill=Ye),Ue!=null&&($e.opacity=Ue);var Sr={inheritColor:(0,g.HD)(Ye)?Ye:"#000"},Ar=mt(be,fl),Wr=or.Lr(Ar,null,Sr,!1,!0);Wr.text=Ar.getShallow("show")?(0,g.pD)(a.getFormattedLabel(be,fl),Ga(r,be)):null;var jr=or.nC(Ar,Sr,!1);return jt(Te,$e),$e=Yy($e,Wr,jr),Te&&kt($e,Te),$e.legacy=!0,$e}function Ot(Te,be){be==null&&(be=d);var Fe=pt(be,Ss).getItemStyle(),Ye=mt(be,Ss),Ue=or.Lr(Ye,null,null,!0,!0);Ue.text=Ye.getShallow("show")?(0,g.R1)(a.getFormattedLabel(be,Ss),a.getFormattedLabel(be,fl),Ga(r,be)):null;var $e=or.nC(Ye,null,!0);return jt(Te,Fe),Fe=Yy(Fe,Ue,$e),Te&&kt(Fe,Te),Fe.legacy=!0,Fe}function kt(Te,be){for(var Fe in be)(0,g.RI)(be,Fe)&&(Te[Fe]=be[Fe])}function jt(Te,be){Te&&(Te.textFill&&(be.textFill=Te.textFill),Te.textPosition&&(be.textPosition=Te.textPosition))}function re(Te,be){if(be==null&&(be=d),(0,g.RI)(Zy,Te)){var Fe=r.getItemVisual(be,"style");return Fe?Fe[Zy[Te]]:null}if((0,g.RI)(ST,Te))return r.getItemVisual(be,Te)}function ae(Te){if(s.type==="cartesian2d"){var be=s.getBaseAxis();return(0,ri.Gk)((0,g.ce)({axis:be},Te))}}function he(){return e.getCurrentSeriesIndices()}function me(Te){return or.qT(Te,e)}}function $T(a){var r={};return(0,g.S6)(a.dimensions,function(e){var n=a.getDimensionInfo(e);if(!n.isExtraCoord){var o=n.coordDim,s=r[o]=r[o]||[];s[n.coordDimIndex]=a.getDimensionIndex(e)}}),r}function im(a,r,e,n,o,s,u){if(!n){s.remove(r);return}var h=am(a,r,e,n,o,s);return h&&u.setItemGraphicEl(e,h),h&&(0,ir.k5)(h,n.focus,n.blurScope,n.emphasisDisabled),h}function am(a,r,e,n,o,s){var u=-1,h=r;r&&i_(r,n,o)&&(u=(0,g.cq)(s.childrenRef(),r),r=null);var v=!r,d=r;d?d.clearStates():(d=rm(n),h&&YT(h,d)),n.morph===!1?d.disableMorphing=!0:d.disableMorphing&&(d.disableMorphing=!1),Oa.normal.cfg=Oa.normal.conOpt=Oa.emphasis.cfg=Oa.emphasis.conOpt=Oa.blur.cfg=Oa.blur.conOpt=Oa.select.cfg=Oa.select.conOpt=null,Oa.isLegacy=!1,tw(d,e,n,o,v,Oa),qT(d,e,n,o,v),nm(a,d,e,n,Oa,o,v),(0,g.RI)(n,"info")&&(xs(d).info=n.info);for(var m=0;m<hl.length;m++){var _=hl[m];if(_!==fl){var S=gd(n,_),b=om(n,S,_);r_(_,d,S,b,Oa)}}return JT(d,n,o),n.type==="group"&&ew(a,d,e,n,o),u>=0?s.replaceAt(d,u):s.add(d),d}function i_(a,r,e){var n=xs(a),o=r.type,s=r.shape,u=r.style;return e.isUniversalTransitionEnabled()||o!=null&&o!==n.customGraphicType||o==="path"&&iw(s)&&l_(s)!==n.customPathData||o==="image"&&(0,g.RI)(u,"image")&&u.image!==n.customImagePath}function qT(a,r,e,n,o){var s=e.clipPath;if(s===!1)a&&a.getClipPath()&&a.removeClipPath();else if(s){var u=a.getClipPath();u&&i_(u,s,n)&&(u=null),u||(u=rm(s),a.setClipPath(u)),nm(null,u,r,s,null,n,o)}}function tw(a,r,e,n,o,s){if(!a.isGroup){a_(e,null,s),a_(e,Ss,s);var u=s.normal.conOpt,h=s.emphasis.conOpt,v=s.blur.conOpt,d=s.select.conOpt;if(u!=null||h!=null||d!=null||v!=null){var m=a.getTextContent();if(u===!1)m&&a.removeTextContent();else{u=s.normal.conOpt=u||{type:"text"},m?m.clearStates():(m=rm(u),a.setTextContent(m)),nm(null,m,r,u,null,n,o);for(var _=u&&u.style,S=0;S<hl.length;S++){var b=hl[S];if(b!==fl){var P=s[b].conOpt;r_(b,m,P,om(u,P,b),null)}}_?m.dirty():m.markRedraw()}}}}function a_(a,r,e){var n=r?gd(a,r):a,o=r?om(a,n,Ss):a.style,s=a.type,u=n?n.textConfig:null,h=a.textContent,v=h?r?gd(h,r):h:null;if(o&&(e.isLegacy||Wy(o,s,!!u,!!v))){e.isLegacy=!0;var d=Hy(o,s,!r);!u&&d.textConfig&&(u=d.textConfig),!v&&d.textContent&&(v=d.textContent)}if(!r&&v){var m=v;!m.type&&(m.type="text")}var _=r?e[r]:e.normal;_.cfg=u,_.conOpt=v}function gd(a,r){return r?a?a[r]:null:a}function om(a,r,e){var n=r&&r.style;return n==null&&e===Ss&&a&&(n=a.styleEmphasis),n}function ew(a,r,e,n,o){var s=n.children,u=s?s.length:0,h=n.$mergeChildren,v=h==="byName"||n.diffChildrenByName,d=h===!1;if(!(!u&&!v&&!d)){if(v){rw({api:a,oldChildren:r.children()||[],newChildren:s||[],dataIndex:e,seriesModel:o,group:r});return}d&&r.removeAll();for(var m=0;m<u;m++)s[m]&&am(a,r.childAt(m),e,s[m],o,r);for(var _=r.childCount()-1;_>=m;_--){var S=r.childAt(_);dd(S,xs(r).option,o)}}}function rw(a){new yo.Z(a.oldChildren,a.newChildren,o_,o_,a).add(s_).update(s_).remove(nw).execute()}function o_(a,r){var e=a&&a.name;return e??HT+r}function s_(a,r){var e=this.context,n=a!=null?e.newChildren[a]:null,o=r!=null?e.oldChildren[r]:null;am(e.api,o,e.dataIndex,n,e.seriesModel,e.group)}function nw(a){var r=this.context,e=r.oldChildren[a];dd(e,xs(e).option,r.seriesModel)}function l_(a){return a&&(a.pathData||a.d)}function iw(a){return a&&((0,g.RI)(a,"pathData")||(0,g.RI)(a,"d"))}function aw(a){a.registerChartView(jT),a.registerSeriesModel(wT)}var ru=(0,Xe.Yf)(),u_=g.d9,sm=g.ak,ow=function(){function a(){this._dragging=!1,this.animationThreshold=15}return a.prototype.render=function(r,e,n,o){var s=e.get("value"),u=e.get("status");if(this._axisModel=r,this._axisPointerModel=e,this._api=n,!(!o&&this._lastValue===s&&this._lastStatus===u)){this._lastValue=s,this._lastStatus=u;var h=this._group,v=this._handle;if(!u||u==="hide"){h&&h.hide(),v&&v.hide();return}h&&h.show(),v&&v.show();var d={};this.makeElOption(d,s,r,e,n);var m=d.graphicKey;m!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=m;var _=this._moveAnimation=this.determineAnimation(r,e);if(!h)h=this._group=new Mr.Z,this.createPointerEl(h,d,r,e),this.createLabelEl(h,d,r,e),n.getZr().add(h);else{var S=g.WA(f_,e,_);this.updatePointerEl(h,d,S),this.updateLabelEl(h,d,S,e)}v_(h,e,!0),this._renderHandle(s)}},a.prototype.remove=function(r){this.clear(r)},a.prototype.dispose=function(r){this.clear(r)},a.prototype.determineAnimation=function(r,e){var n=e.get("animation"),o=r.axis,s=o.type==="category",u=e.get("snap");if(!u&&!s)return!1;if(n==="auto"||n==null){var h=this.animationThreshold;if(s&&o.getBandWidth()>h)return!0;if(u){var v=yc(r).seriesDataCount,d=o.getExtent();return Math.abs(d[0]-d[1])/v>h}return!1}return n===!0},a.prototype.makeElOption=function(r,e,n,o,s){},a.prototype.createPointerEl=function(r,e,n,o){var s=e.pointer;if(s){var u=ru(r).pointerEl=new br[s.type](u_(e.pointer));r.add(u)}},a.prototype.createLabelEl=function(r,e,n,o){if(e.label){var s=ru(r).labelEl=new ee.ZP(u_(e.label));r.add(s),c_(s,o)}},a.prototype.updatePointerEl=function(r,e,n){var o=ru(r).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),n(o,{shape:e.pointer.shape}))},a.prototype.updateLabelEl=function(r,e,n,o){var s=ru(r).labelEl;s&&(s.setStyle(e.label.style),n(s,{x:e.label.x,y:e.label.y}),c_(s,o))},a.prototype._renderHandle=function(r){if(!(this._dragging||!this.updateHandleTransform)){var e=this._axisPointerModel,n=this._api.getZr(),o=this._handle,s=e.getModel("handle"),u=e.get("status");if(!s.get("show")||!u||u==="hide"){o&&n.remove(o),this._handle=null;return}var h;this._handle||(h=!0,o=this._handle=br.createIcon(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){Ri.sT(d.event)},onmousedown:sm(this._onHandleDragMove,this,0,0),drift:sm(this._onHandleDragMove,this),ondragend:sm(this._onHandleDragEnd,this)}),n.add(o)),v_(o,e,!1),o.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var v=s.get("size");g.kJ(v)||(v=[v,v]),o.scaleX=v[0]/2,o.scaleY=v[1]/2,ni.T9(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(r,h)}},a.prototype._moveHandleToValue=function(r,e){f_(this._axisPointerModel,!e&&this._moveAnimation,this._handle,lm(this.getHandleTransform(r,this._axisModel,this._axisPointerModel)))},a.prototype._onHandleDragMove=function(r,e){var n=this._handle;if(!!n){this._dragging=!0;var o=this.updateHandleTransform(lm(n),[r,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(lm(o)),ru(n).lastProp=null,this._doDispatchAxisPointer()}},a.prototype._doDispatchAxisPointer=function(){var r=this._handle;if(!!r){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},a.prototype._onHandleDragEnd=function(){this._dragging=!1;var r=this._handle;if(!!r){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},a.prototype.clear=function(r){this._lastValue=null,this._lastStatus=null;var e=r.getZr(),n=this._group,o=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),ni.ZH(this,"_doDispatchAxisPointer")},a.prototype.doClear=function(){},a.prototype.buildLabel=function(r,e,n){return n=n||0,{x:r[n],y:r[1-n],width:e[n],height:e[1-n]}},a}();function f_(a,r,e,n){h_(ru(e).lastProp,n)||(ru(e).lastProp=n,r?cr.D(e,n,a):(e.stopAnimation(),e.attr(n)))}function h_(a,r){if(g.Kn(a)&&g.Kn(r)){var e=!0;return g.S6(r,function(n,o){e=e&&h_(a[o],n)}),!!e}else return a===r}function c_(a,r){a[r.get(["label","show"])?"show":"hide"]()}function lm(a){return{x:a.x||0,y:a.y||0,rotation:a.rotation||0}}function v_(a,r,e){var n=r.get("z"),o=r.get("zlevel");a&&a.traverse(function(s){s.type!=="group"&&(n!=null&&(s.z=n),o!=null&&(s.zlevel=o),s.silent=e)})}var um=ow;function fm(a){var r=a.get("type"),e=a.getModel(r+"Style"),n;return r==="line"?(n=e.getLineStyle(),n.fill=null):r==="shadow"&&(n=e.getAreaStyle(),n.stroke=null),n}function d_(a,r,e,n,o){var s=e.get("value"),u=p_(s,r.axis,r.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),h=e.getModel("label"),v=Cn.MY(h.get("padding")||0),d=h.getFont(),m=vt.lP(u,d),_=o.position,S=m.width+v[1]+v[3],b=m.height+v[0]+v[2],P=o.align;P==="right"&&(_[0]-=S),P==="center"&&(_[0]-=S/2);var R=o.verticalAlign;R==="bottom"&&(_[1]-=b),R==="middle"&&(_[1]-=b/2),sw(_,S,b,n);var Y=h.get("backgroundColor");(!Y||Y==="auto")&&(Y=r.get(["axisLine","lineStyle","color"])),a.label={x:_[0],y:_[1],style:(0,or.Lr)(h,{text:u,font:d,fill:h.getTextColor(),padding:v,backgroundColor:Y}),z2:10}}function sw(a,r,e,n){var o=n.getWidth(),s=n.getHeight();a[0]=Math.min(a[0]+r,o)-r,a[1]=Math.min(a[1]+e,s)-e,a[0]=Math.max(a[0],0),a[1]=Math.max(a[1],0)}function p_(a,r,e,n,o){a=r.scale.parse(a);var s=r.scale.getLabel({value:a},{precision:o.precision}),u=o.formatter;if(u){var h={value:ii.DX(r,{value:a}),axisDimension:r.dim,axisIndex:r.index,seriesData:[]};g.S6(n,function(v){var d=e.getSeriesByIndex(v.seriesIndex),m=v.dataIndexInside,_=d&&d.getDataParams(m);_&&h.seriesData.push(_)}),g.HD(u)?s=u.replace("{value}",s):g.mf(u)&&(s=u(h))}return s}function hm(a,r,e){var n=gn.Ue();return gn.U1(n,n,e.rotation),gn.Iu(n,n,e.position),br.applyTransform([a.dataToCoord(r),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],n)}function g_(a,r,e,n,o,s){var u=ma.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=o.get(["label","margin"]),d_(r,n,o,s,{position:hm(n.axis,a,e),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function cm(a,r,e){return e=e||0,{x1:a[e],y1:a[1-e],x2:r[e],y2:r[1-e]}}function m_(a,r,e){return e=e||0,{x:a[e],y:a[1-e],width:r[e],height:r[1-e]}}function y_(a,r,e,n,o,s){return{cx:a,cy:r,r0:e,r:n,startAngle:o,endAngle:s,clockwise:!0}}var lw=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis,v=h.grid,d=s.get("type"),m=__(v,h).getOtherAxis(h).getGlobalExtent(),_=h.toGlobalCoord(h.dataToCoord(n,!0));if(d&&d!=="none"){var S=fm(s),b=uw[d](h,_,m);b.style=S,e.graphicKey=b.type,e.pointer=b}var P=Us(v.model,o);g_(n,e,P,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=Us(n.axis.grid.model,n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=hm(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,h=u.grid,v=u.getGlobalExtent(!0),d=__(h,u).getOtherAxis(u).getGlobalExtent(),m=u.dim==="x"?0:1,_=[e.x,e.y];_[m]+=n[m],_[m]=Math.min(v[1],_[m]),_[m]=Math.max(v[0],_[m]);var S=(d[1]+d[0])/2,b=[S,S];b[m]=_[m];var P=[{verticalAlign:"middle"},{align:"center"}];return{x:_[0],y:_[1],rotation:e.rotation,cursorPoint:b,tooltipOption:P[m]}},r}(um);function __(a,r){var e={};return e[r.dim+"AxisIndex"]=r.index,a.getCartesian(e)}var uw={line:function(a,r,e){var n=cm([r,e[0]],[r,e[1]],x_(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=Math.max(1,a.getBandWidth()),o=e[1]-e[0];return{type:"Rect",shape:m_([r-n/2,e[0]],[n,o],x_(a))}}};function x_(a){return a.dim==="x"?0:1}var fw=lw,hw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="axisPointer",r.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},r}(kn.Z),cw=hw,ta=F(66387),Ts=(0,Xe.Yf)(),vw=g.S6;function S_(a,r,e){if(!ta.Z.node){var n=r.getZr();Ts(n).records||(Ts(n).records={}),dw(n,r);var o=Ts(n).records[a]||(Ts(n).records[a]={});o.handler=e}}function dw(a,r){if(Ts(a).initialized)return;Ts(a).initialized=!0,e("click",g.WA(T_,"click")),e("mousemove",g.WA(T_,"mousemove")),e("globalout",gw);function e(n,o){a.on(n,function(s){var u=mw(r);vw(Ts(a).records,function(h){h&&o(h,s,u.dispatchAction)}),pw(u.pendings,r)})}}function pw(a,r){var e=a.showTip.length,n=a.hideTip.length,o;e?o=a.showTip[e-1]:n&&(o=a.hideTip[n-1]),o&&(o.dispatchAction=null,r.dispatchAction(o))}function gw(a,r,e){a.handler("leave",null,e)}function T_(a,r,e,n){r.handler(a,e,n)}function mw(a){var r={showTip:[],hideTip:[]},e=function(n){var o=r[n.type];o?o.push(n):(n.dispatchAction=e,a.dispatchAction(n))};return{dispatchAction:e,pendings:r}}function vm(a,r){if(!ta.Z.node){var e=r.getZr(),n=(Ts(e).records||{})[a];n&&(Ts(e).records[a]=null)}}var yw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=n.getComponent("tooltip"),u=e.get("triggerOn")||s&&s.get("triggerOn")||"mousemove|click";S_("axisPointer",o,function(h,v,d){u!=="none"&&(h==="leave"||u.indexOf(h)>=0)&&d({type:"updateAxisPointer",currTrigger:h,x:v&&v.offsetX,y:v&&v.offsetY})})},r.prototype.remove=function(e,n){vm("axisPointer",n)},r.prototype.dispose=function(e,n){vm("axisPointer",n)},r.type="axisPointer",r}(pn.Z),_w=yw;function w_(a,r){var e=[],n=a.seriesIndex,o;if(n==null||!(o=r.getSeriesByIndex(n)))return{point:[]};var s=o.getData(),u=Xe.gO(s,a);if(u==null||u<0||g.kJ(u))return{point:[]};var h=s.getItemGraphicEl(u),v=o.coordinateSystem;if(o.getTooltipPosition)e=o.getTooltipPosition(u)||[];else if(v&&v.dataToPoint)if(a.isStacked){var d=v.getBaseAxis(),m=v.getOtherAxis(d),_=m.dim,S=d.dim,b=_==="x"||_==="radius"?1:0,P=s.mapDimension(S),R=[];R[b]=s.get(P,u),R[1-b]=s.get(s.getCalculationInfo("stackResultDimension"),u),e=v.dataToPoint(R)||[]}else e=v.dataToPoint(s.getValues(g.UI(v.dimensions,function(nt){return s.mapDimension(nt)}),u))||[];else if(h){var Y=h.getBoundingRect().clone();Y.applyTransform(h.transform),e=[Y.x+Y.width/2,Y.y+Y.height/2]}return{point:e,el:h}}var D_=(0,Xe.Yf)();function xw(a,r,e){var n=a.currTrigger,o=[a.x,a.y],s=a,u=a.dispatchAction||(0,g.ak)(e.dispatchAction,e),h=r.getComponent("axisPointer").coordSysAxesInfo;if(!!h){md(o)&&(o=w_({seriesIndex:s.seriesIndex,dataIndex:s.dataIndex},r).point);var v=md(o),d=s.axesInfo,m=h.axesInfo,_=n==="leave"||md(o),S={},b={},P={list:[],map:{}},R={showPointer:(0,g.WA)(Tw,b),showTooltip:(0,g.WA)(ww,P)};(0,g.S6)(h.coordSysMap,function(nt,pt){var mt=v||nt.containPoint(o);(0,g.S6)(h.coordSysAxesInfo[pt],function(bt,Lt){var Pt=bt.axis,Ot=Mw(d,bt);if(!_&&mt&&(!d||Ot)){var kt=Ot&&Ot.value;kt==null&&!v&&(kt=Pt.pointToData(o)),kt!=null&&A_(bt,kt,R,!1,S)}})});var Y={};return(0,g.S6)(m,function(nt,pt){var mt=nt.linkGroup;mt&&!b[pt]&&(0,g.S6)(mt.axesInfo,function(bt,Lt){var Pt=b[Lt];if(bt!==nt&&Pt){var Ot=Pt.value;mt.mapper&&(Ot=nt.axis.scale.parse(mt.mapper(Ot,b_(bt),b_(nt)))),Y[nt.key]=Ot}})}),(0,g.S6)(Y,function(nt,pt){A_(m[pt],nt,R,!0,S)}),Dw(b,m,S),Aw(P,o,a,u),bw(m,u,e),S}}function A_(a,r,e,n,o){var s=a.axis;if(!(s.scale.isBlank()||!s.containData(r))){if(!a.involveSeries){e.showPointer(a,r);return}var u=Sw(r,a),h=u.payloadBatch,v=u.snapToValue;h[0]&&o.seriesIndex==null&&(0,g.l7)(o,h[0]),!n&&a.snap&&s.containData(v)&&v!=null&&(r=v),e.showPointer(a,r,h),e.showTooltip(a,u,v)}}function Sw(a,r){var e=r.axis,n=e.dim,o=a,s=[],u=Number.MAX_VALUE,h=-1;return(0,g.S6)(r.seriesModels,function(v,d){var m=v.getData().mapDimensionsAll(n),_,S;if(v.getAxisTooltipData){var b=v.getAxisTooltipData(m,a,e);S=b.dataIndices,_=b.nestestValue}else{if(S=v.getData().indicesOfNearest(m[0],a,e.type==="category"?.5:null),!S.length)return;_=v.getData().get(m[0],S[0])}if(!(_==null||!isFinite(_))){var P=a-_,R=Math.abs(P);R<=u&&((R<u||P>=0&&h<0)&&(u=R,h=P,o=_,s.length=0),(0,g.S6)(S,function(Y){s.push({seriesIndex:v.seriesIndex,dataIndexInside:Y,dataIndex:v.getData().getRawIndex(Y)})}))}}),{payloadBatch:s,snapToValue:o}}function Tw(a,r,e,n){a[r.key]={value:e,payloadBatch:n}}function ww(a,r,e,n){var o=e.payloadBatch,s=r.axis,u=s.model,h=r.axisPointerModel;if(!(!r.triggerTooltip||!o.length)){var v=r.coordSys.model,d=Ml(v),m=a.map[d];m||(m=a.map[d]={coordSysId:v.id,coordSysIndex:v.componentIndex,coordSysType:v.type,coordSysMainType:v.mainType,dataByAxis:[]},a.list.push(m)),m.dataByAxis.push({axisDim:s.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:n,valueLabelOpt:{precision:h.get(["label","precision"]),formatter:h.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function Dw(a,r,e){var n=e.axesInfo=[];(0,g.S6)(r,function(o,s){var u=o.axisPointerModel.option,h=a[s];h?(!o.useHandle&&(u.status="show"),u.value=h.value,u.seriesDataIndices=(h.payloadBatch||[]).slice()):!o.useHandle&&(u.status="hide"),u.status==="show"&&n.push({axisDim:o.axis.dim,axisIndex:o.axis.model.componentIndex,value:u.value})})}function Aw(a,r,e,n){if(md(r)||!a.list.length){n({type:"hideTip"});return}var o=((a.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:r[0],y:r[1],tooltipOption:e.tooltipOption,position:e.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:a.list})}function bw(a,r,e){var n=e.getZr(),o="axisPointerLastHighlights",s=D_(n)[o]||{},u=D_(n)[o]={};(0,g.S6)(a,function(d,m){var _=d.axisPointerModel.option;_.status==="show"&&(0,g.S6)(_.seriesDataIndices,function(S){var b=S.seriesIndex+" | "+S.dataIndex;u[b]=S})});var h=[],v=[];(0,g.S6)(s,function(d,m){!u[m]&&v.push(d)}),(0,g.S6)(u,function(d,m){!s[m]&&h.push(d)}),v.length&&e.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:v}),h.length&&e.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:h})}function Mw(a,r){for(var e=0;e<(a||[]).length;e++){var n=a[e];if(r.axis.dim===n.axisDim&&r.axis.model.componentIndex===n.axisIndex)return n}}function b_(a){var r=a.axis.model,e={},n=e.axisDim=a.axis.dim;return e.axisIndex=e[n+"AxisIndex"]=r.componentIndex,e.axisName=e[n+"AxisName"]=r.name,e.axisId=e[n+"AxisId"]=r.id,e}function md(a){return!a||a[0]==null||isNaN(a[0])||a[1]==null||isNaN(a[1])}function Jh(a){Xr.registerAxisPointerClass("CartesianAxisPointer",fw),a.registerComponentModel(cw),a.registerComponentView(_w),a.registerPreprocessor(function(r){if(r){(!r.axisPointer||r.axisPointer.length===0)&&(r.axisPointer={});var e=r.axisPointer.link;e&&!(0,g.kJ)(e)&&(r.axisPointer.link=[e])}}),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,function(r,e){r.getComponent("axisPointer").coordSysAxesInfo=mu(r,e)}),a.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},xw)}function Ew(a){(0,N.D)(El),(0,N.D)(Jh)}var Cw=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis;h.dim==="angle"&&(this.animationThreshold=Math.PI/18);var v=h.polar,d=v.getOtherAxis(h),m=d.getExtent(),_=h.dataToCoord(n),S=s.get("type");if(S&&S!=="none"){var b=fm(s),P=Lw[S](h,v,_,m);P.style=b,e.graphicKey=P.type,e.pointer=P}var R=s.get(["label","margin"]),Y=Pw(n,o,s,v,R);d_(e,o,s,u,Y)},r}(um);function Pw(a,r,e,n,o){var s=r.axis,u=s.dataToCoord(a),h=n.getAngleAxis().getExtent()[0];h=h/180*Math.PI;var v=n.getRadiusAxis().getExtent(),d,m,_;if(s.dim==="radius"){var S=gn.Ue();gn.U1(S,S,h),gn.Iu(S,S,[n.cx,n.cy]),d=br.applyTransform([u,-o],S);var b=r.getModel("axisLabel").get("rotate")||0,P=ma.innerTextLayout(h,b*Math.PI/180,-1);m=P.textAlign,_=P.textVerticalAlign}else{var R=v[1];d=n.coordToPoint([R+o,u]);var Y=n.cx,nt=n.cy;m=Math.abs(d[0]-Y)/R<.3?"center":d[0]>Y?"left":"right",_=Math.abs(d[1]-nt)/R<.3?"middle":d[1]>nt?"top":"bottom"}return{position:d,align:m,verticalAlign:_}}var Lw={line:function(a,r,e,n){return a.dim==="angle"?{type:"Line",shape:cm(r.coordToPoint([n[0],e]),r.coordToPoint([n[1],e]))}:{type:"Circle",shape:{cx:r.cx,cy:r.cy,r:e}}},shadow:function(a,r,e,n){var o=Math.max(1,a.getBandWidth()),s=Math.PI/180;return a.dim==="angle"?{type:"Sector",shape:y_(r.cx,r.cy,n[0],n[1],(-e-o/2)*s,(-e+o/2)*s)}:{type:"Sector",shape:y_(r.cx,r.cy,e-o/2,e+o/2,0,Math.PI*2)}}},Iw=Cw,Rw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.findAxisModel=function(e){var n,o=this.ecModel;return o.eachComponent(e,function(s){s.getCoordSysModel()===this&&(n=s)},this),n},r.type="polar",r.dependencies=["radiusAxis","angleAxis"],r.defaultOption={z:0,center:["50%","50%"],radius:"80%"},r}(kn.Z),Ow=Rw,dm=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Xe.C6).models[0]},r.type="polarAxis",r}(kn.Z);g.jB(dm,Uo.W);var Nw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="angleAxis",r}(dm),Bw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="radiusAxis",r}(dm),pm=function(a){(0,fe.ZT)(r,a);function r(e,n){return a.call(this,"radius",e,n)||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r}(Pa.Z);pm.prototype.dataToRadius=Pa.Z.prototype.dataToCoord,pm.prototype.radiusToData=Pa.Z.prototype.coordToData;var Fw=pm,zw=(0,Xe.Yf)(),gm=function(a){(0,fe.ZT)(r,a);function r(e,n){return a.call(this,"angle",e,n||[0,360])||this}return r.prototype.pointToData=function(e,n){return this.polar.pointToData(e,n)[this.dim==="radius"?0:1]},r.prototype.calculateCategoryInterval=function(){var e=this,n=e.getLabelModel(),o=e.scale,s=o.getExtent(),u=o.count();if(s[1]-s[0]<1)return 0;var h=s[0],v=e.dataToCoord(h+1)-e.dataToCoord(h),d=Math.abs(v),m=vt.lP(h==null?"":h+"",n.getFont(),"center","top"),_=Math.max(m.height,7),S=_/d;isNaN(S)&&(S=1/0);var b=Math.max(0,Math.floor(S)),P=zw(e.model),R=P.lastAutoInterval,Y=P.lastTickCount;return R!=null&&Y!=null&&Math.abs(R-b)<=1&&Math.abs(Y-u)<=1&&R>b?b=R:(P.lastTickCount=u,P.lastAutoInterval=b),b},r}(Pa.Z);gm.prototype.dataToAngle=Pa.Z.prototype.dataToCoord,gm.prototype.angleToData=Pa.Z.prototype.coordToData;var Gw=gm,M_=["radius","angle"],Uw=function(){function a(r){this.dimensions=M_,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new Fw,this._angleAxis=new Gw,this.axisPointerEnabled=!0,this.name=r||"",this._radiusAxis.polar=this._angleAxis.polar=this}return a.prototype.containPoint=function(r){var e=this.pointToCoord(r);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},a.prototype.containData=function(r){return this._radiusAxis.containData(r[0])&&this._angleAxis.containData(r[1])},a.prototype.getAxis=function(r){var e="_"+r+"Axis";return this[e]},a.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},a.prototype.getAxesByScale=function(r){var e=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===r&&e.push(n),o.scale.type===r&&e.push(o),e},a.prototype.getAngleAxis=function(){return this._angleAxis},a.prototype.getRadiusAxis=function(){return this._radiusAxis},a.prototype.getOtherAxis=function(r){var e=this._angleAxis;return r===e?this._radiusAxis:e},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},a.prototype.getTooltipAxes=function(r){var e=r!=null&&r!=="auto"?this.getAxis(r):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},a.prototype.dataToPoint=function(r,e){return this.coordToPoint([this._radiusAxis.dataToRadius(r[0],e),this._angleAxis.dataToAngle(r[1],e)])},a.prototype.pointToData=function(r,e){var n=this.pointToCoord(r);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},a.prototype.pointToCoord=function(r){var e=r[0]-this.cx,n=r[1]-this.cy,o=this.getAngleAxis(),s=o.getExtent(),u=Math.min(s[0],s[1]),h=Math.max(s[0],s[1]);o.inverse?u=h-360:h=u+360;var v=Math.sqrt(e*e+n*n);e/=v,n/=v;for(var d=Math.atan2(-n,e)/Math.PI*180,m=d<u?1:-1;d<u||d>h;)d+=m*360;return[v,d]},a.prototype.coordToPoint=function(r){var e=r[0],n=r[1]/180*Math.PI,o=Math.cos(n)*e+this.cx,s=-Math.sin(n)*e+this.cy;return[o,s]},a.prototype.getArea=function(){var r=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var o=r.getExtent(),s=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:r.inverse,contain:function(u,h){var v=u-this.cx,d=h-this.cy,m=v*v+d*d-1e-4,_=this.r,S=this.r0;return m<=_*_&&m>=S*S}}},a.prototype.convertToPixel=function(r,e,n){var o=E_(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=E_(e);return o===this?this.pointToData(n):null},a}();function E_(a){var r=a.seriesModel,e=a.polarModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var kw=Uw;function Vw(a,r,e){var n=r.get("center"),o=e.getWidth(),s=e.getHeight();a.cx=(0,Ie.GM)(n[0],o),a.cy=(0,Ie.GM)(n[1],s);var u=a.getRadiusAxis(),h=Math.min(o,s)/2,v=r.get("radius");v==null?v=[0,"100%"]:g.kJ(v)||(v=[0,v]);var d=[(0,Ie.GM)(v[0],h),(0,Ie.GM)(v[1],h)];u.inverse?u.setExtent(d[1],d[0]):u.setExtent(d[0],d[1])}function Zw(a,r){var e=this,n=e.getAngleAxis(),o=e.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),a.eachSeries(function(h){if(h.coordinateSystem===e){var v=h.getData();g.S6((0,ii.PY)(v,"radius"),function(d){o.scale.unionExtentFromData(v,d)}),g.S6((0,ii.PY)(v,"angle"),function(d){n.scale.unionExtentFromData(v,d)})}}),(0,ii.Jk)(n.scale,n.model),(0,ii.Jk)(o.scale,o.model),n.type==="category"&&!n.onBand){var s=n.getExtent(),u=360/n.scale.count();n.inverse?s[1]+=u:s[1]-=u,n.setExtent(s[0],s[1])}}function Ww(a){return a.mainType==="angleAxis"}function C_(a,r){if(a.type=r.get("type"),a.scale=(0,ii.aG)(r),a.onBand=r.get("boundaryGap")&&a.type==="category",a.inverse=r.get("inverse"),Ww(r)){a.inverse=a.inverse!==r.get("clockwise");var e=r.get("startAngle");a.setExtent(e,e+(a.inverse?-360:360))}r.axis=a,a.model=r}var Hw={dimensions:M_,create:function(a,r){var e=[];return a.eachComponent("polar",function(n,o){var s=new kw(o+"");s.update=Zw;var u=s.getRadiusAxis(),h=s.getAngleAxis(),v=n.findAxisModel("radiusAxis"),d=n.findAxisModel("angleAxis");C_(u,v),C_(h,d),Vw(s,n,r),e.push(s),n.coordinateSystem=s,s.model=n}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="polar"){var o=n.getReferringComponents("polar",Xe.C6).models[0];n.coordinateSystem=o.coordinateSystem}}),e}},Xw=Hw,Yw=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function yd(a,r,e){r[1]>r[0]&&(r=r.slice().reverse());var n=a.coordToPoint([r[0],e]),o=a.coordToPoint([r[1],e]);return{x1:n[0],y1:n[1],x2:o[0],y2:o[1]}}function _d(a){var r=a.getRadiusAxis();return r.inverse?0:1}function P_(a){var r=a[0],e=a[a.length-1];r&&e&&Math.abs(Math.abs(r.coord-e.coord)-360)<1e-4&&a.pop()}var Kw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=e.axis,s=o.polar,u=s.getRadiusAxis().getExtent(),h=o.getTicksCoords(),v=o.getMinorTicksCoords(),d=g.UI(o.getViewLabels(),function(m){m=g.d9(m);var _=o.scale,S=_.type==="ordinal"?_.getRawOrdinalNumber(m.tickValue):m.tickValue;return m.coord=o.dataToCoord(S),m});P_(d),P_(h),g.S6(Yw,function(m){e.get([m,"show"])&&(!o.scale.isBlank()||m==="axisLine")&&jw[m](this.group,e,s,h,v,u,d)},this)}},r.type="angleAxis",r}(Xr),jw={axisLine:function(a,r,e,n,o,s){var u=r.getModel(["axisLine","lineStyle"]),h=_d(e),v=h?0:1,d;s[v]===0?d=new Xo.Z({shape:{cx:e.cx,cy:e.cy,r:s[h]},style:u.getLineStyle(),z2:1,silent:!0}):d=new Ac.Z({shape:{cx:e.cx,cy:e.cy,r:s[h],r0:s[v]},style:u.getLineStyle(),z2:1,silent:!0}),d.style.fill=null,a.add(d)},axisTick:function(a,r,e,n,o,s){var u=r.getModel("axisTick"),h=(u.get("inside")?-1:1)*u.get("length"),v=s[_d(e)],d=g.UI(n,function(m){return new Mi.Z({shape:yd(e,[v,v+h],m.coord)})});a.add(br.mergePath(d,{style:g.ce(u.getModel("lineStyle").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})}))},minorTick:function(a,r,e,n,o,s){if(!!o.length){for(var u=r.getModel("axisTick"),h=r.getModel("minorTick"),v=(u.get("inside")?-1:1)*h.get("length"),d=s[_d(e)],m=[],_=0;_<o.length;_++)for(var S=0;S<o[_].length;S++)m.push(new Mi.Z({shape:yd(e,[d,d+v],o[_][S].coord)}));a.add(br.mergePath(m,{style:g.ce(h.getModel("lineStyle").getLineStyle(),g.ce(u.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(a,r,e,n,o,s,u){var h=r.getCategories(!0),v=r.getModel("axisLabel"),d=v.get("margin"),m=r.get("triggerEvent");g.S6(u,function(_,S){var b=v,P=_.tickValue,R=s[_d(e)],Y=e.coordToPoint([R+d,_.coord]),nt=e.cx,pt=e.cy,mt=Math.abs(Y[0]-nt)/R<.3?"center":Y[0]>nt?"left":"right",bt=Math.abs(Y[1]-pt)/R<.3?"middle":Y[1]>pt?"top":"bottom";if(h&&h[P]){var Lt=h[P];g.Kn(Lt)&&Lt.textStyle&&(b=new Xn.Z(Lt.textStyle,v,v.ecModel))}var Pt=new ee.ZP({silent:ma.isLabelSilent(r),style:(0,or.Lr)(b,{x:Y[0],y:Y[1],fill:b.getTextColor()||r.get(["axisLine","lineStyle","color"]),text:_.formattedLabel,align:mt,verticalAlign:bt})});if(a.add(Pt),m){var Ot=ma.makeAxisEventDataBase(r);Ot.targetType="axisLabel",Ot.value=_.rawLabel,(0,Hr.A)(Pt).eventData=Ot}},this)},splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),h=u.getModel("lineStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=0;_<n.length;_++){var S=d++%v.length;m[S]=m[S]||[],m[S].push(new Mi.Z({shape:yd(e,s,n[_].coord)}))}for(var _=0;_<m.length;_++)a.add(br.mergePath(m[_],{style:g.ce({stroke:v[_%v.length]},h.getLineStyle()),silent:!0,z:r.get("z")}))},minorSplitLine:function(a,r,e,n,o,s){if(!!o.length){for(var u=r.getModel("minorSplitLine"),h=u.getModel("lineStyle"),v=[],d=0;d<o.length;d++)for(var m=0;m<o[d].length;m++)v.push(new Mi.Z({shape:yd(e,s,o[d][m].coord)}));a.add(br.mergePath(v,{style:h.getLineStyle(),silent:!0,z:r.get("z")}))}},splitArea:function(a,r,e,n,o,s){if(!!n.length){var u=r.getModel("splitArea"),h=u.getModel("areaStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=Math.PI/180,S=-n[0].coord*_,b=Math.min(s[0],s[1]),P=Math.max(s[0],s[1]),R=r.get("clockwise"),Y=1,nt=n.length;Y<=nt;Y++){var pt=Y===nt?n[0].coord:n[Y].coord,mt=d++%v.length;m[mt]=m[mt]||[],m[mt].push(new Di.C({shape:{cx:e.cx,cy:e.cy,r0:b,r:P,startAngle:S,endAngle:-pt*_,clockwise:R},silent:!0})),S=-pt*_}for(var Y=0;Y<m.length;Y++)a.add(br.mergePath(m[Y],{style:g.ce({fill:v[Y%v.length]},h.getAreaStyle()),silent:!0}))}}},Jw=Kw,Qw=["axisLine","axisTickLabel","axisName"],$w=["splitLine","splitArea","minorSplitLine"],qw=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="PolarAxisPointer",e}return r.prototype.render=function(e,n){if(this.group.removeAll(),!!e.get("show")){var o=this._axisGroup,s=this._axisGroup=new Mr.Z;this.group.add(s);var u=e.axis,h=u.polar,v=h.getAngleAxis(),d=u.getTicksCoords(),m=u.getMinorTicksCoords(),_=v.getExtent()[0],S=u.getExtent(),b=e2(h,e,_),P=new ma(e,b);g.S6(Qw,P.add,P),s.add(P.getGroup()),br.groupTransition(o,s,e),g.S6($w,function(R){e.get([R,"show"])&&!u.scale.isBlank()&&t2[R](this.group,e,h,_,S,d,m)},this)}},r.type="radiusAxis",r}(Xr),t2={splitLine:function(a,r,e,n,o,s){var u=r.getModel("splitLine"),h=u.getModel("lineStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=0;_<s.length;_++){var S=d++%v.length;m[S]=m[S]||[],m[S].push(new Xo.Z({shape:{cx:e.cx,cy:e.cy,r:Math.max(s[_].coord,0)}}))}for(var _=0;_<m.length;_++)a.add(br.mergePath(m[_],{style:g.ce({stroke:v[_%v.length],fill:null},h.getLineStyle()),silent:!0}))},minorSplitLine:function(a,r,e,n,o,s,u){if(!!u.length){for(var h=r.getModel("minorSplitLine"),v=h.getModel("lineStyle"),d=[],m=0;m<u.length;m++)for(var _=0;_<u[m].length;_++)d.push(new Xo.Z({shape:{cx:e.cx,cy:e.cy,r:u[m][_].coord}}));a.add(br.mergePath(d,{style:g.ce({fill:null},v.getLineStyle()),silent:!0}))}},splitArea:function(a,r,e,n,o,s){if(!!s.length){var u=r.getModel("splitArea"),h=u.getModel("areaStyle"),v=h.get("color"),d=0;v=v instanceof Array?v:[v];for(var m=[],_=s[0].coord,S=1;S<s.length;S++){var b=d++%v.length;m[b]=m[b]||[],m[b].push(new Di.C({shape:{cx:e.cx,cy:e.cy,r0:_,r:s[S].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),_=s[S].coord}for(var S=0;S<m.length;S++)a.add(br.mergePath(m[S],{style:g.ce({fill:v[S%v.length]},h.getAreaStyle()),silent:!0}))}}};function e2(a,r,e){return{position:[a.cx,a.cy],rotation:e/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:r.getModel("axisLabel").get("rotate"),z2:1}}var r2=qw;function L_(a){return a.get("stack")||"__ec_stack_"+a.seriesIndex}function I_(a,r){return r.dim+a.model.componentIndex}function n2(a,r,e){var n={},o=i2(g.hX(r.getSeriesByType(a),function(s){return!r.isSeriesFiltered(s)&&s.coordinateSystem&&s.coordinateSystem.type==="polar"}));r.eachSeriesByType(a,function(s){if(s.coordinateSystem.type==="polar"){var u=s.getData(),h=s.coordinateSystem,v=h.getBaseAxis(),d=I_(h,v),m=L_(s),_=o[d][m],S=_.offset,b=_.width,P=h.getOtherAxis(v),R=s.coordinateSystem.cx,Y=s.coordinateSystem.cy,nt=s.get("barMinHeight")||0,pt=s.get("barMinAngle")||0;n[m]=n[m]||[];for(var mt=u.mapDimension(P.dim),bt=u.mapDimension(v.dim),Lt=(0,ur.M)(u,mt),Pt=v.dim!=="radius"||!s.get("roundCap",!0),Ot=P.dataToCoord(0),kt=0,jt=u.count();kt<jt;kt++){var re=u.get(mt,kt),ae=u.get(bt,kt),he=re>=0?"p":"n",me=Ot;Lt&&(n[m][ae]||(n[m][ae]={p:Ot,n:Ot}),me=n[m][ae][he]);var Te=void 0,be=void 0,Fe=void 0,Ye=void 0;if(P.dim==="radius"){var Ue=P.dataToCoord(re)-Ot,$e=v.dataToCoord(ae);Math.abs(Ue)<nt&&(Ue=(Ue<0?-1:1)*nt),Te=me,be=me+Ue,Fe=$e-S,Ye=Fe-b,Lt&&(n[m][ae][he]=be)}else{var Sr=P.dataToCoord(re,Pt)-Ot,Ar=v.dataToCoord(ae);Math.abs(Sr)<pt&&(Sr=(Sr<0?-1:1)*pt),Te=Ar+S,be=Te+b,Fe=me,Ye=me+Sr,Lt&&(n[m][ae][he]=Ye)}u.setItemLayout(kt,{cx:R,cy:Y,r0:Te,r:be,startAngle:-Fe*Math.PI/180,endAngle:-Ye*Math.PI/180,clockwise:Fe>=Ye})}}})}function i2(a){var r={};g.S6(a,function(n,o){var s=n.getData(),u=n.coordinateSystem,h=u.getBaseAxis(),v=I_(u,h),d=h.getExtent(),m=h.type==="category"?h.getBandWidth():Math.abs(d[1]-d[0])/s.count(),_=r[v]||{bandWidth:m,remainedWidth:m,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},S=_.stacks;r[v]=_;var b=L_(n);S[b]||_.autoWidthCount++,S[b]=S[b]||{width:0,maxWidth:0};var P=(0,Ie.GM)(n.get("barWidth"),m),R=(0,Ie.GM)(n.get("barMaxWidth"),m),Y=n.get("barGap"),nt=n.get("barCategoryGap");P&&!S[b].width&&(P=Math.min(_.remainedWidth,P),S[b].width=P,_.remainedWidth-=P),R&&(S[b].maxWidth=R),Y!=null&&(_.gap=Y),nt!=null&&(_.categoryGap=nt)});var e={};return g.S6(r,function(n,o){e[o]={};var s=n.stacks,u=n.bandWidth,h=(0,Ie.GM)(n.categoryGap,u),v=(0,Ie.GM)(n.gap,1),d=n.remainedWidth,m=n.autoWidthCount,_=(d-h)/(m+(m-1)*v);_=Math.max(_,0),g.S6(s,function(R,Y){var nt=R.maxWidth;nt&&nt<_&&(nt=Math.min(nt,d),R.width&&(nt=Math.min(nt,R.width)),d-=nt,R.width=nt,m--)}),_=(d-h)/(m+(m-1)*v),_=Math.max(_,0);var S=0,b;g.S6(s,function(R,Y){R.width||(R.width=_),b=R,S+=R.width*(1+v)}),b&&(S-=b.width*v);var P=-S/2;g.S6(s,function(R,Y){e[o][Y]=e[o][Y]||{offset:P,width:R.width},P+=R.width*(1+v)})}),e}var a2=n2,o2={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},s2={splitNumber:5},l2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="polar",r}(pn.Z);function u2(a){(0,N.D)(Jh),Xr.registerAxisPointerClass("PolarAxisPointer",Iw),a.registerCoordinateSystem("polar",Xw),a.registerComponentModel(Ow),a.registerComponentView(l2),Gs(a,"angle",Nw,o2),Gs(a,"radius",Bw,s2),a.registerComponentView(Jw),a.registerComponentView(r2),a.registerLayout((0,g.WA)(a2,"bar"))}function mm(a,r){r=r||{};var e=a.coordinateSystem,n=a.axis,o={},s=n.position,u=n.orient,h=e.getRect(),v=[h.x,h.x+h.width,h.y,h.y+h.height],d={horizontal:{top:v[2],bottom:v[3]},vertical:{left:v[0],right:v[1]}};o.position=[u==="vertical"?d.vertical[s]:v[0],u==="horizontal"?d.horizontal[s]:v[3]];var m={horizontal:0,vertical:1};o.rotation=Math.PI/2*m[u];var _={top:-1,bottom:1,right:1,left:-1};o.labelDirection=o.tickDirection=o.nameDirection=_[s],a.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),g.Jv(r.labelInside,a.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var S=r.rotate;return S==null&&(S=a.get(["axisLabel","rotate"])),o.labelRotation=s==="top"?-S:S,o.z2=1,o}var f2=["axisLine","axisTickLabel","axisName"],h2=["splitArea","splitLine"],c2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.axisPointerClass="SingleAxisPointer",e}return r.prototype.render=function(e,n,o,s){var u=this.group;u.removeAll();var h=this._axisGroup;this._axisGroup=new Mr.Z;var v=mm(e),d=new ma(e,v);g.S6(f2,d.add,d),u.add(this._axisGroup),u.add(d.getGroup()),g.S6(h2,function(m){e.get([m,"show"])&&v2[m](this,this.group,this._axisGroup,e)},this),br.groupTransition(h,this._axisGroup,e),a.prototype.render.call(this,e,n,o,s)},r.prototype.remove=function(){Sc(this)},r.type="singleAxis",r}(Xr),v2={splitLine:function(a,r,e,n){var o=n.axis;if(!o.scale.isBlank()){var s=n.getModel("splitLine"),u=s.getModel("lineStyle"),h=u.get("color");h=h instanceof Array?h:[h];for(var v=n.coordinateSystem.getRect(),d=o.isHorizontal(),m=[],_=0,S=o.getTicksCoords({tickModel:s}),b=[],P=[],R=0;R<S.length;++R){var Y=o.toGlobalCoord(S[R].coord);d?(b[0]=Y,b[1]=v.y,P[0]=Y,P[1]=v.y+v.height):(b[0]=v.x,b[1]=Y,P[0]=v.x+v.width,P[1]=Y);var nt=_++%h.length;m[nt]=m[nt]||[],m[nt].push(new Mi.Z({subPixelOptimize:!0,shape:{x1:b[0],y1:b[1],x2:P[0],y2:P[1]},silent:!0}))}for(var pt=u.getLineStyle(["color"]),R=0;R<m.length;++R)r.add(br.mergePath(m[R],{style:g.ce({stroke:h[R%h.length]},pt),silent:!0}))}},splitArea:function(a,r,e,n){xc(a,e,n,n)}},d2=c2,R_=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.getCoordSysModel=function(){return this},r.type="singleAxis",r.layoutMode="box",r.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},r}(kn.Z);(0,g.jB)(R_,Uo.W.prototype);var ym=R_,p2=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s,u){var h=a.call(this,e,n,o)||this;return h.type=s||"value",h.position=u||"bottom",h}return r.prototype.isHorizontal=function(){var e=this.position;return e==="top"||e==="bottom"},r.prototype.pointToData=function(e,n){return this.coordinateSystem.pointToData(e)[0]},r}(Pa.Z),g2=p2,O_=["single"],m2=function(){function a(r,e,n){this.type="single",this.dimension="single",this.dimensions=O_,this.axisPointerEnabled=!0,this.model=r,this._init(r,e,n)}return a.prototype._init=function(r,e,n){var o=this.dimension,s=new g2(o,ii.aG(r),[0,0],r.get("type"),r.get("position")),u=s.type==="category";s.onBand=u&&r.get("boundaryGap"),s.inverse=r.get("inverse"),s.orient=r.get("orient"),r.axis=s,s.model=r,s.coordinateSystem=this,this._axis=s},a.prototype.update=function(r,e){r.eachSeries(function(n){if(n.coordinateSystem===this){var o=n.getData();(0,g.S6)(o.mapDimensionsAll(this.dimension),function(s){this._axis.scale.unionExtentFromData(o,s)},this),ii.Jk(this._axis.scale,this._axis.model)}},this)},a.prototype.resize=function(r,e){this._rect=(0,Kr.ME)({left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},a.prototype.getRect=function(){return this._rect},a.prototype._adjustAxis=function(){var r=this._rect,e=this._axis,n=e.isHorizontal(),o=n?[0,r.width]:[0,r.height],s=e.reverse?1:0;e.setExtent(o[s],o[1-s]),this._updateAxisTransform(e,n?r.x:r.y)},a.prototype._updateAxisTransform=function(r,e){var n=r.getExtent(),o=n[0]+n[1],s=r.isHorizontal();r.toGlobalCoord=s?function(u){return u+e}:function(u){return o-u+e},r.toLocalCoord=s?function(u){return u-e}:function(u){return o-u+e}},a.prototype.getAxis=function(){return this._axis},a.prototype.getBaseAxis=function(){return this._axis},a.prototype.getAxes=function(){return[this._axis]},a.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},a.prototype.containPoint=function(r){var e=this.getRect(),n=this.getAxis(),o=n.orient;return o==="horizontal"?n.contain(n.toLocalCoord(r[0]))&&r[1]>=e.y&&r[1]<=e.y+e.height:n.contain(n.toLocalCoord(r[1]))&&r[0]>=e.y&&r[0]<=e.y+e.height},a.prototype.pointToData=function(r){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(r[e.orient==="horizontal"?0:1]))]},a.prototype.dataToPoint=function(r){var e=this.getAxis(),n=this.getRect(),o=[],s=e.orient==="horizontal"?0:1;return r instanceof Array&&(r=r[0]),o[s]=e.toGlobalCoord(e.dataToCoord(+r)),o[1-s]=s===0?n.y+n.height/2:n.x+n.width/2,o},a.prototype.convertToPixel=function(r,e,n){var o=N_(e);return o===this?this.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=N_(e);return o===this?this.pointToData(n):null},a}();function N_(a){var r=a.seriesModel,e=a.singleAxisModel;return e&&e.coordinateSystem||r&&r.coordinateSystem}var y2=m2;function _2(a,r){var e=[];return a.eachComponent("singleAxis",function(n,o){var s=new y2(n,a,r);s.name="single_"+o,s.resize(n,r),n.coordinateSystem=s,e.push(s)}),a.eachSeries(function(n){if(n.get("coordinateSystem")==="singleAxis"){var o=n.getReferringComponents("singleAxis",Xe.C6).models[0];n.coordinateSystem=o&&o.coordinateSystem}}),e}var x2={create:_2,dimensions:O_},S2=x2,B_=["x","y"],T2=["width","height"],w2=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.makeElOption=function(e,n,o,s,u){var h=o.axis,v=h.coordinateSystem,d=_m(v,1-xd(h)),m=v.dataToPoint(n)[0],_=s.get("type");if(_&&_!=="none"){var S=fm(s),b=D2[_](h,m,d);b.style=S,e.graphicKey=b.type,e.pointer=b}var P=mm(o);g_(n,e,P,o,s,u)},r.prototype.getHandleTransform=function(e,n,o){var s=mm(n,{labelInside:!1});s.labelMargin=o.get(["handle","margin"]);var u=hm(n.axis,e,s);return{x:u[0],y:u[1],rotation:s.rotation+(s.labelDirection<0?Math.PI:0)}},r.prototype.updateHandleTransform=function(e,n,o,s){var u=o.axis,h=u.coordinateSystem,v=xd(u),d=_m(h,v),m=[e.x,e.y];m[v]+=n[v],m[v]=Math.min(d[1],m[v]),m[v]=Math.max(d[0],m[v]);var _=_m(h,1-v),S=(_[1]+_[0])/2,b=[S,S];return b[v]=m[v],{x:m[0],y:m[1],rotation:e.rotation,cursorPoint:b,tooltipOption:{verticalAlign:"middle"}}},r}(um),D2={line:function(a,r,e){var n=cm([r,e[0]],[r,e[1]],xd(a));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(a,r,e){var n=a.getBandWidth(),o=e[1]-e[0];return{type:"Rect",shape:m_([r-n/2,e[0]],[n,o],xd(a))}}};function xd(a){return a.isHorizontal()?0:1}function _m(a,r){var e=a.getRect();return[e[B_[r]],e[B_[r]]+e[T2[r]]]}var A2=w2,b2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="single",r}(pn.Z);function M2(a){(0,N.D)(Jh),Xr.registerAxisPointerClass("SingleAxisPointer",A2),a.registerComponentView(b2),a.registerComponentView(d2),a.registerComponentModel(ym),Gs(a,"single",ym,ym.defaultOption),a.registerCoordinateSystem("single",S2)}var E2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n,o){var s=(0,Kr.tE)(e);a.prototype.init.apply(this,arguments),F_(e,s)},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),F_(this.option,e)},r.prototype.getCellSize=function(){return this.option.cellSize},r.type="calendar",r.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},r}(kn.Z);function F_(a,r){var e=a.cellSize,n;g.kJ(e)?n=e:n=a.cellSize=[e,e],n.length===1&&(n[1]=n[0]);var o=g.UI([0,1],function(s){return(0,Kr.QM)(r,s)&&(n[s]="auto"),n[s]!=null&&n[s]!=="auto"});(0,Kr.dt)(a,r,{type:"box",ignoreSize:o})}var C2=E2,z_=F(73917),P2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){var s=this.group;s.removeAll();var u=e.coordinateSystem,h=u.getRangeInfo(),v=u.getOrient(),d=n.getLocaleModel();this._renderDayRect(e,h,s),this._renderLines(e,h,v,s),this._renderYearText(e,h,v,s),this._renderMonthText(e,d,v,s),this._renderWeekText(e,d,h,v,s)},r.prototype._renderDayRect=function(e,n,o){for(var s=e.coordinateSystem,u=e.getModel("itemStyle").getItemStyle(),h=s.getCellWidth(),v=s.getCellHeight(),d=n.start.time;d<=n.end.time;d=s.getNextNDay(d,1).time){var m=s.dataToRect([d],!1).tl,_=new on.Z({shape:{x:m[0],y:m[1],width:h,height:v},cursor:"default",style:u});o.add(_)}},r.prototype._renderLines=function(e,n,o,s){var u=this,h=e.coordinateSystem,v=e.getModel(["splitLine","lineStyle"]).getLineStyle(),d=e.get(["splitLine","show"]),m=v.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var _=n.start,S=0;_.time<=n.end.time;S++){P(_.formatedDate),S===0&&(_=h.getDateInfo(n.start.y+"-"+n.start.m));var b=_.date;b.setMonth(b.getMonth()+1),_=h.getDateInfo(b)}P(h.getNextNDay(n.end.time,1).formatedDate);function P(R){u._firstDayOfMonth.push(h.getDateInfo(R)),u._firstDayPoints.push(h.dataToRect([R],!1).tl);var Y=u._getLinePointsOfOneWeek(e,R,o);u._tlpoints.push(Y[0]),u._blpoints.push(Y[Y.length-1]),d&&u._drawSplitline(Y,v,s)}d&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,m,o),v,s),d&&this._drawSplitline(u._getEdgesPoints(u._blpoints,m,o),v,s)},r.prototype._getEdgesPoints=function(e,n,o){var s=[e[0].slice(),e[e.length-1].slice()],u=o==="horizontal"?0:1;return s[0][u]=s[0][u]-n/2,s[1][u]=s[1][u]+n/2,s},r.prototype._drawSplitline=function(e,n,o){var s=new Hi.Z({z2:20,shape:{points:e},style:n});o.add(s)},r.prototype._getLinePointsOfOneWeek=function(e,n,o){for(var s=e.coordinateSystem,u=s.getDateInfo(n),h=[],v=0;v<7;v++){var d=s.getNextNDay(u.time,v),m=s.dataToRect([d.time],!1);h[2*d.day]=m.tl,h[2*d.day+1]=m[o==="horizontal"?"bl":"tr"]}return h},r.prototype._formatterLabel=function(e,n){return(0,g.HD)(e)&&e?(0,Cn.wx)(e,n):(0,g.mf)(e)?e(n):n.nameMap},r.prototype._yearTextPositionControl=function(e,n,o,s,u){var h=n[0],v=n[1],d=["center","bottom"];s==="bottom"?(v+=u,d=["center","top"]):s==="left"?h-=u:s==="right"?(h+=u,d=["center","top"]):v-=u;var m=0;return(s==="left"||s==="right")&&(m=Math.PI/2),{rotation:m,x:h,y:v,style:{align:d[0],verticalAlign:d[1]}}},r.prototype._renderYearText=function(e,n,o,s){var u=e.getModel("yearLabel");if(!!u.get("show")){var h=u.get("margin"),v=u.get("position");v||(v=o!=="horizontal"?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(d[0][0]+d[1][0])/2,_=(d[0][1]+d[1][1])/2,S=o==="horizontal"?0:1,b={top:[m,d[S][1]],bottom:[m,d[1-S][1]],left:[d[1-S][0],_],right:[d[S][0],_]},P=n.start.y;+n.end.y>+n.start.y&&(P=P+"-"+n.end.y);var R=u.get("formatter"),Y={start:n.start.y,end:n.end.y,nameMap:P},nt=this._formatterLabel(R,Y),pt=new ee.ZP({z2:30,style:(0,or.Lr)(u,{text:nt})});pt.attr(this._yearTextPositionControl(pt,b[v],o,v,h)),s.add(pt)}},r.prototype._monthTextPositionControl=function(e,n,o,s,u){var h="left",v="top",d=e[0],m=e[1];return o==="horizontal"?(m=m+u,n&&(h="center"),s==="start"&&(v="bottom")):(d=d+u,n&&(v="middle"),s==="start"&&(h="right")),{x:d,y:m,align:h,verticalAlign:v}},r.prototype._renderMonthText=function(e,n,o,s){var u=e.getModel("monthLabel");if(!!u.get("show")){var h=u.get("nameMap"),v=u.get("margin"),d=u.get("position"),m=u.get("align"),_=[this._tlpoints,this._blpoints];(!h||(0,g.HD)(h))&&(h&&(n=(0,z_.G8)(h)||n),h=n.get(["time","monthAbbr"])||[]);var S=d==="start"?0:1,b=o==="horizontal"?0:1;v=d==="start"?-v:v;for(var P=m==="center",R=0;R<_[S].length-1;R++){var Y=_[S][R].slice(),nt=this._firstDayOfMonth[R];if(P){var pt=this._firstDayPoints[R];Y[b]=(pt[b]+_[0][R+1][b])/2}var mt=u.get("formatter"),bt=h[+nt.m-1],Lt={yyyy:nt.y,yy:(nt.y+"").slice(2),MM:nt.m,M:+nt.m,nameMap:bt},Pt=this._formatterLabel(mt,Lt),Ot=new ee.ZP({z2:30,style:(0,g.l7)((0,or.Lr)(u,{text:Pt}),this._monthTextPositionControl(Y,P,o,d,v))});s.add(Ot)}}},r.prototype._weekTextPositionControl=function(e,n,o,s,u){var h="center",v="middle",d=e[0],m=e[1],_=o==="start";return n==="horizontal"?(d=d+s+(_?1:-1)*u[0]/2,h=_?"right":"left"):(m=m+s+(_?1:-1)*u[1]/2,v=_?"bottom":"top"),{x:d,y:m,align:h,verticalAlign:v}},r.prototype._renderWeekText=function(e,n,o,s,u){var h=e.getModel("dayLabel");if(!!h.get("show")){var v=e.coordinateSystem,d=h.get("position"),m=h.get("nameMap"),_=h.get("margin"),S=v.getFirstDayOfWeek();if(!m||(0,g.HD)(m)){m&&(n=(0,z_.G8)(m)||n);var b=n.get(["time","dayOfWeekShort"]);m=b||(0,g.UI)(n.get(["time","dayOfWeekAbbr"]),function(Lt){return Lt[0]})}var P=v.getNextNDay(o.end.time,7-o.lweek).time,R=[v.getCellWidth(),v.getCellHeight()];_=(0,Ie.GM)(_,Math.min(R[1],R[0])),d==="start"&&(P=v.getNextNDay(o.start.time,-(7+o.fweek)).time,_=-_);for(var Y=0;Y<7;Y++){var nt=v.getNextNDay(P,Y),pt=v.dataToRect([nt.time],!1).center,mt=Y;mt=Math.abs((Y+S)%7);var bt=new ee.ZP({z2:30,style:(0,g.l7)((0,or.Lr)(h,{text:m[mt]}),this._weekTextPositionControl(pt,s,d,_,R))});u.add(bt)}}},r.type="calendar",r}(pn.Z),L2=P2,xm=864e5,I2=function(){function a(r,e,n){this.type="calendar",this.dimensions=a.dimensions,this.getDimensionsInfo=a.getDimensionsInfo,this._model=r}return a.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},a.prototype.getRangeInfo=function(){return this._rangeInfo},a.prototype.getModel=function(){return this._model},a.prototype.getRect=function(){return this._rect},a.prototype.getCellWidth=function(){return this._sw},a.prototype.getCellHeight=function(){return this._sh},a.prototype.getOrient=function(){return this._orient},a.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},a.prototype.getDateInfo=function(r){r=Ie.sG(r);var e=r.getFullYear(),n=r.getMonth()+1,o=n<10?"0"+n:""+n,s=r.getDate(),u=s<10?"0"+s:""+s,h=r.getDay();return h=Math.abs((h+7-this.getFirstDayOfWeek())%7),{y:e+"",m:o,d:u,day:h,time:r.getTime(),formatedDate:e+"-"+o+"-"+u,date:r}},a.prototype.getNextNDay=function(r,e){return e=e||0,e===0?this.getDateInfo(r):(r=new Date(this.getDateInfo(r).time),r.setDate(r.getDate()+e),this.getDateInfo(r))},a.prototype.update=function(r,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],s=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),h=this._orient==="horizontal"?[n,7]:[7,n];g.S6([0,1],function(_){m(s,_)&&(u[o[_]]=s[_]*h[_])});var v={width:e.getWidth(),height:e.getHeight()},d=this._rect=Kr.ME(u,v);g.S6([0,1],function(_){m(s,_)||(s[_]=d[o[_]]/h[_])});function m(_,S){return _[S]!=null&&_[S]!=="auto"}this._sw=s[0],this._sh=s[1]},a.prototype.dataToPoint=function(r,e){g.kJ(r)&&(r=r[0]),e==null&&(e=!0);var n=this.getDateInfo(r),o=this._rangeInfo,s=n.formatedDate;if(e&&!(n.time>=o.start.time&&n.time<o.end.time+xm))return[NaN,NaN];var u=n.day,h=this._getRangeInfo([o.start.time,s]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+h*this._sh+this._sh/2]:[this._rect.x+h*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},a.prototype.pointToData=function(r){var e=this.pointToDate(r);return e&&e.time},a.prototype.dataToRect=function(r,e){var n=this.dataToPoint(r,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},a.prototype.pointToDate=function(r){var e=Math.floor((r[0]-this._rect.x)/this._sw)+1,n=Math.floor((r[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(n,e-1,o):this._getDateByWeeksAndDay(e,n-1,o)},a.prototype.convertToPixel=function(r,e,n){var o=G_(e);return o===this?o.dataToPoint(n):null},a.prototype.convertFromPixel=function(r,e,n){var o=G_(e);return o===this?o.pointToData(n):null},a.prototype.containPoint=function(r){return console.warn("Not implemented."),!1},a.prototype._initRangeOption=function(){var r=this._model.get("range"),e;if(g.kJ(r)&&r.length===1&&(r=r[0]),g.kJ(r))e=r;else{var n=r.toString();if(/^\d{4}$/.test(n)&&(e=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var o=this.getDateInfo(n),s=o.date;s.setMonth(s.getMonth()+1);var u=this.getNextNDay(s,-1);e=[o.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(e=[n,n])}if(!e)return r;var h=this._getRangeInfo(e);return h.start.time>h.end.time&&e.reverse(),e},a.prototype._getRangeInfo=function(r){var e=[this.getDateInfo(r[0]),this.getDateInfo(r[1])],n;e[0].time>e[1].time&&(n=!0,e.reverse());var o=Math.floor(e[1].time/xm)-Math.floor(e[0].time/xm)+1,s=new Date(e[0].time),u=s.getDate(),h=e[1].date.getDate();s.setDate(u+o-1);var v=s.getDate();if(v!==h)for(var d=s.getTime()-e[1].time>0?1:-1;(v=s.getDate())!==h&&(s.getTime()-e[1].time)*d>0;)o-=d,s.setDate(v-d);var m=Math.floor((o+e[0].day+6)/7),_=n?-m+1:m-1;return n&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:o,weeks:m,nthWeek:_,fweek:e[0].day,lweek:e[1].day}},a.prototype._getDateByWeeksAndDay=function(r,e,n){var o=this._getRangeInfo(n);if(r>o.weeks||r===0&&e<o.fweek||r===o.weeks&&e>o.lweek)return null;var s=(r-1)*7-o.fweek+e,u=new Date(o.start.time);return u.setDate(+o.start.d+s),this.getDateInfo(u)},a.create=function(r,e){var n=[];return r.eachComponent("calendar",function(o){var s=new a(o,r,e);n.push(s),o.coordinateSystem=s}),r.eachSeries(function(o){o.get("coordinateSystem")==="calendar"&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},a.dimensions=["time","value"],a}();function G_(a){var r=a.calendarModel,e=a.seriesModel,n=r?r.coordinateSystem:e?e.coordinateSystem:null;return n}var R2=I2;function O2(a){a.registerComponentModel(C2),a.registerComponentView(L2),a.registerCoordinateSystem("calendar",R2)}function N2(a,r){var e=a.existing;if(r.id=a.keyInfo.id,!r.type&&e&&(r.type=e.type),r.parentId==null){var n=r.parentOption;n?r.parentId=n.id:e&&(r.parentId=e.parentId)}r.parentOption=null}function U_(a,r){var e;return g.S6(r,function(n){a[n]!=null&&a[n]!=="auto"&&(e=!0)}),e}function B2(a,r,e){var n=g.l7({},e),o=a[r],s=e.$action||"merge";if(s==="merge")if(o){if(!1)var u;g.TS(o,n,!0),(0,Kr.dt)(o,n,{ignoreSize:!0}),(0,Kr.QT)(e,o),Sd(e,o),Sd(e,o,"shape"),Sd(e,o,"style"),Sd(e,o,"extra"),e.clipPath=o.clipPath}else a[r]=n;else s==="replace"?a[r]=n:s==="remove"&&o&&(a[r]=null)}var k_=["transition","enterFrom","leaveTo"],F2=k_.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function Sd(a,r,e){if(e&&(!a[e]&&r[e]&&(a[e]={}),a=a[e],r=r[e]),!(!a||!r))for(var n=e?k_:F2,o=0;o<n.length;o++){var s=n[o];a[s]==null&&r[s]!=null&&(a[s]=r[s])}}function z2(a,r){if(!!a&&(a.hv=r.hv=[U_(r,["left","right"]),U_(r,["top","bottom"])],a.type==="group")){var e=a,n=r;e.width==null&&(e.width=n.width=0),e.height==null&&(e.height=n.height=0)}}var G2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.preventAutoZ=!0,e}return r.prototype.mergeOption=function(e,n){var o=this.option.elements;this.option.elements=null,a.prototype.mergeOption.call(this,e,n),this.option.elements=o},r.prototype.optionUpdated=function(e,n){var o=this.option,s=(n?o:e).elements,u=o.elements=n?[]:o.elements,h=[];this._flatten(s,h,null);var v=Xe.ab(u,h,"normalMerge"),d=this._elOptionsToUpdate=[];g.S6(v,function(m,_){var S=m.newOption;!S||(d.push(S),N2(m,S),B2(u,_,S),z2(u[_],S))},this),o.elements=g.hX(u,function(m){return m&&delete m.$action,m!=null})},r.prototype._flatten=function(e,n,o){g.S6(e,function(s){if(!!s){o&&(s.parentOption=o),n.push(s);var u=s.children;u&&u.length&&this._flatten(u,n,s),delete s.children}},this)},r.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},r.type="graphic",r.defaultOption={elements:[]},r}(kn.Z),V_={path:null,compoundPath:null,group:Mr.Z,image:gt.ZP,text:ee.ZP},Na=Xe.Yf(),U2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this._elMap=g.kW()},r.prototype.render=function(e,n,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},r.prototype._updateElements=function(e){var n=e.useElOptionsToUpdate();if(!!n){var o=this._elMap,s=this.group,u=e.get("z"),h=e.get("zlevel");g.S6(n,function(v){var d=Xe.U5(v.id,null),m=d!=null?o.get(d):null,_=Xe.U5(v.parentId,null),S=_!=null?o.get(_):s,b=v.type,P=v.style;b==="text"&&P&&v.hv&&v.hv[1]&&(P.textVerticalAlign=P.textBaseline=P.verticalAlign=P.align=null);var R=v.textContent,Y=v.textConfig;if(P&&Wy(P,b,!!Y,!!R)){var nt=Hy(P,b,!0);!Y&&nt.textConfig&&(Y=v.textConfig=nt.textConfig),!R&&nt.textContent&&(R=nt.textContent)}var pt=k2(v),mt=v.$action||"merge",bt=mt==="merge",Lt=mt==="replace";if(bt){var Pt=!m,Ot=m;Pt?Ot=Z_(d,S,v.type,o):(Ot&&(Na(Ot).isNew=!1),e_(Ot)),Ot&&(vd(Ot,pt,e,{isInit:Pt}),W_(Ot,v,u,h))}else if(Lt){Td(m,v,o,e);var kt=Z_(d,S,v.type,o);kt&&(vd(kt,pt,e,{isInit:!0}),W_(kt,v,u,h))}else mt==="remove"&&(Qy(m,v),Td(m,v,o,e));var jt=o.get(d);if(jt&&R)if(bt){var re=jt.getTextContent();re?re.attr(R):jt.setTextContent(new ee.ZP(R))}else Lt&&jt.setTextContent(new ee.ZP(R));if(jt){var ae=v.clipPath;if(ae){var he=ae.type,me=void 0,Pt=!1;if(bt){var Te=jt.getClipPath();Pt=!Te||Na(Te).type!==he,me=Pt?Sm(he):Te}else Lt&&(Pt=!0,me=Sm(he));jt.setClipPath(me),vd(me,ae,e,{isInit:Pt}),pd(me,ae.keyframeAnimation,e)}var be=Na(jt);jt.setTextConfig(Y),be.option=v,V2(jt,e,v),br.setTooltipConfig({el:jt,componentModel:e,itemName:jt.name,itemTooltipOption:v.tooltip}),pd(jt,v.keyframeAnimation,e)}})}},r.prototype._relocate=function(e,n){for(var o=e.option.elements,s=this.group,u=this._elMap,h=n.getWidth(),v=n.getHeight(),d=["x","y"],m=0;m<o.length;m++){var _=o[m],S=Xe.U5(_.id,null),b=S!=null?u.get(S):null;if(!(!b||!b.isGroup)){var P=b.parent,R=P===s,Y=Na(b),nt=Na(P);Y.width=(0,Ie.GM)(Y.option.width,R?h:nt.width)||0,Y.height=(0,Ie.GM)(Y.option.height,R?v:nt.height)||0}}for(var m=o.length-1;m>=0;m--){var _=o[m],S=Xe.U5(_.id,null),b=S!=null?u.get(S):null;if(!!b){var P=b.parent,nt=Na(P),pt=P===s?{width:h,height:v}:{width:nt.width,height:nt.height},mt={},bt=Kr.p$(b,_,pt,null,{hv:_.hv,boundingMode:_.bounding},mt);if(!Na(b).isNew&&bt){for(var Lt=_.transition,Pt={},Ot=0;Ot<d.length;Ot++){var kt=d[Ot],jt=mt[kt];Lt&&(eu(Lt)||g.cq(Lt,kt)>=0)?Pt[kt]=jt:b[kt]=jt}(0,cr.D)(b,Pt,e,0)}else b.attr(mt)}}},r.prototype._clear=function(){var e=this,n=this._elMap;n.each(function(o){Td(o,Na(o).option,n,e._lastGraphicModel)}),this._elMap=g.kW()},r.prototype.dispose=function(){this._clear()},r.type="graphic",r}(pn.Z);function Sm(a){var r=g.RI(V_,a)?V_[a]:br.getShapeClass(a),e=new r({});return Na(e).type=a,e}function Z_(a,r,e,n){var o=Sm(e);return r.add(o),n.set(a,o),Na(o).id=a,Na(o).isNew=!0,o}function Td(a,r,e,n){var o=a&&a.parent;o&&(a.type==="group"&&a.traverse(function(s){Td(s,r,e,n)}),dd(a,r,n),e.removeKey(Na(a).id))}function W_(a,r,e,n){a.isGroup||g.S6([["cursor",go.ZP.prototype.cursor],["zlevel",n||0],["z",e||0],["z2",0]],function(o){var s=o[0];g.RI(r,s)?a[s]=g.pD(r[s],o[1]):a[s]==null&&(a[s]=o[1])}),g.S6(g.XP(r),function(o){if(o.indexOf("on")===0){var s=r[o];a[o]=g.mf(s)?s:null}}),g.RI(r,"draggable")&&(a.draggable=r.draggable),r.name!=null&&(a.name=r.name),r.id!=null&&(a.id=r.id)}function k2(a){return a=g.l7({},a),g.S6(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(Kr.gN),function(r){delete a[r]}),a}function V2(a,r,e){var n=(0,Hr.A)(a).eventData;!a.silent&&!a.ignore&&!n&&(n=(0,Hr.A)(a).eventData={componentType:"graphic",componentIndex:r.componentIndex,name:a.name}),n&&(n.info=e.info)}function Z2(a){a.registerComponentModel(G2),a.registerComponentView(U2),a.registerPreprocessor(function(r){var e=r.graphic;(0,g.kJ)(e)?!e[0]||!e[0].elements?r.graphic=[{elements:e}]:r.graphic=[r.graphic[0]]:e&&!e.elements&&(r.graphic=[{elements:[e]}])})}var H_=["x","y","radius","angle","single"],W2=["cartesian2d","polar","singleAxis"];function H2(a){var r=a.get("coordinateSystem");return(0,g.cq)(W2,r)>=0}function cl(a){return a+"Axis"}function BE(a){return a+"AxisIndex"}function FE(a){return a+"AxisId"}function X2(a,r){var e=(0,g.kW)(),n=[],o=(0,g.kW)();a.eachComponent({mainType:"dataZoom",query:r},function(m){o.get(m.uid)||h(m)});var s;do s=!1,a.eachComponent("dataZoom",u);while(s);function u(m){!o.get(m.uid)&&v(m)&&(h(m),s=!0)}function h(m){o.set(m.uid,!0),n.push(m),d(m)}function v(m){var _=!1;return m.eachTargetAxis(function(S,b){var P=e.get(S);P&&P[b]&&(_=!0)}),_}function d(m){m.eachTargetAxis(function(_,S){(e.get(_)||e.set(_,[]))[S]=!0})}return n}function X_(a){var r=a.ecModel,e={infoList:[],infoMap:(0,g.kW)()};return a.eachTargetAxis(function(n,o){var s=r.getComponent(cl(n),o);if(!!s){var u=s.getCoordSysModel();if(!!u){var h=u.uid,v=e.infoMap.get(h);v||(v={model:u,axisModels:[]},e.infoList.push(v),e.infoMap.set(h,v)),v.axisModels.push(s)}}}),e}var Tm=function(){function a(){this.indexList=[],this.indexMap=[]}return a.prototype.add=function(r){this.indexMap[r]||(this.indexList.push(r),this.indexMap[r]=!0)},a}(),Y2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return r.prototype.init=function(e,n,o){var s=Y_(e);this.settledOption=s,this.mergeDefaultAndTheme(e,o),this._doInit(s)},r.prototype.mergeOption=function(e){var n=Y_(e);(0,g.TS)(this.option,e,!0),(0,g.TS)(this.settledOption,n,!0),this._doInit(n)},r.prototype._doInit=function(e){var n=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;(0,g.S6)([["start","startValue"],["end","endValue"]],function(s,u){this._rangePropMode[u]==="value"&&(n[s[0]]=o[s[0]]=null)},this),this._resetTarget()},r.prototype._resetTarget=function(){var e=this.get("orient",!0),n=this._targetAxisInfoMap=(0,g.kW)(),o=this._fillSpecifiedTargetAxis(n);o?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(n,this._orient)),this._noTarget=!0,n.each(function(s){s.indexList.length&&(this._noTarget=!1)},this)},r.prototype._fillSpecifiedTargetAxis=function(e){var n=!1;return(0,g.S6)(H_,function(o){var s=this.getReferringComponents(cl(o),Xe.iP);if(!!s.specified){n=!0;var u=new Tm;(0,g.S6)(s.models,function(h){u.add(h.componentIndex)}),e.set(o,u)}},this),n},r.prototype._fillAutoTargetAxisByOrient=function(e,n){var o=this.ecModel,s=!0;if(s){var u=n==="vertical"?"y":"x",h=o.findComponents({mainType:u+"Axis"});v(h,u)}if(s){var h=o.findComponents({mainType:"singleAxis",filter:function(m){return m.get("orient",!0)===n}});v(h,"single")}function v(d,m){var _=d[0];if(!!_){var S=new Tm;if(S.add(_.componentIndex),e.set(m,S),s=!1,m==="x"||m==="y"){var b=_.getReferringComponents("grid",Xe.C6).models[0];b&&(0,g.S6)(d,function(P){_.componentIndex!==P.componentIndex&&b===P.getReferringComponents("grid",Xe.C6).models[0]&&S.add(P.componentIndex)})}}}s&&(0,g.S6)(H_,function(d){if(!!s){var m=o.findComponents({mainType:cl(d),filter:function(S){return S.get("type",!0)==="category"}});if(m[0]){var _=new Tm;_.add(m[0].componentIndex),e.set(d,_),s=!1}}},this)},r.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(n){!e&&(e=n)},this),e==="y"?"vertical":"horizontal"},r.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var n=this.ecModel.option;this.option.throttle=n.animation&&n.animationDurationUpdate>0?100:20}},r.prototype._updateRangeUse=function(e){var n=this._rangePropMode,o=this.get("rangeMode");(0,g.S6)([["start","startValue"],["end","endValue"]],function(s,u){var h=e[s[0]]!=null,v=e[s[1]]!=null;h&&!v?n[u]="percent":!h&&v?n[u]="value":o?n[u]=o[u]:h&&(n[u]="percent")})},r.prototype.noTarget=function(){return this._noTarget},r.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(n,o){e==null&&(e=this.ecModel.getComponent(cl(n),o))},this),e},r.prototype.eachTargetAxis=function(e,n){this._targetAxisInfoMap.each(function(o,s){(0,g.S6)(o.indexList,function(u){e.call(n,s,u)})})},r.prototype.getAxisProxy=function(e,n){var o=this.getAxisModel(e,n);if(o)return o.__dzAxisProxy},r.prototype.getAxisModel=function(e,n){var o=this._targetAxisInfoMap.get(e);if(o&&o.indexMap[n])return this.ecModel.getComponent(cl(e),n)},r.prototype.setRawRange=function(e){var n=this.option,o=this.settledOption;(0,g.S6)([["start","startValue"],["end","endValue"]],function(s){(e[s[0]]!=null||e[s[1]]!=null)&&(n[s[0]]=o[s[0]]=e[s[0]],n[s[1]]=o[s[1]]=e[s[1]])},this),this._updateRangeUse(e)},r.prototype.setCalculatedRange=function(e){var n=this.option;(0,g.S6)(["start","startValue","end","endValue"],function(o){n[o]=e[o]})},r.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},r.prototype.getValueRange=function(e,n){if(e==null&&n==null){var o=this.findRepresentativeAxisProxy();if(o)return o.getDataValueWindow()}else return this.getAxisProxy(e,n).getDataValueWindow()},r.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var n,o=this._targetAxisInfoMap.keys(),s=0;s<o.length;s++)for(var u=o[s],h=this._targetAxisInfoMap.get(u),v=0;v<h.indexList.length;v++){var d=this.getAxisProxy(u,h.indexList[v]);if(d.hostedBy(this))return d;n||(n=d)}return n},r.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},r.prototype.getOrient=function(){return this._orient},r.type="dataZoom",r.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],r.defaultOption={z:4,filterMode:"filter",start:0,end:100},r}(kn.Z);function Y_(a){var r={};return(0,g.S6)(["start","end","startValue","endValue","throttle"],function(e){a.hasOwnProperty(e)&&(r[e]=a[e])}),r}var Qh=Y2,K2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}(Qh),j2=K2,J2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o,s){this.dataZoomModel=e,this.ecModel=n,this.api=o},r.type="dataZoom",r}(pn.Z),wm=J2,Q2=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.select",r}(wm),$2=Q2,q2=F(38986),rf=g.S6,K_=Ie.dt,tD=function(){function a(r,e,n,o){this._dimName=r,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=n}return a.prototype.hostedBy=function(r){return this._dataZoomModel===r},a.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},a.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},a.prototype.getTargetSeriesModels=function(){var r=[];return this.ecModel.eachSeries(function(e){if(H2(e)){var n=cl(this._dimName),o=e.getReferringComponents(n,Xe.C6).models[0];o&&this._axisIndex===o.componentIndex&&r.push(e)}},this),r},a.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},a.prototype.getMinMaxSpan=function(){return g.d9(this._minMaxSpan)},a.prototype.calculateDataWindow=function(r){var e=this._dataExtent,n=this.getAxisModel(),o=n.axis.scale,s=this._dataZoomModel.getRangePropMode(),u=[0,100],h=[],v=[],d;rf(["start","end"],function(S,b){var P=r[S],R=r[S+"Value"];s[b]==="percent"?(P==null&&(P=u[b]),R=o.parse(Ie.NU(P,u,e))):(d=!0,R=R==null?e[b]:o.parse(R),P=Ie.NU(R,e,u)),v[b]=R,h[b]=P}),K_(v),K_(h);var m=this._minMaxSpan;d?_(v,h,e,u,!1):_(h,v,u,e,!0);function _(S,b,P,R,Y){var nt=Y?"Span":"ValueSpan";ps(0,S,P,"all",m["min"+nt],m["max"+nt]);for(var pt=0;pt<2;pt++)b[pt]=Ie.NU(S[pt],P,R,!0),Y&&(b[pt]=o.parse(b[pt]))}return{valueWindow:v,percentWindow:h}},a.prototype.reset=function(r){if(r===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=eD(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(r.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},a.prototype.filterData=function(r,e){if(r!==this._dataZoomModel)return;var n=this._dimName,o=this.getTargetSeriesModels(),s=r.get("filterMode"),u=this._valueWindow;if(s==="none")return;rf(o,function(v){var d=v.getData(),m=d.mapDimensionsAll(n);if(!!m.length){if(s==="weakFilter"){var _=d.getStore(),S=g.UI(m,function(b){return d.getDimensionIndex(b)},d);d.filterSelf(function(b){for(var P,R,Y,nt=0;nt<m.length;nt++){var pt=_.get(S[nt],b),mt=!isNaN(pt),bt=pt<u[0],Lt=pt>u[1];if(mt&&!bt&&!Lt)return!0;mt&&(Y=!0),bt&&(P=!0),Lt&&(R=!0)}return Y&&P&&R})}else rf(m,function(b){if(s==="empty")v.setData(d=d.map(b,function(R){return h(R)?R:NaN}));else{var P={};P[b]=u,d.selectRange(P)}});rf(m,function(b){d.setApproximateExtent(u,b)})}});function h(v){return v>=u[0]&&v<=u[1]}},a.prototype._updateMinMaxSpan=function(){var r=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;rf(["min","max"],function(o){var s=e.get(o+"Span"),u=e.get(o+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?s=Ie.NU(n[0]+u,n,[0,100],!0):s!=null&&(u=Ie.NU(s,[0,100],n,!0)-n[0]),r[o+"Span"]=s,r[o+"ValueSpan"]=u},this)},a.prototype._setAxisModel=function(){var r=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(!!e){var o=Ie.M9(n,[0,500]);o=Math.min(o,20);var s=r.axis.scale.rawExtentInfo;e[0]!==0&&s.setDeterminedMinMax("min",+n[0].toFixed(o)),e[1]!==100&&s.setDeterminedMinMax("max",+n[1].toFixed(o)),s.freeze()}},a}();function eD(a,r,e){var n=[1/0,-1/0];rf(e,function(u){(0,ii.AH)(n,u.getData(),r)});var o=a.getAxisModel(),s=(0,q2.Qw)(o.axis.scale,o,n).calculate();return[s.min,s.max]}var rD=tD,nD={getTargetSeries:function(a){function r(o){a.eachComponent("dataZoom",function(s){s.eachTargetAxis(function(u,h){var v=a.getComponent(cl(u),h);o(u,h,v,s)})})}r(function(o,s,u,h){u.__dzAxisProxy=null});var e=[];r(function(o,s,u,h){u.__dzAxisProxy||(u.__dzAxisProxy=new rD(o,s,h,a),e.push(u.__dzAxisProxy))});var n=(0,g.kW)();return(0,g.S6)(e,function(o){(0,g.S6)(o.getTargetSeriesModels(),function(s){n.set(s.uid,s)})}),n},overallReset:function(a,r){a.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).reset(e)}),e.eachTargetAxis(function(n,o){e.getAxisProxy(n,o).filterData(e,r)})}),a.eachComponent("dataZoom",function(e){var n=e.findRepresentativeAxisProxy();if(n){var o=n.getDataPercentWindow(),s=n.getDataValueWindow();e.setCalculatedRange({start:o[0],end:o[1],startValue:s[0],endValue:s[1]})}})}},iD=nD;function aD(a){a.registerAction("dataZoom",function(r,e){var n=X2(e,r);(0,g.S6)(n,function(o){o.setRawRange({start:r.start,end:r.end,startValue:r.startValue,endValue:r.endValue})})})}var j_=!1;function Dm(a){j_||(j_=!0,a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,iD),aD(a),a.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function oD(a){a.registerComponentModel(j2),a.registerComponentView($2),Dm(a)}var Ba=function(){function a(){}return a}(),J_={};function nf(a,r){J_[a]=r}function Q_(a){return J_[a]}var sD=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(){a.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;g.S6(this.option.feature,function(n,o){var s=Q_(o);s&&(s.getDefaultOption&&(s.defaultOption=s.getDefaultOption(e)),g.TS(n,s.defaultOption))})},r.type="toolbox",r.layoutMode={type:"box",ignoreSize:!0},r.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},r}(kn.Z),lD=sD;function uD(a,r,e){var n=r.getBoxLayoutParams(),o=r.get("padding"),s={width:e.getWidth(),height:e.getHeight()},u=(0,Kr.ME)(n,s,o);(0,Kr.BZ)(r.get("orient"),a,r.get("itemGap"),u.width,u.height),(0,Kr.p$)(a,n,s,o)}function $_(a,r){var e=Cn.MY(r.get("padding")),n=r.getItemStyle(["color","opacity"]);return n.fill=r.get("backgroundColor"),a=new on.Z({shape:{x:a.x-e[3],y:a.y-e[0],width:a.width+e[1]+e[3],height:a.height+e[0]+e[2],r:r.get("borderRadius")},style:n,silent:!0,z2:-1}),a}var fD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){var u=this.group;if(u.removeAll(),!e.get("show"))return;var h=+e.get("itemSize"),v=e.get("orient")==="vertical",d=e.get("feature")||{},m=this._features||(this._features={}),_=[];g.S6(d,function(P,R){_.push(R)}),new yo.Z(this._featureNames||[],_).add(S).update(S).remove(g.WA(S,null)).execute(),this._featureNames=_;function S(P,R){var Y=_[P],nt=_[R],pt=d[Y],mt=new Xn.Z(pt,e,e.ecModel),bt;if(s&&s.newTitle!=null&&s.featureName===Y&&(pt.title=s.newTitle),Y&&!nt){if(hD(Y))bt={onclick:mt.option.onclick,featureName:Y};else{var Lt=Q_(Y);if(!Lt)return;bt=new Lt}m[Y]=bt}else if(bt=m[nt],!bt)return;bt.uid=(0,Zi.Kr)("toolbox-feature"),bt.model=mt,bt.ecModel=n,bt.api=o;var Pt=bt instanceof Ba;if(!Y&&nt){Pt&&bt.dispose&&bt.dispose(n,o);return}if(!mt.get("show")||Pt&&bt.unusable){Pt&&bt.remove&&bt.remove(n,o);return}b(mt,bt,Y),mt.setIconStatus=function(Ot,kt){var jt=this.option,re=this.iconPaths;jt.iconStatus=jt.iconStatus||{},jt.iconStatus[Ot]=kt,re[Ot]&&(kt==="emphasis"?ir.fD:ir.Mh)(re[Ot])},bt instanceof Ba&&bt.render&&bt.render(mt,n,o,s)}function b(P,R,Y){var nt=P.getModel("iconStyle"),pt=P.getModel(["emphasis","iconStyle"]),mt=R instanceof Ba&&R.getIcons?R.getIcons():P.get("icon"),bt=P.get("title")||{},Lt,Pt;g.HD(mt)?(Lt={},Lt[Y]=mt):Lt=mt,g.HD(bt)?(Pt={},Pt[Y]=bt):Pt=bt;var Ot=P.iconPaths={};g.S6(Lt,function(kt,jt){var re=br.createIcon(kt,{},{x:-h/2,y:-h/2,width:h,height:h});re.setStyle(nt.getItemStyle());var ae=re.ensureState("emphasis");ae.style=pt.getItemStyle();var he=new ee.ZP({style:{text:Pt[jt],align:pt.get("textAlign"),borderRadius:pt.get("textBorderRadius"),padding:pt.get("textPadding"),fill:null},ignore:!0});re.setTextContent(he),br.setTooltipConfig({el:re,componentModel:e,itemName:jt,formatterParamsExtra:{title:Pt[jt]}}),re.__title=Pt[jt],re.on("mouseover",function(){var me=pt.getItemStyle(),Te=v?e.get("right")==null&&e.get("left")!=="right"?"right":"left":e.get("bottom")==null&&e.get("top")!=="bottom"?"bottom":"top";he.setStyle({fill:pt.get("textFill")||me.fill||me.stroke||"#000",backgroundColor:pt.get("textBackgroundColor")}),re.setTextConfig({position:pt.get("textPosition")||Te}),he.ignore=!e.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){P.get(["iconStatus",jt])!=="emphasis"&&o.leaveEmphasis(this),he.hide()}),(P.get(["iconStatus",jt])==="emphasis"?ir.fD:ir.Mh)(re),u.add(re),re.on("click",g.ak(R.onclick,R,n,o,jt)),Ot[jt]=re})}uD(u,e,o),u.add($_(u.getBoundingRect(),e)),v||u.eachChild(function(P){var R=P.__title,Y=P.ensureState("emphasis"),nt=Y.textConfig||(Y.textConfig={}),pt=P.getTextContent(),mt=pt&&pt.ensureState("emphasis");if(mt&&!g.mf(mt)&&R){var bt=mt.style||(mt.style={}),Lt=vt.lP(R,ee.ZP.makeFont(bt)),Pt=P.x+u.x,Ot=P.y+u.y+h,kt=!1;Ot+Lt.height>o.getHeight()&&(nt.position="top",kt=!0);var jt=kt?-5-Lt.height:h+10;Pt+Lt.width/2>o.getWidth()?(nt.position=["100%",jt],bt.align="right"):Pt-Lt.width/2<0&&(nt.position=[0,jt],bt.align="left")}})},r.prototype.updateView=function(e,n,o,s){g.S6(this._features,function(u){u instanceof Ba&&u.updateView&&u.updateView(u.model,n,o,s)})},r.prototype.remove=function(e,n){g.S6(this._features,function(o){o instanceof Ba&&o.remove&&o.remove(e,n)}),this.group.removeAll()},r.prototype.dispose=function(e,n){g.S6(this._features,function(o){o instanceof Ba&&o.dispose&&o.dispose(e,n)})},r.type="toolbox",r}(pn.Z);function hD(a){return a.indexOf("my")===0}var cD=fD,vD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){var o=this.model,s=o.get("name")||e.get("title.0.text")||"echarts",u=n.getZr().painter.getType()==="svg",h=u?"svg":o.get("type",!0)||"png",v=n.getConnectedDataURL({type:h,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),d=ta.Z.browser;if((0,g.mf)(MouseEvent)&&(d.newEdge||!d.ie&&!d.edge)){var m=document.createElement("a");m.download=s+"."+h,m.target="_blank",m.href=v;var _=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});m.dispatchEvent(_)}else if(window.navigator.msSaveOrOpenBlob||u){var S=v.split(","),b=S[0].indexOf("base64")>-1,P=u?decodeURIComponent(S[1]):S[1];b&&(P=window.atob(P));var R=s+"."+h;if(window.navigator.msSaveOrOpenBlob){for(var Y=P.length,nt=new Uint8Array(Y);Y--;)nt[Y]=P.charCodeAt(Y);var pt=new Blob([nt]);window.navigator.msSaveOrOpenBlob(pt,R)}else{var mt=document.createElement("iframe");document.body.appendChild(mt);var bt=mt.contentWindow,Lt=bt.document;Lt.open("image/svg+xml","replace"),Lt.write(P),Lt.close(),bt.focus(),Lt.execCommand("SaveAs",!0,R),document.body.removeChild(mt)}}else{var Pt=o.get("lang"),Ot='<body style="margin:0;"><img src="'+v+'" style="max-width:100%;" title="'+(Pt&&Pt[0]||"")+'" /></body>',kt=window.open();kt.document.write(Ot),kt.document.title=s}},r.getDefaultOption=function(e){var n={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return n},r}(Ba),dD=vD,q_="__ec_magicType_stack__",zE=null,GE=null,pD=[["line","bar"],["stack"]],gD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.getIcons=function(){var e=this.model,n=e.get("icon"),o={};return g.S6(e.get("type"),function(s){n[s]&&(o[s]=n[s])}),o},r.getDefaultOption=function(e){var n={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return n},r.prototype.onclick=function(e,n,o){var s=this.model,u=s.get(["seriesIndex",o]);if(!!t1[o]){var h={series:[]},v=function(_){var S=_.subType,b=_.id,P=t1[o](S,b,_,s);P&&(g.ce(P,_.option),h.series.push(P));var R=_.coordinateSystem;if(R&&R.type==="cartesian2d"&&(o==="line"||o==="bar")){var Y=R.getAxesByScale("ordinal")[0];if(Y){var nt=Y.dim,pt=nt+"Axis",mt=_.getReferringComponents(pt,Xe.C6).models[0],bt=mt.componentIndex;h[pt]=h[pt]||[];for(var Lt=0;Lt<=bt;Lt++)h[pt][bt]=h[pt][bt]||{};h[pt][bt].boundaryGap=o==="bar"}}};g.S6(pD,function(_){g.cq(_,o)>=0&&g.S6(_,function(S){s.setIconStatus(S,"normal")})}),s.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},v);var d,m=o;o==="stack"&&(d=g.TS({stack:s.option.title.tiled,tiled:s.option.title.stack},s.option.title),s.get(["iconStatus",o])!=="emphasis"&&(m="tiled")),n.dispatchAction({type:"changeMagicType",currentType:m,newOption:h,newTitle:d,featureName:"magicType"})}},r}(Ba),t1={line:function(a,r,e,n){if(a==="bar")return g.TS({id:r,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","line"])||{},!0)},bar:function(a,r,e,n){if(a==="line")return g.TS({id:r,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},n.get(["option","bar"])||{},!0)},stack:function(a,r,e,n){var o=e.get("stack")===q_;if(a==="line"||a==="bar")return n.setIconStatus("stack",o?"normal":"emphasis"),g.TS({id:r,stack:o?"":q_},n.get(["option","stack"])||{},!0)}};xu.zl({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(a,r){r.mergeOption(a.newOption)});var mD=gD,wd=new Array(60).join("-"),af="	";function yD(a){var r={},e=[],n=[];return a.eachRawSeries(function(o){var s=o.coordinateSystem;if(s&&(s.type==="cartesian2d"||s.type==="polar")){var u=s.getBaseAxis();if(u.type==="category"){var h=u.dim+"_"+u.index;r[h]||(r[h]={categoryAxis:u,valueAxis:s.getOtherAxis(u),series:[]},n.push({axisDim:u.dim,axisIndex:u.index})),r[h].series.push(o)}else e.push(o)}else e.push(o)}),{seriesGroupByCategoryAxis:r,other:e,meta:n}}function _D(a){var r=[];return g.S6(a,function(e,n){var o=e.categoryAxis,s=e.valueAxis,u=s.dim,h=[" "].concat(g.UI(e.series,function(b){return b.name})),v=[o.model.getCategories()];g.S6(e.series,function(b){var P=b.getRawData();v.push(b.getRawData().mapArray(P.mapDimension(u),function(R){return R}))});for(var d=[h.join(af)],m=0;m<v[0].length;m++){for(var _=[],S=0;S<v.length;S++)_.push(v[S][m]);d.push(_.join(af))}r.push(d.join(`
`))}),r.join(`

`+wd+`

`)}function xD(a){return g.UI(a,function(r){var e=r.getRawData(),n=[r.name],o=[];return e.each(e.dimensions,function(){for(var s=arguments.length,u=arguments[s-1],h=e.getName(u),v=0;v<s-1;v++)o[v]=arguments[v];n.push((h?h+af:"")+o.join(af))}),n.join(`
`)}).join(`

`+wd+`

`)}function SD(a){var r=yD(a);return{value:g.hX([_D(r.seriesGroupByCategoryAxis),xD(r.other)],function(e){return!!e.replace(/[\n\t\s]/g,"")}).join(`

`+wd+`

`),meta:r.meta}}function Dd(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function TD(a){var r=a.slice(0,a.indexOf(`
`));if(r.indexOf(af)>=0)return!0}var Am=new RegExp("["+af+"]+","g");function wD(a){for(var r=a.split(/\n+/g),e=Dd(r.shift()).split(Am),n=[],o=g.UI(e,function(v){return{name:v,data:[]}}),s=0;s<r.length;s++){var u=Dd(r[s]).split(Am);n.push(u.shift());for(var h=0;h<u.length;h++)o[h]&&(o[h].data[s]=u[h])}return{series:o,categories:n}}function DD(a){for(var r=a.split(/\n+/g),e=Dd(r.shift()),n=[],o=0;o<r.length;o++){var s=Dd(r[o]);if(!!s){var u=s.split(Am),h="",v=void 0,d=!1;isNaN(u[0])?(d=!0,h=u[0],u=u.slice(1),n[o]={name:h,value:[]},v=n[o].value):v=n[o]=[];for(var m=0;m<u.length;m++)v.push(+u[m]);v.length===1&&(d?n[o].value=v[0]:n[o]=v[0])}}return{name:e,data:n}}function AD(a,r){var e=a.split(new RegExp(`
*`+wd+`
*`,"g")),n={series:[]};return g.S6(e,function(o,s){if(TD(o)){var u=wD(o),h=r[s],v=h.axisDim+"Axis";h&&(n[v]=n[v]||[],n[v][h.axisIndex]={data:u.categories},n.series=n.series.concat(u.series))}else{var u=DD(o);n.series.push(u)}}),n}var bD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){setTimeout(function(){n.dispatchAction({type:"hideTip"})});var o=n.getDom(),s=this.model;this._dom&&o.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=s.get("backgroundColor")||"#fff";var h=document.createElement("h4"),v=s.get("lang")||[];h.innerHTML=v[0]||s.get("title"),h.style.cssText="margin:10px 20px",h.style.color=s.get("textColor");var d=document.createElement("div"),m=document.createElement("textarea");d.style.cssText="overflow:auto";var _=s.get("optionToContent"),S=s.get("contentToOption"),b=SD(e);if(g.mf(_)){var P=_(n.getOption());g.HD(P)?d.innerHTML=P:g.Mh(P)&&d.appendChild(P)}else{m.readOnly=s.get("readOnly");var R=m.style;R.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",R.color=s.get("textColor"),R.borderColor=s.get("textareaBorderColor"),R.backgroundColor=s.get("textareaColor"),m.value=b.value,d.appendChild(m)}var Y=b.meta,nt=document.createElement("div");nt.style.cssText="position:absolute;bottom:5px;left:0;right:0";var pt="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",mt=document.createElement("div"),bt=document.createElement("div");pt+=";background-color:"+s.get("buttonColor"),pt+=";color:"+s.get("buttonTextColor");var Lt=this;function Pt(){o.removeChild(u),Lt._dom=null}(0,Ri.Oo)(mt,"click",Pt),(0,Ri.Oo)(bt,"click",function(){if(S==null&&_!=null||S!=null&&_==null){Pt();return}var Ot;try{g.mf(S)?Ot=S(d,n.getOption()):Ot=AD(m.value,Y)}catch(kt){throw Pt(),new Error("Data view format error "+kt)}Ot&&n.dispatchAction({type:"changeDataView",newOption:Ot}),Pt()}),mt.innerHTML=v[1],bt.innerHTML=v[2],bt.style.cssText=mt.style.cssText=pt,!s.get("readOnly")&&nt.appendChild(bt),nt.appendChild(mt),u.appendChild(h),u.appendChild(d),u.appendChild(nt),d.style.height=o.clientHeight-80+"px",o.appendChild(u),this._dom=u},r.prototype.remove=function(e,n){this._dom&&n.getDom().removeChild(this._dom)},r.prototype.dispose=function(e,n){this.remove(e,n)},r.getDefaultOption=function(e){var n={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return n},r}(Ba);function MD(a,r){return g.UI(a,function(e,n){var o=r&&r[n];if(g.Kn(o)&&!g.kJ(o)){var s=g.Kn(e)&&!g.kJ(e);s||(e={value:e});var u=o.name!=null&&e.name==null;return e=g.ce(e,o),u&&delete e.name,e}else return e})}xu.zl({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(a,r){var e=[];g.S6(a.newOption.series,function(n){var o=r.getSeriesByName(n.name)[0];if(!o)e.push(g.l7({type:"scatter"},n));else{var s=o.get("data");e.push({name:n.name,data:MD(n.data,s)})}}),r.mergeOption(g.ce({series:e},a.newOption))});var ED=bD,e1=g.S6,r1=(0,Xe.Yf)();function CD(a,r){var e=bm(a);e1(r,function(n,o){for(var s=e.length-1;s>=0;s--){var u=e[s];if(u[o])break}if(s<0){var h=a.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(h){var v=h.getPercentRange();e[0][o]={dataZoomId:o,start:v[0],end:v[1]}}}}),e.push(r)}function PD(a){var r=bm(a),e=r[r.length-1];r.length>1&&r.pop();var n={};return e1(e,function(o,s){for(var u=r.length-1;u>=0;u--)if(o=r[u][s],o){n[s]=o;break}}),n}function LD(a){r1(a).snapshots=null}function ID(a){return bm(a).length}function bm(a){var r=r1(a);return r.snapshots||(r.snapshots=[{}]),r.snapshots}var RD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.onclick=function(e,n){LD(e),n.dispatchAction({type:"restore",from:this.uid})},r.getDefaultOption=function(e){var n={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])};return n},r}(Ba);xu.zl({type:"restore",event:"restore",update:"prepareAndUpdate"},function(a,r){r.resetOption("recreate")});var OD=RD,ND=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BD=function(){function a(r,e,n){var o=this;this._targetInfoList=[];var s=n1(e,r);(0,g.S6)(FD,function(u,h){(!n||!n.include||(0,g.cq)(n.include,h)>=0)&&u(s,o._targetInfoList)})}return a.prototype.setOutputRanges=function(r,e){return this.matchOutputRanges(r,e,function(n,o,s){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var u=Em[n.brushType](0,s,o);n.__rangeOffset={offset:s1[n.brushType](u.values,n.range,[1,1]),xyMinMax:u.xyMinMax}}}),r},a.prototype.matchOutputRanges=function(r,e,n){(0,g.S6)(r,function(o){var s=this.findTargetInfo(o,e);s&&s!==!0&&(0,g.S6)(s.coordSyses,function(u){var h=Em[o.brushType](1,u,o.range,!0);n(o,h.values,u,e)})},this)},a.prototype.setInputRanges=function(r,e){(0,g.S6)(r,function(n){var o=this.findTargetInfo(n,e);if(n.range=n.range||[],o&&o!==!0){n.panelId=o.panelId;var s=Em[n.brushType](0,o.coordSys,n.coordRange),u=n.__rangeOffset;n.range=u?s1[n.brushType](s.values,u.offset,zD(s.xyMinMax,u.xyMinMax)):s.values}},this)},a.prototype.makePanelOpts=function(r,e){return(0,g.UI)(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:ad(o),isTargetByCursor:ul(o,r,n.coordSysModel),getLinearBrushOtherExtent:od(o)}})},a.prototype.controlSeries=function(r,e,n){var o=this.findTargetInfo(r,n);return o===!0||o&&(0,g.cq)(o.coordSyses,e.coordinateSystem)>=0},a.prototype.findTargetInfo=function(r,e){for(var n=this._targetInfoList,o=n1(e,r),s=0;s<n.length;s++){var u=n[s],h=r.panelId;if(h){if(u.panelId===h)return u}else for(var v=0;v<i1.length;v++)if(i1[v](o,u))return u}return!0},a}();function Mm(a){return a[0]>a[1]&&a.reverse(),a}function n1(a,r){return(0,Xe.pm)(a,r,{includeMainTypes:ND})}var FD={grid:function(a,r){var e=a.xAxisModels,n=a.yAxisModels,o=a.gridModels,s=(0,g.kW)(),u={},h={};!e&&!n&&!o||((0,g.S6)(e,function(v){var d=v.axis.grid.model;s.set(d.id,d),u[d.id]=!0}),(0,g.S6)(n,function(v){var d=v.axis.grid.model;s.set(d.id,d),h[d.id]=!0}),(0,g.S6)(o,function(v){s.set(v.id,v),u[v.id]=!0,h[v.id]=!0}),s.each(function(v){var d=v.coordinateSystem,m=[];(0,g.S6)(d.getCartesians(),function(_,S){((0,g.cq)(e,_.getAxis("x").model)>=0||(0,g.cq)(n,_.getAxis("y").model)>=0)&&m.push(_)}),r.push({panelId:"grid--"+v.id,gridModel:v,coordSysModel:v,coordSys:m[0],coordSyses:m,getPanelRect:a1.grid,xAxisDeclared:u[v.id],yAxisDeclared:h[v.id]})}))},geo:function(a,r){(0,g.S6)(a.geoModels,function(e){var n=e.coordinateSystem;r.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:a1.geo})})}},i1=[function(a,r){var e=a.xAxisModel,n=a.yAxisModel,o=a.gridModel;return!o&&e&&(o=e.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===r.gridModel},function(a,r){var e=a.geoModel;return e&&e===r.geoModel}],a1={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var a=this.coordSys,r=a.getBoundingRect().clone();return r.applyTransform(br.getTransform(a)),r}},Em={lineX:(0,g.WA)(o1,0),lineY:(0,g.WA)(o1,1),rect:function(a,r,e,n){var o=a?r.pointToData([e[0][0],e[1][0]],n):r.dataToPoint([e[0][0],e[1][0]],n),s=a?r.pointToData([e[0][1],e[1][1]],n):r.dataToPoint([e[0][1],e[1][1]],n),u=[Mm([o[0],s[0]]),Mm([o[1],s[1]])];return{values:u,xyMinMax:u}},polygon:function(a,r,e,n){var o=[[1/0,-1/0],[1/0,-1/0]],s=(0,g.UI)(e,function(u){var h=a?r.pointToData(u,n):r.dataToPoint(u,n);return o[0][0]=Math.min(o[0][0],h[0]),o[1][0]=Math.min(o[1][0],h[1]),o[0][1]=Math.max(o[0][1],h[0]),o[1][1]=Math.max(o[1][1],h[1]),h});return{values:s,xyMinMax:o}}};function o1(a,r,e,n){var o=e.getAxis(["x","y"][a]),s=Mm((0,g.UI)([0,1],function(h){return r?o.coordToData(o.toLocalCoord(n[h]),!0):o.toGlobalCoord(o.dataToCoord(n[h]))})),u=[];return u[a]=s,u[1-a]=[NaN,NaN],{values:s,xyMinMax:u}}var s1={lineX:(0,g.WA)(l1,0),lineY:(0,g.WA)(l1,1),rect:function(a,r,e){return[[a[0][0]-e[0]*r[0][0],a[0][1]-e[0]*r[0][1]],[a[1][0]-e[1]*r[1][0],a[1][1]-e[1]*r[1][1]]]},polygon:function(a,r,e){return(0,g.UI)(a,function(n,o){return[n[0]-e[0]*r[o][0],n[1]-e[1]*r[o][1]]})}};function l1(a,r,e,n){return[r[0]-n[a]*e[0],r[1]-n[a]*e[1]]}function zD(a,r){var e=u1(a),n=u1(r),o=[e[0]/n[0],e[1]/n[1]];return isNaN(o[0])&&(o[0]=1),isNaN(o[1])&&(o[1]=1),o}function u1(a){return a?[a[0][1]-a[0][0],a[1][1]-a[1][0]]:[NaN,NaN]}var Cm=BD,GD=F(82468),Pm=g.S6,UD=(0,Xe.g0)("toolbox-dataZoom_"),UE=null,kD=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o,s){this._brushController||(this._brushController=new ql(o.getZr()),this._brushController.on("brush",g.ak(this._onBrush,this)).mount()),WD(e,n,this,s,o),ZD(e,n)},r.prototype.onclick=function(e,n,o){VD[o].call(this)},r.prototype.remove=function(e,n){this._brushController&&this._brushController.unmount()},r.prototype.dispose=function(e,n){this._brushController&&this._brushController.dispose()},r.prototype._onBrush=function(e){var n=e.areas;if(!e.isEnd||!n.length)return;var o={},s=this.ecModel;this._brushController.updateCovers([]);var u=new Cm(Lm(this.model),s,{include:["grid"]});u.matchOutputRanges(n,s,function(d,m,_){if(_.type==="cartesian2d"){var S=d.brushType;S==="rect"?(h("x",_,m[0]),h("y",_,m[1])):h({lineX:"x",lineY:"y"}[S],_,m)}}),CD(s,o),this._dispatchZoomAction(o);function h(d,m,_){var S=m.getAxis(d),b=S.model,P=v(d,b,s),R=P.findRepresentativeAxisProxy(b).getMinMaxSpan();(R.minValueSpan!=null||R.maxValueSpan!=null)&&(_=ps(0,_.slice(),S.scale.getExtent(),0,R.minValueSpan,R.maxValueSpan)),P&&(o[P.id]={dataZoomId:P.id,startValue:_[0],endValue:_[1]})}function v(d,m,_){var S;return _.eachComponent({mainType:"dataZoom",subType:"select"},function(b){var P=b.getAxisModel(d,m.componentIndex);P&&(S=b)}),S}},r.prototype._dispatchZoomAction=function(e){var n=[];Pm(e,function(o,s){n.push(g.d9(o))}),n.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:n})},r.getDefaultOption=function(e){var n={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return n},r}(Ba),VD={zoom:function(){var a=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:a})},back:function(){this._dispatchZoomAction(PD(this.ecModel))}};function Lm(a){var r={xAxisIndex:a.get("xAxisIndex",!0),yAxisIndex:a.get("yAxisIndex",!0),xAxisId:a.get("xAxisId",!0),yAxisId:a.get("yAxisId",!0)};return r.xAxisIndex==null&&r.xAxisId==null&&(r.xAxisIndex="all"),r.yAxisIndex==null&&r.yAxisId==null&&(r.yAxisIndex="all"),r}function ZD(a,r){a.setIconStatus("back",ID(r)>1?"emphasis":"normal")}function WD(a,r,e,n,o){var s=e._isZoomActive;n&&n.type==="takeGlobalCursor"&&(s=n.key==="dataZoomSelect"?n.dataZoomSelectActive:!1),e._isZoomActive=s,a.setIconStatus("zoom",s?"emphasis":"normal");var u=new Cm(Lm(a),r,{include:["grid"]}),h=u.makePanelOpts(o,function(v){return v.xAxisDeclared&&!v.yAxisDeclared?"lineX":!v.xAxisDeclared&&v.yAxisDeclared?"lineY":"rect"});e._brushController.setPanels(h).enableBrush(s&&h.length?{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()}:!1)}(0,GD.f)("dataZoom",function(a){var r=a.getComponent("toolbox",0),e=["feature","dataZoom"];if(!r||r.get(e)==null)return;var n=r.getModel(e),o=[],s=Lm(n),u=(0,Xe.pm)(a,s);Pm(u.xAxisModels,function(v){return h(v,"xAxis","xAxisIndex")}),Pm(u.yAxisModels,function(v){return h(v,"yAxis","yAxisIndex")});function h(v,d,m){var _=v.componentIndex,S={type:"select",$fromToolbox:!0,filterMode:n.get("filterMode",!0)||"filter",id:UD+d+_};S[m]=_,o.push(S)}return o});var HD=kD;function XD(a){a.registerComponentModel(lD),a.registerComponentView(cD),nf("saveAsImage",dD),nf("magicType",mD),nf("dataView",ED),nf("dataZoom",HD),nf("restore",OD),(0,N.D)(oD)}var YD=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="tooltip",r.dependencies=["axisPointer"],r.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},r}(kn.Z),KD=YD,jD=F(54058);function f1(a){var r=a.get("confine");return r!=null?!!r:a.get("renderMode")==="richText"}function h1(a){if(!!ta.Z.domSupported){for(var r=document.documentElement.style,e=0,n=a.length;e<n;e++)if(a[e]in r)return a[e]}}var c1=h1(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),JD=h1(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function v1(a,r){if(!a)return r;r=(0,Cn.zW)(r,!0);var e=a.indexOf(r);return a=e===-1?r:"-"+a.slice(0,e)+"-"+r,a.toLowerCase()}function QD(a,r){var e=a.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(a);return e?r?e[r]:e:null}var $D=v1(JD,"transition"),Im=v1(c1,"transform"),qD="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(ta.Z.transform3dSupported?"will-change:transform;":"");function tA(a){return a=a==="left"?"right":a==="right"?"left":a==="top"?"bottom":"top",a}function eA(a,r,e){if(!(0,g.HD)(e)||e==="inside")return"";var n=a.get("backgroundColor"),o=a.get("borderWidth");r=(0,Cn.Lz)(r);var s=tA(e),u=Math.max(Math.round(o)*1.5,6),h="",v=Im+":",d;(0,g.cq)(["left","right"],s)>-1?(h+="top:50%",v+="translateY(-50%) rotate("+(d=s==="left"?-225:-45)+"deg)"):(h+="left:50%",v+="translateX(-50%) rotate("+(d=s==="top"?225:45)+"deg)");var m=d*Math.PI/180,_=u+o,S=_*Math.abs(Math.cos(m))+_*Math.abs(Math.sin(m)),b=Math.round(((S-Math.SQRT2*o)/2+Math.SQRT2*o-(S-_)/2)*100)/100;h+=";"+s+":-"+b+"px";var P=r+" solid "+o+"px;",R=["position:absolute;width:"+u+"px;height:"+u+"px;",h+";"+v+";","border-bottom:"+P,"border-right:"+P,"background-color:"+n+";"];return'<div style="'+R.join("")+'"></div>'}function rA(a,r){var e="cubic-bezier(0.23,1,0.32,1)",n=" "+a/2+"s "+e,o="opacity"+n+",visibility"+n;return r||(n=" "+a+"s "+e,o+=ta.Z.transformSupported?","+Im+n:",left"+n+",top"+n),$D+":"+o}function d1(a,r,e){var n=a.toFixed(0)+"px",o=r.toFixed(0)+"px";if(!ta.Z.transformSupported)return e?"top:"+o+";left:"+n+";":[["top",o],["left",n]];var s=ta.Z.transform3dSupported,u="translate"+(s?"3d":"")+"("+n+","+o+(s?",0":"")+")";return e?"top:0;left:0;"+Im+":"+u+";":[["top",0],["left",0],[c1,u]]}function nA(a){var r=[],e=a.get("fontSize"),n=a.getTextColor();n&&r.push("color:"+n),r.push("font:"+a.getFont()),e&&r.push("line-height:"+Math.round(e*3/2)+"px");var o=a.get("textShadowColor"),s=a.get("textShadowBlur")||0,u=a.get("textShadowOffsetX")||0,h=a.get("textShadowOffsetY")||0;return o&&s&&r.push("text-shadow:"+u+"px "+h+"px "+s+"px "+o),(0,g.S6)(["decoration","align"],function(v){var d=a.get(v);d&&r.push("text-"+v+":"+d)}),r.join(";")}function iA(a,r,e){var n=[],o=a.get("transitionDuration"),s=a.get("backgroundColor"),u=a.get("shadowBlur"),h=a.get("shadowColor"),v=a.get("shadowOffsetX"),d=a.get("shadowOffsetY"),m=a.getModel("textStyle"),_=(0,Nn.d_)(a,"html"),S=v+"px "+d+"px "+u+"px "+h;return n.push("box-shadow:"+S),r&&o&&n.push(rA(o,e)),s&&n.push("background-color:"+s),(0,g.S6)(["width","color","radius"],function(b){var P="border-"+b,R=(0,Cn.zW)(P),Y=a.get(R);Y!=null&&n.push(P+":"+Y+(b==="color"?"":"px"))}),n.push(nA(m)),_!=null&&n.push("padding:"+(0,Cn.MY)(_).join("px ")+"px"),n.join(";")+";"}function p1(a,r,e,n,o){var s=r&&r.painter;if(e){var u=s&&s.getViewportRoot();u&&(0,jD.YB)(a,u,document.body,n,o)}else{a[0]=n,a[1]=o;var h=s&&s.getViewportRootOffset();h&&(a[0]+=h.offsetLeft,a[1]+=h.offsetTop)}a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var aA=function(){function a(r,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,ta.Z.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var s=this._zr=e.getZr(),u=this._appendToBody=n&&n.appendToBody;p1(this._styleCoord,s,u,e.getWidth()/2,e.getHeight()/2),u?document.body.appendChild(o):r.appendChild(o),this._container=r;var h=this;o.onmouseenter=function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0},o.onmousemove=function(v){if(v=v||window.event,!h._enterable){var d=s.handler,m=s.painter.getViewportRoot();(0,Ri.OD)(m,v,!0),d.dispatch("mousemove",v)}},o.onmouseleave=function(){h._inContent=!1,h._enterable&&h._show&&h.hideLater(h._hideDelay)}}return a.prototype.update=function(r){var e=this._container,n=QD(e,"position"),o=e.style;o.position!=="absolute"&&n!=="absolute"&&(o.position="relative");var s=r.get("alwaysShowContent");s&&this._moveIfResized(),this.el.className=r.get("className")||""},a.prototype.show=function(r,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,o=n.style,s=this._styleCoord;n.innerHTML?o.cssText=qD+iA(r,!this._firstShow,this._longHide)+d1(s[0],s[1],!0)+("border-color:"+(0,Cn.Lz)(e)+";")+(r.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},a.prototype.setContent=function(r,e,n,o,s){var u=this.el;if(r==null){u.innerHTML="";return}var h="";if((0,g.HD)(s)&&n.get("trigger")==="item"&&!f1(n)&&(h=eA(n,o,s)),(0,g.HD)(r))u.innerHTML=r+h;else if(r){u.innerHTML="",(0,g.kJ)(r)||(r=[r]);for(var v=0;v<r.length;v++)(0,g.Mh)(r[v])&&r[v].parentNode!==u&&u.appendChild(r[v]);if(h&&u.childNodes.length){var d=document.createElement("div");d.innerHTML=h,u.appendChild(d)}}},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el;return[r.offsetWidth,r.offsetHeight]},a.prototype.moveTo=function(r,e){var n=this._styleCoord;if(p1(n,this._zr,this._appendToBody,r,e),n[0]!=null&&n[1]!=null){var o=this.el.style,s=d1(n[0],n[1]);(0,g.S6)(s,function(u){o[u[0]]=u[1]})}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){var r=this,e=this.el.style;e.visibility="hidden",e.opacity="0",ta.Z.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return r._longHide=!0},500)},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout((0,g.ak)(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},a}(),oA=aA,sA=function(){function a(r){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=r.getZr(),m1(this._styleCoord,this._zr,r.getWidth()/2,r.getHeight()/2)}return a.prototype.update=function(r){var e=r.get("alwaysShowContent");e&&this._moveIfResized()},a.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},a.prototype.setContent=function(r,e,n,o,s){var u=this;g.Kn(r)&&(0,Zr._y)(""),this.el&&this._zr.remove(this.el);var h=n.getModel("textStyle");this.el=new ee.ZP({style:{rich:e.richTextStyles,text:r,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:h.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:(0,Nn.d_)(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),g.S6(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){u.el.style[d]=n.get(d)}),g.S6(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){u.el.style[d]=h.get(d)||0}),this._zr.add(this.el);var v=this;this.el.on("mouseover",function(){v._enterable&&(clearTimeout(v._hideTimeout),v._show=!0),v._inContent=!0}),this.el.on("mouseout",function(){v._enterable&&v._show&&v.hideLater(v._hideDelay),v._inContent=!1})},a.prototype.setEnterable=function(r){this._enterable=r},a.prototype.getSize=function(){var r=this.el,e=this.el.getBoundingRect(),n=g1(r.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},a.prototype.moveTo=function(r,e){var n=this.el;if(n){var o=this._styleCoord;m1(o,this._zr,r,e),r=o[0],e=o[1];var s=n.style,u=vl(s.borderWidth||0),h=g1(s);n.x=r+u+h.left,n.y=e+u+h.top,n.markRedraw()}},a.prototype._moveIfResized=function(){var r=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(r*this._zr.getWidth(),e*this._zr.getHeight())},a.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},a.prototype.hideLater=function(r){this._show&&!(this._inContent&&this._enterable)&&(r?(this._hideDelay=r,this._show=!1,this._hideTimeout=setTimeout(g.ak(this.hide,this),r)):this.hide())},a.prototype.isShow=function(){return this._show},a.prototype.dispose=function(){this._zr.remove(this.el)},a}();function vl(a){return Math.max(0,a)}function g1(a){var r=vl(a.shadowBlur||0),e=vl(a.shadowOffsetX||0),n=vl(a.shadowOffsetY||0);return{left:vl(r-e),right:vl(r+e),top:vl(r-n),bottom:vl(r+n)}}function m1(a,r,e,n){a[0]=e,a[1]=n,a[2]=a[0]/r.getWidth(),a[3]=a[1]/r.getHeight()}var lA=sA,uA=F(15015),Ad=F(61219),fA=new on.Z({shape:{x:-1,y:-1,width:2,height:2}}),hA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){if(!(ta.Z.node||!n.getDom())){var o=e.getComponent("tooltip"),s=this._renderMode=(0,Xe.U9)(o.get("renderMode"));this._tooltipContent=s==="richText"?new lA(n):new oA(n.getDom(),n,{appendToBody:o.get("appendToBody",!0)})}},r.prototype.render=function(e,n,o){if(!(ta.Z.node||!o.getDom())){this.group.removeAll(),this._tooltipModel=e,this._ecModel=n,this._api=o,this._alwaysShowContent=e.get("alwaysShowContent");var s=this._tooltipContent;s.update(e),s.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&e.get("transitionDuration")?(0,ni.T9)(this,"_updatePosition",50,"fixRate"):(0,ni.ZH)(this,"_updatePosition")}},r.prototype._initGlobalListener=function(){var e=this._tooltipModel,n=e.get("triggerOn");S_("itemTooltip",this._api,(0,g.ak)(function(o,s,u){n!=="none"&&(n.indexOf(o)>=0?this._tryShow(s,u):o==="leave"&&this._hide(u))},this))},r.prototype._keepShow=function(){var e=this._tooltipModel,n=this._ecModel,o=this._api,s=e.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&s!=="none"&&s!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&u.manuallyShowTip(e,n,o,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},r.prototype.manuallyShowTip=function(e,n,o,s){if(!(s.from===this.uid||ta.Z.node||!o.getDom())){var u=y1(s,o);this._ticket="";var h=s.dataByCoordSys,v=pA(s,n,o);if(v){var d=v.el.getBoundingRect().clone();d.applyTransform(v.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:v.el,position:s.position,positionDefault:"bottom"},u)}else if(s.tooltip&&s.x!=null&&s.y!=null){var m=fA;m.x=s.x,m.y=s.y,m.update(),(0,Hr.A)(m).tooltipConfig={name:null,option:s.tooltip},this._tryShow({offsetX:s.x,offsetY:s.y,target:m},u)}else if(h)this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,dataByCoordSys:h,tooltipOption:s.tooltipOption},u);else if(s.seriesIndex!=null){if(this._manuallyAxisShowTip(e,n,o,s))return;var _=w_(s,n),S=_.point[0],b=_.point[1];S!=null&&b!=null&&this._tryShow({offsetX:S,offsetY:b,target:_.el,position:s.position,positionDefault:"bottom"},u)}else s.x!=null&&s.y!=null&&(o.dispatchAction({type:"updateAxisPointer",x:s.x,y:s.y}),this._tryShow({offsetX:s.x,offsetY:s.y,position:s.position,target:o.getZr().findHover(s.x,s.y).target},u))}},r.prototype.manuallyHideTip=function(e,n,o,s){var u=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,s.from!==this.uid&&this._hide(y1(s,o))},r.prototype._manuallyAxisShowTip=function(e,n,o,s){var u=s.seriesIndex,h=s.dataIndex,v=n.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||h==null||v==null)){var d=n.getSeriesByIndex(u);if(!!d){var m=d.getData(),_=$h([m.getItemModel(h),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(_.get("trigger")==="axis")return o.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:h,position:s.position}),!0}}},r.prototype._tryShow=function(e,n){var o=e.target,s=this._tooltipModel;if(!!s){this._lastX=e.offsetX,this._lastY=e.offsetY;var u=e.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,e);else if(o){this._lastDataByCoordSys=null;var h,v;(0,Wf.o)(o,function(d){if((0,Hr.A)(d).dataIndex!=null)return h=d,!0;if((0,Hr.A)(d).tooltipConfig!=null)return v=d,!0},!0),h?this._showSeriesItemTooltip(e,h,n):v?this._showComponentItemTooltip(e,v,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},r.prototype._showOrMove=function(e,n){var o=e.get("showDelay");n=(0,g.ak)(n,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(n,o):n()},r.prototype._showAxisTooltip=function(e,n){var o=this._ecModel,s=this._tooltipModel,u=[n.offsetX,n.offsetY],h=$h([n.tooltipOption],s),v=this._renderMode,d=[],m=(0,Nn.TX)("section",{blocks:[],noHeader:!0}),_=[],S=new Nn.iv;(0,g.S6)(e,function(pt){(0,g.S6)(pt.dataByAxis,function(mt){var bt=o.getComponent(mt.axisDim+"Axis",mt.axisIndex),Lt=mt.value;if(!(!bt||Lt==null)){var Pt=p_(Lt,bt.axis,o,mt.seriesDataIndices,mt.valueLabelOpt),Ot=(0,Nn.TX)("section",{header:Pt,noHeader:!(0,g.fy)(Pt),sortBlocks:!0,blocks:[]});m.blocks.push(Ot),(0,g.S6)(mt.seriesDataIndices,function(kt){var jt=o.getSeriesByIndex(kt.seriesIndex),re=kt.dataIndexInside,ae=jt.getDataParams(re);if(!(ae.dataIndex<0)){ae.axisDim=mt.axisDim,ae.axisIndex=mt.axisIndex,ae.axisType=mt.axisType,ae.axisId=mt.axisId,ae.axisValue=ii.DX(bt.axis,{value:Lt}),ae.axisValueLabel=Pt,ae.marker=S.makeTooltipMarker("item",(0,Cn.Lz)(ae.color),v);var he=(0,Ad.f)(jt.formatTooltip(re,!0,null)),me=he.frag;if(me){var Te=$h([jt],s).get("valueFormatter");Ot.blocks.push(Te?(0,g.l7)({valueFormatter:Te},me):me)}he.text&&_.push(he.text),d.push(ae)}})}})}),m.blocks.reverse(),_.reverse();var b=n.position,P=h.get("order"),R=(0,Nn.BY)(m,S,v,P,o.get("useUTC"),h.get("textStyle"));R&&_.unshift(R);var Y=v==="richText"?`

`:"<br/>",nt=_.join(Y);this._showOrMove(h,function(){this._updateContentNotChangedOnAxis(e,d)?this._updatePosition(h,b,u[0],u[1],this._tooltipContent,d):this._showTooltipContent(h,nt,d,Math.random()+"",u[0],u[1],b,null,S)})},r.prototype._showSeriesItemTooltip=function(e,n,o){var s=this._ecModel,u=(0,Hr.A)(n),h=u.seriesIndex,v=s.getSeriesByIndex(h),d=u.dataModel||v,m=u.dataIndex,_=u.dataType,S=d.getData(_),b=this._renderMode,P=e.positionDefault,R=$h([S.getItemModel(m),d,v&&(v.coordinateSystem||{}).model],this._tooltipModel,P?{position:P}:null),Y=R.get("trigger");if(!(Y!=null&&Y!=="item")){var nt=d.getDataParams(m,_),pt=new Nn.iv;nt.marker=pt.makeTooltipMarker("item",(0,Cn.Lz)(nt.color),b);var mt=(0,Ad.f)(d.formatTooltip(m,!1,_)),bt=R.get("order"),Lt=R.get("valueFormatter"),Pt=mt.frag,Ot=Pt?(0,Nn.BY)(Lt?(0,g.l7)({valueFormatter:Lt},Pt):Pt,pt,b,bt,s.get("useUTC"),R.get("textStyle")):mt.text,kt="item_"+d.name+"_"+m;this._showOrMove(R,function(){this._showTooltipContent(R,Ot,nt,kt,e.offsetX,e.offsetY,e.position,e.target,pt)}),o({type:"showTip",dataIndexInside:m,dataIndex:S.getRawIndex(m),seriesIndex:h,from:this.uid})}},r.prototype._showComponentItemTooltip=function(e,n,o){var s=(0,Hr.A)(n),u=s.tooltipConfig,h=u.option||{};if((0,g.HD)(h)){var v=h;h={content:v,formatter:v}}var d=[h],m=this._ecModel.getComponent(s.componentMainType,s.componentIndex);m&&d.push(m),d.push({formatter:h.content});var _=e.positionDefault,S=$h(d,this._tooltipModel,_?{position:_}:null),b=S.get("content"),P=Math.random()+"",R=new Nn.iv;this._showOrMove(S,function(){var Y=(0,g.d9)(S.get("formatterParams")||{});this._showTooltipContent(S,b,Y,P,e.offsetX,e.offsetY,e.position,n,R)}),o({type:"showTip",from:this.uid})},r.prototype._showTooltipContent=function(e,n,o,s,u,h,v,d,m){if(this._ticket="",!(!e.get("showContent")||!e.get("show"))){var _=this._tooltipContent;_.setEnterable(e.get("enterable"));var S=e.get("formatter");v=v||e.get("position");var b=n,P=this._getNearestPoint([u,h],o,e.get("trigger"),e.get("borderColor")),R=P.color;if(S)if((0,g.HD)(S)){var Y=e.ecModel.get("useUTC"),nt=(0,g.kJ)(o)?o[0]:o,pt=nt&&nt.axisType&&nt.axisType.indexOf("time")>=0;b=S,pt&&(b=(0,uA.WU)(nt.axisValue,b,Y)),b=(0,Cn.kF)(b,o,!0)}else if((0,g.mf)(S)){var mt=(0,g.ak)(function(bt,Lt){bt===this._ticket&&(_.setContent(Lt,m,e,R,v),this._updatePosition(e,v,u,h,_,o,d))},this);this._ticket=s,b=S(o,s,mt)}else b=S;_.setContent(b,m,e,R,v),_.show(e,R),this._updatePosition(e,v,u,h,_,o,d)}},r.prototype._getNearestPoint=function(e,n,o,s){if(o==="axis"||(0,g.kJ)(n))return{color:s||(this._renderMode==="html"?"#fff":"none")};if(!(0,g.kJ)(n))return{color:s||n.color||n.borderColor}},r.prototype._updatePosition=function(e,n,o,s,u,h,v){var d=this._api.getWidth(),m=this._api.getHeight();n=n||e.get("position");var _=u.getSize(),S=e.get("align"),b=e.get("verticalAlign"),P=v&&v.getBoundingRect().clone();if(v&&P.applyTransform(v.transform),(0,g.mf)(n)&&(n=n([o,s],h,u.el,P,{viewSize:[d,m],contentSize:_.slice()})),(0,g.kJ)(n))o=(0,Ie.GM)(n[0],d),s=(0,Ie.GM)(n[1],m);else if((0,g.Kn)(n)){var R=n;R.width=_[0],R.height=_[1];var Y=(0,Kr.ME)(R,{width:d,height:m});o=Y.x,s=Y.y,S=null,b=null}else if((0,g.HD)(n)&&v){var nt=dA(n,P,_,e.get("borderWidth"));o=nt[0],s=nt[1]}else{var nt=cA(o,s,u,d,m,S?null:20,b?null:20);o=nt[0],s=nt[1]}if(S&&(o-=_1(S)?_[0]/2:S==="right"?_[0]:0),b&&(s-=_1(b)?_[1]/2:b==="bottom"?_[1]:0),f1(e)){var nt=vA(o,s,u,d,m);o=nt[0],s=nt[1]}u.moveTo(o,s)},r.prototype._updateContentNotChangedOnAxis=function(e,n){var o=this._lastDataByCoordSys,s=this._cbParamsList,u=!!o&&o.length===e.length;return u&&(0,g.S6)(o,function(h,v){var d=h.dataByAxis||[],m=e[v]||{},_=m.dataByAxis||[];u=u&&d.length===_.length,u&&(0,g.S6)(d,function(S,b){var P=_[b]||{},R=S.seriesDataIndices||[],Y=P.seriesDataIndices||[];u=u&&S.value===P.value&&S.axisType===P.axisType&&S.axisId===P.axisId&&R.length===Y.length,u&&(0,g.S6)(R,function(nt,pt){var mt=Y[pt];u=u&&nt.seriesIndex===mt.seriesIndex&&nt.dataIndex===mt.dataIndex}),s&&(0,g.S6)(S.seriesDataIndices,function(nt){var pt=nt.seriesIndex,mt=n[pt],bt=s[pt];mt&&bt&&bt.data!==mt.data&&(u=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=n,!!u},r.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},r.prototype.dispose=function(e,n){ta.Z.node||!n.getDom()||((0,ni.ZH)(this,"_updatePosition"),this._tooltipContent.dispose(),vm("itemTooltip",n))},r.type="tooltip",r}(pn.Z);function $h(a,r,e){var n=r.ecModel,o;e?(o=new Xn.Z(e,n,n),o=new Xn.Z(r.option,o,n)):o=r;for(var s=a.length-1;s>=0;s--){var u=a[s];u&&(u instanceof Xn.Z&&(u=u.get("tooltip",!0)),(0,g.HD)(u)&&(u={formatter:u}),u&&(o=new Xn.Z(u,o,n)))}return o}function y1(a,r){return a.dispatchAction||(0,g.ak)(r.dispatchAction,r)}function cA(a,r,e,n,o,s,u){var h=e.getSize(),v=h[0],d=h[1];return s!=null&&(a+v+s+2>n?a-=v+s:a+=s),u!=null&&(r+d+u>o?r-=d+u:r+=u),[a,r]}function vA(a,r,e,n,o){var s=e.getSize(),u=s[0],h=s[1];return a=Math.min(a+u,n)-u,r=Math.min(r+h,o)-h,a=Math.max(a,0),r=Math.max(r,0),[a,r]}function dA(a,r,e,n){var o=e[0],s=e[1],u=Math.ceil(Math.SQRT2*n)+8,h=0,v=0,d=r.width,m=r.height;switch(a){case"inside":h=r.x+d/2-o/2,v=r.y+m/2-s/2;break;case"top":h=r.x+d/2-o/2,v=r.y-s-u;break;case"bottom":h=r.x+d/2-o/2,v=r.y+m+u;break;case"left":h=r.x-o-u,v=r.y+m/2-s/2;break;case"right":h=r.x+d+u,v=r.y+m/2-s/2}return[h,v]}function _1(a){return a==="center"||a==="middle"}function pA(a,r,e){var n=(0,Xe.zH)(a).queryOptionMap,o=n.keys()[0];if(!(!o||o==="series")){var s=(0,Xe.HZ)(r,o,n.get(o),{useDefault:!1,enableAll:!1,enableNone:!1}),u=s.models[0];if(!!u){var h=e.getViewOfComponentModel(u),v;if(h.group.traverse(function(d){var m=(0,Hr.A)(d).tooltipConfig;if(m&&m.name===a.name)return v=d,!0}),v)return{componentMainType:o,componentIndex:u.componentIndex,el:v}}}}var gA=hA;function mA(a){(0,N.D)(Jh),a.registerComponentModel(KD),a.registerComponentView(gA),a.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},g.ZT),a.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},g.ZT)}var yA=["rect","polygon","keep","clear"];function _A(a,r){var e=(0,Xe.kF)(a?a.brush:[]);if(!!e.length){var n=[];g.S6(e,function(v){var d=v.hasOwnProperty("toolbox")?v.toolbox:[];d instanceof Array&&(n=n.concat(d))});var o=a&&a.toolbox;g.kJ(o)&&(o=o[0]),o||(o={feature:{}},a.toolbox=[o]);var s=o.feature||(o.feature={}),u=s.brush||(s.brush={}),h=u.type||(u.type=[]);h.push.apply(h,n),xA(h),r&&!h.length&&h.push.apply(h,yA)}}function xA(a){var r={};g.S6(a,function(e){r[e]=1}),a.length=0,g.S6(r,function(e,n){a.push(n)})}var dl=F(26211),x1=g.S6;function S1(a){if(a){for(var r in a)if(a.hasOwnProperty(r))return!0}}function Rm(a,r,e){var n={};return x1(r,function(s){var u=n[s]=o();x1(a[s],function(h,v){if(!!xi.isValidType(v)){var d={type:v,visual:h};e&&e(d,s),u[v]=new xi(d),v==="opacity"&&(d=g.d9(d),d.type="colorAlpha",u.__hidden.__alphaForOpacity=new xi(d))}})}),n;function o(){var s=function(){};s.prototype.__hidden=s.prototype;var u=new s;return u}}function T1(a,r,e){var n;g.S6(e,function(o){r.hasOwnProperty(o)&&S1(r[o])&&(n=!0)}),n&&g.S6(e,function(o){r.hasOwnProperty(o)&&S1(r[o])?a[o]=g.d9(r[o]):delete a[o]})}function SA(a,r,e,n,o,s){var u={};g.S6(a,function(_){var S=xi.prepareVisualTypes(r[_]);u[_]=S});var h;function v(_){return(0,dl.Or)(e,h,_)}function d(_,S){(0,dl.LZ)(e,h,_,S)}s==null?e.each(m):e.each([s],m);function m(_,S){h=s==null?_:S;var b=e.getRawDataItem(h);if(!(b&&b.visualMap===!1))for(var P=n.call(o,_),R=r[P],Y=u[P],nt=0,pt=Y.length;nt<pt;nt++){var mt=Y[nt];R[mt]&&R[mt].applyVisual(_,v,d)}}}function TA(a,r,e,n){var o={};return g.S6(a,function(s){var u=xi.prepareVisualTypes(r[s]);o[s]=u}),{progress:function(u,h){var v;n!=null&&(v=h.getDimensionIndex(n));function d(Lt){return(0,dl.Or)(h,_,Lt)}function m(Lt,Pt){(0,dl.LZ)(h,_,Lt,Pt)}for(var _,S=h.getStore();(_=u.next())!=null;){var b=h.getRawDataItem(_);if(!(b&&b.visualMap===!1))for(var P=n!=null?S.get(v,_):_,R=e(P),Y=r[R],nt=o[R],pt=0,mt=nt.length;pt<mt;pt++){var bt=nt[pt];Y[bt]&&Y[bt].applyVisual(P,d,m)}}}}}var qh=F(40765);function wA(a){var r=a.brushType,e={point:function(n){return w1[r].point(n,e,a)},rect:function(n){return w1[r].rect(n,e,a)}};return e}var w1={lineX:D1(0),lineY:D1(1),rect:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])},rect:function(a,r,e){return a&&e.boundingRect.intersect(a)}},polygon:{point:function(a,r,e){return a&&e.boundingRect.contain(a[0],a[1])&&qh.X(e.range,a[0],a[1])},rect:function(a,r,e){var n=e.range;if(!a||n.length<=1)return!1;var o=a.x,s=a.y,u=a.width,h=a.height,v=n[0];if(qh.X(n,o,s)||qh.X(n,o+u,s)||qh.X(n,o,s+h)||qh.X(n,o+u,s+h)||Dr.Z.create(a).contain(v[0],v[1])||(0,br.linePolygonIntersect)(o,s,o+u,s,n)||(0,br.linePolygonIntersect)(o,s,o,s+h,n)||(0,br.linePolygonIntersect)(o+u,s,o+u,s+h,n)||(0,br.linePolygonIntersect)(o,s+h,o+u,s+h,n))return!0}}};function D1(a){var r=["x","y"],e=["width","height"];return{point:function(n,o,s){if(n){var u=s.range,h=n[a];return tc(h,u)}},rect:function(n,o,s){if(n){var u=s.range,h=[n[r[a]],n[r[a]]+n[e[a]]];return h[1]<h[0]&&h.reverse(),tc(h[0],u)||tc(h[1],u)||tc(u[0],h)||tc(u[1],h)}}}}function tc(a,r){return r[0]<=a&&a<=r[1]}var kE=null,A1=["inBrush","outOfBrush"],Om="__ecBrushSelect",Nm="__ecInBrushSelectEvent";function b1(a){a.eachComponent({mainType:"brush"},function(r){var e=r.brushTargetManager=new Cm(r.option,a);e.setInputRanges(r.areas,a)})}function DA(a,r,e){var n=[],o,s;a.eachComponent({mainType:"brush"},function(u){e&&e.type==="takeGlobalCursor"&&u.setBrushOption(e.key==="brush"?e.brushOption:{brushType:!1})}),b1(a),a.eachComponent({mainType:"brush"},function(u,h){var v={brushId:u.id,brushIndex:h,brushName:u.name,areas:g.d9(u.areas),selected:[]};n.push(v);var d=u.option,m=d.brushLink,_=[],S=[],b=[],P=!1;h||(o=d.throttleType,s=d.throttleDelay);var R=g.UI(u.areas,function(Lt){var Pt=EA[Lt.brushType],Ot=g.ce({boundingRect:Pt?Pt(Lt):void 0},Lt);return Ot.selectors=wA(Ot),Ot}),Y=Rm(u.option,A1,function(Lt){Lt.mappingMethod="fixed"});g.kJ(m)&&g.S6(m,function(Lt){_[Lt]=1});function nt(Lt){return m==="all"||!!_[Lt]}function pt(Lt){return!!Lt.length}a.eachSeries(function(Lt,Pt){var Ot=b[Pt]=[];Lt.subType==="parallel"?mt(Lt,Pt):bt(Lt,Pt,Ot)});function mt(Lt,Pt){var Ot=Lt.coordinateSystem;P=P||Ot.hasAxisBrushed(),nt(Pt)&&Ot.eachActiveState(Lt.getData(),function(kt,jt){kt==="active"&&(S[jt]=1)})}function bt(Lt,Pt,Ot){if(!(!Lt.brushSelector||MA(u,Pt))&&(g.S6(R,function(jt){u.brushTargetManager.controlSeries(jt,Lt,a)&&Ot.push(jt),P=P||pt(Ot)}),nt(Pt)&&pt(Ot))){var kt=Lt.getData();kt.each(function(jt){M1(Lt,Ot,kt,jt)&&(S[jt]=1)})}}a.eachSeries(function(Lt,Pt){var Ot={seriesId:Lt.id,seriesIndex:Pt,seriesName:Lt.name,dataIndex:[]};v.selected.push(Ot);var kt=b[Pt],jt=Lt.getData(),re=nt(Pt)?function(ae){return S[ae]?(Ot.dataIndex.push(jt.getRawIndex(ae)),"inBrush"):"outOfBrush"}:function(ae){return M1(Lt,kt,jt,ae)?(Ot.dataIndex.push(jt.getRawIndex(ae)),"inBrush"):"outOfBrush"};(nt(Pt)?P:pt(kt))&&SA(A1,Y,jt,re)})}),AA(r,o,s,n,e)}function AA(a,r,e,n,o){if(!!o){var s=a.getZr();if(!s[Nm]){s[Om]||(s[Om]=bA);var u=ni.T9(s,Om,e,r);u(a,n)}}}function bA(a,r){if(!a.isDisposed()){var e=a.getZr();e[Nm]=!0,a.dispatchAction({type:"brushSelect",batch:r}),e[Nm]=!1}}function M1(a,r,e,n){for(var o=0,s=r.length;o<s;o++){var u=r[o];if(a.brushSelector(n,e,u.selectors,u))return!0}}function MA(a,r){var e=a.option.seriesIndex;return e!=null&&e!=="all"&&(g.kJ(e)?g.cq(e,r)<0:r!==e)}var EA={rect:function(a){return E1(a.range)},polygon:function(a){for(var r,e=a.range,n=0,o=e.length;n<o;n++){r=r||[[1/0,-1/0],[1/0,-1/0]];var s=e[n];s[0]<r[0][0]&&(r[0][0]=s[0]),s[0]>r[0][1]&&(r[0][1]=s[0]),s[1]<r[1][0]&&(r[1][0]=s[1]),s[1]>r[1][1]&&(r[1][1]=s[1])}return r&&E1(r)}};function E1(a){return new Dr.Z(a[0][0],a[1][0],a[0][1]-a[0][0],a[1][1]-a[1][0])}var CA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new ql(n.getZr())).on("brush",g.ak(this._onBrush,this)).mount()},r.prototype.render=function(e,n,o,s){this.model=e,this._updateController(e,n,o,s)},r.prototype.updateTransform=function(e,n,o,s){b1(n),this._updateController(e,n,o,s)},r.prototype.updateVisual=function(e,n,o,s){this.updateTransform(e,n,o,s)},r.prototype.updateView=function(e,n,o,s){this._updateController(e,n,o,s)},r.prototype._updateController=function(e,n,o,s){(!s||s.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},r.prototype.dispose=function(){this._brushController.dispose()},r.prototype._onBrush=function(e){var n=this.model.id,o=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:n,areas:g.d9(o),$from:n}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:g.d9(o),$from:n})},r.type="brush",r}(pn.Z),PA=CA,LA="#ddd",IA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.areas=[],e.brushOption={},e}return r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&T1(o,e,["inBrush","outOfBrush"]);var s=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:LA},s.hasOwnProperty("liftZ")||(s.liftZ=5)},r.prototype.setAreas=function(e){!e||(this.areas=g.UI(e,function(n){return C1(this.option,n)},this))},r.prototype.setBrushOption=function(e){this.brushOption=C1(this.option,e),this.brushType=this.brushOption.brushType},r.type="brush",r.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],r.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},r}(kn.Z);function C1(a,r){return g.TS({brushType:a.brushType,brushMode:a.brushMode,transformable:a.transformable,brushStyle:new Xn.Z(a.brushStyle).getItemStyle(),removeOnClick:a.removeOnClick,z:a.z},r,!0)}var RA=IA,OA=["rect","polygon","lineX","lineY","keep","clear"],NA=function(a){(0,fe.ZT)(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.render=function(e,n,o){var s,u,h;n.eachComponent({mainType:"brush"},function(v){s=v.brushType,u=v.brushOption.brushMode||"single",h=h||!!v.areas.length}),this._brushType=s,this._brushMode=u,g.S6(e.get("type",!0),function(v){e.setIconStatus(v,(v==="keep"?u==="multiple":v==="clear"?h:v===s)?"emphasis":"normal")})},r.prototype.updateView=function(e,n,o){this.render(e,n,o)},r.prototype.getIcons=function(){var e=this.model,n=e.get("icon",!0),o={};return g.S6(e.get("type",!0),function(s){n[s]&&(o[s]=n[s])}),o},r.prototype.onclick=function(e,n,o){var s=this._brushType,u=this._brushMode;o==="clear"?(n.dispatchAction({type:"axisAreaSelect",intervals:[]}),n.dispatchAction({type:"brush",command:"clear",areas:[]})):n.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:o==="keep"?s:s===o?!1:o,brushMode:o==="keep"?u==="multiple"?"single":"multiple":u}})},r.getDefaultOption=function(e){var n={show:!0,type:OA.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])};return n},r}(Ba),BA=NA;function FA(a){a.registerComponentView(PA),a.registerComponentModel(RA),a.registerPreprocessor(_A),a.registerVisual(a.PRIORITY.VISUAL.BRUSH,DA),a.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(r,e){e.eachComponent({mainType:"brush",query:r},function(n){n.setAreas(r.areas)})}),a.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},g.ZT),a.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},g.ZT),nf("brush",BA)}var zA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(kn.Z),GA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.render=function(e,n,o){if(this.group.removeAll(),!!e.get("show")){var s=this.group,u=e.getModel("textStyle"),h=e.getModel("subtextStyle"),v=e.get("textAlign"),d=g.pD(e.get("textBaseline"),e.get("textVerticalAlign")),m=new ee.ZP({style:(0,or.Lr)(u,{text:e.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),_=m.getBoundingRect(),S=e.get("subtext"),b=new ee.ZP({style:(0,or.Lr)(h,{text:S,fill:h.getTextColor(),y:_.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),P=e.get("link"),R=e.get("sublink"),Y=e.get("triggerEvent",!0);m.silent=!P&&!Y,b.silent=!R&&!Y,P&&m.on("click",function(){(0,Cn.MI)(P,"_"+e.get("target"))}),R&&b.on("click",function(){(0,Cn.MI)(R,"_"+e.get("subtarget"))}),(0,Hr.A)(m).eventData=(0,Hr.A)(b).eventData=Y?{componentType:"title",componentIndex:e.componentIndex}:null,s.add(m),S&&s.add(b);var nt=s.getBoundingRect(),pt=e.getBoxLayoutParams();pt.width=nt.width,pt.height=nt.height;var mt=(0,Kr.ME)(pt,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));v||(v=e.get("left")||e.get("right"),v==="middle"&&(v="center"),v==="right"?mt.x+=mt.width:v==="center"&&(mt.x+=mt.width/2)),d||(d=e.get("top")||e.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?mt.y+=mt.height:d==="middle"&&(mt.y+=mt.height/2),d=d||"top"),s.x=mt.x,s.y=mt.y,s.markRedraw();var bt={align:v,verticalAlign:d};m.setStyle(bt),b.setStyle(bt),nt=s.getBoundingRect();var Lt=mt.margin,Pt=e.getItemStyle(["color","opacity"]);Pt.fill=e.get("backgroundColor");var Ot=new on.Z({shape:{x:nt.x-Lt[3],y:nt.y-Lt[0],width:nt.width+Lt[1]+Lt[3],height:nt.height+Lt[0]+Lt[2],r:e.get("borderRadius")},style:Pt,subPixelOptimize:!0,silent:!0});s.add(Ot)}},r.type="title",r}(pn.Z);function UA(a){a.registerComponentModel(zA),a.registerComponentView(GA)}var kA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode="box",e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._initData()},r.prototype.mergeOption=function(e){a.prototype.mergeOption.apply(this,arguments),this._initData()},r.prototype.setCurrentIndex=function(e){e==null&&(e=this.option.currentIndex);var n=this._data.count();this.option.loop?e=(e%n+n)%n:(e>=n&&(e=n-1),e<0&&(e=0)),this.option.currentIndex=e},r.prototype.getCurrentIndex=function(){return this.option.currentIndex},r.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},r.prototype.setPlayState=function(e){this.option.autoPlay=!!e},r.prototype.getPlayState=function(){return!!this.option.autoPlay},r.prototype._initData=function(){var e=this.option,n=e.data||[],o=e.axisType,s=this._names=[],u;o==="category"?(u=[],(0,g.S6)(n,function(d,m){var _=(0,Xe.U5)((0,Xe.C4)(d),""),S;(0,g.Kn)(d)?(S=(0,g.d9)(d),S.value=m):S=m,u.push(S),s.push(_)})):u=n;var h={category:"ordinal",time:"time",value:"number"}[o]||"number",v=this._data=new ue.Z([{name:"value",type:h}],this);v.initData(u,s)},r.prototype.getData=function(){return this._data},r.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},r.type="timeline",r.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},r}(kn.Z),P1=kA,L1=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline.slider",r.defaultOption=(0,Zi.ZL)(P1.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),r}(P1);(0,g.jB)(L1,Ad.X.prototype);var VA=L1,ZA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="timeline",r}(pn.Z),WA=ZA,HA=function(a){(0,fe.ZT)(r,a);function r(e,n,o,s){var u=a.call(this,e,n,o)||this;return u.type=s||"value",u}return r.prototype.getLabelModel=function(){return this.model.getModel("label")},r.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},r}(Pa.Z),XA=HA,YA=F(85043),KA=F(61618),Bm=Math.PI,I1=(0,Xe.Yf)(),jA=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(e,n){this.api=n},r.prototype.render=function(e,n,o){if(this.model=e,this.api=o,this.ecModel=n,this.group.removeAll(),e.get("show",!0)){var s=this._layout(e,o),u=this._createGroup("_mainGroup"),h=this._createGroup("_labelGroup"),v=this._axis=this._createAxis(s,e);e.formatTooltip=function(d){var m=v.scale.getLabel({value:d});return(0,Nn.TX)("nameValue",{noName:!0,value:m})},(0,g.S6)(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](s,u,v,e)},this),this._renderAxisLabel(s,h,v,e),this._position(s,e)}this._doPlayStop(),this._updateTicksStatus()},r.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},r.prototype.dispose=function(){this._clearTimer()},r.prototype._layout=function(e,n){var o=e.get(["label","position"]),s=e.get("orient"),u=QA(e,n),h;o==null||o==="auto"?h=s==="horizontal"?u.y+u.height/2<n.getHeight()/2?"-":"+":u.x+u.width/2<n.getWidth()/2?"+":"-":(0,g.HD)(o)?h={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][o]:h=o;var v={horizontal:"center",vertical:h>=0||h==="+"?"left":"right"},d={horizontal:h>=0||h==="+"?"top":"bottom",vertical:"middle"},m={horizontal:0,vertical:Bm/2},_=s==="vertical"?u.height:u.width,S=e.getModel("controlStyle"),b=S.get("show",!0),P=b?S.get("itemSize"):0,R=b?S.get("itemGap"):0,Y=P+R,nt=e.get(["label","rotate"])||0;nt=nt*Bm/180;var pt,mt,bt,Lt=S.get("position",!0),Pt=b&&S.get("showPlayBtn",!0),Ot=b&&S.get("showPrevBtn",!0),kt=b&&S.get("showNextBtn",!0),jt=0,re=_;Lt==="left"||Lt==="bottom"?(Pt&&(pt=[0,0],jt+=Y),Ot&&(mt=[jt,0],jt+=Y),kt&&(bt=[re-P,0],re-=Y)):(Pt&&(pt=[re-P,0],re-=Y),Ot&&(mt=[0,0],jt+=Y),kt&&(bt=[re-P,0],re-=Y));var ae=[jt,re];return e.get("inverse")&&ae.reverse(),{viewRect:u,mainLength:_,orient:s,rotation:m[s],labelRotation:nt,labelPosOpt:h,labelAlign:e.get(["label","align"])||v[s],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||d[s],playPosition:pt,prevBtnPosition:mt,nextBtnPosition:bt,axisExtent:ae,controlSize:P,controlGap:R}},r.prototype._position=function(e,n){var o=this._mainGroup,s=this._labelGroup,u=e.viewRect;if(e.orient==="vertical"){var h=gn.Ue(),v=u.x,d=u.y+u.height;gn.Iu(h,h,[-v,-d]),gn.U1(h,h,-Bm/2),gn.Iu(h,h,[v,d]),u=u.clone(),u.applyTransform(h)}var m=pt(u),_=pt(o.getBoundingRect()),S=pt(s.getBoundingRect()),b=[o.x,o.y],P=[s.x,s.y];P[0]=b[0]=m[0][0];var R=e.labelPosOpt;if(R==null||(0,g.HD)(R)){var Y=R==="+"?0:1;mt(b,_,m,1,Y),mt(P,S,m,1,1-Y)}else{var Y=R>=0?0:1;mt(b,_,m,1,Y),P[1]=b[1]+R}o.setPosition(b),s.setPosition(P),o.rotation=s.rotation=e.rotation,nt(o),nt(s);function nt(bt){bt.originX=m[0][0]-bt.x,bt.originY=m[1][0]-bt.y}function pt(bt){return[[bt.x,bt.x+bt.width],[bt.y,bt.y+bt.height]]}function mt(bt,Lt,Pt,Ot,kt){bt[Ot]+=Pt[Ot][kt]-Lt[Ot][kt]}},r.prototype._createAxis=function(e,n){var o=n.getData(),s=n.get("axisType"),u=JA(n,s);u.getTicks=function(){return o.mapArray(["value"],function(d){return{value:d}})};var h=o.getDataExtent("value");u.setExtent(h[0],h[1]),u.calcNiceTicks();var v=new XA("value",u,e.axisExtent,s);return v.model=n,v},r.prototype._createGroup=function(e){var n=this[e]=new Mr.Z;return this.group.add(n),n},r.prototype._renderAxisLine=function(e,n,o,s){var u=o.getExtent();if(!!s.get(["lineStyle","show"])){var h=new Mi.Z({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:(0,g.l7)({lineCap:"round"},s.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});n.add(h);var v=this._progressLine=new Mi.Z({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:(0,g.ce)({lineCap:"round",lineWidth:h.style.lineWidth},s.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});n.add(v)}},r.prototype._renderAxisTick=function(e,n,o,s){var u=this,h=s.getData(),v=o.scale.getTicks();this._tickSymbols=[],(0,g.S6)(v,function(d){var m=o.dataToCoord(d.value),_=h.getItemModel(d.value),S=_.getModel("itemStyle"),b=_.getModel(["emphasis","itemStyle"]),P=_.getModel(["progress","itemStyle"]),R={x:m,y:0,onclick:(0,g.ak)(u._changeTimeline,u,d.value)},Y=R1(_,S,n,R);Y.ensureState("emphasis").style=b.getItemStyle(),Y.ensureState("progress").style=P.getItemStyle(),(0,ir.vF)(Y);var nt=(0,Hr.A)(Y);_.get("tooltip")?(nt.dataIndex=d.value,nt.dataModel=s):nt.dataIndex=nt.dataModel=null,u._tickSymbols.push(Y)})},r.prototype._renderAxisLabel=function(e,n,o,s){var u=this,h=o.getLabelModel();if(!!h.get("show")){var v=s.getData(),d=o.getViewLabels();this._tickLabels=[],(0,g.S6)(d,function(m){var _=m.tickValue,S=v.getItemModel(_),b=S.getModel("label"),P=S.getModel(["emphasis","label"]),R=S.getModel(["progress","label"]),Y=o.dataToCoord(m.tickValue),nt=new ee.ZP({x:Y,y:0,rotation:e.labelRotation-e.rotation,onclick:(0,g.ak)(u._changeTimeline,u,_),silent:!1,style:(0,or.Lr)(b,{text:m.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});nt.ensureState("emphasis").style=(0,or.Lr)(P),nt.ensureState("progress").style=(0,or.Lr)(R),n.add(nt),(0,ir.vF)(nt),I1(nt).dataIndex=_,u._tickLabels.push(nt)})}},r.prototype._renderControl=function(e,n,o,s){var u=e.controlSize,h=e.rotation,v=s.getModel("controlStyle").getItemStyle(),d=s.getModel(["emphasis","controlStyle"]).getItemStyle(),m=s.getPlayState(),_=s.get("inverse",!0);S(e.nextBtnPosition,"next",(0,g.ak)(this._changeTimeline,this,_?"-":"+")),S(e.prevBtnPosition,"prev",(0,g.ak)(this._changeTimeline,this,_?"+":"-")),S(e.playPosition,m?"stop":"play",(0,g.ak)(this._handlePlayClick,this,!m),!0);function S(b,P,R,Y){if(!!b){var nt=(0,vt.GM)((0,g.pD)(s.get(["controlStyle",P+"BtnSize"]),u),u),pt=[0,-nt/2,nt,nt],mt=$A(s,P+"Icon",pt,{x:b[0],y:b[1],originX:u/2,originY:0,rotation:Y?-h:0,rectHover:!0,style:v,onclick:R});mt.ensureState("emphasis").style=d,n.add(mt),(0,ir.vF)(mt)}}},r.prototype._renderCurrentPointer=function(e,n,o,s){var u=s.getData(),h=s.getCurrentIndex(),v=u.getItemModel(h).getModel("checkpointStyle"),d=this,m={onCreate:function(_){_.draggable=!0,_.drift=(0,g.ak)(d._handlePointerDrag,d),_.ondragend=(0,g.ak)(d._handlePointerDragend,d),O1(_,d._progressLine,h,o,s,!0)},onUpdate:function(_){O1(_,d._progressLine,h,o,s)}};this._currentPointer=R1(v,v,this._mainGroup,{},this._currentPointer,m)},r.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},r.prototype._handlePointerDrag=function(e,n,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},r.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},r.prototype._pointerChangeTimeline=function(e,n){var o=this._toAxisCoord(e)[0],s=this._axis,u=Ie.dt(s.getExtent().slice());o>u[1]&&(o=u[1]),o<u[0]&&(o=u[0]),this._currentPointer.x=o,this._currentPointer.markRedraw(),this._progressLine.shape.x2=o,this._progressLine.dirty();var h=this._findNearestTick(o),v=this.model;(n||h!==v.getCurrentIndex()&&v.get("realtime"))&&this._changeTimeline(h)},r.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var n=e.model;e._changeTimeline(n.getCurrentIndex()+(n.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},r.prototype._toAxisCoord=function(e){var n=this._mainGroup.getLocalTransform();return br.applyTransform(e,n,!0)},r.prototype._findNearestTick=function(e){var n=this.model.getData(),o=1/0,s,u=this._axis;return n.each(["value"],function(h,v){var d=u.dataToCoord(h),m=Math.abs(d-e);m<o&&(o=m,s=v)}),s},r.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},r.prototype._changeTimeline=function(e){var n=this.model.getCurrentIndex();e==="+"?e=n+1:e==="-"&&(e=n-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},r.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),n=this._tickSymbols,o=this._tickLabels;if(n)for(var s=0;s<n.length;s++)n&&n[s]&&n[s].toggleState("progress",s<e);if(o)for(var s=0;s<o.length;s++)o&&o[s]&&o[s].toggleState("progress",I1(o[s]).dataIndex<=e)},r.type="timeline.slider",r}(WA);function JA(a,r){if(r=r||a.get("type"),r)switch(r){case"category":return new YA.Z({ordinalMeta:a.getCategories(),extent:[1/0,-1/0]});case"time":return new KA.Z({locale:a.ecModel.getLocaleModel(),useUTC:a.ecModel.get("useUTC")});default:return new gu.Z}}function QA(a,r){return Kr.ME(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()},a.get("padding"))}function $A(a,r,e,n){var o=n.style,s=br.createIcon(a.get(["controlStyle",r]),n||{},new Dr.Z(e[0],e[1],e[2],e[3]));return o&&s.setStyle(o),s}function R1(a,r,e,n,o,s){var u=r.get("color");if(o)o.setColor(u),e.add(o),s&&s.onUpdate(o);else{var h=a.get("symbol");o=(0,Rr.th)(h,-1,-1,2,2,u),o.setStyle("strokeNoScale",!0),e.add(o),s&&s.onCreate(o)}var v=r.getItemStyle(["color"]);o.setStyle(v),n=(0,g.TS)({rectHover:!0,z2:100},n,!0);var d=(0,Rr.zp)(a.get("symbolSize"));n.scaleX=d[0]/2,n.scaleY=d[1]/2;var m=(0,Rr.Cq)(a.get("symbolOffset"),d);m&&(n.x=(n.x||0)+m[0],n.y=(n.y||0)+m[1]);var _=a.get("symbolRotate");return n.rotation=(_||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function O1(a,r,e,n,o,s){if(!a.dragging){var u=o.getModel("checkpointStyle"),h=n.dataToCoord(o.getData().get("value",e));if(s||!u.get("animation",!0))a.attr({x:h,y:0}),r&&r.attr({shape:{x2:h}});else{var v={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};a.stopAnimation(null,!0),a.animateTo({x:h,y:0},v),r&&r.animateTo({shape:{x2:h}},v)}}}var qA=jA;function tb(a){a.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(r,e,n){var o=e.getComponent("timeline");return o&&r.currentIndex!=null&&(o.setCurrentIndex(r.currentIndex),!o.get("loop",!0)&&o.isIndexMax()&&o.getPlayState()&&(o.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:r.from}))),e.resetOption("timeline",{replaceMerge:o.get("replaceMerge",!0)}),(0,g.ce)({currentIndex:o.option.currentIndex},r)}),a.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(r,e){var n=e.getComponent("timeline");n&&r.playState!=null&&n.setPlayState(r.playState)})}function eb(a){var r=a&&a.timeline;g.kJ(r)||(r=r?[r]:[]),g.S6(r,function(e){!e||rb(e)})}function rb(a){var r=a.type,e={number:"value",time:"time"};if(e[r]&&(a.axisType=e[r],delete a.type),N1(a),nu(a,"controlPosition")){var n=a.controlStyle||(a.controlStyle={});nu(n,"position")||(n.position=a.controlPosition),n.position==="none"&&!nu(n,"show")&&(n.show=!1,delete n.position),delete a.controlPosition}g.S6(a.data||[],function(o){g.Kn(o)&&!g.kJ(o)&&(!nu(o,"value")&&nu(o,"name")&&(o.value=o.name),N1(o))})}function N1(a){var r=a.itemStyle||(a.itemStyle={}),e=r.emphasis||(r.emphasis={}),n=a.label||a.label||{},o=n.normal||(n.normal={}),s={normal:1,emphasis:1};g.S6(n,function(u,h){!s[h]&&!nu(o,h)&&(o[h]=u)}),e.label&&!nu(n,"emphasis")&&(n.emphasis=e.label,delete e.label)}function nu(a,r){return a.hasOwnProperty(r)}function nb(a){a.registerComponentModel(VA),a.registerComponentView(qA),a.registerSubTypeDefaulter("timeline",function(){return"slider"}),tb(a),a.registerPreprocessor(eb)}function Fm(a,r){if(!a)return!1;for(var e=(0,g.kJ)(a)?a:[a],n=0;n<e.length;n++)if(e[n]&&e[n][r])return!0;return!1}function bd(a){(0,Xe.Cc)(a,"label",["show"])}var Md=(0,Xe.Yf)(),B1=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.createdBySelf=!1,e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},r.prototype.isAnimationEnabled=function(){if(ta.Z.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},r.prototype.mergeOption=function(e,n){this._mergeOption(e,n,!1,!1)},r.prototype._mergeOption=function(e,n,o,s){var u=this.mainType;o||n.eachSeries(function(h){var v=h.get(this.mainType,!0),d=Md(h)[u];if(!v||!v.data){Md(h)[u]=null;return}d?d._mergeOption(v,n,!0):(s&&bd(v),g.S6(v.data,function(m){m instanceof Array?(bd(m[0]),bd(m[1])):bd(m)}),d=this.createMarkerModelFromSeries(v,this,n),g.l7(d,{mainType:this.mainType,seriesIndex:h.seriesIndex,name:h.name,createdBySelf:!0}),d.__hostSeries=h),Md(h)[u]=d},this)},r.prototype.formatTooltip=function(e,n,o){var s=this.getData(),u=this.getRawValue(e),h=s.getName(e);return(0,Nn.TX)("section",{header:this.name,blocks:[(0,Nn.TX)("nameValue",{name:h,value:u,noName:!h,noValue:u==null})]})},r.prototype.getData=function(){return this._data},r.prototype.setData=function(e){this._data=e},r.getMarkerModelFromSeries=function(e,n){return Md(e)[n]},r.type="marker",r.dependencies=["series","grid","polar","geo"],r}(kn.Z);g.jB(B1,Ad.X.prototype);var pl=B1,ib=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markPoint",r.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},r}(pl),ab=ib,gl=F(98407);function zm(a){return!(isNaN(parseFloat(a.x))&&isNaN(parseFloat(a.y)))}function ob(a){return!isNaN(parseFloat(a.x))&&!isNaN(parseFloat(a.y))}function Ed(a,r,e,n,o,s){var u=[],h=(0,ur.M)(r,n),v=h?r.getCalculationInfo("stackResultDimension"):n,d=Um(r,v,a),m=r.indicesOfNearest(v,d)[0];u[o]=r.get(e,m),u[s]=r.get(v,m);var _=r.get(n,m),S=Ie.p8(r.get(n,m));return S=Math.min(S,20),S>=0&&(u[s]=+u[s].toFixed(S)),[u,_]}var Gm={min:(0,g.WA)(Ed,"min"),max:(0,g.WA)(Ed,"max"),average:(0,g.WA)(Ed,"average"),median:(0,g.WA)(Ed,"median")};function ec(a,r){var e=a.getData(),n=a.coordinateSystem;if(r&&!ob(r)&&!(0,g.kJ)(r.coord)&&n){var o=n.dimensions,s=F1(r,e,n,a);if(r=(0,g.d9)(r),r.type&&Gm[r.type]&&s.baseAxis&&s.valueAxis){var u=(0,g.cq)(o,s.baseAxis.dim),h=(0,g.cq)(o,s.valueAxis.dim),v=Gm[r.type](e,s.baseDataDim,s.valueDataDim,u,h);r.coord=v[0],r.value=v[1]}else{for(var d=[r.xAxis!=null?r.xAxis:r.radiusAxis,r.yAxis!=null?r.yAxis:r.angleAxis],m=0;m<2;m++)Gm[d[m]]&&(d[m]=Um(e,e.mapDimension(o[m]),d[m]));r.coord=d}}return r}function F1(a,r,e,n){var o={};return a.valueIndex!=null||a.valueDim!=null?(o.valueDataDim=a.valueIndex!=null?r.getDimension(a.valueIndex):a.valueDim,o.valueAxis=e.getAxis(sb(n,o.valueDataDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=r.mapDimension(o.baseAxis.dim),o.valueDataDim=r.mapDimension(o.valueAxis.dim)),o}function sb(a,r){var e=a.getData().getDimensionInfo(r);return e&&e.coordDim}function rc(a,r){return a&&a.containData&&r.coord&&!zm(r)?a.containData(r.coord):!0}function lb(a,r,e){return a&&a.containZone&&r.coord&&e.coord&&!zm(r)&&!zm(e)?a.containZone(r.coord,e.coord):!0}function z1(a,r){return a?function(e,n,o,s){var u=s<2?e.coord&&e.coord[s]:e.value;return(0,gl.yQ)(u,r[s])}:function(e,n,o,s){return(0,gl.yQ)(e.value,r[s])}}function Um(a,r,e){if(e==="average"){var n=0,o=0;return a.each(r,function(s,u){isNaN(s)||(n+=s,o++)}),n/o}else return e==="median"?a.getMedian(r):a.getDataExtent(r)[e==="max"?1:0]}var km=(0,Xe.Yf)(),ub=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.init=function(){this.markerGroupMap=(0,g.kW)()},r.prototype.render=function(e,n,o){var s=this,u=this.markerGroupMap;u.each(function(h){km(h).keep=!1}),n.eachSeries(function(h){var v=pl.getMarkerModelFromSeries(h,s.type);v&&s.renderSeries(h,v,n,o)}),u.each(function(h){!km(h).keep&&s.group.remove(h.group)})},r.prototype.markKeep=function(e){km(e).keep=!0},r.prototype.toggleBlurSeries=function(e,n){var o=this;(0,g.S6)(e,function(s){var u=pl.getMarkerModelFromSeries(s,o.type);if(u){var h=u.getData();h.eachItemGraphicEl(function(v){v&&(n?(0,ir.SX)(v):(0,ir.VP)(v))})}})},r.type="marker",r}(pn.Z),Vm=ub;function G1(a,r,e){var n=r.coordinateSystem;a.each(function(o){var s=a.getItemModel(o),u,h=Ie.GM(s.get("x"),e.getWidth()),v=Ie.GM(s.get("y"),e.getHeight());if(!isNaN(h)&&!isNaN(v))u=[h,v];else if(r.getMarkerPosition)u=r.getMarkerPosition(a.getValues(a.dimensions,o));else if(n){var d=a.get(n.dimensions[0],o),m=a.get(n.dimensions[1],o);u=n.dataToPoint([d,m])}isNaN(h)||(u[0]=h),isNaN(v)||(u[1]=v),a.setItemLayout(o,u)})}var fb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=pl.getMarkerModelFromSeries(s,"markPoint");u&&(G1(u.getData(),s,o),this.markerGroupMap.get(s.id).updateLayout())},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,new ra),_=hb(u,e,n);n.setData(_),G1(n.getData(),e,s),_.each(function(S){var b=_.getItemModel(S),P=b.getShallow("symbol"),R=b.getShallow("symbolSize"),Y=b.getShallow("symbolRotate"),nt=b.getShallow("symbolOffset"),pt=b.getShallow("symbolKeepAspect");if((0,g.mf)(P)||(0,g.mf)(R)||(0,g.mf)(Y)||(0,g.mf)(nt)){var mt=n.getRawValue(S),bt=n.getDataParams(S);(0,g.mf)(P)&&(P=P(mt,bt)),(0,g.mf)(R)&&(R=R(mt,bt)),(0,g.mf)(Y)&&(Y=Y(mt,bt)),(0,g.mf)(nt)&&(nt=nt(mt,bt))}var Lt=b.getModel("itemStyle").getItemStyle(),Pt=(0,dl.UL)(v,"color");Lt.fill||(Lt.fill=Pt),_.setItemVisual(S,{symbol:P,symbolSize:R,symbolRotate:Y,symbolOffset:nt,symbolKeepAspect:pt,style:Lt})}),m.updateData(_),this.group.add(m.group),_.eachItemGraphicEl(function(S){S.traverse(function(b){(0,Hr.A)(b).dataModel=n})}),this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markPoint",r}(Vm);function hb(a,r,e){var n;a?n=(0,g.UI)(a&&a.dimensions,function(h){var v=r.getData().getDimensionInfo(r.getData().mapDimension(h))||{};return(0,g.l7)((0,g.l7)({},v),{name:h,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new ue.Z(n,e),s=(0,g.UI)(e.get("data"),(0,g.WA)(ec,r));a&&(s=(0,g.hX)(s,(0,g.WA)(rc,a)));var u=z1(!!a,n);return o.initData(s,null,u),o}var cb=fb;function vb(a){a.registerComponentModel(ab),a.registerComponentView(cb),a.registerPreprocessor(function(r){Fm(r.series,"markPoint")&&(r.markPoint=r.markPoint||{})})}var db=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markLine",r.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},r}(pl),pb=db,Cd=(0,Xe.Yf)(),gb=function(a,r,e,n){var o=a.getData(),s;if((0,g.kJ)(n))s=n;else{var u=n.type;if(u==="min"||u==="max"||u==="average"||u==="median"||n.xAxis!=null||n.yAxis!=null){var h=void 0,v=void 0;if(n.yAxis!=null||n.xAxis!=null)h=r.getAxis(n.yAxis!=null?"y":"x"),v=(0,g.Jv)(n.yAxis,n.xAxis);else{var d=F1(n,o,r,a);h=d.valueAxis;var m=(0,ur.IR)(o,d.valueDataDim);v=Um(o,m,u)}var _=h.dim==="x"?0:1,S=1-_,b=(0,g.d9)(n),P={coord:[]};b.type=null,b.coord=[],b.coord[S]=-1/0,P.coord[S]=1/0;var R=e.get("precision");R>=0&&(0,g.hj)(v)&&(v=+v.toFixed(Math.min(R,20))),b.coord[_]=P.coord[_]=v,s=[b,P,{type:u,valueIndex:n.valueIndex,value:v}]}else s=[]}var Y=[ec(a,s[0]),ec(a,s[1]),(0,g.l7)({},s[2])];return Y[2].type=Y[2].type||null,(0,g.TS)(Y[2],Y[0]),(0,g.TS)(Y[2],Y[1]),Y};function Pd(a){return!isNaN(a)&&!isFinite(a)}function U1(a,r,e,n){var o=1-a,s=n.dimensions[a];return Pd(r[o])&&Pd(e[o])&&r[a]===e[a]&&n.getAxis(s).containData(r[a])}function mb(a,r){if(a.type==="cartesian2d"){var e=r[0].coord,n=r[1].coord;if(e&&n&&(U1(1,e,n,a)||U1(0,e,n,a)))return!0}return rc(a,r[0])&&rc(a,r[1])}function Zm(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),h,v=Ie.GM(u.get("x"),o.getWidth()),d=Ie.GM(u.get("y"),o.getHeight());if(!isNaN(v)&&!isNaN(d))h=[v,d];else{if(n.getMarkerPosition)h=n.getMarkerPosition(a.getValues(a.dimensions,r));else{var m=s.dimensions,_=a.get(m[0],r),S=a.get(m[1],r);h=s.dataToPoint([_,S])}if(Jn(s,"cartesian2d")){var b=s.getAxis("x"),P=s.getAxis("y"),m=s.dimensions;Pd(a.get(m[0],r))?h[0]=b.toGlobalCoord(b.getExtent()[e?0:1]):Pd(a.get(m[1],r))&&(h[1]=P.toGlobalCoord(P.getExtent()[e?0:1]))}isNaN(v)||(h[0]=v),isNaN(d)||(h[1]=d)}a.setItemLayout(r,h)}var yb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=pl.getMarkerModelFromSeries(s,"markLine");if(u){var h=u.getData(),v=Cd(u).from,d=Cd(u).to;v.each(function(m){Zm(v,m,!0,s,o),Zm(d,m,!1,s,o)}),h.each(function(m){h.setItemLayout(m,[v.getItemLayout(m),d.getItemLayout(m)])}),this.markerGroupMap.get(s.id).updateLayout()}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,new Yl);this.group.add(m.group);var _=_b(u,e,n),S=_.from,b=_.to,P=_.line;Cd(n).from=S,Cd(n).to=b,n.setData(P);var R=n.get("symbol"),Y=n.get("symbolSize"),nt=n.get("symbolRotate"),pt=n.get("symbolOffset");(0,g.kJ)(R)||(R=[R,R]),(0,g.kJ)(Y)||(Y=[Y,Y]),(0,g.kJ)(nt)||(nt=[nt,nt]),(0,g.kJ)(pt)||(pt=[pt,pt]),_.from.each(function(bt){mt(S,bt,!0),mt(b,bt,!1)}),P.each(function(bt){var Lt=P.getItemModel(bt).getModel("lineStyle").getLineStyle();P.setItemLayout(bt,[S.getItemLayout(bt),b.getItemLayout(bt)]),Lt.stroke==null&&(Lt.stroke=S.getItemVisual(bt,"style").fill),P.setItemVisual(bt,{fromSymbolKeepAspect:S.getItemVisual(bt,"symbolKeepAspect"),fromSymbolOffset:S.getItemVisual(bt,"symbolOffset"),fromSymbolRotate:S.getItemVisual(bt,"symbolRotate"),fromSymbolSize:S.getItemVisual(bt,"symbolSize"),fromSymbol:S.getItemVisual(bt,"symbol"),toSymbolKeepAspect:b.getItemVisual(bt,"symbolKeepAspect"),toSymbolOffset:b.getItemVisual(bt,"symbolOffset"),toSymbolRotate:b.getItemVisual(bt,"symbolRotate"),toSymbolSize:b.getItemVisual(bt,"symbolSize"),toSymbol:b.getItemVisual(bt,"symbol"),style:Lt})}),m.updateData(P),_.line.eachItemGraphicEl(function(bt){(0,Hr.A)(bt).dataModel=n,bt.traverse(function(Lt){(0,Hr.A)(Lt).dataModel=n})});function mt(bt,Lt,Pt){var Ot=bt.getItemModel(Lt);Zm(bt,Lt,Pt,e,s);var kt=Ot.getModel("itemStyle").getItemStyle();kt.fill==null&&(kt.fill=(0,dl.UL)(v,"color")),bt.setItemVisual(Lt,{symbolKeepAspect:Ot.get("symbolKeepAspect"),symbolOffset:(0,g.pD)(Ot.get("symbolOffset",!0),pt[Pt?0:1]),symbolRotate:(0,g.pD)(Ot.get("symbolRotate",!0),nt[Pt?0:1]),symbolSize:(0,g.pD)(Ot.get("symbolSize"),Y[Pt?0:1]),symbol:(0,g.pD)(Ot.get("symbol",!0),R[Pt?0:1]),style:kt})}this.markKeep(m),m.group.silent=n.get("silent")||e.get("silent")},r.type="markLine",r}(Vm);function _b(a,r,e){var n;a?n=(0,g.UI)(a&&a.dimensions,function(d){var m=r.getData().getDimensionInfo(r.getData().mapDimension(d))||{};return(0,g.l7)((0,g.l7)({},m),{name:d,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var o=new ue.Z(n,e),s=new ue.Z(n,e),u=new ue.Z([],e),h=(0,g.UI)(e.get("data"),(0,g.WA)(gb,r,a,e));a&&(h=(0,g.hX)(h,(0,g.WA)(mb,a)));var v=z1(!!a,n);return o.initData((0,g.UI)(h,function(d){return d[0]}),null,v),s.initData((0,g.UI)(h,function(d){return d[1]}),null,v),u.initData((0,g.UI)(h,function(d){return d[2]})),u.hasItemOption=!0,{from:o,to:s,line:u}}var xb=yb;function Sb(a){a.registerComponentModel(pb),a.registerComponentView(xb),a.registerPreprocessor(function(r){Fm(r.series,"markLine")&&(r.markLine=r.markLine||{})})}var Tb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.createMarkerModelFromSeries=function(e,n,o){return new r(e,n,o)},r.type="markArea",r.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},r}(pl),wb=Tb,Ld=(0,Xe.Yf)(),Db=function(a,r,e,n){var o=ec(a,n[0]),s=ec(a,n[1]),u=o.coord,h=s.coord;u[0]=(0,g.Jv)(u[0],-1/0),u[1]=(0,g.Jv)(u[1],-1/0),h[0]=(0,g.Jv)(h[0],1/0),h[1]=(0,g.Jv)(h[1],1/0);var v=(0,g.Jn)([{},o,s]);return v.coord=[o.coord,s.coord],v.x0=o.x,v.y0=o.y,v.x1=s.x,v.y1=s.y,v};function Id(a){return!isNaN(a)&&!isFinite(a)}function k1(a,r,e,n){var o=1-a;return Id(r[o])&&Id(e[o])}function Ab(a,r){var e=r.coord[0],n=r.coord[1],o={coord:e,x:r.x0,y:r.y0},s={coord:n,x:r.x1,y:r.y1};return Jn(a,"cartesian2d")?e&&n&&(k1(1,e,n,a)||k1(0,e,n,a))?!0:lb(a,o,s):rc(a,o)||rc(a,s)}function V1(a,r,e,n,o){var s=n.coordinateSystem,u=a.getItemModel(r),h,v=Ie.GM(u.get(e[0]),o.getWidth()),d=Ie.GM(u.get(e[1]),o.getHeight());if(!isNaN(v)&&!isNaN(d))h=[v,d];else{if(n.getMarkerPosition)h=n.getMarkerPosition(a.getValues(e,r));else{var m=a.get(e[0],r),_=a.get(e[1],r),S=[m,_];s.clampData&&s.clampData(S,S),h=s.dataToPoint(S,!0)}if(Jn(s,"cartesian2d")){var b=s.getAxis("x"),P=s.getAxis("y"),m=a.get(e[0],r),_=a.get(e[1],r);Id(m)?h[0]=b.toGlobalCoord(b.getExtent()[e[0]==="x0"?0:1]):Id(_)&&(h[1]=P.toGlobalCoord(P.getExtent()[e[1]==="y0"?0:1]))}isNaN(v)||(h[0]=v),isNaN(d)||(h[1]=d)}return h}var Z1=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],bb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.updateTransform=function(e,n,o){n.eachSeries(function(s){var u=pl.getMarkerModelFromSeries(s,"markArea");if(u){var h=u.getData();h.each(function(v){var d=(0,g.UI)(Z1,function(_){return V1(h,v,_,s,o)});h.setItemLayout(v,d);var m=h.getItemGraphicEl(v);m.setShape("points",d)})}},this)},r.prototype.renderSeries=function(e,n,o,s){var u=e.coordinateSystem,h=e.id,v=e.getData(),d=this.markerGroupMap,m=d.get(h)||d.set(h,{group:new Mr.Z});this.group.add(m.group),this.markKeep(m);var _=Mb(u,e,n);n.setData(_),_.each(function(S){var b=(0,g.UI)(Z1,function(kt){return V1(_,S,kt,e,s)}),P=u.getAxis("x").scale,R=u.getAxis("y").scale,Y=P.getExtent(),nt=R.getExtent(),pt=[P.parse(_.get("x0",S)),P.parse(_.get("x1",S))],mt=[R.parse(_.get("y0",S)),R.parse(_.get("y1",S))];Ie.dt(pt),Ie.dt(mt);var bt=!(Y[0]>pt[1]||Y[1]<pt[0]||nt[0]>mt[1]||nt[1]<mt[0]),Lt=!bt;_.setItemLayout(S,{points:b,allClipped:Lt});var Pt=_.getItemModel(S).getModel("itemStyle").getItemStyle(),Ot=(0,dl.UL)(v,"color");Pt.fill||(Pt.fill=Ot,(0,g.HD)(Pt.fill)&&(Pt.fill=Rn.modifyAlpha(Pt.fill,.4))),Pt.stroke||(Pt.stroke=Ot),_.setItemVisual(S,"style",Pt)}),_.diff(Ld(m).data).add(function(S){var b=_.getItemLayout(S);if(!b.allClipped){var P=new Ln.Z({shape:{points:b.points}});_.setItemGraphicEl(S,P),m.group.add(P)}}).update(function(S,b){var P=Ld(m).data.getItemGraphicEl(b),R=_.getItemLayout(S);R.allClipped?P&&m.group.remove(P):(P?cr.D(P,{shape:{points:R.points}},n,S):P=new Ln.Z({shape:{points:R.points}}),_.setItemGraphicEl(S,P),m.group.add(P))}).remove(function(S){var b=Ld(m).data.getItemGraphicEl(S);m.group.remove(b)}).execute(),_.eachItemGraphicEl(function(S,b){var P=_.getItemModel(b),R=_.getItemVisual(b,"style");S.useStyle(_.getItemVisual(b,"style")),(0,or.ni)(S,(0,or.k3)(P),{labelFetcher:n,labelDataIndex:b,defaultText:_.getName(b)||"",inheritColor:(0,g.HD)(R.fill)?Rn.modifyAlpha(R.fill,1):"#000"}),(0,ir.WO)(S,P),(0,ir.k5)(S,null,null,P.get(["emphasis","disabled"])),(0,Hr.A)(S).dataModel=n}),Ld(m).data=_,m.group.silent=n.get("silent")||e.get("silent")},r.type="markArea",r}(Vm);function Mb(a,r,e){var n,o,s=["x0","y0","x1","y1"];if(a){var u=(0,g.UI)(a&&a.dimensions,function(d){var m=r.getData(),_=m.getDimensionInfo(m.mapDimension(d))||{};return(0,g.l7)((0,g.l7)({},_),{name:d,ordinalMeta:null})});o=(0,g.UI)(s,function(d,m){return{name:d,type:u[m%2].type}}),n=new ue.Z(o,e)}else o=[{name:"value",type:"float"}],n=new ue.Z(o,e);var h=(0,g.UI)(e.get("data"),(0,g.WA)(Db,r,a,e));a&&(h=(0,g.hX)(h,(0,g.WA)(Ab,a)));var v=a?function(d,m,_,S){var b=d.coord[Math.floor(S/2)][S%2];return(0,gl.yQ)(b,o[S])}:function(d,m,_,S){return(0,gl.yQ)(d.value,o[S])};return n.initData(h,null,v),n.hasItemOption=!0,n}var Eb=bb;function Cb(a){a.registerComponentModel(wb),a.registerComponentView(Eb),a.registerPreprocessor(function(r){Fm(r.series,"markArea")&&(r.markArea=r.markArea||{})})}var Pb=function(a,r){if(r==="all")return{type:"all",title:a.getLocaleModel().get(["legend","selector","all"])};if(r==="inverse")return{type:"inverse",title:a.getLocaleModel().get(["legend","selector","inverse"])}},Lb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.layoutMode={type:"box",ignoreSize:!0},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},r.prototype._updateSelector=function(e){var n=e.selector,o=this.ecModel;n===!0&&(n=e.selector=["all","inverse"]),g.kJ(n)&&g.S6(n,function(s,u){g.HD(s)&&(s={type:s}),n[u]=g.TS(s,Pb(o,s.type))})},r.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&this.get("selectedMode")==="single"){for(var n=!1,o=0;o<e.length;o++){var s=e[o].get("name");if(this.isSelected(s)){this.select(s),n=!0;break}}!n&&this.select(e[0].get("name"))}},r.prototype._updateData=function(e){var n=[],o=[];e.eachRawSeries(function(h){var v=h.name;o.push(v);var d;if(h.legendVisualProvider){var m=h.legendVisualProvider,_=m.getAllNames();e.isSeriesFiltered(h)||(o=o.concat(_)),_.length?n=n.concat(_):d=!0}else d=!0;d&&(0,Xe.yu)(h)&&n.push(h.name)}),this._availableNames=o;var s=this.get("data")||n,u=g.UI(s,function(h){return(g.HD(h)||g.hj(h))&&(h={name:h}),new Xn.Z(h,this,this.ecModel)},this);this._data=u},r.prototype.getData=function(){return this._data},r.prototype.select=function(e){var n=this.option.selected,o=this.get("selectedMode");if(o==="single"){var s=this._data;g.S6(s,function(u){n[u.get("name")]=!1})}n[e]=!0},r.prototype.unSelect=function(e){this.get("selectedMode")!=="single"&&(this.option.selected[e]=!1)},r.prototype.toggleSelected=function(e){var n=this.option.selected;n.hasOwnProperty(e)||(n[e]=!0),this[n[e]?"unSelect":"select"](e)},r.prototype.allSelect=function(){var e=this._data,n=this.option.selected;g.S6(e,function(o){n[o.get("name",!0)]=!0})},r.prototype.inverseSelect=function(){var e=this._data,n=this.option.selected;g.S6(e,function(o){var s=o.get("name",!0);n.hasOwnProperty(s)||(n[s]=!0),n[s]=!n[s]})},r.prototype.isSelected=function(e){var n=this.option.selected;return!(n.hasOwnProperty(e)&&!n[e])&&g.cq(this._availableNames,e)>=0},r.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},r.type="legend.plain",r.dependencies=["series"],r.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},r}(kn.Z),Wm=Lb,of=g.WA,Hm=g.S6,Rd=Mr.Z,Ib=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!1,e}return r.prototype.init=function(){this.group.add(this._contentGroup=new Rd),this.group.add(this._selectorGroup=new Rd),this._isFirstRender=!0},r.prototype.getContentGroup=function(){return this._contentGroup},r.prototype.getSelectorGroup=function(){return this._selectorGroup},r.prototype.render=function(e,n,o){var s=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!e.get("show",!0)){var u=e.get("align"),h=e.get("orient");(!u||u==="auto")&&(u=e.get("left")==="right"&&h==="vertical"?"right":"left");var v=e.get("selector",!0),d=e.get("selectorPosition",!0);v&&(!d||d==="auto")&&(d=h==="horizontal"?"end":"start"),this.renderInner(u,e,n,o,v,h,d);var m=e.getBoxLayoutParams(),_={width:o.getWidth(),height:o.getHeight()},S=e.get("padding"),b=Kr.ME(m,_,S),P=this.layoutInner(e,u,b,s,v,d),R=Kr.ME(g.ce({width:P.width,height:P.height},m),_,S);this.group.x=R.x-P.x,this.group.y=R.y-P.y,this.group.markRedraw(),this.group.add(this._backgroundEl=$_(P,e))}},r.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},r.prototype.renderInner=function(e,n,o,s,u,h,v){var d=this.getContentGroup(),m=g.kW(),_=n.get("selectedMode"),S=[];o.eachRawSeries(function(b){!b.get("legendHoverLink")&&S.push(b.id)}),Hm(n.getData(),function(b,P){var R=b.get("name");if(!this.newlineDisabled&&(R===""||R===`
`)){var Y=new Rd;Y.newline=!0,d.add(Y);return}var nt=o.getSeriesByName(R)[0];if(!m.get(R))if(nt){var pt=nt.getData(),mt=pt.getVisual("legendLineStyle")||{},bt=pt.getVisual("legendIcon"),Lt=pt.getVisual("style"),Pt=this._createItem(nt,R,P,b,n,e,mt,Lt,bt,_,s);Pt.on("click",of(W1,R,null,s,S)).on("mouseover",of(Xm,nt.name,null,s,S)).on("mouseout",of(Ym,nt.name,null,s,S)),m.set(R,!0)}else o.eachRawSeries(function(Ot){if(!m.get(R)&&Ot.legendVisualProvider){var kt=Ot.legendVisualProvider;if(!kt.containName(R))return;var jt=kt.indexOfName(R),re=kt.getItemVisual(jt,"style"),ae=kt.getItemVisual(jt,"legendIcon"),he=(0,Rn.parse)(re.fill);he&&he[3]===0&&(he[3]=.2,re=g.l7(g.l7({},re),{fill:(0,Rn.stringify)(he,"rgba")}));var me=this._createItem(Ot,R,P,b,n,e,{},re,ae,_,s);me.on("click",of(W1,null,R,s,S)).on("mouseover",of(Xm,null,R,s,S)).on("mouseout",of(Ym,null,R,s,S)),m.set(R,!0)}},this)},this),u&&this._createSelector(u,n,s,h,v)},r.prototype._createSelector=function(e,n,o,s,u){var h=this.getSelectorGroup();Hm(e,function(d){var m=d.type,_=new ee.ZP({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:m==="all"?"legendAllSelect":"legendInverseSelect"})}});h.add(_);var S=n.getModel("selectorLabel"),b=n.getModel(["emphasis","selectorLabel"]);(0,or.ni)(_,{normal:S,emphasis:b},{defaultText:d.title}),(0,ir.vF)(_)})},r.prototype._createItem=function(e,n,o,s,u,h,v,d,m,_,S){var b=e.visualDrawType,P=u.get("itemWidth"),R=u.get("itemHeight"),Y=u.isSelected(n),nt=s.get("symbolRotate"),pt=s.get("symbolKeepAspect"),mt=s.get("icon");m=mt||m||"roundRect";var bt=Rb(m,s,v,d,b,Y,S),Lt=new Rd,Pt=s.getModel("textStyle");if(g.mf(e.getLegendIcon)&&(!mt||mt==="inherit"))Lt.add(e.getLegendIcon({itemWidth:P,itemHeight:R,icon:m,iconRotate:nt,itemStyle:bt.itemStyle,lineStyle:bt.lineStyle,symbolKeepAspect:pt}));else{var Ot=mt==="inherit"&&e.getData().getVisual("symbol")?nt==="inherit"?e.getData().getVisual("symbolRotate"):nt:0;Lt.add(Ob({itemWidth:P,itemHeight:R,icon:m,iconRotate:Ot,itemStyle:bt.itemStyle,lineStyle:bt.lineStyle,symbolKeepAspect:pt}))}var kt=h==="left"?P+5:-5,jt=h,re=u.get("formatter"),ae=n;g.HD(re)&&re?ae=re.replace("{name}",n??""):g.mf(re)&&(ae=re(n));var he=s.get("inactiveColor");Lt.add(new ee.ZP({style:(0,or.Lr)(Pt,{text:ae,x:kt,y:R/2,fill:Y?Pt.getTextColor():he,align:jt,verticalAlign:"middle"})}));var me=new on.Z({shape:Lt.getBoundingRect(),invisible:!0}),Te=s.getModel("tooltip");return Te.get("show")&&br.setTooltipConfig({el:me,componentModel:u,itemName:n,itemTooltipOption:Te.option}),Lt.add(me),Lt.eachChild(function(be){be.silent=!0}),me.silent=!_,this.getContentGroup().add(Lt),(0,ir.vF)(Lt),Lt.__legendDataIndex=o,Lt},r.prototype.layoutInner=function(e,n,o,s,u,h){var v=this.getContentGroup(),d=this.getSelectorGroup();Kr.BZ(e.get("orient"),v,e.get("itemGap"),o.width,o.height);var m=v.getBoundingRect(),_=[-m.x,-m.y];if(d.markRedraw(),v.markRedraw(),u){Kr.BZ("horizontal",d,e.get("selectorItemGap",!0));var S=d.getBoundingRect(),b=[-S.x,-S.y],P=e.get("selectorButtonGap",!0),R=e.getOrient().index,Y=R===0?"width":"height",nt=R===0?"height":"width",pt=R===0?"y":"x";h==="end"?b[R]+=m[Y]+P:_[R]+=S[Y]+P,b[1-R]+=m[nt]/2-S[nt]/2,d.x=b[0],d.y=b[1],v.x=_[0],v.y=_[1];var mt={x:0,y:0};return mt[Y]=m[Y]+P+S[Y],mt[nt]=Math.max(m[nt],S[nt]),mt[pt]=Math.min(0,S[pt]+b[1-R]),mt}else return v.x=_[0],v.y=_[1],this.group.getBoundingRect()},r.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},r.type="legend.plain",r}(pn.Z);function Rb(a,r,e,n,o,s,u){function h(Y,nt){Y.lineWidth==="auto"&&(Y.lineWidth=nt.lineWidth>0?2:0),Hm(Y,function(pt,mt){Y[mt]==="inherit"&&(Y[mt]=nt[mt])})}var v=r.getModel("itemStyle"),d=v.getItemStyle(),m=a.lastIndexOf("empty",0)===0?"fill":"stroke",_=v.getShallow("decal");d.decal=!_||_==="inherit"?n.decal:(0,ns.I)(_,u),d.fill==="inherit"&&(d.fill=n[o]),d.stroke==="inherit"&&(d.stroke=n[m]),d.opacity==="inherit"&&(d.opacity=(o==="fill"?n:e).opacity),h(d,n);var S=r.getModel("lineStyle"),b=S.getLineStyle();if(h(b,e),d.fill==="auto"&&(d.fill=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),b.stroke==="auto"&&(b.stroke=n.fill),!s){var P=r.get("inactiveBorderWidth"),R=d[m];d.lineWidth=P==="auto"?n.lineWidth>0&&R?2:0:d.lineWidth,d.fill=r.get("inactiveColor"),d.stroke=r.get("inactiveBorderColor"),b.stroke=S.get("inactiveColor"),b.lineWidth=S.get("inactiveWidth")}return{itemStyle:d,lineStyle:b}}function Ob(a){var r=a.icon||"roundRect",e=(0,Rr.th)(r,0,0,a.itemWidth,a.itemHeight,a.itemStyle.fill,a.symbolKeepAspect);return e.setStyle(a.itemStyle),e.rotation=(a.iconRotate||0)*Math.PI/180,e.setOrigin([a.itemWidth/2,a.itemHeight/2]),r.indexOf("empty")>-1&&(e.style.stroke=e.style.fill,e.style.fill="#fff",e.style.lineWidth=2),e}function W1(a,r,e,n){Ym(a,r,e,n),e.dispatchAction({type:"legendToggleSelect",name:a??r}),Xm(a,r,e,n)}function H1(a){for(var r=a.getZr().storage.getDisplayList(),e,n=0,o=r.length;n<o&&!(e=r[n].states.emphasis);)n++;return e&&e.hoverLayer}function Xm(a,r,e,n){H1(e)||e.dispatchAction({type:"highlight",seriesName:a,name:r,excludeSeriesId:n})}function Ym(a,r,e,n){H1(e)||e.dispatchAction({type:"downplay",seriesName:a,name:r,excludeSeriesId:n})}var X1=Ib;function Nb(a){var r=a.findComponents({mainType:"legend"});r&&r.length&&a.filterSeries(function(e){for(var n=0;n<r.length;n++)if(!r[n].isSelected(e.name))return!1;return!0})}function nc(a,r,e){var n={},o=a==="toggleSelected",s;return e.eachComponent("legend",function(u){o&&s!=null?u[s?"select":"unSelect"](r.name):a==="allSelect"||a==="inverseSelect"?u[a]():(u[a](r.name),s=u.isSelected(r.name));var h=u.getData();(0,g.S6)(h,function(v){var d=v.get("name");if(!(d===`
`||d==="")){var m=u.isSelected(d);n.hasOwnProperty(d)?n[d]=n[d]&&m:n[d]=m}})}),a==="allSelect"||a==="inverseSelect"?{selected:n}:{name:r.name,selected:n}}function Bb(a){a.registerAction("legendToggleSelect","legendselectchanged",(0,g.WA)(nc,"toggleSelected")),a.registerAction("legendAllSelect","legendselectall",(0,g.WA)(nc,"allSelect")),a.registerAction("legendInverseSelect","legendinverseselect",(0,g.WA)(nc,"inverseSelect")),a.registerAction("legendSelect","legendselected",(0,g.WA)(nc,"select")),a.registerAction("legendUnSelect","legendunselected",(0,g.WA)(nc,"unSelect"))}function Y1(a){a.registerComponentModel(Wm),a.registerComponentView(X1),a.registerProcessor(a.PRIORITY.PROCESSOR.SERIES_FILTER,Nb),a.registerSubTypeDefaulter("legend",function(){return"plain"}),Bb(a)}var Fb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},r.prototype.init=function(e,n,o){var s=(0,Kr.tE)(e);a.prototype.init.call(this,e,n,o),K1(this,e,s)},r.prototype.mergeOption=function(e,n){a.prototype.mergeOption.call(this,e,n),K1(this,this.option,e)},r.type="legend.scroll",r.defaultOption=(0,Zi.ZL)(Wm.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),r}(Wm);function K1(a,r,e){var n=a.getOrient(),o=[1,1];o[n.index]=0,(0,Kr.dt)(r,e,{type:"box",ignoreSize:!!o})}var zb=Fb,j1=Mr.Z,Km=["width","height"],jm=["x","y"],Gb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.newlineDisabled=!0,e._currentIndex=0,e}return r.prototype.init=function(){a.prototype.init.call(this),this.group.add(this._containerGroup=new j1),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new j1)},r.prototype.resetInner=function(){a.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},r.prototype.renderInner=function(e,n,o,s,u,h,v){var d=this;a.prototype.renderInner.call(this,e,n,o,s,u,h,v);var m=this._controllerGroup,_=n.get("pageIconSize",!0),S=g.kJ(_)?_:[_,_];P("pagePrev",0);var b=n.getModel("pageTextStyle");m.add(new ee.ZP({name:"pageText",style:{text:"xx/xx",fill:b.getTextColor(),font:b.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),P("pageNext",1);function P(R,Y){var nt=R+"DataIndex",pt=br.createIcon(n.get("pageIcons",!0)[n.getOrient().name][Y],{onclick:g.ak(d._pageGo,d,nt,n,s)},{x:-S[0]/2,y:-S[1]/2,width:S[0],height:S[1]});pt.name=R,m.add(pt)}},r.prototype.layoutInner=function(e,n,o,s,u,h){var v=this.getSelectorGroup(),d=e.getOrient().index,m=Km[d],_=jm[d],S=Km[1-d],b=jm[1-d];u&&Kr.BZ("horizontal",v,e.get("selectorItemGap",!0));var P=e.get("selectorButtonGap",!0),R=v.getBoundingRect(),Y=[-R.x,-R.y],nt=g.d9(o);u&&(nt[m]=o[m]-R[m]-P);var pt=this._layoutContentAndController(e,s,nt,d,m,S,b,_);if(u){if(h==="end")Y[d]+=pt[m]+P;else{var mt=R[m]+P;Y[d]-=mt,pt[_]-=mt}pt[m]+=R[m]+P,Y[1-d]+=pt[b]+pt[S]/2-R[S]/2,pt[S]=Math.max(pt[S],R[S]),pt[b]=Math.min(pt[b],R[b]+Y[1-d]),v.x=Y[0],v.y=Y[1],v.markRedraw()}return pt},r.prototype._layoutContentAndController=function(e,n,o,s,u,h,v,d){var m=this.getContentGroup(),_=this._containerGroup,S=this._controllerGroup;Kr.BZ(e.get("orient"),m,e.get("itemGap"),s?o.width:null,s?null:o.height),Kr.BZ("horizontal",S,e.get("pageButtonItemGap",!0));var b=m.getBoundingRect(),P=S.getBoundingRect(),R=this._showController=b[u]>o[u],Y=[-b.x,-b.y];n||(Y[s]=m[d]);var nt=[0,0],pt=[-P.x,-P.y],mt=g.pD(e.get("pageButtonGap",!0),e.get("itemGap",!0));if(R){var bt=e.get("pageButtonPosition",!0);bt==="end"?pt[s]+=o[u]-P[u]:nt[s]+=P[u]+mt}pt[1-s]+=b[h]/2-P[h]/2,m.setPosition(Y),_.setPosition(nt),S.setPosition(pt);var Lt={x:0,y:0};if(Lt[u]=R?o[u]:b[u],Lt[h]=Math.max(b[h],P[h]),Lt[v]=Math.min(0,P[v]+pt[1-s]),_.__rectSize=o[u],R){var Pt={x:0,y:0};Pt[u]=Math.max(o[u]-P[u]-mt,0),Pt[h]=Lt[h],_.setClipPath(new on.Z({shape:Pt})),_.__rectSize=Pt[u]}else S.eachChild(function(kt){kt.attr({invisible:!0,silent:!0})});var Ot=this._getPageInfo(e);return Ot.pageIndex!=null&&cr.D(m,{x:Ot.contentPosition[0],y:Ot.contentPosition[1]},R?e:null),this._updatePageInfoView(e,Ot),Lt},r.prototype._pageGo=function(e,n,o){var s=this._getPageInfo(n)[e];s!=null&&o.dispatchAction({type:"legendScroll",scrollDataIndex:s,legendId:n.id})},r.prototype._updatePageInfoView=function(e,n){var o=this._controllerGroup;g.S6(["pagePrev","pageNext"],function(m){var _=m+"DataIndex",S=n[_]!=null,b=o.childOfName(m);b&&(b.setStyle("fill",S?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),b.cursor=S?"pointer":"default")});var s=o.childOfName("pageText"),u=e.get("pageFormatter"),h=n.pageIndex,v=h!=null?h+1:0,d=n.pageCount;s&&u&&s.setStyle("text",g.HD(u)?u.replace("{current}",v==null?"":v+"").replace("{total}",d==null?"":d+""):u({current:v,total:d}))},r.prototype._getPageInfo=function(e){var n=e.get("scrollDataIndex",!0),o=this.getContentGroup(),s=this._containerGroup.__rectSize,u=e.getOrient().index,h=Km[u],v=jm[u],d=this._findTargetItemIndex(n),m=o.children(),_=m[d],S=m.length,b=S?1:0,P={contentPosition:[o.x,o.y],pageCount:b,pageIndex:b-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!_)return P;var R=bt(_);P.contentPosition[u]=-R.s;for(var Y=d+1,nt=R,pt=R,mt=null;Y<=S;++Y)mt=bt(m[Y]),(!mt&&pt.e>nt.s+s||mt&&!Lt(mt,nt.s))&&(pt.i>nt.i?nt=pt:nt=mt,nt&&(P.pageNextDataIndex==null&&(P.pageNextDataIndex=nt.i),++P.pageCount)),pt=mt;for(var Y=d-1,nt=R,pt=R,mt=null;Y>=-1;--Y)mt=bt(m[Y]),(!mt||!Lt(pt,mt.s))&&nt.i<pt.i&&(pt=nt,P.pagePrevDataIndex==null&&(P.pagePrevDataIndex=nt.i),++P.pageCount,++P.pageIndex),nt=mt;return P;function bt(Pt){if(Pt){var Ot=Pt.getBoundingRect(),kt=Ot[v]+Pt[v];return{s:kt,e:kt+Ot[h],i:Pt.__legendDataIndex}}}function Lt(Pt,Ot){return Pt.e>=Ot&&Pt.s<=Ot+s}},r.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var n,o=this.getContentGroup(),s;return o.eachChild(function(u,h){var v=u.__legendDataIndex;s==null&&v!=null&&(s=h),v===e&&(n=h)}),n??s},r.type="legend.scroll",r}(X1),Ub=Gb;function kb(a){a.registerAction("legendScroll","legendscroll",function(r,e){var n=r.scrollDataIndex;n!=null&&e.eachComponent({mainType:"legend",subType:"scroll",query:r},function(o){o.setScrollDataIndex(n)})})}function Vb(a){(0,N.D)(Y1),a.registerComponentModel(zb),a.registerComponentView(Ub),kb(a)}function Zb(a){(0,N.D)(Y1),(0,N.D)(Vb)}var Wb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.inside",r.defaultOption=(0,Zi.ZL)(Qh.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),r}(Qh),Hb=Wb,Jm=(0,Xe.Yf)();function Xb(a,r,e){Jm(a).coordSysRecordMap.each(function(n){var o=n.dataZoomInfoMap.get(r.uid);o&&(o.getRange=e)})}function Yb(a,r){for(var e=Jm(a).coordSysRecordMap,n=e.keys(),o=0;o<n.length;o++){var s=n[o],u=e.get(s),h=u.dataZoomInfoMap;if(h){var v=r.uid,d=h.get(v);d&&(h.removeKey(v),h.keys().length||J1(e,u))}}}function J1(a,r){if(r){a.removeKey(r.model.uid);var e=r.controller;e&&e.dispose()}}function Kb(a,r){var e={model:r,containsPoint:(0,g.WA)(Jb,r),dispatchAction:(0,g.WA)(jb,a),dataZoomInfoMap:null,controller:null},n=e.controller=new ho(a.getZr());return(0,g.S6)(["pan","zoom","scrollMove"],function(o){n.on(o,function(s){var u=[];e.dataZoomInfoMap.each(function(h){if(!!s.isAvailableBehavior(h.model.option)){var v=(h.getRange||{})[o],d=v&&v(h.dzReferCoordSysInfo,e.model.mainType,e.controller,s);!h.model.get("disabled",!0)&&d&&u.push({dataZoomId:h.model.id,start:d[0],end:d[1]})}}),u.length&&e.dispatchAction(u)})}),e}function jb(a,r){a.isDisposed()||a.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:r})}function Jb(a,r,e,n){return a.coordinateSystem.containPoint([e,n])}function Qb(a){var r,e="type_",n={type_true:2,type_move:1,type_false:0,type_undefined:-1},o=!0;return a.each(function(s){var u=s.model,h=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;n[e+h]>n[e+r]&&(r=h),o=o&&u.get("preventDefaultMouseMove",!0)}),{controlType:r,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!o}}}function $b(a){a.registerProcessor(a.PRIORITY.PROCESSOR.FILTER,function(r,e){var n=Jm(e),o=n.coordSysRecordMap||(n.coordSysRecordMap=(0,g.kW)());o.each(function(s){s.dataZoomInfoMap=null}),r.eachComponent({mainType:"dataZoom",subType:"inside"},function(s){var u=X_(s);(0,g.S6)(u.infoList,function(h){var v=h.model.uid,d=o.get(v)||o.set(v,Kb(e,h.model)),m=d.dataZoomInfoMap||(d.dataZoomInfoMap=(0,g.kW)());m.set(s.uid,{dzReferCoordSysInfo:h,model:s,getRange:null})})}),o.each(function(s){var u=s.controller,h,v=s.dataZoomInfoMap;if(v){var d=v.keys()[0];d!=null&&(h=v.get(d))}if(!h){J1(o,s);return}var m=Qb(v);u.enable(m.controlType,m.opt),u.setPointerChecker(s.containsPoint),ni.T9(s,"dispatchAction",h.model.get("throttle",!0),"fixRate")})})}var qb=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return r.prototype.render=function(e,n,o){if(a.prototype.render.apply(this,arguments),e.noTarget()){this._clear();return}this.range=e.getPercentRange(),Xb(o,e,{pan:(0,g.ak)(Qm.pan,this),zoom:(0,g.ak)(Qm.zoom,this),scrollMove:(0,g.ak)(Qm.scrollMove,this)})},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){Yb(this.api,this.dataZoomModel),this.range=null},r.type="dataZoom.inside",r}(wm),Qm={zoom:function(a,r,e,n){var o=this.range,s=o.slice(),u=a.axisModels[0];if(!!u){var h=$m[r](null,[n.originX,n.originY],u,e,a),v=(h.signal>0?h.pixelStart+h.pixelLength-h.pixel:h.pixel-h.pixelStart)/h.pixelLength*(s[1]-s[0])+s[0],d=Math.max(1/n.scale,0);s[0]=(s[0]-v)*d+v,s[1]=(s[1]-v)*d+v;var m=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(ps(0,s,[0,100],0,m.minSpan,m.maxSpan),this.range=s,o[0]!==s[0]||o[1]!==s[1])return s}},pan:Q1(function(a,r,e,n,o,s){var u=$m[n]([s.oldX,s.oldY],[s.newX,s.newY],r,o,e);return u.signal*(a[1]-a[0])*u.pixel/u.pixelLength}),scrollMove:Q1(function(a,r,e,n,o,s){var u=$m[n]([0,0],[s.scrollDelta,s.scrollDelta],r,o,e);return u.signal*(a[1]-a[0])*s.scrollDelta})};function Q1(a){return function(r,e,n,o){var s=this.range,u=s.slice(),h=r.axisModels[0];if(!!h){var v=a(u,h,r,e,n,o);if(ps(v,u,[0,100],"all"),this.range=u,s[0]!==u[0]||s[1]!==u[1])return u}}}var $m={grid:function(a,r,e,n,o){var s=e.axis,u={},h=o.model.coordinateSystem.getRect();return a=a||[0,0],s.dim==="x"?(u.pixel=r[0]-a[0],u.pixelLength=h.width,u.pixelStart=h.x,u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=h.height,u.pixelStart=h.y,u.signal=s.inverse?-1:1),u},polar:function(a,r,e,n,o){var s=e.axis,u={},h=o.model.coordinateSystem,v=h.getRadiusAxis().getExtent(),d=h.getAngleAxis().getExtent();return a=a?h.pointToCoord(a):[0,0],r=h.pointToCoord(r),e.mainType==="radiusAxis"?(u.pixel=r[0]-a[0],u.pixelLength=v[1]-v[0],u.pixelStart=v[0],u.signal=s.inverse?1:-1):(u.pixel=r[1]-a[1],u.pixelLength=d[1]-d[0],u.pixelStart=d[0],u.signal=s.inverse?-1:1),u},singleAxis:function(a,r,e,n,o){var s=e.axis,u=o.model.coordinateSystem.getRect(),h={};return a=a||[0,0],s.orient==="horizontal"?(h.pixel=r[0]-a[0],h.pixelLength=u.width,h.pixelStart=u.x,h.signal=s.inverse?1:-1):(h.pixel=r[1]-a[1],h.pixelLength=u.height,h.pixelStart=u.y,h.signal=s.inverse?-1:1),h}},tM=qb;function $1(a){Dm(a),a.registerComponentModel(Hb),a.registerComponentView(tM),$b(a)}var eM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.type="dataZoom.slider",r.layoutMode="box",r.defaultOption=(0,Zi.ZL)(Qh.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),r}(Qh),rM=eM,ic=on.Z,q1=7,nM=1,qm=30,iM=7,ac="horizontal",tx="vertical",aM=5,oM=["line","bar","candlestick","scatter"],sM={easing:"cubicOut",duration:100,delay:0},lM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._displayables={},e}return r.prototype.init=function(e,n){this.api=n,this._onBrush=(0,g.ak)(this._onBrush,this),this._onBrushEnd=(0,g.ak)(this._onBrushEnd,this)},r.prototype.render=function(e,n,o,s){if(a.prototype.render.apply(this,arguments),ni.T9(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),e.get("show")===!1){this.group.removeAll();return}if(e.noTarget()){this._clear(),this.group.removeAll();return}(!s||s.type!=="dataZoom"||s.from!==this.uid)&&this._buildView(),this._updateView()},r.prototype.dispose=function(){this._clear(),a.prototype.dispose.apply(this,arguments)},r.prototype._clear=function(){ni.ZH(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},r.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var n=this._displayables.sliderGroup=new Mr.Z;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(n),this._positionGroup()},r.prototype._resetLocation=function(){var e=this.dataZoomModel,n=this.api,o=e.get("brushSelect"),s=o?iM:0,u=this._findCoordRect(),h={width:n.getWidth(),height:n.getHeight()},v=this._orient===ac?{right:h.width-u.x-u.width,top:h.height-qm-q1-s,width:u.width,height:qm}:{right:q1,top:u.y,width:qm,height:u.height},d=Kr.tE(e.option);(0,g.S6)(["right","top","width","height"],function(_){d[_]==="ph"&&(d[_]=v[_])});var m=Kr.ME(d,h);this._location={x:m.x,y:m.y},this._size=[m.width,m.height],this._orient===tx&&this._size.reverse()},r.prototype._positionGroup=function(){var e=this.group,n=this._location,o=this._orient,s=this.dataZoomModel.getFirstTargetAxisModel(),u=s&&s.get("inverse"),h=this._displayables.sliderGroup,v=(this._dataShadowInfo||{}).otherAxisInverse;h.attr(o===ac&&!u?{scaleY:v?1:-1,scaleX:1}:o===ac&&u?{scaleY:v?1:-1,scaleX:-1}:o===tx&&!u?{scaleY:v?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:v?-1:1,scaleX:-1,rotation:Math.PI/2});var d=e.getBoundingRect([h]);e.x=n.x-d.x,e.y=n.y-d.y,e.markRedraw()},r.prototype._getViewExtent=function(){return[0,this._size[0]]},r.prototype._renderBackground=function(){var e=this.dataZoomModel,n=this._size,o=this._displayables.sliderGroup,s=e.get("brushSelect");o.add(new ic({silent:!0,shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var u=new ic({shape:{x:0,y:0,width:n[0],height:n[1]},style:{fill:"transparent"},z2:0,onclick:(0,g.ak)(this._onClickPanel,this)}),h=this.api.getZr();s?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",h.on("mousemove",this._onBrush),h.on("mouseup",this._onBrushEnd)):(h.off("mousemove",this._onBrush),h.off("mouseup",this._onBrushEnd)),o.add(u)},r.prototype._renderDataShadow=function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!e)return;var n=this._size,o=this._shadowSize||[],s=e.series,u=s.getRawData(),h=s.getShadowDim?s.getShadowDim():e.otherDim;if(h==null)return;var v=this._shadowPolygonPts,d=this._shadowPolylinePts;if(u!==this._shadowData||h!==this._shadowDim||n[0]!==o[0]||n[1]!==o[1]){var m=u.getDataExtent(h),_=(m[1]-m[0])*.3;m=[m[0]-_,m[1]+_];var S=[0,n[1]],b=[0,n[0]],P=[[n[0],0],[0,0]],R=[],Y=b[1]/(u.count()-1),nt=0,pt=Math.round(u.count()/n[0]),mt;u.each([h],function(kt,jt){if(pt>0&&jt%pt){nt+=Y;return}var re=kt==null||isNaN(kt)||kt==="",ae=re?0:(0,Ie.NU)(kt,m,S,!0);re&&!mt&&jt?(P.push([P[P.length-1][0],0]),R.push([R[R.length-1][0],0])):!re&&mt&&(P.push([nt,0]),R.push([nt,0])),P.push([nt,ae]),R.push([nt,ae]),nt+=Y,mt=re}),v=this._shadowPolygonPts=P,d=this._shadowPolylinePts=R}this._shadowData=u,this._shadowDim=h,this._shadowSize=[n[0],n[1]];var bt=this.dataZoomModel;function Lt(kt){var jt=bt.getModel(kt?"selectedDataBackground":"dataBackground"),re=new Mr.Z,ae=new Ln.Z({shape:{points:v},segmentIgnoreThreshold:1,style:jt.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),he=new Hi.Z({shape:{points:d},segmentIgnoreThreshold:1,style:jt.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return re.add(ae),re.add(he),re}for(var Pt=0;Pt<3;Pt++){var Ot=Lt(Pt===1);this._displayables.sliderGroup.add(Ot),this._displayables.dataShadowSegs.push(Ot)}},r.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,n=e.get("showDataShadow");if(n!==!1){var o,s=this.ecModel;return e.eachTargetAxis(function(u,h){var v=e.getAxisProxy(u,h).getTargetSeriesModels();(0,g.S6)(v,function(d){if(!o&&!(n!==!0&&(0,g.cq)(oM,d.get("type"))<0)){var m=s.getComponent(cl(u),h).axis,_=uM(u),S,b=d.coordinateSystem;_!=null&&b.getOtherAxis&&(S=b.getOtherAxis(m).inverse),_=d.getData().mapDimension(_),o={thisAxis:m,series:d,thisDim:u,otherDim:_,otherAxisInverse:S}}},this)},this),o}},r.prototype._renderHandle=function(){var e=this.group,n=this._displayables,o=n.handles=[null,null],s=n.handleLabels=[null,null],u=this._displayables.sliderGroup,h=this._size,v=this.dataZoomModel,d=this.api,m=v.get("borderRadius")||0,_=v.get("brushSelect"),S=n.filler=new ic({silent:_,style:{fill:v.get("fillerColor")},textConfig:{position:"inside"}});u.add(S),u.add(new ic({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:h[0],height:h[1],r:m},style:{stroke:v.get("dataBackgroundColor")||v.get("borderColor"),lineWidth:nM,fill:"rgba(0,0,0,0)"}})),(0,g.S6)([0,1],function(mt){var bt=v.get("handleIcon");!Rr.Pw[bt]&&bt.indexOf("path://")<0&&bt.indexOf("image://")<0&&(bt="path://"+bt);var Lt=(0,Rr.th)(bt,-1,0,2,2,null,!0);Lt.attr({cursor:ex(this._orient),draggable:!0,drift:(0,g.ak)(this._onDragMove,this,mt),ondragend:(0,g.ak)(this._onDragEnd,this),onmouseover:(0,g.ak)(this._showDataInfo,this,!0),onmouseout:(0,g.ak)(this._showDataInfo,this,!1),z2:5});var Pt=Lt.getBoundingRect(),Ot=v.get("handleSize");this._handleHeight=(0,Ie.GM)(Ot,this._size[1]),this._handleWidth=Pt.width/Pt.height*this._handleHeight,Lt.setStyle(v.getModel("handleStyle").getItemStyle()),Lt.style.strokeNoScale=!0,Lt.rectHover=!0,Lt.ensureState("emphasis").style=v.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,ir.vF)(Lt);var kt=v.get("handleColor");kt!=null&&(Lt.style.fill=kt),u.add(o[mt]=Lt);var jt=v.getModel("textStyle");e.add(s[mt]=new ee.ZP({silent:!0,invisible:!0,style:(0,or.Lr)(jt,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:jt.getTextColor(),font:jt.getFont()}),z2:10}))},this);var b=S;if(_){var P=(0,Ie.GM)(v.get("moveHandleSize"),h[1]),R=n.moveHandle=new on.Z({style:v.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:h[1]-.5,height:P}}),Y=P*.8,nt=n.moveHandleIcon=(0,Rr.th)(v.get("moveHandleIcon"),-Y/2,-Y/2,Y,Y,"#fff",!0);nt.silent=!0,nt.y=h[1]+P/2-.5,R.ensureState("emphasis").style=v.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var pt=Math.min(h[1]/2,Math.max(P,10));b=n.moveZone=new on.Z({invisible:!0,shape:{y:h[1]-pt,height:P+pt}}),b.on("mouseover",function(){d.enterEmphasis(R)}).on("mouseout",function(){d.leaveEmphasis(R)}),u.add(R),u.add(nt),u.add(b)}b.attr({draggable:!0,cursor:ex(this._orient),drift:(0,g.ak)(this._onDragMove,this,"all"),ondragstart:(0,g.ak)(this._showDataInfo,this,!0),ondragend:(0,g.ak)(this._onDragEnd,this),onmouseover:(0,g.ak)(this._showDataInfo,this,!0),onmouseout:(0,g.ak)(this._showDataInfo,this,!1)})},r.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),n=this._getViewExtent();this._handleEnds=[(0,Ie.NU)(e[0],[0,100],n,!0),(0,Ie.NU)(e[1],[0,100],n,!0)]},r.prototype._updateInterval=function(e,n){var o=this.dataZoomModel,s=this._handleEnds,u=this._getViewExtent(),h=o.findRepresentativeAxisProxy().getMinMaxSpan(),v=[0,100];ps(n,s,u,o.get("zoomLock")?"all":e,h.minSpan!=null?(0,Ie.NU)(h.minSpan,v,u,!0):null,h.maxSpan!=null?(0,Ie.NU)(h.maxSpan,v,u,!0):null);var d=this._range,m=this._range=(0,Ie.dt)([(0,Ie.NU)(s[0],u,v,!0),(0,Ie.NU)(s[1],u,v,!0)]);return!d||d[0]!==m[0]||d[1]!==m[1]},r.prototype._updateView=function(e){var n=this._displayables,o=this._handleEnds,s=(0,Ie.dt)(o.slice()),u=this._size;(0,g.S6)([0,1],function(b){var P=n.handles[b],R=this._handleHeight;P.attr({scaleX:R/2,scaleY:R/2,x:o[b]+(b?-1:1),y:u[1]/2-R/2})},this),n.filler.setShape({x:s[0],y:0,width:s[1]-s[0],height:u[1]});var h={x:s[0],width:s[1]-s[0]};n.moveHandle&&(n.moveHandle.setShape(h),n.moveZone.setShape(h),n.moveZone.getBoundingRect(),n.moveHandleIcon&&n.moveHandleIcon.attr("x",h.x+h.width/2));for(var v=n.dataShadowSegs,d=[0,s[0],s[1],u[0]],m=0;m<v.length;m++){var _=v[m],S=_.getClipPath();S||(S=new on.Z,_.setClipPath(S)),S.setShape({x:d[m],y:0,width:d[m+1]-d[m],height:u[1]})}this._updateDataInfo(e)},r.prototype._updateDataInfo=function(e){var n=this.dataZoomModel,o=this._displayables,s=o.handleLabels,u=this._orient,h=["",""];if(n.get("showDetail")){var v=n.findRepresentativeAxisProxy();if(v){var d=v.getAxisModel().axis,m=this._range,_=e?v.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:v.getDataValueWindow();h=[this._formatLabel(_[0],d),this._formatLabel(_[1],d)]}}var S=(0,Ie.dt)(this._handleEnds.slice());b.call(this,0),b.call(this,1);function b(P){var R=br.getTransform(o.handles[P].parent,this.group),Y=br.transformDirection(P===0?"right":"left",R),nt=this._handleWidth/2+aM,pt=br.applyTransform([S[P]+(P===0?-nt:nt),this._size[1]/2],R);s[P].setStyle({x:pt[0],y:pt[1],verticalAlign:u===ac?"middle":Y,align:u===ac?Y:"center",text:h[P]})}},r.prototype._formatLabel=function(e,n){var o=this.dataZoomModel,s=o.get("labelFormatter"),u=o.get("labelPrecision");(u==null||u==="auto")&&(u=n.getPixelPrecision());var h=e==null||isNaN(e)?"":n.type==="category"||n.type==="time"?n.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(u,20));return(0,g.mf)(s)?s(e,h):(0,g.HD)(s)?s.replace("{value}",h):h},r.prototype._showDataInfo=function(e){e=this._dragging||e;var n=this._displayables,o=n.handleLabels;o[0].attr("invisible",!e),o[1].attr("invisible",!e),n.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](n.moveHandle,1)},r.prototype._onDragMove=function(e,n,o,s){this._dragging=!0,Ri.sT(s.event);var u=this._displayables.sliderGroup.getLocalTransform(),h=br.applyTransform([n,o],u,!0),v=this._updateInterval(e,h[0]),d=this.dataZoomModel.get("realtime");this._updateView(!d),v&&d&&this._dispatchZoomAction(!0)},r.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var e=this.dataZoomModel.get("realtime");!e&&this._dispatchZoomAction(!1)},r.prototype._onClickPanel=function(e){var n=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){var s=this._handleEnds,u=(s[0]+s[1])/2,h=this._updateInterval("all",o[0]-u);this._updateView(),h&&this._dispatchZoomAction(!1)}},r.prototype._onBrushStart=function(e){var n=e.offsetX,o=e.offsetY;this._brushStart=new bi.Z(n,o),this._brushing=!0,this._brushStartTime=+new Date},r.prototype._onBrushEnd=function(e){if(!!this._brushing){var n=this._displayables.brushRect;if(this._brushing=!1,!!n){n.attr("ignore",!0);var o=n.shape,s=+new Date;if(!(s-this._brushStartTime<200&&Math.abs(o.width)<5)){var u=this._getViewExtent(),h=[0,100];this._range=(0,Ie.dt)([(0,Ie.NU)(o.x,u,h,!0),(0,Ie.NU)(o.x+o.width,u,h,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},r.prototype._onBrush=function(e){this._brushing&&(Ri.sT(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},r.prototype._updateBrushRect=function(e,n){var o=this._displayables,s=this.dataZoomModel,u=o.brushRect;u||(u=o.brushRect=new ic({silent:!0,style:s.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(u)),u.attr("ignore",!1);var h=this._brushStart,v=this._displayables.sliderGroup,d=v.transformCoordToLocal(e,n),m=v.transformCoordToLocal(h.x,h.y),_=this._size;d[0]=Math.max(Math.min(_[0],d[0]),0),u.setShape({x:m[0],y:0,width:d[0]-m[0],height:_[1]})},r.prototype._dispatchZoomAction=function(e){var n=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?sM:null,start:n[0],end:n[1]})},r.prototype._findCoordRect=function(){var e,n=X_(this.dataZoomModel).infoList;if(!e&&n.length){var o=n[0].model.coordinateSystem;e=o.getRect&&o.getRect()}if(!e){var s=this.api.getWidth(),u=this.api.getHeight();e={x:s*.2,y:u*.2,width:s*.6,height:u*.6}}return e},r.type="dataZoom.slider",r}(wm);function uM(a){var r={x:"y",y:"x",radius:"angle",angle:"radius"};return r[a]}function ex(a){return a==="vertical"?"ns-resize":"ew-resize"}var fM=lM;function rx(a){a.registerComponentModel(rM),a.registerComponentView(fM),Dm(a)}function hM(a){(0,N.D)($1),(0,N.D)(rx)}var cM={get:function(a,r,e){var n=g.d9((vM[a]||{})[r]);return e&&g.kJ(n)?n[n.length-1]:n}},vM={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},nx=cM,ix=xi.mapVisual,dM=xi.eachVisual,pM=g.kJ,ax=g.S6,gM=Ie.dt,mM=Ie.NU,yM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return r.prototype.init=function(e,n,o){this.mergeDefaultAndTheme(e,o)},r.prototype.optionUpdated=function(e,n){var o=this.option;!n&&T1(o,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},r.prototype.resetVisual=function(e){var n=this.stateList;e=g.ak(e,this),this.controllerVisuals=Rm(this.option.controller,n,e),this.targetVisuals=Rm(this.option.target,n,e)},r.prototype.getItemSymbol=function(){return null},r.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,n=[];return e==null||e==="all"?this.ecModel.eachSeries(function(o,s){n.push(s)}):n=Xe.kF(e),n},r.prototype.eachTargetSeries=function(e,n){g.S6(this.getTargetSeriesIndices(),function(o){var s=this.ecModel.getSeriesByIndex(o);s&&e.call(n,s)},this)},r.prototype.isTargetSeries=function(e){var n=!1;return this.eachTargetSeries(function(o){o===e&&(n=!0)}),n},r.prototype.formatValueText=function(e,n,o){var s=this.option,u=s.precision,h=this.dataBound,v=s.formatter,d;o=o||["<",">"],g.kJ(e)&&(e=e.slice(),d=!0);var m=n?e:d?[_(e[0]),_(e[1])]:_(e);if(g.HD(v))return v.replace("{value}",d?m[0]:m).replace("{value2}",d?m[1]:m);if(g.mf(v))return d?v(e[0],e[1]):v(e);if(d)return e[0]===h[0]?o[0]+" "+m[1]:e[1]===h[1]?o[1]+" "+m[0]:m[0]+" - "+m[1];return m;function _(S){return S===h[0]?"min":S===h[1]?"max":(+S).toFixed(Math.min(u,20))}},r.prototype.resetExtent=function(){var e=this.option,n=gM([e.min,e.max]);this._dataExtent=n},r.prototype.getDataDimensionIndex=function(e){var n=this.option.dimension;if(n!=null)return e.getDimensionIndex(n);for(var o=e.dimensions,s=o.length-1;s>=0;s--){var u=o[s],h=e.getDimensionInfo(u);if(!h.isCalculationCoord)return h.storeDimIndex}},r.prototype.getExtent=function(){return this._dataExtent.slice()},r.prototype.completeVisualOption=function(){var e=this.ecModel,n=this.option,o={inRange:n.inRange,outOfRange:n.outOfRange},s=n.target||(n.target={}),u=n.controller||(n.controller={});g.TS(s,o),g.TS(u,o);var h=this.isCategory();v.call(this,s),v.call(this,u),d.call(this,s,"inRange","outOfRange"),m.call(this,u);function v(_){pM(n.color)&&!_.inRange&&(_.inRange={color:n.color.slice().reverse()}),_.inRange=_.inRange||{color:e.get("gradientColor")}}function d(_,S,b){var P=_[S],R=_[b];P&&!R&&(R=_[b]={},ax(P,function(Y,nt){if(!!xi.isValidType(nt)){var pt=nx.get(nt,"inactive",h);pt!=null&&(R[nt]=pt,nt==="color"&&!R.hasOwnProperty("opacity")&&!R.hasOwnProperty("colorAlpha")&&(R.opacity=[0,0]))}}))}function m(_){var S=(_.inRange||{}).symbol||(_.outOfRange||{}).symbol,b=(_.inRange||{}).symbolSize||(_.outOfRange||{}).symbolSize,P=this.get("inactiveColor"),R=this.getItemSymbol(),Y=R||"roundRect";ax(this.stateList,function(nt){var pt=this.itemSize,mt=_[nt];mt||(mt=_[nt]={color:h?P:[P]}),mt.symbol==null&&(mt.symbol=S&&g.d9(S)||(h?Y:[Y])),mt.symbolSize==null&&(mt.symbolSize=b&&g.d9(b)||(h?pt[0]:[pt[0],pt[0]])),mt.symbol=ix(mt.symbol,function(Pt){return Pt==="none"?Y:Pt});var bt=mt.symbolSize;if(bt!=null){var Lt=-1/0;dM(bt,function(Pt){Pt>Lt&&(Lt=Pt)}),mt.symbolSize=ix(bt,function(Pt){return mM(Pt,[0,Lt],[0,pt[0]],!0)})}},this)}},r.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},r.prototype.isCategory=function(){return!!this.option.categories},r.prototype.setSelected=function(e){},r.prototype.getSelected=function(){return null},r.prototype.getValueState=function(e){return null},r.prototype.getVisualMeta=function(e){return null},r.type="visualMap",r.dependencies=["series"],r.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},r}(kn.Z),Od=yM,ox=[20,140],_M=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},r.prototype.resetItemSize=function(){a.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(e[0]==null||isNaN(e[0]))&&(e[0]=ox[0]),(e[1]==null||isNaN(e[1]))&&(e[1]=ox[1])},r.prototype._resetRange=function(){var e=this.getExtent(),n=this.option.range;!n||n.auto?(e.auto=1,this.option.range=e):g.kJ(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],e[0]),n[1]=Math.min(n[1],e[1]))},r.prototype.completeVisualOption=function(){a.prototype.completeVisualOption.apply(this,arguments),g.S6(this.stateList,function(e){var n=this.option.controller[e].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},r.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},r.prototype.getSelected=function(){var e=this.getExtent(),n=Ie.dt((this.get("range")||[]).slice());return n[0]>e[1]&&(n[0]=e[1]),n[1]>e[1]&&(n[1]=e[1]),n[0]<e[0]&&(n[0]=e[0]),n[1]<e[0]&&(n[1]=e[0]),n},r.prototype.getValueState=function(e){var n=this.option.range,o=this.getExtent();return(n[0]<=o[0]||n[0]<=e)&&(n[1]>=o[1]||e<=n[1])?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[];return this.eachTargetSeries(function(o){var s=[],u=o.getData();u.each(this.getDataDimensionIndex(u),function(h,v){e[0]<=h&&h<=e[1]&&s.push(v)},this),n.push({seriesId:o.id,dataIndex:s})},this),n},r.prototype.getVisualMeta=function(e){var n=sx(this,"outOfRange",this.getExtent()),o=sx(this,"inRange",this.option.range.slice()),s=[];function u(b,P){s.push({value:b,color:e(b,P)})}for(var h=0,v=0,d=o.length,m=n.length;v<m&&(!o.length||n[v]<=o[0]);v++)n[v]<o[h]&&u(n[v],"outOfRange");for(var _=1;h<d;h++,_=0)_&&s.length&&u(o[h],"outOfRange"),u(o[h],"inRange");for(var _=1;v<m;v++)(!o.length||o[o.length-1]<n[v])&&(_&&(s.length&&u(s[s.length-1].value,"outOfRange"),_=0),u(n[v],"outOfRange"));var S=s.length;return{stops:s,outerColors:[S?s[0].color:"transparent",S?s[S-1].color:"transparent"]}},r.type="visualMap.continuous",r.defaultOption=(0,Zi.ZL)(Od.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),r}(Od);function sx(a,r,e){if(e[0]===e[1])return e.slice();for(var n=200,o=(e[1]-e[0])/n,s=e[0],u=[],h=0;h<=n&&s<e[1];h++)u.push(s),s+=o;return u.push(e[1]),u}var xM=_M,SM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return r.prototype.init=function(e,n){this.ecModel=e,this.api=n},r.prototype.render=function(e,n,o,s){if(this.visualMapModel=e,e.get("show")===!1){this.group.removeAll();return}this.doRender(e,n,o,s)},r.prototype.renderBackground=function(e){var n=this.visualMapModel,o=Cn.MY(n.get("padding")||0),s=e.getBoundingRect();e.add(new on.Z({z2:-1,silent:!0,shape:{x:s.x-o[3],y:s.y-o[0],width:s.width+o[3]+o[1],height:s.height+o[0]+o[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},r.prototype.getControllerVisual=function(e,n,o){o=o||{};var s=o.forceState,u=this.visualMapModel,h={};if(n==="color"){var v=u.get("contentColor");h.color=v}function d(b){return h[b]}function m(b,P){h[b]=P}var _=u.controllerVisuals[s||u.getValueState(e)],S=xi.prepareVisualTypes(_);return g.S6(S,function(b){var P=_[b];o.convertOpacityToAlpha&&b==="opacity"&&(b="colorAlpha",P=_.__alphaForOpacity),xi.dependsOn(b,n)&&P&&P.applyVisual(e,d,m)}),h[n]},r.prototype.positionGroup=function(e){var n=this.visualMapModel,o=this.api;Kr.p$(e,n.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},r.prototype.doRender=function(e,n,o,s){},r.type="visualMap",r}(pn.Z),lx=SM,ux=[["left","right","width"],["top","bottom","height"]];function fx(a,r,e){var n=a.option,o=n.align;if(o!=null&&o!=="auto")return o;for(var s={width:r.getWidth(),height:r.getHeight()},u=n.orient==="horizontal"?1:0,h=ux[u],v=[0,null,10],d={},m=0;m<3;m++)d[ux[1-u][m]]=v[m],d[h[m]]=m===2?e[0]:n[h[m]];var _=[["x","width",3],["y","height",0]][u],S=(0,Kr.ME)(d,s,n.padding);return h[(S.margin[_[2]]||0)+S[_[0]]+S[_[1]]*.5<s[_[1]]*.5?0:1]}function Nd(a,r){return g.S6(a||[],function(e){e.dataIndex!=null&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(r?r.componentIndex:"")}),a}var Mo=Ie.NU,TM=g.S6,hx=Math.min,ty=Math.max,wM=12,DM=6,AM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return r.prototype.doRender=function(e,n,o,s){this._api=o,(!s||s.type!=="selectDataRange"||s.from!==this.uid)&&this._buildView()},r.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,n=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(n);var o=e.get("text");this._renderEndsText(n,o,0),this._renderEndsText(n,o,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},r.prototype._renderEndsText=function(e,n,o){if(!!n){var s=n[1-o];s=s!=null?s+"":"";var u=this.visualMapModel,h=u.get("textGap"),v=u.itemSize,d=this._shapes.mainGroup,m=this._applyTransform([v[0]/2,o===0?-h:v[1]+h],d),_=this._applyTransform(o===0?"bottom":"top",d),S=this._orient,b=this.visualMapModel.textStyleModel;this.group.add(new ee.ZP({style:(0,or.Lr)(b,{x:m[0],y:m[1],verticalAlign:S==="horizontal"?"middle":_,align:S==="horizontal"?_:"center",text:s})}))}},r.prototype._renderBar=function(e){var n=this.visualMapModel,o=this._shapes,s=n.itemSize,u=this._orient,h=this._useHandle,v=fx(n,this.api,s),d=o.mainGroup=this._createBarGroup(v),m=new Mr.Z;d.add(m),m.add(o.outOfRange=cx()),m.add(o.inRange=cx(null,h?dx(this._orient):null,g.ak(this._dragHandle,this,"all",!1),g.ak(this._dragHandle,this,"all",!0))),m.setClipPath(new on.Z({shape:{x:0,y:0,width:s[0],height:s[1],r:3}}));var _=n.textStyleModel.getTextRect("\u56FD"),S=ty(_.width,_.height);h&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(n,d,0,s,S,u),this._createHandle(n,d,1,s,S,u)),this._createIndicator(n,d,s,S,u),e.add(d)},r.prototype._createHandle=function(e,n,o,s,u,h){var v=g.ak(this._dragHandle,this,o,!1),d=g.ak(this._dragHandle,this,o,!0),m=(0,vt.GM)(e.get("handleSize"),s[0]),_=(0,Rr.th)(e.get("handleIcon"),-m/2,-m/2,m,m,null,!0),S=dx(this._orient);_.attr({cursor:S,draggable:!0,drift:v,ondragend:d,onmousemove:function(nt){Ri.sT(nt.event)}}),_.x=s[0]/2,_.useStyle(e.getModel("handleStyle").getItemStyle()),_.setStyle({strokeNoScale:!0,strokeFirst:!0}),_.style.lineWidth*=2,_.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),(0,ir.Nj)(_,!0),n.add(_);var b=this.visualMapModel.textStyleModel,P=new ee.ZP({cursor:S,draggable:!0,drift:v,onmousemove:function(nt){Ri.sT(nt.event)},ondragend:d,style:(0,or.Lr)(b,{x:0,y:0,text:""})});P.ensureState("blur").style={opacity:.1},P.stateTransition={duration:200},this.group.add(P);var R=[m,0],Y=this._shapes;Y.handleThumbs[o]=_,Y.handleLabelPoints[o]=R,Y.handleLabels[o]=P},r.prototype._createIndicator=function(e,n,o,s,u){var h=(0,vt.GM)(e.get("indicatorSize"),o[0]),v=(0,Rr.th)(e.get("indicatorIcon"),-h/2,-h/2,h,h,null,!0);v.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var d=e.getModel("indicatorStyle").getItemStyle();if(v instanceof gt.ZP){var m=v.style;v.useStyle(g.l7({image:m.image,x:m.x,y:m.y,width:m.width,height:m.height},d))}else v.useStyle(d);n.add(v);var _=this.visualMapModel.textStyleModel,S=new ee.ZP({silent:!0,invisible:!0,style:(0,or.Lr)(_,{x:0,y:0,text:""})});this.group.add(S);var b=[(u==="horizontal"?s/2:DM)+o[0]/2,0],P=this._shapes;P.indicator=v,P.indicatorLabel=S,P.indicatorLabelPoint=b,this._firstShowIndicator=!0},r.prototype._dragHandle=function(e,n,o,s){if(!!this._useHandle){if(this._dragging=!n,!n){var u=this._applyTransform([o,s],this._shapes.mainGroup,!0);this._updateInterval(e,u[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():vx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},r.prototype._resetInterval=function(){var e=this.visualMapModel,n=this._dataInterval=e.getSelected(),o=e.getExtent(),s=[0,e.itemSize[1]];this._handleEnds=[Mo(n[0],o,s,!0),Mo(n[1],o,s,!0)]},r.prototype._updateInterval=function(e,n){n=n||0;var o=this.visualMapModel,s=this._handleEnds,u=[0,o.itemSize[1]];ps(n,s,u,e,0);var h=o.getExtent();this._dataInterval=[Mo(s[0],u,h,!0),Mo(s[1],u,h,!0)]},r.prototype._updateView=function(e){var n=this.visualMapModel,o=n.getExtent(),s=this._shapes,u=[0,n.itemSize[1]],h=e?u:this._handleEnds,v=this._createBarVisual(this._dataInterval,o,h,"inRange"),d=this._createBarVisual(o,o,u,"outOfRange");s.inRange.setStyle({fill:v.barColor}).setShape("points",v.barPoints),s.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(h,v)},r.prototype._createBarVisual=function(e,n,o,s){var u={forceState:s,convertOpacityToAlpha:!0},h=this._makeColorGradient(e,u),v=[this.getControllerVisual(e[0],"symbolSize",u),this.getControllerVisual(e[1],"symbolSize",u)],d=this._createBarPoints(o,v);return{barColor:new Qr.Z(0,0,0,1,h),barPoints:d,handlesColor:[h[0].color,h[h.length-1].color]}},r.prototype._makeColorGradient=function(e,n){var o=100,s=[],u=(e[1]-e[0])/o;s.push({color:this.getControllerVisual(e[0],"color",n),offset:0});for(var h=1;h<o;h++){var v=e[0]+u*h;if(v>e[1])break;s.push({color:this.getControllerVisual(v,"color",n),offset:h/o})}return s.push({color:this.getControllerVisual(e[1],"color",n),offset:1}),s},r.prototype._createBarPoints=function(e,n){var o=this.visualMapModel.itemSize;return[[o[0]-n[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-n[1],e[1]]]},r.prototype._createBarGroup=function(e){var n=this._orient,o=this.visualMapModel.get("inverse");return new Mr.Z(n==="horizontal"&&!o?{scaleX:e==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&o?{scaleX:e==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!o?{scaleX:e==="left"?1:-1,scaleY:-1}:{scaleX:e==="left"?1:-1})},r.prototype._updateHandle=function(e,n){if(!!this._useHandle){var o=this._shapes,s=this.visualMapModel,u=o.handleThumbs,h=o.handleLabels,v=s.itemSize,d=s.getExtent();TM([0,1],function(m){var _=u[m];_.setStyle("fill",n.handlesColor[m]),_.y=e[m];var S=Mo(e[m],[0,v[1]],d,!0),b=this.getControllerVisual(S,"symbolSize");_.scaleX=_.scaleY=b/v[0],_.x=v[0]-b/2;var P=br.applyTransform(o.handleLabelPoints[m],br.getTransform(_,this.group));h[m].setStyle({x:P[0],y:P[1],text:s.formatValueText(this._dataInterval[m]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",o.mainGroup):"center"})},this)}},r.prototype._showIndicator=function(e,n,o,s){var u=this.visualMapModel,h=u.getExtent(),v=u.itemSize,d=[0,v[1]],m=this._shapes,_=m.indicator;if(!!_){_.attr("invisible",!1);var S={convertOpacityToAlpha:!0},b=this.getControllerVisual(e,"color",S),P=this.getControllerVisual(e,"symbolSize"),R=Mo(e,h,d,!0),Y=v[0]-P/2,nt={x:_.x,y:_.y};_.y=R,_.x=Y;var pt=br.applyTransform(m.indicatorLabelPoint,br.getTransform(_,this.group)),mt=m.indicatorLabel;mt.attr("invisible",!1);var bt=this._applyTransform("left",m.mainGroup),Lt=this._orient,Pt=Lt==="horizontal";mt.setStyle({text:(o||"")+u.formatValueText(n),verticalAlign:Pt?bt:"middle",align:Pt?"center":bt});var Ot={x:Y,y:R,style:{fill:b}},kt={style:{x:pt[0],y:pt[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var jt={duration:100,easing:"cubicInOut",additive:!0};_.x=nt.x,_.y=nt.y,_.animateTo(Ot,jt),mt.animateTo(kt,jt)}else _.attr(Ot),mt.attr(kt);this._firstShowIndicator=!1;var re=this._shapes.handleLabels;if(re)for(var ae=0;ae<re.length;ae++)this._api.enterBlur(re[ae])}},r.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(n){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,s=e._applyTransform([n.offsetX,n.offsetY],e._shapes.mainGroup,!0,!0);s[1]=hx(ty(0,s[1]),o[1]),e._doHoverLinkToSeries(s[1],0<=s[0]&&s[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},r.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},r.prototype._doHoverLinkToSeries=function(e,n){var o=this.visualMapModel,s=o.itemSize;if(!!o.option.hoverLink){var u=[0,s[1]],h=o.getExtent();e=hx(ty(u[0],e),u[1]);var v=bM(o,h,u),d=[e-v,e+v],m=Mo(e,u,h,!0),_=[Mo(d[0],u,h,!0),Mo(d[1],u,h,!0)];d[0]<u[0]&&(_[0]=-1/0),d[1]>u[1]&&(_[1]=1/0),n&&(_[0]===-1/0?this._showIndicator(m,_[1],"< ",v):_[1]===1/0?this._showIndicator(m,_[0],"> ",v):this._showIndicator(m,m,"\u2248 ",v));var S=this._hoverLinkDataIndices,b=[];(n||vx(o))&&(b=this._hoverLinkDataIndices=o.findTargetDataIndices(_));var P=Xe.XI(S,b);this._dispatchHighDown("downplay",Nd(P[0],o)),this._dispatchHighDown("highlight",Nd(P[1],o))}},r.prototype._hoverLinkFromSeriesMouseOver=function(e){var n=e.target,o=this.visualMapModel;if(!(!n||(0,Hr.A)(n).dataIndex==null)){var s=(0,Hr.A)(n),u=this.ecModel.getSeriesByIndex(s.seriesIndex);if(!!o.isTargetSeries(u)){var h=u.getData(s.dataType),v=h.getStore().get(o.getDataDimensionIndex(h),s.dataIndex);isNaN(v)||this._showIndicator(v,v)}}},r.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var o=0;o<n.length;o++)this._api.leaveBlur(n[o])},r.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Nd(e,this.visualMapModel)),e.length=0},r.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},r.prototype._applyTransform=function(e,n,o,s){var u=br.getTransform(n,s?null:this.group);return g.kJ(e)?br.applyTransform(e,u,o):br.transformDirection(e,u,o)},r.prototype._dispatchHighDown=function(e,n){n&&n.length&&this.api.dispatchAction({type:e,batch:n})},r.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},r.type="visualMap.continuous",r}(lx);function cx(a,r,e,n){return new Ln.Z({shape:{points:a},draggable:!!e,cursor:r,drift:e,onmousemove:function(o){Ri.sT(o.event)},ondragend:n})}function bM(a,r,e){var n=wM/2,o=a.get("hoverLinkDataSize");return o&&(n=Mo(o,r,e,!0)/2),n}function vx(a){var r=a.get("hoverLinkOnHandle");return!!(r??a.get("realtime"))}function dx(a){return a==="vertical"?"ns-resize":"ew-resize"}var MM=AM,EM={type:"selectDataRange",event:"dataRangeSelected",update:"update"},CM=function(a,r){r.eachComponent({mainType:"visualMap",query:a},function(e){e.setSelected(a.selected)})},PM=[{createOnAllSeries:!0,reset:function(a,r){var e=[];return r.eachComponent("visualMap",function(n){var o=a.pipelineContext;!n.isTargetSeries(a)||o&&o.large||e.push(TA(n.stateList,n.targetVisuals,g.ak(n.getValueState,n),n.getDataDimensionIndex(a.getData())))}),e}},{createOnAllSeries:!0,reset:function(a,r){var e=a.getData(),n=[];r.eachComponent("visualMap",function(o){if(o.isTargetSeries(a)){var s=o.getVisualMeta(g.ak(LM,null,a,o))||{stops:[],outerColors:[]},u=o.getDataDimensionIndex(e);u>=0&&(s.dimension=u,n.push(s))}}),a.getData().setVisual("visualMeta",n)}}];function LM(a,r,e,n){for(var o=r.targetVisuals[n],s=xi.prepareVisualTypes(o),u={color:(0,dl.UL)(a.getData(),"color")},h=0,v=s.length;h<v;h++){var d=s[h],m=o[d==="opacity"?"__alphaForOpacity":d];m&&m.applyVisual(e,_,S)}return u.color;function _(b){return u[b]}function S(b,P){u[b]=P}}var px=g.S6;function IM(a){var r=a&&a.visualMap;g.kJ(r)||(r=r?[r]:[]),px(r,function(e){if(!!e){sf(e,"splitList")&&!sf(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var n=e.pieces;n&&g.kJ(n)&&px(n,function(o){g.Kn(o)&&(sf(o,"start")&&!sf(o,"min")&&(o.min=o.start),sf(o,"end")&&!sf(o,"max")&&(o.max=o.end))})}})}function sf(a,r){return a&&a.hasOwnProperty&&a.hasOwnProperty(r)}var gx=!1;function mx(a){gx||(gx=!0,a.registerSubTypeDefaulter("visualMap",function(r){return!r.categories&&(!(r.pieces?r.pieces.length>0:r.splitNumber>0)||r.calculable)?"continuous":"piecewise"}),a.registerAction(EM,CM),(0,g.S6)(PM,function(r){a.registerVisual(a.PRIORITY.VISUAL.COMPONENT,r)}),a.registerPreprocessor(IM))}function yx(a){a.registerComponentModel(xM),a.registerComponentView(MM),mx(a)}var RM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e._pieceList=[],e}return r.prototype.optionUpdated=function(e,n){a.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],OM[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var s=this.option.categories;this.resetVisual(function(u,h){o==="categories"?(u.mappingMethod="category",u.categories=g.d9(s)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=g.UI(this._pieceList,function(v){return v=g.d9(v),h!=="inRange"&&(v.visual=null),v}))})},r.prototype.completeVisualOption=function(){var e=this.option,n={},o=xi.listVisualTypes(),s=this.isCategory();g.S6(e.pieces,function(h){g.S6(o,function(v){h.hasOwnProperty(v)&&(n[v]=1)})}),g.S6(n,function(h,v){var d=!1;g.S6(this.stateList,function(m){d=d||u(e,m,v)||u(e.target,m,v)},this),!d&&g.S6(this.stateList,function(m){(e[m]||(e[m]={}))[v]=nx.get(v,m==="inRange"?"active":"inactive",s)})},this);function u(h,v,d){return h&&h[v]&&h[v].hasOwnProperty(d)}a.prototype.completeVisualOption.apply(this,arguments)},r.prototype._resetSelected=function(e,n){var o=this.option,s=this._pieceList,u=(n?o:e).selected||{};if(o.selected=u,g.S6(s,function(v,d){var m=this.getSelectedMapKey(v);u.hasOwnProperty(m)||(u[m]=!0)},this),o.selectedMode==="single"){var h=!1;g.S6(s,function(v,d){var m=this.getSelectedMapKey(v);u[m]&&(h?u[m]=!1:h=!0)},this)}},r.prototype.getItemSymbol=function(){return this.get("itemSymbol")},r.prototype.getSelectedMapKey=function(e){return this._mode==="categories"?e.value+"":e.index+""},r.prototype.getPieceList=function(){return this._pieceList},r.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},r.prototype.setSelected=function(e){this.option.selected=g.d9(e)},r.prototype.getValueState=function(e){var n=xi.findPieceIndex(e,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},r.prototype.findTargetDataIndices=function(e){var n=[],o=this._pieceList;return this.eachTargetSeries(function(s){var u=[],h=s.getData();h.each(this.getDataDimensionIndex(h),function(v,d){var m=xi.findPieceIndex(v,o);m===e&&u.push(d)},this),n.push({seriesId:s.id,dataIndex:u})},this),n},r.prototype.getRepresentValue=function(e){var n;if(this.isCategory())n=e.value;else if(e.value!=null)n=e.value;else{var o=e.interval||[];n=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return n},r.prototype.getVisualMeta=function(e){if(this.isCategory())return;var n=[],o=["",""],s=this;function u(m,_){var S=s.getRepresentValue({interval:m});_||(_=s.getValueState(S));var b=e(S,_);m[0]===-1/0?o[0]=b:m[1]===1/0?o[1]=b:n.push({value:m[0],color:b},{value:m[1],color:b})}var h=this._pieceList.slice();if(!h.length)h.push({interval:[-1/0,1/0]});else{var v=h[0].interval[0];v!==-1/0&&h.unshift({interval:[-1/0,v]}),v=h[h.length-1].interval[1],v!==1/0&&h.push({interval:[v,1/0]})}var d=-1/0;return g.S6(h,function(m){var _=m.interval;_&&(_[0]>d&&u([d,_[0]],"outOfRange"),u(_.slice()),d=_[1])},this),{stops:n,outerColors:o}},r.type="visualMap.piecewise",r.defaultOption=(0,Zi.ZL)(Od.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),r}(Od),OM={splitNumber:function(a){var r=this.option,e=Math.min(r.precision,20),n=this.getExtent(),o=r.splitNumber;o=Math.max(parseInt(o,10),1),r.splitNumber=o;for(var s=(n[1]-n[0])/o;+s.toFixed(e)!==s&&e<5;)e++;r.precision=e,s=+s.toFixed(e),r.minOpen&&a.push({interval:[-1/0,n[0]],close:[0,0]});for(var u=0,h=n[0];u<o;h+=s,u++){var v=u===o-1?n[1]:h+s;a.push({interval:[h,v],close:[1,1]})}r.maxOpen&&a.push({interval:[n[1],1/0],close:[0,0]}),(0,Ie.nR)(a),g.S6(a,function(d,m){d.index=m,d.text=this.formatValueText(d.interval)},this)},categories:function(a){var r=this.option;g.S6(r.categories,function(e){a.push({text:this.formatValueText(e,!0),value:e})},this),_x(r,a)},pieces:function(a){var r=this.option;g.S6(r.pieces,function(e,n){g.Kn(e)||(e={value:e});var o={text:"",index:n};if(e.label!=null&&(o.text=e.label),e.hasOwnProperty("value")){var s=o.value=e.value;o.interval=[s,s],o.close=[1,1]}else{for(var u=o.interval=[],h=o.close=[0,0],v=[1,0,1],d=[-1/0,1/0],m=[],_=0;_<2;_++){for(var S=[["gte","gt","min"],["lte","lt","max"]][_],b=0;b<3&&u[_]==null;b++)u[_]=e[S[b]],h[_]=v[b],m[_]=b===2;u[_]==null&&(u[_]=d[_])}m[0]&&u[1]===1/0&&(h[0]=0),m[1]&&u[0]===-1/0&&(h[1]=0),u[0]===u[1]&&h[0]&&h[1]&&(o.value=u[0])}o.visual=xi.retrieveVisuals(e),a.push(o)},this),_x(r,a),(0,Ie.nR)(a),g.S6(a,function(e){var n=e.close,o=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];e.text=e.text||this.formatValueText(e.value!=null?e.value:e.interval,!1,o)},this)}};function _x(a,r){var e=a.inverse;(a.orient==="vertical"?!e:e)&&r.reverse()}var NM=RM,BM=function(a){(0,fe.ZT)(r,a);function r(){var e=a!==null&&a.apply(this,arguments)||this;return e.type=r.type,e}return r.prototype.doRender=function(){var e=this.group;e.removeAll();var n=this.visualMapModel,o=n.get("textGap"),s=n.textStyleModel,u=s.getFont(),h=s.getTextColor(),v=this._getItemAlign(),d=n.itemSize,m=this._getViewData(),_=m.endsText,S=g.Jv(n.get("showLabel",!0),!_);_&&this._renderEndsText(e,_[0],d,S,v),g.S6(m.viewPieceList,function(b){var P=b.piece,R=new Mr.Z;R.onclick=g.ak(this._onItemClick,this,P),this._enableHoverLink(R,b.indexInModelPieceList);var Y=n.getRepresentValue(P);if(this._createItemSymbol(R,Y,[0,0,d[0],d[1]]),S){var nt=this.visualMapModel.getValueState(Y);R.add(new ee.ZP({style:{x:v==="right"?-o:d[0]+o,y:d[1]/2,text:P.text,verticalAlign:"middle",align:v,font:u,fill:h,opacity:nt==="outOfRange"?.5:1}}))}e.add(R)},this),_&&this._renderEndsText(e,_[1],d,S,v),Kr.BZ(n.get("orient"),e,n.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},r.prototype._enableHoverLink=function(e,n){var o=this;e.on("mouseover",function(){return s("highlight")}).on("mouseout",function(){return s("downplay")});var s=function(u){var h=o.visualMapModel;h.option.hoverLink&&o.api.dispatchAction({type:u,batch:Nd(h.findTargetDataIndices(n),h)})}},r.prototype._getItemAlign=function(){var e=this.visualMapModel,n=e.option;if(n.orient==="vertical")return fx(e,this.api,e.itemSize);var o=n.align;return(!o||o==="auto")&&(o="left"),o},r.prototype._renderEndsText=function(e,n,o,s,u){if(!!n){var h=new Mr.Z,v=this.visualMapModel.textStyleModel;h.add(new ee.ZP({style:(0,or.Lr)(v,{x:s?u==="right"?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:s?u:"center",text:n})})),e.add(h)}},r.prototype._getViewData=function(){var e=this.visualMapModel,n=g.UI(e.getPieceList(),function(h,v){return{piece:h,indexInModelPieceList:v}}),o=e.get("text"),s=e.get("orient"),u=e.get("inverse");return(s==="horizontal"?u:!u)?n.reverse():o&&(o=o.slice().reverse()),{viewPieceList:n,endsText:o}},r.prototype._createItemSymbol=function(e,n,o){e.add((0,Rr.th)(this.getControllerVisual(n,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(n,"color")))},r.prototype._onItemClick=function(e){var n=this.visualMapModel,o=n.option,s=o.selectedMode;if(!!s){var u=g.d9(o.selected),h=n.getSelectedMapKey(e);s==="single"||s===!0?(u[h]=!0,g.S6(u,function(v,d){u[d]=d===h})):u[h]=!u[h],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},r.type="visualMap.piecewise",r}(lx),FM=BM;function xx(a){a.registerComponentModel(NM),a.registerComponentView(FM),mx(a)}function zM(a){(0,N.D)(yx),(0,N.D)(xx)}var GM={label:{enabled:!0},decal:{show:!1}},Sx=(0,Xe.Yf)(),UM={};function kM(a,r){var e=a.getModel("aria");if(!e.get("enabled"))return;var n=g.d9(GM);g.TS(n.label,a.getLocaleModel().get("aria"),!1),g.TS(e.option,n,!1),o(),s();function o(){var d=e.getModel("decal"),m=d.get("show");if(m){var _=g.kW();a.eachSeries(function(S){if(!S.isColorBySeries()){var b=_.get(S.type);b||(b={},_.set(S.type,b)),Sx(S).scope=b}}),a.eachRawSeries(function(S){if(a.isSeriesFiltered(S))return;if(g.mf(S.enableAriaDecal)){S.enableAriaDecal();return}var b=S.getData();if(S.isColorBySeries()){var pt=(0,Jf.i)(S.ecModel,S.name,UM,a.getSeriesCount()),mt=b.getVisual("decal");b.setVisual("decal",bt(mt,pt))}else{var P=S.getRawData(),R={},Y=Sx(S).scope;b.each(function(Lt){var Pt=b.getRawIndex(Lt);R[Pt]=Lt});var nt=P.count();P.each(function(Lt){var Pt=R[Lt],Ot=P.getName(Lt)||Lt+"",kt=(0,Jf.i)(S.ecModel,Ot,Y,nt),jt=b.getItemVisual(Pt,"decal");b.setItemVisual(Pt,"decal",bt(jt,kt))})}function bt(Lt,Pt){var Ot=Lt?g.l7(g.l7({},Pt),Lt):Pt;return Ot.dirty=!0,Ot}})}}function s(){var d=a.getLocaleModel().get("aria"),m=e.getModel("label");if(m.option=g.ce(m.option,d),!!m.get("enabled")){var _=r.getZr().dom;if(m.get("description")){_.setAttribute("aria-label",m.get("description"));return}var S=a.getSeriesCount(),b=m.get(["data","maxCount"])||10,P=m.get(["series","maxCount"])||10,R=Math.min(S,P),Y;if(!(S<1)){var nt=h();if(nt){var pt=m.get(["general","withTitle"]);Y=u(pt,{title:nt})}else Y=m.get(["general","withoutTitle"]);var mt=[],bt=S>1?m.get(["series","multiple","prefix"]):m.get(["series","single","prefix"]);Y+=u(bt,{seriesCount:S}),a.eachSeries(function(kt,jt){if(jt<R){var re=void 0,ae=kt.get("name"),he=ae?"withName":"withoutName";re=S>1?m.get(["series","multiple",he]):m.get(["series","single",he]),re=u(re,{seriesId:kt.seriesIndex,seriesName:kt.get("name"),seriesType:v(kt.subType)});var me=kt.getData();if(me.count()>b){var Te=m.get(["data","partialData"]);re+=u(Te,{displayCnt:b})}else re+=m.get(["data","allData"]);for(var be=m.get(["data","separator","middle"]),Fe=m.get(["data","separator","end"]),Ye=[],Ue=0;Ue<me.count();Ue++)if(Ue<b){var $e=me.getName(Ue),Sr=me.getValues(Ue),Ar=m.get(["data",$e?"withName":"withoutName"]);Ye.push(u(Ar,{name:$e,value:Sr.join(be)}))}re+=Ye.join(be)+Fe,mt.push(re)}});var Lt=m.getModel(["series","multiple","separator"]),Pt=Lt.get("middle"),Ot=Lt.get("end");Y+=mt.join(Pt)+Ot,_.setAttribute("aria-label",Y)}}}function u(d,m){if(!g.HD(d))return d;var _=d;return g.S6(m,function(S,b){_=_.replace(new RegExp("\\{\\s*"+b+"\\s*\\}","g"),S)}),_}function h(){var d=a.get("title");return d&&d.length&&(d=d[0]),d&&d.text}function v(d){return a.getLocaleModel().get(["series","typeNames"])[d]||"\u81EA\u5B9A\u4E49\u56FE"}}function VM(a){if(!(!a||!a.aria)){var r=a.aria;r.show!=null&&(r.enabled=r.show),r.label=r.label||{},g.S6(["description","general","series","data"],function(e){r[e]!=null&&(r.label[e]=r[e])})}}function ZM(a){a.registerPreprocessor(VM),a.registerVisual(a.PRIORITY.VISUAL.ARIA,kM)}var Tx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},WM=function(){function a(r){var e=this._condVal=(0,g.HD)(r)?new RegExp(r):(0,g.Kj)(r)?r:null;if(e==null){var n="";(0,Zr._y)(n)}}return a.prototype.evaluate=function(r){var e=typeof r;return(0,g.HD)(e)?this._condVal.test(r):(0,g.hj)(e)?this._condVal.test(r+""):!1},a}(),HM=function(){function a(){}return a.prototype.evaluate=function(){return this.value},a}(),XM=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(!r[e].evaluate())return!1;return!0},a}(),YM=function(){function a(){}return a.prototype.evaluate=function(){for(var r=this.children,e=0;e<r.length;e++)if(r[e].evaluate())return!0;return!1},a}(),KM=function(){function a(){}return a.prototype.evaluate=function(){return!this.child.evaluate()},a}(),jM=function(){function a(){}return a.prototype.evaluate=function(){for(var r=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),o=r?this.valueParser(n):null,s=0;s<this.subCondList.length;s++)if(!this.subCondList[s].evaluate(r?o:n))return!1;return!0},a}();function ey(a,r){if(a===!0||a===!1){var e=new HM;return e.value=a,e}var n="";return Ax(a)||(0,Zr._y)(n),a.and?Dx("and",a,r):a.or?Dx("or",a,r):a.not?JM(a,r):QM(a,r)}function Dx(a,r,e){var n=r[a],o="";(0,g.kJ)(n)||(0,Zr._y)(o),n.length||(0,Zr._y)(o);var s=a==="and"?new XM:new YM;return s.children=(0,g.UI)(n,function(u){return ey(u,e)}),s.children.length||(0,Zr._y)(o),s}function JM(a,r){var e=a.not,n="";Ax(e)||(0,Zr._y)(n);var o=new KM;return o.child=ey(e,r),o.child||(0,Zr._y)(n),o}function QM(a,r){for(var e="",n=r.prepareGetValue(a),o=[],s=(0,g.XP)(a),u=a.parser,h=u?(0,gl.o2)(u):null,v=0;v<s.length;v++){var d=s[v];if(!(d==="parser"||r.valueGetterAttrMap.get(d))){var m=(0,g.RI)(Tx,d)?Tx[d]:d,_=a[d],S=h?h(_):_,b=(0,gl.tR)(m,S)||m==="reg"&&new WM(S);b||(0,Zr._y)(e),o.push(b)}}o.length||(0,Zr._y)(e);var P=new jM;return P.valueGetterParam=n,P.valueParser=h,P.getValue=r.getValue,P.subCondList=o,P}function Ax(a){return(0,g.Kn)(a)&&!(0,g.zG)(a)}var $M=function(){function a(r,e){this._cond=ey(r,e)}return a.prototype.evaluate=function(){return this._cond.evaluate()},a}();function qM(a,r){return new $M(a,r)}var tE={type:"echarts:filter",transform:function(a){for(var r=a.upstream,e,n=qM(a.config,{valueGetterAttrMap:(0,g.kW)({dimension:!0}),prepareGetValue:function(h){var v="",d=h.dimension;(0,g.RI)(h,"dimension")||(0,Zr._y)(v);var m=r.getDimensionInfo(d);return m||(0,Zr._y)(v),{dimIdx:m.index}},getValue:function(h){return r.retrieveValueFromItem(e,h.dimIdx)}}),o=[],s=0,u=r.count();s<u;s++)e=r.getRawDataItem(s),n.evaluate()&&o.push(e);return{data:o}}},VE="",eE={type:"echarts:sort",transform:function(a){var r=a.upstream,e=a.config,n="",o=(0,Xe.kF)(e);o.length||(0,Zr._y)(n);var s=[];(0,g.S6)(o,function(m){var _=m.dimension,S=m.order,b=m.parser,P=m.incomparable;if(_==null&&(0,Zr._y)(n),S!=="asc"&&S!=="desc"&&(0,Zr._y)(n),P&&P!=="min"&&P!=="max"){var R="";(0,Zr._y)(R)}if(S!=="asc"&&S!=="desc"){var Y="";(0,Zr._y)(Y)}var nt=r.getDimensionInfo(_);nt||(0,Zr._y)(n);var pt=b?(0,gl.o2)(b):null;b&&!pt&&(0,Zr._y)(n),s.push({dimIdx:nt.index,parser:pt,comparator:new gl.ID(S,P)})});var u=r.sourceFormat;u!==sn.XD&&u!==sn.qb&&(0,Zr._y)(n);for(var h=[],v=0,d=r.count();v<d;v++)h.push(r.getRawDataItem(v));return h.sort(function(m,_){for(var S=0;S<s.length;S++){var b=s[S],P=r.retrieveValueFromItem(m,b.dimIdx),R=r.retrieveValueFromItem(_,b.dimIdx);b.parser&&(P=b.parser(P),R=b.parser(R));var Y=b.comparator.evaluate(P,R);if(Y!==0)return Y}return 0}),{data:h}}};function rE(a){a.registerTransform(tE),a.registerTransform(eE)}var nE=F(27240),Eo=ft.Z.CMD;function lf(a,r){return Math.abs(a-r)<1e-5}function ry(a){var r=a.data,e=a.len(),n=[],o,s=0,u=0,h=0,v=0;function d(me,Te){o&&o.length>2&&n.push(o),o=[me,Te]}function m(me,Te,be,Fe){lf(me,be)&&lf(Te,Fe)||o.push(me,Te,be,Fe,be,Fe)}function _(me,Te,be,Fe,Ye,Ue){var $e=Math.abs(Te-me),Sr=Math.tan($e/4)*4/3,Ar=Te<me?-1:1,Wr=Math.cos(me),jr=Math.sin(me),fn=Math.cos(Te),zn=Math.sin(Te),En=Wr*Ye+be,an=jr*Ue+Fe,Ur=fn*Ye+be,Sn=zn*Ue+Fe,mn=Ye*Sr*Ar,wn=Ue*Sr*Ar;o.push(En-mn*jr,an+wn*Wr,Ur+mn*zn,Sn-wn*fn,Ur,Sn)}for(var S,b,P,R,Y=0;Y<e;){var nt=r[Y++],pt=Y===1;switch(pt&&(s=r[Y],u=r[Y+1],h=s,v=u,(nt===Eo.L||nt===Eo.C||nt===Eo.Q)&&(o=[h,v])),nt){case Eo.M:s=h=r[Y++],u=v=r[Y++],d(h,v);break;case Eo.L:S=r[Y++],b=r[Y++],m(s,u,S,b),s=S,u=b;break;case Eo.C:o.push(r[Y++],r[Y++],r[Y++],r[Y++],s=r[Y++],u=r[Y++]);break;case Eo.Q:S=r[Y++],b=r[Y++],P=r[Y++],R=r[Y++],o.push(s+2/3*(S-s),u+2/3*(b-u),P+2/3*(S-P),R+2/3*(b-R),P,R),s=P,u=R;break;case Eo.A:var mt=r[Y++],bt=r[Y++],Lt=r[Y++],Pt=r[Y++],Ot=r[Y++],kt=r[Y++]+Ot;Y+=1;var jt=!r[Y++];S=Math.cos(Ot)*Lt+mt,b=Math.sin(Ot)*Pt+bt,pt?(h=S,v=b,d(h,v)):m(s,u,S,b),s=Math.cos(kt)*Lt+mt,u=Math.sin(kt)*Pt+bt;for(var re=(jt?-1:1)*Math.PI/2,ae=Ot;jt?ae>kt:ae<kt;ae+=re){var he=jt?Math.max(ae+re,kt):Math.min(ae+re,kt);_(ae,he,mt,bt,Lt,Pt)}break;case Eo.R:h=s=r[Y++],v=u=r[Y++],S=h+r[Y++],b=v+r[Y++],d(S,v),m(S,v,S,b),m(S,b,h,b),m(h,b,h,v),m(h,v,S,v);break;case Eo.Z:o&&m(s,u,h,v),s=h,u=v;break}}return o&&o.length>2&&n.push(o),n}function ny(a,r,e,n,o,s,u,h,v,d){if(lf(a,e)&&lf(r,n)&&lf(o,u)&&lf(s,h)){v.push(u,h);return}var m=2/d,_=m*m,S=u-a,b=h-r,P=Math.sqrt(S*S+b*b);S/=P,b/=P;var R=e-a,Y=n-r,nt=o-u,pt=s-h,mt=R*R+Y*Y,bt=nt*nt+pt*pt;if(mt<_&&bt<_){v.push(u,h);return}var Lt=S*R+b*Y,Pt=-S*nt-b*pt,Ot=mt-Lt*Lt,kt=bt-Pt*Pt;if(Ot<_&&Lt>=0&&kt<_&&Pt>=0){v.push(u,h);return}var jt=[],re=[];(0,xr.Vz)(a,e,o,u,.5,jt),(0,xr.Vz)(r,n,s,h,.5,re),ny(jt[0],re[0],jt[1],re[1],jt[2],re[2],jt[3],re[3],v,d),ny(jt[4],re[4],jt[5],re[5],jt[6],re[6],jt[7],re[7],v,d)}function iE(a,r){var e=ry(a),n=[];r=r||1;for(var o=0;o<e.length;o++){var s=e[o],u=[],h=s[0],v=s[1];u.push(h,v);for(var d=2;d<s.length;){var m=s[d++],_=s[d++],S=s[d++],b=s[d++],P=s[d++],R=s[d++];ny(h,v,m,_,S,b,P,R,u,r),h=P,v=R}n.push(u)}return n}function bx(a,r,e){var n=a[r],o=a[1-r],s=Math.abs(n/o),u=Math.ceil(Math.sqrt(s*e)),h=Math.floor(e/u);h===0&&(h=1,u=e);for(var v=[],d=0;d<u;d++)v.push(h);var m=u*h,_=e-m;if(_>0)for(var d=0;d<_;d++)v[d%u]+=1;return v}function Mx(a,r,e){for(var n=a.r0,o=a.r,s=a.startAngle,u=a.endAngle,h=Math.abs(u-s),v=h*o,d=o-n,m=v>Math.abs(d),_=bx([v,d],m?0:1,r),S=(m?h:d)/_.length,b=0;b<_.length;b++)for(var P=(m?d:h)/_[b],R=0;R<_[b];R++){var Y={};m?(Y.startAngle=s+S*b,Y.endAngle=s+S*(b+1),Y.r0=n+P*R,Y.r=n+P*(R+1)):(Y.startAngle=s+P*R,Y.endAngle=s+P*(R+1),Y.r0=n+S*b,Y.r=n+S*(b+1)),Y.clockwise=a.clockwise,Y.cx=a.cx,Y.cy=a.cy,e.push(Y)}}function aE(a,r,e){for(var n=a.width,o=a.height,s=n>o,u=bx([n,o],s?0:1,r),h=s?"width":"height",v=s?"height":"width",d=s?"x":"y",m=s?"y":"x",_=a[h]/u.length,S=0;S<u.length;S++)for(var b=a[v]/u[S],P=0;P<u[S];P++){var R={};R[d]=S*_,R[m]=P*b,R[h]=_,R[v]=b,R.x+=a.x,R.y+=a.y,e.push(R)}}function Ex(a,r,e,n){return a*n-e*r}function oE(a,r,e,n,o,s,u,h){var v=e-a,d=n-r,m=u-o,_=h-s,S=Ex(m,_,v,d);if(Math.abs(S)<1e-6)return null;var b=a-o,P=r-s,R=Ex(b,P,m,_)/S;return R<0||R>1?null:new bi.Z(R*v+a,R*d+r)}function sE(a,r,e){var n=new bi.Z;bi.Z.sub(n,e,r),n.normalize();var o=new bi.Z;bi.Z.sub(o,a,r);var s=o.dot(n);return s}function uf(a,r){var e=a[a.length-1];e&&e[0]===r[0]&&e[1]===r[1]||a.push(r)}function lE(a,r,e){for(var n=a.length,o=[],s=0;s<n;s++){var u=a[s],h=a[(s+1)%n],v=oE(u[0],u[1],h[0],h[1],r.x,r.y,e.x,e.y);v&&o.push({projPt:sE(v,r,e),pt:v,idx:s})}if(o.length<2)return[{points:a},{points:a}];o.sort(function(Y,nt){return Y.projPt-nt.projPt});var d=o[0],m=o[o.length-1];if(m.idx<d.idx){var _=d;d=m,m=_}for(var S=[d.pt.x,d.pt.y],b=[m.pt.x,m.pt.y],P=[S],R=[b],s=d.idx+1;s<=m.idx;s++)uf(P,a[s].slice());uf(P,b),uf(P,S);for(var s=m.idx+1;s<=d.idx+n;s++)uf(R,a[s%n].slice());return uf(R,S),uf(R,b),[{points:P},{points:R}]}function Cx(a){var r=a.points,e=[],n=[];(0,sa.zk)(r,e,n);var o=new Dr.Z(e[0],e[1],n[0]-e[0],n[1]-e[1]),s=o.width,u=o.height,h=o.x,v=o.y,d=new bi.Z,m=new bi.Z;return s>u?(d.x=m.x=h+s/2,d.y=v,m.y=v+u):(d.y=m.y=v+u/2,d.x=h,m.x=h+s),lE(r,d,m)}function Bd(a,r,e,n){if(e===1)n.push(r);else{var o=Math.floor(e/2),s=a(r);Bd(a,s[0],o,n),Bd(a,s[1],e-o,n)}return n}function uE(a,r){for(var e=[],n=0;n<r;n++)e.push((0,Ko.U5)(a));return e}function fE(a,r){r.setStyle(a.style),r.z=a.z,r.z2=a.z2,r.zlevel=a.zlevel}function hE(a){for(var r=[],e=0;e<a.length;)r.push([a[e++],a[e++]]);return r}function cE(a,r){var e=[],n=a.shape,o;switch(a.type){case"rect":aE(n,r,e),o=on.Z;break;case"sector":Mx(n,r,e),o=Di.C;break;case"circle":Mx({r0:0,r:n.r,startAngle:0,endAngle:Math.PI*2,cx:n.cx,cy:n.cy},r,e),o=Di.C;break;default:var s=a.getComputedTransform(),u=s?Math.sqrt(Math.max(s[0]*s[0]+s[1]*s[1],s[2]*s[2]+s[3]*s[3])):1,h=(0,g.UI)(iE(a.getUpdatedPathProxy(),u),function(nt){return hE(nt)}),v=h.length;if(v===0)Bd(Cx,{points:h[0]},r,e);else if(v===r)for(var d=0;d<v;d++)e.push({points:h[d]});else{var m=0,_=(0,g.UI)(h,function(nt){var pt=[],mt=[];(0,sa.zk)(nt,pt,mt);var bt=(mt[1]-pt[1])*(mt[0]-pt[0]);return m+=bt,{poly:nt,area:bt}});_.sort(function(nt,pt){return pt.area-nt.area});for(var S=r,d=0;d<v;d++){var b=_[d];if(S<=0)break;var P=d===v-1?S:Math.ceil(b.area/m*r);P<0||(Bd(Cx,{points:b.poly},P,e),S-=P)}}o=Ln.Z;break}if(!o)return uE(a,r);for(var R=[],d=0;d<e.length;d++){var Y=new o;Y.setShape(e[d]),fE(a,Y),R.push(Y)}return R}function vE(a,r){var e=a.length,n=r.length;if(e===n)return[a,r];for(var o=[],s=[],u=e<n?a:r,h=Math.min(e,n),v=Math.abs(n-e)/6,d=(h-2)/6,m=Math.ceil(v/d)+1,_=[u[0],u[1]],S=v,b=2;b<h;){var P=u[b-2],R=u[b-1],Y=u[b++],nt=u[b++],pt=u[b++],mt=u[b++],bt=u[b++],Lt=u[b++];if(S<=0){_.push(Y,nt,pt,mt,bt,Lt);continue}for(var Pt=Math.min(S,m-1)+1,Ot=1;Ot<=Pt;Ot++){var kt=Ot/Pt;(0,xr.Vz)(P,Y,pt,bt,kt,o),(0,xr.Vz)(R,nt,mt,Lt,kt,s),P=o[3],R=s[3],_.push(o[1],s[1],o[2],s[2],P,R),Y=o[5],nt=s[5],pt=o[6],mt=s[6]}S-=Pt-1}return u===a?[_,r]:[a,_]}function Px(a,r){for(var e=a.length,n=a[e-2],o=a[e-1],s=[],u=0;u<r.length;)s[u++]=n,s[u++]=o;return s}function dE(a,r){for(var e,n,o,s=[],u=[],h=0;h<Math.max(a.length,r.length);h++){var v=a[h],d=r[h],m=void 0,_=void 0;v?d?(e=vE(v,d),m=e[0],_=e[1],n=m,o=_):(_=Px(o||v,v),m=v):(m=Px(n||d,d),_=d),s.push(m),u.push(_)}return[s,u]}function Lx(a){for(var r=0,e=0,n=0,o=a.length,s=0,u=o-2;s<o;u=s,s+=2){var h=a[u],v=a[u+1],d=a[s],m=a[s+1],_=h*m-d*v;r+=_,e+=(h+d)*_,n+=(v+m)*_}return r===0?[a[0]||0,a[1]||0]:[e/r/3,n/r/3,r]}function pE(a,r,e,n){for(var o=(a.length-2)/6,s=1/0,u=0,h=a.length,v=h-2,d=0;d<o;d++){for(var m=d*6,_=0,S=0;S<h;S+=2){var b=S===0?m:(m+S-2)%v+2,P=a[b]-e[0],R=a[b+1]-e[1],Y=r[S]-n[0],nt=r[S+1]-n[1],pt=Y-P,mt=nt-R;_+=pt*pt+mt*mt}_<s&&(s=_,u=d)}return u}function gE(a){for(var r=[],e=a.length,n=0;n<e;n+=2)r[n]=a[e-n-2],r[n+1]=a[e-n-1];return r}function mE(a,r,e,n){for(var o=[],s,u=0;u<a.length;u++){var h=a[u],v=r[u],d=Lx(h),m=Lx(v);s==null&&(s=d[2]<0!=m[2]<0);var _=[],S=[],b=0,P=1/0,R=[],Y=h.length;s&&(h=gE(h));for(var nt=pE(h,v,d,m)*6,pt=Y-2,mt=0;mt<pt;mt+=2){var bt=(nt+mt)%pt+2;_[mt+2]=h[bt]-d[0],_[mt+3]=h[bt+1]-d[1]}if(_[0]=h[nt]-d[0],_[1]=h[nt+1]-d[1],e>0)for(var Lt=n/e,Pt=-n/2;Pt<=n/2;Pt+=Lt){for(var Ot=Math.sin(Pt),kt=Math.cos(Pt),jt=0,mt=0;mt<h.length;mt+=2){var re=_[mt],ae=_[mt+1],he=v[mt]-m[0],me=v[mt+1]-m[1],Te=he*kt-me*Ot,be=he*Ot+me*kt;R[mt]=Te,R[mt+1]=be;var Fe=Te-re,Ye=be-ae;jt+=Fe*Fe+Ye*Ye}if(jt<P){P=jt,b=Pt;for(var Ue=0;Ue<R.length;Ue++)S[Ue]=R[Ue]}}else for(var $e=0;$e<Y;$e+=2)S[$e]=v[$e]-m[0],S[$e+1]=v[$e+1]-m[1];o.push({from:_,to:S,fromCp:d,toCp:m,rotation:-b})}return o}function Fd(a){return a.__isCombineMorphing}function ZE(a){return a.__morphT>=0}var Ix="__mOriginal_";function zd(a,r,e){var n=Ix+r,o=a[n]||a[r];a[n]||(a[n]=a[r]);var s=e.replace,u=e.after,h=e.before;a[r]=function(){var v=arguments,d;return h&&h.apply(this,v),s?d=s.apply(this,v):d=o.apply(this,v),u&&u.apply(this,v),d}}function oc(a,r){var e=Ix+r;a[e]&&(a[r]=a[e],a[e]=null)}function Rx(a,r){for(var e=0;e<a.length;e++)for(var n=a[e],o=0;o<n.length;){var s=n[o],u=n[o+1];n[o++]=r[0]*s+r[2]*u+r[4],n[o++]=r[1]*s+r[3]*u+r[5]}}function Ox(a,r){var e=a.getUpdatedPathProxy(),n=r.getUpdatedPathProxy(),o=dE(ry(e),ry(n)),s=o[0],u=o[1],h=a.getComputedTransform(),v=r.getComputedTransform();function d(){this.transform=null}h&&Rx(s,h),v&&Rx(u,v),zd(r,"updateTransform",{replace:d}),r.transform=null;var m=mE(s,u,10,Math.PI),_=[];zd(r,"buildPath",{replace:function(S){for(var b=r.__morphT,P=1-b,R=[],Y=0;Y<m.length;Y++){var nt=m[Y],pt=nt.from,mt=nt.to,bt=nt.rotation*b,Lt=nt.fromCp,Pt=nt.toCp,Ot=Math.sin(bt),kt=Math.cos(bt);(0,Or.t7)(R,Lt,Pt,b);for(var jt=0;jt<pt.length;jt+=2){var re=pt[jt],ae=pt[jt+1],he=mt[jt],me=mt[jt+1],Te=re*P+he*b,be=ae*P+me*b;_[jt]=Te*kt-be*Ot+R[0],_[jt+1]=Te*Ot+be*kt+R[1]}var Fe=_[0],Ye=_[1];S.moveTo(Fe,Ye);for(var jt=2;jt<pt.length;){var he=_[jt++],me=_[jt++],Ue=_[jt++],$e=_[jt++],Sr=_[jt++],Ar=_[jt++];Fe===he&&Ye===me&&Ue===Sr&&$e===Ar?S.lineTo(Sr,Ar):S.bezierCurveTo(he,me,Ue,$e,Sr,Ar),Fe=Sr,Ye=Ar}}}})}function iy(a,r,e){if(!a||!r)return r;var n=e.done,o=e.during;Ox(a,r),r.__morphT=0;function s(){oc(r,"buildPath"),oc(r,"updateTransform"),r.__morphT=-1,r.createPathProxy(),r.dirtyShape()}return r.animateTo({__morphT:1},(0,g.ce)({during:function(u){r.dirtyShape(),o&&o(u)},done:function(){s(),n&&n()}},e)),r}function yE(a,r,e,n,o,s){var u=16;a=o===e?0:Math.round(32767*(a-e)/(o-e)),r=s===n?0:Math.round(32767*(r-n)/(s-n));for(var h=0,v,d=(1<<u)/2;d>0;d/=2){var m=0,_=0;(a&d)>0&&(m=1),(r&d)>0&&(_=1),h+=d*d*(3*m^_),_===0&&(m===1&&(a=d-1-a,r=d-1-r),v=a,a=r,r=v)}return h}function Gd(a){var r=1/0,e=1/0,n=-1/0,o=-1/0,s=(0,g.UI)(a,function(h){var v=h.getBoundingRect(),d=h.getComputedTransform(),m=v.x+v.width/2+(d?d[4]:0),_=v.y+v.height/2+(d?d[5]:0);return r=Math.min(m,r),e=Math.min(_,e),n=Math.max(m,n),o=Math.max(_,o),[m,_]}),u=(0,g.UI)(s,function(h,v){return{cp:h,z:yE(h[0],h[1],r,e,n,o),path:a[v]}});return u.sort(function(h,v){return h.z-v.z}).map(function(h){return h.path})}function Nx(a){return cE(a.path,a.count)}function ay(){return{fromIndividuals:[],toIndividuals:[],count:0}}function _E(a,r,e){var n=[];function o(Lt){for(var Pt=0;Pt<Lt.length;Pt++){var Ot=Lt[Pt];Fd(Ot)?o(Ot.childrenRef()):Ot instanceof dt.ZP&&n.push(Ot)}}o(a);var s=n.length;if(!s)return ay();var u=e.dividePath||Nx,h=u({path:r,count:s});if(h.length!==s)return console.error("Invalid morphing: unmatched splitted path"),ay();n=Gd(n),h=Gd(h);for(var v=e.done,d=e.during,m=e.individualDelay,_=new tt.ZP,S=0;S<s;S++){var b=n[S],P=h[S];P.parent=r,P.copyTransform(_),m||Ox(b,P)}r.__isCombineMorphing=!0,r.childrenRef=function(){return h};function R(Lt){for(var Pt=0;Pt<h.length;Pt++)h[Pt].addSelfToZr(Lt)}zd(r,"addSelfToZr",{after:function(Lt){R(Lt)}}),zd(r,"removeSelfFromZr",{after:function(Lt){for(var Pt=0;Pt<h.length;Pt++)h[Pt].removeSelfFromZr(Lt)}});function Y(){r.__isCombineMorphing=!1,r.__morphT=-1,r.childrenRef=null,oc(r,"addSelfToZr"),oc(r,"removeSelfFromZr")}var nt=h.length;if(m)for(var pt=nt,mt=function(){pt--,pt===0&&(Y(),v&&v())},S=0;S<nt;S++){var bt=m?(0,g.ce)({delay:(e.delay||0)+m(S,nt,n[S],h[S]),done:mt},e):e;iy(n[S],h[S],bt)}else r.__morphT=0,r.animateTo({__morphT:1},(0,g.ce)({during:function(Lt){for(var Pt=0;Pt<nt;Pt++){var Ot=h[Pt];Ot.__morphT=r.__morphT,Ot.dirtyShape()}d&&d(Lt)},done:function(){Y();for(var Lt=0;Lt<a.length;Lt++)oc(a[Lt],"updateTransform");v&&v()}},e));return r.__zr&&R(r.__zr),{fromIndividuals:n,toIndividuals:h,count:nt}}function xE(a,r,e){var n=r.length,o=[],s=e.dividePath||Nx;function u(b){for(var P=0;P<b.length;P++){var R=b[P];Fd(R)?u(R.childrenRef()):R instanceof dt.ZP&&o.push(R)}}if(Fd(a)){u(a.childrenRef());var h=o.length;if(h<n)for(var v=0,d=h;d<n;d++)o.push((0,Ko.U5)(o[v++%h]));o.length=n}else{o=s({path:a,count:n});for(var m=a.getComputedTransform(),d=0;d<o.length;d++)o[d].setLocalTransform(m);if(o.length!==n)return console.error("Invalid morphing: unmatched splitted path"),ay()}o=Gd(o),r=Gd(r);for(var _=e.individualDelay,d=0;d<n;d++){var S=_?(0,g.ce)({delay:(e.delay||0)+_(d,n,o[d],r[d])},e):e;iy(o[d],r[d],S)}return{fromIndividuals:o,toIndividuals:r,count:r.length}}function Bx(a){return(0,g.kJ)(a[0])}function Fx(a,r){for(var e=[],n=a.length,o=0;o<n;o++)e.push({one:a[o],many:[]});for(var o=0;o<r.length;o++){var s=r[o].length,u=void 0;for(u=0;u<s;u++)e[u%n].many.push(r[o][u])}for(var h=0,o=n-1;o>=0;o--)if(!e[o].many.length){var v=e[h].many;if(v.length<=1)if(h)h=0;else return e;var s=v.length,d=Math.ceil(s/2);e[o].many=v.slice(d,s),e[h].many=v.slice(0,d),h++}return e}var SE={clone:function(a){for(var r=[],e=1-Math.pow(1-a.path.style.opacity,1/a.count),n=0;n<a.count;n++){var o=(0,Ko.U5)(a.path);o.setStyle("opacity",e),r.push(o)}return r},split:null};function oy(a,r,e,n,o,s){if(!a.length||!r.length)return;var u=(0,cr.ke)("update",n,o);if(!(u&&u.duration>0))return;var h=n.getModel("universalTransition").get("delay"),v=Object.assign({setToFinal:!0},u),d,m;Bx(a)&&(d=a,m=r),Bx(r)&&(d=r,m=a);function _(nt,pt,mt,bt,Lt){var Pt=nt.many,Ot=nt.one;if(Pt.length===1&&!Lt){var kt=pt?Pt[0]:Ot,jt=pt?Ot:Pt[0];if(Fd(kt))_({many:[kt],one:jt},!0,mt,bt,!0);else{var re=h?(0,g.ce)({delay:h(mt,bt)},v):v;iy(kt,jt,re),s(kt,jt,kt,jt,re)}}else for(var ae=(0,g.ce)({dividePath:SE[e],individualDelay:h&&function(Ye,Ue,$e,Sr){return h(Ye+mt,bt)}},v),he=pt?_E(Pt,Ot,ae):xE(Ot,Pt,ae),me=he.fromIndividuals,Te=he.toIndividuals,be=me.length,Fe=0;Fe<be;Fe++){var re=h?(0,g.ce)({delay:h(Fe,be)},v):v;s(me[Fe],Te[Fe],pt?Pt[Fe]:nt.one,pt?nt.one:Pt[Fe],re)}}for(var S=d?d===a:a.length>r.length,b=d?Fx(m,d):Fx(S?r:a,[S?a:r]),P=0,R=0;R<b.length;R++)P+=b[R].many.length;for(var Y=0,R=0;R<b.length;R++)_(b[R],S,Y,P),Y+=b[R].many.length}function iu(a){if(!a)return[];if((0,g.kJ)(a)){for(var r=[],e=0;e<a.length;e++)r.push(iu(a[e]));return r}var n=[];return a.traverse(function(o){o instanceof dt.ZP&&!o.disableMorphing&&!o.invisible&&!o.ignore&&n.push(o)}),n}var zx=1e4,TE=(0,Xe.Yf)();function wE(a){for(var r=a.dimensions,e=0;e<r.length;e++){var n=a.getDimensionInfo(r[e]);if(n&&n.otherDims.itemGroupId===0)return r[e]}}function Gx(a){var r=[];return(0,g.S6)(a,function(e){var n=e.data;if(!(n.count()>zx))for(var o=n.getIndices(),s=wE(n),u=0;u<o.length;u++)r.push({data:n,dim:e.dim||s,divide:e.divide,dataIndex:u})}),r}function sy(a,r,e){a.traverse(function(n){n instanceof dt.ZP&&(0,cr.KZ)(n,{style:{opacity:0}},r,{dataIndex:e,isFrom:!0})})}function ly(a){if(a.parent){var r=a.getComputedTransform();a.setLocalTransform(r),a.parent.remove(a)}}function ff(a){a.stopAnimation(),a.isGroup&&a.traverse(function(r){r.stopAnimation()})}function DE(a,r,e){var n=(0,cr.ke)("update",e,r);n&&a.traverse(function(o){if(o instanceof go.ZP){var s=(0,cr._W)(o);s&&o.animateFrom({style:s},n)}})}function AE(a,r){var e=a.length;if(e!==r.length)return!1;for(var n=0;n<e;n++){var o=a[n],s=r[n];if(o.data.getId(o.dataIndex)!==s.data.getId(s.dataIndex))return!1}return!0}function Ux(a,r,e){var n=Gx(a),o=Gx(r);function s(nt,pt,mt,bt,Lt){(mt||nt)&&pt.animateFrom({style:mt&&mt!==nt?(0,g.l7)((0,g.l7)({},mt.style),nt.style):nt.style},Lt)}function u(nt){for(var pt=0;pt<nt.length;pt++)if(nt[pt].dim)return nt[pt].dim}var h=u(n),v=u(o),d=!1;function m(nt,pt){return function(mt){var bt=mt.data,Lt=mt.dataIndex;if(pt)return bt.getId(Lt);var Pt=bt.hostModel&&bt.hostModel.get("dataGroupId"),Ot=nt?h||v:v||h,kt=Ot&&bt.getDimensionInfo(Ot),jt=kt&&kt.ordinalMeta;if(kt){var re=bt.get(kt.name,Lt);return jt&&jt.categories[re]||re+""}var ae=bt.getRawDataItem(Lt);return ae&&ae.groupId?ae.groupId+"":Pt||bt.getId(Lt)}}var _=AE(n,o),S={};if(!_)for(var b=0;b<o.length;b++){var P=o[b],R=P.data.getItemGraphicEl(P.dataIndex);R&&(S[R.id]=!0)}function Y(nt,pt){var mt=n[pt],bt=o[nt],Lt=bt.data.hostModel,Pt=mt.data.getItemGraphicEl(mt.dataIndex),Ot=bt.data.getItemGraphicEl(bt.dataIndex);if(Pt===Ot){Ot&&DE(Ot,bt.dataIndex,Lt);return}Pt&&S[Pt.id]||Ot&&(ff(Ot),Pt?(ff(Pt),ly(Pt),d=!0,oy(iu(Pt),iu(Ot),bt.divide,Lt,nt,s)):sy(Ot,Lt,nt))}new yo.Z(n,o,m(!0,_),m(!1,_),null,"multiple").update(Y).updateManyToOne(function(nt,pt){var mt=o[nt],bt=mt.data,Lt=bt.hostModel,Pt=bt.getItemGraphicEl(mt.dataIndex),Ot=(0,g.hX)((0,g.UI)(pt,function(kt){return n[kt].data.getItemGraphicEl(n[kt].dataIndex)}),function(kt){return kt&&kt!==Pt&&!S[kt.id]});Pt&&(ff(Pt),Ot.length?((0,g.S6)(Ot,function(kt){ff(kt),ly(kt)}),d=!0,oy(iu(Ot),iu(Pt),mt.divide,Lt,nt,s)):sy(Pt,Lt,mt.dataIndex))}).updateOneToMany(function(nt,pt){var mt=n[pt],bt=mt.data.getItemGraphicEl(mt.dataIndex);if(!(bt&&S[bt.id])){var Lt=(0,g.hX)((0,g.UI)(nt,function(Ot){return o[Ot].data.getItemGraphicEl(o[Ot].dataIndex)}),function(Ot){return Ot&&Ot!==bt}),Pt=o[nt[0]].data.hostModel;Lt.length&&((0,g.S6)(Lt,function(Ot){return ff(Ot)}),bt?(ff(bt),ly(bt),d=!0,oy(iu(bt),iu(Lt),mt.divide,Pt,nt[0],s)):(0,g.S6)(Lt,function(Ot){return sy(Ot,Pt,nt[0])}))}}).updateManyToMany(function(nt,pt){new yo.Z(pt,nt,function(mt){return n[mt].data.getId(n[mt].dataIndex)},function(mt){return o[mt].data.getId(o[mt].dataIndex)}).update(function(mt,bt){Y(nt[mt],pt[bt])}).execute()}).execute(),d&&(0,g.S6)(r,function(nt){var pt=nt.data,mt=pt.hostModel,bt=mt&&e.getViewOfSeriesModel(mt),Lt=(0,cr.ke)("update",mt,0);bt&&mt.isAnimationEnabled()&&Lt&&Lt.duration>0&&bt.group.traverse(function(Pt){Pt instanceof dt.ZP&&!Pt.animators.length&&Pt.animateFrom({style:{opacity:0}},Lt)})})}function kx(a){var r=a.getModel("universalTransition").get("seriesKey");return r||a.id}function Vx(a){return(0,g.kJ)(a)?a.sort().join(","):a}function ml(a){if(a.hostModel)return a.hostModel.getModel("universalTransition").get("divideShape")}function bE(a,r){var e=(0,g.kW)(),n=(0,g.kW)(),o=(0,g.kW)();(0,g.S6)(a.oldSeries,function(u,h){var v=a.oldData[h],d=kx(u),m=Vx(d);n.set(m,v),(0,g.kJ)(d)&&(0,g.S6)(d,function(_){o.set(_,{data:v,key:m})})});function s(u){e.get(u)&&(0,Zr.ZK)("Duplicated seriesKey in universalTransition "+u)}return(0,g.S6)(r.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var h=u.getData(),v=kx(u),d=Vx(v),m=n.get(d);if(m)e.set(d,{oldSeries:[{divide:ml(m),data:m}],newSeries:[{divide:ml(h),data:h}]});else if((0,g.kJ)(v)){var _=[];(0,g.S6)(v,function(P){var R=n.get(P);R&&_.push({divide:ml(R),data:R})}),_.length&&e.set(d,{oldSeries:_,newSeries:[{data:h,divide:ml(h)}]})}else{var S=o.get(v);if(S){var b=e.get(S.key);b||(b={oldSeries:[{data:S.data,divide:ml(S.data)}],newSeries:[]},e.set(S.key,b)),b.newSeries.push({data:h,divide:ml(h)})}}}}),e}function Zx(a,r){for(var e=0;e<a.length;e++){var n=r.seriesIndex!=null&&r.seriesIndex===a[e].seriesIndex||r.seriesId!=null&&r.seriesId===a[e].id;if(n)return e}}function ME(a,r,e,n){var o=[],s=[];(0,g.S6)((0,Xe.kF)(a.from),function(u){var h=Zx(r.oldSeries,u);h>=0&&o.push({data:r.oldData[h],divide:ml(r.oldData[h]),dim:u.dimension})}),(0,g.S6)((0,Xe.kF)(a.to),function(u){var h=Zx(e.updatedSeries,u);if(h>=0){var v=e.updatedSeries[h].getData();s.push({data:v,divide:ml(v),dim:u.dimension})}}),o.length>0&&s.length>0&&Ux(o,s,n)}function EE(a){a.registerUpdateLifecycle("series:beforeupdate",function(r,e,n){(0,g.S6)((0,Xe.kF)(n.seriesTransition),function(o){(0,g.S6)((0,Xe.kF)(o.to),function(s){for(var u=n.updatedSeries,h=0;h<u.length;h++)(s.seriesIndex!=null&&s.seriesIndex===u[h].seriesIndex||s.seriesId!=null&&s.seriesId===u[h].id)&&(u[h][xe.V]=!0)})})}),a.registerUpdateLifecycle("series:transition",function(r,e,n){var o=TE(e);if(o.oldSeries&&n.updatedSeries&&n.optionChanged){var s=n.seriesTransition;if(s)(0,g.S6)((0,Xe.kF)(s),function(S){ME(S,o,n,e)});else{var u=bE(o,n);(0,g.S6)(u.keys(),function(S){var b=u.get(S);Ux(b.oldSeries,b.newSeries,e)})}(0,g.S6)(n.updatedSeries,function(S){S[xe.V]&&(S[xe.V]=!1)})}for(var h=r.getSeries(),v=o.oldSeries=[],d=o.oldData=[],m=0;m<h.length;m++){var _=h[m].getData();_.count()<zx&&(v.push(h[m]),d.push(_))}})}var CE=F(87164);(0,N.D)([yn.N]),(0,N.D)([su]),(0,N.D)([Ji,ga,gr,cp,wp,Xp,nv,cs,Zg,Jg,Bv,O0,ne,An,iS,hS,PS,US,qS,sT,xT,aw]),(0,N.D)(Ew),(0,N.D)(u2),(0,N.D)(Kc),(0,N.D)(M2),(0,N.D)(ld),(0,N.D)(O2),(0,N.D)(Z2),(0,N.D)(XD),(0,N.D)(mA),(0,N.D)(Jh),(0,N.D)(FA),(0,N.D)(UA),(0,N.D)(nb),(0,N.D)(vb),(0,N.D)(Sb),(0,N.D)(Cb),(0,N.D)(Zb),(0,N.D)(hM),(0,N.D)($1),(0,N.D)(rx),(0,N.D)(zM),(0,N.D)(yx),(0,N.D)(xx),(0,N.D)(ZM),(0,N.D)(rE),(0,N.D)(nE.N),(0,N.D)(EE),(0,N.D)(CE.T)},29266:function(Ce,Jt,F){"use strict";F.d(Jt,{D:function(){return vt},KZ:function(){return it},XD:function(){return at},Zi:function(){return G},_W:function(){return U},bX:function(){return H},eq:function(){return et},ke:function(){return dt}});var N=F(33051),ct=F(32234),K=(0,ct.Yf)();function dt(W,lt,g,j,rt){var $;if(lt&&lt.ecModel){var O=lt.ecModel.getUpdatePayload();$=O&&O.animation}var X=lt&&lt.isAnimationEnabled(),Q=W==="update";if(X){var k=void 0,V=void 0,I=void 0;j?(k=(0,N.pD)(j.duration,200),V=(0,N.pD)(j.easing,"cubicOut"),I=0):(k=lt.getShallow(Q?"animationDurationUpdate":"animationDuration"),V=lt.getShallow(Q?"animationEasingUpdate":"animationEasing"),I=lt.getShallow(Q?"animationDelayUpdate":"animationDelay")),$&&($.duration!=null&&(k=$.duration),$.easing!=null&&(V=$.easing),$.delay!=null&&(I=$.delay)),(0,N.mf)(I)&&(I=I(g,rt)),(0,N.mf)(k)&&(k=k(g));var D={duration:k||0,delay:I,easing:V};return D}else return null}function gt(W,lt,g,j,rt,$,O){var X=!1,Q;(0,N.mf)(rt)?(O=$,$=rt,rt=null):(0,N.Kn)(rt)&&($=rt.cb,O=rt.during,X=rt.isFrom,Q=rt.removeOpt,rt=rt.dataIndex);var k=W==="leave";k||lt.stopAnimation("leave");var V=dt(W,j,rt,k?Q||{}:null,j&&j.getAnimationDelayParams?j.getAnimationDelayParams(lt,rt):null);if(V&&V.duration>0){var I=V.duration,D=V.delay,C=V.easing,M={duration:I,delay:D||0,easing:C,done:$,force:!!$||!!O,setToFinal:!k,scope:W,during:O};X?lt.animateFrom(g,M):lt.animateTo(g,M)}else lt.stopAnimation(),!X&&lt.attr(g),O&&O(1),$&&$()}function vt(W,lt,g,j,rt,$){gt("update",W,lt,g,j,rt,$)}function it(W,lt,g,j,rt,$){gt("enter",W,lt,g,j,rt,$)}function et(W){if(!W.__zr)return!0;for(var lt=0;lt<W.animators.length;lt++){var g=W.animators[lt];if(g.scope==="leave")return!0}return!1}function H(W,lt,g,j,rt,$){et(W)||gt("leave",W,lt,g,j,rt,$)}function J(W,lt,g,j){W.removeTextContent(),W.removeTextGuideLine(),H(W,{style:{opacity:0}},lt,g,j)}function at(W,lt,g){function j(){W.parent&&W.parent.remove(W)}W.isGroup?W.traverse(function(rt){rt.isGroup||J(rt,lt,g,j)}):J(W,lt,g,j)}function G(W){K(W).oldStyle=W.style}function U(W){return K(W).oldStyle}},95682:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return ct}});var N=F(32234);function ct(){var K=(0,N.Yf)();return function(dt){var gt=K(dt),vt=dt.pipelineContext,it=!!gt.large,et=!!gt.progressiveRender,H=gt.large=!!(vt&&vt.large),J=gt.progressiveRender=!!(vt&&vt.progressiveRender);return(it!==H||et!==J)&&"reset"}}},38455:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return O}});var N=F(33051),ct=F(5101),K=F(55623),dt=F(10381),gt=F(32234),vt=F(54267),it=function(){function X(Q){this.coordSysDims=[],this.axisMap=(0,N.kW)(),this.categoryAxisMap=(0,N.kW)(),this.coordSysName=Q}return X}();function et(X){var Q=X.get("coordinateSystem"),k=new it(Q),V=H[Q];if(V)return V(X,k,k.axisMap,k.categoryAxisMap),k}var H={cartesian2d:function(X,Q,k,V){var I=X.getReferringComponents("xAxis",gt.C6).models[0],D=X.getReferringComponents("yAxis",gt.C6).models[0];Q.coordSysDims=["x","y"],k.set("x",I),k.set("y",D),J(I)&&(V.set("x",I),Q.firstCategoryDimIndex=0),J(D)&&(V.set("y",D),Q.firstCategoryDimIndex==null&&(Q.firstCategoryDimIndex=1))},singleAxis:function(X,Q,k,V){var I=X.getReferringComponents("singleAxis",gt.C6).models[0];Q.coordSysDims=["single"],k.set("single",I),J(I)&&(V.set("single",I),Q.firstCategoryDimIndex=0)},polar:function(X,Q,k,V){var I=X.getReferringComponents("polar",gt.C6).models[0],D=I.findAxisModel("radiusAxis"),C=I.findAxisModel("angleAxis");Q.coordSysDims=["radius","angle"],k.set("radius",D),k.set("angle",C),J(D)&&(V.set("radius",D),Q.firstCategoryDimIndex=0),J(C)&&(V.set("angle",C),Q.firstCategoryDimIndex==null&&(Q.firstCategoryDimIndex=1))},geo:function(X,Q,k,V){Q.coordSysDims=["lng","lat"]},parallel:function(X,Q,k,V){var I=X.ecModel,D=I.getComponent("parallel",X.get("parallelIndex")),C=Q.coordSysDims=D.dimensions.slice();(0,N.S6)(D.parallelAxisIndex,function(M,T){var A=I.getComponent("parallelAxis",M),L=C[T];k.set(L,A),J(A)&&(V.set(L,A),Q.firstCategoryDimIndex==null&&(Q.firstCategoryDimIndex=T))})}};function J(X){return X.get("type")==="category"}var at=F(99574),G=F(99936),U=F(61772),W=F(94279);function lt(X,Q){var k=X.get("coordinateSystem"),V=vt.Z.get(k),I;return Q&&Q.coordSysDims&&(I=N.UI(Q.coordSysDims,function(D){var C={name:D},M=Q.axisMap.get(D);if(M){var T=M.get("type");C.type=(0,dt.T)(T)}return C})),I||(I=V&&(V.getDimensionsInfo?V.getDimensionsInfo():V.dimensions.slice())||["x","y"]),I}function g(X,Q,k){var V,I;return k&&N.S6(X,function(D,C){var M=D.coordDim,T=k.categoryAxisMap.get(M);T&&(V==null&&(V=C),D.ordinalMeta=T.getOrdinalMeta(),Q&&(D.createInvertedIndices=!0)),D.otherDims.itemName!=null&&(I=!0)}),!I&&V!=null&&(X[V].otherDims.itemName=0),V}function j(X,Q,k){k=k||{};var V=Q.getSourceManager(),I,D=!1;X?(D=!0,I=(0,at.nx)(X)):(I=V.getSource(),D=I.sourceFormat===W.cy);var C=et(Q),M=lt(Q,C),T=k.useEncodeDefaulter,A=N.mf(T)?T:T?N.WA(U.pY,M,Q):null,L={coordDimensions:M,generateCoord:k.generateCoord,encodeDefine:Q.getEncode(),encodeDefaulter:A,canOmitUnusedDimensions:!D},Z=(0,K.Z)(I,L),z=g(Z.dimensions,k.createInvertedIndices,C),ut=D?null:V.getSharedDataStore(Z),ot=(0,G.BM)(Q,{schema:Z,store:ut}),ht=new ct.Z(Z,Q);ht.setCalculationInfo(ot);var tt=z!=null&&rt(I)?function(ft,St,st,xt){return xt===z?st:this.defaultDimValueGetter(ft,St,st,xt)}:null;return ht.hasItemOption=!1,ht.initData(D?I:ut,null,tt),ht}function rt(X){if(X.sourceFormat===W.cy){var Q=$(X.data||[]);return!N.kJ((0,gt.C4)(Q))}}function $(X){for(var Q=0;Q<X.length&&X[Q]==null;)Q++;return X[Q]}var O=j},27240:function(Ce,Jt,F){"use strict";F.d(Jt,{N:function(){return et}});var N=F(70655),ct=F(98071),K=F(33166),dt=F(94279),gt=F(36437),vt=function(H){(0,N.ZT)(J,H);function J(){var at=H!==null&&H.apply(this,arguments)||this;return at.type="dataset",at}return J.prototype.init=function(at,G,U){H.prototype.init.call(this,at,G,U),this._sourceManager=new gt.U(this),(0,gt.t)(this)},J.prototype.mergeOption=function(at,G){H.prototype.mergeOption.call(this,at,G),(0,gt.t)(this)},J.prototype.optionUpdated=function(){this._sourceManager.dirty()},J.prototype.getSourceManager=function(){return this._sourceManager},J.type="dataset",J.defaultOption={seriesLayoutBy:dt.fY},J}(ct.Z),it=function(H){(0,N.ZT)(J,H);function J(){var at=H!==null&&H.apply(this,arguments)||this;return at.type="dataset",at}return J.type="dataset",J}(K.Z);function et(H){H.registerComponentModel(vt),H.registerComponentView(it)}},53993:function(Ce,Jt,F){"use strict";F.d(Jt,{w:function(){return gt}});var N=F(33051),ct=F(5685),K=F(68540),dt=F(32234);function gt(it){var et=it.series,H=it.dataIndex,J=it.multipleSeries,at=et.getData(),G=at.mapDimensionsAll("defaultedTooltip"),U=G.length,W=et.getRawValue(H),lt=(0,N.kJ)(W),g=(0,ct.jT)(et,H),j,rt,$,O;if(U>1||lt&&!U){var X=vt(W,et,H,G,g);j=X.inlineValues,rt=X.inlineValueTypes,$=X.blocks,O=X.inlineValues[0]}else if(U){var Q=at.getDimensionInfo(G[0]);O=j=(0,K.hk)(at,H,G[0]),rt=Q.type}else O=j=lt?W[0]:W;var k=(0,dt.yu)(et),V=k&&et.name||"",I=at.getName(H),D=J?V:I;return(0,ct.TX)("section",{header:V,noHeader:J||!k,sortParam:O,blocks:[(0,ct.TX)("nameValue",{markerType:"item",markerColor:g,name:D,noName:!(0,N.fy)(D),value:j,valueType:rt})].concat($||[])})}function vt(it,et,H,J,at){var G=et.getData(),U=(0,N.u4)(it,function(rt,$,O){var X=G.getDimensionInfo(O);return rt=rt||X&&X.tooltip!==!1&&X.displayName!=null},!1),W=[],lt=[],g=[];J.length?(0,N.S6)(J,function(rt){j((0,K.hk)(G,H,rt),rt)}):(0,N.S6)(it,j);function j(rt,$){var O=G.getDimensionInfo($);!O||O.otherDims.tooltip===!1||(U?g.push((0,ct.TX)("nameValue",{markerType:"subItem",markerColor:at,name:O.displayName,value:rt,valueType:O.type})):(W.push(rt),lt.push(O.type)))}return{inlineValues:W,inlineValueTypes:lt,blocks:g}}},5685:function(Ce,Jt,F){"use strict";F.d(Jt,{BY:function(){return lt},TX:function(){return H},d_:function(){return k},iv:function(){return V},jT:function(){return Q}});var N=F(78988),ct=F(33051),K=F(98407),dt=F(85669),gt="line-height:1";function vt(I,D){var C=I.color||"#6e7079",M=I.fontSize||12,T=I.fontWeight||"400",A=I.color||"#464646",L=I.fontSize||14,Z=I.fontWeight||"900";return D==="html"?{nameStyle:"font-size:"+(0,N.F1)(M+"")+"px;color:"+(0,N.F1)(C)+";font-weight:"+(0,N.F1)(T+""),valueStyle:"font-size:"+(0,N.F1)(L+"")+"px;color:"+(0,N.F1)(A)+";font-weight:"+(0,N.F1)(Z+"")}:{nameStyle:{fontSize:M,fill:C,fontWeight:T},valueStyle:{fontSize:L,fill:A,fontWeight:Z}}}var it=[0,10,20,30],et=["",`
`,`

`,`


`];function H(I,D){return D.type=I,D}function J(I){return I.type==="section"}function at(I){return J(I)?U:W}function G(I){if(J(I)){var D=0,C=I.blocks.length,M=C>1||C>0&&!I.noHeader;return(0,ct.S6)(I.blocks,function(T){var A=G(T);A>=D&&(D=A+ +(M&&(!A||J(T)&&!T.noHeader)))}),D}return 0}function U(I,D,C,M){var T=D.noHeader,A=g(G(D)),L=[],Z=D.blocks||[];(0,ct.hu)(!Z||(0,ct.kJ)(Z)),Z=Z||[];var z=I.orderMode;if(D.sortBlocks&&z){Z=Z.slice();var ut={valueAsc:"asc",valueDesc:"desc"};if((0,ct.RI)(ut,z)){var ot=new K.ID(ut[z],null);Z.sort(function(St,st){return ot.evaluate(St.sortParam,st.sortParam)})}else z==="seriesDesc"&&Z.reverse()}(0,ct.S6)(Z,function(St,st){var xt=D.valueFormatter,wt=at(St)(xt?(0,ct.l7)((0,ct.l7)({},I),{valueFormatter:xt}):I,St,st>0?A.html:0,M);wt!=null&&L.push(wt)});var ht=I.renderMode==="richText"?L.join(A.richText):j(L.join(""),T?C:A.html);if(T)return ht;var tt=(0,N.uX)(D.header,"ordinal",I.useUTC),ft=vt(M,I.renderMode).nameStyle;return I.renderMode==="richText"?O(I,tt,ft)+A.richText+ht:j('<div style="'+ft+";"+gt+';">'+(0,N.F1)(tt)+"</div>"+ht,C)}function W(I,D,C,M){var T=I.renderMode,A=D.noName,L=D.noValue,Z=!D.markerType,z=D.name,ut=I.useUTC,ot=D.valueFormatter||I.valueFormatter||function(Et){return Et=(0,ct.kJ)(Et)?Et:[Et],(0,ct.UI)(Et,function(zt,Bt){return(0,N.uX)(zt,(0,ct.kJ)(ft)?ft[Bt]:ft,ut)})};if(!(A&&L)){var ht=Z?"":I.markupStyleCreator.makeTooltipMarker(D.markerType,D.markerColor||"#333",T),tt=A?"":(0,N.uX)(z,"ordinal",ut),ft=D.valueType,St=L?[]:ot(D.value),st=!Z||!A,xt=!Z&&A,wt=vt(M,T),Dt=wt.nameStyle,It=wt.valueStyle;return T==="richText"?(Z?"":ht)+(A?"":O(I,tt,Dt))+(L?"":X(I,St,st,xt,It)):j((Z?"":ht)+(A?"":rt(tt,!Z,Dt))+(L?"":$(St,st,xt,It)),C)}}function lt(I,D,C,M,T,A){if(!!I){var L=at(I),Z={useUTC:T,renderMode:C,orderMode:M,markupStyleCreator:D,valueFormatter:I.valueFormatter};return L(Z,I,0,A)}}function g(I){return{html:it[I],richText:et[I]}}function j(I,D){var C='<div style="clear:both"></div>',M="margin: "+D+"px 0 0";return'<div style="'+M+";"+gt+';">'+I+C+"</div>"}function rt(I,D,C){var M=D?"margin-left:2px":"";return'<span style="'+C+";"+M+'">'+(0,N.F1)(I)+"</span>"}function $(I,D,C,M){var T=C?"10px":"20px",A=D?"float:right;margin-left:"+T:"";return I=(0,ct.kJ)(I)?I:[I],'<span style="'+A+";"+M+'">'+(0,ct.UI)(I,function(L){return(0,N.F1)(L)}).join("&nbsp;&nbsp;")+"</span>"}function O(I,D,C){return I.markupStyleCreator.wrapRichTextStyle(D,C)}function X(I,D,C,M,T){var A=[T],L=M?10:20;return C&&A.push({padding:[0,0,0,L],align:"right"}),I.markupStyleCreator.wrapRichTextStyle((0,ct.kJ)(D)?D.join("  "):D,A)}function Q(I,D){var C=I.getData().getItemVisual(D,"style"),M=C[I.visualDrawType];return(0,N.Lz)(M)}function k(I,D){var C=I.get("padding");return C??(D==="richText"?[8,10]:10)}var V=function(){function I(){this.richTextStyles={},this._nextStyleNameId=(0,dt.jj)()}return I.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},I.prototype.makeTooltipMarker=function(D,C,M){var T=M==="richText"?this._generateStyleName():null,A=(0,N.A0)({color:C,type:D,renderMode:M,markerId:T});return(0,ct.HD)(A)?A:(this.richTextStyles[T]=A.style,A.content)},I.prototype.wrapRichTextStyle=function(D,C){var M={};(0,ct.kJ)(C)?(0,ct.S6)(C,function(A){return(0,ct.l7)(M,A)}):(0,ct.l7)(M,C);var T=this._generateStyleName();return this.richTextStyles[T]=M,"{"+T+"|"+D+"}"},I}()},12950:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return I}});var N=F(33051),ct=F(85669),K=F(80423),dt=F(32234),gt=F(57947),vt=(0,dt.Yf)();function it(D){return D.type==="category"?H(D):G(D)}function et(D,C){return D.type==="category"?at(D,C):{ticks:N.UI(D.scale.getTicks(),function(M){return M.value})}}function H(D){var C=D.getLabelModel(),M=J(D,C);return!C.get("show")||D.scale.isBlank()?{labels:[],labelCategoryInterval:M.labelCategoryInterval}:M}function J(D,C){var M=U(D,"labels"),T=(0,gt.rk)(C),A=W(M,T);if(A)return A;var L,Z;return N.mf(T)?L=O(D,T):(Z=T==="auto"?g(D):T,L=$(D,Z)),lt(M,T,{labels:L,labelCategoryInterval:Z})}function at(D,C){var M=U(D,"ticks"),T=(0,gt.rk)(C),A=W(M,T);if(A)return A;var L,Z;if((!C.get("show")||D.scale.isBlank())&&(L=[]),N.mf(T))L=O(D,T,!0);else if(T==="auto"){var z=J(D,D.getLabelModel());Z=z.labelCategoryInterval,L=N.UI(z.labels,function(ut){return ut.tickValue})}else Z=T,L=$(D,Z,!0);return lt(M,T,{ticks:L,tickCategoryInterval:Z})}function G(D){var C=D.scale.getTicks(),M=(0,gt.J9)(D);return{labels:N.UI(C,function(T,A){return{level:T.level,formattedLabel:M(T,A),rawLabel:D.scale.getLabel(T),tickValue:T.value}})}}function U(D,C){return vt(D)[C]||(vt(D)[C]=[])}function W(D,C){for(var M=0;M<D.length;M++)if(D[M].key===C)return D[M].value}function lt(D,C,M){return D.push({key:C,value:M}),M}function g(D){var C=vt(D).autoInterval;return C??(vt(D).autoInterval=D.calculateCategoryInterval())}function j(D){var C=rt(D),M=(0,gt.J9)(D),T=(C.axisRotate-C.labelRotate)/180*Math.PI,A=D.scale,L=A.getExtent(),Z=A.count();if(L[1]-L[0]<1)return 0;var z=1;Z>40&&(z=Math.max(1,Math.floor(Z/40)));for(var ut=L[0],ot=D.dataToCoord(ut+1)-D.dataToCoord(ut),ht=Math.abs(ot*Math.cos(T)),tt=Math.abs(ot*Math.sin(T)),ft=0,St=0;ut<=L[1];ut+=z){var st=0,xt=0,wt=K.lP(M({value:ut}),C.font,"center","top");st=wt.width*1.3,xt=wt.height*1.3,ft=Math.max(ft,st,7),St=Math.max(St,xt,7)}var Dt=ft/ht,It=St/tt;isNaN(Dt)&&(Dt=1/0),isNaN(It)&&(It=1/0);var Et=Math.max(0,Math.floor(Math.min(Dt,It))),zt=vt(D.model),Bt=D.getExtent(),Ht=zt.lastAutoInterval,$t=zt.lastTickCount;return Ht!=null&&$t!=null&&Math.abs(Ht-Et)<=1&&Math.abs($t-Z)<=1&&Ht>Et&&zt.axisExtent0===Bt[0]&&zt.axisExtent1===Bt[1]?Et=Ht:(zt.lastTickCount=Z,zt.lastAutoInterval=Et,zt.axisExtent0=Bt[0],zt.axisExtent1=Bt[1]),Et}function rt(D){var C=D.getLabelModel();return{axisRotate:D.getRotate?D.getRotate():D.isHorizontal&&!D.isHorizontal()?90:0,labelRotate:C.get("rotate")||0,font:C.getFont()}}function $(D,C,M){var T=(0,gt.J9)(D),A=D.scale,L=A.getExtent(),Z=D.getLabelModel(),z=[],ut=Math.max((C||0)+1,1),ot=L[0],ht=A.count();ot!==0&&ut>1&&ht/ut>2&&(ot=Math.round(Math.ceil(ot/ut)*ut));var tt=(0,gt.WY)(D),ft=Z.get("showMinLabel")||tt,St=Z.get("showMaxLabel")||tt;ft&&ot!==L[0]&&xt(L[0]);for(var st=ot;st<=L[1];st+=ut)xt(st);St&&st-ut!==L[1]&&xt(L[1]);function xt(wt){var Dt={value:wt};z.push(M?wt:{formattedLabel:T(Dt),rawLabel:A.getLabel(Dt),tickValue:wt})}return z}function O(D,C,M){var T=D.scale,A=(0,gt.J9)(D),L=[];return N.S6(T.getTicks(),function(Z){var z=T.getLabel(Z),ut=Z.value;C(Z.value,z)&&L.push(M?ut:{formattedLabel:A(Z),rawLabel:z,tickValue:ut})}),L}var X=[0,1],Q=function(){function D(C,M,T){this.onBand=!1,this.inverse=!1,this.dim=C,this.scale=M,this._extent=T||[0,0]}return D.prototype.contain=function(C){var M=this._extent,T=Math.min(M[0],M[1]),A=Math.max(M[0],M[1]);return C>=T&&C<=A},D.prototype.containData=function(C){return this.scale.contain(C)},D.prototype.getExtent=function(){return this._extent.slice()},D.prototype.getPixelPrecision=function(C){return(0,ct.M9)(C||this.scale.getExtent(),this._extent)},D.prototype.setExtent=function(C,M){var T=this._extent;T[0]=C,T[1]=M},D.prototype.dataToCoord=function(C,M){var T=this._extent,A=this.scale;return C=A.normalize(C),this.onBand&&A.type==="ordinal"&&(T=T.slice(),k(T,A.count())),(0,ct.NU)(C,X,T,M)},D.prototype.coordToData=function(C,M){var T=this._extent,A=this.scale;this.onBand&&A.type==="ordinal"&&(T=T.slice(),k(T,A.count()));var L=(0,ct.NU)(C,T,X,M);return this.scale.scale(L)},D.prototype.pointToData=function(C,M){},D.prototype.getTicksCoords=function(C){C=C||{};var M=C.tickModel||this.getTickModel(),T=et(this,M),A=T.ticks,L=(0,N.UI)(A,function(z){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(z):z),tickValue:z}},this),Z=M.get("alignWithLabel");return V(this,L,Z,C.clamp),L},D.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var C=this.model.getModel("minorTick"),M=C.get("splitNumber");M>0&&M<100||(M=5);var T=this.scale.getMinorTicks(M),A=(0,N.UI)(T,function(L){return(0,N.UI)(L,function(Z){return{coord:this.dataToCoord(Z),tickValue:Z}},this)},this);return A},D.prototype.getViewLabels=function(){return it(this).labels},D.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},D.prototype.getTickModel=function(){return this.model.getModel("axisTick")},D.prototype.getBandWidth=function(){var C=this._extent,M=this.scale.getExtent(),T=M[1]-M[0]+(this.onBand?1:0);T===0&&(T=1);var A=Math.abs(C[1]-C[0]);return Math.abs(A)/T},D.prototype.calculateCategoryInterval=function(){return j(this)},D}();function k(D,C){var M=D[1]-D[0],T=C,A=M/T/2;D[0]+=A,D[1]-=A}function V(D,C,M,T){var A=C.length;if(!D.onBand||M||!A)return;var L=D.getExtent(),Z,z;if(A===1)C[0].coord=L[0],Z=C[1]={coord:L[0]};else{var ut=C[A-1].tickValue-C[0].tickValue,ot=(C[A-1].coord-C[0].coord)/ut;(0,N.S6)(C,function(St){St.coord-=ot/2});var ht=D.scale.getExtent();z=1+ht[1]-C[A-1].tickValue,Z={coord:C[A-1].coord+ot*z},C.push(Z)}var tt=L[0]>L[1];ft(C[0].coord,L[0])&&(T?C[0].coord=L[0]:C.shift()),T&&ft(L[0],C[0].coord)&&C.unshift({coord:L[0]}),ft(L[1],Z.coord)&&(T?Z.coord=L[1]:C.pop()),T&&ft(Z.coord,L[1])&&C.push({coord:L[1]});function ft(St,st){return St=(0,ct.NM)(St),st=(0,ct.NM)(st),tt?St>st:St<st}}var I=Q},57947:function(Ce,Jt,F){"use strict";F.d(Jt,{aG:function(){return C},Do:function(){return L},DX:function(){return A},PY:function(){return ot},rk:function(){return z},Xv:function(){return V},Yb:function(){return M},J9:function(){return T},Jk:function(){return D},WY:function(){return ut},AH:function(){return ht}});var N=F(33051),ct=F(85043),K=F(70103),dt=F(60379),gt=F(79093),vt=F(60479),it=F(61618),et=F(70655),H=F(85669),J=F(65021),at=dt.Z.prototype,G=K.Z.prototype,U=H.NM,W=Math.floor,lt=Math.ceil,g=Math.pow,j=Math.log,rt=function(tt){(0,et.ZT)(ft,tt);function ft(){var St=tt!==null&&tt.apply(this,arguments)||this;return St.type="log",St.base=10,St._originalScale=new K.Z,St._interval=0,St}return ft.prototype.getTicks=function(St){var st=this._originalScale,xt=this._extent,wt=st.getExtent(),Dt=G.getTicks.call(this,St);return N.UI(Dt,function(It){var Et=It.value,zt=H.NM(g(this.base,Et));return zt=Et===xt[0]&&this._fixMin?O(zt,wt[0]):zt,zt=Et===xt[1]&&this._fixMax?O(zt,wt[1]):zt,{value:zt}},this)},ft.prototype.setExtent=function(St,st){var xt=this.base;St=j(St)/j(xt),st=j(st)/j(xt),G.setExtent.call(this,St,st)},ft.prototype.getExtent=function(){var St=this.base,st=at.getExtent.call(this);st[0]=g(St,st[0]),st[1]=g(St,st[1]);var xt=this._originalScale,wt=xt.getExtent();return this._fixMin&&(st[0]=O(st[0],wt[0])),this._fixMax&&(st[1]=O(st[1],wt[1])),st},ft.prototype.unionExtent=function(St){this._originalScale.unionExtent(St);var st=this.base;St[0]=j(St[0])/j(st),St[1]=j(St[1])/j(st),at.unionExtent.call(this,St)},ft.prototype.unionExtentFromData=function(St,st){this.unionExtent(St.getApproximateExtent(st))},ft.prototype.calcNiceTicks=function(St){St=St||10;var st=this._extent,xt=st[1]-st[0];if(!(xt===1/0||xt<=0)){var wt=H.Xd(xt),Dt=St/xt*wt;for(Dt<=.5&&(wt*=10);!isNaN(wt)&&Math.abs(wt)<1&&Math.abs(wt)>0;)wt*=10;var It=[H.NM(lt(st[0]/wt)*wt),H.NM(W(st[1]/wt)*wt)];this._interval=wt,this._niceExtent=It}},ft.prototype.calcNiceExtent=function(St){G.calcNiceExtent.call(this,St),this._fixMin=St.fixMin,this._fixMax=St.fixMax},ft.prototype.parse=function(St){return St},ft.prototype.contain=function(St){return St=j(St)/j(this.base),J.XS(St,this._extent)},ft.prototype.normalize=function(St){return St=j(St)/j(this.base),J.Fv(St,this._extent)},ft.prototype.scale=function(St){return St=J.bA(St,this._extent),g(this.base,St)},ft.type="log",ft}(dt.Z),$=rt.prototype;$.getMinorTicks=G.getMinorTicks,$.getLabel=G.getLabel;function O(tt,ft){return U(tt,H.p8(ft))}dt.Z.registerClass(rt);var X=rt,Q=F(99936),k=F(38986);function V(tt,ft){var St=tt.type,st=(0,k.Qw)(tt,ft,tt.getExtent()).calculate();tt.setBlank(st.isBlank);var xt=st.min,wt=st.max,Dt=ft.ecModel;if(Dt&&St==="time"){var It=(0,gt.Ge)("bar",Dt),Et=!1;if(N.S6(It,function(Ht){Et=Et||Ht.getBaseAxis()===ft.axis}),Et){var zt=(0,gt.My)(It),Bt=I(xt,wt,ft,zt);xt=Bt.min,wt=Bt.max}}return{extent:[xt,wt],fixMin:st.minFixed,fixMax:st.maxFixed}}function I(tt,ft,St,st){var xt=St.axis.getExtent(),wt=xt[1]-xt[0],Dt=(0,gt.G_)(st,St.axis);if(Dt===void 0)return{min:tt,max:ft};var It=1/0;N.S6(Dt,function(ee){It=Math.min(ee.offset,It)});var Et=-1/0;N.S6(Dt,function(ee){Et=Math.max(ee.offset+ee.width,Et)}),It=Math.abs(It),Et=Math.abs(Et);var zt=It+Et,Bt=ft-tt,Ht=1-(It+Et)/wt,$t=Bt/Ht-Bt;return ft+=$t*(Et/zt),tt-=$t*(It/zt),{min:tt,max:ft}}function D(tt,ft){var St=ft,st=V(tt,St),xt=st.extent,wt=St.get("splitNumber");tt instanceof X&&(tt.base=St.get("logBase"));var Dt=tt.type,It=St.get("interval"),Et=Dt==="interval"||Dt==="time";tt.setExtent(xt[0],xt[1]),tt.calcNiceExtent({splitNumber:wt,fixMin:st.fixMin,fixMax:st.fixMax,minInterval:Et?St.get("minInterval"):null,maxInterval:Et?St.get("maxInterval"):null}),It!=null&&tt.setInterval&&tt.setInterval(It)}function C(tt,ft){if(ft=ft||tt.get("type"),ft)switch(ft){case"category":return new ct.Z({ordinalMeta:tt.getOrdinalMeta?tt.getOrdinalMeta():tt.getCategories(),extent:[1/0,-1/0]});case"time":return new it.Z({locale:tt.ecModel.getLocaleModel(),useUTC:tt.ecModel.get("useUTC")});default:return new(dt.Z.getClass(ft)||K.Z)}}function M(tt){var ft=tt.scale.getExtent(),St=ft[0],st=ft[1];return!(St>0&&st>0||St<0&&st<0)}function T(tt){var ft=tt.getLabelModel().get("formatter"),St=tt.type==="category"?tt.scale.getExtent()[0]:null;return tt.scale.type==="time"?function(st){return function(xt,wt){return tt.scale.getFormattedLabel(xt,wt,st)}}(ft):N.HD(ft)?function(st){return function(xt){var wt=tt.scale.getLabel(xt),Dt=st.replace("{value}",wt??"");return Dt}}(ft):N.mf(ft)?function(st){return function(xt,wt){return St!=null&&(wt=xt.value-St),st(A(tt,xt),wt,xt.level!=null?{level:xt.level}:null)}}(ft):function(st){return tt.scale.getLabel(st)}}function A(tt,ft){return tt.type==="category"?tt.scale.getLabel(ft):ft.value}function L(tt){var ft=tt.model,St=tt.scale;if(!(!ft.get(["axisLabel","show"])||St.isBlank())){var st,xt,wt=St.getExtent();St instanceof ct.Z?xt=St.count():(st=St.getTicks(),xt=st.length);var Dt=tt.getLabelModel(),It=T(tt),Et,zt=1;xt>40&&(zt=Math.ceil(xt/40));for(var Bt=0;Bt<xt;Bt+=zt){var Ht=st?st[Bt]:{value:wt[0]+Bt},$t=It(Ht,Bt),ee=Dt.getTextRect($t),De=Z(ee,Dt.get("rotate")||0);Et?Et.union(De):Et=De}return Et}}function Z(tt,ft){var St=ft*Math.PI/180,st=tt.width,xt=tt.height,wt=st*Math.abs(Math.cos(St))+Math.abs(xt*Math.sin(St)),Dt=st*Math.abs(Math.sin(St))+Math.abs(xt*Math.cos(St)),It=new vt.Z(tt.x,tt.y,wt,Dt);return It}function z(tt){var ft=tt.get("interval");return ft??"auto"}function ut(tt){return tt.type==="category"&&z(tt.getLabelModel())===0}function ot(tt,ft){var St={};return N.S6(tt.mapDimensionsAll(ft),function(st){St[(0,Q.IR)(tt,st)]=!0}),N.XP(St)}function ht(tt,ft,St){ft&&N.S6(ot(ft,St),function(st){var xt=ft.getApproximateExtent(st);xt[0]<tt[0]&&(tt[0]=xt[0]),xt[1]>tt[1]&&(tt[1]=xt[1])})}},16650:function(Ce,Jt,F){"use strict";F.d(Jt,{W:function(){return N}});var N=function(){function ct(){}return ct.prototype.getNeedCrossZero=function(){var K=this.option;return!K.scale},ct.prototype.getCoordSysModel=function(){},ct}()},53907:function(Ce,Jt,F){"use strict";var N=F(33051),ct=function(){function K(dt){this.type="cartesian",this._dimList=[],this._axes={},this.name=dt||""}return K.prototype.getAxis=function(dt){return this._axes[dt]},K.prototype.getAxes=function(){return N.UI(this._dimList,function(dt){return this._axes[dt]},this)},K.prototype.getAxesByScale=function(dt){return dt=dt.toLowerCase(),N.hX(this.getAxes(),function(gt){return gt.scale.type===dt})},K.prototype.addAxis=function(dt){var gt=dt.dim;this._axes[gt]=dt,this._dimList.push(gt)},K}();Jt.Z=ct},64215:function(Ce,Jt,F){"use strict";F.d(Jt,{Im:function(){return lt},Ni:function(){return W},Qh:function(){return G},jM:function(){return U}});var N=F(70655),ct=F(60479),K=F(45280),dt=F(40765),gt=F(32892),vt=F(33051),it=[];function et(g,j){for(var rt=0;rt<g.length;rt++)K.Ne(g[rt],g[rt],j)}function H(g,j,rt,$){for(var O=0;O<g.length;O++){var X=g[O];$&&(X=$.project(X)),X&&isFinite(X[0])&&isFinite(X[1])&&(K.VV(j,j,X),K.Fp(rt,rt,X))}}function J(g){for(var j=0,rt=0,$=0,O=g.length,X=g[O-1][0],Q=g[O-1][1],k=0;k<O;k++){var V=g[k][0],I=g[k][1],D=X*I-V*Q;j+=D,rt+=(X+V)*D,$+=(Q+I)*D,X=V,Q=I}return j?[rt/j/3,$/j/3,j]:[g[0][0]||0,g[0][1]||0]}var at=function(){function g(j){this.name=j}return g.prototype.setCenter=function(j){this._center=j},g.prototype.getCenter=function(){var j=this._center;return j||(j=this._center=this.calcCenter()),j},g}(),G=function(){function g(j,rt){this.type="polygon",this.exterior=j,this.interiors=rt}return g}(),U=function(){function g(j){this.type="linestring",this.points=j}return g}(),W=function(g){(0,N.ZT)(j,g);function j(rt,$,O){var X=g.call(this,rt)||this;return X.type="geoJSON",X.geometries=$,X._center=O&&[O[0],O[1]],X}return j.prototype.calcCenter=function(){for(var rt=this.geometries,$,O=0,X=0;X<rt.length;X++){var Q=rt[X],k=Q.exterior,V=k&&k.length;V>O&&($=Q,O=V)}if($)return J($.exterior);var I=this.getBoundingRect();return[I.x+I.width/2,I.y+I.height/2]},j.prototype.getBoundingRect=function(rt){var $=this._rect;if($&&!rt)return $;var O=[1/0,1/0],X=[-1/0,-1/0],Q=this.geometries;return(0,vt.S6)(Q,function(k){k.type==="polygon"?H(k.exterior,O,X,rt):(0,vt.S6)(k.points,function(V){H(V,O,X,rt)})}),isFinite(O[0])&&isFinite(O[1])&&isFinite(X[0])&&isFinite(X[1])||(O[0]=O[1]=X[0]=X[1]=0),$=new ct.Z(O[0],O[1],X[0]-O[0],X[1]-O[1]),rt||(this._rect=$),$},j.prototype.contain=function(rt){var $=this.getBoundingRect(),O=this.geometries;if(!$.contain(rt[0],rt[1]))return!1;t:for(var X=0,Q=O.length;X<Q;X++){var k=O[X];if(k.type==="polygon"){var V=k.exterior,I=k.interiors;if(dt.X(V,rt[0],rt[1])){for(var D=0;D<(I?I.length:0);D++)if(dt.X(I[D],rt[0],rt[1]))continue t;return!0}}}return!1},j.prototype.transformTo=function(rt,$,O,X){var Q=this.getBoundingRect(),k=Q.width/Q.height;O?X||(X=O/k):O=k*X;for(var V=new ct.Z(rt,$,O,X),I=Q.calculateTransform(V),D=this.geometries,C=0;C<D.length;C++){var M=D[C];M.type==="polygon"?(et(M.exterior,I),(0,vt.S6)(M.interiors,function(T){et(T,I)})):(0,vt.S6)(M.points,function(T){et(T,I)})}Q=this._rect,Q.copy(V),this._center=[Q.x+Q.width/2,Q.y+Q.height/2]},j.prototype.cloneShallow=function(rt){rt==null&&(rt=this.name);var $=new j(rt,this.geometries,this._center);return $._rect=this._rect,$.transformTo=null,$},j}(at),lt=function(g){(0,N.ZT)(j,g);function j(rt,$){var O=g.call(this,rt)||this;return O.type="geoSVG",O._elOnlyForCalculate=$,O}return j.prototype.calcCenter=function(){for(var rt=this._elOnlyForCalculate,$=rt.getBoundingRect(),O=[$.x+$.width/2,$.y+$.height/2],X=gt.yR(it),Q=rt;Q&&!Q.isGeoSVGGraphicRoot;)gt.dC(X,Q.getLocalTransform(),X),Q=Q.parent;return gt.U_(X,X),K.Ne(O,O,X),O},j}(at)},14901:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return ct}});var N={\u5357\u6D77\u8BF8\u5C9B:[32,80],\u5E7F\u4E1C:[0,-10],\u9999\u6E2F:[10,5],\u6FB3\u95E8:[-10,10],\u5929\u6D25:[5,5]};function ct(K,dt){if(K==="china"){var gt=N[dt.name];if(gt){var vt=dt.getCenter();vt[0]+=gt[0]/10.5,vt[1]+=-gt[1]/(10.5/.75),dt.setCenter(vt)}}}},76672:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return vt}});var N=F(33051),ct=F(64215);function K(it){if(!it.UTF8Encoding)return it;var et=it,H=et.UTF8Scale;H==null&&(H=1024);var J=et.features;return N.S6(J,function(at){var G=at.geometry,U=G.encodeOffsets,W=G.coordinates;if(!!U)switch(G.type){case"LineString":G.coordinates=gt(W,U,H);break;case"Polygon":dt(W,U,H);break;case"MultiLineString":dt(W,U,H);break;case"MultiPolygon":N.S6(W,function(lt,g){return dt(lt,U[g],H)})}}),et.UTF8Encoding=!1,et}function dt(it,et,H){for(var J=0;J<it.length;J++)it[J]=gt(it[J],et[J],H)}function gt(it,et,H){for(var J=[],at=et[0],G=et[1],U=0;U<it.length;U+=2){var W=it.charCodeAt(U)-64,lt=it.charCodeAt(U+1)-64;W=W>>1^-(W&1),lt=lt>>1^-(lt&1),W+=at,lt+=G,at=W,G=lt,J.push([W/H,lt/H])}return J}function vt(it,et){return it=K(it),N.UI(N.hX(it.features,function(H){return H.geometry&&H.properties&&H.geometry.coordinates.length>0}),function(H){var J=H.properties,at=H.geometry,G=[];switch(at.type){case"Polygon":var U=at.coordinates;G.push(new ct.Qh(U[0],U.slice(1)));break;case"MultiPolygon":N.S6(at.coordinates,function(lt){lt[0]&&G.push(new ct.Qh(lt[0],lt.slice(1)))});break;case"LineString":G.push(new ct.jM([at.coordinates]));break;case"MultiLineString":G.push(new ct.jM(at.coordinates))}var W=new ct.Ni(J[et||"name"],G,J.cp);return W.properties=J,W})}},38986:function(Ce,Jt,F){"use strict";F.d(Jt,{Qw:function(){return vt}});var N=F(33051),ct=F(80423),K=function(){function et(H,J,at){this._prepareParams(H,J,at)}return et.prototype._prepareParams=function(H,J,at){at[1]<at[0]&&(at=[NaN,NaN]),this._dataMin=at[0],this._dataMax=at[1];var G=this._isOrdinal=H.type==="ordinal";this._needCrossZero=H.type==="interval"&&J.getNeedCrossZero&&J.getNeedCrossZero();var U=this._modelMinRaw=J.get("min",!0);(0,N.mf)(U)?this._modelMinNum=it(H,U({min:at[0],max:at[1]})):U!=="dataMin"&&(this._modelMinNum=it(H,U));var W=this._modelMaxRaw=J.get("max",!0);if((0,N.mf)(W)?this._modelMaxNum=it(H,W({min:at[0],max:at[1]})):W!=="dataMax"&&(this._modelMaxNum=it(H,W)),G)this._axisDataLen=J.getCategories().length;else{var lt=J.get("boundaryGap"),g=(0,N.kJ)(lt)?lt:[lt||0,lt||0];typeof g[0]=="boolean"||typeof g[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[(0,ct.GM)(g[0],1),(0,ct.GM)(g[1],1)]}},et.prototype.calculate=function(){var H=this._isOrdinal,J=this._dataMin,at=this._dataMax,G=this._axisDataLen,U=this._boundaryGapInner,W=H?null:at-J||Math.abs(J),lt=this._modelMinRaw==="dataMin"?J:this._modelMinNum,g=this._modelMaxRaw==="dataMax"?at:this._modelMaxNum,j=lt!=null,rt=g!=null;lt==null&&(lt=H?G?0:NaN:J-U[0]*W),g==null&&(g=H?G?G-1:NaN:at+U[1]*W),(lt==null||!isFinite(lt))&&(lt=NaN),(g==null||!isFinite(g))&&(g=NaN);var $=(0,N.Bu)(lt)||(0,N.Bu)(g)||H&&!G;this._needCrossZero&&(lt>0&&g>0&&!j&&(lt=0),lt<0&&g<0&&!rt&&(g=0));var O=this._determinedMin,X=this._determinedMax;return O!=null&&(lt=O,j=!0),X!=null&&(g=X,rt=!0),{min:lt,max:g,minFixed:j,maxFixed:rt,isBlank:$}},et.prototype.modifyDataMinMax=function(H,J){this[gt[H]]=J},et.prototype.setDeterminedMinMax=function(H,J){var at=dt[H];this[at]=J},et.prototype.freeze=function(){this.frozen=!0},et}(),dt={min:"_determinedMin",max:"_determinedMax"},gt={min:"_dataMin",max:"_dataMax"};function vt(et,H,J){var at=et.rawExtentInfo;return at||(at=new K(et,H,J),et.rawExtentInfo=at,at)}function it(et,H){return H==null?null:(0,N.Bu)(H)?NaN:et.parse(H)}},54267:function(Ce,Jt,F){"use strict";var N=F(33051),ct={},K=function(){function dt(){this._coordinateSystems=[]}return dt.prototype.create=function(gt,vt){var it=[];N.S6(ct,function(et,H){var J=et.create(gt,vt);it=it.concat(J||[])}),this._coordinateSystems=it},dt.prototype.update=function(gt,vt){N.S6(this._coordinateSystems,function(it){it.update&&it.update(gt,vt)})},dt.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},dt.register=function(gt,vt){ct[gt]=vt},dt.get=function(gt){return ct[gt]},dt}();Jt.Z=K},81615:function(Ce,Jt,F){"use strict";F.d(Jt,{Hr:function(){return Es},wL:function(){return Kr},FU:function(){return bi},S1:function(){return Bs},zl:function(){return ga},RS:function(){return ia},qR:function(){return zo},yn:function(){return uo},je:function(){return Hi},sq:function(){return lo},Br:function(){return gf},ds:function(){return Fo},Pu:function(){return Wa},OB:function(){return Pn},YK:function(){return Un},Og:function(){return aa}});var N=F(70655),ct=F(99448),K=F(33051),dt=F(66387),gt=F(19455),vt=F(23510),it=F(32234),et=F(1497),H=F(98071),J="";typeof navigator<"u"&&(J=navigator.platform||"");var at="rgba(0, 0, 0, 0.2)",G={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:at,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:at,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:at,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:at,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:at,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:at,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:J.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},U=F(61772),W=F(82468),lt=F(75494),g,j,rt,$="\0_ec_inner",O=1,X={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},Q={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},k={};function V(Nt){each(Nt,function(Wt,Rt){if(!ComponentModel.hasClass(Rt)){var Vt=X[Rt];Vt&&!k[Vt]&&(error("Component "+Rt+` is used but not imported.
import { `+Vt+` } from 'echarts/components';
echarts.use([`+Vt+"]);"),k[Vt]=!0)}})}var I=function(Nt){(0,N.ZT)(Wt,Nt);function Wt(){return Nt!==null&&Nt.apply(this,arguments)||this}return Wt.prototype.init=function(Rt,Vt,Zt,oe,de,ke){oe=oe||{},this.option=null,this._theme=new et.Z(oe),this._locale=new et.Z(de),this._optionManager=ke},Wt.prototype.setOption=function(Rt,Vt,Zt){var oe=A(Vt);this._optionManager.setOption(Rt,Zt,oe),this._resetOption(null,oe)},Wt.prototype.resetOption=function(Rt,Vt){return this._resetOption(Rt,A(Vt))},Wt.prototype._resetOption=function(Rt,Vt){var Zt=!1,oe=this._optionManager;if(!Rt||Rt==="recreate"){var de=oe.mountOption(Rt==="recreate");!this.option||Rt==="recreate"?rt(this,de):(this.restoreData(),this._mergeOption(de,Vt)),Zt=!0}if((Rt==="timeline"||Rt==="media")&&this.restoreData(),!Rt||Rt==="recreate"||Rt==="timeline"){var ke=oe.getTimelineOption(this);ke&&(Zt=!0,this._mergeOption(ke,Vt))}if(!Rt||Rt==="recreate"||Rt==="media"){var Ge=oe.getMediaOption(this);Ge.length&&(0,K.S6)(Ge,function(Je){Zt=!0,this._mergeOption(Je,Vt)},this)}return Zt},Wt.prototype.mergeOption=function(Rt){this._mergeOption(Rt,null)},Wt.prototype._mergeOption=function(Rt,Vt){var Zt=this.option,oe=this._componentsMap,de=this._componentsCount,ke=[],Ge=(0,K.kW)(),Je=Vt&&Vt.replaceMergeMainTypeMap;(0,U.md)(this),(0,K.S6)(Rt,function(ue,Me){ue!=null&&(H.Z.hasClass(Me)?Me&&(ke.push(Me),Ge.set(Me,!0)):Zt[Me]=Zt[Me]==null?(0,K.d9)(ue):(0,K.TS)(Zt[Me],ue,!0))}),Je&&Je.each(function(ue,Me){H.Z.hasClass(Me)&&!Ge.get(Me)&&(ke.push(Me),Ge.set(Me,!0))}),H.Z.topologicalTravel(ke,H.Z.getAllClassMainTypes(),ar,this);function ar(ue){var Me=(0,W.R)(this,ue,it.kF(Rt[ue])),ye=oe.get(ue),ze=ye?Je&&Je.get(ue)?"replaceMerge":"normalMerge":"replaceAll",Ze=it.ab(ye,Me,ze);it.O0(Ze,ue,H.Z),Zt[ue]=null,oe.set(ue,null),de.set(ue,0);var er=[],sr=[],yr=0,gr,Gr;(0,K.S6)(Ze,function(tn,Dr){var dn=tn.existing,_i=tn.newOption;if(!_i)dn&&(dn.mergeOption({},this),dn.optionUpdated({},!1));else{var bn=ue==="series",Fi=H.Z.getClass(ue,tn.keyInfo.subType,!bn);if(!Fi){if(!1)var Ca,pu;return}if(ue==="tooltip"){if(gr)return;gr=!0}if(dn&&dn.constructor===Fi)dn.name=tn.keyInfo.name,dn.mergeOption(_i,this),dn.optionUpdated(_i,!1);else{var zs=(0,K.l7)({componentIndex:Dr},tn.keyInfo);dn=new Fi(_i,this,this,zs),(0,K.l7)(dn,zs),tn.brandNew&&(dn.__requireNewView=!0),dn.init(_i,this,this),dn.optionUpdated(null,!0)}}dn?(er.push(dn.option),sr.push(dn),yr++):(er.push(void 0),sr.push(void 0))},this),Zt[ue]=er,oe.set(ue,sr),de.set(ue,yr),ue==="series"&&g(this)}this._seriesIndices||g(this)},Wt.prototype.getOption=function(){var Rt=(0,K.d9)(this.option);return(0,K.S6)(Rt,function(Vt,Zt){if(H.Z.hasClass(Zt)){for(var oe=it.kF(Vt),de=oe.length,ke=!1,Ge=de-1;Ge>=0;Ge--)oe[Ge]&&!it.lY(oe[Ge])?ke=!0:(oe[Ge]=null,!ke&&de--);oe.length=de,Rt[Zt]=oe}}),delete Rt[$],Rt},Wt.prototype.getTheme=function(){return this._theme},Wt.prototype.getLocaleModel=function(){return this._locale},Wt.prototype.setUpdatePayload=function(Rt){this._payload=Rt},Wt.prototype.getUpdatePayload=function(){return this._payload},Wt.prototype.getComponent=function(Rt,Vt){var Zt=this._componentsMap.get(Rt);if(Zt){var oe=Zt[Vt||0];if(oe)return oe;if(Vt==null){for(var de=0;de<Zt.length;de++)if(Zt[de])return Zt[de]}}},Wt.prototype.queryComponents=function(Rt){var Vt=Rt.mainType;if(!Vt)return[];var Zt=Rt.index,oe=Rt.id,de=Rt.name,ke=this._componentsMap.get(Vt);if(!ke||!ke.length)return[];var Ge;return Zt!=null?(Ge=[],(0,K.S6)(it.kF(Zt),function(Je){ke[Je]&&Ge.push(ke[Je])})):oe!=null?Ge=M("id",oe,ke):de!=null?Ge=M("name",de,ke):Ge=(0,K.hX)(ke,function(Je){return!!Je}),T(Ge,Rt)},Wt.prototype.findComponents=function(Rt){var Vt=Rt.query,Zt=Rt.mainType,oe=ke(Vt),de=oe?this.queryComponents(oe):(0,K.hX)(this._componentsMap.get(Zt),function(Je){return!!Je});return Ge(T(de,Rt));function ke(Je){var ar=Zt+"Index",ue=Zt+"Id",Me=Zt+"Name";return Je&&(Je[ar]!=null||Je[ue]!=null||Je[Me]!=null)?{mainType:Zt,index:Je[ar],id:Je[ue],name:Je[Me]}:null}function Ge(Je){return Rt.filter?(0,K.hX)(Je,Rt.filter):Je}},Wt.prototype.eachComponent=function(Rt,Vt,Zt){var oe=this._componentsMap;if((0,K.mf)(Rt)){var de=Vt,ke=Rt;oe.each(function(ue,Me){for(var ye=0;ue&&ye<ue.length;ye++){var ze=ue[ye];ze&&ke.call(de,Me,ze,ze.componentIndex)}})}else for(var Ge=(0,K.HD)(Rt)?oe.get(Rt):(0,K.Kn)(Rt)?this.findComponents(Rt):null,Je=0;Ge&&Je<Ge.length;Je++){var ar=Ge[Je];ar&&Vt.call(Zt,ar,ar.componentIndex)}},Wt.prototype.getSeriesByName=function(Rt){var Vt=it.U5(Rt,null);return(0,K.hX)(this._componentsMap.get("series"),function(Zt){return!!Zt&&Vt!=null&&Zt.name===Vt})},Wt.prototype.getSeriesByIndex=function(Rt){return this._componentsMap.get("series")[Rt]},Wt.prototype.getSeriesByType=function(Rt){return(0,K.hX)(this._componentsMap.get("series"),function(Vt){return!!Vt&&Vt.subType===Rt})},Wt.prototype.getSeries=function(){return(0,K.hX)(this._componentsMap.get("series"),function(Rt){return!!Rt})},Wt.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},Wt.prototype.eachSeries=function(Rt,Vt){j(this),(0,K.S6)(this._seriesIndices,function(Zt){var oe=this._componentsMap.get("series")[Zt];Rt.call(Vt,oe,Zt)},this)},Wt.prototype.eachRawSeries=function(Rt,Vt){(0,K.S6)(this._componentsMap.get("series"),function(Zt){Zt&&Rt.call(Vt,Zt,Zt.componentIndex)})},Wt.prototype.eachSeriesByType=function(Rt,Vt,Zt){j(this),(0,K.S6)(this._seriesIndices,function(oe){var de=this._componentsMap.get("series")[oe];de.subType===Rt&&Vt.call(Zt,de,oe)},this)},Wt.prototype.eachRawSeriesByType=function(Rt,Vt,Zt){return(0,K.S6)(this.getSeriesByType(Rt),Vt,Zt)},Wt.prototype.isSeriesFiltered=function(Rt){return j(this),this._seriesIndicesMap.get(Rt.componentIndex)==null},Wt.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},Wt.prototype.filterSeries=function(Rt,Vt){j(this);var Zt=[];(0,K.S6)(this._seriesIndices,function(oe){var de=this._componentsMap.get("series")[oe];Rt.call(Vt,de,oe)&&Zt.push(oe)},this),this._seriesIndices=Zt,this._seriesIndicesMap=(0,K.kW)(Zt)},Wt.prototype.restoreData=function(Rt){g(this);var Vt=this._componentsMap,Zt=[];Vt.each(function(oe,de){H.Z.hasClass(de)&&Zt.push(de)}),H.Z.topologicalTravel(Zt,H.Z.getAllClassMainTypes(),function(oe){(0,K.S6)(Vt.get(oe),function(de){de&&(oe!=="series"||!D(de,Rt))&&de.restoreData()})})},Wt.internalField=function(){g=function(Rt){var Vt=Rt._seriesIndices=[];(0,K.S6)(Rt._componentsMap.get("series"),function(Zt){Zt&&Vt.push(Zt.componentIndex)}),Rt._seriesIndicesMap=(0,K.kW)(Vt)},j=function(Rt){},rt=function(Rt,Vt){Rt.option={},Rt.option[$]=O,Rt._componentsMap=(0,K.kW)({series:[]}),Rt._componentsCount=(0,K.kW)();var Zt=Vt.aria;(0,K.Kn)(Zt)&&Zt.enabled==null&&(Zt.enabled=!0),C(Vt,Rt._theme.option),(0,K.TS)(Vt,G,!1),Rt._mergeOption(Vt,null)}}(),Wt}(et.Z);function D(Nt,Wt){if(Wt){var Rt=Wt.seriesIndex,Vt=Wt.seriesId,Zt=Wt.seriesName;return Rt!=null&&Nt.componentIndex!==Rt||Vt!=null&&Nt.id!==Vt||Zt!=null&&Nt.name!==Zt}}function C(Nt,Wt){var Rt=Nt.color&&!Nt.colorLayer;(0,K.S6)(Wt,function(Vt,Zt){Zt==="colorLayer"&&Rt||H.Z.hasClass(Zt)||(typeof Vt=="object"?Nt[Zt]=Nt[Zt]?(0,K.TS)(Nt[Zt],Vt,!1):(0,K.d9)(Vt):Nt[Zt]==null&&(Nt[Zt]=Vt))})}function M(Nt,Wt,Rt){if((0,K.kJ)(Wt)){var Vt=(0,K.kW)();return(0,K.S6)(Wt,function(oe){if(oe!=null){var de=it.U5(oe,null);de!=null&&Vt.set(oe,!0)}}),(0,K.hX)(Rt,function(oe){return oe&&Vt.get(oe[Nt])})}else{var Zt=it.U5(Wt,null);return(0,K.hX)(Rt,function(oe){return oe&&Zt!=null&&oe[Nt]===Zt})}}function T(Nt,Wt){return Wt.hasOwnProperty("subType")?(0,K.hX)(Nt,function(Rt){return Rt&&Rt.subType===Wt.subType}):Nt}function A(Nt){var Wt=(0,K.kW)();return Nt&&(0,K.S6)(it.kF(Nt.replaceMerge),function(Rt){Wt.set(Rt,!0)}),{replaceMergeMainTypeMap:Wt}}(0,K.jB)(I,lt._);var L=I,Z=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],z=function(){function Nt(Wt){K.S6(Z,function(Rt){this[Rt]=K.ak(Wt[Rt],Wt)},this)}return Nt}(),ut=z,ot=F(54267),ht=/^(min|max)?(.+)$/,tt=function(){function Nt(Wt){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=Wt}return Nt.prototype.setOption=function(Wt,Rt,Vt){Wt&&((0,K.S6)((0,it.kF)(Wt.series),function(de){de&&de.data&&(0,K.fU)(de.data)&&(0,K.s7)(de.data)}),(0,K.S6)((0,it.kF)(Wt.dataset),function(de){de&&de.source&&(0,K.fU)(de.source)&&(0,K.s7)(de.source)})),Wt=(0,K.d9)(Wt);var Zt=this._optionBackup,oe=ft(Wt,Rt,!Zt);this._newBaseOption=oe.baseOption,Zt?(oe.timelineOptions.length&&(Zt.timelineOptions=oe.timelineOptions),oe.mediaList.length&&(Zt.mediaList=oe.mediaList),oe.mediaDefault&&(Zt.mediaDefault=oe.mediaDefault)):this._optionBackup=oe},Nt.prototype.mountOption=function(Wt){var Rt=this._optionBackup;return this._timelineOptions=Rt.timelineOptions,this._mediaList=Rt.mediaList,this._mediaDefault=Rt.mediaDefault,this._currentMediaIndices=[],(0,K.d9)(Wt?Rt.baseOption:this._newBaseOption)},Nt.prototype.getTimelineOption=function(Wt){var Rt,Vt=this._timelineOptions;if(Vt.length){var Zt=Wt.getComponent("timeline");Zt&&(Rt=(0,K.d9)(Vt[Zt.getCurrentIndex()]))}return Rt},Nt.prototype.getMediaOption=function(Wt){var Rt=this._api.getWidth(),Vt=this._api.getHeight(),Zt=this._mediaList,oe=this._mediaDefault,de=[],ke=[];if(!Zt.length&&!oe)return ke;for(var Ge=0,Je=Zt.length;Ge<Je;Ge++)St(Zt[Ge].query,Rt,Vt)&&de.push(Ge);return!de.length&&oe&&(de=[-1]),de.length&&!xt(de,this._currentMediaIndices)&&(ke=(0,K.UI)(de,function(ar){return(0,K.d9)(ar===-1?oe.option:Zt[ar].option)})),this._currentMediaIndices=de,ke},Nt}();function ft(Nt,Wt,Rt){var Vt=[],Zt,oe,de=Nt.baseOption,ke=Nt.timeline,Ge=Nt.options,Je=Nt.media,ar=!!Nt.media,ue=!!(Ge||ke||de&&de.timeline);de?(oe=de,oe.timeline||(oe.timeline=ke)):((ue||ar)&&(Nt.options=Nt.media=null),oe=Nt),ar&&(0,K.kJ)(Je)&&(0,K.S6)(Je,function(ye){ye&&ye.option&&(ye.query?Vt.push(ye):Zt||(Zt=ye))}),Me(oe),(0,K.S6)(Ge,function(ye){return Me(ye)}),(0,K.S6)(Vt,function(ye){return Me(ye.option)});function Me(ye){(0,K.S6)(Wt,function(ze){ze(ye,Rt)})}return{baseOption:oe,timelineOptions:Ge||[],mediaDefault:Zt,mediaList:Vt}}function St(Nt,Wt,Rt){var Vt={width:Wt,height:Rt,aspectratio:Wt/Rt},Zt=!0;return(0,K.S6)(Nt,function(oe,de){var ke=de.match(ht);if(!(!ke||!ke[1]||!ke[2])){var Ge=ke[1],Je=ke[2].toLowerCase();st(Vt[Je],oe,Ge)||(Zt=!1)}}),Zt}function st(Nt,Wt,Rt){return Rt==="min"?Nt>=Wt:Rt==="max"?Nt<=Wt:Nt===Wt}function xt(Nt,Wt){return Nt.join(",")===Wt.join(",")}var wt=tt,Dt=K.S6,It=K.Kn,Et=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function zt(Nt){var Wt=Nt&&Nt.itemStyle;if(!!Wt)for(var Rt=0,Vt=Et.length;Rt<Vt;Rt++){var Zt=Et[Rt],oe=Wt.normal,de=Wt.emphasis;oe&&oe[Zt]&&(Nt[Zt]=Nt[Zt]||{},Nt[Zt].normal?K.TS(Nt[Zt].normal,oe[Zt]):Nt[Zt].normal=oe[Zt],oe[Zt]=null),de&&de[Zt]&&(Nt[Zt]=Nt[Zt]||{},Nt[Zt].emphasis?K.TS(Nt[Zt].emphasis,de[Zt]):Nt[Zt].emphasis=de[Zt],de[Zt]=null)}}function Bt(Nt,Wt,Rt){if(Nt&&Nt[Wt]&&(Nt[Wt].normal||Nt[Wt].emphasis)){var Vt=Nt[Wt].normal,Zt=Nt[Wt].emphasis;Vt&&(Rt?(Nt[Wt].normal=Nt[Wt].emphasis=null,K.ce(Nt[Wt],Vt)):Nt[Wt]=Vt),Zt&&(Nt.emphasis=Nt.emphasis||{},Nt.emphasis[Wt]=Zt,Zt.focus&&(Nt.emphasis.focus=Zt.focus),Zt.blurScope&&(Nt.emphasis.blurScope=Zt.blurScope))}}function Ht(Nt){Bt(Nt,"itemStyle"),Bt(Nt,"lineStyle"),Bt(Nt,"areaStyle"),Bt(Nt,"label"),Bt(Nt,"labelLine"),Bt(Nt,"upperLabel"),Bt(Nt,"edgeLabel")}function $t(Nt,Wt){var Rt=It(Nt)&&Nt[Wt],Vt=It(Rt)&&Rt.textStyle;if(Vt)for(var Zt=0,oe=it.Td.length;Zt<oe;Zt++){var de=it.Td[Zt];Vt.hasOwnProperty(de)&&(Rt[de]=Vt[de])}}function ee(Nt){Nt&&(Ht(Nt),$t(Nt,"label"),Nt.emphasis&&$t(Nt.emphasis,"label"))}function De(Nt){if(!!It(Nt)){zt(Nt),Ht(Nt),$t(Nt,"label"),$t(Nt,"upperLabel"),$t(Nt,"edgeLabel"),Nt.emphasis&&($t(Nt.emphasis,"label"),$t(Nt.emphasis,"upperLabel"),$t(Nt.emphasis,"edgeLabel"));var Wt=Nt.markPoint;Wt&&(zt(Wt),ee(Wt));var Rt=Nt.markLine;Rt&&(zt(Rt),ee(Rt));var Vt=Nt.markArea;Vt&&ee(Vt);var Zt=Nt.data;if(Nt.type==="graph"){Zt=Zt||Nt.nodes;var oe=Nt.links||Nt.edges;if(oe&&!K.fU(oe))for(var de=0;de<oe.length;de++)ee(oe[de]);K.S6(Nt.categories,function(Je){Ht(Je)})}if(Zt&&!K.fU(Zt))for(var de=0;de<Zt.length;de++)ee(Zt[de]);if(Wt=Nt.markPoint,Wt&&Wt.data)for(var ke=Wt.data,de=0;de<ke.length;de++)ee(ke[de]);if(Rt=Nt.markLine,Rt&&Rt.data)for(var Ge=Rt.data,de=0;de<Ge.length;de++)K.kJ(Ge[de])?(ee(Ge[de][0]),ee(Ge[de][1])):ee(Ge[de]);Nt.type==="gauge"?($t(Nt,"axisLabel"),$t(Nt,"title"),$t(Nt,"detail")):Nt.type==="treemap"?(Bt(Nt.breadcrumb,"itemStyle"),K.S6(Nt.levels,function(Je){Ht(Je)})):Nt.type==="tree"&&Ht(Nt.leaves)}}function Se(Nt){return K.kJ(Nt)?Nt:Nt?[Nt]:[]}function Be(Nt){return(K.kJ(Nt)?Nt[0]:Nt)||{}}function Ft(Nt,Wt){Dt(Se(Nt.series),function(Vt){It(Vt)&&De(Vt)});var Rt=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];Wt&&Rt.push("valueAxis","categoryAxis","logAxis","timeAxis"),Dt(Rt,function(Vt){Dt(Se(Nt[Vt]),function(Zt){Zt&&($t(Zt,"axisLabel"),$t(Zt.axisPointer,"label"))})}),Dt(Se(Nt.parallel),function(Vt){var Zt=Vt&&Vt.parallelAxisDefault;$t(Zt,"axisLabel"),$t(Zt&&Zt.axisPointer,"label")}),Dt(Se(Nt.calendar),function(Vt){Bt(Vt,"itemStyle"),$t(Vt,"dayLabel"),$t(Vt,"monthLabel"),$t(Vt,"yearLabel")}),Dt(Se(Nt.radar),function(Vt){$t(Vt,"name"),Vt.name&&Vt.axisName==null&&(Vt.axisName=Vt.name,delete Vt.name),Vt.nameGap!=null&&Vt.axisNameGap==null&&(Vt.axisNameGap=Vt.nameGap,delete Vt.nameGap)}),Dt(Se(Nt.geo),function(Vt){It(Vt)&&(ee(Vt),Dt(Se(Vt.regions),function(Zt){ee(Zt)}))}),Dt(Se(Nt.timeline),function(Vt){ee(Vt),Bt(Vt,"label"),Bt(Vt,"itemStyle"),Bt(Vt,"controlStyle",!0);var Zt=Vt.data;K.kJ(Zt)&&K.S6(Zt,function(oe){K.Kn(oe)&&(Bt(oe,"label"),Bt(oe,"itemStyle"))})}),Dt(Se(Nt.toolbox),function(Vt){Bt(Vt,"iconStyle"),Dt(Vt.feature,function(Zt){Bt(Zt,"iconStyle")})}),$t(Be(Nt.axisPointer),"label"),$t(Be(Nt.tooltip).axisPointer,"label")}function Tt(Nt,Wt){for(var Rt=Wt.split(","),Vt=Nt,Zt=0;Zt<Rt.length&&(Vt=Vt&&Vt[Rt[Zt]],Vt!=null);Zt++);return Vt}function At(Nt,Wt,Rt,Vt){for(var Zt=Wt.split(","),oe=Nt,de,ke=0;ke<Zt.length-1;ke++)de=Zt[ke],oe[de]==null&&(oe[de]={}),oe=oe[de];(Vt||oe[Zt[ke]]==null)&&(oe[Zt[ke]]=Rt)}function Kt(Nt){Nt&&(0,K.S6)(pe,function(Wt){Wt[0]in Nt&&!(Wt[1]in Nt)&&(Nt[Wt[1]]=Nt[Wt[0]])})}var pe=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Oe=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],Pe=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function vr(Nt){var Wt=Nt&&Nt.itemStyle;if(Wt)for(var Rt=0;Rt<Pe.length;Rt++){var Vt=Pe[Rt][1],Zt=Pe[Rt][0];Wt[Vt]!=null&&(Wt[Zt]=Wt[Vt])}}function Lr(Nt){!Nt||Nt.alignTo==="edge"&&Nt.margin!=null&&Nt.edgeDistance==null&&(Nt.edgeDistance=Nt.margin)}function nr(Nt){!Nt||Nt.downplay&&!Nt.blur&&(Nt.blur=Nt.downplay)}function qe(Nt){!Nt||Nt.focusNodeAdjacency!=null&&(Nt.emphasis=Nt.emphasis||{},Nt.emphasis.focus==null&&(Nt.emphasis.focus="adjacency"))}function lr(Nt,Wt){if(Nt)for(var Rt=0;Rt<Nt.length;Rt++)Wt(Nt[Rt]),Nt[Rt]&&lr(Nt[Rt].children,Wt)}function Yt(Nt,Wt){Ft(Nt,Wt),Nt.series=(0,it.kF)(Nt.series),(0,K.S6)(Nt.series,function(Rt){if(!!(0,K.Kn)(Rt)){var Vt=Rt.type;if(Vt==="line")Rt.clipOverflow!=null&&(Rt.clip=Rt.clipOverflow);else if(Vt==="pie"||Vt==="gauge"){Rt.clockWise!=null&&(Rt.clockwise=Rt.clockWise),Lr(Rt.label);var Zt=Rt.data;if(Zt&&!(0,K.fU)(Zt))for(var oe=0;oe<Zt.length;oe++)Lr(Zt[oe]);Rt.hoverOffset!=null&&(Rt.emphasis=Rt.emphasis||{},(Rt.emphasis.scaleSize=null)&&(Rt.emphasis.scaleSize=Rt.hoverOffset))}else if(Vt==="gauge"){var de=Tt(Rt,"pointer.color");de!=null&&At(Rt,"itemStyle.color",de)}else if(Vt==="bar"){vr(Rt),vr(Rt.backgroundStyle),vr(Rt.emphasis);var Zt=Rt.data;if(Zt&&!(0,K.fU)(Zt))for(var oe=0;oe<Zt.length;oe++)typeof Zt[oe]=="object"&&(vr(Zt[oe]),vr(Zt[oe]&&Zt[oe].emphasis))}else if(Vt==="sunburst"){var ke=Rt.highlightPolicy;ke&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis.focus||(Rt.emphasis.focus=ke)),nr(Rt),lr(Rt.data,nr)}else Vt==="graph"||Vt==="sankey"?qe(Rt):Vt==="map"&&(Rt.mapType&&!Rt.map&&(Rt.map=Rt.mapType),Rt.mapLocation&&(0,K.ce)(Rt,Rt.mapLocation));Rt.hoverAnimation!=null&&(Rt.emphasis=Rt.emphasis||{},Rt.emphasis&&Rt.emphasis.scale==null&&(Rt.emphasis.scale=Rt.hoverAnimation)),Kt(Rt)}}),Nt.dataRange&&(Nt.visualMap=Nt.dataRange),(0,K.S6)(Oe,function(Rt){var Vt=Nt[Rt];Vt&&((0,K.kJ)(Vt)||(Vt=[Vt]),(0,K.S6)(Vt,function(Zt){Kt(Zt)}))})}var le=F(85669);function we(Nt){var Wt=(0,K.kW)();Nt.eachSeries(function(Rt){var Vt=Rt.get("stack");if(Vt){var Zt=Wt.get(Vt)||Wt.set(Vt,[]),oe=Rt.getData(),de={stackResultDimension:oe.getCalculationInfo("stackResultDimension"),stackedOverDimension:oe.getCalculationInfo("stackedOverDimension"),stackedDimension:oe.getCalculationInfo("stackedDimension"),stackedByDimension:oe.getCalculationInfo("stackedByDimension"),isStackedByIndex:oe.getCalculationInfo("isStackedByIndex"),data:oe,seriesModel:Rt};if(!de.stackedDimension||!(de.isStackedByIndex||de.stackedByDimension))return;Zt.length&&oe.setCalculationInfo("stackedOnSeries",Zt[Zt.length-1].seriesModel),Zt.push(de)}}),Wt.each(_e)}function _e(Nt){(0,K.S6)(Nt,function(Wt,Rt){var Vt=[],Zt=[NaN,NaN],oe=[Wt.stackResultDimension,Wt.stackedOverDimension],de=Wt.data,ke=Wt.isStackedByIndex,Ge=Wt.seriesModel.get("stackStrategy")||"samesign";de.modify(oe,function(Je,ar,ue){var Me=de.get(Wt.stackedDimension,ue);if(isNaN(Me))return Zt;var ye,ze;ke?ze=de.getRawIndex(ue):ye=de.get(Wt.stackedByDimension,ue);for(var Ze=NaN,er=Rt-1;er>=0;er--){var sr=Nt[er];if(ke||(ze=sr.data.rawIndexOf(sr.stackedByDimension,ye)),ze>=0){var yr=sr.data.getByRawIndex(sr.stackResultDimension,ze);if(Ge==="all"||Ge==="positive"&&yr>0||Ge==="negative"&&yr<0||Ge==="samesign"&&Me>=0&&yr>0||Ge==="samesign"&&Me<=0&&yr<0){Me=(0,le.S$)(Me,yr),Ze=yr;break}}}return Vt[0]=Me,Vt[1]=Ze,Vt})})}var Ut=F(93321),Qt=F(33166),ie=F(75797),Ae=F(35151),He=F(44535),tr=F(29266),ce=F(327),Re=F(30106),Le=F(26357),Ke=F(270),Tr=F(59066),Nr=F(89887),Br=F(77515),rn=(0,it.Yf)(),Mn={itemStyle:(0,Tr.Z)(Nr.t,!0),lineStyle:(0,Tr.Z)(Br.v,!0)},Jr={lineStyle:"stroke",itemStyle:"fill"};function ei(Nt,Wt){var Rt=Nt.visualStyleMapper||Mn[Wt];return Rt||(console.warn("Unkown style type '"+Wt+"'."),Mn.itemStyle)}function jn(Nt,Wt){var Rt=Nt.visualDrawType||Jr[Wt];return Rt||(console.warn("Unkown style type '"+Wt+"'."),"fill")}var mi={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Wt){var Rt=Nt.getData(),Vt=Nt.visualStyleAccessPath||"itemStyle",Zt=Nt.getModel(Vt),oe=ei(Nt,Vt),de=oe(Zt),ke=Zt.getShallow("decal");ke&&(Rt.setVisual("decal",ke),ke.dirty=!0);var Ge=jn(Nt,Vt),Je=de[Ge],ar=(0,K.mf)(Je)?Je:null,ue=de.fill==="auto"||de.stroke==="auto";if(!de[Ge]||ar||ue){var Me=Nt.getColorFromPalette(Nt.name,null,Wt.getSeriesCount());de[Ge]||(de[Ge]=Me,Rt.setVisual("colorFromPalette",!0)),de.fill=de.fill==="auto"||(0,K.mf)(de.fill)?Me:de.fill,de.stroke=de.stroke==="auto"||(0,K.mf)(de.stroke)?Me:de.stroke}if(Rt.setVisual("style",de),Rt.setVisual("drawType",Ge),!Wt.isSeriesFiltered(Nt)&&ar)return Rt.setVisual("colorFromPalette",!1),{dataEach:function(ye,ze){var Ze=Nt.getDataParams(ze),er=(0,K.l7)({},de);er[Ge]=ar(Ze),ye.setItemVisual(ze,"style",er)}}}},fi=new et.Z,Fa={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Wt){if(!(Nt.ignoreStyleOnData||Wt.isSeriesFiltered(Nt))){var Rt=Nt.getData(),Vt=Nt.visualStyleAccessPath||"itemStyle",Zt=ei(Nt,Vt),oe=Rt.getVisual("drawType");return{dataEach:Rt.hasItemOption?function(de,ke){var Ge=de.getRawDataItem(ke);if(Ge&&Ge[Vt]){fi.option=Ge[Vt];var Je=Zt(fi),ar=de.ensureUniqueItemVisual(ke,"style");(0,K.l7)(ar,Je),fi.option.decal&&(de.setItemVisual(ke,"decal",fi.option.decal),fi.option.decal.dirty=!0),oe in Je&&de.setItemVisual(ke,"colorFromPalette",!1)}}:null}}}},Ki={performRawSeries:!0,overallReset:function(Nt){var Wt=(0,K.kW)();Nt.eachSeries(function(Rt){var Vt=Rt.getColorBy();if(!Rt.isColorBySeries()){var Zt=Rt.type+"-"+Vt,oe=Wt.get(Zt);oe||(oe={},Wt.set(Zt,oe)),rn(Rt).scope=oe}}),Nt.eachSeries(function(Rt){if(!(Rt.isColorBySeries()||Nt.isSeriesFiltered(Rt))){var Vt=Rt.getRawData(),Zt={},oe=Rt.getData(),de=rn(Rt).scope,ke=Rt.visualStyleAccessPath||"itemStyle",Ge=jn(Rt,ke);oe.each(function(Je){var ar=oe.getRawIndex(Je);Zt[ar]=Je}),Vt.each(function(Je){var ar=Zt[Je],ue=oe.getItemVisual(ar,"colorFromPalette");if(ue){var Me=oe.ensureUniqueItemVisual(ar,"style"),ye=Vt.getName(Je)||Je+"",ze=Vt.count();Me[Ge]=Rt.getColorFromPalette(ye,de,ze)}})}})}},Ta=F(38154),au=F(96498),eo=F(14826),za=Math.PI;function hf(Nt,Wt){Wt=Wt||{},K.ce(Wt,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var Rt=new Ta.Z,Vt=new Ae.Z({style:{fill:Wt.maskColor},zlevel:Wt.zlevel,z:1e4});Rt.add(Vt);var Zt=new au.ZP({style:{text:Wt.text,fill:Wt.textColor,fontSize:Wt.fontSize,fontWeight:Wt.fontWeight,fontStyle:Wt.fontStyle,fontFamily:Wt.fontFamily},zlevel:Wt.zlevel,z:10001}),oe=new Ae.Z({style:{fill:"none"},textContent:Zt,textConfig:{position:"right",distance:10},zlevel:Wt.zlevel,z:10001});Rt.add(oe);var de;return Wt.showSpinner&&(de=new eo.Z({shape:{startAngle:-za/2,endAngle:-za/2+.1,r:Wt.spinnerRadius},style:{stroke:Wt.color,lineCap:"round",lineWidth:Wt.lineWidth},zlevel:Wt.zlevel,z:10001}),de.animateShape(!0).when(1e3,{endAngle:za*3/2}).start("circularInOut"),de.animateShape(!0).when(1e3,{startAngle:za*3/2}).delay(300).start("circularInOut"),Rt.add(de)),Rt.resize=function(){var ke=Zt.getBoundingRect().width,Ge=Wt.showSpinner?Wt.spinnerRadius:0,Je=(Nt.getWidth()-Ge*2-(Wt.showSpinner&&ke?10:0)-ke)/2-(Wt.showSpinner&&ke?0:5+ke/2)+(Wt.showSpinner?0:ke/2)+(ke?0:Ge),ar=Nt.getHeight()/2;Wt.showSpinner&&de.setShape({cx:Je,cy:ar}),oe.setShape({x:Je-Ge,y:ar-Ge,width:Ge*2,height:Ge*2}),Vt.setShape({x:0,y:0,width:Nt.getWidth(),height:Nt.getHeight()})},Rt.resize(),Rt}var ha=F(8674),ro=F(42151),_l=function(){function Nt(Wt,Rt,Vt,Zt){this._stageTaskMap=(0,K.kW)(),this.ecInstance=Wt,this.api=Rt,Vt=this._dataProcessorHandlers=Vt.slice(),Zt=this._visualHandlers=Zt.slice(),this._allHandlers=Vt.concat(Zt)}return Nt.prototype.restoreData=function(Wt,Rt){Wt.restoreData(Rt),this._stageTaskMap.each(function(Vt){var Zt=Vt.overallTask;Zt&&Zt.dirty()})},Nt.prototype.getPerformArgs=function(Wt,Rt){if(!!Wt.__pipeline){var Vt=this._pipelineMap.get(Wt.__pipeline.id),Zt=Vt.context,oe=!Rt&&Vt.progressiveEnabled&&(!Zt||Zt.progressiveRender)&&Wt.__idxInPipeline>Vt.blockIndex,de=oe?Vt.step:null,ke=Zt&&Zt.modDataCount,Ge=ke!=null?Math.ceil(ke/de):null;return{step:de,modBy:Ge,modDataCount:ke}}},Nt.prototype.getPipeline=function(Wt){return this._pipelineMap.get(Wt)},Nt.prototype.updateStreamModes=function(Wt,Rt){var Vt=this._pipelineMap.get(Wt.uid),Zt=Wt.getData(),oe=Zt.count(),de=Vt.progressiveEnabled&&Rt.incrementalPrepareRender&&oe>=Vt.threshold,ke=Wt.get("large")&&oe>=Wt.get("largeThreshold"),Ge=Wt.get("progressiveChunkMode")==="mod"?oe:null;Wt.pipelineContext=Vt.context={progressiveRender:de,modDataCount:Ge,large:ke}},Nt.prototype.restorePipelines=function(Wt){var Rt=this,Vt=Rt._pipelineMap=(0,K.kW)();Wt.eachSeries(function(Zt){var oe=Zt.getProgressive(),de=Zt.uid;Vt.set(de,{id:de,head:null,tail:null,threshold:Zt.getProgressiveThreshold(),progressiveEnabled:oe&&!(Zt.preventIncremental&&Zt.preventIncremental()),blockIndex:-1,step:Math.round(oe||700),count:0}),Rt._pipe(Zt,Zt.dataTask)})},Nt.prototype.prepareStageTasks=function(){var Wt=this._stageTaskMap,Rt=this.api.getModel(),Vt=this.api;(0,K.S6)(this._allHandlers,function(Zt){var oe=Wt.get(Zt.uid)||Wt.set(Zt.uid,{}),de="";(0,K.hu)(!(Zt.reset&&Zt.overallReset),de),Zt.reset&&this._createSeriesStageTask(Zt,oe,Rt,Vt),Zt.overallReset&&this._createOverallStageTask(Zt,oe,Rt,Vt)},this)},Nt.prototype.prepareView=function(Wt,Rt,Vt,Zt){var oe=Wt.renderTask,de=oe.context;de.model=Rt,de.ecModel=Vt,de.api=Zt,oe.__block=!Wt.incrementalPrepareRender,this._pipe(Rt,oe)},Nt.prototype.performDataProcessorTasks=function(Wt,Rt){this._performStageTasks(this._dataProcessorHandlers,Wt,Rt,{block:!0})},Nt.prototype.performVisualTasks=function(Wt,Rt,Vt){this._performStageTasks(this._visualHandlers,Wt,Rt,Vt)},Nt.prototype._performStageTasks=function(Wt,Rt,Vt,Zt){Zt=Zt||{};var oe=!1,de=this;(0,K.S6)(Wt,function(Ge,Je){if(!(Zt.visualType&&Zt.visualType!==Ge.visualType)){var ar=de._stageTaskMap.get(Ge.uid),ue=ar.seriesTaskMap,Me=ar.overallTask;if(Me){var ye,ze=Me.agentStubMap;ze.each(function(er){ke(Zt,er)&&(er.dirty(),ye=!0)}),ye&&Me.dirty(),de.updatePayload(Me,Vt);var Ze=de.getPerformArgs(Me,Zt.block);ze.each(function(er){er.perform(Ze)}),Me.perform(Ze)&&(oe=!0)}else ue&&ue.each(function(er,sr){ke(Zt,er)&&er.dirty();var yr=de.getPerformArgs(er,Zt.block);yr.skip=!Ge.performRawSeries&&Rt.isSeriesFiltered(er.context.model),de.updatePayload(er,Vt),er.perform(yr)&&(oe=!0)})}});function ke(Ge,Je){return Ge.setDirty&&(!Ge.dirtyMap||Ge.dirtyMap.get(Je.__pipeline.id))}this.unfinished=oe||this.unfinished},Nt.prototype.performSeriesTasks=function(Wt){var Rt;Wt.eachSeries(function(Vt){Rt=Vt.dataTask.perform()||Rt}),this.unfinished=Rt||this.unfinished},Nt.prototype.plan=function(){this._pipelineMap.each(function(Wt){var Rt=Wt.tail;do{if(Rt.__block){Wt.blockIndex=Rt.__idxInPipeline;break}Rt=Rt.getUpstream()}while(Rt)})},Nt.prototype.updatePayload=function(Wt,Rt){Rt!=="remain"&&(Wt.context.payload=Rt)},Nt.prototype._createSeriesStageTask=function(Wt,Rt,Vt,Zt){var oe=this,de=Rt.seriesTaskMap,ke=Rt.seriesTaskMap=(0,K.kW)(),Ge=Wt.seriesType,Je=Wt.getTargetSeries;Wt.createOnAllSeries?Vt.eachRawSeries(ar):Ge?Vt.eachRawSeriesByType(Ge,ar):Je&&Je(Vt,Zt).each(ar);function ar(ue){var Me=ue.uid,ye=ke.set(Me,de&&de.get(Me)||(0,ha.v)({plan:su,reset:yn,count:xe}));ye.context={model:ue,ecModel:Vt,api:Zt,useClearVisual:Wt.isVisual&&!Wt.isLayout,plan:Wt.plan,reset:Wt.reset,scheduler:oe},oe._pipe(ue,ye)}},Nt.prototype._createOverallStageTask=function(Wt,Rt,Vt,Zt){var oe=this,de=Rt.overallTask=Rt.overallTask||(0,ha.v)({reset:Wn});de.context={ecModel:Vt,api:Zt,overallReset:Wt.overallReset,scheduler:oe};var ke=de.agentStubMap,Ge=de.agentStubMap=(0,K.kW)(),Je=Wt.seriesType,ar=Wt.getTargetSeries,ue=!0,Me=!1,ye="";(0,K.hu)(!Wt.createOnAllSeries,ye),Je?Vt.eachRawSeriesByType(Je,ze):ar?ar(Vt,Zt).each(ze):(ue=!1,(0,K.S6)(Vt.getSeries(),ze));function ze(Ze){var er=Ze.uid,sr=Ge.set(er,ke&&ke.get(er)||(Me=!0,(0,ha.v)({reset:cf,onDirty:_r})));sr.context={model:Ze,overallProgress:ue},sr.agent=de,sr.__block=ue,oe._pipe(Ze,sr)}Me&&de.dirty()},Nt.prototype._pipe=function(Wt,Rt){var Vt=Wt.uid,Zt=this._pipelineMap.get(Vt);!Zt.head&&(Zt.head=Rt),Zt.tail&&Zt.tail.pipe(Rt),Zt.tail=Rt,Rt.__idxInPipeline=Zt.count++,Rt.__pipeline=Zt},Nt.wrapStageHandler=function(Wt,Rt){return(0,K.mf)(Wt)&&(Wt={overallReset:Wt,seriesType:Rr(Wt)}),Wt.uid=(0,ro.Kr)("stageHandler"),Rt&&(Wt.visualType=Rt),Wt},Nt}();function Wn(Nt){Nt.overallReset(Nt.ecModel,Nt.api,Nt.payload)}function cf(Nt){return Nt.overallProgress&&ou}function ou(){this.agent.dirty(),this.getDownstream().dirty()}function _r(){this.agent&&this.agent.dirty()}function su(Nt){return Nt.plan?Nt.plan(Nt.model,Nt.ecModel,Nt.api,Nt.payload):null}function yn(Nt){Nt.useClearVisual&&Nt.data.clearAllVisual();var Wt=Nt.resetDefines=(0,it.kF)(Nt.reset(Nt.model,Nt.ecModel,Nt.api,Nt.payload));return Wt.length>1?(0,K.UI)(Wt,function(Rt,Vt){return Er(Vt)}):fe}var fe=Er(0);function Er(Nt){return function(Wt,Rt){var Vt=Rt.data,Zt=Rt.resetDefines[Nt];if(Zt&&Zt.dataEach)for(var oe=Wt.start;oe<Wt.end;oe++)Zt.dataEach(Vt,oe);else Zt&&Zt.progress&&Zt.progress(Wt,Vt)}}function xe(Nt){return Nt.data.count()}function Rr(Nt){Ds=null;try{Nt(Mr,xl)}catch{}return Ds}var Mr={},xl={},Ds;br(Mr,L),br(xl,ut),Mr.eachSeriesByType=Mr.eachRawSeriesByType=function(Nt){Ds=Nt},Mr.eachComponent=function(Nt){Nt.mainType==="series"&&Nt.subType&&(Ds=Nt.subType)};function br(Nt,Wt){for(var Rt in Wt.prototype)Nt[Rt]=K.ZT}var cr=_l,Hr=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],ir={color:Hr,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Hr]},yi="#B9B8CE",Ga="#100C2A",Ui=function(){return{axisLine:{lineStyle:{color:yi}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},or=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],no={darkMode:!0,color:or,backgroundColor:Ga,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:yi}},textStyle:{color:yi},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:yi}},dataZoom:{borderColor:"#71708A",textStyle:{color:yi},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:yi}},timeline:{lineStyle:{color:yi},label:{color:yi},controlStyle:{color:yi,borderColor:yi}},calendar:{itemStyle:{color:Ga},dayLabel:{color:yi},monthLabel:{color:yi},yearLabel:{color:yi}},timeAxis:Ui(),logAxis:Ui(),valueAxis:Ui(),categoryAxis:Ui(),line:{symbol:"circle"},graph:{color:or},gauge:{title:{color:yi},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:yi},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};no.categoryAxis.splitLine.show=!1;var Fr=no,ea=F(34251),Co=function(){function Nt(){}return Nt.prototype.normalizeQuery=function(Wt){var Rt={},Vt={},Zt={};if(K.HD(Wt)){var oe=(0,ea.u9)(Wt);Rt.mainType=oe.main||null,Rt.subType=oe.sub||null}else{var de=["Index","Name","Id"],ke={name:1,dataIndex:1,dataType:1};K.S6(Wt,function(Ge,Je){for(var ar=!1,ue=0;ue<de.length;ue++){var Me=de[ue],ye=Je.lastIndexOf(Me);if(ye>0&&ye===Je.length-Me.length){var ze=Je.slice(0,ye);ze!=="data"&&(Rt.mainType=ze,Rt[Me.toLowerCase()]=Ge,ar=!0)}}ke.hasOwnProperty(Je)&&(Vt[Je]=Ge,ar=!0),ar||(Zt[Je]=Ge)})}return{cptQuery:Rt,dataQuery:Vt,otherQuery:Zt}},Nt.prototype.filter=function(Wt,Rt){var Vt=this.eventInfo;if(!Vt)return!0;var Zt=Vt.targetEl,oe=Vt.packedEvent,de=Vt.model,ke=Vt.view;if(!de||!ke)return!0;var Ge=Rt.cptQuery,Je=Rt.dataQuery;return ar(Ge,de,"mainType")&&ar(Ge,de,"subType")&&ar(Ge,de,"index","componentIndex")&&ar(Ge,de,"name")&&ar(Ge,de,"id")&&ar(Je,oe,"name")&&ar(Je,oe,"dataIndex")&&ar(Je,oe,"dataType")&&(!ke.filterForExposedEvent||ke.filterForExposedEvent(Wt,Rt.otherQuery,Zt,oe));function ar(ue,Me,ye,ze){return ue[ye]==null||Me[ze||ye]===ue[ye]}},Nt.prototype.afterTrigger=function(){this.eventInfo=null},Nt}(),wi=["symbol","symbolSize","symbolRotate","symbolOffset"],hn=wi.concat(["symbolKeepAspect"]),ki={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Wt){var Rt=Nt.getData();if(Nt.legendIcon&&Rt.setVisual("legendIcon",Nt.legendIcon),!Nt.hasSymbolVisual)return;for(var Vt={},Zt={},oe=!1,de=0;de<wi.length;de++){var ke=wi[de],Ge=Nt.get(ke);(0,K.mf)(Ge)?(oe=!0,Zt[ke]=Ge):Vt[ke]=Ge}if(Vt.symbol=Vt.symbol||Nt.defaultSymbol,Rt.setVisual((0,K.l7)({legendIcon:Nt.legendIcon||Vt.symbol,symbolKeepAspect:Nt.get("symbolKeepAspect")},Vt)),Wt.isSeriesFiltered(Nt))return;var Je=(0,K.XP)(Zt);function ar(ue,Me){for(var ye=Nt.getRawValue(Me),ze=Nt.getDataParams(Me),Ze=0;Ze<Je.length;Ze++){var er=Je[Ze];ue.setItemVisual(Me,er,Zt[er](ye,ze))}}return{dataEach:oe?ar:null}}},ra={createOnAllSeries:!0,performRawSeries:!0,reset:function(Nt,Wt){if(!Nt.hasSymbolVisual||Wt.isSeriesFiltered(Nt))return;var Rt=Nt.getData();function Vt(Zt,oe){for(var de=Zt.getItemModel(oe),ke=0;ke<hn.length;ke++){var Ge=hn[ke],Je=de.getShallow(Ge,!0);Je!=null&&Zt.setItemVisual(oe,Ge,Je)}}return{dataEach:Rt.hasItemOption?Vt:null}}},ur=F(26211),Po=F(70175),As=F(31891),Lo=F(10437),kr=F(73917),mr=F(18310),Gn=F(48625);function Qr(Nt,Wt){Nt.eachRawSeries(function(Rt){if(!Nt.isSeriesFiltered(Rt)){var Vt=Rt.getData();Vt.hasItemVisual()&&Vt.each(function(de){var ke=Vt.getItemVisual(de,"decal");if(ke){var Ge=Vt.ensureUniqueItemVisual(de,"style");Ge.decal=(0,Gn.I)(ke,Wt)}});var Zt=Vt.getVisual("decal");if(Zt){var oe=Vt.getVisual("style");oe.decal=(0,Gn.I)(Zt,Wt)}}})}var Xe=new vt.Z,xr=Xe,ln=F(23132),Vi=F(49428),ca=typeof window<"u",Cr="5.3.3",cn={zrender:"5.3.2"},Io=1,bs=800,Sl=900,vn=1e3,on=2e3,Di=5e3,Ie=1e3,lu=1100,Ms=2e3,Pi=3e3,Jn=4e3,Cn=4500,Rn=4600,uu=5e3,io=6e3,ao=7e3,Es={PROCESSOR:{FILTER:vn,SERIES_FILTER:bs,STATISTIC:Di},VISUAL:{LAYOUT:Ie,PROGRESSIVE_LAYOUT:lu,GLOBAL:Ms,CHART:Pi,POST_CHART_LAYOUT:Rn,COMPONENT:Jn,BRUSH:uu,CHART_ITEM:Cn,ARIA:io,DECAL:ao}},zr="__flagInMainProcess",pr="__pendingUpdate",Ai="__needsUpdateStatus",wa=/^[a-zA-Z0-9_]+$/,oo="__connectUpdateStatus",Tl=0,fu=1,hu=2;function wl(Nt){return function(){for(var Wt=[],Rt=0;Rt<arguments.length;Rt++)Wt[Rt]=arguments[Rt];if(this.isDisposed()){this.id;return}return Yr(this,Nt,Wt)}}function Cs(Nt){return function(){for(var Wt=[],Rt=0;Rt<arguments.length;Rt++)Wt[Rt]=arguments[Rt];return Yr(this,Nt,Wt)}}function Yr(Nt,Wt,Rt){return Rt[0]=Rt[0]&&Rt[0].toLowerCase(),vt.Z.prototype[Wt].apply(Nt,Rt)}var Ro=function(Nt){(0,N.ZT)(Wt,Nt);function Wt(){return Nt!==null&&Nt.apply(this,arguments)||this}return Wt}(vt.Z),Ps=Ro.prototype;Ps.on=Cs("on"),Ps.off=Cs("off");var ji,Ls,Da,Hn,va,hi,da,Ji,ri,pa,$r,Zi,Wi,Aa,ni,Ua,_n,Oo,Is=function(Nt){(0,N.ZT)(Wt,Nt);function Wt(Rt,Vt,Zt){var oe=Nt.call(this,new Co)||this;oe._chartsViews=[],oe._chartsMap={},oe._componentsViews=[],oe._componentsMap={},oe._pendingActions=[],Zt=Zt||{},(0,K.HD)(Vt)&&(Vt=Ns[Vt]),oe._dom=Rt;var de="canvas",ke=!1;if(!1)var Ge,Je;var ar=oe._zr=ct.init(Rt,{renderer:Zt.renderer||de,devicePixelRatio:Zt.devicePixelRatio,width:Zt.width,height:Zt.height,ssr:Zt.ssr,useDirtyRect:Zt.useDirtyRect==null?ke:Zt.useDirtyRect});oe._ssr=Zt.ssr,oe._throttledZrFlush=(0,Ke.P2)((0,K.ak)(ar.flush,ar),17),Vt=(0,K.d9)(Vt),Vt&&Yt(Vt,!0),oe._theme=Vt,oe._locale=(0,kr.D0)(Zt.locale||kr.sO),oe._coordSysMgr=new ot.Z;var ue=oe._api=ni(oe);function Me(ye,ze){return ye.__prio-ze.__prio}return(0,gt.Z)(Va,Me),(0,gt.Z)(Os,Me),oe._scheduler=new cr(oe,ue,Os,Va),oe._messageCenter=new Ro,oe._initEvents(),oe.resize=(0,K.ak)(oe.resize,oe),ar.animation.on("frame",oe._onframe,oe),pa(ar,oe),$r(ar,oe),(0,K.s7)(oe),oe}return Wt.prototype._onframe=function(){if(!this._disposed){Oo(this);var Rt=this._scheduler;if(this[pr]){var Vt=this[pr].silent;this[zr]=!0;try{ji(this),Hn.update.call(this,null,this[pr].updateParams)}catch(Ge){throw this[zr]=!1,this[pr]=null,Ge}this._zr.flush(),this[zr]=!1,this[pr]=null,Ji.call(this,Vt),ri.call(this,Vt)}else if(Rt.unfinished){var Zt=Io,oe=this._model,de=this._api;Rt.unfinished=!1;do{var ke=+new Date;Rt.performSeriesTasks(oe),Rt.performDataProcessorTasks(oe),hi(this,oe),Rt.performVisualTasks(oe),Aa(this,this._model,de,"remain",{}),Zt-=+new Date-ke}while(Zt>0&&Rt.unfinished);Rt.unfinished||this._zr.flush()}}},Wt.prototype.getDom=function(){return this._dom},Wt.prototype.getId=function(){return this.id},Wt.prototype.getZr=function(){return this._zr},Wt.prototype.isSSR=function(){return this._ssr},Wt.prototype.setOption=function(Rt,Vt,Zt){if(!this[zr]){if(this._disposed){this.id;return}var oe,de,ke;if((0,K.Kn)(Vt)&&(Zt=Vt.lazyUpdate,oe=Vt.silent,de=Vt.replaceMerge,ke=Vt.transition,Vt=Vt.notMerge),this[zr]=!0,!this._model||Vt){var Ge=new wt(this._api),Je=this._theme,ar=this._model=new L;ar.scheduler=this._scheduler,ar.ssr=this._ssr,ar.init(null,null,null,Je,this._locale,Ge)}this._model.setOption(Rt,{replaceMerge:de},No);var ue={seriesTransition:ke,optionChanged:!0};if(Zt)this[pr]={silent:oe,updateParams:ue},this[zr]=!1,this.getZr().wakeUp();else{try{ji(this),Hn.update.call(this,null,ue)}catch(Me){throw this[pr]=null,this[zr]=!1,Me}this._ssr||this._zr.flush(),this[pr]=null,this[zr]=!1,Ji.call(this,oe),ri.call(this,oe)}}},Wt.prototype.setTheme=function(){(0,Po.Sh)("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},Wt.prototype.getModel=function(){return this._model},Wt.prototype.getOption=function(){return this._model&&this._model.getOption()},Wt.prototype.getWidth=function(){return this._zr.getWidth()},Wt.prototype.getHeight=function(){return this._zr.getHeight()},Wt.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||ca&&window.devicePixelRatio||1},Wt.prototype.getRenderedCanvas=function(Rt){return this.renderToCanvas(Rt)},Wt.prototype.renderToCanvas=function(Rt){Rt=Rt||{};var Vt=this._zr.painter;return Vt.getRenderedCanvas({backgroundColor:Rt.backgroundColor||this._model.get("backgroundColor"),pixelRatio:Rt.pixelRatio||this.getDevicePixelRatio()})},Wt.prototype.renderToSVGString=function(Rt){Rt=Rt||{};var Vt=this._zr.painter;return Vt.renderToString({useViewBox:Rt.useViewBox})},Wt.prototype.getSvgDataURL=function(){if(!!dt.Z.svgSupported){var Rt=this._zr,Vt=Rt.storage.getDisplayList();return(0,K.S6)(Vt,function(Zt){Zt.stopAnimation(null,!0)}),Rt.painter.toDataURL()}},Wt.prototype.getDataURL=function(Rt){if(this._disposed){this.id;return}Rt=Rt||{};var Vt=Rt.excludeComponents,Zt=this._model,oe=[],de=this;(0,K.S6)(Vt,function(Ge){Zt.eachComponent({mainType:Ge},function(Je){var ar=de._componentsMap[Je.__viewId];ar.group.ignore||(oe.push(ar),ar.group.ignore=!0)})});var ke=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(Rt).toDataURL("image/"+(Rt&&Rt.type||"png"));return(0,K.S6)(oe,function(Ge){Ge.group.ignore=!1}),ke},Wt.prototype.getConnectedDataURL=function(Rt){if(this._disposed){this.id;return}var Vt=Rt.type==="svg",Zt=this.group,oe=Math.min,de=Math.max,ke=1/0;if(na[Zt]){var Ge=ke,Je=ke,ar=-ke,ue=-ke,Me=[],ye=Rt&&Rt.pixelRatio||this.getDevicePixelRatio();(0,K.S6)(Ma,function(gr,Gr){if(gr.group===Zt){var tn=Vt?gr.getZr().painter.getSvgDom().innerHTML:gr.renderToCanvas((0,K.d9)(Rt)),Dr=gr.getDom().getBoundingClientRect();Ge=oe(Dr.left,Ge),Je=oe(Dr.top,Je),ar=de(Dr.right,ar),ue=de(Dr.bottom,ue),Me.push({dom:tn,left:Dr.left,top:Dr.top})}}),Ge*=ye,Je*=ye,ar*=ye,ue*=ye;var ze=ar-Ge,Ze=ue-Je,er=ln.qW.createCanvas(),sr=ct.init(er,{renderer:Vt?"svg":"canvas"});if(sr.resize({width:ze,height:Ze}),Vt){var yr="";return(0,K.S6)(Me,function(gr){var Gr=gr.left-Ge,tn=gr.top-Je;yr+='<g transform="translate('+Gr+","+tn+')">'+gr.dom+"</g>"}),sr.painter.getSvgRoot().innerHTML=yr,Rt.connectedBackgroundColor&&sr.painter.setBackgroundColor(Rt.connectedBackgroundColor),sr.refreshImmediately(),sr.painter.toDataURL()}else return Rt.connectedBackgroundColor&&sr.add(new Ae.Z({shape:{x:0,y:0,width:ze,height:Ze},style:{fill:Rt.connectedBackgroundColor}})),(0,K.S6)(Me,function(gr){var Gr=new He.ZP({style:{x:gr.left*ye-Ge,y:gr.top*ye-Je,image:gr.dom}});sr.add(Gr)}),sr.refreshImmediately(),er.toDataURL("image/"+(Rt&&Rt.type||"png"))}else return this.getDataURL(Rt)},Wt.prototype.convertToPixel=function(Rt,Vt){return va(this,"convertToPixel",Rt,Vt)},Wt.prototype.convertFromPixel=function(Rt,Vt){return va(this,"convertFromPixel",Rt,Vt)},Wt.prototype.containPixel=function(Rt,Vt){if(this._disposed){this.id;return}var Zt=this._model,oe,de=it.pm(Zt,Rt);return(0,K.S6)(de,function(ke,Ge){Ge.indexOf("Models")>=0&&(0,K.S6)(ke,function(Je){var ar=Je.coordinateSystem;if(ar&&ar.containPoint)oe=oe||!!ar.containPoint(Vt);else if(Ge==="seriesModels"){var ue=this._chartsMap[Je.__viewId];ue&&ue.containPoint&&(oe=oe||ue.containPoint(Vt,Je))}},this)},this),!!oe},Wt.prototype.getVisual=function(Rt,Vt){var Zt=this._model,oe=it.pm(Zt,Rt,{defaultMainType:"series"}),de=oe.seriesModel,ke=de.getData(),Ge=oe.hasOwnProperty("dataIndexInside")?oe.dataIndexInside:oe.hasOwnProperty("dataIndex")?ke.indexOfRawIndex(oe.dataIndex):null;return Ge!=null?(0,ur.Or)(ke,Ge,Vt):(0,ur.UL)(ke,Vt)},Wt.prototype.getViewOfComponentModel=function(Rt){return this._componentsMap[Rt.__viewId]},Wt.prototype.getViewOfSeriesModel=function(Rt){return this._chartsMap[Rt.__viewId]},Wt.prototype._initEvents=function(){var Rt=this;(0,K.S6)(ka,function(Vt){var Zt=function(oe){var de=Rt.getModel(),ke=oe.target,Ge,Je=Vt==="globalout";if(Je?Ge={}:ke&&(0,mr.o)(ke,function(ze){var Ze=(0,Re.A)(ze);if(Ze&&Ze.dataIndex!=null){var er=Ze.dataModel||de.getSeriesByIndex(Ze.seriesIndex);return Ge=er&&er.getDataParams(Ze.dataIndex,Ze.dataType)||{},!0}else if(Ze.eventData)return Ge=(0,K.l7)({},Ze.eventData),!0},!0),Ge){var ar=Ge.componentType,ue=Ge.componentIndex;(ar==="markLine"||ar==="markPoint"||ar==="markArea")&&(ar="series",ue=Ge.seriesIndex);var Me=ar&&ue!=null&&de.getComponent(ar,ue),ye=Me&&Rt[Me.mainType==="series"?"_chartsMap":"_componentsMap"][Me.__viewId];Ge.event=oe,Ge.type=Vt,Rt._$eventProcessor.eventInfo={targetEl:ke,packedEvent:Ge,model:Me,view:ye},Rt.trigger(Vt,Ge)}};Zt.zrEventfulCallAtLast=!0,Rt._zr.on(Vt,Zt,Rt)}),(0,K.S6)(ba,function(Vt,Zt){Rt._messageCenter.on(Zt,function(oe){this.trigger(Zt,oe)},Rt)}),(0,K.S6)(["selectchanged"],function(Vt){Rt._messageCenter.on(Vt,function(Zt){this.trigger(Vt,Zt)},Rt)}),(0,As.s)(this._messageCenter,this,this._api)},Wt.prototype.isDisposed=function(){return this._disposed},Wt.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},Wt.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var Rt=this.getDom();Rt&&it.P$(this.getDom(),so,"");var Vt=this,Zt=Vt._api,oe=Vt._model;(0,K.S6)(Vt._componentsViews,function(de){de.dispose(oe,Zt)}),(0,K.S6)(Vt._chartsViews,function(de){de.dispose(oe,Zt)}),Vt._zr.dispose(),Vt._dom=Vt._model=Vt._chartsMap=Vt._componentsMap=Vt._chartsViews=Vt._componentsViews=Vt._scheduler=Vt._api=Vt._zr=Vt._throttledZrFlush=Vt._theme=Vt._coordSysMgr=Vt._messageCenter=null,delete Ma[Vt.id]},Wt.prototype.resize=function(Rt){if(!this[zr]){if(this._disposed){this.id;return}this._zr.resize(Rt);var Vt=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!Vt){var Zt=Vt.resetOption("media"),oe=Rt&&Rt.silent;this[pr]&&(oe==null&&(oe=this[pr].silent),Zt=!0,this[pr]=null),this[zr]=!0;try{Zt&&ji(this),Hn.update.call(this,{type:"resize",animation:(0,K.l7)({duration:0},Rt&&Rt.animation)})}catch(de){throw this[zr]=!1,de}this[zr]=!1,Ji.call(this,oe),ri.call(this,oe)}}},Wt.prototype.showLoading=function(Rt,Vt){if(this._disposed){this.id;return}if((0,K.Kn)(Rt)&&(Vt=Rt,Rt=""),Rt=Rt||"default",this.hideLoading(),!!Bo[Rt]){var Zt=Bo[Rt](this._api,Vt),oe=this._zr;this._loadingFX=Zt,oe.add(Zt)}},Wt.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},Wt.prototype.makeActionFromEvent=function(Rt){var Vt=(0,K.l7)({},Rt);return Vt.type=ba[Rt.type],Vt},Wt.prototype.dispatchAction=function(Rt,Vt){if(this._disposed){this.id;return}if((0,K.Kn)(Vt)||(Vt={silent:!!Vt}),!!Tn[Rt.type]&&!!this._model){if(this[zr]){this._pendingActions.push(Rt);return}var Zt=Vt.silent;da.call(this,Rt,Zt);var oe=Vt.flush;oe?this._zr.flush():oe!==!1&&dt.Z.browser.weChat&&this._throttledZrFlush(),Ji.call(this,Zt),ri.call(this,Zt)}},Wt.prototype.updateLabelLayout=function(){xr.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},Wt.prototype.appendData=function(Rt){if(this._disposed){this.id;return}var Vt=Rt.seriesIndex,Zt=this.getModel(),oe=Zt.getSeriesByIndex(Vt);oe.appendData(Rt),this._scheduler.unfinished=!0,this.getZr().wakeUp()},Wt.internalField=function(){ji=function(ue){var Me=ue._scheduler;Me.restorePipelines(ue._model),Me.prepareStageTasks(),Ls(ue,!0),Ls(ue,!1),Me.plan()},Ls=function(ue,Me){for(var ye=ue._model,ze=ue._scheduler,Ze=Me?ue._componentsViews:ue._chartsViews,er=Me?ue._componentsMap:ue._chartsMap,sr=ue._zr,yr=ue._api,gr=0;gr<Ze.length;gr++)Ze[gr].__alive=!1;Me?ye.eachComponent(function(Dr,dn){Dr!=="series"&&Gr(dn)}):ye.eachSeries(Gr);function Gr(Dr){var dn=Dr.__requireNewView;Dr.__requireNewView=!1;var _i="_ec_"+Dr.id+"_"+Dr.type,bn=!dn&&er[_i];if(!bn){var Fi=(0,ea.u9)(Dr.type),Ca=Me?Qt.Z.getClass(Fi.main,Fi.sub):ie.Z.getClass(Fi.sub);bn=new Ca,bn.init(ye,yr),er[_i]=bn,Ze.push(bn),sr.add(bn.group)}Dr.__viewId=bn.__id=_i,bn.__alive=!0,bn.__model=Dr,bn.group.__ecComponentInfo={mainType:Dr.mainType,index:Dr.componentIndex},!Me&&ze.prepareView(bn,Dr,ye,yr)}for(var gr=0;gr<Ze.length;){var tn=Ze[gr];tn.__alive?gr++:(!Me&&tn.renderTask.dispose(),sr.remove(tn.group),tn.dispose(ye,yr),Ze.splice(gr,1),er[tn.__id]===tn&&delete er[tn.__id],tn.__id=tn.group.__ecComponentInfo=null)}},Da=function(ue,Me,ye,ze,Ze){var er=ue._model;if(er.setUpdatePayload(ye),!ze){(0,K.S6)([].concat(ue._componentsViews).concat(ue._chartsViews),tn);return}var sr={};sr[ze+"Id"]=ye[ze+"Id"],sr[ze+"Index"]=ye[ze+"Index"],sr[ze+"Name"]=ye[ze+"Name"];var yr={mainType:ze,query:sr};Ze&&(yr.subType=Ze);var gr=ye.excludeSeriesId,Gr;gr!=null&&(Gr=(0,K.kW)(),(0,K.S6)(it.kF(gr),function(Dr){var dn=it.U5(Dr,null);dn!=null&&Gr.set(dn,!0)})),er&&er.eachComponent(yr,function(Dr){var dn=Gr&&Gr.get(Dr.id)!==null;if(!dn)if((0,Le.xp)(ye))if(Dr instanceof Ut.Z)ye.type===Le.Ki&&!ye.notBlur&&!Dr.get(["emphasis","disabled"])&&(0,Le.UL)(Dr,ye,ue._api);else{var _i=(0,Le.oJ)(Dr.mainType,Dr.componentIndex,ye.name,ue._api),bn=_i.focusSelf,Fi=_i.dispatchers;ye.type===Le.Ki&&bn&&!ye.notBlur&&(0,Le.zI)(Dr.mainType,Dr.componentIndex,ue._api),Fi&&(0,K.S6)(Fi,function(Ca){ye.type===Le.Ki?(0,Le.fD)(Ca):(0,Le.Mh)(Ca)})}else(0,Le.aG)(ye)&&Dr instanceof Ut.Z&&((0,Le.og)(Dr,ye,ue._api),(0,Le.ci)(Dr),_n(ue))},ue),er&&er.eachComponent(yr,function(Dr){var dn=Gr&&Gr.get(Dr.id)!==null;dn||tn(ue[ze==="series"?"_chartsMap":"_componentsMap"][Dr.__viewId])},ue);function tn(Dr){Dr&&Dr.__alive&&Dr[Me]&&Dr[Me](Dr.__model,er,ue._api,ye)}},Hn={prepareAndUpdate:function(ue){ji(this),Hn.update.call(this,ue,{optionChanged:ue.newOption!=null})},update:function(ue,Me){var ye=this._model,ze=this._api,Ze=this._zr,er=this._coordSysMgr,sr=this._scheduler;if(!!ye){ye.setUpdatePayload(ue),sr.restoreData(ye,ue),sr.performSeriesTasks(ye),er.create(ye,ze),sr.performDataProcessorTasks(ye,ue),hi(this,ye),er.update(ye,ze),Rt(ye),sr.performVisualTasks(ye,ue),Zi(this,ye,ze,ue,Me);var yr=ye.get("backgroundColor")||"transparent",gr=ye.get("darkMode");Ze.setBackgroundColor(yr),gr!=null&&gr!=="auto"&&Ze.setDarkMode(gr),xr.trigger("afterupdate",ye,ze)}},updateTransform:function(ue){var Me=this,ye=this._model,ze=this._api;if(!!ye){ye.setUpdatePayload(ue);var Ze=[];ye.eachComponent(function(sr,yr){if(sr!=="series"){var gr=Me.getViewOfComponentModel(yr);if(gr&&gr.__alive)if(gr.updateTransform){var Gr=gr.updateTransform(yr,ye,ze,ue);Gr&&Gr.update&&Ze.push(gr)}else Ze.push(gr)}});var er=(0,K.kW)();ye.eachSeries(function(sr){var yr=Me._chartsMap[sr.__viewId];if(yr.updateTransform){var gr=yr.updateTransform(sr,ye,ze,ue);gr&&gr.update&&er.set(sr.uid,1)}else er.set(sr.uid,1)}),Rt(ye),this._scheduler.performVisualTasks(ye,ue,{setDirty:!0,dirtyMap:er}),Aa(this,ye,ze,ue,{},er),xr.trigger("afterupdate",ye,ze)}},updateView:function(ue){var Me=this._model;!Me||(Me.setUpdatePayload(ue),ie.Z.markUpdateMethod(ue,"updateView"),Rt(Me),this._scheduler.performVisualTasks(Me,ue,{setDirty:!0}),Zi(this,Me,this._api,ue,{}),xr.trigger("afterupdate",Me,this._api))},updateVisual:function(ue){var Me=this,ye=this._model;!ye||(ye.setUpdatePayload(ue),ye.eachSeries(function(ze){ze.getData().clearAllVisual()}),ie.Z.markUpdateMethod(ue,"updateVisual"),Rt(ye),this._scheduler.performVisualTasks(ye,ue,{visualType:"visual",setDirty:!0}),ye.eachComponent(function(ze,Ze){if(ze!=="series"){var er=Me.getViewOfComponentModel(Ze);er&&er.__alive&&er.updateVisual(Ze,ye,Me._api,ue)}}),ye.eachSeries(function(ze){var Ze=Me._chartsMap[ze.__viewId];Ze.updateVisual(ze,ye,Me._api,ue)}),xr.trigger("afterupdate",ye,this._api))},updateLayout:function(ue){Hn.update.call(this,ue)}},va=function(ue,Me,ye,ze){if(ue._disposed){ue.id;return}for(var Ze=ue._model,er=ue._coordSysMgr.getCoordinateSystems(),sr,yr=it.pm(Ze,ye),gr=0;gr<er.length;gr++){var Gr=er[gr];if(Gr[Me]&&(sr=Gr[Me](Ze,yr,ze))!=null)return sr}},hi=function(ue,Me){var ye=ue._chartsMap,ze=ue._scheduler;Me.eachSeries(function(Ze){ze.updateStreamModes(Ze,ye[Ze.__viewId])})},da=function(ue,Me){var ye=this,ze=this.getModel(),Ze=ue.type,er=ue.escapeConnect,sr=Tn[Ze],yr=sr.actionInfo,gr=(yr.update||"update").split(":"),Gr=gr.pop(),tn=gr[0]!=null&&(0,ea.u9)(gr[0]);this[zr]=!0;var Dr=[ue],dn=!1;ue.batch&&(dn=!0,Dr=(0,K.UI)(ue.batch,function(pn){return pn=(0,K.ce)((0,K.l7)({},pn),ue),pn.batch=null,pn}));var _i=[],bn,Fi=(0,Le.aG)(ue),Ca=(0,Le.xp)(ue);if(Ca&&(0,Le.T5)(this._api),(0,K.S6)(Dr,function(pn){if(bn=sr.action(pn,ye._model,ye._api),bn=bn||(0,K.l7)({},pn),bn.type=yr.event||bn.type,_i.push(bn),Ca){var kn=it.zH(ue),sc=kn.queryOptionMap,lc=kn.mainTypeSpecified,Uo=lc?sc.keys()[0]:"series";Da(ye,Gr,pn,Uo),_n(ye)}else Fi?(Da(ye,Gr,pn,"series"),_n(ye)):tn&&Da(ye,Gr,pn,tn.main,tn.sub)}),Gr!=="none"&&!Ca&&!Fi&&!tn)try{this[pr]?(ji(this),Hn.update.call(this,ue),this[pr]=null):Hn[Gr].call(this,ue)}catch(pn){throw this[zr]=!1,pn}if(dn?bn={type:yr.event||Ze,escapeConnect:er,batch:_i}:bn=_i[0],this[zr]=!1,!Me){var pu=this._messageCenter;if(pu.trigger(bn.type,bn),Fi){var zs={type:"selectchanged",escapeConnect:er,selected:(0,Le.C5)(ze),isFromClick:ue.isFromClick||!1,fromAction:ue.type,fromActionPayload:ue};pu.trigger(zs.type,zs)}}},Ji=function(ue){for(var Me=this._pendingActions;Me.length;){var ye=Me.shift();da.call(this,ye,ue)}},ri=function(ue){!ue&&this.trigger("updated")},pa=function(ue,Me){ue.on("rendered",function(ye){Me.trigger("rendered",ye),ue.animation.isFinished()&&!Me[pr]&&!Me._scheduler.unfinished&&!Me._pendingActions.length&&Me.trigger("finished")})},$r=function(ue,Me){ue.on("mouseover",function(ye){var ze=ye.target,Ze=(0,mr.o)(ze,Le.Av);Ze&&((0,Le.$l)(Ze,ye,Me._api),_n(Me))}).on("mouseout",function(ye){var ze=ye.target,Ze=(0,mr.o)(ze,Le.Av);Ze&&((0,Le.xr)(Ze,ye,Me._api),_n(Me))}).on("click",function(ye){var ze=ye.target,Ze=(0,mr.o)(ze,function(yr){return(0,Re.A)(yr).dataIndex!=null},!0);if(Ze){var er=Ze.selected?"unselect":"select",sr=(0,Re.A)(Ze);Me._api.dispatchAction({type:er,dataType:sr.dataType,dataIndexInside:sr.dataIndex,seriesIndex:sr.seriesIndex,isFromClick:!0})}})};function Rt(ue){ue.clearColorPalette(),ue.eachSeries(function(Me){Me.clearColorPalette()})}function Vt(ue){var Me=[],ye=[],ze=!1;if(ue.eachComponent(function(yr,gr){var Gr=gr.get("zlevel")||0,tn=gr.get("z")||0,Dr=gr.getZLevelKey();ze=ze||!!Dr,(yr==="series"?ye:Me).push({zlevel:Gr,z:tn,idx:gr.componentIndex,type:yr,key:Dr})}),ze){var Ze=Me.concat(ye),er,sr;(0,gt.Z)(Ze,function(yr,gr){return yr.zlevel===gr.zlevel?yr.z-gr.z:yr.zlevel-gr.zlevel}),(0,K.S6)(Ze,function(yr){var gr=ue.getComponent(yr.type,yr.idx),Gr=yr.zlevel,tn=yr.key;er!=null&&(Gr=Math.max(er,Gr)),tn?(Gr===er&&tn!==sr&&Gr++,sr=tn):sr&&(Gr===er&&Gr++,sr=""),er=Gr,gr.setZLevel(Gr)})}}Zi=function(ue,Me,ye,ze,Ze){Vt(Me),Wi(ue,Me,ye,ze,Ze),(0,K.S6)(ue._chartsViews,function(er){er.__alive=!1}),Aa(ue,Me,ye,ze,Ze),(0,K.S6)(ue._chartsViews,function(er){er.__alive||er.remove(Me,ye)})},Wi=function(ue,Me,ye,ze,Ze,er){(0,K.S6)(er||ue._componentsViews,function(sr){var yr=sr.__model;Je(yr,sr),sr.render(yr,Me,ye,ze),ke(yr,sr),ar(yr,sr)})},Aa=function(ue,Me,ye,ze,Ze,er){var sr=ue._scheduler;Ze=(0,K.l7)(Ze||{},{updatedSeries:Me.getSeries()}),xr.trigger("series:beforeupdate",Me,ye,Ze);var yr=!1;Me.eachSeries(function(gr){var Gr=ue._chartsMap[gr.__viewId];Gr.__alive=!0;var tn=Gr.renderTask;sr.updatePayload(tn,ze),Je(gr,Gr),er&&er.get(gr.uid)&&tn.dirty(),tn.perform(sr.getPerformArgs(tn))&&(yr=!0),Gr.group.silent=!!gr.get("silent"),de(gr,Gr),(0,Le.ci)(gr)}),sr.unfinished=yr||sr.unfinished,xr.trigger("series:layoutlabels",Me,ye,Ze),xr.trigger("series:transition",Me,ye,Ze),Me.eachSeries(function(gr){var Gr=ue._chartsMap[gr.__viewId];ke(gr,Gr),ar(gr,Gr)}),oe(ue,Me),xr.trigger("series:afterupdate",Me,ye,Ze)},_n=function(ue){ue[Ai]=!0,ue.getZr().wakeUp()},Oo=function(ue){!ue[Ai]||(ue.getZr().storage.traverse(function(Me){tr.eq(Me)||Zt(Me)}),ue[Ai]=!1)};function Zt(ue){for(var Me=[],ye=ue.currentStates,ze=0;ze<ye.length;ze++){var Ze=ye[ze];Ze==="emphasis"||Ze==="blur"||Ze==="select"||Me.push(Ze)}ue.selected&&ue.states.select&&Me.push("select"),ue.hoverState===Le.wU&&ue.states.emphasis?Me.push("emphasis"):ue.hoverState===Le.CX&&ue.states.blur&&Me.push("blur"),ue.useStates(Me)}function oe(ue,Me){var ye=ue._zr,ze=ye.storage,Ze=0;ze.traverse(function(er){er.isGroup||Ze++}),Ze>Me.get("hoverLayerThreshold")&&!dt.Z.node&&!dt.Z.worker&&Me.eachSeries(function(er){if(!er.preventUsingHoverLayer){var sr=ue._chartsMap[er.__viewId];sr.__alive&&sr.eachRendered(function(yr){yr.states.emphasis&&(yr.states.emphasis.hoverLayer=!0)})}})}function de(ue,Me){var ye=ue.get("blendMode")||null;Me.eachRendered(function(ze){ze.isGroup||(ze.style.blend=ye)})}function ke(ue,Me){if(!ue.preventAutoZ){var ye=ue.get("z")||0,ze=ue.get("zlevel")||0;Me.eachRendered(function(Ze){return Ge(Ze,ye,ze,-1/0),!0})}}function Ge(ue,Me,ye,ze){var Ze=ue.getTextContent(),er=ue.getTextGuideLine(),sr=ue.isGroup;if(sr)for(var yr=ue.childrenRef(),gr=0;gr<yr.length;gr++)ze=Math.max(Ge(yr[gr],Me,ye,ze),ze);else ue.z=Me,ue.zlevel=ye,ze=Math.max(ue.z2,ze);if(Ze&&(Ze.z=Me,Ze.zlevel=ye,isFinite(ze)&&(Ze.z2=ze+2)),er){var Gr=ue.textGuideLineConfig;er.z=Me,er.zlevel=ye,isFinite(ze)&&(er.z2=ze+(Gr&&Gr.showAbove?1:-1))}return ze}function Je(ue,Me){Me.eachRendered(function(ye){if(!tr.eq(ye)){var ze=ye.getTextContent(),Ze=ye.getTextGuideLine();ye.stateTransition&&(ye.stateTransition=null),ze&&ze.stateTransition&&(ze.stateTransition=null),Ze&&Ze.stateTransition&&(Ze.stateTransition=null),ye.hasState()?(ye.prevStates=ye.currentStates,ye.clearStates()):ye.prevStates&&(ye.prevStates=null)}})}function ar(ue,Me){var ye=ue.getModel("stateAnimation"),ze=ue.isAnimationEnabled(),Ze=ye.get("duration"),er=Ze>0?{duration:Ze,delay:ye.get("delay"),easing:ye.get("easing")}:null;Me.eachRendered(function(sr){if(sr.states&&sr.states.emphasis){if(tr.eq(sr))return;if(sr instanceof ce.ZP&&(0,Le.e9)(sr),sr.__dirty){var yr=sr.prevStates;yr&&sr.useStates(yr)}if(ze){sr.stateTransition=er;var gr=sr.getTextContent(),Gr=sr.getTextGuideLine();gr&&(gr.stateTransition=er),Gr&&(Gr.stateTransition=er)}sr.__dirty&&Zt(sr)}})}ni=function(ue){return new(function(Me){(0,N.ZT)(ye,Me);function ye(){return Me!==null&&Me.apply(this,arguments)||this}return ye.prototype.getCoordinateSystems=function(){return ue._coordSysMgr.getCoordinateSystems()},ye.prototype.getComponentByElement=function(ze){for(;ze;){var Ze=ze.__ecComponentInfo;if(Ze!=null)return ue._model.getComponent(Ze.mainType,Ze.index);ze=ze.parent}},ye.prototype.enterEmphasis=function(ze,Ze){(0,Le.fD)(ze,Ze),_n(ue)},ye.prototype.leaveEmphasis=function(ze,Ze){(0,Le.Mh)(ze,Ze),_n(ue)},ye.prototype.enterBlur=function(ze){(0,Le.SX)(ze),_n(ue)},ye.prototype.leaveBlur=function(ze){(0,Le.VP)(ze),_n(ue)},ye.prototype.enterSelect=function(ze){(0,Le.XX)(ze),_n(ue)},ye.prototype.leaveSelect=function(ze){(0,Le.SJ)(ze),_n(ue)},ye.prototype.getModel=function(){return ue.getModel()},ye.prototype.getViewOfComponentModel=function(ze){return ue.getViewOfComponentModel(ze)},ye.prototype.getViewOfSeriesModel=function(ze){return ue.getViewOfSeriesModel(ze)},ye}(ut))(ue)},Ua=function(ue){function Me(ye,ze){for(var Ze=0;Ze<ye.length;Ze++){var er=ye[Ze];er[oo]=ze}}(0,K.S6)(ba,function(ye,ze){ue._messageCenter.on(ze,function(Ze){if(na[ue.group]&&ue[oo]!==Tl){if(Ze&&Ze.escapeConnect)return;var er=ue.makeActionFromEvent(Ze),sr=[];(0,K.S6)(Ma,function(yr){yr!==ue&&yr.group===ue.group&&sr.push(yr)}),Me(sr,Tl),(0,K.S6)(sr,function(yr){yr[oo]!==fu&&yr.dispatchAction(er)}),Me(sr,hu)}})})}}(),Wt}(vt.Z),Bi=Is.prototype;Bi.on=wl("on"),Bi.off=wl("off"),Bi.one=function(Nt,Wt,Rt){var Vt=this;(0,Po.Sh)("ECharts#one is deprecated.");function Zt(){for(var oe=[],de=0;de<arguments.length;de++)oe[de]=arguments[de];Wt&&Wt.apply&&Wt.apply(this,oe),Vt.off(Nt,Zt)}this.on.call(this,Nt,Zt,Rt)};var ka=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Rs(Nt){}var Tn={},ba={},Os=[],No=[],Va=[],Ns={},Bo={},Ma={},na={},vf=+new Date-0,cu=+new Date-0,so="_echarts_instance_";function Bs(Nt,Wt,Rt){var Vt=!(Rt&&Rt.ssr);if(Vt){var Zt=vu(Nt);if(Zt)return Zt}var oe=new Is(Nt,Wt,Rt);return oe.id="ec_"+vf++,Ma[oe.id]=oe,Vt&&it.P$(Nt,so,oe.id),Ua(oe),xr.trigger("afterinit",oe),oe}function Dl(Nt){if(isArray(Nt)){var Wt=Nt;Nt=null,each(Wt,function(Rt){Rt.group!=null&&(Nt=Rt.group)}),Nt=Nt||"g_"+cu++,each(Wt,function(Rt){Rt.group=Nt})}return na[Nt]=!0,Nt}function df(Nt){na[Nt]=!1}var pf=null;function Za(Nt){isString(Nt)?Nt=Ma[Nt]:Nt instanceof Is||(Nt=vu(Nt)),Nt instanceof Is&&!Nt.isDisposed()&&Nt.dispose()}function vu(Nt){return Ma[it.IL(Nt,so)]}function Fs(Nt){return Ma[Nt]}function Al(Nt,Wt){Ns[Nt]=Wt}function Fo(Nt){(0,K.cq)(No,Nt)<0&&No.push(Nt)}function Wa(Nt,Wt){oa(Os,Nt,Wt,on)}function lo(Nt){Un("afterinit",Nt)}function gf(Nt){Un("afterupdate",Nt)}function Un(Nt,Wt){xr.on(Nt,Wt)}function ga(Nt,Wt,Rt){(0,K.mf)(Wt)&&(Rt=Wt,Wt="");var Vt=(0,K.Kn)(Nt)?Nt.type:[Nt,Nt={event:Wt}][0];Nt.event=(Nt.event||Vt).toLowerCase(),Wt=Nt.event,!ba[Wt]&&((0,K.hu)(wa.test(Vt)&&wa.test(Wt)),Tn[Vt]||(Tn[Vt]={action:Rt,actionInfo:Nt}),ba[Wt]=Vt)}function ia(Nt,Wt){ot.Z.register(Nt,Wt)}function Kr(Nt){var Wt=ot.Z.get(Nt);if(Wt)return Wt.getDimensionsInfo?Wt.getDimensionsInfo():Wt.dimensions.slice()}function zo(Nt,Wt){oa(Va,Nt,Wt,Ie,"layout")}function aa(Nt,Wt){oa(Va,Nt,Wt,Pi,"visual")}var Go=[];function oa(Nt,Wt,Rt,Vt,Zt){if(((0,K.mf)(Wt)||(0,K.Kn)(Wt))&&(Rt=Wt,Wt=Vt),!((0,K.cq)(Go,Rt)>=0)){Go.push(Rt);var oe=cr.wrapStageHandler(Rt,Zt);oe.__prio=Wt,oe.__raw=Rt,Nt.push(oe)}}function uo(Nt,Wt){Bo[Nt]=Wt}function Ea(Nt){setPlatformAPI({createCanvas:Nt})}function Hi(Nt,Wt,Rt){var Vt=(0,Vi.C)("registerMap");Vt&&Vt(Nt,Wt,Rt)}function bi(Nt){var Wt=(0,Vi.C)("getMap");return Wt&&Wt(Nt)}var Pn=Lo.DA;aa(Ms,mi),aa(Cn,Fa),aa(Cn,Ki),aa(Ms,ki),aa(Cn,ra),aa(ao,Qr),Fo(Yt),Wa(Sl,we),uo("default",hf),ga({type:Le.Ki,event:Le.Ki,update:Le.Ki},K.ZT),ga({type:Le.yx,event:Le.yx,update:Le.yx},K.ZT),ga({type:Le.Hg,event:Le.Hg,update:Le.Hg},K.ZT),ga({type:Le.JQ,event:Le.JQ,update:Le.JQ},K.ZT),ga({type:Le.iK,event:Le.iK,update:Le.iK},K.ZT),Al("light",ir),Al("dark",Fr);var du={}},49428:function(Ce,Jt,F){"use strict";F.d(Jt,{C:function(){return K},M:function(){return ct}});var N={};function ct(dt,gt){N[dt]=gt}function K(dt){return N[dt]}},73917:function(Ce,Jt,F){"use strict";F.d(Jt,{sO:function(){return at},D0:function(){return U},Li:function(){return lt},G8:function(){return W}});var N=F(1497),ct=F(66387),K={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},dt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}},gt=F(33051),vt="ZH",it="EN",et=it,H={},J={},at=ct.Z.domSupported?function(){var g=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return g.indexOf(vt)>-1?vt:et}():et;function G(g,j){g=g.toUpperCase(),J[g]=new N.Z(j),H[g]=j}function U(g){if((0,gt.HD)(g)){var j=H[g.toUpperCase()]||{};return g===vt||g===it?(0,gt.d9)(j):(0,gt.TS)((0,gt.d9)(j),(0,gt.d9)(H[et]),!1)}else return(0,gt.TS)((0,gt.d9)(g),(0,gt.d9)(H[et]),!1)}function W(g){return J[g]}function lt(){return J[et]}G(it,K),G(vt,dt)},8674:function(Ce,Jt,F){"use strict";F.d(Jt,{v:function(){return ct}});var N=F(33051);function ct(gt){return new K(gt)}var K=function(){function gt(vt){vt=vt||{},this._reset=vt.reset,this._plan=vt.plan,this._count=vt.count,this._onDirty=vt.onDirty,this._dirty=!0}return gt.prototype.perform=function(vt){var it=this._upstream,et=vt&&vt.skip;if(this._dirty&&it){var H=this.context;H.data=H.outputData=it.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var J;this._plan&&!et&&(J=this._plan(this.context));var at=lt(this._modBy),G=this._modDataCount||0,U=lt(vt&&vt.modBy),W=vt&&vt.modDataCount||0;(at!==U||G!==W)&&(J="reset");function lt(k){return!(k>=1)&&(k=1),k}var g;(this._dirty||J==="reset")&&(this._dirty=!1,g=this._doReset(et)),this._modBy=U,this._modDataCount=W;var j=vt&&vt.step;if(it?this._dueEnd=it._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var rt=this._dueIndex,$=Math.min(j!=null?this._dueIndex+j:1/0,this._dueEnd);if(!et&&(g||rt<$)){var O=this._progress;if((0,N.kJ)(O))for(var X=0;X<O.length;X++)this._doProgress(O[X],rt,$,U,W);else this._doProgress(O,rt,$,U,W)}this._dueIndex=$;var Q=this._settedOutputEnd!=null?this._settedOutputEnd:$;this._outputDueEnd=Q}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},gt.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},gt.prototype._doProgress=function(vt,it,et,H,J){dt.reset(it,et,H,J),this._callingProgress=vt,this._callingProgress({start:it,end:et,count:et-it,next:dt.next},this.context)},gt.prototype._doReset=function(vt){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var it,et;!vt&&this._reset&&(it=this._reset(this.context),it&&it.progress&&(et=it.forceFirstProgress,it=it.progress),(0,N.kJ)(it)&&!it.length&&(it=null)),this._progress=it,this._modBy=this._modDataCount=null;var H=this._downstream;return H&&H.dirty(),et},gt.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},gt.prototype.pipe=function(vt){(this._downstream!==vt||this._dirty)&&(this._downstream=vt,vt._upstream=this,vt.dirty())},gt.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},gt.prototype.getUpstream=function(){return this._upstream},gt.prototype.getDownstream=function(){return this._downstream},gt.prototype.setOutputEnd=function(vt){this._outputDueEnd=this._settedOutputEnd=vt},gt}(),dt=function(){var gt,vt,it,et,H,J={reset:function(U,W,lt,g){vt=U,gt=W,it=lt,et=g,H=Math.ceil(et/it),J.next=it>1&&et>0?G:at}};return J;function at(){return vt<gt?vt++:null}function G(){var U=vt%H*it+Math.ceil(vt/H),W=vt>=gt?null:U<et?U:vt;return vt++,W}}()},4130:function(Ce,Jt){"use strict";function F(K){return K==null?0:K.length||1}function N(K){return K}var ct=function(){function K(dt,gt,vt,it,et,H){this._old=dt,this._new=gt,this._oldKeyGetter=vt||N,this._newKeyGetter=it||N,this.context=et,this._diffModeMultiple=H==="multiple"}return K.prototype.add=function(dt){return this._add=dt,this},K.prototype.update=function(dt){return this._update=dt,this},K.prototype.updateManyToOne=function(dt){return this._updateManyToOne=dt,this},K.prototype.updateOneToMany=function(dt){return this._updateOneToMany=dt,this},K.prototype.updateManyToMany=function(dt){return this._updateManyToMany=dt,this},K.prototype.remove=function(dt){return this._remove=dt,this},K.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},K.prototype._executeOneToOne=function(){var dt=this._old,gt=this._new,vt={},it=new Array(dt.length),et=new Array(gt.length);this._initIndexMap(dt,null,it,"_oldKeyGetter"),this._initIndexMap(gt,vt,et,"_newKeyGetter");for(var H=0;H<dt.length;H++){var J=it[H],at=vt[J],G=F(at);if(G>1){var U=at.shift();at.length===1&&(vt[J]=at[0]),this._update&&this._update(U,H)}else G===1?(vt[J]=null,this._update&&this._update(at,H)):this._remove&&this._remove(H)}this._performRestAdd(et,vt)},K.prototype._executeMultiple=function(){var dt=this._old,gt=this._new,vt={},it={},et=[],H=[];this._initIndexMap(dt,vt,et,"_oldKeyGetter"),this._initIndexMap(gt,it,H,"_newKeyGetter");for(var J=0;J<et.length;J++){var at=et[J],G=vt[at],U=it[at],W=F(G),lt=F(U);if(W>1&&lt===1)this._updateManyToOne&&this._updateManyToOne(U,G),it[at]=null;else if(W===1&&lt>1)this._updateOneToMany&&this._updateOneToMany(U,G),it[at]=null;else if(W===1&&lt===1)this._update&&this._update(U,G),it[at]=null;else if(W>1&&lt>1)this._updateManyToMany&&this._updateManyToMany(U,G),it[at]=null;else if(W>1)for(var g=0;g<W;g++)this._remove&&this._remove(G[g]);else this._remove&&this._remove(G)}this._performRestAdd(H,it)},K.prototype._performRestAdd=function(dt,gt){for(var vt=0;vt<dt.length;vt++){var it=dt[vt],et=gt[it],H=F(et);if(H>1)for(var J=0;J<H;J++)this._add&&this._add(et[J]);else H===1&&this._add&&this._add(et);gt[it]=null}},K.prototype._initIndexMap=function(dt,gt,vt,it){for(var et=this._diffModeMultiple,H=0;H<dt.length;H++){var J="_ec_"+this[it](dt[H],H);if(et||(vt[H]=J),!!gt){var at=gt[J],G=F(at);G===0?(gt[J]=H,et&&vt.push(J)):G===1?gt[J]=[at,H]:at.push(H)}}},K}();Jt.Z=ct},43834:function(Ce,Jt,F){"use strict";F.d(Jt,{hG:function(){return it}});var N=F(33051),ct=F(98407),K=F(99574),dt="undefined",gt=typeof Uint32Array===dt?Array:Uint32Array,vt=typeof Uint16Array===dt?Array:Uint16Array,it=typeof Int32Array===dt?Array:Int32Array,et=typeof Float64Array===dt?Array:Float64Array,H={float:et,int:it,ordinal:Array,number:Array,time:et},J;function at(g){return g>65535?gt:vt}function G(){return[1/0,-1/0]}function U(g){var j=g.constructor;return j===Array?g.slice():new j(g)}function W(g,j,rt,$,O){var X=H[rt||"float"];if(O){var Q=g[j],k=Q&&Q.length;if(k!==$){for(var V=new X($),I=0;I<k;I++)V[I]=Q[I];g[j]=V}}else g[j]=new X($)}var lt=function(){function g(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=(0,N.kW)()}return g.prototype.initData=function(j,rt,$){this._provider=j,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var O=j.getSource(),X=this.defaultDimValueGetter=J[O.sourceFormat];this._dimValueGetter=$||X,this._rawExtent=[];var Q=(0,K.QY)(O);this._dimensions=(0,N.UI)(rt,function(k){return{type:k.type,property:k.property}}),this._initDataFromProvider(0,j.count())},g.prototype.getProvider=function(){return this._provider},g.prototype.getSource=function(){return this._provider.getSource()},g.prototype.ensureCalculationDimension=function(j,rt){var $=this._calcDimNameToIdx,O=this._dimensions,X=$.get(j);if(X!=null){if(O[X].type===rt)return X}else X=O.length;return O[X]={type:rt},$.set(j,X),this._chunks[X]=new H[rt||"float"](this._rawCount),this._rawExtent[X]=G(),X},g.prototype.collectOrdinalMeta=function(j,rt){var $=this._chunks[j],O=this._dimensions[j],X=this._rawExtent,Q=O.ordinalOffset||0,k=$.length;Q===0&&(X[j]=G());for(var V=X[j],I=Q;I<k;I++){var D=$[I]=rt.parseAndCollect($[I]);isNaN(D)||(V[0]=Math.min(D,V[0]),V[1]=Math.max(D,V[1]))}O.ordinalMeta=rt,O.ordinalOffset=k,O.type="ordinal"},g.prototype.getOrdinalMeta=function(j){var rt=this._dimensions[j],$=rt.ordinalMeta;return $},g.prototype.getDimensionProperty=function(j){var rt=this._dimensions[j];return rt&&rt.property},g.prototype.appendData=function(j){var rt=this._provider,$=this.count();rt.appendData(j);var O=rt.count();return rt.persistent||(O+=$),$<O&&this._initDataFromProvider($,O,!0),[$,O]},g.prototype.appendValues=function(j,rt){for(var $=this._chunks,O=this._dimensions,X=O.length,Q=this._rawExtent,k=this.count(),V=k+Math.max(j.length,rt||0),I=0;I<X;I++){var D=O[I];W($,I,D.type,V,!0)}for(var C=[],M=k;M<V;M++)for(var T=M-k,A=0;A<X;A++){var D=O[A],L=J.arrayRows.call(this,j[T]||C,D.property,T,A);$[A][M]=L;var Z=Q[A];L<Z[0]&&(Z[0]=L),L>Z[1]&&(Z[1]=L)}return this._rawCount=this._count=V,{start:k,end:V}},g.prototype._initDataFromProvider=function(j,rt,$){for(var O=this._provider,X=this._chunks,Q=this._dimensions,k=Q.length,V=this._rawExtent,I=(0,N.UI)(Q,function(ut){return ut.property}),D=0;D<k;D++){var C=Q[D];V[D]||(V[D]=G()),W(X,D,C.type,rt,$)}if(O.fillStorage)O.fillStorage(j,rt,X,V);else for(var M=[],T=j;T<rt;T++){M=O.getItem(T,M);for(var A=0;A<k;A++){var L=X[A],Z=this._dimValueGetter(M,I[A],T,A);L[T]=Z;var z=V[A];Z<z[0]&&(z[0]=Z),Z>z[1]&&(z[1]=Z)}}!O.persistent&&O.clean&&O.clean(),this._rawCount=this._count=rt,this._extent=[]},g.prototype.count=function(){return this._count},g.prototype.get=function(j,rt){if(!(rt>=0&&rt<this._count))return NaN;var $=this._chunks[j];return $?$[this.getRawIndex(rt)]:NaN},g.prototype.getValues=function(j,rt){var $=[],O=[];if(rt==null){rt=j,j=[];for(var X=0;X<this._dimensions.length;X++)O.push(X)}else O=j;for(var X=0,Q=O.length;X<Q;X++)$.push(this.get(O[X],rt));return $},g.prototype.getByRawIndex=function(j,rt){if(!(rt>=0&&rt<this._rawCount))return NaN;var $=this._chunks[j];return $?$[rt]:NaN},g.prototype.getSum=function(j){var rt=this._chunks[j],$=0;if(rt)for(var O=0,X=this.count();O<X;O++){var Q=this.get(j,O);isNaN(Q)||($+=Q)}return $},g.prototype.getMedian=function(j){var rt=[];this.each([j],function(X){isNaN(X)||rt.push(X)});var $=rt.sort(function(X,Q){return X-Q}),O=this.count();return O===0?0:O%2===1?$[(O-1)/2]:($[O/2]+$[O/2-1])/2},g.prototype.indexOfRawIndex=function(j){if(j>=this._rawCount||j<0)return-1;if(!this._indices)return j;var rt=this._indices,$=rt[j];if($!=null&&$<this._count&&$===j)return j;for(var O=0,X=this._count-1;O<=X;){var Q=(O+X)/2|0;if(rt[Q]<j)O=Q+1;else if(rt[Q]>j)X=Q-1;else return Q}return-1},g.prototype.indicesOfNearest=function(j,rt,$){var O=this._chunks,X=O[j],Q=[];if(!X)return Q;$==null&&($=1/0);for(var k=1/0,V=-1,I=0,D=0,C=this.count();D<C;D++){var M=this.getRawIndex(D),T=rt-X[M],A=Math.abs(T);A<=$&&((A<k||A===k&&T>=0&&V<0)&&(k=A,V=T,I=0),T===V&&(Q[I++]=D))}return Q.length=I,Q},g.prototype.getIndices=function(){var j,rt=this._indices;if(rt){var $=rt.constructor,O=this._count;if($===Array){j=new $(O);for(var X=0;X<O;X++)j[X]=rt[X]}else j=new $(rt.buffer,0,O)}else{var $=at(this._rawCount);j=new $(this.count());for(var X=0;X<j.length;X++)j[X]=X}return j},g.prototype.filter=function(j,rt){if(!this._count)return this;for(var $=this.clone(),O=$.count(),X=at($._rawCount),Q=new X(O),k=[],V=j.length,I=0,D=j[0],C=$._chunks,M=0;M<O;M++){var T=void 0,A=$.getRawIndex(M);if(V===0)T=rt(M);else if(V===1){var L=C[D][A];T=rt(L,M)}else{for(var Z=0;Z<V;Z++)k[Z]=C[j[Z]][A];k[Z]=M,T=rt.apply(null,k)}T&&(Q[I++]=A)}return I<O&&($._indices=Q),$._count=I,$._extent=[],$._updateGetRawIdx(),$},g.prototype.selectRange=function(j){var rt=this.clone(),$=rt._count;if(!$)return this;var O=(0,N.XP)(j),X=O.length;if(!X)return this;var Q=rt.count(),k=at(rt._rawCount),V=new k(Q),I=0,D=O[0],C=j[D][0],M=j[D][1],T=rt._chunks,A=!1;if(!rt._indices){var L=0;if(X===1){for(var Z=T[O[0]],z=0;z<$;z++){var ut=Z[z];(ut>=C&&ut<=M||isNaN(ut))&&(V[I++]=L),L++}A=!0}else if(X===2){for(var Z=T[O[0]],ot=T[O[1]],ht=j[O[1]][0],tt=j[O[1]][1],z=0;z<$;z++){var ut=Z[z],ft=ot[z];(ut>=C&&ut<=M||isNaN(ut))&&(ft>=ht&&ft<=tt||isNaN(ft))&&(V[I++]=L),L++}A=!0}}if(!A)if(X===1)for(var z=0;z<Q;z++){var St=rt.getRawIndex(z),ut=T[O[0]][St];(ut>=C&&ut<=M||isNaN(ut))&&(V[I++]=St)}else for(var z=0;z<Q;z++){for(var st=!0,St=rt.getRawIndex(z),xt=0;xt<X;xt++){var wt=O[xt],ut=T[wt][St];(ut<j[wt][0]||ut>j[wt][1])&&(st=!1)}st&&(V[I++]=rt.getRawIndex(z))}return I<Q&&(rt._indices=V),rt._count=I,rt._extent=[],rt._updateGetRawIdx(),rt},g.prototype.map=function(j,rt){var $=this.clone(j);return this._updateDims($,j,rt),$},g.prototype.modify=function(j,rt){this._updateDims(this,j,rt)},g.prototype._updateDims=function(j,rt,$){for(var O=j._chunks,X=[],Q=rt.length,k=j.count(),V=[],I=j._rawExtent,D=0;D<rt.length;D++)I[rt[D]]=G();for(var C=0;C<k;C++){for(var M=j.getRawIndex(C),T=0;T<Q;T++)V[T]=O[rt[T]][M];V[Q]=C;var A=$&&$.apply(null,V);if(A!=null){typeof A!="object"&&(X[0]=A,A=X);for(var D=0;D<A.length;D++){var L=rt[D],Z=A[D],z=I[L],ut=O[L];ut&&(ut[M]=Z),Z<z[0]&&(z[0]=Z),Z>z[1]&&(z[1]=Z)}}}},g.prototype.lttbDownSample=function(j,rt){var $=this.clone([j],!0),O=$._chunks,X=O[j],Q=this.count(),k=0,V=Math.floor(1/rt),I=this.getRawIndex(0),D,C,M,T=new(at(this._rawCount))(Math.min((Math.ceil(Q/V)+2)*2,Q));T[k++]=I;for(var A=1;A<Q-1;A+=V){for(var L=Math.min(A+V,Q-1),Z=Math.min(A+V*2,Q),z=(Z+L)/2,ut=0,ot=L;ot<Z;ot++){var ht=this.getRawIndex(ot),tt=X[ht];isNaN(tt)||(ut+=tt)}ut/=Z-L;var ft=A,St=Math.min(A+V,Q),st=A-1,xt=X[I];D=-1,M=ft;for(var wt=-1,Dt=0,ot=ft;ot<St;ot++){var ht=this.getRawIndex(ot),tt=X[ht];if(isNaN(tt)){Dt++,wt<0&&(wt=ht);continue}C=Math.abs((st-z)*(tt-xt)-(st-ot)*(ut-xt)),C>D&&(D=C,M=ht)}Dt>0&&Dt<St-ft&&(T[k++]=Math.min(wt,M),M=Math.max(wt,M)),T[k++]=M,I=M}return T[k++]=this.getRawIndex(Q-1),$._count=k,$._indices=T,$.getRawIndex=this._getRawIdx,$},g.prototype.downSample=function(j,rt,$,O){for(var X=this.clone([j],!0),Q=X._chunks,k=[],V=Math.floor(1/rt),I=Q[j],D=this.count(),C=X._rawExtent[j]=G(),M=new(at(this._rawCount))(Math.ceil(D/V)),T=0,A=0;A<D;A+=V){V>D-A&&(V=D-A,k.length=V);for(var L=0;L<V;L++){var Z=this.getRawIndex(A+L);k[L]=I[Z]}var z=$(k),ut=this.getRawIndex(Math.min(A+O(k,z)||0,D-1));I[ut]=z,z<C[0]&&(C[0]=z),z>C[1]&&(C[1]=z),M[T++]=ut}return X._count=T,X._indices=M,X._updateGetRawIdx(),X},g.prototype.each=function(j,rt){if(!!this._count)for(var $=j.length,O=this._chunks,X=0,Q=this.count();X<Q;X++){var k=this.getRawIndex(X);switch($){case 0:rt(X);break;case 1:rt(O[j[0]][k],X);break;case 2:rt(O[j[0]][k],O[j[1]][k],X);break;default:for(var V=0,I=[];V<$;V++)I[V]=O[j[V]][k];I[V]=X,rt.apply(null,I)}}},g.prototype.getDataExtent=function(j){var rt=this._chunks[j],$=G();if(!rt)return $;var O=this.count(),X=!this._indices,Q;if(X)return this._rawExtent[j].slice();if(Q=this._extent[j],Q)return Q.slice();Q=$;for(var k=Q[0],V=Q[1],I=0;I<O;I++){var D=this.getRawIndex(I),C=rt[D];C<k&&(k=C),C>V&&(V=C)}return Q=[k,V],this._extent[j]=Q,Q},g.prototype.getRawDataItem=function(j){var rt=this.getRawIndex(j);if(this._provider.persistent)return this._provider.getItem(rt);for(var $=[],O=this._chunks,X=0;X<O.length;X++)$.push(O[X][rt]);return $},g.prototype.clone=function(j,rt){var $=new g,O=this._chunks,X=j&&(0,N.u4)(j,function(k,V){return k[V]=!0,k},{});if(X)for(var Q=0;Q<O.length;Q++)$._chunks[Q]=X[Q]?U(O[Q]):O[Q];else $._chunks=O;return this._copyCommonProps($),rt||($._indices=this._cloneIndices()),$._updateGetRawIdx(),$},g.prototype._copyCommonProps=function(j){j._count=this._count,j._rawCount=this._rawCount,j._provider=this._provider,j._dimensions=this._dimensions,j._extent=(0,N.d9)(this._extent),j._rawExtent=(0,N.d9)(this._rawExtent)},g.prototype._cloneIndices=function(){if(this._indices){var j=this._indices.constructor,rt=void 0;if(j===Array){var $=this._indices.length;rt=new j($);for(var O=0;O<$;O++)rt[O]=this._indices[O]}else rt=new j(this._indices);return rt}return null},g.prototype._getRawIdxIdentity=function(j){return j},g.prototype._getRawIdx=function(j){return j<this._count&&j>=0?this._indices[j]:-1},g.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},g.internalField=function(){function j(rt,$,O,X){return(0,ct.yQ)(rt[X],this._dimensions[X])}J={arrayRows:j,objectRows:function(rt,$,O,X){return(0,ct.yQ)(rt[$],this._dimensions[X])},keyedColumns:j,original:function(rt,$,O,X){var Q=rt&&(rt.value==null?rt:rt.value);return(0,ct.yQ)(Q instanceof Array?Q[X]:Q,this._dimensions[X])},typedArray:function(rt,$,O,X){return rt[X]}}}(),g}();Jt.ZP=lt},85446:function(Ce,Jt,F){"use strict";var N=F(33051);function ct(it){return"_EC_"+it}var K=function(){function it(et){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=et||!1}return it.prototype.isDirected=function(){return this._directed},it.prototype.addNode=function(et,H){et=et==null?""+H:""+et;var J=this._nodesMap;if(!J[ct(et)]){var at=new dt(et,H);return at.hostGraph=this,this.nodes.push(at),J[ct(et)]=at,at}},it.prototype.getNodeByIndex=function(et){var H=this.data.getRawIndex(et);return this.nodes[H]},it.prototype.getNodeById=function(et){return this._nodesMap[ct(et)]},it.prototype.addEdge=function(et,H,J){var at=this._nodesMap,G=this._edgesMap;if(N.hj(et)&&(et=this.nodes[et]),N.hj(H)&&(H=this.nodes[H]),et instanceof dt||(et=at[ct(et)]),H instanceof dt||(H=at[ct(H)]),!(!et||!H)){var U=et.id+"-"+H.id,W=new gt(et,H,J);return W.hostGraph=this,this._directed&&(et.outEdges.push(W),H.inEdges.push(W)),et.edges.push(W),et!==H&&H.edges.push(W),this.edges.push(W),G[U]=W,W}},it.prototype.getEdgeByIndex=function(et){var H=this.edgeData.getRawIndex(et);return this.edges[H]},it.prototype.getEdge=function(et,H){et instanceof dt&&(et=et.id),H instanceof dt&&(H=H.id);var J=this._edgesMap;return this._directed?J[et+"-"+H]:J[et+"-"+H]||J[H+"-"+et]},it.prototype.eachNode=function(et,H){for(var J=this.nodes,at=J.length,G=0;G<at;G++)J[G].dataIndex>=0&&et.call(H,J[G],G)},it.prototype.eachEdge=function(et,H){for(var J=this.edges,at=J.length,G=0;G<at;G++)J[G].dataIndex>=0&&J[G].node1.dataIndex>=0&&J[G].node2.dataIndex>=0&&et.call(H,J[G],G)},it.prototype.breadthFirstTraverse=function(et,H,J,at){if(H instanceof dt||(H=this._nodesMap[ct(H)]),!!H){for(var G=J==="out"?"outEdges":J==="in"?"inEdges":"edges",U=0;U<this.nodes.length;U++)this.nodes[U].__visited=!1;if(!et.call(at,H,null))for(var W=[H];W.length;)for(var lt=W.shift(),g=lt[G],U=0;U<g.length;U++){var j=g[U],rt=j.node1===lt?j.node2:j.node1;if(!rt.__visited){if(et.call(at,rt,lt))return;W.push(rt),rt.__visited=!0}}}},it.prototype.update=function(){for(var et=this.data,H=this.edgeData,J=this.nodes,at=this.edges,G=0,U=J.length;G<U;G++)J[G].dataIndex=-1;for(var G=0,U=et.count();G<U;G++)J[et.getRawIndex(G)].dataIndex=G;H.filterSelf(function(W){var lt=at[H.getRawIndex(W)];return lt.node1.dataIndex>=0&&lt.node2.dataIndex>=0});for(var G=0,U=at.length;G<U;G++)at[G].dataIndex=-1;for(var G=0,U=H.count();G<U;G++)at[H.getRawIndex(G)].dataIndex=G},it.prototype.clone=function(){for(var et=new it(this._directed),H=this.nodes,J=this.edges,at=0;at<H.length;at++)et.addNode(H[at].id,H[at].dataIndex);for(var at=0;at<J.length;at++){var G=J[at];et.addEdge(G.node1.id,G.node2.id,G.dataIndex)}return et},it}(),dt=function(){function it(et,H){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=et??"",this.dataIndex=H??-1}return it.prototype.degree=function(){return this.edges.length},it.prototype.inDegree=function(){return this.inEdges.length},it.prototype.outDegree=function(){return this.outEdges.length},it.prototype.getModel=function(et){if(!(this.dataIndex<0)){var H=this.hostGraph,J=H.data.getItemModel(this.dataIndex);return J.getModel(et)}},it.prototype.getAdjacentDataIndices=function(){for(var et={edge:[],node:[]},H=0;H<this.edges.length;H++){var J=this.edges[H];J.dataIndex<0||(et.edge.push(J.dataIndex),et.node.push(J.node1.dataIndex,J.node2.dataIndex))}return et},it}(),gt=function(){function it(et,H,J){this.dataIndex=-1,this.node1=et,this.node2=H,this.dataIndex=J??-1}return it.prototype.getModel=function(et){if(!(this.dataIndex<0)){var H=this.hostGraph,J=H.edgeData.getItemModel(this.dataIndex);return J.getModel(et)}},it.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},it}();function vt(it,et){return{getValue:function(H){var J=this[it][et];return J.getStore().get(J.getDimensionIndex(H||"value"),this.dataIndex)},setVisual:function(H,J){this.dataIndex>=0&&this[it][et].setItemVisual(this.dataIndex,H,J)},getVisual:function(H){return this[it][et].getItemVisual(this.dataIndex,H)},setLayout:function(H,J){this.dataIndex>=0&&this[it][et].setItemLayout(this.dataIndex,H,J)},getLayout:function(){return this[it][et].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[it][et].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[it][et].getRawIndex(this.dataIndex)}}}N.jB(dt,vt("hostGraph","data")),N.jB(gt,vt("hostGraph","edgeData")),Jt.ZP=K},51401:function(Ce,Jt,F){"use strict";var N=F(33051),ct=0,K=function(){function gt(vt){this.categories=vt.categories||[],this._needCollect=vt.needCollect,this._deduplication=vt.deduplication,this.uid=++ct}return gt.createByAxisModel=function(vt){var it=vt.option,et=it.data,H=et&&(0,N.UI)(et,dt);return new gt({categories:H,needCollect:!H,deduplication:it.dedplication!==!1})},gt.prototype.getOrdinal=function(vt){return this._getOrCreateMap().get(vt)},gt.prototype.parseAndCollect=function(vt){var it,et=this._needCollect;if(!(0,N.HD)(vt)&&!et)return vt;if(et&&!this._deduplication)return it=this.categories.length,this.categories[it]=vt,it;var H=this._getOrCreateMap();return it=H.get(vt),it==null&&(et?(it=this.categories.length,this.categories[it]=vt,H.set(vt,it)):it=NaN),it},gt.prototype._getOrCreateMap=function(){return this._map||(this._map=(0,N.kW)(this.categories))},gt}();function dt(gt){return(0,N.Kn)(gt)&&gt.value!=null?gt.value:gt+""}Jt.Z=K},5101:function(Ce,Jt,F){"use strict";var N=F(33051),ct=F(1497),K=F(4130),dt=F(68540),gt=F(10381),vt=F(35440),it=F(94279),et=F(32234),H=F(30106),J=F(99574),at=F(43834),G=F(31029),U=N.Kn,W=N.UI,lt=typeof Int32Array>"u"?Array:Int32Array,g="e\0\0",j=-1,rt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],$=["_approximateExtent"],O,X,Q,k,V,I,D,C=function(){function M(T,A){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var L,Z=!1;(0,G.bB)(T)?(L=T.dimensions,this._dimOmitted=T.isDimensionOmitted(),this._schema=T):(Z=!0,L=T),L=L||["x","y"];for(var z={},ut=[],ot={},ht=!1,tt={},ft=0;ft<L.length;ft++){var St=L[ft],st=N.HD(St)?new vt.Z({name:St}):St instanceof vt.Z?St:new vt.Z(St),xt=st.name;st.type=st.type||"float",st.coordDim||(st.coordDim=xt,st.coordDimIndex=0);var wt=st.otherDims=st.otherDims||{};ut.push(xt),z[xt]=st,tt[xt]!=null&&(ht=!0),st.createInvertedIndices&&(ot[xt]=[]),wt.itemName===0&&(this._nameDimIdx=ft),wt.itemId===0&&(this._idDimIdx=ft),Z&&(st.storeDimIndex=ft)}if(this.dimensions=ut,this._dimInfos=z,this._initGetDimensionInfo(ht),this.hostModel=A,this._invertedIndicesMap=ot,this._dimOmitted){var Dt=this._dimIdxToName=N.kW();N.S6(ut,function(It){Dt.set(z[It].storeDimIndex,It)})}}return M.prototype.getDimension=function(T){var A=this._recognizeDimIndex(T);if(A==null)return T;if(A=T,!this._dimOmitted)return this.dimensions[A];var L=this._dimIdxToName.get(A);if(L!=null)return L;var Z=this._schema.getSourceDimension(A);if(Z)return Z.name},M.prototype.getDimensionIndex=function(T){var A=this._recognizeDimIndex(T);if(A!=null)return A;if(T==null)return-1;var L=this._getDimInfo(T);return L?L.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(T):-1},M.prototype._recognizeDimIndex=function(T){if(N.hj(T)||T!=null&&!isNaN(T)&&!this._getDimInfo(T)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(T)<0))return+T},M.prototype._getStoreDimIndex=function(T){var A=this.getDimensionIndex(T);return A},M.prototype.getDimensionInfo=function(T){return this._getDimInfo(this.getDimension(T))},M.prototype._initGetDimensionInfo=function(T){var A=this._dimInfos;this._getDimInfo=T?function(L){return A.hasOwnProperty(L)?A[L]:void 0}:function(L){return A[L]}},M.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},M.prototype.mapDimension=function(T,A){var L=this._dimSummary;if(A==null)return L.encodeFirstDimNotExtra[T];var Z=L.encode[T];return Z?Z[A]:null},M.prototype.mapDimensionsAll=function(T){var A=this._dimSummary,L=A.encode[T];return(L||[]).slice()},M.prototype.getStore=function(){return this._store},M.prototype.initData=function(T,A,L){var Z=this,z;if(T instanceof at.ZP&&(z=T),!z){var ut=this.dimensions,ot=(0,J.Ld)(T)||N.zG(T)?new dt.Pl(T,ut.length):T;z=new at.ZP;var ht=W(ut,function(tt){return{type:Z._dimInfos[tt].type,property:tt}});z.initData(ot,ht,L)}this._store=z,this._nameList=(A||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,z.count()),this._dimSummary=(0,gt.y)(this,this._schema),this.userOutput=this._dimSummary.userOutput},M.prototype.appendData=function(T){var A=this._store.appendData(T);this._doInit(A[0],A[1])},M.prototype.appendValues=function(T,A){var L=this._store.appendValues(T,A.length),Z=L.start,z=L.end,ut=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),A)for(var ot=Z;ot<z;ot++){var ht=ot-Z;this._nameList[ot]=A[ht],ut&&D(this,ot)}},M.prototype._updateOrdinalMeta=function(){for(var T=this._store,A=this.dimensions,L=0;L<A.length;L++){var Z=this._dimInfos[A[L]];Z.ordinalMeta&&T.collectOrdinalMeta(Z.storeDimIndex,Z.ordinalMeta)}},M.prototype._shouldMakeIdFromName=function(){var T=this._store.getProvider();return this._idDimIdx==null&&T.getSource().sourceFormat!==it.J5&&!T.fillStorage},M.prototype._doInit=function(T,A){if(!(T>=A)){var L=this._store,Z=L.getProvider();this._updateOrdinalMeta();var z=this._nameList,ut=this._idList,ot=Z.getSource().sourceFormat,ht=ot===it.cy;if(ht&&!Z.pure)for(var tt=[],ft=T;ft<A;ft++){var St=Z.getItem(ft,tt);if(!this.hasItemOption&&(0,et.Co)(St)&&(this.hasItemOption=!0),St){var st=St.name;z[ft]==null&&st!=null&&(z[ft]=(0,et.U5)(st,null));var xt=St.id;ut[ft]==null&&xt!=null&&(ut[ft]=(0,et.U5)(xt,null))}}if(this._shouldMakeIdFromName())for(var ft=T;ft<A;ft++)D(this,ft);O(this)}},M.prototype.getApproximateExtent=function(T){return this._approximateExtent[T]||this._store.getDataExtent(this._getStoreDimIndex(T))},M.prototype.setApproximateExtent=function(T,A){A=this.getDimension(A),this._approximateExtent[A]=T.slice()},M.prototype.getCalculationInfo=function(T){return this._calculationInfo[T]},M.prototype.setCalculationInfo=function(T,A){U(T)?N.l7(this._calculationInfo,T):this._calculationInfo[T]=A},M.prototype.getName=function(T){var A=this.getRawIndex(T),L=this._nameList[A];return L==null&&this._nameDimIdx!=null&&(L=Q(this,this._nameDimIdx,A)),L==null&&(L=""),L},M.prototype._getCategory=function(T,A){var L=this._store.get(T,A),Z=this._store.getOrdinalMeta(T);return Z?Z.categories[L]:L},M.prototype.getId=function(T){return X(this,this.getRawIndex(T))},M.prototype.count=function(){return this._store.count()},M.prototype.get=function(T,A){var L=this._store,Z=this._dimInfos[T];if(Z)return L.get(Z.storeDimIndex,A)},M.prototype.getByRawIndex=function(T,A){var L=this._store,Z=this._dimInfos[T];if(Z)return L.getByRawIndex(Z.storeDimIndex,A)},M.prototype.getIndices=function(){return this._store.getIndices()},M.prototype.getDataExtent=function(T){return this._store.getDataExtent(this._getStoreDimIndex(T))},M.prototype.getSum=function(T){return this._store.getSum(this._getStoreDimIndex(T))},M.prototype.getMedian=function(T){return this._store.getMedian(this._getStoreDimIndex(T))},M.prototype.getValues=function(T,A){var L=this,Z=this._store;return N.kJ(T)?Z.getValues(W(T,function(z){return L._getStoreDimIndex(z)}),A):Z.getValues(T)},M.prototype.hasValue=function(T){for(var A=this._dimSummary.dataDimIndicesOnCoord,L=0,Z=A.length;L<Z;L++)if(isNaN(this._store.get(A[L],T)))return!1;return!0},M.prototype.indexOfName=function(T){for(var A=0,L=this._store.count();A<L;A++)if(this.getName(A)===T)return A;return-1},M.prototype.getRawIndex=function(T){return this._store.getRawIndex(T)},M.prototype.indexOfRawIndex=function(T){return this._store.indexOfRawIndex(T)},M.prototype.rawIndexOf=function(T,A){var L=T&&this._invertedIndicesMap[T],Z=L[A];return Z==null||isNaN(Z)?j:Z},M.prototype.indicesOfNearest=function(T,A,L){return this._store.indicesOfNearest(this._getStoreDimIndex(T),A,L)},M.prototype.each=function(T,A,L){"use strict";N.mf(T)&&(L=A,A=T,T=[]);var Z=L||this,z=W(k(T),this._getStoreDimIndex,this);this._store.each(z,Z?N.ak(A,Z):A)},M.prototype.filterSelf=function(T,A,L){"use strict";N.mf(T)&&(L=A,A=T,T=[]);var Z=L||this,z=W(k(T),this._getStoreDimIndex,this);return this._store=this._store.filter(z,Z?N.ak(A,Z):A),this},M.prototype.selectRange=function(T){"use strict";var A=this,L={},Z=N.XP(T),z=[];return N.S6(Z,function(ut){var ot=A._getStoreDimIndex(ut);L[ot]=T[ut],z.push(ot)}),this._store=this._store.selectRange(L),this},M.prototype.mapArray=function(T,A,L){"use strict";N.mf(T)&&(L=A,A=T,T=[]),L=L||this;var Z=[];return this.each(T,function(){Z.push(A&&A.apply(this,arguments))},L),Z},M.prototype.map=function(T,A,L,Z){"use strict";var z=L||Z||this,ut=W(k(T),this._getStoreDimIndex,this),ot=I(this);return ot._store=this._store.map(ut,z?N.ak(A,z):A),ot},M.prototype.modify=function(T,A,L,Z){var z=this,ut=L||Z||this,ot=W(k(T),this._getStoreDimIndex,this);this._store.modify(ot,ut?N.ak(A,ut):A)},M.prototype.downSample=function(T,A,L,Z){var z=I(this);return z._store=this._store.downSample(this._getStoreDimIndex(T),A,L,Z),z},M.prototype.lttbDownSample=function(T,A){var L=I(this);return L._store=this._store.lttbDownSample(this._getStoreDimIndex(T),A),L},M.prototype.getRawDataItem=function(T){return this._store.getRawDataItem(T)},M.prototype.getItemModel=function(T){var A=this.hostModel,L=this.getRawDataItem(T);return new ct.Z(L,A,A&&A.ecModel)},M.prototype.diff=function(T){var A=this;return new K.Z(T?T.getStore().getIndices():[],this.getStore().getIndices(),function(L){return X(T,L)},function(L){return X(A,L)})},M.prototype.getVisual=function(T){var A=this._visual;return A&&A[T]},M.prototype.setVisual=function(T,A){this._visual=this._visual||{},U(T)?N.l7(this._visual,T):this._visual[T]=A},M.prototype.getItemVisual=function(T,A){var L=this._itemVisuals[T],Z=L&&L[A];return Z??this.getVisual(A)},M.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},M.prototype.ensureUniqueItemVisual=function(T,A){var L=this._itemVisuals,Z=L[T];Z||(Z=L[T]={});var z=Z[A];return z==null&&(z=this.getVisual(A),N.kJ(z)?z=z.slice():U(z)&&(z=N.l7({},z)),Z[A]=z),z},M.prototype.setItemVisual=function(T,A,L){var Z=this._itemVisuals[T]||{};this._itemVisuals[T]=Z,U(A)?N.l7(Z,A):Z[A]=L},M.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},M.prototype.setLayout=function(T,A){U(T)?N.l7(this._layout,T):this._layout[T]=A},M.prototype.getLayout=function(T){return this._layout[T]},M.prototype.getItemLayout=function(T){return this._itemLayouts[T]},M.prototype.setItemLayout=function(T,A,L){this._itemLayouts[T]=L?N.l7(this._itemLayouts[T]||{},A):A},M.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},M.prototype.setItemGraphicEl=function(T,A){var L=this.hostModel&&this.hostModel.seriesIndex;(0,H.Q)(L,this.dataType,T,A),this._graphicEls[T]=A},M.prototype.getItemGraphicEl=function(T){return this._graphicEls[T]},M.prototype.eachItemGraphicEl=function(T,A){N.S6(this._graphicEls,function(L,Z){L&&T&&T.call(A,L,Z)})},M.prototype.cloneShallow=function(T){return T||(T=new M(this._schema?this._schema:W(this.dimensions,this._getDimInfo,this),this.hostModel)),V(T,this),T._store=this._store,T},M.prototype.wrapMethod=function(T,A){var L=this[T];!N.mf(L)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(T),this[T]=function(){var Z=L.apply(this,arguments);return A.apply(this,[Z].concat(N.tP(arguments)))})},M.internalField=function(){O=function(T){var A=T._invertedIndicesMap;N.S6(A,function(L,Z){var z=T._dimInfos[Z],ut=z.ordinalMeta,ot=T._store;if(ut){L=A[Z]=new lt(ut.categories.length);for(var ht=0;ht<L.length;ht++)L[ht]=j;for(var ht=0;ht<ot.count();ht++)L[ot.get(z.storeDimIndex,ht)]=ht}})},Q=function(T,A,L){return(0,et.U5)(T._getCategory(A,L),null)},X=function(T,A){var L=T._idList[A];return L==null&&T._idDimIdx!=null&&(L=Q(T,T._idDimIdx,A)),L==null&&(L=g+A),L},k=function(T){return N.kJ(T)||(T=T!=null?[T]:[]),T},I=function(T){var A=new M(T._schema?T._schema:W(T.dimensions,T._getDimInfo,T),T.hostModel);return V(A,T),A},V=function(T,A){N.S6(rt.concat(A.__wrappedMethods||[]),function(L){A.hasOwnProperty(L)&&(T[L]=A[L])}),T.__wrappedMethods=A.__wrappedMethods,N.S6($,function(L){T[L]=N.d9(A[L])}),T._calculationInfo=N.l7({},A._calculationInfo)},D=function(T,A){var L=T._nameList,Z=T._idList,z=T._nameDimIdx,ut=T._idDimIdx,ot=L[A],ht=Z[A];if(ot==null&&z!=null&&(L[A]=ot=Q(T,z,A)),ht==null&&ut!=null&&(Z[A]=ht=Q(T,ut,A)),ht==null&&ot!=null){var tt=T._nameRepeatCount,ft=tt[ot]=(tt[ot]||0)+1;ht=ot,ft>1&&(ht+="__ec__"+ft),Z[A]=ht}}}(),M}();Jt.Z=C},35440:function(Ce,Jt,F){"use strict";var N=F(33051),ct=function(){function K(dt){this.otherDims={},dt!=null&&N.l7(this,dt)}return K}();Jt.Z=ct},99574:function(Ce,Jt,F){"use strict";F.d(Jt,{Kp:function(){return J},Ld:function(){return vt},ML:function(){return H},QY:function(){return lt},_P:function(){return it},nx:function(){return et}});var N=F(33051),ct=F(94279),K=F(32234),dt=F(61772),gt=function(){function g(j){this.data=j.data||(j.sourceFormat===ct.hL?{}:[]),this.sourceFormat=j.sourceFormat||ct.RA,this.seriesLayoutBy=j.seriesLayoutBy||ct.fY,this.startIndex=j.startIndex||0,this.dimensionsDetectedCount=j.dimensionsDetectedCount,this.metaRawOption=j.metaRawOption;var rt=this.dimensionsDefine=j.dimensionsDefine;if(rt)for(var $=0;$<rt.length;$++){var O=rt[$];O.type==null&&(0,dt.u7)(this,$)===dt.Dq.Must&&(O.type="ordinal")}}return g}();function vt(g){return g instanceof gt}function it(g,j,rt){rt=rt||J(g);var $=j.seriesLayoutBy,O=at(g,rt,$,j.sourceHeader,j.dimensions),X=new gt({data:g,sourceFormat:rt,seriesLayoutBy:$,dimensionsDefine:O.dimensionsDefine,startIndex:O.startIndex,dimensionsDetectedCount:O.dimensionsDetectedCount,metaRawOption:(0,N.d9)(j)});return X}function et(g){return new gt({data:g,sourceFormat:(0,N.fU)(g)?ct.J5:ct.cy})}function H(g){return new gt({data:g.data,sourceFormat:g.sourceFormat,seriesLayoutBy:g.seriesLayoutBy,dimensionsDefine:(0,N.d9)(g.dimensionsDefine),startIndex:g.startIndex,dimensionsDetectedCount:g.dimensionsDetectedCount})}function J(g){var j=ct.RA;if((0,N.fU)(g))j=ct.J5;else if((0,N.kJ)(g)){g.length===0&&(j=ct.XD);for(var rt=0,$=g.length;rt<$;rt++){var O=g[rt];if(O!=null){if((0,N.kJ)(O)){j=ct.XD;break}else if((0,N.Kn)(O)){j=ct.qb;break}}}}else if((0,N.Kn)(g)){for(var X in g)if((0,N.RI)(g,X)&&(0,N.zG)(g[X])){j=ct.hL;break}}return j}function at(g,j,rt,$,O){var X,Q;if(!g)return{dimensionsDefine:U(O),startIndex:Q,dimensionsDetectedCount:X};if(j===ct.XD){var k=g;$==="auto"||$==null?W(function(I){I!=null&&I!=="-"&&((0,N.HD)(I)?Q==null&&(Q=1):Q=0)},rt,k,10):Q=(0,N.hj)($)?$:$?1:0,!O&&Q===1&&(O=[],W(function(I,D){O[D]=I!=null?I+"":""},rt,k,1/0)),X=O?O.length:rt===ct.Wc?k.length:k[0]?k[0].length:null}else if(j===ct.qb)O||(O=G(g));else if(j===ct.hL)O||(O=[],(0,N.S6)(g,function(I,D){O.push(D)}));else if(j===ct.cy){var V=(0,K.C4)(g[0]);X=(0,N.kJ)(V)&&V.length||1}else ct.J5;return{startIndex:Q,dimensionsDefine:U(O),dimensionsDetectedCount:X}}function G(g){for(var j=0,rt;j<g.length&&!(rt=g[j++]););if(rt){var $=[];return(0,N.S6)(rt,function(O,X){$.push(X)}),$}}function U(g){if(!!g){var j=(0,N.kW)();return(0,N.UI)(g,function(rt,$){rt=(0,N.Kn)(rt)?rt:{name:rt};var O={name:rt.name,displayName:rt.displayName,type:rt.type};if(O.name==null)return O;O.name+="",O.displayName==null&&(O.displayName=O.name);var X=j.get(O.name);return X?O.name+="-"+X.count++:j.set(O.name,{count:1}),O})}}function W(g,j,rt,$){if(j===ct.Wc)for(var O=0;O<rt.length&&O<$;O++)g(rt[O]?rt[O][0]:null,O);else for(var X=rt[0]||[],O=0;O<X.length&&O<$;O++)g(X[O],O)}function lt(g){var j=g.sourceFormat;return j===ct.qb||j===ct.hL}},31029:function(Ce,Jt,F){"use strict";F.d(Jt,{Eo:function(){return vt},Jj:function(){return H},Jl:function(){return J},bB:function(){return it},v5:function(){return et}});var N=F(33051),ct=F(32234),K=F(99574),dt=(0,ct.Yf)(),gt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},vt=function(){function at(G){this.dimensions=G.dimensions,this._dimOmitted=G.dimensionOmitted,this.source=G.source,this._fullDimCount=G.fullDimensionCount,this._updateDimOmitted(G.dimensionOmitted)}return at.prototype.isDimensionOmitted=function(){return this._dimOmitted},at.prototype._updateDimOmitted=function(G){this._dimOmitted=G,G&&(this._dimNameMap||(this._dimNameMap=H(this.source)))},at.prototype.getSourceDimensionIndex=function(G){return(0,N.pD)(this._dimNameMap.get(G),-1)},at.prototype.getSourceDimension=function(G){var U=this.source.dimensionsDefine;if(U)return U[G]},at.prototype.makeStoreSchema=function(){for(var G=this._fullDimCount,U=(0,K.QY)(this.source),W=!J(G),lt="",g=[],j=0,rt=0;j<G;j++){var $=void 0,O=void 0,X=void 0,Q=this.dimensions[rt];if(Q&&Q.storeDimIndex===j)$=U?Q.name:null,O=Q.type,X=Q.ordinalMeta,rt++;else{var k=this.getSourceDimension(j);k&&($=U?k.name:null,O=k.type)}g.push({property:$,type:O,ordinalMeta:X}),U&&$!=null&&(!Q||!Q.isCalculationCoord)&&(lt+=W?$.replace(/\`/g,"`1").replace(/\$/g,"`2"):$),lt+="$",lt+=gt[O]||"f",X&&(lt+=X.uid),lt+="$"}var V=this.source,I=[V.seriesLayoutBy,V.startIndex,lt].join("$$");return{dimensions:g,hash:I}},at.prototype.makeOutputDimensionNames=function(){for(var G=[],U=0,W=0;U<this._fullDimCount;U++){var lt=void 0,g=this.dimensions[W];if(g&&g.storeDimIndex===U)g.isCalculationCoord||(lt=g.name),W++;else{var j=this.getSourceDimension(U);j&&(lt=j.name)}G.push(lt)}return G},at.prototype.appendCalculationDimension=function(G){this.dimensions.push(G),G.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},at}();function it(at){return at instanceof vt}function et(at){for(var G=(0,N.kW)(),U=0;U<(at||[]).length;U++){var W=at[U],lt=(0,N.Kn)(W)?W.name:W;lt!=null&&G.get(lt)==null&&G.set(lt,U)}return G}function H(at){var G=dt(at);return G.dimNameMap||(G.dimNameMap=et(at.dimensionsDefine))}function J(at){return at>30}},55623:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return J},q:function(){return H}});var N=F(94279),ct=F(35440),K=F(33051),dt=F(99574),gt=F(43834),vt=F(32234),it=F(61772),et=F(31029);function H(W,lt){return J(W,lt).dimensions}function J(W,lt){(0,dt.Ld)(W)||(W=(0,dt.nx)(W)),lt=lt||{};var g=lt.coordDimensions||[],j=lt.dimensionsDefine||W.dimensionsDefine||[],rt=(0,K.kW)(),$=[],O=G(W,g,j,lt.dimensionsCount),X=lt.canOmitUnusedDimensions&&(0,et.Jl)(O),Q=j===W.dimensionsDefine,k=Q?(0,et.Jj)(W):(0,et.v5)(j),V=lt.encodeDefine;!V&&lt.encodeDefaulter&&(V=lt.encodeDefaulter(W,O));for(var I=(0,K.kW)(V),D=new gt.hG(O),C=0;C<D.length;C++)D[C]=-1;function M(St){var st=D[St];if(st<0){var xt=j[St],wt=(0,K.Kn)(xt)?xt:{name:xt},Dt=new ct.Z,It=wt.name;It!=null&&k.get(It)!=null&&(Dt.name=Dt.displayName=It),wt.type!=null&&(Dt.type=wt.type),wt.displayName!=null&&(Dt.displayName=wt.displayName);var Et=$.length;return D[St]=Et,Dt.storeDimIndex=St,$.push(Dt),Dt}return $[st]}if(!X)for(var C=0;C<O;C++)M(C);I.each(function(St,st){var xt=(0,vt.kF)(St).slice();if(xt.length===1&&!(0,K.HD)(xt[0])&&xt[0]<0){I.set(st,!1);return}var wt=I.set(st,[]);(0,K.S6)(xt,function(Dt,It){var Et=(0,K.HD)(Dt)?k.get(Dt):Dt;Et!=null&&Et<O&&(wt[It]=Et,A(M(Et),st,It))})});var T=0;(0,K.S6)(g,function(St){var st,xt,wt,Dt;if((0,K.HD)(St))st=St,Dt={};else{Dt=St,st=Dt.name;var It=Dt.ordinalMeta;Dt.ordinalMeta=null,Dt=(0,K.l7)({},Dt),Dt.ordinalMeta=It,xt=Dt.dimsDef,wt=Dt.otherDims,Dt.name=Dt.coordDim=Dt.coordDimIndex=Dt.dimsDef=Dt.otherDims=null}var Et=I.get(st);if(Et!==!1){if(Et=(0,vt.kF)(Et),!Et.length)for(var zt=0;zt<(xt&&xt.length||1);zt++){for(;T<O&&M(T).coordDim!=null;)T++;T<O&&Et.push(T++)}(0,K.S6)(Et,function(Bt,Ht){var $t=M(Bt);if(Q&&Dt.type!=null&&($t.type=Dt.type),A((0,K.ce)($t,Dt),st,Ht),$t.name==null&&xt){var ee=xt[Ht];!(0,K.Kn)(ee)&&(ee={name:ee}),$t.name=$t.displayName=ee.name,$t.defaultTooltip=ee.defaultTooltip}wt&&(0,K.ce)($t.otherDims,wt)})}});function A(St,st,xt){N.f7.get(st)!=null?St.otherDims[st]=xt:(St.coordDim=st,St.coordDimIndex=xt,rt.set(st,!0))}var L=lt.generateCoord,Z=lt.generateCoordCount,z=Z!=null;Z=L?Z||1:0;var ut=L||"value";function ot(St){St.name==null&&(St.name=St.coordDim)}if(X)(0,K.S6)($,function(St){ot(St)}),$.sort(function(St,st){return St.storeDimIndex-st.storeDimIndex});else for(var ht=0;ht<O;ht++){var tt=M(ht),ft=tt.coordDim;ft==null&&(tt.coordDim=U(ut,rt,z),tt.coordDimIndex=0,(!L||Z<=0)&&(tt.isExtraCoord=!0),Z--),ot(tt),tt.type==null&&((0,it.u7)(W,ht)===it.Dq.Must||tt.isExtraCoord&&(tt.otherDims.itemName!=null||tt.otherDims.seriesName!=null))&&(tt.type="ordinal")}return at($),new et.Eo({source:W,dimensions:$,fullDimensionCount:O,dimensionOmitted:X})}function at(W){for(var lt=(0,K.kW)(),g=0;g<W.length;g++){var j=W[g],rt=j.name,$=lt.get(rt)||0;$>0&&(j.name=rt+($-1)),$++,lt.set(rt,$)}}function G(W,lt,g,j){var rt=Math.max(W.dimensionsDetectedCount||1,lt.length,g.length,j||0);return(0,K.S6)(lt,function($){var O;(0,K.Kn)($)&&(O=$.dimsDef)&&(rt=Math.max(rt,O.length))}),rt}function U(W,lt,g){var j=lt.data;if(g||j.hasOwnProperty(W)){for(var rt=0;j.hasOwnProperty(W+rt);)rt++;W+=rt}return lt.set(W,!0),W}},68540:function(Ce,Jt,F){"use strict";F.d(Jt,{Pl:function(){return J},_j:function(){return U},a:function(){return g},hk:function(){return X},tB:function(){return $}});var N=F(33051),ct=F(32234),K=F(99574),dt=F(94279),gt,vt,it,et,H,J=function(){function k(V,I){var D=(0,K.Ld)(V)?V:(0,K.nx)(V);this._source=D;var C=this._data=D.data;D.sourceFormat===dt.J5&&(this._offset=0,this._dimSize=I,this._data=C),H(this,C,D)}return k.prototype.getSource=function(){return this._source},k.prototype.count=function(){return 0},k.prototype.getItem=function(V,I){},k.prototype.appendData=function(V){},k.prototype.clean=function(){},k.protoInitialize=function(){var V=k.prototype;V.pure=!1,V.persistent=!0}(),k.internalField=function(){var V;H=function(T,A,L){var Z=L.sourceFormat,z=L.seriesLayoutBy,ut=L.startIndex,ot=L.dimensionsDefine,ht=et[O(Z,z)];if((0,N.l7)(T,ht),Z===dt.J5)T.getItem=I,T.count=C,T.fillStorage=D;else{var tt=U(Z,z);T.getItem=(0,N.ak)(tt,null,A,ut,ot);var ft=g(Z,z);T.count=(0,N.ak)(ft,null,A,ut,ot)}};var I=function(T,A){T=T-this._offset,A=A||[];for(var L=this._data,Z=this._dimSize,z=Z*T,ut=0;ut<Z;ut++)A[ut]=L[z+ut];return A},D=function(T,A,L,Z){for(var z=this._data,ut=this._dimSize,ot=0;ot<ut;ot++){for(var ht=Z[ot],tt=ht[0]==null?1/0:ht[0],ft=ht[1]==null?-1/0:ht[1],St=A-T,st=L[ot],xt=0;xt<St;xt++){var wt=z[xt*ut+ot];st[T+xt]=wt,wt<tt&&(tt=wt),wt>ft&&(ft=wt)}ht[0]=tt,ht[1]=ft}},C=function(){return this._data?this._data.length/this._dimSize:0};et=(V={},V[dt.XD+"_"+dt.fY]={pure:!0,appendData:M},V[dt.XD+"_"+dt.Wc]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},V[dt.qb]={pure:!0,appendData:M},V[dt.hL]={pure:!0,appendData:function(T){var A=this._data;(0,N.S6)(T,function(L,Z){for(var z=A[Z]||(A[Z]=[]),ut=0;ut<(L||[]).length;ut++)z.push(L[ut])})}},V[dt.cy]={appendData:M},V[dt.J5]={persistent:!1,pure:!0,appendData:function(T){this._data=T},clean:function(){this._offset+=this.count(),this._data=null}},V);function M(T){for(var A=0;A<T.length;A++)this._data.push(T[A])}}(),k}(),at=function(k,V,I,D){return k[D]},G=(gt={},gt[dt.XD+"_"+dt.fY]=function(k,V,I,D){return k[D+V]},gt[dt.XD+"_"+dt.Wc]=function(k,V,I,D,C){D+=V;for(var M=C||[],T=k,A=0;A<T.length;A++){var L=T[A];M[A]=L?L[D]:null}return M},gt[dt.qb]=at,gt[dt.hL]=function(k,V,I,D,C){for(var M=C||[],T=0;T<I.length;T++){var A=I[T].name,L=k[A];M[T]=L?L[D]:null}return M},gt[dt.cy]=at,gt);function U(k,V){var I=G[O(k,V)];return I}var W=function(k,V,I){return k.length},lt=(vt={},vt[dt.XD+"_"+dt.fY]=function(k,V,I){return Math.max(0,k.length-V)},vt[dt.XD+"_"+dt.Wc]=function(k,V,I){var D=k[0];return D?Math.max(0,D.length-V):0},vt[dt.qb]=W,vt[dt.hL]=function(k,V,I){var D=I[0].name,C=k[D];return C?C.length:0},vt[dt.cy]=W,vt);function g(k,V){var I=lt[O(k,V)];return I}var j=function(k,V,I){return k[V]},rt=(it={},it[dt.XD]=j,it[dt.qb]=function(k,V,I){return k[I]},it[dt.hL]=j,it[dt.cy]=function(k,V,I){var D=(0,ct.C4)(k);return D instanceof Array?D[V]:D},it[dt.J5]=j,it);function $(k){var V=rt[k];return V}function O(k,V){return k===dt.XD?k+"_"+V:k}function X(k,V,I){if(!!k){var D=k.getRawDataItem(V);if(D!=null){var C=k.getStore(),M=C.getSource().sourceFormat;if(I!=null){var T=k.getDimensionIndex(I),A=C.getDimensionProperty(T);return $(M)(D,T,A)}else{var L=D;return M===dt.cy&&(L=(0,ct.C4)(D)),L}}}}function Q(k,V,I){if(!!k){var D=k.getStore().getSource().sourceFormat;if(!(D!==SOURCE_FORMAT_ORIGINAL&&D!==SOURCE_FORMAT_OBJECT_ROWS)){var C=k.getRawDataItem(V);if(D===SOURCE_FORMAT_ORIGINAL&&!isObject(C)&&(C=null),C)return C[I]}}}},99936:function(Ce,Jt,F){"use strict";F.d(Jt,{BM:function(){return K},IR:function(){return vt},M:function(){return gt}});var N=F(33051),ct=F(31029);function K(it,et,H){H=H||{};var J=H.byIndex,at=H.stackedCoordDimension,G,U,W;dt(et)?G=et:(U=et.schema,G=U.dimensions,W=et.store);var lt=!!(it&&it.get("stack")),g,j,rt,$;if((0,N.S6)(G,function(I,D){(0,N.HD)(I)&&(G[D]=I={name:I}),lt&&!I.isExtraCoord&&(!J&&!g&&I.ordinalMeta&&(g=I),!j&&I.type!=="ordinal"&&I.type!=="time"&&(!at||at===I.coordDim)&&(j=I))}),j&&!J&&!g&&(J=!0),j){rt="__\0ecstackresult_"+it.id,$="__\0ecstackedover_"+it.id,g&&(g.createInvertedIndices=!0);var O=j.coordDim,X=j.type,Q=0;(0,N.S6)(G,function(I){I.coordDim===O&&Q++});var k={name:rt,coordDim:O,coordDimIndex:Q,type:X,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:G.length},V={name:$,coordDim:$,coordDimIndex:Q+1,type:X,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:G.length+1};U?(W&&(k.storeDimIndex=W.ensureCalculationDimension($,X),V.storeDimIndex=W.ensureCalculationDimension(rt,X)),U.appendCalculationDimension(k),U.appendCalculationDimension(V)):(G.push(k),G.push(V))}return{stackedDimension:j&&j.name,stackedByDimension:g&&g.name,isStackedByIndex:J,stackedOverDimension:$,stackResultDimension:rt}}function dt(it){return!(0,ct.bB)(it.schema)}function gt(it,et){return!!et&&et===it.getCalculationInfo("stackedDimension")}function vt(it,et){return gt(it,et)?it.getCalculationInfo("stackResultDimension"):et}},98407:function(Ce,Jt,F){"use strict";F.d(Jt,{ID:function(){return H},o2:function(){return vt},tR:function(){return at},yQ:function(){return dt}});var N=F(85669),ct=F(33051),K=F(70175);function dt(G,U){var W=U&&U.type;return W==="ordinal"?G:(W==="time"&&!(0,ct.hj)(G)&&G!=null&&G!=="-"&&(G=+(0,N.sG)(G)),G==null||G===""?NaN:+G)}var gt=(0,ct.kW)({number:function(G){return parseFloat(G)},time:function(G){return+(0,N.sG)(G)},trim:function(G){return(0,ct.HD)(G)?(0,ct.fy)(G):G}});function vt(G){return gt.get(G)}var it={lt:function(G,U){return G<U},lte:function(G,U){return G<=U},gt:function(G,U){return G>U},gte:function(G,U){return G>=U}},et=function(){function G(U,W){if(!(0,ct.hj)(W)){var lt="";(0,K._y)(lt)}this._opFn=it[U],this._rvalFloat=(0,N.FK)(W)}return G.prototype.evaluate=function(U){return(0,ct.hj)(U)?this._opFn(U,this._rvalFloat):this._opFn((0,N.FK)(U),this._rvalFloat)},G}(),H=function(){function G(U,W){var lt=U==="desc";this._resultLT=lt?1:-1,W==null&&(W=lt?"min":"max"),this._incomparable=W==="min"?-1/0:1/0}return G.prototype.evaluate=function(U,W){var lt=(0,ct.hj)(U)?U:(0,N.FK)(U),g=(0,ct.hj)(W)?W:(0,N.FK)(W),j=isNaN(lt),rt=isNaN(g);if(j&&(lt=this._incomparable),rt&&(g=this._incomparable),j&&rt){var $=(0,ct.HD)(U),O=(0,ct.HD)(W);$&&(lt=O?U:0),O&&(g=$?W:0)}return lt<g?this._resultLT:lt>g?-this._resultLT:0},G}(),J=function(){function G(U,W){this._rval=W,this._isEQ=U,this._rvalTypeof=typeof W,this._rvalFloat=(0,N.FK)(W)}return G.prototype.evaluate=function(U){var W=U===this._rval;if(!W){var lt=typeof U;lt!==this._rvalTypeof&&(lt==="number"||this._rvalTypeof==="number")&&(W=(0,N.FK)(U)===this._rvalFloat)}return this._isEQ?W:!W},G}();function at(G,U){return G==="eq"||G==="ne"?new J(G==="eq",U):(0,ct.RI)(it,G)?new et(G,U):null}},10381:function(Ce,Jt,F){"use strict";F.d(Jt,{T:function(){return vt},y:function(){return dt}});var N=F(33051),ct=F(94279),K=function(){function et(H,J){this._encode=H,this._schema=J}return et.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},et.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},et}();function dt(et,H){var J={},at=J.encode={},G=(0,N.kW)(),U=[],W=[],lt={};(0,N.S6)(et.dimensions,function(O){var X=et.getDimensionInfo(O),Q=X.coordDim;if(Q){var k=X.coordDimIndex;gt(at,Q)[k]=O,X.isExtraCoord||(G.set(Q,1),it(X.type)&&(U[0]=O),gt(lt,Q)[k]=et.getDimensionIndex(X.name)),X.defaultTooltip&&W.push(O)}ct.f7.each(function(V,I){var D=gt(at,I),C=X.otherDims[I];C!=null&&C!==!1&&(D[C]=X.name)})});var g=[],j={};G.each(function(O,X){var Q=at[X];j[X]=Q[0],g=g.concat(Q)}),J.dataDimsOnCoord=g,J.dataDimIndicesOnCoord=(0,N.UI)(g,function(O){return et.getDimensionInfo(O).storeDimIndex}),J.encodeFirstDimNotExtra=j;var rt=at.label;rt&&rt.length&&(U=rt.slice());var $=at.tooltip;return $&&$.length?W=$.slice():W.length||(W=U.slice()),at.defaultedLabel=U,at.defaultedTooltip=W,J.userOutput=new K(lt,H),J}function gt(et,H){return et.hasOwnProperty(H)||(et[H]=[]),et[H]}function vt(et){return et==="category"?"ordinal":et==="time"?"time":"float"}function it(et){return!(et==="ordinal"||et==="time")}},89344:function(Ce,Jt,F){"use strict";var N=F(33051),ct=F(32234),K=(0,ct.Yf)();function dt(U){var W=U.mainData,lt=U.datas;lt||(lt={main:W},U.datasAttr={main:"data"}),U.datas=U.mainData=null,at(W,lt,U),(0,N.S6)(lt,function(g){(0,N.S6)(W.TRANSFERABLE_METHODS,function(j){g.wrapMethod(j,(0,N.WA)(gt,U))})}),W.wrapMethod("cloneShallow",(0,N.WA)(it,U)),(0,N.S6)(W.CHANGABLE_METHODS,function(g){W.wrapMethod(g,(0,N.WA)(vt,U))}),(0,N.hu)(lt[W.dataType]===W)}function gt(U,W){if(J(this)){var lt=(0,N.l7)({},K(this).datas);lt[this.dataType]=W,at(W,lt,U)}else G(W,this.dataType,K(this).mainData,U);return W}function vt(U,W){return U.struct&&U.struct.update(),W}function it(U,W){return(0,N.S6)(K(W).datas,function(lt,g){lt!==W&&G(lt.cloneShallow(),g,W,U)}),W}function et(U){var W=K(this).mainData;return U==null||W==null?W:K(W).datas[U]}function H(){var U=K(this).mainData;return U==null?[{data:U}]:(0,N.UI)((0,N.XP)(K(U).datas),function(W){return{type:W,data:K(U).datas[W]}})}function J(U){return K(U).mainData===U}function at(U,W,lt){K(U).datas={},(0,N.S6)(W,function(g,j){G(g,j,U,lt)})}function G(U,W,lt,g){K(lt).datas[W]=U,K(U).mainData=lt,U.dataType=W,g.struct&&(U[g.structAttr]=g.struct,g.struct[g.datasAttr[W]]=U),U.getLinkedData=et,U.getLinkedDataAll=H}Jt.Z=dt},61772:function(Ce,Jt,F){"use strict";F.d(Jt,{Dq:function(){return dt},JT:function(){return J},Ss:function(){return et},Wd:function(){return H},md:function(){return vt},pY:function(){return it},u7:function(){return at}});var N=F(32234),ct=F(33051),K=F(94279),dt={Must:1,Might:2,Not:3},gt=(0,N.Yf)();function vt(U){gt(U).datasetMap=(0,ct.kW)()}function it(U,W,lt){var g={},j=H(W);if(!j||!U)return g;var rt=[],$=[],O=W.ecModel,X=gt(O).datasetMap,Q=j.uid+"_"+lt.seriesLayoutBy,k,V;U=U.slice(),(0,ct.S6)(U,function(M,T){var A=(0,ct.Kn)(M)?M:U[T]={name:M};A.type==="ordinal"&&k==null&&(k=T,V=C(A)),g[A.name]=[]});var I=X.get(Q)||X.set(Q,{categoryWayDim:V,valueWayDim:0});(0,ct.S6)(U,function(M,T){var A=M.name,L=C(M);if(k==null){var Z=I.valueWayDim;D(g[A],Z,L),D($,Z,L),I.valueWayDim+=L}else if(k===T)D(g[A],0,L),D(rt,0,L);else{var Z=I.categoryWayDim;D(g[A],Z,L),D($,Z,L),I.categoryWayDim+=L}});function D(M,T,A){for(var L=0;L<A;L++)M.push(T+L)}function C(M){var T=M.dimsDef;return T?T.length:1}return rt.length&&(g.itemName=rt),$.length&&(g.seriesName=$),g}function et(U,W,lt){var g={},j=H(U);if(!j)return g;var rt=W.sourceFormat,$=W.dimensionsDefine,O;(rt===K.qb||rt===K.hL)&&(0,ct.S6)($,function(k,V){((0,ct.Kn)(k)?k.name:k)==="name"&&(O=V)});var X=function(){for(var k={},V={},I=[],D=0,C=Math.min(5,lt);D<C;D++){var M=G(W.data,rt,W.seriesLayoutBy,$,W.startIndex,D);I.push(M);var T=M===dt.Not;if(T&&k.v==null&&D!==O&&(k.v=D),(k.n==null||k.n===k.v||!T&&I[k.n]===dt.Not)&&(k.n=D),A(k)&&I[k.n]!==dt.Not)return k;T||(M===dt.Might&&V.v==null&&D!==O&&(V.v=D),(V.n==null||V.n===V.v)&&(V.n=D))}function A(L){return L.v!=null&&L.n!=null}return A(k)?k:A(V)?V:null}();if(X){g.value=[X.v];var Q=O??X.n;g.itemName=[Q],g.seriesName=[Q]}return g}function H(U){var W=U.get("data",!0);if(!W)return(0,N.HZ)(U.ecModel,"dataset",{index:U.get("datasetIndex",!0),id:U.get("datasetId",!0)},N.C6).models[0]}function J(U){return!U.get("transform",!0)&&!U.get("fromTransformResult",!0)?[]:(0,N.HZ)(U.ecModel,"dataset",{index:U.get("fromDatasetIndex",!0),id:U.get("fromDatasetId",!0)},N.C6).models}function at(U,W){return G(U.data,U.sourceFormat,U.seriesLayoutBy,U.dimensionsDefine,U.startIndex,W)}function G(U,W,lt,g,j,rt){var $,O=5;if((0,ct.fU)(U))return dt.Not;var X,Q;if(g){var k=g[rt];(0,ct.Kn)(k)?(X=k.name,Q=k.type):(0,ct.HD)(k)&&(X=k)}if(Q!=null)return Q==="ordinal"?dt.Must:dt.Not;if(W===K.XD){var V=U;if(lt===K.Wc){for(var I=V[rt],D=0;D<(I||[]).length&&D<O;D++)if(($=z(I[j+D]))!=null)return $}else for(var D=0;D<V.length&&D<O;D++){var C=V[j+D];if(C&&($=z(C[rt]))!=null)return $}}else if(W===K.qb){var M=U;if(!X)return dt.Not;for(var D=0;D<M.length&&D<O;D++){var T=M[D];if(T&&($=z(T[X]))!=null)return $}}else if(W===K.hL){var A=U;if(!X)return dt.Not;var I=A[X];if(!I||(0,ct.fU)(I))return dt.Not;for(var D=0;D<I.length&&D<O;D++)if(($=z(I[D]))!=null)return $}else if(W===K.cy)for(var L=U,D=0;D<L.length&&D<O;D++){var T=L[D],Z=(0,N.C4)(T);if(!(0,ct.kJ)(Z))return dt.Not;if(($=z(Z[rt]))!=null)return $}function z(ut){var ot=(0,ct.HD)(ut);if(ut!=null&&isFinite(ut)&&ut!=="")return ot?dt.Might:dt.Not;if(ot&&ut!=="-")return dt.Must}return dt.Not}},36437:function(Ce,Jt,F){"use strict";F.d(Jt,{U:function(){return et},t:function(){return H}});var N=F(33051),ct=F(99574),K=F(94279),dt=F(61772),gt=F(10437),vt=F(43834),it=F(68540),et=function(){function G(U){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=U}return G.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},G.prototype._setLocalSource=function(U,W){this._sourceList=U,this._upstreamSignList=W,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},G.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},G.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},G.prototype._createSource=function(){this._setLocalSource([],[]);var U=this._sourceHost,W=this._getUpstreamSourceManagers(),lt=!!W.length,g,j;if(J(U)){var rt=U,$=void 0,O=void 0,X=void 0;if(lt){var Q=W[0];Q.prepareSource(),X=Q.getSource(),$=X.data,O=X.sourceFormat,j=[Q._getVersionSign()]}else $=rt.get("data",!0),O=(0,N.fU)($)?K.J5:K.cy,j=[];var k=this._getSourceMetaRawOption()||{},V=X&&X.metaRawOption||{},I=(0,N.pD)(k.seriesLayoutBy,V.seriesLayoutBy)||null,D=(0,N.pD)(k.sourceHeader,V.sourceHeader),C=(0,N.pD)(k.dimensions,V.dimensions),M=I!==V.seriesLayoutBy||!!D!=!!V.sourceHeader||C;g=M?[(0,ct._P)($,{seriesLayoutBy:I,sourceHeader:D,dimensions:C},O)]:[]}else{var T=U;if(lt){var A=this._applyTransform(W);g=A.sourceList,j=A.upstreamSignList}else{var L=T.get("source",!0);g=[(0,ct._P)(L,this._getSourceMetaRawOption(),null)],j=[]}}this._setLocalSource(g,j)},G.prototype._applyTransform=function(U){var W=this._sourceHost,lt=W.get("transform",!0),g=W.get("fromTransformResult",!0);if(g!=null){var j="";U.length!==1&&at(j)}var rt,$=[],O=[];return(0,N.S6)(U,function(X){X.prepareSource();var Q=X.getSource(g||0),k="";g!=null&&!Q&&at(k),$.push(Q),O.push(X._getVersionSign())}),lt?rt=(0,gt.vK)(lt,$,{datasetIndex:W.componentIndex}):g!=null&&(rt=[(0,ct.ML)($[0])]),{sourceList:rt,upstreamSignList:O}},G.prototype._isDirty=function(){if(this._dirty)return!0;for(var U=this._getUpstreamSourceManagers(),W=0;W<U.length;W++){var lt=U[W];if(lt._isDirty()||this._upstreamSignList[W]!==lt._getVersionSign())return!0}},G.prototype.getSource=function(U){U=U||0;var W=this._sourceList[U];if(!W){var lt=this._getUpstreamSourceManagers();return lt[0]&&lt[0].getSource(U)}return W},G.prototype.getSharedDataStore=function(U){var W=U.makeStoreSchema();return this._innerGetDataStore(W.dimensions,U.source,W.hash)},G.prototype._innerGetDataStore=function(U,W,lt){var g=0,j=this._storeList,rt=j[g];rt||(rt=j[g]={});var $=rt[lt];if(!$){var O=this._getUpstreamSourceManagers()[0];J(this._sourceHost)&&O?$=O._innerGetDataStore(U,W,lt):($=new vt.ZP,$.initData(new it.Pl(W,U.length),U)),rt[lt]=$}return $},G.prototype._getUpstreamSourceManagers=function(){var U=this._sourceHost;if(J(U)){var W=(0,dt.Wd)(U);return W?[W.getSourceManager()]:[]}else return(0,N.UI)((0,dt.JT)(U),function(lt){return lt.getSourceManager()})},G.prototype._getSourceMetaRawOption=function(){var U=this._sourceHost,W,lt,g;if(J(U))W=U.get("seriesLayoutBy",!0),lt=U.get("sourceHeader",!0),g=U.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var j=U;W=j.get("seriesLayoutBy",!0),lt=j.get("sourceHeader",!0),g=j.get("dimensions",!0)}return{seriesLayoutBy:W,sourceHeader:lt,dimensions:g}},G}();function H(G){var U=G.option.transform;U&&(0,N.s7)(G.option.transform)}function J(G){return G.mainType==="series"}function at(G){throw new Error(G)}},10437:function(Ce,Jt,F){"use strict";F.d(Jt,{DA:function(){return lt},vK:function(){return g}});var N=F(94279),ct=F(32234),K=F(33051),dt=F(68540),gt=F(98407),vt=F(70175),it=F(99574),et=function(){function $(){}return $.prototype.getRawData=function(){throw new Error("not supported")},$.prototype.getRawDataItem=function(O){throw new Error("not supported")},$.prototype.cloneRawData=function(){},$.prototype.getDimensionInfo=function(O){},$.prototype.cloneAllDimensionInfo=function(){},$.prototype.count=function(){},$.prototype.retrieveValue=function(O,X){},$.prototype.retrieveValueFromItem=function(O,X){},$.prototype.convertValue=function(O,X){return(0,gt.yQ)(O,X)},$}();function H($,O){var X=new et,Q=$.data,k=X.sourceFormat=$.sourceFormat,V=$.startIndex,I="";$.seriesLayoutBy!==N.fY&&(0,vt._y)(I);var D=[],C={},M=$.dimensionsDefine;if(M)(0,K.S6)(M,function(ut,ot){var ht=ut.name,tt={index:ot,name:ht,displayName:ut.displayName};if(D.push(tt),ht!=null){var ft="";(0,K.RI)(C,ht)&&(0,vt._y)(ft),C[ht]=tt}});else for(var T=0;T<$.dimensionsDetectedCount;T++)D.push({index:T});var A=(0,dt._j)(k,N.fY);O.__isBuiltIn&&(X.getRawDataItem=function(ut){return A(Q,V,D,ut)},X.getRawData=(0,K.ak)(J,null,$)),X.cloneRawData=(0,K.ak)(at,null,$);var L=(0,dt.a)(k,N.fY);X.count=(0,K.ak)(L,null,Q,V,D);var Z=(0,dt.tB)(k);X.retrieveValue=function(ut,ot){var ht=A(Q,V,D,ut);return z(ht,ot)};var z=X.retrieveValueFromItem=function(ut,ot){if(ut!=null){var ht=D[ot];if(ht)return Z(ut,ot,ht.name)}};return X.getDimensionInfo=(0,K.ak)(G,null,D,C),X.cloneAllDimensionInfo=(0,K.ak)(U,null,D),X}function J($){var O=$.sourceFormat;if(!rt(O)){var X="";(0,vt._y)(X)}return $.data}function at($){var O=$.sourceFormat,X=$.data;if(!rt(O)){var Q="";(0,vt._y)(Q)}if(O===N.XD){for(var k=[],V=0,I=X.length;V<I;V++)k.push(X[V].slice());return k}else if(O===N.qb){for(var k=[],V=0,I=X.length;V<I;V++)k.push((0,K.l7)({},X[V]));return k}}function G($,O,X){if(X!=null){if((0,K.hj)(X)||!isNaN(X)&&!(0,K.RI)(O,X))return $[X];if((0,K.RI)(O,X))return O[X]}}function U($){return(0,K.d9)($)}var W=(0,K.kW)();function lt($){$=(0,K.d9)($);var O=$.type,X="";O||(0,vt._y)(X);var Q=O.split(":");Q.length!==2&&(0,vt._y)(X);var k=!1;Q[0]==="echarts"&&(O=Q[1],k=!0),$.__isBuiltIn=k,W.set(O,$)}function g($,O,X){var Q=(0,ct.kF)($),k=Q.length,V="";k||(0,vt._y)(V);for(var I=0,D=k;I<D;I++){var C=Q[I];O=j(C,O,X,k===1?null:I),I!==D-1&&(O.length=Math.max(O.length,1))}return O}function j($,O,X,Q){var k="";O.length||(0,vt._y)(k),(0,K.Kn)($)||(0,vt._y)(k);var V=$.type,I=W.get(V);I||(0,vt._y)(k);var D=(0,K.UI)(O,function(T){return H(T,I)}),C=(0,ct.kF)(I.transform({upstream:D[0],upstreamList:D,config:(0,K.d9)($.config)}));if(!1)var M;return(0,K.UI)(C,function(T,A){var L="";(0,K.Kn)(T)||(0,vt._y)(L),T.data||(0,vt._y)(L);var Z=(0,it.Kp)(T.data);rt(Z)||(0,vt._y)(L);var z,ut=O[0];if(ut&&A===0&&!T.dimensions){var ot=ut.startIndex;ot&&(T.data=ut.data.slice(0,ot).concat(T.data)),z={seriesLayoutBy:N.fY,sourceHeader:ot,dimensions:ut.metaRawOption.dimensions}}else z={seriesLayoutBy:N.fY,sourceHeader:0,dimensions:T.dimensions};return(0,it._P)(T.data,z,null)})}function rt($){return $===N.XD||$===N.qb}},78670:function(Ce,Jt,F){"use strict";F.d(Jt,{RD:function(){return xt.Z},TA:function(){return J.Z},tF:function(){return it.Z},Ir:function(){return et.Z},aV:function(){return at.Z},Hn:function(){return rt.Z},wJ:function(){return H.Z},$_:function(){return U},WU:function(){return dt},wL:function(){return vt.wL},FU:function(){return vt.FU},Q:function(){return K},_y:function(){return N},S1:function(){return vt.S1},z$:function(){return wt.RV},Rx:function(){return ct},Nu:function(){return Z.Z},pQ:function(){return Z.Z},je:function(){return vt.je},sq:function(){return vt.sq},Br:function(){return vt.Br},ds:function(){return vt.ds},D$:function(){return L.D},D5:function(){return gt},x_:function(){return G}});var N={};F.r(N),F.d(N,{createDimensions:function(){return k.q},createList:function(){return D},createScale:function(){return M},createSymbol:function(){return V.th},createTextStyle:function(){return A},dataStack:function(){return C},enableHoverEmphasis:function(){return I.vF},getECData:function(){return X.A},getLayoutRect:function(){return $.ME},mixinAxisModelCommonMethods:function(){return T}});var ct={};F.r(ct),F.d(ct,{MAX_SAFE_INTEGER:function(){return z.YM},asc:function(){return z.dt},getPercentWithPrecision:function(){return z.eJ},getPixelPrecision:function(){return z.M9},getPrecision:function(){return z.p8},getPrecisionSafe:function(){return z.ZB},isNumeric:function(){return z.kE},isRadianAroundZero:function(){return z.mW},linearMap:function(){return z.NU},nice:function(){return z.kx},numericToNumber:function(){return z.FK},parseDate:function(){return z.sG},quantile:function(){return z.VR},quantity:function(){return z.Xd},quantityExponent:function(){return z.xW},reformIntervals:function(){return z.nR},remRadian:function(){return z.wW},round:function(){return z.NM}});var K={};F.r(K),F.d(K,{KC:function(){return tt.Z},Ee:function(){return ut.ZP},UL:function(){return ht.Z},xv:function(){return ot.ZP}});var dt={};F.r(dt),F.d(dt,{addCommas:function(){return ft.OD},capitalFirst:function(){return ft.ew},encodeHTML:function(){return ft.F1},formatTime:function(){return ft.mr},formatTpl:function(){return ft.kF},getTextRect:function(){return st},getTooltipMarker:function(){return ft.A0},normalizeCssArray:function(){return ft.MY},toCamelCase:function(){return ft.zW},truncateText:function(){return St.aF}});var gt={};F.r(gt),F.d(gt,{bind:function(){return W.ak},clone:function(){return W.d9},curry:function(){return W.WA},defaults:function(){return W.ce},each:function(){return W.S6},extend:function(){return W.l7},filter:function(){return W.hX},indexOf:function(){return W.cq},inherits:function(){return W.XW},isArray:function(){return W.kJ},isFunction:function(){return W.mf},isObject:function(){return W.Kn},isString:function(){return W.HD},map:function(){return W.UI},merge:function(){return W.TS},reduce:function(){return W.u4}});var vt=F(81615),it=F(98071),et=F(33166),H=F(93321),J=F(75797),at=F(5101),G=F(99448),U=F(21092),W=F(33051),lt=F(38455),g=F(57947),j=F(16650),rt=F(1497),$=F(76172),O=F(99936),X=F(30106),Q=F(36006),k=F(55623),V=F(41525),I=F(26357);function D(Ht){return(0,lt.Z)(null,Ht)}var C={isDimensionStacked:O.M,enableDataStack:O.BM,getStackedDimension:O.IR};function M(Ht,$t){var ee=$t;$t instanceof rt.Z||(ee=new rt.Z($t));var De=g.aG(ee);return De.setExtent(Ht[0],Ht[1]),g.Jk(De,ee),De}function T(Ht){W.jB(Ht,j.W)}function A(Ht,$t){return $t=$t||{},(0,Q.Lr)(Ht,null,null,$t.state!=="normal")}var L=F(68023),Z=F(76672),z=F(85669),ut=F(44535),ot=F(96498),ht=F(35151),tt=F(60479),ft=F(78988),St=F(66918);function st(Ht,$t,ee,De,Se,Be,Ft,Tt){var At=new ot.ZP({style:{text:Ht,font:$t,align:ee,verticalAlign:De,padding:Se,rich:Be,overflow:Ft?"truncate":null,lineHeight:Tt}});return At.getBoundingRect()}var xt=F(12950),wt=F(97772);function Dt(Ht){var $t=ComponentModel.extend(Ht);return ComponentModel.registerClass($t),$t}function It(Ht){var $t=ComponentView.extend(Ht);return ComponentView.registerClass($t),$t}function Et(Ht){var $t=SeriesModel.extend(Ht);return SeriesModel.registerClass($t),$t}function zt(Ht){var $t=ChartView.extend(Ht);return ChartView.registerClass($t),$t}var Bt=F(87164);(0,L.D)(Bt.T)},68023:function(Ce,Jt,F){"use strict";F.d(Jt,{D:function(){return at}});var N=F(81615),ct=F(33166),K=F(75797),dt=F(98071),gt=F(93321),vt=F(33051),it=F(49428),et=F(99448),H=[],J={registerPreprocessor:N.ds,registerProcessor:N.Pu,registerPostInit:N.sq,registerPostUpdate:N.Br,registerUpdateLifecycle:N.YK,registerAction:N.zl,registerCoordinateSystem:N.RS,registerLayout:N.qR,registerVisual:N.Og,registerTransform:N.OB,registerLoading:N.yn,registerMap:N.je,registerImpl:it.M,PRIORITY:N.Hr,ComponentModel:dt.Z,ComponentView:ct.Z,SeriesModel:gt.Z,ChartView:K.Z,registerComponentModel:function(G){dt.Z.registerClass(G)},registerComponentView:function(G){ct.Z.registerClass(G)},registerSeriesModel:function(G){gt.Z.registerClass(G)},registerChartView:function(G){K.Z.registerClass(G)},registerSubTypeDefaulter:function(G,U){dt.Z.registerSubTypeDefaulter(G,U)},registerPainter:function(G,U){(0,et.registerPainter)(G,U)}};function at(G){if((0,vt.kJ)(G)){(0,vt.S6)(G,function(U){at(U)});return}(0,vt.cq)(H,G)>=0||(H.push(G),(0,vt.mf)(G)&&(G={install:G}),G.install(J))}},87164:function(Ce,Jt,F){"use strict";F.d(Jt,{T:function(){return Q}});var N=F(32234),ct=F(60479),K=F(29266),dt=F(30106),gt=F(85669),vt=F(87411),it=F(87377),et=F(33051),H=F(54162),J=F(36006);function at(k){if(k){for(var V=[],I=0;I<k.length;I++)V.push(k[I].slice());return V}}function G(k,V){var I=k.label,D=V&&V.getTextGuideLine();return{dataIndex:k.dataIndex,dataType:k.dataType,seriesIndex:k.seriesModel.seriesIndex,text:k.label.style.text,rect:k.hostRect,labelRect:k.rect,align:I.style.align,verticalAlign:I.style.verticalAlign,labelLinePoints:at(D&&D.shape.points)}}var U=["align","verticalAlign","width","height","fontSize"],W=new vt.ZP,lt=(0,N.Yf)(),g=(0,N.Yf)();function j(k,V,I){for(var D=0;D<I.length;D++){var C=I[D];V[C]!=null&&(k[C]=V[C])}}var rt=["x","y","rotation"],$=function(){function k(){this._labelList=[],this._chartViewList=[]}return k.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},k.prototype._addLabel=function(V,I,D,C,M){var T=C.style,A=C.__hostTarget,L=A.textConfig||{},Z=C.getComputedTransform(),z=C.getBoundingRect().plain();ct.Z.applyTransform(z,z,Z),Z?W.setLocalTransform(Z):(W.x=W.y=W.rotation=W.originX=W.originY=0,W.scaleX=W.scaleY=1);var ut=C.__hostTarget,ot;if(ut){ot=ut.getBoundingRect().plain();var ht=ut.getComputedTransform();ct.Z.applyTransform(ot,ot,ht)}var tt=ot&&ut.getTextGuideLine();this._labelList.push({label:C,labelLine:tt,seriesModel:D,dataIndex:V,dataType:I,layoutOption:M,computedLayoutOption:null,rect:z,hostRect:ot,priority:ot?ot.width*ot.height:0,defaultAttr:{ignore:C.ignore,labelGuideIgnore:tt&&tt.ignore,x:W.x,y:W.y,scaleX:W.scaleX,scaleY:W.scaleY,rotation:W.rotation,style:{x:T.x,y:T.y,align:T.align,verticalAlign:T.verticalAlign,width:T.width,height:T.height,fontSize:T.fontSize},cursor:C.cursor,attachedPos:L.position,attachedRot:L.rotation}})},k.prototype.addLabelsOfSeries=function(V){var I=this;this._chartViewList.push(V);var D=V.__model,C=D.get("labelLayout");!((0,et.mf)(C)||(0,et.XP)(C).length)||V.group.traverse(function(M){if(M.ignore)return!0;var T=M.getTextContent(),A=(0,dt.A)(M);T&&!T.disableLabelLayout&&I._addLabel(A.dataIndex,A.dataType,D,T,C)})},k.prototype.updateLayoutConfig=function(V){var I=V.getWidth(),D=V.getHeight();function C(wt,Dt){return function(){(0,it.d)(wt,Dt)}}for(var M=0;M<this._labelList.length;M++){var T=this._labelList[M],A=T.label,L=A.__hostTarget,Z=T.defaultAttr,z=void 0;(0,et.mf)(T.layoutOption)?z=T.layoutOption(G(T,L)):z=T.layoutOption,z=z||{},T.computedLayoutOption=z;var ut=Math.PI/180;L&&L.setTextConfig({local:!1,position:z.x!=null||z.y!=null?null:Z.attachedPos,rotation:z.rotate!=null?z.rotate*ut:Z.attachedRot,offset:[z.dx||0,z.dy||0]});var ot=!1;if(z.x!=null?(A.x=(0,gt.GM)(z.x,I),A.setStyle("x",0),ot=!0):(A.x=Z.x,A.setStyle("x",Z.style.x)),z.y!=null?(A.y=(0,gt.GM)(z.y,D),A.setStyle("y",0),ot=!0):(A.y=Z.y,A.setStyle("y",Z.style.y)),z.labelLinePoints){var ht=L.getTextGuideLine();ht&&(ht.setShape({points:z.labelLinePoints}),ot=!1)}var tt=lt(A);tt.needsUpdateLabelLine=ot,A.rotation=z.rotate!=null?z.rotate*ut:Z.rotation,A.scaleX=Z.scaleX,A.scaleY=Z.scaleY;for(var ft=0;ft<U.length;ft++){var St=U[ft];A.setStyle(St,z[St]!=null?z[St]:Z.style[St])}if(z.draggable){if(A.draggable=!0,A.cursor="move",L){var st=T.seriesModel;if(T.dataIndex!=null){var xt=T.seriesModel.getData(T.dataType);st=xt.getItemModel(T.dataIndex)}A.on("drag",C(L,st.getModel("labelLine")))}}else A.off("drag"),A.cursor=Z.cursor}},k.prototype.layout=function(V){var I=V.getWidth(),D=V.getHeight(),C=(0,H.VT)(this._labelList),M=(0,et.hX)(C,function(L){return L.layoutOption.moveOverlap==="shiftX"}),T=(0,et.hX)(C,function(L){return L.layoutOption.moveOverlap==="shiftY"});(0,H.WE)(M,0,I),(0,H.GI)(T,0,D);var A=(0,et.hX)(C,function(L){return L.layoutOption.hideOverlap});(0,H.yl)(A)},k.prototype.processLabelsOverall=function(){var V=this;(0,et.S6)(this._chartViewList,function(I){var D=I.__model,C=I.ignoreLabelLineUpdate,M=D.isAnimationEnabled();I.group.traverse(function(T){if(T.ignore&&!T.forceLabelAnimation)return!0;var A=!C,L=T.getTextContent();!A&&L&&(A=lt(L).needsUpdateLabelLine),A&&V._updateLabelLine(T,D),M&&V._animateLabels(T,D)})})},k.prototype._updateLabelLine=function(V,I){var D=V.getTextContent(),C=(0,dt.A)(V),M=C.dataIndex;if(D&&M!=null){var T=I.getData(C.dataType),A=T.getItemModel(M),L={},Z=T.getItemVisual(M,"style"),z=T.getVisual("drawType");L.stroke=Z[z];var ut=A.getModel("labelLine");(0,it.Iu)(V,(0,it.$x)(A),L),(0,it.d)(V,ut)}},k.prototype._animateLabels=function(V,I){var D=V.getTextContent(),C=V.getTextGuideLine();if(D&&(V.forceLabelAnimation||!D.ignore&&!D.invisible&&!V.disableLabelAnimation&&!(0,K.eq)(V))){var M=lt(D),T=M.oldLayout,A=(0,dt.A)(V),L=A.dataIndex,Z={x:D.x,y:D.y,rotation:D.rotation},z=I.getData(A.dataType);if(T){D.attr(T);var ot=V.prevStates;ot&&((0,et.cq)(ot,"select")>=0&&D.attr(M.oldLayoutSelect),(0,et.cq)(ot,"emphasis")>=0&&D.attr(M.oldLayoutEmphasis)),(0,K.D)(D,Z,I,L)}else if(D.attr(Z),!(0,J.qA)(D).valueAnimation){var ut=(0,et.pD)(D.style.opacity,1);D.style.opacity=0,(0,K.KZ)(D,{style:{opacity:ut}},I,L)}if(M.oldLayout=Z,D.states.select){var ht=M.oldLayoutSelect={};j(ht,Z,rt),j(ht,D.states.select,rt)}if(D.states.emphasis){var tt=M.oldLayoutEmphasis={};j(tt,Z,rt),j(tt,D.states.emphasis,rt)}(0,J.tD)(D,L,z,I,I)}if(C&&!C.ignore&&!C.invisible){var M=g(C),T=M.oldLayout,ft={points:C.shape.points};T?(C.attr({shape:T}),(0,K.D)(C,{shape:ft},I)):(C.setShape(ft),C.style.strokePercent=0,(0,K.KZ)(C,{style:{strokePercent:1}},I)),M.oldLayout=ft}},k}(),O=$,X=(0,N.Yf)();function Q(k){k.registerUpdateLifecycle("series:beforeupdate",function(V,I,D){var C=X(I).labelManager;C||(C=X(I).labelManager=new O),C.clearLabels()}),k.registerUpdateLifecycle("series:layoutlabels",function(V,I,D){var C=X(I).labelManager;D.updatedSeries.forEach(function(M){C.addLabelsOfSeries(I.getViewOfSeriesModel(M))}),C.updateLayoutConfig(I),C.layout(I),C.processLabelsOverall()})}},87377:function(Ce,Jt,F){"use strict";F.d(Jt,{$x:function(){return ut},Iu:function(){return z},_A:function(){return A},d:function(){return D},qK:function(){return T}});var N=F(41610),ct=F(327),K=F(62514),dt=F(14014),gt=F(3266),vt=F(29023),it=F(33051),et=F(32892),H=F(45280),J=F(26357),at=Math.PI*2,G=dt.Z.CMD,U=["top","right","bottom","left"];function W(ot,ht,tt,ft,St){var st=tt.width,xt=tt.height;switch(ot){case"top":ft.set(tt.x+st/2,tt.y-ht),St.set(0,-1);break;case"bottom":ft.set(tt.x+st/2,tt.y+xt+ht),St.set(0,1);break;case"left":ft.set(tt.x-ht,tt.y+xt/2),St.set(-1,0);break;case"right":ft.set(tt.x+st+ht,tt.y+xt/2),St.set(1,0);break}}function lt(ot,ht,tt,ft,St,st,xt,wt,Dt){xt-=ot,wt-=ht;var It=Math.sqrt(xt*xt+wt*wt);xt/=It,wt/=It;var Et=xt*tt+ot,zt=wt*tt+ht;if(Math.abs(ft-St)%at<1e-4)return Dt[0]=Et,Dt[1]=zt,It-tt;if(st){var Bt=ft;ft=(0,gt.m)(St),St=(0,gt.m)(Bt)}else ft=(0,gt.m)(ft),St=(0,gt.m)(St);ft>St&&(St+=at);var Ht=Math.atan2(wt,xt);if(Ht<0&&(Ht+=at),Ht>=ft&&Ht<=St||Ht+at>=ft&&Ht+at<=St)return Dt[0]=Et,Dt[1]=zt,It-tt;var $t=tt*Math.cos(ft)+ot,ee=tt*Math.sin(ft)+ht,De=tt*Math.cos(St)+ot,Se=tt*Math.sin(St)+ht,Be=($t-xt)*($t-xt)+(ee-wt)*(ee-wt),Ft=(De-xt)*(De-xt)+(Se-wt)*(Se-wt);return Be<Ft?(Dt[0]=$t,Dt[1]=ee,Math.sqrt(Be)):(Dt[0]=De,Dt[1]=Se,Math.sqrt(Ft))}function g(ot,ht,tt,ft,St,st,xt,wt){var Dt=St-ot,It=st-ht,Et=tt-ot,zt=ft-ht,Bt=Math.sqrt(Et*Et+zt*zt);Et/=Bt,zt/=Bt;var Ht=Dt*Et+It*zt,$t=Ht/Bt;wt&&($t=Math.min(Math.max($t,0),1)),$t*=Bt;var ee=xt[0]=ot+$t*Et,De=xt[1]=ht+$t*zt;return Math.sqrt((ee-St)*(ee-St)+(De-st)*(De-st))}function j(ot,ht,tt,ft,St,st,xt){tt<0&&(ot=ot+tt,tt=-tt),ft<0&&(ht=ht+ft,ft=-ft);var wt=ot+tt,Dt=ht+ft,It=xt[0]=Math.min(Math.max(St,ot),wt),Et=xt[1]=Math.min(Math.max(st,ht),Dt);return Math.sqrt((It-St)*(It-St)+(Et-st)*(Et-st))}var rt=[];function $(ot,ht,tt){var ft=j(ht.x,ht.y,ht.width,ht.height,ot.x,ot.y,rt);return tt.set(rt[0],rt[1]),ft}function O(ot,ht,tt){for(var ft=0,St=0,st=0,xt=0,wt,Dt,It=1/0,Et=ht.data,zt=ot.x,Bt=ot.y,Ht=0;Ht<Et.length;){var $t=Et[Ht++];Ht===1&&(ft=Et[Ht],St=Et[Ht+1],st=ft,xt=St);var ee=It;switch($t){case G.M:st=Et[Ht++],xt=Et[Ht++],ft=st,St=xt;break;case G.L:ee=g(ft,St,Et[Ht],Et[Ht+1],zt,Bt,rt,!0),ft=Et[Ht++],St=Et[Ht++];break;case G.C:ee=(0,vt.t1)(ft,St,Et[Ht++],Et[Ht++],Et[Ht++],Et[Ht++],Et[Ht],Et[Ht+1],zt,Bt,rt),ft=Et[Ht++],St=Et[Ht++];break;case G.Q:ee=(0,vt.Wr)(ft,St,Et[Ht++],Et[Ht++],Et[Ht],Et[Ht+1],zt,Bt,rt),ft=Et[Ht++],St=Et[Ht++];break;case G.A:var De=Et[Ht++],Se=Et[Ht++],Be=Et[Ht++],Ft=Et[Ht++],Tt=Et[Ht++],At=Et[Ht++];Ht+=1;var Kt=!!(1-Et[Ht++]);wt=Math.cos(Tt)*Be+De,Dt=Math.sin(Tt)*Ft+Se,Ht<=1&&(st=wt,xt=Dt);var pe=(zt-De)*Ft/Be+De;ee=lt(De,Se,Ft,Tt,Tt+At,Kt,pe,Bt,rt),ft=Math.cos(Tt+At)*Be+De,St=Math.sin(Tt+At)*Ft+Se;break;case G.R:st=ft=Et[Ht++],xt=St=Et[Ht++];var Oe=Et[Ht++],Pe=Et[Ht++];ee=j(st,xt,Oe,Pe,zt,Bt,rt);break;case G.Z:ee=g(ft,St,st,xt,zt,Bt,rt,!0),ft=st,St=xt;break}ee<It&&(It=ee,tt.set(rt[0],rt[1]))}return It}var X=new N.Z,Q=new N.Z,k=new N.Z,V=new N.Z,I=new N.Z;function D(ot,ht){if(!!ot){var tt=ot.getTextGuideLine(),ft=ot.getTextContent();if(!!(ft&&tt)){var St=ot.textGuideLineConfig||{},st=[[0,0],[0,0],[0,0]],xt=St.candidates||U,wt=ft.getBoundingRect().clone();wt.applyTransform(ft.getComputedTransform());var Dt=1/0,It=St.anchor,Et=ot.getComputedTransform(),zt=Et&&(0,et.U_)([],Et),Bt=ht.get("length2")||0;It&&k.copy(It);for(var Ht=0;Ht<xt.length;Ht++){var $t=xt[Ht];W($t,0,wt,X,V),N.Z.scaleAndAdd(Q,X,V,Bt),Q.transform(zt);var ee=ot.getBoundingRect(),De=It?It.distance(Q):ot instanceof ct.ZP?O(Q,ot.path,k):$(Q,ee,k);De<Dt&&(Dt=De,Q.transform(Et),k.transform(Et),k.toArray(st[0]),Q.toArray(st[1]),X.toArray(st[2]))}T(st,ht.get("minTurnAngle")),tt.setShape({points:st})}}}var C=[],M=new N.Z;function T(ot,ht){if(ht<=180&&ht>0){ht=ht/180*Math.PI,X.fromArray(ot[0]),Q.fromArray(ot[1]),k.fromArray(ot[2]),N.Z.sub(V,X,Q),N.Z.sub(I,k,Q);var tt=V.len(),ft=I.len();if(!(tt<.001||ft<.001)){V.scale(1/tt),I.scale(1/ft);var St=V.dot(I),st=Math.cos(ht);if(st<St){var xt=g(Q.x,Q.y,k.x,k.y,X.x,X.y,C,!1);M.fromArray(C),M.scaleAndAdd(I,xt/Math.tan(Math.PI-ht));var wt=k.x!==Q.x?(M.x-Q.x)/(k.x-Q.x):(M.y-Q.y)/(k.y-Q.y);if(isNaN(wt))return;wt<0?N.Z.copy(M,Q):wt>1&&N.Z.copy(M,k),M.toArray(ot[1])}}}}function A(ot,ht,tt){if(tt<=180&&tt>0){tt=tt/180*Math.PI,X.fromArray(ot[0]),Q.fromArray(ot[1]),k.fromArray(ot[2]),N.Z.sub(V,Q,X),N.Z.sub(I,k,Q);var ft=V.len(),St=I.len();if(!(ft<.001||St<.001)){V.scale(1/ft),I.scale(1/St);var st=V.dot(ht),xt=Math.cos(tt);if(st<xt){var wt=g(Q.x,Q.y,k.x,k.y,X.x,X.y,C,!1);M.fromArray(C);var Dt=Math.PI/2,It=Math.acos(I.dot(ht)),Et=Dt+It-tt;if(Et>=Dt)N.Z.copy(M,k);else{M.scaleAndAdd(I,wt/Math.tan(Math.PI/2-Et));var zt=k.x!==Q.x?(M.x-Q.x)/(k.x-Q.x):(M.y-Q.y)/(k.y-Q.y);if(isNaN(zt))return;zt<0?N.Z.copy(M,Q):zt>1&&N.Z.copy(M,k)}M.toArray(ot[1])}}}}function L(ot,ht,tt,ft){var St=tt==="normal",st=St?ot:ot.ensureState(tt);st.ignore=ht;var xt=ft.get("smooth");xt&&xt===!0&&(xt=.3),st.shape=st.shape||{},xt>0&&(st.shape.smooth=xt);var wt=ft.getModel("lineStyle").getLineStyle();St?ot.useStyle(wt):st.style=wt}function Z(ot,ht){var tt=ht.smooth,ft=ht.points;if(!!ft)if(ot.moveTo(ft[0][0],ft[0][1]),tt>0&&ft.length>=3){var St=H.TK(ft[0],ft[1]),st=H.TK(ft[1],ft[2]);if(!St||!st){ot.lineTo(ft[1][0],ft[1][1]),ot.lineTo(ft[2][0],ft[2][1]);return}var xt=Math.min(St,st)*tt,wt=H.t7([],ft[1],ft[0],xt/St),Dt=H.t7([],ft[1],ft[2],xt/st),It=H.t7([],wt,Dt,.5);ot.bezierCurveTo(wt[0],wt[1],wt[0],wt[1],It[0],It[1]),ot.bezierCurveTo(Dt[0],Dt[1],Dt[0],Dt[1],ft[2][0],ft[2][1])}else for(var Et=1;Et<ft.length;Et++)ot.lineTo(ft[Et][0],ft[Et][1])}function z(ot,ht,tt){var ft=ot.getTextGuideLine(),St=ot.getTextContent();if(!St){ft&&ot.removeTextGuideLine();return}for(var st=ht.normal,xt=st.get("show"),wt=St.ignore,Dt=0;Dt<J.qc.length;Dt++){var It=J.qc[Dt],Et=ht[It],zt=It==="normal";if(Et){var Bt=Et.get("show"),Ht=zt?wt:(0,it.pD)(St.states[It]&&St.states[It].ignore,wt);if(Ht||!(0,it.pD)(Bt,xt)){var $t=zt?ft:ft&&ft.states[It];$t&&($t.ignore=!0);continue}ft||(ft=new K.Z,ot.setTextGuideLine(ft),!zt&&(wt||!xt)&&L(ft,!0,"normal",ht.normal),ot.stateProxy&&(ft.stateProxy=ot.stateProxy)),L(ft,!1,It,Et)}}if(ft){(0,it.ce)(ft.style,tt),ft.style.fill=null;var ee=st.get("showAbove"),De=ot.textGuideLineConfig=ot.textGuideLineConfig||{};De.showAbove=ee||!1,ft.buildPath=Z}}function ut(ot,ht){ht=ht||"labelLine";for(var tt={normal:ot.getModel(ht)},ft=0;ft<J.L1.length;ft++){var St=J.L1[ft];tt[St]=ot.getModel([St,ht])}return tt}},54162:function(Ce,Jt,F){"use strict";F.d(Jt,{GI:function(){return vt},VT:function(){return K},WE:function(){return gt},yl:function(){return it}});var N=F(41587),ct=F(60479);function K(et){for(var H=[],J=0;J<et.length;J++){var at=et[J];if(!at.defaultAttr.ignore){var G=at.label,U=G.getComputedTransform(),W=G.getBoundingRect(),lt=!U||U[1]<1e-5&&U[2]<1e-5,g=G.style.margin||0,j=W.clone();j.applyTransform(U),j.x-=g/2,j.y-=g/2,j.width+=g,j.height+=g;var rt=lt?new N.Z(W,U):null;H.push({label:G,labelLine:at.labelLine,rect:j,localRect:W,obb:rt,priority:at.priority,defaultAttr:at.defaultAttr,layoutOption:at.computedLayoutOption,axisAligned:lt,transform:U})}}return H}function dt(et,H,J,at,G,U){var W=et.length;if(W<2)return;et.sort(function(z,ut){return z.rect[H]-ut.rect[H]});for(var lt=0,g,j=!1,rt=[],$=0,O=0;O<W;O++){var X=et[O],Q=X.rect;g=Q[H]-lt,g<0&&(Q[H]-=g,X.label[H]-=g,j=!0);var k=Math.max(-g,0);rt.push(k),$+=k,lt=Q[H]+Q[J]}$>0&&U&&A(-$/W,0,W);var V=et[0],I=et[W-1],D,C;M(),D<0&&L(-D,.8),C<0&&L(C,.8),M(),T(D,C,1),T(C,D,-1),M(),D<0&&Z(-D),C<0&&Z(C);function M(){D=V.rect[H]-at,C=G-I.rect[H]-I.rect[J]}function T(z,ut,ot){if(z<0){var ht=Math.min(ut,-z);if(ht>0){A(ht*ot,0,W);var tt=ht+z;tt<0&&L(-tt*ot,1)}else L(-z*ot,1)}}function A(z,ut,ot){z!==0&&(j=!0);for(var ht=ut;ht<ot;ht++){var tt=et[ht],ft=tt.rect;ft[H]+=z,tt.label[H]+=z}}function L(z,ut){for(var ot=[],ht=0,tt=1;tt<W;tt++){var ft=et[tt-1].rect,St=Math.max(et[tt].rect[H]-ft[H]-ft[J],0);ot.push(St),ht+=St}if(!!ht){var st=Math.min(Math.abs(z)/ht,ut);if(z>0)for(var tt=0;tt<W-1;tt++){var xt=ot[tt]*st;A(xt,0,tt+1)}else for(var tt=W-1;tt>0;tt--){var xt=ot[tt-1]*st;A(-xt,tt,W)}}}function Z(z){var ut=z<0?-1:1;z=Math.abs(z);for(var ot=Math.ceil(z/(W-1)),ht=0;ht<W-1;ht++)if(ut>0?A(ot,0,ht+1):A(-ot,W-ht-1,W),z-=ot,z<=0)return}return j}function gt(et,H,J,at){return dt(et,"x","width",H,J,at)}function vt(et,H,J,at){return dt(et,"y","height",H,J,at)}function it(et){var H=[];et.sort(function(k,V){return V.priority-k.priority});var J=new ct.Z(0,0,0,0);function at(k){if(!k.ignore){var V=k.ensureState("emphasis");V.ignore==null&&(V.ignore=!1)}k.ignore=!0}for(var G=0;G<et.length;G++){var U=et[G],W=U.axisAligned,lt=U.localRect,g=U.transform,j=U.label,rt=U.labelLine;J.copy(U.rect),J.width-=.1,J.height-=.1,J.x+=.05,J.y+=.05;for(var $=U.obb,O=!1,X=0;X<H.length;X++){var Q=H[X];if(!!J.intersect(Q.rect)){if(W&&Q.axisAligned){O=!0;break}if(Q.obb||(Q.obb=new N.Z(Q.localRect,Q.transform)),$||($=new N.Z(lt,g)),$.intersect(Q.obb)){O=!0;break}}}O?(at(j),rt&&at(rt)):(j.attr("ignore",U.defaultAttr.ignore),rt&&rt.attr("ignore",U.defaultAttr.labelGuideIgnore),H.push(U))}}},36006:function(Ce,Jt,F){"use strict";F.d(Jt,{Lr:function(){return at},k3:function(){return J},nC:function(){return G},ni:function(){return H},pe:function(){return X},qA:function(){return O},qT:function(){return $},tD:function(){return Q}});var N=F(96498),ct=F(33051),K=F(26357),dt=F(32234),gt=F(29266),vt={};function it(k,V){for(var I=0;I<K.L1.length;I++){var D=K.L1[I],C=V[D],M=k.ensureState(D);M.style=M.style||{},M.style.text=C}var T=k.currentStates.slice();k.clearStates(!0),k.setStyle({text:V.normal}),k.useStates(T,!0)}function et(k,V,I){var D=k.labelFetcher,C=k.labelDataIndex,M=k.labelDimIndex,T=V.normal,A;D&&(A=D.getFormattedLabel(C,"normal",null,M,T&&T.get("formatter"),I!=null?{interpolatedValue:I}:null)),A==null&&(A=(0,ct.mf)(k.defaultText)?k.defaultText(C,k,I):k.defaultText);for(var L={normal:A},Z=0;Z<K.L1.length;Z++){var z=K.L1[Z],ut=V[z];L[z]=(0,ct.pD)(D?D.getFormattedLabel(C,z,null,M,ut&&ut.get("formatter")):null,A)}return L}function H(k,V,I,D){I=I||vt;for(var C=k instanceof N.ZP,M=!1,T=0;T<K.qc.length;T++){var A=V[K.qc[T]];if(A&&A.getShallow("show")){M=!0;break}}var L=C?k:k.getTextContent();if(M){C||(L||(L=new N.ZP,k.setTextContent(L)),k.stateProxy&&(L.stateProxy=k.stateProxy));var Z=et(I,V),z=V.normal,ut=!!z.getShallow("show"),ot=at(z,D&&D.normal,I,!1,!C);ot.text=Z.normal,C||k.setTextConfig(G(z,I,!1));for(var T=0;T<K.L1.length;T++){var ht=K.L1[T],A=V[ht];if(A){var tt=L.ensureState(ht),ft=!!(0,ct.pD)(A.getShallow("show"),ut);if(ft!==ut&&(tt.ignore=!ft),tt.style=at(A,D&&D[ht],I,!0,!C),tt.style.text=Z[ht],!C){var St=k.ensureState(ht);St.textConfig=G(A,I,!0)}}}L.silent=!!z.getShallow("silent"),L.style.x!=null&&(ot.x=L.style.x),L.style.y!=null&&(ot.y=L.style.y),L.ignore=!ut,L.useStyle(ot),L.dirty(),I.enableTextSetter&&(O(L).setLabelText=function(st){var xt=et(I,V,st);it(L,xt)})}else L&&(L.ignore=!0);k.dirty()}function J(k,V){V=V||"label";for(var I={normal:k.getModel(V)},D=0;D<K.L1.length;D++){var C=K.L1[D];I[C]=k.getModel([C,V])}return I}function at(k,V,I,D,C){var M={};return U(M,k,I,D,C),V&&(0,ct.l7)(M,V),M}function G(k,V,I){V=V||{};var D={},C,M=k.getShallow("rotate"),T=(0,ct.pD)(k.getShallow("distance"),I?null:5),A=k.getShallow("offset");return C=k.getShallow("position")||(I?null:"inside"),C==="outside"&&(C=V.defaultOutsidePosition||"top"),C!=null&&(D.position=C),A!=null&&(D.offset=A),M!=null&&(M*=Math.PI/180,D.rotation=M),T!=null&&(D.distance=T),D.outsideFill=k.get("color")==="inherit"?V.inheritColor||null:"auto",D}function U(k,V,I,D,C){I=I||vt;var M=V.ecModel,T=M&&M.option.textStyle,A=W(V),L;if(A){L={};for(var Z in A)if(A.hasOwnProperty(Z)){var z=V.getModel(["rich",Z]);rt(L[Z]={},z,T,I,D,C,!1,!0)}}L&&(k.rich=L);var ut=V.get("overflow");ut&&(k.overflow=ut);var ot=V.get("minMargin");ot!=null&&(k.margin=ot),rt(k,V,T,I,D,C,!0,!1)}function W(k){for(var V;k&&k!==k.ecModel;){var I=(k.option||vt).rich;if(I){V=V||{};for(var D=(0,ct.XP)(I),C=0;C<D.length;C++){var M=D[C];V[M]=1}}k=k.parentModel}return V}var lt=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],g=["align","lineHeight","width","height","tag","verticalAlign"],j=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function rt(k,V,I,D,C,M,T,A){I=!C&&I||vt;var L=D&&D.inheritColor,Z=V.getShallow("color"),z=V.getShallow("textBorderColor"),ut=(0,ct.pD)(V.getShallow("opacity"),I.opacity);(Z==="inherit"||Z==="auto")&&(L?Z=L:Z=null),(z==="inherit"||z==="auto")&&(L?z=L:z=null),M||(Z=Z||I.color,z=z||I.textBorderColor),Z!=null&&(k.fill=Z),z!=null&&(k.stroke=z);var ot=(0,ct.pD)(V.getShallow("textBorderWidth"),I.textBorderWidth);ot!=null&&(k.lineWidth=ot);var ht=(0,ct.pD)(V.getShallow("textBorderType"),I.textBorderType);ht!=null&&(k.lineDash=ht);var tt=(0,ct.pD)(V.getShallow("textBorderDashOffset"),I.textBorderDashOffset);tt!=null&&(k.lineDashOffset=tt),!C&&ut==null&&!A&&(ut=D&&D.defaultOpacity),ut!=null&&(k.opacity=ut),!C&&!M&&k.fill==null&&D.inheritColor&&(k.fill=D.inheritColor);for(var ft=0;ft<lt.length;ft++){var St=lt[ft],st=(0,ct.pD)(V.getShallow(St),I[St]);st!=null&&(k[St]=st)}for(var ft=0;ft<g.length;ft++){var St=g[ft],st=V.getShallow(St);st!=null&&(k[St]=st)}if(k.verticalAlign==null){var xt=V.getShallow("baseline");xt!=null&&(k.verticalAlign=xt)}if(!T||!D.disableBox){for(var ft=0;ft<j.length;ft++){var St=j[ft],st=V.getShallow(St);st!=null&&(k[St]=st)}var wt=V.getShallow("borderType");wt!=null&&(k.borderDash=wt),(k.backgroundColor==="auto"||k.backgroundColor==="inherit")&&L&&(k.backgroundColor=L),(k.borderColor==="auto"||k.borderColor==="inherit")&&L&&(k.borderColor=L)}}function $(k,V){var I=V&&V.getModel("textStyle");return(0,ct.fy)([k.fontStyle||I&&I.getShallow("fontStyle")||"",k.fontWeight||I&&I.getShallow("fontWeight")||"",(k.fontSize||I&&I.getShallow("fontSize")||12)+"px",k.fontFamily||I&&I.getShallow("fontFamily")||"sans-serif"].join(" "))}var O=(0,dt.Yf)();function X(k,V,I,D){if(!!k){var C=O(k);C.prevValue=C.value,C.value=I;var M=V.normal;C.valueAnimation=M.get("valueAnimation"),C.valueAnimation&&(C.precision=M.get("precision"),C.defaultInterpolatedText=D,C.statesModels=V)}}function Q(k,V,I,D,C){var M=O(k);if(!M.valueAnimation||M.prevValue===M.value)return;var T=M.defaultInterpolatedText,A=(0,ct.pD)(M.interpolatedValue,M.prevValue),L=M.value;function Z(z){var ut=(0,dt.pk)(I,M.precision,A,L,z);M.interpolatedValue=z===1?null:ut;var ot=et({labelDataIndex:V,labelFetcher:C,defaultText:T?T(ut):ut+""},M.statesModels,ut);it(k,ot)}k.percent=0,(M.prevValue==null?gt.KZ:gt.D)(k,{percent:1},D,V,null,Z)}},79093:function(Ce,Jt,F){"use strict";F.d(Jt,{Bk:function(){return g},G_:function(){return W},Ge:function(){return J},Gk:function(){return H},My:function(){return G},bK:function(){return lt}});var N=F(33051),ct=F(85669),K=F(99936),dt=F(95682),gt=F(80887),vt="__ec_stack_";function it(O){return O.get("stack")||vt+O.seriesIndex}function et(O){return O.dim+O.index}function H(O){var X=[],Q=O.axis,k="axis0";if(Q.type==="category"){for(var V=Q.getBandWidth(),I=0;I<O.count;I++)X.push((0,N.ce)({bandWidth:V,axisKey:k,stackId:vt+I},O));for(var D=U(X),C=[],I=0;I<O.count;I++){var M=D[k][vt+I];M.offsetCenter=M.offset+M.width/2,C.push(M)}return C}}function J(O,X){var Q=[];return X.eachSeriesByType(O,function(k){j(k)&&Q.push(k)}),Q}function at(O){var X={};(0,N.S6)(O,function(M){var T=M.coordinateSystem,A=T.getBaseAxis();if(!(A.type!=="time"&&A.type!=="value"))for(var L=M.getData(),Z=A.dim+"_"+A.index,z=L.getDimensionIndex(L.mapDimension(A.dim)),ut=L.getStore(),ot=0,ht=ut.count();ot<ht;++ot){var tt=ut.get(z,ot);X[Z]?X[Z].push(tt):X[Z]=[tt]}});var Q={};for(var k in X)if(X.hasOwnProperty(k)){var V=X[k];if(V){V.sort(function(M,T){return M-T});for(var I=null,D=1;D<V.length;++D){var C=V[D]-V[D-1];C>0&&(I=I===null?C:Math.min(I,C))}Q[k]=I}}return Q}function G(O){var X=at(O),Q=[];return(0,N.S6)(O,function(k){var V=k.coordinateSystem,I=V.getBaseAxis(),D=I.getExtent(),C;if(I.type==="category")C=I.getBandWidth();else if(I.type==="value"||I.type==="time"){var M=I.dim+"_"+I.index,T=X[M],A=Math.abs(D[1]-D[0]),L=I.scale.getExtent(),Z=Math.abs(L[1]-L[0]);C=T?A/Z*T:A}else{var z=k.getData();C=Math.abs(D[1]-D[0])/z.count()}var ut=(0,ct.GM)(k.get("barWidth"),C),ot=(0,ct.GM)(k.get("barMaxWidth"),C),ht=(0,ct.GM)(k.get("barMinWidth")||(rt(k)?.5:1),C),tt=k.get("barGap"),ft=k.get("barCategoryGap");Q.push({bandWidth:C,barWidth:ut,barMaxWidth:ot,barMinWidth:ht,barGap:tt,barCategoryGap:ft,axisKey:et(I),stackId:it(k)})}),U(Q)}function U(O){var X={};(0,N.S6)(O,function(k,V){var I=k.axisKey,D=k.bandWidth,C=X[I]||{bandWidth:D,remainedWidth:D,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},M=C.stacks;X[I]=C;var T=k.stackId;M[T]||C.autoWidthCount++,M[T]=M[T]||{width:0,maxWidth:0};var A=k.barWidth;A&&!M[T].width&&(M[T].width=A,A=Math.min(C.remainedWidth,A),C.remainedWidth-=A);var L=k.barMaxWidth;L&&(M[T].maxWidth=L);var Z=k.barMinWidth;Z&&(M[T].minWidth=Z);var z=k.barGap;z!=null&&(C.gap=z);var ut=k.barCategoryGap;ut!=null&&(C.categoryGap=ut)});var Q={};return(0,N.S6)(X,function(k,V){Q[V]={};var I=k.stacks,D=k.bandWidth,C=k.categoryGap;if(C==null){var M=(0,N.XP)(I).length;C=Math.max(35-M*4,15)+"%"}var T=(0,ct.GM)(C,D),A=(0,ct.GM)(k.gap,1),L=k.remainedWidth,Z=k.autoWidthCount,z=(L-T)/(Z+(Z-1)*A);z=Math.max(z,0),(0,N.S6)(I,function(tt){var ft=tt.maxWidth,St=tt.minWidth;if(tt.width){var st=tt.width;ft&&(st=Math.min(st,ft)),St&&(st=Math.max(st,St)),tt.width=st,L-=st+A*st,Z--}else{var st=z;ft&&ft<st&&(st=Math.min(ft,L)),St&&St>st&&(st=St),st!==z&&(tt.width=st,L-=st+A*st,Z--)}}),z=(L-T)/(Z+(Z-1)*A),z=Math.max(z,0);var ut=0,ot;(0,N.S6)(I,function(tt,ft){tt.width||(tt.width=z),ot=tt,ut+=tt.width*(1+A)}),ot&&(ut-=ot.width*A);var ht=-ut/2;(0,N.S6)(I,function(tt,ft){Q[V][ft]=Q[V][ft]||{bandWidth:D,offset:ht,width:tt.width},ht+=tt.width*(1+A)})}),Q}function W(O,X,Q){if(O&&X){var k=O[et(X)];return k!=null&&Q!=null?k[it(Q)]:k}}function lt(O,X){var Q=J(O,X),k=G(Q);(0,N.S6)(Q,function(V){var I=V.getData(),D=V.coordinateSystem,C=D.getBaseAxis(),M=it(V),T=k[et(C)][M],A=T.offset,L=T.width;I.setLayout({bandWidth:T.bandWidth,offset:A,size:L})})}function g(O){return{seriesType:O,plan:(0,dt.Z)(),reset:function(X){if(!!j(X)){var Q=X.getData(),k=X.coordinateSystem,V=k.getBaseAxis(),I=k.getOtherAxis(V),D=Q.getDimensionIndex(Q.mapDimension(I.dim)),C=Q.getDimensionIndex(Q.mapDimension(V.dim)),M=X.get("showBackground",!0),T=Q.mapDimension(I.dim),A=Q.getCalculationInfo("stackResultDimension"),L=(0,K.M)(Q,T)&&!!Q.getCalculationInfo("stackedOnSeries"),Z=I.isHorizontal(),z=$(V,I),ut=rt(X),ot=X.get("barMinHeight")||0,ht=A&&Q.getDimensionIndex(A),tt=Q.getLayout("size"),ft=Q.getLayout("offset");return{progress:function(St,st){for(var xt=St.count,wt=ut&&(0,gt.o)(xt*3),Dt=ut&&M&&(0,gt.o)(xt*3),It=ut&&(0,gt.o)(xt),Et=k.master.getRect(),zt=Z?Et.width:Et.height,Bt,Ht=st.getStore(),$t=0;(Bt=St.next())!=null;){var ee=Ht.get(L?ht:D,Bt),De=Ht.get(C,Bt),Se=z,Be=void 0;L&&(Be=+ee-Ht.get(D,Bt));var Ft=void 0,Tt=void 0,At=void 0,Kt=void 0;if(Z){var pe=k.dataToPoint([ee,De]);if(L){var Oe=k.dataToPoint([Be,De]);Se=Oe[0]}Ft=Se,Tt=pe[1]+ft,At=pe[0]-Se,Kt=tt,Math.abs(At)<ot&&(At=(At<0?-1:1)*ot)}else{var pe=k.dataToPoint([De,ee]);if(L){var Oe=k.dataToPoint([De,Be]);Se=Oe[1]}Ft=pe[0]+ft,Tt=Se,At=tt,Kt=pe[1]-Se,Math.abs(Kt)<ot&&(Kt=(Kt<=0?-1:1)*ot)}ut?(wt[$t]=Ft,wt[$t+1]=Tt,wt[$t+2]=Z?At:Kt,Dt&&(Dt[$t]=Z?Et.x:Ft,Dt[$t+1]=Z?Tt:Et.y,Dt[$t+2]=zt),It[Bt]=Bt):st.setItemLayout(Bt,{x:Ft,y:Tt,width:At,height:Kt}),$t+=3}ut&&st.setLayout({largePoints:wt,largeDataIndices:It,largeBackgroundPoints:Dt,valueAxisHorizontal:Z})}}}}}}function j(O){return O.coordinateSystem&&O.coordinateSystem.type==="cartesian2d"}function rt(O){return O.pipelineContext&&O.pipelineContext.large}function $(O,X){return X.toGlobalCoord(X.dataToCoord(X.type==="log"?1:0))}},31891:function(Ce,Jt,F){"use strict";F.d(Jt,{s:function(){return gt},y:function(){return K}});var N=F(33051),ct=F(32234);function K(vt,it){function et(H,J){var at=[];return H.eachComponent({mainType:"series",subType:vt,query:J},function(G){at.push(G.seriesIndex)}),at}(0,N.S6)([[vt+"ToggleSelect","toggleSelect"],[vt+"Select","select"],[vt+"UnSelect","unselect"]],function(H){it(H[0],function(J,at,G){J=(0,N.l7)({},J),G.dispatchAction((0,N.l7)(J,{type:H[1],seriesIndex:et(at,J)}))})})}function dt(vt,it,et,H,J){var at=vt+it;et.isSilent(at)||H.eachComponent({mainType:"series",subType:"pie"},function(G){for(var U=G.seriesIndex,W=G.option.selectedMap,lt=J.selected,g=0;g<lt.length;g++)if(lt[g].seriesIndex===U){var j=G.getData(),rt=(0,ct.gO)(j,J.fromActionPayload);et.trigger(at,{type:at,seriesId:G.id,name:(0,N.kJ)(rt)?j.getName(rt[0]):j.getName(rt),selected:(0,N.HD)(W)?W:(0,N.l7)({},W)})}})}function gt(vt,it,et){vt.on("selectchanged",function(H){var J=et.getModel();H.isFromClick?(dt("map","selectchanged",it,J,H),dt("pie","selectchanged",it,J,H)):H.fromAction==="select"?(dt("map","selected",it,J,H),dt("pie","selected",it,J,H)):H.fromAction==="unselect"&&(dt("map","unselected",it,J,H),dt("pie","unselected",it,J,H))})}},98071:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(33051),K=F(1497),dt=F(42151),gt=F(34251),vt=F(32234),it=F(76172),et=(0,vt.Yf)(),H=function(at){(0,N.ZT)(G,at);function G(U,W,lt){var g=at.call(this,U,W,lt)||this;return g.uid=dt.Kr("ec_cpt_model"),g}return G.prototype.init=function(U,W,lt){this.mergeDefaultAndTheme(U,lt)},G.prototype.mergeDefaultAndTheme=function(U,W){var lt=it.YD(this),g=lt?it.tE(U):{},j=W.getTheme();ct.TS(U,j.get(this.mainType)),ct.TS(U,this.getDefaultOption()),lt&&it.dt(U,g,lt)},G.prototype.mergeOption=function(U,W){ct.TS(this.option,U,!0);var lt=it.YD(this);lt&&it.dt(this.option,U,lt)},G.prototype.optionUpdated=function(U,W){},G.prototype.getDefaultOption=function(){var U=this.constructor;if(!(0,gt.PT)(U))return U.defaultOption;var W=et(this);if(!W.defaultOption){for(var lt=[],g=U;g;){var j=g.prototype.defaultOption;j&&lt.push(j),g=g.superClass}for(var rt={},$=lt.length-1;$>=0;$--)rt=ct.TS(rt,lt[$],!0);W.defaultOption=rt}return W.defaultOption},G.prototype.getReferringComponents=function(U,W){var lt=U+"Index",g=U+"Id";return(0,vt.HZ)(this.ecModel,U,{index:this.get(lt,!0),id:this.get(g,!0)},W)},G.prototype.getBoxLayoutParams=function(){var U=this;return{left:U.get("left"),top:U.get("top"),right:U.get("right"),bottom:U.get("bottom"),width:U.get("width"),height:U.get("height")}},G.prototype.getZLevelKey=function(){return""},G.prototype.setZLevel=function(U){this.option.zlevel=U},G.protoInitialize=function(){var U=G.prototype;U.type="component",U.id="",U.name="",U.mainType="",U.subType="",U.componentIndex=0}(),G}(K.Z);(0,gt.pw)(H,K.Z),(0,gt.au)(H),dt.cj(H),dt.jS(H,J);function J(at){var G=[];return ct.S6(H.getClassesByMainType(at),function(U){G=G.concat(U.dependencies||U.prototype.dependencies||[])}),G=ct.UI(G,function(U){return(0,gt.u9)(U).main}),at!=="dataset"&&ct.cq(G,"dataset")<=0&&G.unshift("dataset"),G}Jt.Z=H},1497:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return rt}});var N=F(66387),ct=F(34251),K=F(59066),dt=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],gt=(0,K.Z)(dt),vt=function(){function $(){}return $.prototype.getAreaStyle=function(O,X){return gt(this,O,X)},$}(),it=F(36006),et=F(96498),H=["textStyle","color"],J=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],at=new et.ZP,G=function(){function $(){}return $.prototype.getTextColor=function(O){var X=this.ecModel;return this.getShallow("color")||(!O&&X?X.get(H):null)},$.prototype.getFont=function(){return(0,it.qT)({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},$.prototype.getTextRect=function(O){for(var X={text:O,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},Q=0;Q<J.length;Q++)X[J[Q]]=this.getShallow(J[Q]);return at.useStyle(X),at.update(),at.getBoundingRect()},$}(),U=G,W=F(77515),lt=F(89887),g=F(33051),j=function(){function $(O,X,Q){this.parentModel=X,this.ecModel=Q,this.option=O}return $.prototype.init=function(O,X,Q){for(var k=[],V=3;V<arguments.length;V++)k[V-3]=arguments[V]},$.prototype.mergeOption=function(O,X){(0,g.TS)(this.option,O,!0)},$.prototype.get=function(O,X){return O==null?this.option:this._doGet(this.parsePath(O),!X&&this.parentModel)},$.prototype.getShallow=function(O,X){var Q=this.option,k=Q==null?Q:Q[O];if(k==null&&!X){var V=this.parentModel;V&&(k=V.getShallow(O))}return k},$.prototype.getModel=function(O,X){var Q=O!=null,k=Q?this.parsePath(O):null,V=Q?this._doGet(k):this.option;return X=X||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(k)),new $(V,X,this.ecModel)},$.prototype.isEmpty=function(){return this.option==null},$.prototype.restoreData=function(){},$.prototype.clone=function(){var O=this.constructor;return new O((0,g.d9)(this.option))},$.prototype.parsePath=function(O){return typeof O=="string"?O.split("."):O},$.prototype.resolveParentPath=function(O){return O},$.prototype.isAnimationEnabled=function(){if(!N.Z.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},$.prototype._doGet=function(O,X){var Q=this.option;if(!O)return Q;for(var k=0;k<O.length&&!(!!O[k]&&(Q=Q&&typeof Q=="object"?Q[O[k]]:null,Q==null));k++);return Q==null&&X&&(Q=X._doGet(this.resolveParentPath(O),X.parentModel)),Q},$}();(0,ct.dm)(j),(0,ct.Qj)(j),(0,g.jB)(j,W.K),(0,g.jB)(j,lt.D),(0,g.jB)(j,vt),(0,g.jB)(j,U);var rt=j},93321:function(Ce,Jt,F){"use strict";F.d(Jt,{V:function(){return lt}});var N=F(70655),ct=F(33051),K=F(66387),dt=F(32234),gt=F(98071),vt=F(75494),it=F(61219),et=F(76172),H=F(8674),J=F(34251),at=F(36437),G=F(53993),U=dt.Yf();function W(I,D){return I.getName(D)||I.getId(D)}var lt="__universalTransitionEnabled",g=function(I){(0,N.ZT)(D,I);function D(){var C=I!==null&&I.apply(this,arguments)||this;return C._selectedDataIndicesMap={},C}return D.prototype.init=function(C,M,T){this.seriesIndex=this.componentIndex,this.dataTask=(0,H.v)({count:$,reset:O}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(C,T);var A=U(this).sourceManager=new at.U(this);A.prepareSource();var L=this.getInitialData(C,T);Q(L,this),this.dataTask.context.data=L,U(this).dataBeforeProcessed=L,j(this),this._initSelectedMapFromData(L)},D.prototype.mergeDefaultAndTheme=function(C,M){var T=(0,et.YD)(this),A=T?(0,et.tE)(C):{},L=this.subType;gt.Z.hasClass(L)&&(L+="Series"),ct.TS(C,M.getTheme().get(this.subType)),ct.TS(C,this.getDefaultOption()),dt.Cc(C,"label",["show"]),this.fillDataTextStyle(C.data),T&&(0,et.dt)(C,A,T)},D.prototype.mergeOption=function(C,M){C=ct.TS(this.option,C,!0),this.fillDataTextStyle(C.data);var T=(0,et.YD)(this);T&&(0,et.dt)(this.option,C,T);var A=U(this).sourceManager;A.dirty(),A.prepareSource();var L=this.getInitialData(C,M);Q(L,this),this.dataTask.dirty(),this.dataTask.context.data=L,U(this).dataBeforeProcessed=L,j(this),this._initSelectedMapFromData(L)},D.prototype.fillDataTextStyle=function(C){if(C&&!ct.fU(C))for(var M=["show"],T=0;T<C.length;T++)C[T]&&C[T].label&&dt.Cc(C[T],"label",M)},D.prototype.getInitialData=function(C,M){},D.prototype.appendData=function(C){var M=this.getRawData();M.appendData(C.data)},D.prototype.getData=function(C){var M=V(this);if(M){var T=M.context.data;return C==null?T:T.getLinkedData(C)}else return U(this).data},D.prototype.getAllData=function(){var C=this.getData();return C&&C.getLinkedDataAll?C.getLinkedDataAll():[{data:C}]},D.prototype.setData=function(C){var M=V(this);if(M){var T=M.context;T.outputData=C,M!==this.dataTask&&(T.data=C)}U(this).data=C},D.prototype.getEncode=function(){var C=this.get("encode",!0);if(C)return ct.kW(C)},D.prototype.getSourceManager=function(){return U(this).sourceManager},D.prototype.getSource=function(){return this.getSourceManager().getSource()},D.prototype.getRawData=function(){return U(this).dataBeforeProcessed},D.prototype.getColorBy=function(){var C=this.get("colorBy");return C||"series"},D.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},D.prototype.getBaseAxis=function(){var C=this.coordinateSystem;return C&&C.getBaseAxis&&C.getBaseAxis()},D.prototype.formatTooltip=function(C,M,T){return(0,G.w)({series:this,dataIndex:C,multipleSeries:M})},D.prototype.isAnimationEnabled=function(){var C=this.ecModel;if(K.Z.node&&!(C&&C.ssr))return!1;var M=this.getShallow("animation");return M&&this.getData().count()>this.getShallow("animationThreshold")&&(M=!1),!!M},D.prototype.restoreData=function(){this.dataTask.dirty()},D.prototype.getColorFromPalette=function(C,M,T){var A=this.ecModel,L=vt._.prototype.getColorFromPalette.call(this,C,M,T);return L||(L=A.getColorFromPalette(C,M,T)),L},D.prototype.coordDimToDataDim=function(C){return this.getRawData().mapDimensionsAll(C)},D.prototype.getProgressive=function(){return this.get("progressive")},D.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},D.prototype.select=function(C,M){this._innerSelect(this.getData(M),C)},D.prototype.unselect=function(C,M){var T=this.option.selectedMap;if(!!T){var A=this.option.selectedMode,L=this.getData(M);if(A==="series"||T==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var Z=0;Z<C.length;Z++){var z=C[Z],ut=W(L,z);T[ut]=!1,this._selectedDataIndicesMap[ut]=-1}}},D.prototype.toggleSelect=function(C,M){for(var T=[],A=0;A<C.length;A++)T[0]=C[A],this.isSelected(C[A],M)?this.unselect(T,M):this.select(T,M)},D.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var C=this._selectedDataIndicesMap,M=ct.XP(C),T=[],A=0;A<M.length;A++){var L=C[M[A]];L>=0&&T.push(L)}return T},D.prototype.isSelected=function(C,M){var T=this.option.selectedMap;if(!T)return!1;var A=this.getData(M);return(T==="all"||T[W(A,C)])&&!A.getItemModel(C).get(["select","disabled"])},D.prototype.isUniversalTransitionEnabled=function(){if(this[lt])return!0;var C=this.option.universalTransition;return C?C===!0?!0:C&&C.enabled:!1},D.prototype._innerSelect=function(C,M){var T,A,L=this.option,Z=L.selectedMode,z=M.length;if(!(!Z||!z)){if(Z==="series")L.selectedMap="all";else if(Z==="multiple"){ct.Kn(L.selectedMap)||(L.selectedMap={});for(var ut=L.selectedMap,ot=0;ot<z;ot++){var ht=M[ot],tt=W(C,ht);ut[tt]=!0,this._selectedDataIndicesMap[tt]=C.getRawIndex(ht)}}else if(Z==="single"||Z===!0){var ft=M[z-1],tt=W(C,ft);L.selectedMap=(T={},T[tt]=!0,T),this._selectedDataIndicesMap=(A={},A[tt]=C.getRawIndex(ft),A)}}},D.prototype._initSelectedMapFromData=function(C){if(!this.option.selectedMap){var M=[];C.hasItemOption&&C.each(function(T){var A=C.getRawDataItem(T);A&&A.selected&&M.push(T)}),M.length>0&&this._innerSelect(C,M)}},D.registerClass=function(C){return gt.Z.registerClass(C)},D.protoInitialize=function(){var C=D.prototype;C.type="series.__base__",C.seriesIndex=0,C.ignoreStyleOnData=!1,C.hasSymbolVisual=!1,C.defaultSymbol="circle",C.visualStyleAccessPath="itemStyle",C.visualDrawType="fill"}(),D}(gt.Z);ct.jB(g,it.X),ct.jB(g,vt._),(0,J.pw)(g,gt.Z);function j(I){var D=I.name;dt.yu(I)||(I.name=rt(I)||D)}function rt(I){var D=I.getRawData(),C=D.mapDimensionsAll("seriesName"),M=[];return ct.S6(C,function(T){var A=D.getDimensionInfo(T);A.displayName&&M.push(A.displayName)}),M.join(" ")}function $(I){return I.model.getRawData().count()}function O(I){var D=I.model;return D.setData(D.getRawData().cloneShallow()),X}function X(I,D){D.outputData&&I.end>D.outputData.count()&&D.model.getRawData().cloneShallow(D.outputData)}function Q(I,D){ct.S6(ct.WW(I.CHANGABLE_METHODS,I.DOWNSAMPLE_METHODS),function(C){I.wrapMethod(C,ct.WA(k,D))})}function k(I,D){var C=V(I);return C&&C.setOutputEnd((D||this).count()),D}function V(I){var D=(I.ecModel||{}).scheduler,C=D&&D.getPipeline(I.uid);if(C){var M=C.currentTask;if(M){var T=M.agentStubMap;T&&(M=T.get(I.uid))}return M}}Jt.Z=g},82468:function(Ce,Jt,F){"use strict";F.d(Jt,{R:function(){return dt},f:function(){return K}});var N=F(33051),ct=(0,N.kW)();function K(gt,vt){(0,N.hu)(ct.get(gt)==null&&vt),ct.set(gt,vt)}function dt(gt,vt,it){var et=ct.get(vt);if(!et)return it;var H=et(gt);if(!H)return it;if(!1)var J;return it.concat(H)}},61219:function(Ce,Jt,F){"use strict";F.d(Jt,{X:function(){return gt},f:function(){return vt}});var N=F(33051),ct=F(68540),K=F(78988),dt=/\{@(.+?)\}/g,gt=function(){function it(){}return it.prototype.getDataParams=function(et,H){var J=this.getData(H),at=this.getRawValue(et,H),G=J.getRawIndex(et),U=J.getName(et),W=J.getRawDataItem(et),lt=J.getItemVisual(et,"style"),g=lt&&lt[J.getItemVisual(et,"drawType")||"fill"],j=lt&&lt.stroke,rt=this.mainType,$=rt==="series",O=J.userOutput&&J.userOutput.get();return{componentType:rt,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:$?this.subType:null,seriesIndex:this.seriesIndex,seriesId:$?this.id:null,seriesName:$?this.name:null,name:U,dataIndex:G,data:W,dataType:H,value:at,color:g,borderColor:j,dimensionNames:O?O.fullDimensions:null,encode:O?O.encode:null,$vars:["seriesName","name","value"]}},it.prototype.getFormattedLabel=function(et,H,J,at,G,U){H=H||"normal";var W=this.getData(J),lt=this.getDataParams(et,J);if(U&&(lt.value=U.interpolatedValue),at!=null&&N.kJ(lt.value)&&(lt.value=lt.value[at]),!G){var g=W.getItemModel(et);G=g.get(H==="normal"?["label","formatter"]:[H,"label","formatter"])}if(N.mf(G))return lt.status=H,lt.dimensionIndex=at,G(lt);if(N.HD(G)){var j=(0,K.kF)(G,lt);return j.replace(dt,function(rt,$){var O=$.length,X=$;X.charAt(0)==="["&&X.charAt(O-1)==="]"&&(X=+X.slice(1,O-1));var Q=(0,ct.hk)(W,et,X);if(U&&N.kJ(U.interpolatedValue)){var k=W.getDimensionIndex(X);k>=0&&(Q=U.interpolatedValue[k])}return Q!=null?Q+"":""})}},it.prototype.getRawValue=function(et,H){return(0,ct.hk)(this.getData(H),et)},it.prototype.formatTooltip=function(et,H,J){},it}();function vt(it){var et,H;return N.Kn(it)?it.type&&(H=it):et=it,{text:et,frag:H}}},89887:function(Ce,Jt,F){"use strict";F.d(Jt,{D:function(){return dt},t:function(){return ct}});var N=F(59066),ct=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],K=(0,N.Z)(ct),dt=function(){function gt(){}return gt.prototype.getItemStyle=function(vt,it){return K(this,vt,it)},gt}()},77515:function(Ce,Jt,F){"use strict";F.d(Jt,{K:function(){return dt},v:function(){return ct}});var N=F(59066),ct=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],K=(0,N.Z)(ct),dt=function(){function gt(){}return gt.prototype.getLineStyle=function(vt){return K(this,vt)},gt}()},59066:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return ct}});var N=F(33051);function ct(K,dt){for(var gt=0;gt<K.length;gt++)K[gt][1]||(K[gt][1]=K[gt][0]);return dt=dt||!1,function(vt,it,et){for(var H={},J=0;J<K.length;J++){var at=K[J][1];if(!(it&&N.cq(it,at)>=0||et&&N.cq(et,at)<0)){var G=vt.getShallow(at,dt);G!=null&&(H[K[J][0]]=G)}}return H}}},75494:function(Ce,Jt,F){"use strict";F.d(Jt,{_:function(){return dt},i:function(){return gt}});var N=F(32234),ct=(0,N.Yf)(),K=(0,N.Yf)(),dt=function(){function H(){}return H.prototype.getColorFromPalette=function(J,at,G){var U=(0,N.kF)(this.get("color",!0)),W=this.get("colorLayer",!0);return it(this,ct,U,W,J,at,G)},H.prototype.clearColorPalette=function(){et(this,ct)},H}();function gt(H,J,at,G){var U=(0,N.kF)(H.get(["aria","decal","decals"]));return it(H,K,U,null,J,at,G)}function vt(H,J){for(var at=H.length,G=0;G<at;G++)if(H[G].length>J)return H[G];return H[at-1]}function it(H,J,at,G,U,W,lt){W=W||H;var g=J(W),j=g.paletteIdx||0,rt=g.paletteNameMap=g.paletteNameMap||{};if(rt.hasOwnProperty(U))return rt[U];var $=lt==null||!G?at:vt(G,lt);if($=$||at,!(!$||!$.length)){var O=$[j];return U&&(rt[U]=O),g.paletteIdx=(j+1)%$.length,O}}function et(H,J){J(H).paletteIdx=0,J(H).paletteNameMap={}}},70012:function(Ce,Jt,F){"use strict";F.d(Jt,{N:function(){return k}});var N=F(4990),ct=F(33051),K=F(70655),dt=F(23510),gt=F(5787),vt=F(97772),it=F(60479),et=F(14414),H=F(23132);function J(V,I,D){var C=H.qW.createCanvas(),M=I.getWidth(),T=I.getHeight(),A=C.style;return A&&(A.position="absolute",A.left="0",A.top="0",A.width=M+"px",A.height=T+"px",C.setAttribute("data-zr-dom-id",V)),C.width=M*D,C.height=T*D,C}var at=function(V){(0,K.ZT)(I,V);function I(D,C,M){var T=V.call(this)||this;T.motionBlur=!1,T.lastFrameAlpha=.7,T.dpr=1,T.virtual=!1,T.config={},T.incremental=!1,T.zlevel=0,T.maxRepaintRectCount=5,T.__dirty=!0,T.__firstTimePaint=!0,T.__used=!1,T.__drawIndex=0,T.__startIndex=0,T.__endIndex=0,T.__prevStartIndex=null,T.__prevEndIndex=null;var A;M=M||N.KL,typeof D=="string"?A=J(D,C,M):ct.Kn(D)&&(A=D,D=A.id),T.id=D,T.dom=A;var L=A.style;return L&&(ct.$j(A),A.onselectstart=function(){return!1},L.padding="0",L.margin="0",L.borderWidth="0"),T.painter=C,T.dpr=M,T}return I.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},I.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},I.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},I.prototype.setUnpainted=function(){this.__firstTimePaint=!0},I.prototype.createBackBuffer=function(){var D=this.dpr;this.domBack=J("back-"+this.id,this.painter,D),this.ctxBack=this.domBack.getContext("2d"),D!==1&&this.ctxBack.scale(D,D)},I.prototype.createRepaintRects=function(D,C,M,T){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var A=[],L=this.maxRepaintRectCount,Z=!1,z=new it.Z(0,0,0,0);function ut(wt){if(!(!wt.isFinite()||wt.isZero()))if(A.length===0){var Dt=new it.Z(0,0,0,0);Dt.copy(wt),A.push(Dt)}else{for(var It=!1,Et=1/0,zt=0,Bt=0;Bt<A.length;++Bt){var Ht=A[Bt];if(Ht.intersect(wt)){var $t=new it.Z(0,0,0,0);$t.copy(Ht),$t.union(wt),A[Bt]=$t,It=!0;break}else if(Z){z.copy(wt),z.union(Ht);var ee=wt.width*wt.height,De=Ht.width*Ht.height,Se=z.width*z.height,Be=Se-ee-De;Be<Et&&(Et=Be,zt=Bt)}}if(Z&&(A[zt].union(wt),It=!0),!It){var Dt=new it.Z(0,0,0,0);Dt.copy(wt),A.push(Dt)}Z||(Z=A.length>=L)}}for(var ot=this.__startIndex;ot<this.__endIndex;++ot){var ht=D[ot];if(ht){var tt=ht.shouldBePainted(M,T,!0,!0),ft=ht.__isRendered&&(ht.__dirty&et.YV||!tt)?ht.getPrevPaintRect():null;ft&&ut(ft);var St=tt&&(ht.__dirty&et.YV||!ht.__isRendered)?ht.getPaintRect():null;St&&ut(St)}}for(var ot=this.__prevStartIndex;ot<this.__prevEndIndex;++ot){var ht=C[ot],tt=ht.shouldBePainted(M,T,!0,!0);if(ht&&(!tt||!ht.__zr)&&ht.__isRendered){var ft=ht.getPrevPaintRect();ft&&ut(ft)}}var st;do{st=!1;for(var ot=0;ot<A.length;){if(A[ot].isZero()){A.splice(ot,1);continue}for(var xt=ot+1;xt<A.length;)A[ot].intersect(A[xt])?(st=!0,A[ot].union(A[xt]),A.splice(xt,1)):xt++;ot++}}while(st);return this._paintRects=A,A},I.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},I.prototype.resize=function(D,C){var M=this.dpr,T=this.dom,A=T.style,L=this.domBack;A&&(A.width=D+"px",A.height=C+"px"),T.width=D*M,T.height=C*M,L&&(L.width=D*M,L.height=C*M,M!==1&&this.ctxBack.scale(M,M))},I.prototype.clear=function(D,C,M){var T=this.dom,A=this.ctx,L=T.width,Z=T.height;C=C||this.clearColor;var z=this.motionBlur&&!D,ut=this.lastFrameAlpha,ot=this.dpr,ht=this;z&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(T,0,0,L/ot,Z/ot));var tt=this.domBack;function ft(St,st,xt,wt){if(A.clearRect(St,st,xt,wt),C&&C!=="transparent"){var Dt=void 0;ct.Qq(C)?(Dt=C.__canvasGradient||(0,gt.ZF)(A,C,{x:0,y:0,width:xt,height:wt}),C.__canvasGradient=Dt):ct.dL(C)&&(Dt=(0,vt.RZ)(A,C,{dirty:function(){ht.setUnpainted(),ht.__painter.refresh()}})),A.save(),A.fillStyle=Dt||C,A.fillRect(St,st,xt,wt),A.restore()}z&&(A.save(),A.globalAlpha=ut,A.drawImage(tt,St,st,xt,wt),A.restore())}!M||z?ft(0,0,L,Z):M.length&&ct.S6(M,function(St){ft(St.x*ot,St.y*ot,St.width*ot,St.height*ot)})},I}(dt.Z),G=at,U=F(22795),W=F(66387),lt=1e5,g=314159,j=.01,rt=.001;function $(V){return V?V.__builtin__?!0:!(typeof V.resize!="function"||typeof V.refresh!="function"):!1}function O(V,I){var D=document.createElement("div");return D.style.cssText=["position:relative","width:"+V+"px","height:"+I+"px","padding:0","margin:0","border-width:0"].join(";")+";",D}var X=function(){function V(I,D,C,M){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var T=!I.nodeName||I.nodeName.toUpperCase()==="CANVAS";this._opts=C=ct.l7({},C||{}),this.dpr=C.devicePixelRatio||N.KL,this._singleCanvas=T,this.root=I;var A=I.style;A&&(ct.$j(I),I.innerHTML=""),this.storage=D;var L=this._zlevelList;this._prevDisplayList=[];var Z=this._layers;if(T){var ut=I,ot=ut.width,ht=ut.height;C.width!=null&&(ot=C.width),C.height!=null&&(ht=C.height),this.dpr=C.devicePixelRatio||1,ut.width=ot*this.dpr,ut.height=ht*this.dpr,this._width=ot,this._height=ht;var tt=new G(ut,this,this.dpr);tt.__builtin__=!0,tt.initContext(),Z[g]=tt,tt.zlevel=g,L.push(g),this._domRoot=I}else{this._width=(0,gt.ap)(I,0,C),this._height=(0,gt.ap)(I,1,C);var z=this._domRoot=O(this._width,this._height);I.appendChild(z)}}return V.prototype.getType=function(){return"canvas"},V.prototype.isSingleCanvas=function(){return this._singleCanvas},V.prototype.getViewportRoot=function(){return this._domRoot},V.prototype.getViewportRootOffset=function(){var I=this.getViewportRoot();if(I)return{offsetLeft:I.offsetLeft||0,offsetTop:I.offsetTop||0}},V.prototype.refresh=function(I){var D=this.storage.getDisplayList(!0),C=this._prevDisplayList,M=this._zlevelList;this._redrawId=Math.random(),this._paintList(D,C,I,this._redrawId);for(var T=0;T<M.length;T++){var A=M[T],L=this._layers[A];if(!L.__builtin__&&L.refresh){var Z=T===0?this._backgroundColor:null;L.refresh(Z)}}return this._opts.useDirtyRect&&(this._prevDisplayList=D.slice()),this},V.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},V.prototype._paintHoverList=function(I){var D=I.length,C=this._hoverlayer;if(C&&C.clear(),!!D){for(var M={inHover:!0,viewWidth:this._width,viewHeight:this._height},T,A=0;A<D;A++){var L=I[A];L.__inHover&&(C||(C=this._hoverlayer=this.getLayer(lt)),T||(T=C.ctx,T.save()),(0,vt.Dm)(T,L,M,A===D-1))}T&&T.restore()}},V.prototype.getHoverLayer=function(){return this.getLayer(lt)},V.prototype.paintOne=function(I,D){(0,vt.RV)(I,D)},V.prototype._paintList=function(I,D,C,M){if(this._redrawId===M){C=C||!1,this._updateLayerStatus(I);var T=this._doPaintList(I,D,C),A=T.finished,L=T.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),L&&this._paintHoverList(I),A)this.eachLayer(function(z){z.afterBrush&&z.afterBrush()});else{var Z=this;(0,U.Z)(function(){Z._paintList(I,D,C,M)})}}},V.prototype._compositeManually=function(){var I=this.getLayer(g).ctx,D=this._domRoot.width,C=this._domRoot.height;I.clearRect(0,0,D,C),this.eachBuiltinLayer(function(M){M.virtual&&I.drawImage(M.dom,0,0,D,C)})},V.prototype._doPaintList=function(I,D,C){for(var M=this,T=[],A=this._opts.useDirtyRect,L=0;L<this._zlevelList.length;L++){var Z=this._zlevelList[L],z=this._layers[Z];z.__builtin__&&z!==this._hoverlayer&&(z.__dirty||C)&&T.push(z)}for(var ut=!0,ot=!1,ht=function(St){var st=T[St],xt=st.ctx,wt=A&&st.createRepaintRects(I,D,tt._width,tt._height),Dt=C?st.__startIndex:st.__drawIndex,It=!C&&st.incremental&&Date.now,Et=It&&Date.now(),zt=st.zlevel===tt._zlevelList[0]?tt._backgroundColor:null;if(st.__startIndex===st.__endIndex)st.clear(!1,zt,wt);else if(Dt===st.__startIndex){var Bt=I[Dt];(!Bt.incremental||!Bt.notClear||C)&&st.clear(!1,zt,wt)}Dt===-1&&(console.error("For some unknown reason. drawIndex is -1"),Dt=st.__startIndex);var Ht,$t=function(Be){var Ft={inHover:!1,allClipped:!1,prevEl:null,viewWidth:M._width,viewHeight:M._height};for(Ht=Dt;Ht<st.__endIndex;Ht++){var Tt=I[Ht];if(Tt.__inHover&&(ot=!0),M._doPaintEl(Tt,st,A,Be,Ft,Ht===st.__endIndex-1),It){var At=Date.now()-Et;if(At>15)break}}Ft.prevElClipPaths&&xt.restore()};if(wt)if(wt.length===0)Ht=st.__endIndex;else for(var ee=tt.dpr,De=0;De<wt.length;++De){var Se=wt[De];xt.save(),xt.beginPath(),xt.rect(Se.x*ee,Se.y*ee,Se.width*ee,Se.height*ee),xt.clip(),$t(Se),xt.restore()}else xt.save(),$t(),xt.restore();st.__drawIndex=Ht,st.__drawIndex<st.__endIndex&&(ut=!1)},tt=this,ft=0;ft<T.length;ft++)ht(ft);return W.Z.wxa&&ct.S6(this._layers,function(St){St&&St.ctx&&St.ctx.draw&&St.ctx.draw()}),{finished:ut,needsRefreshHover:ot}},V.prototype._doPaintEl=function(I,D,C,M,T,A){var L=D.ctx;if(C){var Z=I.getPaintRect();(!M||Z&&Z.intersect(M))&&((0,vt.Dm)(L,I,T,A),I.setPrevPaintRect(Z))}else(0,vt.Dm)(L,I,T,A)},V.prototype.getLayer=function(I,D){this._singleCanvas&&!this._needsManuallyCompositing&&(I=g);var C=this._layers[I];return C||(C=new G("zr_"+I,this,this.dpr),C.zlevel=I,C.__builtin__=!0,this._layerConfig[I]?ct.TS(C,this._layerConfig[I],!0):this._layerConfig[I-j]&&ct.TS(C,this._layerConfig[I-j],!0),D&&(C.virtual=D),this.insertLayer(I,C),C.initContext()),C},V.prototype.insertLayer=function(I,D){var C=this._layers,M=this._zlevelList,T=M.length,A=this._domRoot,L=null,Z=-1;if(!C[I]&&!!$(D)){if(T>0&&I>M[0]){for(Z=0;Z<T-1&&!(M[Z]<I&&M[Z+1]>I);Z++);L=C[M[Z]]}if(M.splice(Z+1,0,I),C[I]=D,!D.virtual)if(L){var z=L.dom;z.nextSibling?A.insertBefore(D.dom,z.nextSibling):A.appendChild(D.dom)}else A.firstChild?A.insertBefore(D.dom,A.firstChild):A.appendChild(D.dom);D.__painter=this}},V.prototype.eachLayer=function(I,D){for(var C=this._zlevelList,M=0;M<C.length;M++){var T=C[M];I.call(D,this._layers[T],T)}},V.prototype.eachBuiltinLayer=function(I,D){for(var C=this._zlevelList,M=0;M<C.length;M++){var T=C[M],A=this._layers[T];A.__builtin__&&I.call(D,A,T)}},V.prototype.eachOtherLayer=function(I,D){for(var C=this._zlevelList,M=0;M<C.length;M++){var T=C[M],A=this._layers[T];A.__builtin__||I.call(D,A,T)}},V.prototype.getLayers=function(){return this._layers},V.prototype._updateLayerStatus=function(I){this.eachBuiltinLayer(function(ot,ht){ot.__dirty=ot.__used=!1});function D(ot){T&&(T.__endIndex!==ot&&(T.__dirty=!0),T.__endIndex=ot)}if(this._singleCanvas)for(var C=1;C<I.length;C++){var M=I[C];if(M.zlevel!==I[C-1].zlevel||M.incremental){this._needsManuallyCompositing=!0;break}}var T=null,A=0,L,Z;for(Z=0;Z<I.length;Z++){var M=I[Z],z=M.zlevel,ut=void 0;L!==z&&(L=z,A=0),M.incremental?(ut=this.getLayer(z+rt,this._needsManuallyCompositing),ut.incremental=!0,A=1):ut=this.getLayer(z+(A>0?j:0),this._needsManuallyCompositing),ut.__builtin__||ct.H("ZLevel "+z+" has been used by unkown layer "+ut.id),ut!==T&&(ut.__used=!0,ut.__startIndex!==Z&&(ut.__dirty=!0),ut.__startIndex=Z,ut.incremental?ut.__drawIndex=-1:ut.__drawIndex=Z,D(Z),T=ut),M.__dirty&et.YV&&!M.__inHover&&(ut.__dirty=!0,ut.incremental&&ut.__drawIndex<0&&(ut.__drawIndex=Z))}D(Z),this.eachBuiltinLayer(function(ot,ht){!ot.__used&&ot.getElementCount()>0&&(ot.__dirty=!0,ot.__startIndex=ot.__endIndex=ot.__drawIndex=0),ot.__dirty&&ot.__drawIndex<0&&(ot.__drawIndex=ot.__startIndex)})},V.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},V.prototype._clearLayer=function(I){I.clear()},V.prototype.setBackgroundColor=function(I){this._backgroundColor=I,ct.S6(this._layers,function(D){D.setUnpainted()})},V.prototype.configLayer=function(I,D){if(D){var C=this._layerConfig;C[I]?ct.TS(C[I],D,!0):C[I]=D;for(var M=0;M<this._zlevelList.length;M++){var T=this._zlevelList[M];if(T===I||T===I+j){var A=this._layers[T];ct.TS(A,C[I],!0)}}}},V.prototype.delLayer=function(I){var D=this._layers,C=this._zlevelList,M=D[I];!M||(M.dom.parentNode.removeChild(M.dom),delete D[I],C.splice(ct.cq(C,I),1))},V.prototype.resize=function(I,D){if(this._domRoot.style){var C=this._domRoot;C.style.display="none";var M=this._opts,T=this.root;if(I!=null&&(M.width=I),D!=null&&(M.height=D),I=(0,gt.ap)(T,0,M),D=(0,gt.ap)(T,1,M),C.style.display="",this._width!==I||D!==this._height){C.style.width=I+"px",C.style.height=D+"px";for(var A in this._layers)this._layers.hasOwnProperty(A)&&this._layers[A].resize(I,D);this.refresh(!0)}this._width=I,this._height=D}else{if(I==null||D==null)return;this._width=I,this._height=D,this.getLayer(g).resize(I,D)}return this},V.prototype.clearLayer=function(I){var D=this._layers[I];D&&D.clear()},V.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},V.prototype.getRenderedCanvas=function(I){if(I=I||{},this._singleCanvas&&!this._compositeManually)return this._layers[g].dom;var D=new G("image",this,I.pixelRatio||this.dpr);D.initContext(),D.clear(!1,I.backgroundColor||this._backgroundColor);var C=D.ctx;if(I.pixelRatio<=this.dpr){this.refresh();var M=D.dom.width,T=D.dom.height;this.eachLayer(function(ot){ot.__builtin__?C.drawImage(ot.dom,0,0,M,T):ot.renderToCanvas&&(C.save(),ot.renderToCanvas(C),C.restore())})}else for(var A={inHover:!1,viewWidth:this._width,viewHeight:this._height},L=this.storage.getDisplayList(!0),Z=0,z=L.length;Z<z;Z++){var ut=L[Z];(0,vt.Dm)(C,ut,A,Z===z-1)}return D.dom},V.prototype.getWidth=function(){return this._width},V.prototype.getHeight=function(){return this._height},V}(),Q=X;function k(V){V.registerPainter("canvas",Q)}},70103:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(85669),K=F(78988),dt=F(60379),gt=F(65021),vt=ct.NM,it=function(et){(0,N.ZT)(H,et);function H(){var J=et!==null&&et.apply(this,arguments)||this;return J.type="interval",J._interval=0,J._intervalPrecision=2,J}return H.prototype.parse=function(J){return J},H.prototype.contain=function(J){return gt.XS(J,this._extent)},H.prototype.normalize=function(J){return gt.Fv(J,this._extent)},H.prototype.scale=function(J){return gt.bA(J,this._extent)},H.prototype.setExtent=function(J,at){var G=this._extent;isNaN(J)||(G[0]=parseFloat(J)),isNaN(at)||(G[1]=parseFloat(at))},H.prototype.unionExtent=function(J){var at=this._extent;J[0]<at[0]&&(at[0]=J[0]),J[1]>at[1]&&(at[1]=J[1]),this.setExtent(at[0],at[1])},H.prototype.getInterval=function(){return this._interval},H.prototype.setInterval=function(J){this._interval=J,this._niceExtent=this._extent.slice(),this._intervalPrecision=gt.lb(J)},H.prototype.getTicks=function(J){var at=this._interval,G=this._extent,U=this._niceExtent,W=this._intervalPrecision,lt=[];if(!at)return lt;var g=1e4;G[0]<U[0]&&(J?lt.push({value:vt(U[0]-at,W)}):lt.push({value:G[0]}));for(var j=U[0];j<=U[1]&&(lt.push({value:j}),j=vt(j+at,W),j!==lt[lt.length-1].value);)if(lt.length>g)return[];var rt=lt.length?lt[lt.length-1].value:U[1];return G[1]>rt&&(J?lt.push({value:vt(rt+at,W)}):lt.push({value:G[1]})),lt},H.prototype.getMinorTicks=function(J){for(var at=this.getTicks(!0),G=[],U=this.getExtent(),W=1;W<at.length;W++){for(var lt=at[W],g=at[W-1],j=0,rt=[],$=lt.value-g.value,O=$/J;j<J-1;){var X=vt(g.value+(j+1)*O);X>U[0]&&X<U[1]&&rt.push(X),j++}G.push(rt)}return G},H.prototype.getLabel=function(J,at){if(J==null)return"";var G=at&&at.precision;G==null?G=ct.p8(J.value)||0:G==="auto"&&(G=this._intervalPrecision);var U=vt(J.value,G,!0);return K.OD(U)},H.prototype.calcNiceTicks=function(J,at,G){J=J||5;var U=this._extent,W=U[1]-U[0];if(!!isFinite(W)){W<0&&(W=-W,U.reverse());var lt=gt.Qf(U,J,at,G);this._intervalPrecision=lt.intervalPrecision,this._interval=lt.interval,this._niceExtent=lt.niceTickExtent}},H.prototype.calcNiceExtent=function(J){var at=this._extent;if(at[0]===at[1])if(at[0]!==0){var G=at[0];J.fixMax||(at[1]+=G/2),at[0]-=G/2}else at[1]=1;var U=at[1]-at[0];isFinite(U)||(at[0]=0,at[1]=1),this.calcNiceTicks(J.splitNumber,J.minInterval,J.maxInterval);var W=this._interval;J.fixMin||(at[0]=vt(Math.floor(at[0]/W)*W)),J.fixMax||(at[1]=vt(Math.ceil(at[1]/W)*W))},H.prototype.setNiceExtent=function(J,at){this._niceExtent=[J,at]},H.type="interval",H}(dt.Z);dt.Z.registerClass(it),Jt.Z=it},85043:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(60379),K=F(51401),dt=F(65021),gt=F(33051),vt=function(it){(0,N.ZT)(et,it);function et(H){var J=it.call(this,H)||this;J.type="ordinal";var at=J.getSetting("ordinalMeta");return at||(at=new K.Z({})),(0,gt.kJ)(at)&&(at=new K.Z({categories:(0,gt.UI)(at,function(G){return(0,gt.Kn)(G)?G.value:G})})),J._ordinalMeta=at,J._extent=J.getSetting("extent")||[0,at.categories.length-1],J}return et.prototype.parse=function(H){return H==null?NaN:(0,gt.HD)(H)?this._ordinalMeta.getOrdinal(H):Math.round(H)},et.prototype.contain=function(H){return H=this.parse(H),dt.XS(H,this._extent)&&this._ordinalMeta.categories[H]!=null},et.prototype.normalize=function(H){return H=this._getTickNumber(this.parse(H)),dt.Fv(H,this._extent)},et.prototype.scale=function(H){return H=Math.round(dt.bA(H,this._extent)),this.getRawOrdinalNumber(H)},et.prototype.getTicks=function(){for(var H=[],J=this._extent,at=J[0];at<=J[1];)H.push({value:at}),at++;return H},et.prototype.getMinorTicks=function(H){},et.prototype.setSortInfo=function(H){if(H==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var J=H.ordinalNumbers,at=this._ordinalNumbersByTick=[],G=this._ticksByOrdinalNumber=[],U=0,W=this._ordinalMeta.categories.length,lt=Math.min(W,J.length);U<lt;++U){var g=J[U];at[U]=g,G[g]=U}for(var j=0;U<W;++U){for(;G[j]!=null;)j++;at.push(j),G[j]=U}},et.prototype._getTickNumber=function(H){var J=this._ticksByOrdinalNumber;return J&&H>=0&&H<J.length?J[H]:H},et.prototype.getRawOrdinalNumber=function(H){var J=this._ordinalNumbersByTick;return J&&H>=0&&H<J.length?J[H]:H},et.prototype.getLabel=function(H){if(!this.isBlank()){var J=this.getRawOrdinalNumber(H.value),at=this._ordinalMeta.categories[J];return at==null?"":at+""}},et.prototype.count=function(){return this._extent[1]-this._extent[0]+1},et.prototype.unionExtentFromData=function(H,J){this.unionExtent(H.getApproximateExtent(J))},et.prototype.isInExtentRange=function(H){return H=this._getTickNumber(H),this._extent[0]<=H&&this._extent[1]>=H},et.prototype.getOrdinalMeta=function(){return this._ordinalMeta},et.prototype.calcNiceTicks=function(){},et.prototype.calcNiceExtent=function(){},et.type="ordinal",et}(ct.Z);ct.Z.registerClass(vt),Jt.Z=vt},60379:function(Ce,Jt,F){"use strict";var N=F(34251),ct=function(){function K(dt){this._setting=dt||{},this._extent=[1/0,-1/0]}return K.prototype.getSetting=function(dt){return this._setting[dt]},K.prototype.unionExtent=function(dt){var gt=this._extent;dt[0]<gt[0]&&(gt[0]=dt[0]),dt[1]>gt[1]&&(gt[1]=dt[1])},K.prototype.unionExtentFromData=function(dt,gt){this.unionExtent(dt.getApproximateExtent(gt))},K.prototype.getExtent=function(){return this._extent.slice()},K.prototype.setExtent=function(dt,gt){var vt=this._extent;isNaN(dt)||(vt[0]=dt),isNaN(gt)||(vt[1]=gt)},K.prototype.isInExtentRange=function(dt){return this._extent[0]<=dt&&this._extent[1]>=dt},K.prototype.isBlank=function(){return this._isBlank},K.prototype.setBlank=function(dt){this._isBlank=dt},K}();N.au(ct),Jt.Z=ct},61618:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(85669),K=F(15015),dt=F(65021),gt=F(70103),vt=F(60379),it=F(33051),et=function($,O,X,Q){for(;X<Q;){var k=X+Q>>>1;$[k][1]<O?X=k+1:Q=k}return X},H=function($){(0,N.ZT)(O,$);function O(X){var Q=$.call(this,X)||this;return Q.type="time",Q}return O.prototype.getLabel=function(X){var Q=this.getSetting("useUTC");return(0,K.WU)(X.value,K.V8[(0,K.xC)((0,K.Tj)(this._minLevelUnit))]||K.V8.second,Q,this.getSetting("locale"))},O.prototype.getFormattedLabel=function(X,Q,k){var V=this.getSetting("useUTC"),I=this.getSetting("locale");return(0,K.k7)(X,Q,k,I,V)},O.prototype.getTicks=function(){var X=this._interval,Q=this._extent,k=[];if(!X)return k;k.push({value:Q[0],level:0});var V=this.getSetting("useUTC"),I=rt(this._minLevelUnit,this._approxInterval,V,Q);return k=k.concat(I),k.push({value:Q[1],level:0}),k},O.prototype.calcNiceExtent=function(X){var Q=this._extent;if(Q[0]===Q[1]&&(Q[0]-=K.s2,Q[1]+=K.s2),Q[1]===-1/0&&Q[0]===1/0){var k=new Date;Q[1]=+new Date(k.getFullYear(),k.getMonth(),k.getDate()),Q[0]=Q[1]-K.s2}this.calcNiceTicks(X.splitNumber,X.minInterval,X.maxInterval)},O.prototype.calcNiceTicks=function(X,Q,k){X=X||10;var V=this._extent,I=V[1]-V[0];this._approxInterval=I/X,Q!=null&&this._approxInterval<Q&&(this._approxInterval=Q),k!=null&&this._approxInterval>k&&(this._approxInterval=k);var D=J.length,C=Math.min(et(J,this._approxInterval,0,D),D-1);this._interval=J[C][1],this._minLevelUnit=J[Math.max(C-1,0)][0]},O.prototype.parse=function(X){return(0,it.hj)(X)?X:+ct.sG(X)},O.prototype.contain=function(X){return dt.XS(this.parse(X),this._extent)},O.prototype.normalize=function(X){return dt.Fv(this.parse(X),this._extent)},O.prototype.scale=function(X){return dt.bA(X,this._extent)},O.type="time",O}(gt.Z),J=[["second",K.WT],["minute",K.yR],["hour",K.dV],["quarter-day",K.dV*6],["half-day",K.dV*12],["day",K.s2*1.2],["half-week",K.s2*3.5],["week",K.s2*7],["month",K.s2*31],["quarter",K.s2*95],["half-year",K.P5/2],["year",K.P5]];function at($,O,X,Q){var k=ct.sG(O),V=ct.sG(X),I=function(z){return(0,K.q5)(k,z,Q)===(0,K.q5)(V,z,Q)},D=function(){return I("year")},C=function(){return D()&&I("month")},M=function(){return C()&&I("day")},T=function(){return M()&&I("hour")},A=function(){return T()&&I("minute")},L=function(){return A()&&I("second")},Z=function(){return L()&&I("millisecond")};switch($){case"year":return D();case"month":return C();case"day":return M();case"hour":return T();case"minute":return A();case"second":return L();case"millisecond":return Z()}}function G($,O){return $/=K.s2,$>16?16:$>7.5?7:$>3.5?4:$>1.5?2:1}function U($){var O=30*K.s2;return $/=O,$>6?6:$>3?3:$>2?2:1}function W($){return $/=K.dV,$>12?12:$>6?6:$>3.5?4:$>2?2:1}function lt($,O){return $/=O?K.yR:K.WT,$>30?30:$>20?20:$>15?15:$>10?10:$>5?5:$>2?2:1}function g($){return ct.kx($,!0)}function j($,O,X){var Q=new Date($);switch((0,K.Tj)(O)){case"year":case"month":Q[(0,K.vh)(X)](0);case"day":Q[(0,K.f5)(X)](1);case"hour":Q[(0,K.En)(X)](0);case"minute":Q[(0,K.eN)(X)](0);case"second":Q[(0,K.rM)(X)](0),Q[(0,K.cb)(X)](0)}return Q.getTime()}function rt($,O,X,Q){var k=1e4,V=K.FW,I=0;function D(Et,zt,Bt,Ht,$t,ee,De){for(var Se=new Date(zt),Be=zt,Ft=Se[Ht]();Be<Bt&&Be<=Q[1];)De.push({value:Be}),Ft+=Et,Se[$t](Ft),Be=Se.getTime();De.push({value:Be,notAdd:!0})}function C(Et,zt,Bt){var Ht=[],$t=!zt.length;if(!at((0,K.Tj)(Et),Q[0],Q[1],X)){$t&&(zt=[{value:j(new Date(Q[0]),Et,X)},{value:Q[1]}]);for(var ee=0;ee<zt.length-1;ee++){var De=zt[ee].value,Se=zt[ee+1].value;if(De!==Se){var Be=void 0,Ft=void 0,Tt=void 0,At=!1;switch(Et){case"year":Be=Math.max(1,Math.round(O/K.s2/365)),Ft=(0,K.sx)(X),Tt=(0,K.xL)(X);break;case"half-year":case"quarter":case"month":Be=U(O),Ft=(0,K.CW)(X),Tt=(0,K.vh)(X);break;case"week":case"half-week":case"day":Be=G(O,31),Ft=(0,K.xz)(X),Tt=(0,K.f5)(X),At=!0;break;case"half-day":case"quarter-day":case"hour":Be=W(O),Ft=(0,K.Wp)(X),Tt=(0,K.En)(X);break;case"minute":Be=lt(O,!0),Ft=(0,K.fn)(X),Tt=(0,K.eN)(X);break;case"second":Be=lt(O,!1),Ft=(0,K.MV)(X),Tt=(0,K.rM)(X);break;case"millisecond":Be=g(O),Ft=(0,K.RZ)(X),Tt=(0,K.cb)(X);break}D(Be,De,Se,Ft,Tt,At,Ht),Et==="year"&&Bt.length>1&&ee===0&&Bt.unshift({value:Bt[0].value-Be})}}for(var ee=0;ee<Ht.length;ee++)Bt.push(Ht[ee]);return Ht}}for(var M=[],T=[],A=0,L=0,Z=0;Z<V.length&&I++<k;++Z){var z=(0,K.Tj)(V[Z]);if(!!(0,K.$K)(V[Z])){C(V[Z],M[M.length-1]||[],T);var ut=V[Z+1]?(0,K.Tj)(V[Z+1]):null;if(z!==ut){if(T.length){L=A,T.sort(function(Et,zt){return Et.value-zt.value});for(var ot=[],ht=0;ht<T.length;++ht){var tt=T[ht].value;(ht===0||T[ht-1].value!==tt)&&(ot.push(T[ht]),tt>=Q[0]&&tt<=Q[1]&&A++)}var ft=(Q[1]-Q[0])/O;if(A>ft*1.5&&L>ft/1.5||(M.push(ot),A>ft||$===V[Z]))break}T=[]}}}for(var St=(0,it.hX)((0,it.UI)(M,function(Et){return(0,it.hX)(Et,function(zt){return zt.value>=Q[0]&&zt.value<=Q[1]&&!zt.notAdd})}),function(Et){return Et.length>0}),st=[],xt=St.length-1,Z=0;Z<St.length;++Z)for(var wt=St[Z],Dt=0;Dt<wt.length;++Dt)st.push({value:wt[Dt].value,level:xt-Z});st.sort(function(Et,zt){return Et.value-zt.value});for(var It=[],Z=0;Z<st.length;++Z)(Z===0||st[Z].value!==st[Z-1].value)&&It.push(st[Z]);return It}vt.Z.registerClass(H),Jt.Z=H},65021:function(Ce,Jt,F){"use strict";F.d(Jt,{Fv:function(){return J},Qf:function(){return dt},XS:function(){return H},bA:function(){return at},lM:function(){return K},lb:function(){return vt},r1:function(){return gt}});var N=F(85669);function ct(G){var U=Math.pow(10,quantityExponent(Math.abs(G))),W=Math.abs(G/U);return W===0||W===1||W===2||W===3||W===5}function K(G){return G.type==="interval"||G.type==="log"}function dt(G,U,W,lt){var g={},j=G[1]-G[0],rt=g.interval=(0,N.kx)(j/U,!0);W!=null&&rt<W&&(rt=g.interval=W),lt!=null&&rt>lt&&(rt=g.interval=lt);var $=g.intervalPrecision=vt(rt),O=g.niceTickExtent=[(0,N.NM)(Math.ceil(G[0]/rt)*rt,$),(0,N.NM)(Math.floor(G[1]/rt)*rt,$)];return et(O,G),g}function gt(G){var U=Math.pow(10,(0,N.xW)(G)),W=G/U;return W?W===2?W=3:W===3?W=5:W*=2:W=1,(0,N.NM)(W*U)}function vt(G){return(0,N.p8)(G)+2}function it(G,U,W){G[U]=Math.max(Math.min(G[U],W[1]),W[0])}function et(G,U){!isFinite(G[0])&&(G[0]=U[0]),!isFinite(G[1])&&(G[1]=U[1]),it(G,0,U),it(G,1,U),G[0]>G[1]&&(G[0]=G[1])}function H(G,U){return G>=U[0]&&G<=U[1]}function J(G,U){return U[1]===U[0]?.5:(G-U[0])/(U[1]-U[0])}function at(G,U){return G*(U[1]-U[0])+U[0]}},34251:function(Ce,Jt,F){"use strict";F.d(Jt,{PT:function(){return et},Qj:function(){return U},au:function(){return g},dm:function(){return H},pw:function(){return at},u9:function(){return vt}});var N=F(70655),ct=F(33051),K=".",dt="___EC__COMPONENT__CONTAINER___",gt="___EC__EXTENDED_CLASS___";function vt(j){var rt={main:"",sub:""};if(j){var $=j.split(K);rt.main=$[0]||"",rt.sub=$[1]||""}return rt}function it(j){ct.hu(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(j),'componentType "'+j+'" illegal')}function et(j){return!!(j&&j[gt])}function H(j,rt){j.$constructor=j,j.extend=function($){var O=this,X;return J(O)?X=function(Q){(0,N.ZT)(k,Q);function k(){return Q.apply(this,arguments)||this}return k}(O):(X=function(){($.$constructor||O).apply(this,arguments)},ct.XW(X,this)),ct.l7(X.prototype,$),X[gt]=!0,X.extend=this.extend,X.superCall=W,X.superApply=lt,X.superClass=O,X}}function J(j){return ct.mf(j)&&/^class\s/.test(Function.prototype.toString.call(j))}function at(j,rt){j.extend=rt.extend}var G=Math.round(Math.random()*10);function U(j){var rt=["__\0is_clz",G++].join("_");j.prototype[rt]=!0,j.isInstance=function($){return!!($&&$[rt])}}function W(j,rt){for(var $=[],O=2;O<arguments.length;O++)$[O-2]=arguments[O];return this.superClass.prototype[rt].apply(j,$)}function lt(j,rt,$){return this.superClass.prototype[rt].apply(j,$)}function g(j){var rt={};j.registerClass=function(O){var X=O.type||O.prototype.type;if(X){it(X),O.prototype.type=X;var Q=vt(X);if(!Q.sub)rt[Q.main]=O;else if(Q.sub!==dt){var k=$(Q);k[Q.sub]=O}}return O},j.getClass=function(O,X,Q){var k=rt[O];if(k&&k[dt]&&(k=X?k[X]:null),Q&&!k)throw new Error(X?"Component "+O+"."+(X||"")+" is used but not imported.":O+".type should be specified.");return k},j.getClassesByMainType=function(O){var X=vt(O),Q=[],k=rt[X.main];return k&&k[dt]?ct.S6(k,function(V,I){I!==dt&&Q.push(V)}):Q.push(k),Q},j.hasClass=function(O){var X=vt(O);return!!rt[X.main]},j.getAllClassMainTypes=function(){var O=[];return ct.S6(rt,function(X,Q){O.push(Q)}),O},j.hasSubTypes=function(O){var X=vt(O),Q=rt[X.main];return Q&&Q[dt]};function $(O){var X=rt[O.main];return(!X||!X[dt])&&(X=rt[O.main]={},X[dt]=!0),X}}},42151:function(Ce,Jt,F){"use strict";F.d(Jt,{Kr:function(){return dt},ZL:function(){return it},cj:function(){return gt},jS:function(){return vt}});var N=F(33051),ct=F(34251),K=Math.round(Math.random()*10);function dt(et){return[et||"",K++].join("_")}function gt(et){var H={};et.registerSubTypeDefaulter=function(J,at){var G=(0,ct.u9)(J);H[G.main]=at},et.determineSubType=function(J,at){var G=at.type;if(!G){var U=(0,ct.u9)(J).main;et.hasSubTypes(J)&&H[U]&&(G=H[U](at))}return G}}function vt(et,H){et.topologicalTravel=function(U,W,lt,g){if(!U.length)return;var j=J(W),rt=j.graph,$=j.noEntryList,O={};for(N.S6(U,function(D){O[D]=!0});$.length;){var X=$.pop(),Q=rt[X],k=!!O[X];k&&(lt.call(g,X,Q.originalDeps.slice()),delete O[X]),N.S6(Q.successor,k?I:V)}N.S6(O,function(){var D="";throw new Error(D)});function V(D){rt[D].entryCount--,rt[D].entryCount===0&&$.push(D)}function I(D){O[D]=!0,V(D)}};function J(U){var W={},lt=[];return N.S6(U,function(g){var j=at(W,g),rt=j.originalDeps=H(g),$=G(rt,U);j.entryCount=$.length,j.entryCount===0&&lt.push(g),N.S6($,function(O){N.cq(j.predecessor,O)<0&&j.predecessor.push(O);var X=at(W,O);N.cq(X.successor,O)<0&&X.successor.push(g)})}),{graph:W,noEntryList:lt}}function at(U,W){return U[W]||(U[W]={predecessor:[],successor:[]}),U[W]}function G(U,W){var lt=[];return N.S6(U,function(g){N.cq(W,g)>=0&&lt.push(g)}),lt}}function it(et,H){return N.TS(N.TS({},et,!0),H,!0)}},48625:function(Ce,Jt,F){"use strict";F.d(Jt,{I:function(){return W}});var N=Math.round(Math.random()*9),ct=typeof Object.defineProperty=="function",K=function(){function O(){this._id="__ec_inner_"+N++}return O.prototype.get=function(X){return this._guard(X)[this._id]},O.prototype.set=function(X,Q){var k=this._guard(X);return ct?Object.defineProperty(k,this._id,{value:Q,enumerable:!1,configurable:!0}):k[this._id]=Q,this},O.prototype.delete=function(X){return this.has(X)?(delete this._guard(X)[this._id],!0):!1},O.prototype.has=function(X){return!!this._guard(X)[this._id]},O.prototype._guard=function(X){if(X!==Object(X))throw TypeError("Value of WeakMap is not a non-null object.");return X},O}(),dt=K,gt=F(92528),vt=F(33051),it=F(85669),et=F(41525),H=F(97772),J=F(23132),at=new dt,G=new gt.ZP(100),U=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function W(O,X){if(O==="none")return null;var Q=X.getDevicePixelRatio(),k=X.getZr(),V=k.painter.type==="svg";O.dirty&&at.delete(O);var I=at.get(O);if(I)return I;var D=(0,vt.ce)(O,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});D.backgroundColor==="none"&&(D.backgroundColor=null);var C={repeat:"repeat"};return M(C),C.rotation=D.rotation,C.scaleX=C.scaleY=V?1:1/Q,at.set(O,C),O.dirty=!1,C;function M(T){for(var A=[Q],L=!0,Z=0;Z<U.length;++Z){var z=D[U[Z]];if(z!=null&&!(0,vt.kJ)(z)&&!(0,vt.HD)(z)&&!(0,vt.hj)(z)&&typeof z!="boolean"){L=!1;break}A.push(z)}var ut;if(L){ut=A.join(",")+(V?"-svg":"");var ot=G.get(ut);ot&&(V?T.svgElement=ot:T.image=ot)}var ht=g(D.dashArrayX),tt=j(D.dashArrayY),ft=lt(D.symbol),St=rt(ht),st=$(tt),xt=!V&&J.qW.createCanvas(),wt=V&&{tag:"g",attrs:{},key:"dcl",children:[]},Dt=Et(),It;xt&&(xt.width=Dt.width*Q,xt.height=Dt.height*Q,It=xt.getContext("2d")),zt(),L&&G.put(ut,xt||wt),T.image=xt,T.svgElement=wt,T.svgWidth=Dt.width,T.svgHeight=Dt.height;function Et(){for(var Bt=1,Ht=0,$t=St.length;Ht<$t;++Ht)Bt=(0,it.nl)(Bt,St[Ht]);for(var ee=1,Ht=0,$t=ft.length;Ht<$t;++Ht)ee=(0,it.nl)(ee,ft[Ht].length);Bt*=ee;var De=st*St.length*ft.length;if(!1)var Se;return{width:Math.max(1,Math.min(Bt,D.maxTileWidth)),height:Math.max(1,Math.min(De,D.maxTileHeight))}}function zt(){It&&(It.clearRect(0,0,xt.width,xt.height),D.backgroundColor&&(It.fillStyle=D.backgroundColor,It.fillRect(0,0,xt.width,xt.height)));for(var Bt=0,Ht=0;Ht<tt.length;++Ht)Bt+=tt[Ht];if(Bt<=0)return;for(var $t=-st,ee=0,De=0,Se=0;$t<Dt.height;){if(ee%2===0){for(var Be=De/2%ft.length,Ft=0,Tt=0,At=0;Ft<Dt.width*2;){for(var Kt=0,Ht=0;Ht<ht[Se].length;++Ht)Kt+=ht[Se][Ht];if(Kt<=0)break;if(Tt%2===0){var pe=(1-D.symbolSize)*.5,Oe=Ft+ht[Se][Tt]*pe,Pe=$t+tt[ee]*pe,vr=ht[Se][Tt]*D.symbolSize,Lr=tt[ee]*D.symbolSize,nr=At/2%ft[Be].length;qe(Oe,Pe,vr,Lr,ft[Be][nr])}Ft+=ht[Se][Tt],++At,++Tt,Tt===ht[Se].length&&(Tt=0)}++Se,Se===ht.length&&(Se=0)}$t+=tt[ee],++De,++ee,ee===tt.length&&(ee=0)}function qe(lr,Yt,le,we,_e){var Ut=V?1:Q,Qt=(0,et.th)(_e,lr*Ut,Yt*Ut,le*Ut,we*Ut,D.color,D.symbolKeepAspect);if(V){var ie=k.painter.renderOneToVNode(Qt);ie&&wt.children.push(ie)}else(0,H.RV)(It,Qt)}}}}function lt(O){if(!O||O.length===0)return[["rect"]];if((0,vt.HD)(O))return[[O]];for(var X=!0,Q=0;Q<O.length;++Q)if(!(0,vt.HD)(O[Q])){X=!1;break}if(X)return lt([O]);for(var k=[],Q=0;Q<O.length;++Q)(0,vt.HD)(O[Q])?k.push([O[Q]]):k.push(O[Q]);return k}function g(O){if(!O||O.length===0)return[[0,0]];if((0,vt.hj)(O)){var X=Math.ceil(O);return[[X,X]]}for(var Q=!0,k=0;k<O.length;++k)if(!(0,vt.hj)(O[k])){Q=!1;break}if(Q)return g([O]);for(var V=[],k=0;k<O.length;++k)if((0,vt.hj)(O[k])){var X=Math.ceil(O[k]);V.push([X,X])}else{var X=(0,vt.UI)(O[k],function(C){return Math.ceil(C)});X.length%2===1?V.push(X.concat(X)):V.push(X)}return V}function j(O){if(!O||typeof O=="object"&&O.length===0)return[0,0];if((0,vt.hj)(O)){var X=Math.ceil(O);return[X,X]}var Q=(0,vt.UI)(O,function(k){return Math.ceil(k)});return O.length%2?Q.concat(Q):Q}function rt(O){return(0,vt.UI)(O,function(X){return $(X)})}function $(O){for(var X=0,Q=0;Q<O.length;++Q)X+=O[Q];return O.length%2===1?X*2:X}},18310:function(Ce,Jt,F){"use strict";F.d(Jt,{o:function(){return N}});function N(ct,K,dt){for(var gt;ct&&!(K(ct)&&(gt=ct,dt));)ct=ct.__hostTarget||ct.parent;return gt}},78988:function(Ce,Jt,F){"use strict";F.d(Jt,{A0:function(){return lt},F1:function(){return H},Lz:function(){return rt},MI:function(){return $},MY:function(){return vt},OD:function(){return dt},ew:function(){return j},kF:function(){return U},mr:function(){return g},uX:function(){return J},wx:function(){return W},zW:function(){return gt}});var N=F(33051),ct=F(85669),K=F(15015);function dt(O){if(!(0,ct.kE)(O))return N.HD(O)?O:"-";var X=(O+"").split(".");return X[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(X.length>1?"."+X[1]:"")}function gt(O,X){return O=(O||"").toLowerCase().replace(/-(.)/g,function(Q,k){return k.toUpperCase()}),X&&O&&(O=O.charAt(0).toUpperCase()+O.slice(1)),O}var vt=N.MY,it=/([&<>"'])/g,et={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function H(O){return O==null?"":(O+"").replace(it,function(X,Q){return et[Q]})}function J(O,X,Q){var k="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function V(A){return A&&N.fy(A)?A:"-"}function I(A){return!!(A!=null&&!isNaN(A)&&isFinite(A))}var D=X==="time",C=O instanceof Date;if(D||C){var M=D?(0,ct.sG)(O):O;if(isNaN(+M)){if(C)return"-"}else return(0,K.WU)(M,k,Q)}if(X==="ordinal")return N.cd(O)?V(O):N.hj(O)&&I(O)?O+"":"-";var T=(0,ct.FK)(O);return I(T)?dt(T):N.cd(O)?V(O):typeof O=="boolean"?O+"":"-"}var at=["a","b","c","d","e","f","g"],G=function(O,X){return"{"+O+(X??"")+"}"};function U(O,X,Q){N.kJ(X)||(X=[X]);var k=X.length;if(!k)return"";for(var V=X[0].$vars||[],I=0;I<V.length;I++){var D=at[I];O=O.replace(G(D),G(D,0))}for(var C=0;C<k;C++)for(var M=0;M<V.length;M++){var T=X[C][V[M]];O=O.replace(G(at[M],C),Q?H(T):T)}return O}function W(O,X,Q){return N.S6(X,function(k,V){O=O.replace("{"+V+"}",Q?H(k):k)}),O}function lt(O,X){var Q=N.HD(O)?{color:O,extraCssText:X}:O||{},k=Q.color,V=Q.type;X=Q.extraCssText;var I=Q.renderMode||"html";if(!k)return"";if(I==="html")return V==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+H(k)+";"+(X||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+H(k)+";"+(X||"")+'"></span>';var D=Q.markerId||"markerX";return{renderMode:I,content:"{"+D+"|}  ",style:V==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:k}:{width:10,height:10,borderRadius:5,backgroundColor:k}}}function g(O,X,Q){(O==="week"||O==="month"||O==="quarter"||O==="half-year"||O==="year")&&(O=`MM-dd
yyyy`);var k=(0,ct.sG)(X),V=Q?"getUTC":"get",I=k[V+"FullYear"](),D=k[V+"Month"]()+1,C=k[V+"Date"](),M=k[V+"Hours"](),T=k[V+"Minutes"](),A=k[V+"Seconds"](),L=k[V+"Milliseconds"]();return O=O.replace("MM",(0,K.vk)(D,2)).replace("M",D).replace("yyyy",I).replace("yy",(0,K.vk)(I%100+"",2)).replace("dd",(0,K.vk)(C,2)).replace("d",C).replace("hh",(0,K.vk)(M,2)).replace("h",M).replace("mm",(0,K.vk)(T,2)).replace("m",T).replace("ss",(0,K.vk)(A,2)).replace("s",A).replace("SSS",(0,K.vk)(L,3)),O}function j(O){return O&&O.charAt(0).toUpperCase()+O.substr(1)}function rt(O,X){return X=X||"transparent",N.HD(O)?O:N.Kn(O)&&O.colorStops&&(O.colorStops[0]||{}).color||X}function $(O,X){if(X==="_blank"||X==="blank"){var Q=window.open();Q.opener=null,Q.location.href=O}else window.open(O,X)}},53842:function(Ce,Jt,F){"use strict";F.r(Jt),F.d(Jt,{Arc:function(){return rt.Z},BezierCurve:function(){return j.Z},BoundingRect:function(){return Q.Z},Circle:function(){return H.Z},CompoundPath:function(){return $.Z},Ellipse:function(){return J.Z},Group:function(){return it.Z},Image:function(){return vt.ZP},IncrementalDisplayable:function(){return T},Line:function(){return g.Z},LinearGradient:function(){return O.Z},OrientedBoundingRect:function(){return k.Z},Path:function(){return dt.ZP},Point:function(){return V.Z},Polygon:function(){return U.Z},Polyline:function(){return W.Z},RadialGradient:function(){return X.Z},Rect:function(){return lt.Z},Ring:function(){return G.Z},Sector:function(){return at.C},Text:function(){return et.ZP},applyTransform:function(){return De},clipPointsByRect:function(){return At},clipRectByRect:function(){return Kt},createIcon:function(){return pe},extendPath:function(){return St},extendShape:function(){return tt},getShapeClass:function(){return xt},getTransform:function(){return ee},groupTransition:function(){return Tt},initProps:function(){return z.KZ},isElementRemoved:function(){return z.eq},lineLineIntersect:function(){return Pe},linePolygonIntersect:function(){return Oe},makeImage:function(){return Dt},makePath:function(){return wt},mergePath:function(){return Et},registerShape:function(){return st},removeElement:function(){return z.bX},removeElementWithFadeOut:function(){return z.XD},resizePath:function(){return zt},setTooltipConfig:function(){return nr},subPixelOptimize:function(){return $t},subPixelOptimizeLine:function(){return Bt},subPixelOptimizeRect:function(){return Ht},transformDirection:function(){return Se},traverseElements:function(){return lr},updateProps:function(){return z.D}});var N=F(7494),ct=F(32892),K=F(45280),dt=F(327),gt=F(87411),vt=F(44535),it=F(38154),et=F(96498),H=F(69538),J=F(92797),at=F(27214),G=F(85795),U=F(95094),W=F(62514),lt=F(35151),g=F(22095),j=F(54174),rt=F(14826),$=F(52776),O=F(74438),X=F(36369),Q=F(60479),k=F(41587),V=F(41610),I=F(70655),D=F(7719),C=[],M=function(Yt){(0,I.ZT)(le,Yt);function le(){var we=Yt!==null&&Yt.apply(this,arguments)||this;return we.notClear=!0,we.incremental=!0,we._displayables=[],we._temporaryDisplayables=[],we._cursor=0,we}return le.prototype.traverse=function(we,_e){we.call(_e,this)},le.prototype.useStyle=function(){this.style={}},le.prototype.getCursor=function(){return this._cursor},le.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},le.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},le.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},le.prototype.addDisplayable=function(we,_e){_e?this._temporaryDisplayables.push(we):this._displayables.push(we),this.markRedraw()},le.prototype.addDisplayables=function(we,_e){_e=_e||!1;for(var Ut=0;Ut<we.length;Ut++)this.addDisplayable(we[Ut],_e)},le.prototype.getDisplayables=function(){return this._displayables},le.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},le.prototype.eachPendingDisplayable=function(we){for(var _e=this._cursor;_e<this._displayables.length;_e++)we&&we(this._displayables[_e]);for(var _e=0;_e<this._temporaryDisplayables.length;_e++)we&&we(this._temporaryDisplayables[_e])},le.prototype.update=function(){this.updateTransform();for(var we=this._cursor;we<this._displayables.length;we++){var _e=this._displayables[we];_e.parent=this,_e.update(),_e.parent=null}for(var we=0;we<this._temporaryDisplayables.length;we++){var _e=this._temporaryDisplayables[we];_e.parent=this,_e.update(),_e.parent=null}},le.prototype.getBoundingRect=function(){if(!this._rect){for(var we=new Q.Z(1/0,1/0,-1/0,-1/0),_e=0;_e<this._displayables.length;_e++){var Ut=this._displayables[_e],Qt=Ut.getBoundingRect().clone();Ut.needLocalTransform()&&Qt.applyTransform(Ut.getLocalTransform(C)),we.union(Qt)}this._rect=we}return this._rect},le.prototype.contain=function(we,_e){var Ut=this.transformCoordToLocal(we,_e),Qt=this.getBoundingRect();if(Qt.contain(Ut[0],Ut[1]))for(var ie=0;ie<this._displayables.length;ie++){var Ae=this._displayables[ie];if(Ae.contain(we,_e))return!0}return!1},le}(D.ZP),T=M,A=F(24111),L=F(33051),Z=F(30106),z=F(29266),ut=Math.max,ot=Math.min,ht={};function tt(Yt){return dt.ZP.extend(Yt)}var ft=N.Pc;function St(Yt,le){return ft(Yt,le)}function st(Yt,le){ht[Yt]=le}function xt(Yt){if(ht.hasOwnProperty(Yt))return ht[Yt]}function wt(Yt,le,we,_e){var Ut=N.iR(Yt,le);return we&&(_e==="center"&&(we=It(we,Ut.getBoundingRect())),zt(Ut,we)),Ut}function Dt(Yt,le,we){var _e=new vt.ZP({style:{image:Yt,x:le.x,y:le.y,width:le.width,height:le.height},onload:function(Ut){if(we==="center"){var Qt={width:Ut.width,height:Ut.height};_e.setStyle(It(le,Qt))}}});return _e}function It(Yt,le){var we=le.width/le.height,_e=Yt.height*we,Ut;_e<=Yt.width?Ut=Yt.height:(_e=Yt.width,Ut=_e/we);var Qt=Yt.x+Yt.width/2,ie=Yt.y+Yt.height/2;return{x:Qt-_e/2,y:ie-Ut/2,width:_e,height:Ut}}var Et=N.AA;function zt(Yt,le){if(!!Yt.applyTransform){var we=Yt.getBoundingRect(),_e=we.calculateTransform(le);Yt.applyTransform(_e)}}function Bt(Yt){return A._3(Yt.shape,Yt.shape,Yt.style),Yt}function Ht(Yt){return A.Pw(Yt.shape,Yt.shape,Yt.style),Yt}var $t=A.vu;function ee(Yt,le){for(var we=ct.yR([]);Yt&&Yt!==le;)ct.dC(we,Yt.getLocalTransform(),we),Yt=Yt.parent;return we}function De(Yt,le,we){return le&&!(0,L.zG)(le)&&(le=gt.ZP.getLocalTransform(le)),we&&(le=ct.U_([],le)),K.Ne([],Yt,le)}function Se(Yt,le,we){var _e=le[4]===0||le[5]===0||le[0]===0?1:Math.abs(2*le[4]/le[0]),Ut=le[4]===0||le[5]===0||le[2]===0?1:Math.abs(2*le[4]/le[2]),Qt=[Yt==="left"?-_e:Yt==="right"?_e:0,Yt==="top"?-Ut:Yt==="bottom"?Ut:0];return Qt=De(Qt,le,we),Math.abs(Qt[0])>Math.abs(Qt[1])?Qt[0]>0?"right":"left":Qt[1]>0?"bottom":"top"}function Be(Yt){return!Yt.isGroup}function Ft(Yt){return Yt.shape!=null}function Tt(Yt,le,we){if(!Yt||!le)return;function _e(ie){var Ae={};return ie.traverse(function(He){Be(He)&&He.anid&&(Ae[He.anid]=He)}),Ae}function Ut(ie){var Ae={x:ie.x,y:ie.y,rotation:ie.rotation};return Ft(ie)&&(Ae.shape=(0,L.l7)({},ie.shape)),Ae}var Qt=_e(Yt);le.traverse(function(ie){if(Be(ie)&&ie.anid){var Ae=Qt[ie.anid];if(Ae){var He=Ut(ie);ie.attr(Ut(Ae)),(0,z.D)(ie,He,we,(0,Z.A)(ie).dataIndex)}}})}function At(Yt,le){return(0,L.UI)(Yt,function(we){var _e=we[0];_e=ut(_e,le.x),_e=ot(_e,le.x+le.width);var Ut=we[1];return Ut=ut(Ut,le.y),Ut=ot(Ut,le.y+le.height),[_e,Ut]})}function Kt(Yt,le){var we=ut(Yt.x,le.x),_e=ot(Yt.x+Yt.width,le.x+le.width),Ut=ut(Yt.y,le.y),Qt=ot(Yt.y+Yt.height,le.y+le.height);if(_e>=we&&Qt>=Ut)return{x:we,y:Ut,width:_e-we,height:Qt-Ut}}function pe(Yt,le,we){var _e=(0,L.l7)({rectHover:!0},le),Ut=_e.style={strokeNoScale:!0};if(we=we||{x:-1,y:-1,width:2,height:2},Yt)return Yt.indexOf("image://")===0?(Ut.image=Yt.slice(8),(0,L.ce)(Ut,we),new vt.ZP(_e)):wt(Yt.replace("path://",""),_e,we,"center")}function Oe(Yt,le,we,_e,Ut){for(var Qt=0,ie=Ut[Ut.length-1];Qt<Ut.length;Qt++){var Ae=Ut[Qt];if(Pe(Yt,le,we,_e,Ae[0],Ae[1],ie[0],ie[1]))return!0;ie=Ae}}function Pe(Yt,le,we,_e,Ut,Qt,ie,Ae){var He=we-Yt,tr=_e-le,ce=ie-Ut,Re=Ae-Qt,Le=vr(ce,Re,He,tr);if(Lr(Le))return!1;var Ke=Yt-Ut,Tr=le-Qt,Nr=vr(Ke,Tr,He,tr)/Le;if(Nr<0||Nr>1)return!1;var Br=vr(Ke,Tr,ce,Re)/Le;return!(Br<0||Br>1)}function vr(Yt,le,we,_e){return Yt*_e-we*le}function Lr(Yt){return Yt<=1e-6&&Yt>=-1e-6}function nr(Yt){var le=Yt.itemTooltipOption,we=Yt.componentModel,_e=Yt.itemName,Ut=(0,L.HD)(le)?{formatter:le}:le,Qt=we.mainType,ie=we.componentIndex,Ae={componentType:Qt,name:_e,$vars:["name"]};Ae[Qt+"Index"]=ie;var He=Yt.formatterParamsExtra;He&&(0,L.S6)((0,L.XP)(He),function(ce){(0,L.RI)(Ae,ce)||(Ae[ce]=He[ce],Ae.$vars.push(ce))});var tr=(0,Z.A)(Yt.el);tr.componentMainType=Qt,tr.componentIndex=ie,tr.tooltipConfig={name:_e,option:(0,L.ce)({content:_e,formatterParams:Ae},Ut)}}function qe(Yt,le){var we;Yt.isGroup&&(we=le(Yt)),we||Yt.traverse(le)}function lr(Yt,le){if(Yt)if((0,L.kJ)(Yt))for(var we=0;we<Yt.length;we++)qe(Yt[we],le);else qe(Yt,le)}st("circle",H.Z),st("ellipse",J.Z),st("sector",at.C),st("ring",G.Z),st("polygon",U.Z),st("polyline",W.Z),st("rect",lt.Z),st("line",g.Z),st("bezierCurve",j.Z),st("arc",rt.Z)},30106:function(Ce,Jt,F){"use strict";F.d(Jt,{A:function(){return ct},Q:function(){return K}});var N=F(32234),ct=(0,N.Yf)(),K=function(dt,gt,vt,it){if(it){var et=ct(it);et.dataIndex=vt,et.dataType=gt,et.seriesIndex=dt,it.type==="group"&&it.traverse(function(H){var J=ct(H);J.seriesIndex=dt,J.dataIndex=vt,J.dataType=gt})}}},76172:function(Ce,Jt,F){"use strict";F.d(Jt,{BZ:function(){return H},ME:function(){return U},QM:function(){return lt},QT:function(){return $},YD:function(){return g},dt:function(){return j},gN:function(){return vt},lq:function(){return G},p$:function(){return W},tE:function(){return rt}});var N=F(33051),ct=F(60479),K=F(85669),dt=F(78988),gt=N.S6,vt=["left","right","top","bottom","width","height"],it=[["width","left","right"],["height","top","bottom"]];function et(O,X,Q,k,V){var I=0,D=0;k==null&&(k=1/0),V==null&&(V=1/0);var C=0;X.eachChild(function(M,T){var A=M.getBoundingRect(),L=X.childAt(T+1),Z=L&&L.getBoundingRect(),z,ut;if(O==="horizontal"){var ot=A.width+(Z?-Z.x+A.x:0);z=I+ot,z>k||M.newline?(I=0,z=ot,D+=C+Q,C=A.height):C=Math.max(C,A.height)}else{var ht=A.height+(Z?-Z.y+A.y:0);ut=D+ht,ut>V||M.newline?(I+=C+Q,D=0,ut=ht,C=A.width):C=Math.max(C,A.width)}M.newline||(M.x=I,M.y=D,M.markRedraw(),O==="horizontal"?I=z+Q:D=ut+Q)})}var H=et,J=N.WA(et,"vertical"),at=N.WA(et,"horizontal");function G(O,X,Q){var k=X.width,V=X.height,I=(0,K.GM)(O.left,k),D=(0,K.GM)(O.top,V),C=(0,K.GM)(O.right,k),M=(0,K.GM)(O.bottom,V);return(isNaN(I)||isNaN(parseFloat(O.left)))&&(I=0),(isNaN(C)||isNaN(parseFloat(O.right)))&&(C=k),(isNaN(D)||isNaN(parseFloat(O.top)))&&(D=0),(isNaN(M)||isNaN(parseFloat(O.bottom)))&&(M=V),Q=dt.MY(Q||0),{width:Math.max(C-I-Q[1]-Q[3],0),height:Math.max(M-D-Q[0]-Q[2],0)}}function U(O,X,Q){Q=dt.MY(Q||0);var k=X.width,V=X.height,I=(0,K.GM)(O.left,k),D=(0,K.GM)(O.top,V),C=(0,K.GM)(O.right,k),M=(0,K.GM)(O.bottom,V),T=(0,K.GM)(O.width,k),A=(0,K.GM)(O.height,V),L=Q[2]+Q[0],Z=Q[1]+Q[3],z=O.aspect;switch(isNaN(T)&&(T=k-C-Z-I),isNaN(A)&&(A=V-M-L-D),z!=null&&(isNaN(T)&&isNaN(A)&&(z>k/V?T=k*.8:A=V*.8),isNaN(T)&&(T=z*A),isNaN(A)&&(A=T/z)),isNaN(I)&&(I=k-C-T-Z),isNaN(D)&&(D=V-M-A-L),O.left||O.right){case"center":I=k/2-T/2-Q[3];break;case"right":I=k-T-Z;break}switch(O.top||O.bottom){case"middle":case"center":D=V/2-A/2-Q[0];break;case"bottom":D=V-A-L;break}I=I||0,D=D||0,isNaN(T)&&(T=k-Z-I-(C||0)),isNaN(A)&&(A=V-L-D-(M||0));var ut=new ct.Z(I+Q[3],D+Q[0],T,A);return ut.margin=Q,ut}function W(O,X,Q,k,V,I){var D=!V||!V.hv||V.hv[0],C=!V||!V.hv||V.hv[1],M=V&&V.boundingMode||"all";if(I=I||O,I.x=O.x,I.y=O.y,!D&&!C)return!1;var T;if(M==="raw")T=O.type==="group"?new ct.Z(0,0,+X.width||0,+X.height||0):O.getBoundingRect();else if(T=O.getBoundingRect(),O.needLocalTransform()){var A=O.getLocalTransform();T=T.clone(),T.applyTransform(A)}var L=U(N.ce({width:T.width,height:T.height},X),Q,k),Z=D?L.x-T.x:0,z=C?L.y-T.y:0;return M==="raw"?(I.x=Z,I.y=z):(I.x+=Z,I.y+=z),I===O&&O.markRedraw(),!0}function lt(O,X){return O[it[X][0]]!=null||O[it[X][1]]!=null&&O[it[X][2]]!=null}function g(O){var X=O.layoutMode||O.constructor.layoutMode;return N.Kn(X)?X:X?{type:X}:null}function j(O,X,Q){var k=Q&&Q.ignoreSize;!N.kJ(k)&&(k=[k,k]);var V=D(it[0],0),I=D(it[1],1);T(it[0],O,V),T(it[1],O,I);function D(A,L){var Z={},z=0,ut={},ot=0,ht=2;if(gt(A,function(St){ut[St]=O[St]}),gt(A,function(St){C(X,St)&&(Z[St]=ut[St]=X[St]),M(Z,St)&&z++,M(ut,St)&&ot++}),k[L])return M(X,A[1])?ut[A[2]]=null:M(X,A[2])&&(ut[A[1]]=null),ut;if(ot===ht||!z)return ut;if(z>=ht)return Z;for(var tt=0;tt<A.length;tt++){var ft=A[tt];if(!C(Z,ft)&&C(O,ft)){Z[ft]=O[ft];break}}return Z}function C(A,L){return A.hasOwnProperty(L)}function M(A,L){return A[L]!=null&&A[L]!=="auto"}function T(A,L,Z){gt(A,function(z){L[z]=Z[z]})}}function rt(O){return $({},O)}function $(O,X){return X&&O&&gt(vt,function(Q){X.hasOwnProperty(Q)&&(O[Q]=X[Q])}),O}},70175:function(Ce,Jt,F){"use strict";F.d(Jt,{Sh:function(){return et},ZK:function(){return vt},_y:function(){return at}});var N="[ECharts] ",ct={},K=typeof console<"u"&&console.warn&&console.log;function dt(G,U,W){if(K){if(W){if(ct[U])return;ct[U]=!0}console[G](N+U)}}function gt(G,U){dt("log",G,U)}function vt(G,U){dt("warn",G,U)}function it(G,U){dt("error",G,U)}function et(G){}function H(G,U,W){}function J(){for(var G=[],U=0;U<arguments.length;U++)G[U]=arguments[U];var W="";if(!1)var lt;return W}function at(G){throw new Error(G)}},32234:function(Ce,Jt,F){"use strict";F.d(Jt,{C4:function(){return J},C6:function(){return ot},Cc:function(){return et},Co:function(){return at},HZ:function(){return tt},IL:function(){return St},O0:function(){return C},P$:function(){return ft},Td:function(){return H},U5:function(){return X},U9:function(){return st},XI:function(){return T},Yf:function(){return L},ab:function(){return G},g0:function(){return D},gO:function(){return A},iP:function(){return ht},kF:function(){return it},lY:function(){return I},pk:function(){return wt},pm:function(){return z},pv:function(){return xt},yu:function(){return V},zH:function(){return ut}});var N=F(33051),ct=F(66387),K=F(85669);function dt(Dt,It,Et){return(It-Dt)*Et+Dt}var gt="series\0",vt="\0_ec_\0";function it(Dt){return Dt instanceof Array?Dt:Dt==null?[]:[Dt]}function et(Dt,It,Et){if(Dt){Dt[It]=Dt[It]||{},Dt.emphasis=Dt.emphasis||{},Dt.emphasis[It]=Dt.emphasis[It]||{};for(var zt=0,Bt=Et.length;zt<Bt;zt++){var Ht=Et[zt];!Dt.emphasis[It].hasOwnProperty(Ht)&&Dt[It].hasOwnProperty(Ht)&&(Dt.emphasis[It][Ht]=Dt[It][Ht])}}}var H=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function J(Dt){return(0,N.Kn)(Dt)&&!(0,N.kJ)(Dt)&&!(Dt instanceof Date)?Dt.value:Dt}function at(Dt){return(0,N.Kn)(Dt)&&!(Dt instanceof Array)}function G(Dt,It,Et){var zt=Et==="normalMerge",Bt=Et==="replaceMerge",Ht=Et==="replaceAll";Dt=Dt||[],It=(It||[]).slice();var $t=(0,N.kW)();(0,N.S6)(It,function(De,Se){if(!(0,N.Kn)(De)){It[Se]=null;return}});var ee=U(Dt,$t,Et);return(zt||Bt)&&W(ee,Dt,$t,It),zt&&lt(ee,It),zt||Bt?g(ee,It,Bt):Ht&&j(ee,It),rt(ee),ee}function U(Dt,It,Et){var zt=[];if(Et==="replaceAll")return zt;for(var Bt=0;Bt<Dt.length;Bt++){var Ht=Dt[Bt];Ht&&Ht.id!=null&&It.set(Ht.id,Bt),zt.push({existing:Et==="replaceMerge"||I(Ht)?null:Ht,newOption:null,keyInfo:null,brandNew:null})}return zt}function W(Dt,It,Et,zt){(0,N.S6)(zt,function(Bt,Ht){if(!(!Bt||Bt.id==null)){var $t=O(Bt.id),ee=Et.get($t);if(ee!=null){var De=Dt[ee];(0,N.hu)(!De.newOption,'Duplicated option on id "'+$t+'".'),De.newOption=Bt,De.existing=It[ee],zt[Ht]=null}}})}function lt(Dt,It){(0,N.S6)(It,function(Et,zt){if(!(!Et||Et.name==null))for(var Bt=0;Bt<Dt.length;Bt++){var Ht=Dt[Bt].existing;if(!Dt[Bt].newOption&&Ht&&(Ht.id==null||Et.id==null)&&!I(Et)&&!I(Ht)&&$("name",Ht,Et)){Dt[Bt].newOption=Et,It[zt]=null;return}}})}function g(Dt,It,Et){(0,N.S6)(It,function(zt){if(!!zt){for(var Bt,Ht=0;(Bt=Dt[Ht])&&(Bt.newOption||I(Bt.existing)||Bt.existing&&zt.id!=null&&!$("id",zt,Bt.existing));)Ht++;Bt?(Bt.newOption=zt,Bt.brandNew=Et):Dt.push({newOption:zt,brandNew:Et,existing:null,keyInfo:null}),Ht++}})}function j(Dt,It){(0,N.S6)(It,function(Et){Dt.push({newOption:Et,brandNew:!0,existing:null,keyInfo:null})})}function rt(Dt){var It=(0,N.kW)();(0,N.S6)(Dt,function(Et){var zt=Et.existing;zt&&It.set(zt.id,Et)}),(0,N.S6)(Dt,function(Et){var zt=Et.newOption;(0,N.hu)(!zt||zt.id==null||!It.get(zt.id)||It.get(zt.id)===Et,"id duplicates: "+(zt&&zt.id)),zt&&zt.id!=null&&It.set(zt.id,Et),!Et.keyInfo&&(Et.keyInfo={})}),(0,N.S6)(Dt,function(Et,zt){var Bt=Et.existing,Ht=Et.newOption,$t=Et.keyInfo;if(!!(0,N.Kn)(Ht)){if($t.name=Ht.name!=null?O(Ht.name):Bt?Bt.name:gt+zt,Bt)$t.id=O(Bt.id);else if(Ht.id!=null)$t.id=O(Ht.id);else{var ee=0;do $t.id="\0"+$t.name+"\0"+ee++;while(It.get($t.id))}It.set($t.id,Et)}})}function $(Dt,It,Et){var zt=X(It[Dt],null),Bt=X(Et[Dt],null);return zt!=null&&Bt!=null&&zt===Bt}function O(Dt){return X(Dt,"")}function X(Dt,It){return Dt==null?It:(0,N.HD)(Dt)?Dt:(0,N.hj)(Dt)||(0,N.cd)(Dt)?Dt+"":It}function Q(Dt){}function k(Dt){return isStringSafe(Dt)||isNumeric(Dt)}function V(Dt){var It=Dt.name;return!!(It&&It.indexOf(gt))}function I(Dt){return Dt&&Dt.id!=null&&O(Dt.id).indexOf(vt)===0}function D(Dt){return vt+Dt}function C(Dt,It,Et){(0,N.S6)(Dt,function(zt){var Bt=zt.newOption;(0,N.Kn)(Bt)&&(zt.keyInfo.mainType=It,zt.keyInfo.subType=M(It,Bt,zt.existing,Et))})}function M(Dt,It,Et,zt){var Bt=It.type?It.type:Et?Et.subType:zt.determineSubType(Dt,It);return Bt}function T(Dt,It){var Et={},zt={};return Bt(Dt||[],Et),Bt(It||[],zt,Et),[Ht(Et),Ht(zt)];function Bt($t,ee,De){for(var Se=0,Be=$t.length;Se<Be;Se++){var Ft=X($t[Se].seriesId,null);if(Ft==null)return;for(var Tt=it($t[Se].dataIndex),At=De&&De[Ft],Kt=0,pe=Tt.length;Kt<pe;Kt++){var Oe=Tt[Kt];At&&At[Oe]?At[Oe]=null:(ee[Ft]||(ee[Ft]={}))[Oe]=1}}}function Ht($t,ee){var De=[];for(var Se in $t)if($t.hasOwnProperty(Se)&&$t[Se]!=null)if(ee)De.push(+Se);else{var Be=Ht($t[Se],!0);Be.length&&De.push({seriesId:Se,dataIndex:Be})}return De}}function A(Dt,It){if(It.dataIndexInside!=null)return It.dataIndexInside;if(It.dataIndex!=null)return(0,N.kJ)(It.dataIndex)?(0,N.UI)(It.dataIndex,function(Et){return Dt.indexOfRawIndex(Et)}):Dt.indexOfRawIndex(It.dataIndex);if(It.name!=null)return(0,N.kJ)(It.name)?(0,N.UI)(It.name,function(Et){return Dt.indexOfName(Et)}):Dt.indexOfName(It.name)}function L(){var Dt="__ec_inner_"+Z++;return function(It){return It[Dt]||(It[Dt]={})}}var Z=(0,K.jj)();function z(Dt,It,Et){var zt=ut(It,Et),Bt=zt.mainTypeSpecified,Ht=zt.queryOptionMap,$t=zt.others,ee=$t,De=Et?Et.defaultMainType:null;return!Bt&&De&&Ht.set(De,{}),Ht.each(function(Se,Be){var Ft=tt(Dt,Be,Se,{useDefault:De===Be,enableAll:Et&&Et.enableAll!=null?Et.enableAll:!0,enableNone:Et&&Et.enableNone!=null?Et.enableNone:!0});ee[Be+"Models"]=Ft.models,ee[Be+"Model"]=Ft.models[0]}),ee}function ut(Dt,It){var Et;if((0,N.HD)(Dt)){var zt={};zt[Dt+"Index"]=0,Et=zt}else Et=Dt;var Bt=(0,N.kW)(),Ht={},$t=!1;return(0,N.S6)(Et,function(ee,De){if(De==="dataIndex"||De==="dataIndexInside"){Ht[De]=ee;return}var Se=De.match(/^(\w+)(Index|Id|Name)$/)||[],Be=Se[1],Ft=(Se[2]||"").toLowerCase();if(!(!Be||!Ft||It&&It.includeMainTypes&&(0,N.cq)(It.includeMainTypes,Be)<0)){$t=$t||!!Be;var Tt=Bt.get(Be)||Bt.set(Be,{});Tt[Ft]=ee}}),{mainTypeSpecified:$t,queryOptionMap:Bt,others:Ht}}var ot={useDefault:!0,enableAll:!1,enableNone:!1},ht={useDefault:!1,enableAll:!0,enableNone:!0};function tt(Dt,It,Et,zt){zt=zt||ot;var Bt=Et.index,Ht=Et.id,$t=Et.name,ee={models:null,specified:Bt!=null||Ht!=null||$t!=null};if(!ee.specified){var De=void 0;return ee.models=zt.useDefault&&(De=Dt.getComponent(It))?[De]:[],ee}return Bt==="none"||Bt===!1?((0,N.hu)(zt.enableNone,'`"none"` or `false` is not a valid value on index option.'),ee.models=[],ee):(Bt==="all"&&((0,N.hu)(zt.enableAll,'`"all"` is not a valid value on index option.'),Bt=Ht=$t=null),ee.models=Dt.queryComponents({mainType:It,index:Bt,id:Ht,name:$t}),ee)}function ft(Dt,It,Et){Dt.setAttribute?Dt.setAttribute(It,Et):Dt[It]=Et}function St(Dt,It){return Dt.getAttribute?Dt.getAttribute(It):Dt[It]}function st(Dt){return Dt==="auto"?ct.Z.domSupported?"html":"richText":Dt||"html"}function xt(Dt,It){var Et=(0,N.kW)(),zt=[];return(0,N.S6)(Dt,function(Bt){var Ht=It(Bt);(Et.get(Ht)||(zt.push(Ht),Et.set(Ht,[]))).push(Bt)}),{keys:zt,buckets:Et}}function wt(Dt,It,Et,zt,Bt){var Ht=It==null||It==="auto";if(zt==null)return zt;if((0,N.hj)(zt)){var $t=dt(Et||0,zt,Bt);return(0,K.NM)($t,Ht?Math.max((0,K.p8)(Et||0),(0,K.p8)(zt)):It)}else{if((0,N.HD)(zt))return Bt<1?Et:zt;for(var ee=[],De=Et,Se=zt,Be=Math.max(De?De.length:0,Se.length),Ft=0;Ft<Be;++Ft){var Tt=Dt.getDimensionInfo(Ft);if(Tt&&Tt.type==="ordinal")ee[Ft]=(Bt<1&&De?De:Se)[Ft];else{var At=De&&De[Ft]?De[Ft]:0,Kt=Se[Ft],$t=dt(At,Kt,Bt);ee[Ft]=(0,K.NM)($t,Ht?Math.max((0,K.p8)(At),(0,K.p8)(Kt)):It)}}return ee}}},85669:function(Ce,Jt,F){"use strict";F.d(Jt,{FK:function(){return V},GM:function(){return vt},M9:function(){return at},NM:function(){return it},NU:function(){return gt},S$:function(){return U},VR:function(){return Q},Xd:function(){return $},YM:function(){return W},ZB:function(){return J},dt:function(){return et},eJ:function(){return G},jj:function(){return D},kE:function(){return I},kx:function(){return X},mW:function(){return g},nR:function(){return k},nl:function(){return M},p8:function(){return H},sG:function(){return rt},wW:function(){return lt},xW:function(){return O}});var N=F(33051),ct=1e-4,K=20;function dt(T){return T.replace(/^\s+|\s+$/g,"")}function gt(T,A,L,Z){var z=A[0],ut=A[1],ot=L[0],ht=L[1],tt=ut-z,ft=ht-ot;if(tt===0)return ft===0?ot:(ot+ht)/2;if(Z)if(tt>0){if(T<=z)return ot;if(T>=ut)return ht}else{if(T>=z)return ot;if(T<=ut)return ht}else{if(T===z)return ot;if(T===ut)return ht}return(T-z)/tt*ft+ot}function vt(T,A){switch(T){case"center":case"middle":T="50%";break;case"left":case"top":T="0%";break;case"right":case"bottom":T="100%";break}return N.HD(T)?dt(T).match(/%$/)?parseFloat(T)/100*A:parseFloat(T):T==null?NaN:+T}function it(T,A,L){return A==null&&(A=10),A=Math.min(Math.max(0,A),K),T=(+T).toFixed(A),L?T:+T}function et(T){return T.sort(function(A,L){return A-L}),T}function H(T){if(T=+T,isNaN(T))return 0;if(T>1e-14){for(var A=1,L=0;L<15;L++,A*=10)if(Math.round(T*A)/A===T)return L}return J(T)}function J(T){var A=T.toString().toLowerCase(),L=A.indexOf("e"),Z=L>0?+A.slice(L+1):0,z=L>0?L:A.length,ut=A.indexOf("."),ot=ut<0?0:z-1-ut;return Math.max(0,ot-Z)}function at(T,A){var L=Math.log,Z=Math.LN10,z=Math.floor(L(T[1]-T[0])/Z),ut=Math.round(L(Math.abs(A[1]-A[0]))/Z),ot=Math.min(Math.max(-z+ut,0),20);return isFinite(ot)?ot:20}function G(T,A,L){if(!T[A])return 0;var Z=N.u4(T,function(Dt,It){return Dt+(isNaN(It)?0:It)},0);if(Z===0)return 0;for(var z=Math.pow(10,L),ut=N.UI(T,function(Dt){return(isNaN(Dt)?0:Dt)/Z*z*100}),ot=z*100,ht=N.UI(ut,function(Dt){return Math.floor(Dt)}),tt=N.u4(ht,function(Dt,It){return Dt+It},0),ft=N.UI(ut,function(Dt,It){return Dt-ht[It]});tt<ot;){for(var St=Number.NEGATIVE_INFINITY,st=null,xt=0,wt=ft.length;xt<wt;++xt)ft[xt]>St&&(St=ft[xt],st=xt);++ht[st],ft[st]=0,++tt}return ht[A]/z}function U(T,A){var L=Math.max(H(T),H(A)),Z=T+A;return L>K?Z:it(Z,L)}var W=9007199254740991;function lt(T){var A=Math.PI*2;return(T%A+A)%A}function g(T){return T>-ct&&T<ct}var j=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function rt(T){if(T instanceof Date)return T;if(N.HD(T)){var A=j.exec(T);if(!A)return new Date(NaN);if(A[8]){var L=+A[4]||0;return A[8].toUpperCase()!=="Z"&&(L-=+A[8].slice(0,3)),new Date(Date.UTC(+A[1],+(A[2]||1)-1,+A[3]||1,L,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0))}else return new Date(+A[1],+(A[2]||1)-1,+A[3]||1,+A[4]||0,+(A[5]||0),+A[6]||0,A[7]?+A[7].substring(0,3):0)}else if(T==null)return new Date(NaN);return new Date(Math.round(T))}function $(T){return Math.pow(10,O(T))}function O(T){if(T===0)return 0;var A=Math.floor(Math.log(T)/Math.LN10);return T/Math.pow(10,A)>=10&&A++,A}function X(T,A){var L=O(T),Z=Math.pow(10,L),z=T/Z,ut;return A?z<1.5?ut=1:z<2.5?ut=2:z<4?ut=3:z<7?ut=5:ut=10:z<1?ut=1:z<2?ut=2:z<3?ut=3:z<5?ut=5:ut=10,T=ut*Z,L>=-20?+T.toFixed(L<0?-L:0):T}function Q(T,A){var L=(T.length-1)*A+1,Z=Math.floor(L),z=+T[Z-1],ut=L-Z;return ut?z+ut*(T[Z]-z):z}function k(T){T.sort(function(tt,ft){return ht(tt,ft,0)?-1:1});for(var A=-1/0,L=1,Z=0;Z<T.length;){for(var z=T[Z].interval,ut=T[Z].close,ot=0;ot<2;ot++)z[ot]<=A&&(z[ot]=A,ut[ot]=ot?1:1-L),A=z[ot],L=ut[ot];z[0]===z[1]&&ut[0]*ut[1]!==1?T.splice(Z,1):Z++}return T;function ht(tt,ft,St){return tt.interval[St]<ft.interval[St]||tt.interval[St]===ft.interval[St]&&(tt.close[St]-ft.close[St]===(St?-1:1)||!St&&ht(tt,ft,1))}}function V(T){var A=parseFloat(T);return A==T&&(A!==0||!N.HD(T)||T.indexOf("x")<=0)?A:NaN}function I(T){return!isNaN(V(T))}function D(){return Math.round(Math.random()*9)}function C(T,A){return A===0?T:C(A,T%A)}function M(T,A){return T==null?A:A==null?T:T*A/C(T,A)}},26357:function(Ce,Jt,F){"use strict";F.d(Jt,{$l:function(){return Kt},Av:function(){return Ut},C5:function(){return vr},CX:function(){return G},Gl:function(){return ot},Hg:function(){return O},Ib:function(){return lr},JQ:function(){return X},Ki:function(){return rt},L1:function(){return W},MA:function(){return wt},Mh:function(){return zt},Nj:function(){return _e},RW:function(){return ie},SJ:function(){return ee},SX:function(){return Bt},T5:function(){return Se},UL:function(){return Tt},VP:function(){return Ht},WO:function(){return we},XX:function(){return $t},aG:function(){return Ae},ci:function(){return Pe},e9:function(){return tr},fD:function(){return Et},iK:function(){return Q},k5:function(){return qe},oJ:function(){return At},og:function(){return Oe},qc:function(){return lt},th:function(){return Qt},vF:function(){return Lr},wU:function(){return U},xp:function(){return He},xr:function(){return pe},yx:function(){return $},zI:function(){return Ft},zr:function(){return g}});var N=F(92528),ct=F(33051),K=F(30106),dt=F(21092),gt=F(32234),vt=F(327),it=1,et={},H=(0,gt.Yf)(),J=(0,gt.Yf)(),at=0,G=1,U=2,W=["emphasis","blur","select"],lt=["normal","emphasis","blur","select"],g=10,j=9,rt="highlight",$="downplay",O="select",X="unselect",Q="toggleSelect";function k(ce){return ce!=null&&ce!=="none"}var V=new N.ZP(100);function I(ce){if((0,ct.HD)(ce)){var Re=V.get(ce);return Re||(Re=dt.lift(ce,-.1),V.put(ce,Re)),Re}else if((0,ct.Qq)(ce)){var Le=(0,ct.l7)({},ce);return Le.colorStops=(0,ct.UI)(ce.colorStops,function(Ke){return{offset:Ke.offset,color:dt.lift(Ke.color,-.1)}}),Le}return ce}function D(ce,Re,Le){ce.onHoverStateChange&&(ce.hoverState||0)!==Le&&ce.onHoverStateChange(Re),ce.hoverState=Le}function C(ce){D(ce,"emphasis",U)}function M(ce){ce.hoverState===U&&D(ce,"normal",at)}function T(ce){D(ce,"blur",G)}function A(ce){ce.hoverState===G&&D(ce,"normal",at)}function L(ce){ce.selected=!0}function Z(ce){ce.selected=!1}function z(ce,Re,Le){Re(ce,Le)}function ut(ce,Re,Le){z(ce,Re,Le),ce.isGroup&&ce.traverse(function(Ke){z(Ke,Re,Le)})}function ot(ce,Re){switch(Re){case"emphasis":ce.hoverState=U;break;case"normal":ce.hoverState=at;break;case"blur":ce.hoverState=G;break;case"select":ce.selected=!0}}function ht(ce){ce.isGroup?ce.traverse(function(Re){Re.clearStates()}):ce.clearStates()}function tt(ce,Re,Le,Ke){for(var Tr=ce.style,Nr={},Br=0;Br<Re.length;Br++){var rn=Re[Br],Mn=Tr[rn];Nr[rn]=Mn??(Ke&&Ke[rn])}for(var Br=0;Br<ce.animators.length;Br++){var Jr=ce.animators[Br];Jr.__fromStateTransition&&Jr.__fromStateTransition.indexOf(Le)<0&&Jr.targetName==="style"&&Jr.saveTo(Nr,Re)}return Nr}function ft(ce,Re,Le,Ke){var Tr=Le&&(0,ct.cq)(Le,"select")>=0,Nr=!1;if(ce instanceof vt.ZP){var Br=H(ce),rn=Tr&&Br.selectFill||Br.normalFill,Mn=Tr&&Br.selectStroke||Br.normalStroke;if(k(rn)||k(Mn)){Ke=Ke||{};var Jr=Ke.style||{};Jr.fill==="inherit"?(Nr=!0,Ke=(0,ct.l7)({},Ke),Jr=(0,ct.l7)({},Jr),Jr.fill=rn):!k(Jr.fill)&&k(rn)?(Nr=!0,Ke=(0,ct.l7)({},Ke),Jr=(0,ct.l7)({},Jr),Jr.fill=I(rn)):!k(Jr.stroke)&&k(Mn)&&(Nr||(Ke=(0,ct.l7)({},Ke),Jr=(0,ct.l7)({},Jr)),Jr.stroke=I(Mn)),Ke.style=Jr}}if(Ke&&Ke.z2==null){Nr||(Ke=(0,ct.l7)({},Ke));var ei=ce.z2EmphasisLift;Ke.z2=ce.z2+(ei??g)}return Ke}function St(ce,Re,Le){if(Le&&Le.z2==null){Le=(0,ct.l7)({},Le);var Ke=ce.z2SelectLift;Le.z2=ce.z2+(Ke??j)}return Le}function st(ce,Re,Le){var Ke=(0,ct.cq)(ce.currentStates,Re)>=0,Tr=ce.style.opacity,Nr=Ke?null:tt(ce,["opacity"],Re,{opacity:1});Le=Le||{};var Br=Le.style||{};return Br.opacity==null&&(Le=(0,ct.l7)({},Le),Br=(0,ct.l7)({opacity:Ke?Tr:Nr.opacity*.1},Br),Le.style=Br),Le}function xt(ce,Re){var Le=this.states[ce];if(this.style){if(ce==="emphasis")return ft(this,ce,Re,Le);if(ce==="blur")return st(this,ce,Le);if(ce==="select")return St(this,ce,Le)}return Le}function wt(ce){ce.stateProxy=xt;var Re=ce.getTextContent(),Le=ce.getTextGuideLine();Re&&(Re.stateProxy=xt),Le&&(Le.stateProxy=xt)}function Dt(ce,Re){!De(ce,Re)&&!ce.__highByOuter&&ut(ce,C)}function It(ce,Re){!De(ce,Re)&&!ce.__highByOuter&&ut(ce,M)}function Et(ce,Re){ce.__highByOuter|=1<<(Re||0),ut(ce,C)}function zt(ce,Re){!(ce.__highByOuter&=~(1<<(Re||0)))&&ut(ce,M)}function Bt(ce){ut(ce,T)}function Ht(ce){ut(ce,A)}function $t(ce){ut(ce,L)}function ee(ce){ut(ce,Z)}function De(ce,Re){return ce.__highDownSilentOnTouch&&Re.zrByTouch}function Se(ce){var Re=ce.getModel(),Le=[],Ke=[];Re.eachComponent(function(Tr,Nr){var Br=J(Nr),rn=Tr==="series",Mn=rn?ce.getViewOfSeriesModel(Nr):ce.getViewOfComponentModel(Nr);!rn&&Ke.push(Mn),Br.isBlured&&(Mn.group.traverse(function(Jr){A(Jr)}),rn&&Le.push(Nr)),Br.isBlured=!1}),(0,ct.S6)(Ke,function(Tr){Tr&&Tr.toggleBlurSeries&&Tr.toggleBlurSeries(Le,!1,Re)})}function Be(ce,Re,Le,Ke){var Tr=Ke.getModel();Le=Le||"coordinateSystem";function Nr(Jr,ei){for(var jn=0;jn<ei.length;jn++){var mi=Jr.getItemGraphicEl(ei[jn]);mi&&Ht(mi)}}if(ce!=null&&!(!Re||Re==="none")){var Br=Tr.getSeriesByIndex(ce),rn=Br.coordinateSystem;rn&&rn.master&&(rn=rn.master);var Mn=[];Tr.eachSeries(function(Jr){var ei=Br===Jr,jn=Jr.coordinateSystem;jn&&jn.master&&(jn=jn.master);var mi=jn&&rn?jn===rn:ei;if(!(Le==="series"&&!ei||Le==="coordinateSystem"&&!mi||Re==="series"&&ei)){var fi=Ke.getViewOfSeriesModel(Jr);if(fi.group.traverse(function(Ta){T(Ta)}),(0,ct.zG)(Re))Nr(Jr.getData(),Re);else if((0,ct.Kn)(Re))for(var Fa=(0,ct.XP)(Re),Ki=0;Ki<Fa.length;Ki++)Nr(Jr.getData(Fa[Ki]),Re[Fa[Ki]]);Mn.push(Jr),J(Jr).isBlured=!0}}),Tr.eachComponent(function(Jr,ei){if(Jr!=="series"){var jn=Ke.getViewOfComponentModel(ei);jn&&jn.toggleBlurSeries&&jn.toggleBlurSeries(Mn,!0,Tr)}})}}function Ft(ce,Re,Le){if(!(ce==null||Re==null)){var Ke=Le.getModel().getComponent(ce,Re);if(!!Ke){J(Ke).isBlured=!0;var Tr=Le.getViewOfComponentModel(Ke);!Tr||!Tr.focusBlurEnabled||Tr.group.traverse(function(Nr){T(Nr)})}}}function Tt(ce,Re,Le){var Ke=ce.seriesIndex,Tr=ce.getData(Re.dataType);if(!!Tr){var Nr=(0,gt.gO)(Tr,Re);Nr=((0,ct.kJ)(Nr)?Nr[0]:Nr)||0;var Br=Tr.getItemGraphicEl(Nr);if(!Br)for(var rn=Tr.count(),Mn=0;!Br&&Mn<rn;)Br=Tr.getItemGraphicEl(Mn++);if(Br){var Jr=(0,K.A)(Br);Be(Ke,Jr.focus,Jr.blurScope,Le)}else{var ei=ce.get(["emphasis","focus"]),jn=ce.get(["emphasis","blurScope"]);ei!=null&&Be(Ke,ei,jn,Le)}}}function At(ce,Re,Le,Ke){var Tr={focusSelf:!1,dispatchers:null};if(ce==null||ce==="series"||Re==null||Le==null)return Tr;var Nr=Ke.getModel().getComponent(ce,Re);if(!Nr)return Tr;var Br=Ke.getViewOfComponentModel(Nr);if(!Br||!Br.findHighDownDispatchers)return Tr;for(var rn=Br.findHighDownDispatchers(Le),Mn,Jr=0;Jr<rn.length;Jr++)if((0,K.A)(rn[Jr]).focus==="self"){Mn=!0;break}return{focusSelf:Mn,dispatchers:rn}}function Kt(ce,Re,Le){var Ke=(0,K.A)(ce),Tr=At(Ke.componentMainType,Ke.componentIndex,Ke.componentHighDownName,Le),Nr=Tr.dispatchers,Br=Tr.focusSelf;Nr?(Br&&Ft(Ke.componentMainType,Ke.componentIndex,Le),(0,ct.S6)(Nr,function(rn){return Dt(rn,Re)})):(Be(Ke.seriesIndex,Ke.focus,Ke.blurScope,Le),Ke.focus==="self"&&Ft(Ke.componentMainType,Ke.componentIndex,Le),Dt(ce,Re))}function pe(ce,Re,Le){Se(Le);var Ke=(0,K.A)(ce),Tr=At(Ke.componentMainType,Ke.componentIndex,Ke.componentHighDownName,Le).dispatchers;Tr?(0,ct.S6)(Tr,function(Nr){return It(Nr,Re)}):It(ce,Re)}function Oe(ce,Re,Le){if(!!Ae(Re)){var Ke=Re.dataType,Tr=ce.getData(Ke),Nr=(0,gt.gO)(Tr,Re);(0,ct.kJ)(Nr)||(Nr=[Nr]),ce[Re.type===Q?"toggleSelect":Re.type===O?"select":"unselect"](Nr,Ke)}}function Pe(ce){var Re=ce.getAllData();(0,ct.S6)(Re,function(Le){var Ke=Le.data,Tr=Le.type;Ke.eachItemGraphicEl(function(Nr,Br){ce.isSelected(Br,Tr)?$t(Nr):ee(Nr)})})}function vr(ce){var Re=[];return ce.eachSeries(function(Le){var Ke=Le.getAllData();(0,ct.S6)(Ke,function(Tr){var Nr=Tr.data,Br=Tr.type,rn=Le.getSelectedDataIndices();if(rn.length>0){var Mn={dataIndex:rn,seriesIndex:Le.seriesIndex};Br!=null&&(Mn.dataType=Br),Re.push(Mn)}})}),Re}function Lr(ce,Re,Le){_e(ce,!0),ut(ce,wt),lr(ce,Re,Le)}function nr(ce){_e(ce,!1)}function qe(ce,Re,Le,Ke){Ke?nr(ce):Lr(ce,Re,Le)}function lr(ce,Re,Le){var Ke=(0,K.A)(ce);Re!=null?(Ke.focus=Re,Ke.blurScope=Le):Ke.focus&&(Ke.focus=null)}var Yt=["emphasis","blur","select"],le={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function we(ce,Re,Le,Ke){Le=Le||"itemStyle";for(var Tr=0;Tr<Yt.length;Tr++){var Nr=Yt[Tr],Br=Re.getModel([Nr,Le]),rn=ce.ensureState(Nr);rn.style=Ke?Ke(Br):Br[le[Le]]()}}function _e(ce,Re){var Le=Re===!1,Ke=ce;ce.highDownSilentOnTouch&&(Ke.__highDownSilentOnTouch=ce.highDownSilentOnTouch),(!Le||Ke.__highDownDispatcher)&&(Ke.__highByOuter=Ke.__highByOuter||0,Ke.__highDownDispatcher=!Le)}function Ut(ce){return!!(ce&&ce.__highDownDispatcher)}function Qt(ce,Re,Le){var Ke=(0,K.A)(ce);Ke.componentMainType=Re.mainType,Ke.componentIndex=Re.componentIndex,Ke.componentHighDownName=Le}function ie(ce){var Re=et[ce];return Re==null&&it<=32&&(Re=et[ce]=it++),Re}function Ae(ce){var Re=ce.type;return Re===O||Re===X||Re===Q}function He(ce){var Re=ce.type;return Re===rt||Re===$}function tr(ce){var Re=H(ce);Re.normalFill=ce.style.fill,Re.normalStroke=ce.style.stroke;var Le=ce.states.select||{};Re.selectFill=Le.style&&Le.style.fill||null,Re.selectStroke=Le.style&&Le.style.stroke||null}},41525:function(Ce,Jt,F){"use strict";F.d(Jt,{Cq:function(){return X},Pw:function(){return g},th:function(){return $},zp:function(){return O}});var N=F(33051),ct=F(327),K=F(22095),dt=F(35151),gt=F(69538),vt=F(53842),it=F(60479),et=F(80423),H=F(85669),J=ct.ZP.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(Q,k){var V=k.cx,I=k.cy,D=k.width/2,C=k.height/2;Q.moveTo(V,I-C),Q.lineTo(V+D,I+C),Q.lineTo(V-D,I+C),Q.closePath()}}),at=ct.ZP.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(Q,k){var V=k.cx,I=k.cy,D=k.width/2,C=k.height/2;Q.moveTo(V,I-C),Q.lineTo(V+D,I),Q.lineTo(V,I+C),Q.lineTo(V-D,I),Q.closePath()}}),G=ct.ZP.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(Q,k){var V=k.x,I=k.y,D=k.width/5*3,C=Math.max(D,k.height),M=D/2,T=M*M/(C-M),A=I-C+M+T,L=Math.asin(T/M),Z=Math.cos(L)*M,z=Math.sin(L),ut=Math.cos(L),ot=M*.6,ht=M*.7;Q.moveTo(V-Z,A+T),Q.arc(V,A,M,Math.PI-L,Math.PI*2+L),Q.bezierCurveTo(V+Z-z*ot,A+T+ut*ot,V,I-ht,V,I),Q.bezierCurveTo(V,I-ht,V-Z+z*ot,A+T+ut*ot,V-Z,A+T),Q.closePath()}}),U=ct.ZP.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(Q,k){var V=k.height,I=k.width,D=k.x,C=k.y,M=I/3*2;Q.moveTo(D,C),Q.lineTo(D+M,C+V),Q.lineTo(D,C+V/4*3),Q.lineTo(D-M,C+V),Q.lineTo(D,C),Q.closePath()}}),W={line:K.Z,rect:dt.Z,roundRect:dt.Z,square:dt.Z,circle:gt.Z,diamond:at,pin:G,arrow:U,triangle:J},lt={line:function(Q,k,V,I,D){D.x1=Q,D.y1=k+I/2,D.x2=Q+V,D.y2=k+I/2},rect:function(Q,k,V,I,D){D.x=Q,D.y=k,D.width=V,D.height=I},roundRect:function(Q,k,V,I,D){D.x=Q,D.y=k,D.width=V,D.height=I,D.r=Math.min(V,I)/4},square:function(Q,k,V,I,D){var C=Math.min(V,I);D.x=Q,D.y=k,D.width=C,D.height=C},circle:function(Q,k,V,I,D){D.cx=Q+V/2,D.cy=k+I/2,D.r=Math.min(V,I)/2},diamond:function(Q,k,V,I,D){D.cx=Q+V/2,D.cy=k+I/2,D.width=V,D.height=I},pin:function(Q,k,V,I,D){D.x=Q+V/2,D.y=k+I/2,D.width=V,D.height=I},arrow:function(Q,k,V,I,D){D.x=Q+V/2,D.y=k+I/2,D.width=V,D.height=I},triangle:function(Q,k,V,I,D){D.cx=Q+V/2,D.cy=k+I/2,D.width=V,D.height=I}},g={};(0,N.S6)(W,function(Q,k){g[k]=new Q});var j=ct.ZP.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(Q,k,V){var I=(0,et.wI)(Q,k,V),D=this.shape;return D&&D.symbolType==="pin"&&k.position==="inside"&&(I.y=V.y+V.height*.4),I},buildPath:function(Q,k,V){var I=k.symbolType;if(I!=="none"){var D=g[I];D||(I="rect",D=g[I]),lt[I](k.x,k.y,k.width,k.height,D.shape),D.buildPath(Q,D.shape,V)}}});function rt(Q,k){if(this.type!=="image"){var V=this.style;this.__isEmptyBrush?(V.stroke=Q,V.fill=k||"#fff",V.lineWidth=2):this.shape.symbolType==="line"?V.stroke=Q:V.fill=Q,this.markRedraw()}}function $(Q,k,V,I,D,C,M){var T=Q.indexOf("empty")===0;T&&(Q=Q.substr(5,1).toLowerCase()+Q.substr(6));var A;return Q.indexOf("image://")===0?A=vt.makeImage(Q.slice(8),new it.Z(k,V,I,D),M?"center":"cover"):Q.indexOf("path://")===0?A=vt.makePath(Q.slice(7),{},new it.Z(k,V,I,D),M?"center":"cover"):A=new j({shape:{symbolType:Q,x:k,y:V,width:I,height:D}}),A.__isEmptyBrush=T,A.setColor=rt,C&&A.setColor(C),A}function O(Q){return(0,N.kJ)(Q)||(Q=[+Q,+Q]),[Q[0]||0,Q[1]||0]}function X(Q,k){if(Q!=null)return(0,N.kJ)(Q)||(Q=[Q,Q]),[(0,H.GM)(Q[0],k[0])||0,(0,H.GM)((0,N.pD)(Q[1],Q[0]),k[1])||0]}},270:function(Ce,Jt,F){"use strict";F.d(Jt,{P2:function(){return dt},T9:function(){return gt},ZH:function(){return vt}});var N="\0__throttleOriginMethod",ct="\0__throttleRate",K="\0__throttleType";function dt(it,et,H){var J,at=0,G=0,U=null,W,lt,g,j;et=et||0;function rt(){G=new Date().getTime(),U=null,it.apply(lt,g||[])}var $=function(){for(var O=[],X=0;X<arguments.length;X++)O[X]=arguments[X];J=new Date().getTime(),lt=this,g=O;var Q=j||et,k=j||H;j=null,W=J-(k?at:G)-Q,clearTimeout(U),k?U=setTimeout(rt,Q):W>=0?rt():U=setTimeout(rt,-W),at=J};return $.clear=function(){U&&(clearTimeout(U),U=null)},$.debounceNextCall=function(O){j=O},$}function gt(it,et,H,J){var at=it[et];if(!!at){var G=at[N]||at,U=at[K],W=at[ct];if(W!==H||U!==J){if(H==null||!J)return it[et]=G;at=it[et]=dt(G,H,J==="debounce"),at[N]=G,at[K]=J,at[ct]=H}return at}}function vt(it,et){var H=it[et];H&&H[N]&&(H.clear&&H.clear(),it[et]=H[N])}},15015:function(Ce,Jt,F){"use strict";F.d(Jt,{$K:function(){return j},CW:function(){return V},En:function(){return z},FW:function(){return W},MV:function(){return M},P5:function(){return H},RZ:function(){return T},Tj:function(){return g},V8:function(){return G},WT:function(){return gt},WU:function(){return $},Wp:function(){return D},cb:function(){return ht},dV:function(){return it},eN:function(){return ut},f5:function(){return Z},fn:function(){return C},k7:function(){return O},q5:function(){return Q},rM:function(){return ot},s2:function(){return et},sx:function(){return k},vh:function(){return L},vk:function(){return lt},xC:function(){return rt},xL:function(){return A},xz:function(){return I},yR:function(){return vt}});var N=F(33051),ct=F(85669),K=F(73917),dt=F(1497),gt=1e3,vt=gt*60,it=vt*60,et=it*24,H=et*365,J={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},at="{yyyy}-{MM}-{dd}",G={year:"{yyyy}",month:"{yyyy}-{MM}",day:at,hour:at+" "+J.hour,minute:at+" "+J.minute,second:at+" "+J.second,millisecond:J.none},U=["year","month","day","hour","minute","second","millisecond"],W=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function lt(tt,ft){return tt+="","0000".substr(0,ft-tt.length)+tt}function g(tt){switch(tt){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return tt}}function j(tt){return tt===g(tt)}function rt(tt){switch(tt){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function $(tt,ft,St,st){var xt=ct.sG(tt),wt=xt[k(St)](),Dt=xt[V(St)]()+1,It=Math.floor((Dt-1)/3)+1,Et=xt[I(St)](),zt=xt["get"+(St?"UTC":"")+"Day"](),Bt=xt[D(St)](),Ht=(Bt-1)%12+1,$t=xt[C(St)](),ee=xt[M(St)](),De=xt[T(St)](),Se=st instanceof dt.Z?st:(0,K.G8)(st||K.sO)||(0,K.Li)(),Be=Se.getModel("time"),Ft=Be.get("month"),Tt=Be.get("monthAbbr"),At=Be.get("dayOfWeek"),Kt=Be.get("dayOfWeekAbbr");return(ft||"").replace(/{yyyy}/g,wt+"").replace(/{yy}/g,wt%100+"").replace(/{Q}/g,It+"").replace(/{MMMM}/g,Ft[Dt-1]).replace(/{MMM}/g,Tt[Dt-1]).replace(/{MM}/g,lt(Dt,2)).replace(/{M}/g,Dt+"").replace(/{dd}/g,lt(Et,2)).replace(/{d}/g,Et+"").replace(/{eeee}/g,At[zt]).replace(/{ee}/g,Kt[zt]).replace(/{e}/g,zt+"").replace(/{HH}/g,lt(Bt,2)).replace(/{H}/g,Bt+"").replace(/{hh}/g,lt(Ht+"",2)).replace(/{h}/g,Ht+"").replace(/{mm}/g,lt($t,2)).replace(/{m}/g,$t+"").replace(/{ss}/g,lt(ee,2)).replace(/{s}/g,ee+"").replace(/{SSS}/g,lt(De,3)).replace(/{S}/g,De+"")}function O(tt,ft,St,st,xt){var wt=null;if(N.HD(St))wt=St;else if(N.mf(St))wt=St(tt.value,ft,{level:tt.level});else{var Dt=N.l7({},J);if(tt.level>0)for(var It=0;It<U.length;++It)Dt[U[It]]="{primary|"+Dt[U[It]]+"}";var Et=St?St.inherit===!1?St:N.ce(St,Dt):Dt,zt=X(tt.value,xt);if(Et[zt])wt=Et[zt];else if(Et.inherit){for(var Bt=W.indexOf(zt),It=Bt-1;It>=0;--It)if(Et[zt]){wt=Et[zt];break}wt=wt||Dt.none}if(N.kJ(wt)){var Ht=tt.level==null?0:tt.level>=0?tt.level:wt.length+tt.level;Ht=Math.min(Ht,wt.length-1),wt=wt[Ht]}}return $(new Date(tt.value),wt,xt,st)}function X(tt,ft){var St=ct.sG(tt),st=St[V(ft)]()+1,xt=St[I(ft)](),wt=St[D(ft)](),Dt=St[C(ft)](),It=St[M(ft)](),Et=St[T(ft)](),zt=Et===0,Bt=zt&&It===0,Ht=Bt&&Dt===0,$t=Ht&&wt===0,ee=$t&&xt===1,De=ee&&st===1;return De?"year":ee?"month":$t?"day":Ht?"hour":Bt?"minute":zt?"second":"millisecond"}function Q(tt,ft,St){var st=N.hj(tt)?ct.sG(tt):tt;switch(ft=ft||X(tt,St),ft){case"year":return st[k(St)]();case"half-year":return st[V(St)]()>=6?1:0;case"quarter":return Math.floor((st[V(St)]()+1)/4);case"month":return st[V(St)]();case"day":return st[I(St)]();case"half-day":return st[D(St)]()/24;case"hour":return st[D(St)]();case"minute":return st[C(St)]();case"second":return st[M(St)]();case"millisecond":return st[T(St)]()}}function k(tt){return tt?"getUTCFullYear":"getFullYear"}function V(tt){return tt?"getUTCMonth":"getMonth"}function I(tt){return tt?"getUTCDate":"getDate"}function D(tt){return tt?"getUTCHours":"getHours"}function C(tt){return tt?"getUTCMinutes":"getMinutes"}function M(tt){return tt?"getUTCSeconds":"getSeconds"}function T(tt){return tt?"getUTCMilliseconds":"getMilliseconds"}function A(tt){return tt?"setUTCFullYear":"setFullYear"}function L(tt){return tt?"setUTCMonth":"setMonth"}function Z(tt){return tt?"setUTCDate":"setDate"}function z(tt){return tt?"setUTCHours":"setHours"}function ut(tt){return tt?"setUTCMinutes":"setMinutes"}function ot(tt){return tt?"setUTCSeconds":"setSeconds"}function ht(tt){return tt?"setUTCMilliseconds":"setMilliseconds"}},94279:function(Ce,Jt,F){"use strict";F.d(Jt,{J5:function(){return it},RA:function(){return et},Wc:function(){return J},XD:function(){return dt},cy:function(){return K},f7:function(){return ct},fY:function(){return H},hL:function(){return vt},qb:function(){return gt}});var N=F(33051),ct=(0,N.kW)(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),K="original",dt="arrayRows",gt="objectRows",vt="keyedColumns",it="typedArray",et="unknown",H="column",J="row"},80887:function(Ce,Jt,F){"use strict";F.d(Jt,{o:function(){return dt}});var N=F(33051),ct=typeof Float32Array<"u",K=ct?Float32Array:Array;function dt(gt){return(0,N.kJ)(gt)?ct?new Float32Array(gt):gt:new K(gt)}},75797:function(Ce,Jt,F){"use strict";var N=F(33051),ct=F(38154),K=F(42151),dt=F(34251),gt=F(32234),vt=F(26357),it=F(8674),et=F(95682),H=F(53842),J=gt.Yf(),at=(0,et.Z)(),G=function(){function rt(){this.group=new ct.Z,this.uid=K.Kr("viewChart"),this.renderTask=(0,it.v)({plan:lt,reset:g}),this.renderTask.context={view:this}}return rt.prototype.init=function($,O){},rt.prototype.render=function($,O,X,Q){},rt.prototype.highlight=function($,O,X,Q){var k=$.getData(Q&&Q.dataType);!k||W(k,Q,"emphasis")},rt.prototype.downplay=function($,O,X,Q){var k=$.getData(Q&&Q.dataType);!k||W(k,Q,"normal")},rt.prototype.remove=function($,O){this.group.removeAll()},rt.prototype.dispose=function($,O){},rt.prototype.updateView=function($,O,X,Q){this.render($,O,X,Q)},rt.prototype.updateLayout=function($,O,X,Q){this.render($,O,X,Q)},rt.prototype.updateVisual=function($,O,X,Q){this.render($,O,X,Q)},rt.prototype.eachRendered=function($){(0,H.traverseElements)(this.group,$)},rt.markUpdateMethod=function($,O){J($).updateMethod=O},rt.protoInitialize=function(){var $=rt.prototype;$.type="chart"}(),rt}();function U(rt,$,O){rt&&(0,vt.Av)(rt)&&($==="emphasis"?vt.fD:vt.Mh)(rt,O)}function W(rt,$,O){var X=gt.gO(rt,$),Q=$&&$.highlightKey!=null?(0,vt.RW)($.highlightKey):null;X!=null?(0,N.S6)(gt.kF(X),function(k){U(rt.getItemGraphicEl(k),O,Q)}):rt.eachItemGraphicEl(function(k){U(k,O,Q)})}dt.dm(G,["dispose"]),dt.au(G);function lt(rt){return at(rt.model)}function g(rt){var $=rt.model,O=rt.ecModel,X=rt.api,Q=rt.payload,k=$.pipelineContext.progressiveRender,V=rt.view,I=Q&&J(Q).updateMethod,D=k?"incrementalPrepareRender":I&&V[I]?I:"render";return D!=="render"&&V[D]($,O,X,Q),j[D]}var j={incrementalPrepareRender:{progress:function(rt,$){$.view.incrementalRender(rt,$.model,$.ecModel,$.api,$.payload)}},render:{forceFirstProgress:!0,progress:function(rt,$){$.view.render($.model,$.ecModel,$.api,$.payload)}}};Jt.Z=G},33166:function(Ce,Jt,F){"use strict";var N=F(38154),ct=F(42151),K=F(34251),dt=function(){function gt(){this.group=new N.Z,this.uid=ct.Kr("viewComponent")}return gt.prototype.init=function(vt,it){},gt.prototype.render=function(vt,it,et,H){},gt.prototype.dispose=function(vt,it){},gt.prototype.updateView=function(vt,it,et,H){},gt.prototype.updateLayout=function(vt,it,et,H){},gt.prototype.updateVisual=function(vt,it,et,H){},gt.prototype.toggleBlurSeries=function(vt,it,et){},gt.prototype.eachRendered=function(vt){var it=this.group;it&&it.traverse(vt)},gt}();K.dm(dt),K.au(dt),Jt.Z=dt},26211:function(Ce,Jt,F){"use strict";F.d(Jt,{LZ:function(){return K},Or:function(){return N},UL:function(){return ct}});function N(dt,gt,vt){switch(vt){case"color":var it=dt.getItemVisual(gt,"style");return it[dt.getVisual("drawType")];case"opacity":return dt.getItemVisual(gt,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return dt.getItemVisual(gt,vt);default:}}function ct(dt,gt){switch(gt){case"color":var vt=dt.getVisual("style");return vt[dt.getVisual("drawType")];case"opacity":return dt.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return dt.getVisual(gt);default:}}function K(dt,gt,vt,it){switch(vt){case"color":var et=dt.ensureUniqueItemVisual(gt,"style");et[dt.getVisual("drawType")]=it,dt.setItemVisual(gt,"colorFromPalette",!1);break;case"opacity":dt.ensureUniqueItemVisual(gt,"style").opacity=it;break;case"symbol":case"symbolSize":case"liftZ":dt.setItemVisual(gt,vt,it);break;default:}}},80645:function(Ce,Jt){Jt.read=function(F,N,ct,K,dt){var gt,vt,it=dt*8-K-1,et=(1<<it)-1,H=et>>1,J=-7,at=ct?dt-1:0,G=ct?-1:1,U=F[N+at];for(at+=G,gt=U&(1<<-J)-1,U>>=-J,J+=it;J>0;gt=gt*256+F[N+at],at+=G,J-=8);for(vt=gt&(1<<-J)-1,gt>>=-J,J+=K;J>0;vt=vt*256+F[N+at],at+=G,J-=8);if(gt===0)gt=1-H;else{if(gt===et)return vt?NaN:(U?-1:1)*(1/0);vt=vt+Math.pow(2,K),gt=gt-H}return(U?-1:1)*vt*Math.pow(2,gt-K)},Jt.write=function(F,N,ct,K,dt,gt){var vt,it,et,H=gt*8-dt-1,J=(1<<H)-1,at=J>>1,G=dt===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=K?0:gt-1,W=K?1:-1,lt=N<0||N===0&&1/N<0?1:0;for(N=Math.abs(N),isNaN(N)||N===1/0?(it=isNaN(N)?1:0,vt=J):(vt=Math.floor(Math.log(N)/Math.LN2),N*(et=Math.pow(2,-vt))<1&&(vt--,et*=2),vt+at>=1?N+=G/et:N+=G*Math.pow(2,1-at),N*et>=2&&(vt++,et/=2),vt+at>=J?(it=0,vt=J):vt+at>=1?(it=(N*et-1)*Math.pow(2,dt),vt=vt+at):(it=N*Math.pow(2,at-1)*Math.pow(2,dt),vt=0));dt>=8;F[ct+U]=it&255,U+=W,it/=256,dt-=8);for(vt=vt<<dt|it,H+=dt;H>0;F[ct+U]=vt&255,U+=W,vt/=256,H-=8);F[ct+U-W]|=lt*128}},5826:function(Ce){var Jt={}.toString;Ce.exports=Array.isArray||function(F){return Jt.call(F)=="[object Array]"}},75251:function(Ce,Jt,F){"use strict";var N;var ct=F(67294),K=Symbol.for("react.element"),dt=Symbol.for("react.fragment"),gt=Object.prototype.hasOwnProperty,vt=ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,it={key:!0,ref:!0,__self:!0,__source:!0};function et(H,J,at){var G,U={},W=null,lt=null;at!==void 0&&(W=""+at),J.key!==void 0&&(W=""+J.key),J.ref!==void 0&&(lt=J.ref);for(G in J)gt.call(J,G)&&!it.hasOwnProperty(G)&&(U[G]=J[G]);if(H&&H.defaultProps)for(G in J=H.defaultProps,J)U[G]===void 0&&(U[G]=J[G]);return{$$typeof:K,type:H,key:W,ref:lt,props:U,_owner:vt.current}}N=dt,Jt.jsx=et,Jt.jsxs=et},85893:function(Ce,Jt,F){"use strict";Ce.exports=F(75251)},70655:function(Ce,Jt,F){"use strict";F.d(Jt,{ZT:function(){return ct}});var N=function(C,M){return N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,A){T.__proto__=A}||function(T,A){for(var L in A)Object.prototype.hasOwnProperty.call(A,L)&&(T[L]=A[L])},N(C,M)};function ct(C,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");N(C,M);function T(){this.constructor=C}C.prototype=M===null?Object.create(M):(T.prototype=M.prototype,new T)}var K=function(){return K=Object.assign||function(M){for(var T,A=1,L=arguments.length;A<L;A++){T=arguments[A];for(var Z in T)Object.prototype.hasOwnProperty.call(T,Z)&&(M[Z]=T[Z])}return M},K.apply(this,arguments)};function dt(C,M){var T={};for(var A in C)Object.prototype.hasOwnProperty.call(C,A)&&M.indexOf(A)<0&&(T[A]=C[A]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,A=Object.getOwnPropertySymbols(C);L<A.length;L++)M.indexOf(A[L])<0&&Object.prototype.propertyIsEnumerable.call(C,A[L])&&(T[A[L]]=C[A[L]]);return T}function gt(C,M,T,A){var L=arguments.length,Z=L<3?M:A===null?A=Object.getOwnPropertyDescriptor(M,T):A,z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(C,M,T,A);else for(var ut=C.length-1;ut>=0;ut--)(z=C[ut])&&(Z=(L<3?z(Z):L>3?z(M,T,Z):z(M,T))||Z);return L>3&&Z&&Object.defineProperty(M,T,Z),Z}function vt(C,M){return function(T,A){M(T,A,C)}}function it(C,M){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(C,M)}function et(C,M,T,A){function L(Z){return Z instanceof T?Z:new T(function(z){z(Z)})}return new(T||(T=Promise))(function(Z,z){function ut(tt){try{ht(A.next(tt))}catch(ft){z(ft)}}function ot(tt){try{ht(A.throw(tt))}catch(ft){z(ft)}}function ht(tt){tt.done?Z(tt.value):L(tt.value).then(ut,ot)}ht((A=A.apply(C,M||[])).next())})}function H(C,M){var T={label:0,sent:function(){if(Z[0]&1)throw Z[1];return Z[1]},trys:[],ops:[]},A,L,Z,z;return z={next:ut(0),throw:ut(1),return:ut(2)},typeof Symbol=="function"&&(z[Symbol.iterator]=function(){return this}),z;function ut(ht){return function(tt){return ot([ht,tt])}}function ot(ht){if(A)throw new TypeError("Generator is already executing.");for(;T;)try{if(A=1,L&&(Z=ht[0]&2?L.return:ht[0]?L.throw||((Z=L.return)&&Z.call(L),0):L.next)&&!(Z=Z.call(L,ht[1])).done)return Z;switch(L=0,Z&&(ht=[ht[0]&2,Z.value]),ht[0]){case 0:case 1:Z=ht;break;case 4:return T.label++,{value:ht[1],done:!1};case 5:T.label++,L=ht[1],ht=[0];continue;case 7:ht=T.ops.pop(),T.trys.pop();continue;default:if(Z=T.trys,!(Z=Z.length>0&&Z[Z.length-1])&&(ht[0]===6||ht[0]===2)){T=0;continue}if(ht[0]===3&&(!Z||ht[1]>Z[0]&&ht[1]<Z[3])){T.label=ht[1];break}if(ht[0]===6&&T.label<Z[1]){T.label=Z[1],Z=ht;break}if(Z&&T.label<Z[2]){T.label=Z[2],T.ops.push(ht);break}Z[2]&&T.ops.pop(),T.trys.pop();continue}ht=M.call(C,T)}catch(tt){ht=[6,tt],L=0}finally{A=Z=0}if(ht[0]&5)throw ht[1];return{value:ht[0]?ht[1]:void 0,done:!0}}}var J=Object.create?function(C,M,T,A){A===void 0&&(A=T),Object.defineProperty(C,A,{enumerable:!0,get:function(){return M[T]}})}:function(C,M,T,A){A===void 0&&(A=T),C[A]=M[T]};function at(C,M){for(var T in C)T!=="default"&&!Object.prototype.hasOwnProperty.call(M,T)&&J(M,C,T)}function G(C){var M=typeof Symbol=="function"&&Symbol.iterator,T=M&&C[M],A=0;if(T)return T.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&A>=C.length&&(C=void 0),{value:C&&C[A++],done:!C}}};throw new TypeError(M?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(C,M){var T=typeof Symbol=="function"&&C[Symbol.iterator];if(!T)return C;var A=T.call(C),L,Z=[],z;try{for(;(M===void 0||M-- >0)&&!(L=A.next()).done;)Z.push(L.value)}catch(ut){z={error:ut}}finally{try{L&&!L.done&&(T=A.return)&&T.call(A)}finally{if(z)throw z.error}}return Z}function W(){for(var C=[],M=0;M<arguments.length;M++)C=C.concat(U(arguments[M]));return C}function lt(){for(var C=0,M=0,T=arguments.length;M<T;M++)C+=arguments[M].length;for(var A=Array(C),L=0,M=0;M<T;M++)for(var Z=arguments[M],z=0,ut=Z.length;z<ut;z++,L++)A[L]=Z[z];return A}function g(C,M,T){if(T||arguments.length===2)for(var A=0,L=M.length,Z;A<L;A++)(Z||!(A in M))&&(Z||(Z=Array.prototype.slice.call(M,0,A)),Z[A]=M[A]);return C.concat(Z||M)}function j(C){return this instanceof j?(this.v=C,this):new j(C)}function rt(C,M,T){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A=T.apply(C,M||[]),L,Z=[];return L={},z("next"),z("throw"),z("return"),L[Symbol.asyncIterator]=function(){return this},L;function z(St){A[St]&&(L[St]=function(st){return new Promise(function(xt,wt){Z.push([St,st,xt,wt])>1||ut(St,st)})})}function ut(St,st){try{ot(A[St](st))}catch(xt){ft(Z[0][3],xt)}}function ot(St){St.value instanceof j?Promise.resolve(St.value.v).then(ht,tt):ft(Z[0][2],St)}function ht(St){ut("next",St)}function tt(St){ut("throw",St)}function ft(St,st){St(st),Z.shift(),Z.length&&ut(Z[0][0],Z[0][1])}}function $(C){var M,T;return M={},A("next"),A("throw",function(L){throw L}),A("return"),M[Symbol.iterator]=function(){return this},M;function A(L,Z){M[L]=C[L]?function(z){return(T=!T)?{value:j(C[L](z)),done:L==="return"}:Z?Z(z):z}:Z}}function O(C){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var M=C[Symbol.asyncIterator],T;return M?M.call(C):(C=typeof G=="function"?G(C):C[Symbol.iterator](),T={},A("next"),A("throw"),A("return"),T[Symbol.asyncIterator]=function(){return this},T);function A(Z){T[Z]=C[Z]&&function(z){return new Promise(function(ut,ot){z=C[Z](z),L(ut,ot,z.done,z.value)})}}function L(Z,z,ut,ot){Promise.resolve(ot).then(function(ht){Z({value:ht,done:ut})},z)}}function X(C,M){return Object.defineProperty?Object.defineProperty(C,"raw",{value:M}):C.raw=M,C}var Q=Object.create?function(C,M){Object.defineProperty(C,"default",{enumerable:!0,value:M})}:function(C,M){C.default=M};function k(C){if(C&&C.__esModule)return C;var M={};if(C!=null)for(var T in C)T!=="default"&&Object.prototype.hasOwnProperty.call(C,T)&&J(M,C,T);return Q(M,C),M}function V(C){return C&&C.__esModule?C:{default:C}}function I(C,M,T,A){if(T==="a"&&!A)throw new TypeError("Private accessor was defined without a getter");if(typeof M=="function"?C!==M||!A:!M.has(C))throw new TypeError("Cannot read private member from an object whose class did not declare it");return T==="m"?A:T==="a"?A.call(C):A?A.value:M.get(C)}function D(C,M,T,A,L){if(A==="m")throw new TypeError("Private method is not writable");if(A==="a"&&!L)throw new TypeError("Private accessor was defined without a setter");if(typeof M=="function"?C!==M||!L:!M.has(C))throw new TypeError("Cannot write private member to an object whose class did not declare it");return A==="a"?L.call(C,T):L?L.value=T:M.set(C,T),T}},85823:function(Ce,Jt,F){"use strict";var N=F(87411),ct=F(95622),K=F(60479),dt=F(23510),gt=F(80423),vt=F(33051),it=F(4990),et=F(21092),H=F(14414),J="__zr_normal__",at=N.dN.concat(["ignore"]),G=(0,vt.u4)(N.dN,function(k,V){return k[V]=!0,k},{ignore:!1}),U={},W=new K.Z(0,0,0,0),lt=function(){function k(V){this.id=(0,vt.M8)(),this.animators=[],this.currentStates=[],this.states={},this._init(V)}return k.prototype._init=function(V){this.attr(V)},k.prototype.drift=function(V,I,D){switch(this.draggable){case"horizontal":I=0;break;case"vertical":V=0;break}var C=this.transform;C||(C=this.transform=[1,0,0,1,0,0]),C[4]+=V,C[5]+=I,this.decomposeTransform(),this.markRedraw()},k.prototype.beforeUpdate=function(){},k.prototype.afterUpdate=function(){},k.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},k.prototype.updateInnerText=function(V){var I=this._textContent;if(I&&(!I.ignore||V)){this.textConfig||(this.textConfig={});var D=this.textConfig,C=D.local,M=I.innerTransformable,T=void 0,A=void 0,L=!1;M.parent=C?this:null;var Z=!1;if(M.copyTransform(I),D.position!=null){var z=W;D.layoutRect?z.copy(D.layoutRect):z.copy(this.getBoundingRect()),C||z.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(U,D,z):(0,gt.wI)(U,D,z),M.x=U.x,M.y=U.y,T=U.align,A=U.verticalAlign;var ut=D.origin;if(ut&&D.rotation!=null){var ot=void 0,ht=void 0;ut==="center"?(ot=z.width*.5,ht=z.height*.5):(ot=(0,gt.GM)(ut[0],z.width),ht=(0,gt.GM)(ut[1],z.height)),Z=!0,M.originX=-M.x+ot+(C?0:z.x),M.originY=-M.y+ht+(C?0:z.y)}}D.rotation!=null&&(M.rotation=D.rotation);var tt=D.offset;tt&&(M.x+=tt[0],M.y+=tt[1],Z||(M.originX=-tt[0],M.originY=-tt[1]));var ft=D.inside==null?typeof D.position=="string"&&D.position.indexOf("inside")>=0:D.inside,St=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),st=void 0,xt=void 0,wt=void 0;ft&&this.canBeInsideText()?(st=D.insideFill,xt=D.insideStroke,(st==null||st==="auto")&&(st=this.getInsideTextFill()),(xt==null||xt==="auto")&&(xt=this.getInsideTextStroke(st),wt=!0)):(st=D.outsideFill,xt=D.outsideStroke,(st==null||st==="auto")&&(st=this.getOutsideFill()),(xt==null||xt==="auto")&&(xt=this.getOutsideStroke(st),wt=!0)),st=st||"#000",(st!==St.fill||xt!==St.stroke||wt!==St.autoStroke||T!==St.align||A!==St.verticalAlign)&&(L=!0,St.fill=st,St.stroke=xt,St.autoStroke=wt,St.align=T,St.verticalAlign=A,I.setDefaultTextStyle(St)),I.__dirty|=H.YV,L&&I.dirtyStyle(!0)}},k.prototype.canBeInsideText=function(){return!0},k.prototype.getInsideTextFill=function(){return"#fff"},k.prototype.getInsideTextStroke=function(V){return"#000"},k.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?it.GD:it.vU},k.prototype.getOutsideStroke=function(V){var I=this.__zr&&this.__zr.getBackgroundColor(),D=typeof I=="string"&&(0,et.parse)(I);D||(D=[255,255,255,1]);for(var C=D[3],M=this.__zr.isDarkMode(),T=0;T<3;T++)D[T]=D[T]*C+(M?0:255)*(1-C);return D[3]=1,(0,et.stringify)(D,"rgba")},k.prototype.traverse=function(V,I){},k.prototype.attrKV=function(V,I){V==="textConfig"?this.setTextConfig(I):V==="textContent"?this.setTextContent(I):V==="clipPath"?this.setClipPath(I):V==="extra"?(this.extra=this.extra||{},(0,vt.l7)(this.extra,I)):this[V]=I},k.prototype.hide=function(){this.ignore=!0,this.markRedraw()},k.prototype.show=function(){this.ignore=!1,this.markRedraw()},k.prototype.attr=function(V,I){if(typeof V=="string")this.attrKV(V,I);else if((0,vt.Kn)(V))for(var D=V,C=(0,vt.XP)(D),M=0;M<C.length;M++){var T=C[M];this.attrKV(T,V[T])}return this.markRedraw(),this},k.prototype.saveCurrentToNormalState=function(V){this._innerSaveToNormal(V);for(var I=this._normalState,D=0;D<this.animators.length;D++){var C=this.animators[D],M=C.__fromStateTransition;if(!(C.getLoop()||M&&M!==J)){var T=C.targetName,A=T?I[T]:I;C.saveTo(A)}}},k.prototype._innerSaveToNormal=function(V){var I=this._normalState;I||(I=this._normalState={}),V.textConfig&&!I.textConfig&&(I.textConfig=this.textConfig),this._savePrimaryToNormal(V,I,at)},k.prototype._savePrimaryToNormal=function(V,I,D){for(var C=0;C<D.length;C++){var M=D[C];V[M]!=null&&!(M in I)&&(I[M]=this[M])}},k.prototype.hasState=function(){return this.currentStates.length>0},k.prototype.getState=function(V){return this.states[V]},k.prototype.ensureState=function(V){var I=this.states;return I[V]||(I[V]={}),I[V]},k.prototype.clearStates=function(V){this.useState(J,!1,V)},k.prototype.useState=function(V,I,D,C){var M=V===J,T=this.hasState();if(!(!T&&M)){var A=this.currentStates,L=this.stateTransition;if(!((0,vt.cq)(A,V)>=0&&(I||A.length===1))){var Z;if(this.stateProxy&&!M&&(Z=this.stateProxy(V)),Z||(Z=this.states&&this.states[V]),!Z&&!M){(0,vt.H)("State "+V+" not exists.");return}M||this.saveCurrentToNormalState(Z);var z=!!(Z&&Z.hoverLayer||C);z&&this._toggleHoverLayerFlag(!0),this._applyStateObj(V,Z,this._normalState,I,!D&&!this.__inHover&&L&&L.duration>0,L);var ut=this._textContent,ot=this._textGuide;return ut&&ut.useState(V,I,D,z),ot&&ot.useState(V,I,D,z),M?(this.currentStates=[],this._normalState={}):I?this.currentStates.push(V):this.currentStates=[V],this._updateAnimationTargets(),this.markRedraw(),!z&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~H.YV),Z}}},k.prototype.useStates=function(V,I,D){if(!V.length)this.clearStates();else{var C=[],M=this.currentStates,T=V.length,A=T===M.length;if(A){for(var L=0;L<T;L++)if(V[L]!==M[L]){A=!1;break}}if(A)return;for(var L=0;L<T;L++){var Z=V[L],z=void 0;this.stateProxy&&(z=this.stateProxy(Z,V)),z||(z=this.states[Z]),z&&C.push(z)}var ut=C[T-1],ot=!!(ut&&ut.hoverLayer||D);ot&&this._toggleHoverLayerFlag(!0);var ht=this._mergeStates(C),tt=this.stateTransition;this.saveCurrentToNormalState(ht),this._applyStateObj(V.join(","),ht,this._normalState,!1,!I&&!this.__inHover&&tt&&tt.duration>0,tt);var ft=this._textContent,St=this._textGuide;ft&&ft.useStates(V,I,ot),St&&St.useStates(V,I,ot),this._updateAnimationTargets(),this.currentStates=V.slice(),this.markRedraw(),!ot&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~H.YV)}},k.prototype._updateAnimationTargets=function(){for(var V=0;V<this.animators.length;V++){var I=this.animators[V];I.targetName&&I.changeTarget(this[I.targetName])}},k.prototype.removeState=function(V){var I=(0,vt.cq)(this.currentStates,V);if(I>=0){var D=this.currentStates.slice();D.splice(I,1),this.useStates(D)}},k.prototype.replaceState=function(V,I,D){var C=this.currentStates.slice(),M=(0,vt.cq)(C,V),T=(0,vt.cq)(C,I)>=0;M>=0?T?C.splice(M,1):C[M]=I:D&&!T&&C.push(I),this.useStates(C)},k.prototype.toggleState=function(V,I){I?this.useState(V,!0):this.removeState(V)},k.prototype._mergeStates=function(V){for(var I={},D,C=0;C<V.length;C++){var M=V[C];(0,vt.l7)(I,M),M.textConfig&&(D=D||{},(0,vt.l7)(D,M.textConfig))}return D&&(I.textConfig=D),I},k.prototype._applyStateObj=function(V,I,D,C,M,T){var A=!(I&&C);I&&I.textConfig?(this.textConfig=(0,vt.l7)({},C?this.textConfig:D.textConfig),(0,vt.l7)(this.textConfig,I.textConfig)):A&&D.textConfig&&(this.textConfig=D.textConfig);for(var L={},Z=!1,z=0;z<at.length;z++){var ut=at[z],ot=M&&G[ut];I&&I[ut]!=null?ot?(Z=!0,L[ut]=I[ut]):this[ut]=I[ut]:A&&D[ut]!=null&&(ot?(Z=!0,L[ut]=D[ut]):this[ut]=D[ut])}if(!M)for(var z=0;z<this.animators.length;z++){var ht=this.animators[z],tt=ht.targetName;ht.getLoop()||ht.__changeFinalValue(tt?(I||D)[tt]:I||D)}Z&&this._transitionState(V,L,T)},k.prototype._attachComponent=function(V){if(!(V.__zr&&!V.__hostTarget)&&V!==this){var I=this.__zr;I&&V.addSelfToZr(I),V.__zr=I,V.__hostTarget=this}},k.prototype._detachComponent=function(V){V.__zr&&V.removeSelfFromZr(V.__zr),V.__zr=null,V.__hostTarget=null},k.prototype.getClipPath=function(){return this._clipPath},k.prototype.setClipPath=function(V){this._clipPath&&this._clipPath!==V&&this.removeClipPath(),this._attachComponent(V),this._clipPath=V,this.markRedraw()},k.prototype.removeClipPath=function(){var V=this._clipPath;V&&(this._detachComponent(V),this._clipPath=null,this.markRedraw())},k.prototype.getTextContent=function(){return this._textContent},k.prototype.setTextContent=function(V){var I=this._textContent;I!==V&&(I&&I!==V&&this.removeTextContent(),V.innerTransformable=new N.ZP,this._attachComponent(V),this._textContent=V,this.markRedraw())},k.prototype.setTextConfig=function(V){this.textConfig||(this.textConfig={}),(0,vt.l7)(this.textConfig,V),this.markRedraw()},k.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},k.prototype.removeTextContent=function(){var V=this._textContent;V&&(V.innerTransformable=null,this._detachComponent(V),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},k.prototype.getTextGuideLine=function(){return this._textGuide},k.prototype.setTextGuideLine=function(V){this._textGuide&&this._textGuide!==V&&this.removeTextGuideLine(),this._attachComponent(V),this._textGuide=V,this.markRedraw()},k.prototype.removeTextGuideLine=function(){var V=this._textGuide;V&&(this._detachComponent(V),this._textGuide=null,this.markRedraw())},k.prototype.markRedraw=function(){this.__dirty|=H.YV;var V=this.__zr;V&&(this.__inHover?V.refreshHover():V.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},k.prototype.dirty=function(){this.markRedraw()},k.prototype._toggleHoverLayerFlag=function(V){this.__inHover=V;var I=this._textContent,D=this._textGuide;I&&(I.__inHover=V),D&&(D.__inHover=V)},k.prototype.addSelfToZr=function(V){if(this.__zr!==V){this.__zr=V;var I=this.animators;if(I)for(var D=0;D<I.length;D++)V.animation.addAnimator(I[D]);this._clipPath&&this._clipPath.addSelfToZr(V),this._textContent&&this._textContent.addSelfToZr(V),this._textGuide&&this._textGuide.addSelfToZr(V)}},k.prototype.removeSelfFromZr=function(V){if(!!this.__zr){this.__zr=null;var I=this.animators;if(I)for(var D=0;D<I.length;D++)V.animation.removeAnimator(I[D]);this._clipPath&&this._clipPath.removeSelfFromZr(V),this._textContent&&this._textContent.removeSelfFromZr(V),this._textGuide&&this._textGuide.removeSelfFromZr(V)}},k.prototype.animate=function(V,I,D){var C=V?this[V]:this,M=new ct.Z(C,I,D);return V&&(M.targetName=V),this.addAnimator(M,V),M},k.prototype.addAnimator=function(V,I){var D=this.__zr,C=this;V.during(function(){C.updateDuringAnimation(I)}).done(function(){var M=C.animators,T=(0,vt.cq)(M,V);T>=0&&M.splice(T,1)}),this.animators.push(V),D&&D.animation.addAnimator(V),D&&D.wakeUp()},k.prototype.updateDuringAnimation=function(V){this.markRedraw()},k.prototype.stopAnimation=function(V,I){for(var D=this.animators,C=D.length,M=[],T=0;T<C;T++){var A=D[T];!V||V===A.scope?A.stop(I):M.push(A)}return this.animators=M,this},k.prototype.animateTo=function(V,I,D){g(this,V,I,D)},k.prototype.animateFrom=function(V,I,D){g(this,V,I,D,!0)},k.prototype._transitionState=function(V,I,D,C){for(var M=g(this,I,D,C),T=0;T<M.length;T++)M[T].__fromStateTransition=V},k.prototype.getBoundingRect=function(){return null},k.prototype.getPaintRect=function(){return null},k.initDefaultProps=function(){var V=k.prototype;V.type="element",V.name="",V.ignore=V.silent=V.isGroup=V.draggable=V.dragging=V.ignoreClip=V.__inHover=!1,V.__dirty=H.YV;var I={};function D(M,T,A){I[M+T+A]||(console.warn("DEPRECATED: '"+M+"' has been deprecated. use '"+T+"', '"+A+"' instead"),I[M+T+A]=!0)}function C(M,T,A,L){Object.defineProperty(V,M,{get:function(){if(!this[T]){var z=this[T]=[];Z(this,z)}return this[T]},set:function(z){this[A]=z[0],this[L]=z[1],this[T]=z,Z(this,z)}});function Z(z,ut){Object.defineProperty(ut,0,{get:function(){return z[A]},set:function(ot){z[A]=ot}}),Object.defineProperty(ut,1,{get:function(){return z[L]},set:function(ot){z[L]=ot}})}}Object.defineProperty&&(C("position","_legacyPos","x","y"),C("scale","_legacyScale","scaleX","scaleY"),C("origin","_legacyOrigin","originX","originY"))}(),k}();(0,vt.jB)(lt,dt.Z),(0,vt.jB)(lt,N.ZP);function g(k,V,I,D,C){I=I||{};var M=[];Q(k,"",k,V,I,D,M,C);var T=M.length,A=!1,L=I.done,Z=I.aborted,z=function(){A=!0,T--,T<=0&&(A?L&&L():Z&&Z())},ut=function(){T--,T<=0&&(A?L&&L():Z&&Z())};T||L&&L(),M.length>0&&I.during&&M[0].during(function(tt,ft){I.during(ft)});for(var ot=0;ot<M.length;ot++){var ht=M[ot];z&&ht.done(z),ut&&ht.aborted(ut),I.force&&ht.duration(I.duration),ht.start(I.easing)}return M}function j(k,V,I){for(var D=0;D<I;D++)k[D]=V[D]}function rt(k){return(0,vt.zG)(k[0])}function $(k,V,I){if((0,vt.zG)(V[I]))if((0,vt.zG)(k[I])||(k[I]=[]),(0,vt.fU)(V[I])){var D=V[I].length;k[I].length!==D&&(k[I]=new V[I].constructor(D),j(k[I],V[I],D))}else{var C=V[I],M=k[I],T=C.length;if(rt(C))for(var A=C[0].length,L=0;L<T;L++)M[L]?j(M[L],C[L],A):M[L]=Array.prototype.slice.call(C[L]);else j(M,C,T);M.length=C.length}else k[I]=V[I]}function O(k,V){return k===V||(0,vt.zG)(k)&&(0,vt.zG)(V)&&X(k,V)}function X(k,V){var I=k.length;if(I!==V.length)return!1;for(var D=0;D<I;D++)if(k[D]!==V[D])return!1;return!0}function Q(k,V,I,D,C,M,T,A){for(var L=(0,vt.XP)(D),Z=C.duration,z=C.delay,ut=C.additive,ot=C.setToFinal,ht=!(0,vt.Kn)(M),tt=k.animators,ft=[],St=0;St<L.length;St++){var st=L[St],xt=D[st];if(xt!=null&&I[st]!=null&&(ht||M[st]))if((0,vt.Kn)(xt)&&!(0,vt.zG)(xt)&&!(0,vt.Qq)(xt)){if(V){A||(I[st]=xt,k.updateDuringAnimation(V));continue}Q(k,st,I[st],xt,C,M&&M[st],T,A)}else ft.push(st);else A||(I[st]=xt,k.updateDuringAnimation(V),ft.push(st))}var wt=ft.length;if(!ut&&wt)for(var Dt=0;Dt<tt.length;Dt++){var It=tt[Dt];if(It.targetName===V){var Et=It.stopTracks(ft);if(Et){var zt=(0,vt.cq)(tt,It);tt.splice(zt,1)}}}if(C.force||(ft=(0,vt.hX)(ft,function(ee){return!O(D[ee],I[ee])}),wt=ft.length),wt>0||C.force&&!T.length){var Bt=void 0,Ht=void 0,$t=void 0;if(A){Ht={},ot&&(Bt={});for(var Dt=0;Dt<wt;Dt++){var st=ft[Dt];Ht[st]=I[st],ot?Bt[st]=D[st]:I[st]=D[st]}}else if(ot){$t={};for(var Dt=0;Dt<wt;Dt++){var st=ft[Dt];$t[st]=(0,ct.V)(I[st]),$(I,D,st)}}var It=new ct.Z(I,!1,!1,ut?(0,vt.hX)(tt,function(De){return De.targetName===V}):null);It.targetName=V,C.scope&&(It.scope=C.scope),ot&&Bt&&It.whenWithKeys(0,Bt,ft),$t&&It.whenWithKeys(0,$t,ft),It.whenWithKeys(Z??500,A?Ht:D,ft).delay(z||0),k.addAnimator(It,V),T.push(It)}}Jt.Z=lt},95622:function(Ce,Jt,F){"use strict";F.d(Jt,{V:function(){return j},Z:function(){return Z}});var N={linear:function(z){return z},quadraticIn:function(z){return z*z},quadraticOut:function(z){return z*(2-z)},quadraticInOut:function(z){return(z*=2)<1?.5*z*z:-.5*(--z*(z-2)-1)},cubicIn:function(z){return z*z*z},cubicOut:function(z){return--z*z*z+1},cubicInOut:function(z){return(z*=2)<1?.5*z*z*z:.5*((z-=2)*z*z+2)},quarticIn:function(z){return z*z*z*z},quarticOut:function(z){return 1- --z*z*z*z},quarticInOut:function(z){return(z*=2)<1?.5*z*z*z*z:-.5*((z-=2)*z*z*z-2)},quinticIn:function(z){return z*z*z*z*z},quinticOut:function(z){return--z*z*z*z*z+1},quinticInOut:function(z){return(z*=2)<1?.5*z*z*z*z*z:.5*((z-=2)*z*z*z*z+2)},sinusoidalIn:function(z){return 1-Math.cos(z*Math.PI/2)},sinusoidalOut:function(z){return Math.sin(z*Math.PI/2)},sinusoidalInOut:function(z){return .5*(1-Math.cos(Math.PI*z))},exponentialIn:function(z){return z===0?0:Math.pow(1024,z-1)},exponentialOut:function(z){return z===1?1:1-Math.pow(2,-10*z)},exponentialInOut:function(z){return z===0?0:z===1?1:(z*=2)<1?.5*Math.pow(1024,z-1):.5*(-Math.pow(2,-10*(z-1))+2)},circularIn:function(z){return 1-Math.sqrt(1-z*z)},circularOut:function(z){return Math.sqrt(1- --z*z)},circularInOut:function(z){return(z*=2)<1?-.5*(Math.sqrt(1-z*z)-1):.5*(Math.sqrt(1-(z-=2)*z)+1)},elasticIn:function(z){var ut,ot=.1,ht=.4;return z===0?0:z===1?1:(!ot||ot<1?(ot=1,ut=ht/4):ut=ht*Math.asin(1/ot)/(2*Math.PI),-(ot*Math.pow(2,10*(z-=1))*Math.sin((z-ut)*(2*Math.PI)/ht)))},elasticOut:function(z){var ut,ot=.1,ht=.4;return z===0?0:z===1?1:(!ot||ot<1?(ot=1,ut=ht/4):ut=ht*Math.asin(1/ot)/(2*Math.PI),ot*Math.pow(2,-10*z)*Math.sin((z-ut)*(2*Math.PI)/ht)+1)},elasticInOut:function(z){var ut,ot=.1,ht=.4;return z===0?0:z===1?1:(!ot||ot<1?(ot=1,ut=ht/4):ut=ht*Math.asin(1/ot)/(2*Math.PI),(z*=2)<1?-.5*(ot*Math.pow(2,10*(z-=1))*Math.sin((z-ut)*(2*Math.PI)/ht)):ot*Math.pow(2,-10*(z-=1))*Math.sin((z-ut)*(2*Math.PI)/ht)*.5+1)},backIn:function(z){var ut=1.70158;return z*z*((ut+1)*z-ut)},backOut:function(z){var ut=1.70158;return--z*z*((ut+1)*z+ut)+1},backInOut:function(z){var ut=2.5949095;return(z*=2)<1?.5*(z*z*((ut+1)*z-ut)):.5*((z-=2)*z*((ut+1)*z+ut)+2)},bounceIn:function(z){return 1-N.bounceOut(1-z)},bounceOut:function(z){return z<1/2.75?7.5625*z*z:z<2/2.75?7.5625*(z-=1.5/2.75)*z+.75:z<2.5/2.75?7.5625*(z-=2.25/2.75)*z+.9375:7.5625*(z-=2.625/2.75)*z+.984375},bounceInOut:function(z){return z<.5?N.bounceIn(z*2)*.5:N.bounceOut(z*2-1)*.5+.5}},ct=N,K=F(33051),dt=F(75188),gt=function(){function z(ut){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=ut.life||1e3,this._delay=ut.delay||0,this.loop=ut.loop||!1,this.onframe=ut.onframe||K.ZT,this.ondestroy=ut.ondestroy||K.ZT,this.onrestart=ut.onrestart||K.ZT,ut.easing&&this.setEasing(ut.easing)}return z.prototype.step=function(ut,ot){if(this._inited||(this._startTime=ut+this._delay,this._inited=!0),this._paused){this._pausedTime+=ot;return}var ht=this._life,tt=ut-this._startTime-this._pausedTime,ft=tt/ht;ft<0&&(ft=0),ft=Math.min(ft,1);var St=this.easingFunc,st=St?St(ft):ft;if(this.onframe(st),ft===1)if(this.loop){var xt=tt%ht;this._startTime=ut-xt,this._pausedTime=0,this.onrestart()}else return!0;return!1},z.prototype.pause=function(){this._paused=!0},z.prototype.resume=function(){this._paused=!1},z.prototype.setEasing=function(ut){this.easing=ut,this.easingFunc=(0,K.mf)(ut)?ut:ct[ut]||(0,dt.H)(ut)},z}(),vt=gt,it=F(21092),et=F(24839),H=Array.prototype.slice;function J(z,ut,ot){return(ut-z)*ot+z}function at(z,ut,ot,ht){for(var tt=ut.length,ft=0;ft<tt;ft++)z[ft]=J(ut[ft],ot[ft],ht);return z}function G(z,ut,ot,ht){for(var tt=ut.length,ft=tt&&ut[0].length,St=0;St<tt;St++){z[St]||(z[St]=[]);for(var st=0;st<ft;st++)z[St][st]=J(ut[St][st],ot[St][st],ht)}return z}function U(z,ut,ot,ht){for(var tt=ut.length,ft=0;ft<tt;ft++)z[ft]=ut[ft]+ot[ft]*ht;return z}function W(z,ut,ot,ht){for(var tt=ut.length,ft=tt&&ut[0].length,St=0;St<tt;St++){z[St]||(z[St]=[]);for(var st=0;st<ft;st++)z[St][st]=ut[St][st]+ot[St][st]*ht}return z}function lt(z,ut){for(var ot=z.length,ht=ut.length,tt=ot>ht?ut:z,ft=Math.min(ot,ht),St=tt[ft-1]||{color:[0,0,0,0],offset:0},st=ft;st<Math.max(ot,ht);st++)tt.push({offset:St.offset,color:St.color.slice()})}function g(z,ut,ot){var ht=z,tt=ut;if(!(!ht.push||!tt.push)){var ft=ht.length,St=tt.length;if(ft!==St){var st=ft>St;if(st)ht.length=St;else for(var xt=ft;xt<St;xt++)ht.push(ot===1?tt[xt]:H.call(tt[xt]))}for(var wt=ht[0]&&ht[0].length,xt=0;xt<ht.length;xt++)if(ot===1)isNaN(ht[xt])&&(ht[xt]=tt[xt]);else for(var Dt=0;Dt<wt;Dt++)isNaN(ht[xt][Dt])&&(ht[xt][Dt]=tt[xt][Dt])}}function j(z){if((0,K.zG)(z)){var ut=z.length;if((0,K.zG)(z[0])){for(var ot=[],ht=0;ht<ut;ht++)ot.push(H.call(z[ht]));return ot}return H.call(z)}return z}function rt(z){return z[0]=Math.floor(z[0])||0,z[1]=Math.floor(z[1])||0,z[2]=Math.floor(z[2])||0,z[3]=z[3]==null?1:z[3],"rgba("+z.join(",")+")"}function $(z){return(0,K.zG)(z&&z[0])?2:1}var O=0,X=1,Q=2,k=3,V=4,I=5,D=6;function C(z){return z===V||z===I}function M(z){return z===X||z===Q}var T=[0,0,0,0],A=function(){function z(ut){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=ut}return z.prototype.isFinished=function(){return this._finished},z.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},z.prototype.needsAnimate=function(){return this.keyframes.length>=1},z.prototype.getAdditiveTrack=function(){return this._additiveTrack},z.prototype.addKeyframe=function(ut,ot,ht){this._needsSort=!0;var tt=this.keyframes,ft=tt.length,St=!1,st=D,xt=ot;if((0,K.zG)(ot)){var wt=$(ot);st=wt,(wt===1&&!(0,K.hj)(ot[0])||wt===2&&!(0,K.hj)(ot[0][0]))&&(St=!0)}else if((0,K.hj)(ot)&&!(0,K.Bu)(ot))st=O;else if((0,K.HD)(ot))if(!isNaN(+ot))st=O;else{var Dt=it.parse(ot);Dt&&(xt=Dt,st=k)}else if((0,K.Qq)(ot)){var It=(0,K.l7)({},xt);It.colorStops=(0,K.UI)(ot.colorStops,function(zt){return{offset:zt.offset,color:it.parse(zt.color)}}),(0,et.I1)(ot)?st=V:(0,et.gO)(ot)&&(st=I),xt=It}ft===0?this.valType=st:(st!==this.valType||st===D)&&(St=!0),this.discrete=this.discrete||St;var Et={time:ut,value:xt,rawValue:ot,percent:0};return ht&&(Et.easing=ht,Et.easingFunc=(0,K.mf)(ht)?ht:ct[ht]||(0,dt.H)(ht)),tt.push(Et),Et},z.prototype.prepare=function(ut,ot){var ht=this.keyframes;this._needsSort&&ht.sort(function(Ht,$t){return Ht.time-$t.time});for(var tt=this.valType,ft=ht.length,St=ht[ft-1],st=this.discrete,xt=M(tt),wt=C(tt),Dt=0;Dt<ft;Dt++){var It=ht[Dt],Et=It.value,zt=St.value;It.percent=It.time/ut,st||(xt&&Dt!==ft-1?g(Et,zt,tt):wt&&lt(Et.colorStops,zt.colorStops))}if(!st&&tt!==I&&ot&&this.needsAnimate()&&ot.needsAnimate()&&tt===ot.valType&&!ot._finished){this._additiveTrack=ot;for(var Bt=ht[0].value,Dt=0;Dt<ft;Dt++)tt===O?ht[Dt].additiveValue=ht[Dt].value-Bt:tt===k?ht[Dt].additiveValue=U([],ht[Dt].value,Bt,-1):M(tt)&&(ht[Dt].additiveValue=tt===X?U([],ht[Dt].value,Bt,-1):W([],ht[Dt].value,Bt,-1))}},z.prototype.step=function(ut,ot){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var ht=this._additiveTrack!=null,tt=ht?"additiveValue":"value",ft=this.valType,St=this.keyframes,st=St.length,xt=this.propName,wt=ft===k,Dt,It=this._lastFr,Et=Math.min,zt,Bt;if(st===1)zt=Bt=St[0];else{if(ot<0)Dt=0;else if(ot<this._lastFrP){var Ht=Et(It+1,st-1);for(Dt=Ht;Dt>=0&&!(St[Dt].percent<=ot);Dt--);Dt=Et(Dt,st-2)}else{for(Dt=It;Dt<st&&!(St[Dt].percent>ot);Dt++);Dt=Et(Dt-1,st-2)}Bt=St[Dt+1],zt=St[Dt]}if(!!(zt&&Bt)){this._lastFr=Dt,this._lastFrP=ot;var $t=Bt.percent-zt.percent,ee=$t===0?1:Et((ot-zt.percent)/$t,1);Bt.easingFunc&&(ee=Bt.easingFunc(ee));var De=ht?this._additiveValue:wt?T:ut[xt];if((M(ft)||wt)&&!De&&(De=this._additiveValue=[]),this.discrete)ut[xt]=ee<1?zt.rawValue:Bt.rawValue;else if(M(ft))ft===X?at(De,zt[tt],Bt[tt],ee):G(De,zt[tt],Bt[tt],ee);else if(C(ft)){var Se=zt[tt],Be=Bt[tt],Ft=ft===V;ut[xt]={type:Ft?"linear":"radial",x:J(Se.x,Be.x,ee),y:J(Se.y,Be.y,ee),colorStops:(0,K.UI)(Se.colorStops,function(At,Kt){var pe=Be.colorStops[Kt];return{offset:J(At.offset,pe.offset,ee),color:rt(at([],At.color,pe.color,ee))}}),global:Be.global},Ft?(ut[xt].x2=J(Se.x2,Be.x2,ee),ut[xt].y2=J(Se.y2,Be.y2,ee)):ut[xt].r=J(Se.r,Be.r,ee)}else if(wt)at(De,zt[tt],Bt[tt],ee),ht||(ut[xt]=rt(De));else{var Tt=J(zt[tt],Bt[tt],ee);ht?this._additiveValue=Tt:ut[xt]=Tt}ht&&this._addToTarget(ut)}}},z.prototype._addToTarget=function(ut){var ot=this.valType,ht=this.propName,tt=this._additiveValue;ot===O?ut[ht]=ut[ht]+tt:ot===k?(it.parse(ut[ht],T),U(T,T,tt,1),ut[ht]=rt(T)):ot===X?U(ut[ht],ut[ht],tt,1):ot===Q&&W(ut[ht],ut[ht],tt,1)},z}(),L=function(){function z(ut,ot,ht,tt){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=ut,this._loop=ot,ot&&tt){(0,K.H)("Can' use additive animation on looped animation.");return}this._additiveAnimators=tt,this._allowDiscrete=ht}return z.prototype.getMaxTime=function(){return this._maxTime},z.prototype.getDelay=function(){return this._delay},z.prototype.getLoop=function(){return this._loop},z.prototype.getTarget=function(){return this._target},z.prototype.changeTarget=function(ut){this._target=ut},z.prototype.when=function(ut,ot,ht){return this.whenWithKeys(ut,ot,(0,K.XP)(ot),ht)},z.prototype.whenWithKeys=function(ut,ot,ht,tt){for(var ft=this._tracks,St=0;St<ht.length;St++){var st=ht[St],xt=ft[st];if(!xt){xt=ft[st]=new A(st);var wt=void 0,Dt=this._getAdditiveTrack(st);if(Dt){var It=Dt.keyframes,Et=It[It.length-1];wt=Et&&Et.value,Dt.valType===k&&wt&&(wt=rt(wt))}else wt=this._target[st];if(wt==null)continue;ut>0&&xt.addKeyframe(0,j(wt),tt),this._trackKeys.push(st)}xt.addKeyframe(ut,j(ot[st]),tt)}return this._maxTime=Math.max(this._maxTime,ut),this},z.prototype.pause=function(){this._clip.pause(),this._paused=!0},z.prototype.resume=function(){this._clip.resume(),this._paused=!1},z.prototype.isPaused=function(){return!!this._paused},z.prototype.duration=function(ut){return this._maxTime=ut,this._force=!0,this},z.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var ut=this._doneCbs;if(ut)for(var ot=ut.length,ht=0;ht<ot;ht++)ut[ht].call(this)},z.prototype._abortedCallback=function(){this._setTracksFinished();var ut=this.animation,ot=this._abortedCbs;if(ut&&ut.removeClip(this._clip),this._clip=null,ot)for(var ht=0;ht<ot.length;ht++)ot[ht].call(this)},z.prototype._setTracksFinished=function(){for(var ut=this._tracks,ot=this._trackKeys,ht=0;ht<ot.length;ht++)ut[ot[ht]].setFinished()},z.prototype._getAdditiveTrack=function(ut){var ot,ht=this._additiveAnimators;if(ht)for(var tt=0;tt<ht.length;tt++){var ft=ht[tt].getTrack(ut);ft&&(ot=ft)}return ot},z.prototype.start=function(ut){if(!(this._started>0)){this._started=1;for(var ot=this,ht=[],tt=this._maxTime||0,ft=0;ft<this._trackKeys.length;ft++){var St=this._trackKeys[ft],st=this._tracks[St],xt=this._getAdditiveTrack(St),wt=st.keyframes,Dt=wt.length;if(st.prepare(tt,xt),st.needsAnimate())if(!this._allowDiscrete&&st.discrete){var It=wt[Dt-1];It&&(ot._target[st.propName]=It.rawValue),st.setFinished()}else ht.push(st)}if(ht.length||this._force){var Et=new vt({life:tt,loop:this._loop,delay:this._delay||0,onframe:function(zt){ot._started=2;var Bt=ot._additiveAnimators;if(Bt){for(var Ht=!1,$t=0;$t<Bt.length;$t++)if(Bt[$t]._clip){Ht=!0;break}Ht||(ot._additiveAnimators=null)}for(var $t=0;$t<ht.length;$t++)ht[$t].step(ot._target,zt);var ee=ot._onframeCbs;if(ee)for(var $t=0;$t<ee.length;$t++)ee[$t](ot._target,zt)},ondestroy:function(){ot._doneCallback()}});this._clip=Et,this.animation&&this.animation.addClip(Et),ut&&Et.setEasing(ut)}else this._doneCallback();return this}},z.prototype.stop=function(ut){if(!!this._clip){var ot=this._clip;ut&&ot.onframe(1),this._abortedCallback()}},z.prototype.delay=function(ut){return this._delay=ut,this},z.prototype.during=function(ut){return ut&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(ut)),this},z.prototype.done=function(ut){return ut&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(ut)),this},z.prototype.aborted=function(ut){return ut&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(ut)),this},z.prototype.getClip=function(){return this._clip},z.prototype.getTrack=function(ut){return this._tracks[ut]},z.prototype.getTracks=function(){var ut=this;return(0,K.UI)(this._trackKeys,function(ot){return ut._tracks[ot]})},z.prototype.stopTracks=function(ut,ot){if(!ut.length||!this._clip)return!0;for(var ht=this._tracks,tt=this._trackKeys,ft=0;ft<ut.length;ft++){var St=ht[ut[ft]];St&&!St.isFinished()&&(ot?St.step(this._target,1):this._started===1&&St.step(this._target,0),St.setFinished())}for(var st=!0,ft=0;ft<tt.length;ft++)if(!ht[tt[ft]].isFinished()){st=!1;break}return st&&this._abortedCallback(),st},z.prototype.saveTo=function(ut,ot,ht){if(!!ut){ot=ot||this._trackKeys;for(var tt=0;tt<ot.length;tt++){var ft=ot[tt],St=this._tracks[ft];if(!(!St||St.isFinished())){var st=St.keyframes,xt=st[ht?0:st.length-1];xt&&(ut[ft]=j(xt.rawValue))}}}},z.prototype.__changeFinalValue=function(ut,ot){ot=ot||(0,K.XP)(ut);for(var ht=0;ht<ot.length;ht++){var tt=ot[ht],ft=this._tracks[tt];if(!!ft){var St=ft.keyframes;if(St.length>1){var st=St.pop();ft.addKeyframe(st.time,ut[tt]),ft.prepare(this._maxTime,ft.getAdditiveTrack())}}}},z}(),Z=L},75188:function(Ce,Jt,F){"use strict";F.d(Jt,{H:function(){return dt}});var N=F(29023),ct=F(33051),K=/cubic-bezier\(([0-9,\.e ]+)\)/;function dt(gt){var vt=gt&&K.exec(gt);if(vt){var it=vt[1].split(","),et=+(0,ct.fy)(it[0]),H=+(0,ct.fy)(it[1]),J=+(0,ct.fy)(it[2]),at=+(0,ct.fy)(it[3]);if(isNaN(et+H+J+at))return;var G=[];return function(U){return U<=0?0:U>=1?1:(0,N.kD)(0,et,J,1,U,G)&&(0,N.af)(0,H,at,1,G[0])}}}},22795:function(Ce,Jt,F){"use strict";var N=F(66387),ct;ct=N.Z.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(K){return setTimeout(K,16)},Jt.Z=ct},50810:function(Ce,Jt,F){"use strict";F.d(Jt,{a:function(){return K}});var N=F(33051);function ct(dt,gt){return!dt||dt==="solid"||!(gt>0)?null:dt==="dashed"?[4*gt,2*gt]:dt==="dotted"?[gt]:(0,N.hj)(dt)?[dt]:(0,N.kJ)(dt)?dt:null}function K(dt){var gt=dt.style,vt=gt.lineDash&&gt.lineWidth>0&&ct(gt.lineDash,gt.lineWidth),it=gt.lineDashOffset;if(vt){var et=gt.strokeNoScale&&dt.getLineScale?dt.getLineScale():1;et&&et!==1&&(vt=(0,N.UI)(vt,function(H){return H/et}),it/=et)}return[vt,it]}},97772:function(Ce,Jt,F){"use strict";F.d(Jt,{Dm:function(){return ft},RV:function(){return tt},RZ:function(){return rt}});var N=F(7719),ct=F(14014),K=F(8007),dt=F(5787),gt=F(327),vt=F(44535),it=F(71505),et=F(33051),H=F(50810),J=F(14414),at=F(23132),G=new ct.Z(!0);function U(st){var xt=st.stroke;return!(xt==null||xt==="none"||!(st.lineWidth>0))}function W(st){return typeof st=="string"&&st!=="none"}function lt(st){var xt=st.fill;return xt!=null&&xt!=="none"}function g(st,xt){if(xt.fillOpacity!=null&&xt.fillOpacity!==1){var wt=st.globalAlpha;st.globalAlpha=xt.fillOpacity*xt.opacity,st.fill(),st.globalAlpha=wt}else st.fill()}function j(st,xt){if(xt.strokeOpacity!=null&&xt.strokeOpacity!==1){var wt=st.globalAlpha;st.globalAlpha=xt.strokeOpacity*xt.opacity,st.stroke(),st.globalAlpha=wt}else st.stroke()}function rt(st,xt,wt){var Dt=(0,K.Gq)(xt.image,xt.__image,wt);if((0,K.v5)(Dt)){var It=st.createPattern(Dt,xt.repeat||"repeat");if(typeof DOMMatrix=="function"&&It&&It.setTransform){var Et=new DOMMatrix;Et.translateSelf(xt.x||0,xt.y||0),Et.rotateSelf(0,0,(xt.rotation||0)*et.I3),Et.scaleSelf(xt.scaleX||1,xt.scaleY||1),It.setTransform(Et)}return It}}function $(st,xt,wt,Dt){var It,Et=U(wt),zt=lt(wt),Bt=wt.strokePercent,Ht=Bt<1,$t=!xt.path;(!xt.silent||Ht)&&$t&&xt.createPathProxy();var ee=xt.path||G,De=xt.__dirty;if(!Dt){var Se=wt.fill,Be=wt.stroke,Ft=zt&&!!Se.colorStops,Tt=Et&&!!Be.colorStops,At=zt&&!!Se.image,Kt=Et&&!!Be.image,pe=void 0,Oe=void 0,Pe=void 0,vr=void 0,Lr=void 0;(Ft||Tt)&&(Lr=xt.getBoundingRect()),Ft&&(pe=De?(0,dt.ZF)(st,Se,Lr):xt.__canvasFillGradient,xt.__canvasFillGradient=pe),Tt&&(Oe=De?(0,dt.ZF)(st,Be,Lr):xt.__canvasStrokeGradient,xt.__canvasStrokeGradient=Oe),At&&(Pe=De||!xt.__canvasFillPattern?rt(st,Se,xt):xt.__canvasFillPattern,xt.__canvasFillPattern=Pe),Kt&&(vr=De||!xt.__canvasStrokePattern?rt(st,Be,xt):xt.__canvasStrokePattern,xt.__canvasStrokePattern=Pe),Ft?st.fillStyle=pe:At&&(Pe?st.fillStyle=Pe:zt=!1),Tt?st.strokeStyle=Oe:Kt&&(vr?st.strokeStyle=vr:Et=!1)}var nr=xt.getGlobalScale();ee.setScale(nr[0],nr[1],xt.segmentIgnoreThreshold);var qe,lr;st.setLineDash&&wt.lineDash&&(It=(0,H.a)(xt),qe=It[0],lr=It[1]);var Yt=!0;($t||De&J.RH)&&(ee.setDPR(st.dpr),Ht?ee.setContext(null):(ee.setContext(st),Yt=!1),ee.reset(),xt.buildPath(ee,xt.shape,Dt),ee.toStatic(),xt.pathUpdated()),Yt&&ee.rebuildPath(st,Ht?Bt:1),qe&&(st.setLineDash(qe),st.lineDashOffset=lr),Dt||(wt.strokeFirst?(Et&&j(st,wt),zt&&g(st,wt)):(zt&&g(st,wt),Et&&j(st,wt))),qe&&st.setLineDash([])}function O(st,xt,wt){var Dt=xt.__image=(0,K.Gq)(wt.image,xt.__image,xt,xt.onload);if(!(!Dt||!(0,K.v5)(Dt))){var It=wt.x||0,Et=wt.y||0,zt=xt.getWidth(),Bt=xt.getHeight(),Ht=Dt.width/Dt.height;if(zt==null&&Bt!=null?zt=Bt*Ht:Bt==null&&zt!=null?Bt=zt/Ht:zt==null&&Bt==null&&(zt=Dt.width,Bt=Dt.height),wt.sWidth&&wt.sHeight){var $t=wt.sx||0,ee=wt.sy||0;st.drawImage(Dt,$t,ee,wt.sWidth,wt.sHeight,It,Et,zt,Bt)}else if(wt.sx&&wt.sy){var $t=wt.sx,ee=wt.sy,De=zt-$t,Se=Bt-ee;st.drawImage(Dt,$t,ee,De,Se,It,Et,zt,Bt)}else st.drawImage(Dt,It,Et,zt,Bt)}}function X(st,xt,wt){var Dt,It=wt.text;if(It!=null&&(It+=""),It){st.font=wt.font||at.Uo,st.textAlign=wt.textAlign,st.textBaseline=wt.textBaseline;var Et=void 0,zt=void 0;st.setLineDash&&wt.lineDash&&(Dt=(0,H.a)(xt),Et=Dt[0],zt=Dt[1]),Et&&(st.setLineDash(Et),st.lineDashOffset=zt),wt.strokeFirst?(U(wt)&&st.strokeText(It,wt.x,wt.y),lt(wt)&&st.fillText(It,wt.x,wt.y)):(lt(wt)&&st.fillText(It,wt.x,wt.y),U(wt)&&st.strokeText(It,wt.x,wt.y)),Et&&st.setLineDash([])}}var Q=["shadowBlur","shadowOffsetX","shadowOffsetY"],k=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function V(st,xt,wt,Dt,It){var Et=!1;if(!Dt&&(wt=wt||{},xt===wt))return!1;if(Dt||xt.opacity!==wt.opacity){ot(st,It),Et=!0;var zt=Math.max(Math.min(xt.opacity,1),0);st.globalAlpha=isNaN(zt)?N.tj.opacity:zt}(Dt||xt.blend!==wt.blend)&&(Et||(ot(st,It),Et=!0),st.globalCompositeOperation=xt.blend||N.tj.blend);for(var Bt=0;Bt<Q.length;Bt++){var Ht=Q[Bt];(Dt||xt[Ht]!==wt[Ht])&&(Et||(ot(st,It),Et=!0),st[Ht]=st.dpr*(xt[Ht]||0))}return(Dt||xt.shadowColor!==wt.shadowColor)&&(Et||(ot(st,It),Et=!0),st.shadowColor=xt.shadowColor||N.tj.shadowColor),Et}function I(st,xt,wt,Dt,It){var Et=ht(xt,It.inHover),zt=Dt?null:wt&&ht(wt,It.inHover)||{};if(Et===zt)return!1;var Bt=V(st,Et,zt,Dt,It);if((Dt||Et.fill!==zt.fill)&&(Bt||(ot(st,It),Bt=!0),W(Et.fill)&&(st.fillStyle=Et.fill)),(Dt||Et.stroke!==zt.stroke)&&(Bt||(ot(st,It),Bt=!0),W(Et.stroke)&&(st.strokeStyle=Et.stroke)),(Dt||Et.opacity!==zt.opacity)&&(Bt||(ot(st,It),Bt=!0),st.globalAlpha=Et.opacity==null?1:Et.opacity),xt.hasStroke()){var Ht=Et.lineWidth,$t=Ht/(Et.strokeNoScale&&xt.getLineScale?xt.getLineScale():1);st.lineWidth!==$t&&(Bt||(ot(st,It),Bt=!0),st.lineWidth=$t)}for(var ee=0;ee<k.length;ee++){var De=k[ee],Se=De[0];(Dt||Et[Se]!==zt[Se])&&(Bt||(ot(st,It),Bt=!0),st[Se]=Et[Se]||De[1])}return Bt}function D(st,xt,wt,Dt,It){return V(st,ht(xt,It.inHover),wt&&ht(wt,It.inHover),Dt,It)}function C(st,xt){var wt=xt.transform,Dt=st.dpr||1;wt?st.setTransform(Dt*wt[0],Dt*wt[1],Dt*wt[2],Dt*wt[3],Dt*wt[4],Dt*wt[5]):st.setTransform(Dt,0,0,Dt,0,0)}function M(st,xt,wt){for(var Dt=!1,It=0;It<st.length;It++){var Et=st[It];Dt=Dt||Et.isZeroArea(),C(xt,Et),xt.beginPath(),Et.buildPath(xt,Et.shape),xt.clip()}wt.allClipped=Dt}function T(st,xt){return st&&xt?st[0]!==xt[0]||st[1]!==xt[1]||st[2]!==xt[2]||st[3]!==xt[3]||st[4]!==xt[4]||st[5]!==xt[5]:!(!st&&!xt)}var A=1,L=2,Z=3,z=4;function ut(st){var xt=lt(st),wt=U(st);return!(st.lineDash||!(+xt^+wt)||xt&&typeof st.fill!="string"||wt&&typeof st.stroke!="string"||st.strokePercent<1||st.strokeOpacity<1||st.fillOpacity<1)}function ot(st,xt){xt.batchFill&&st.fill(),xt.batchStroke&&st.stroke(),xt.batchFill="",xt.batchStroke=""}function ht(st,xt){return xt&&st.__hoverStyle||st.style}function tt(st,xt){ft(st,xt,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function ft(st,xt,wt,Dt){var It=xt.transform;if(!xt.shouldBePainted(wt.viewWidth,wt.viewHeight,!1,!1)){xt.__dirty&=~J.YV,xt.__isRendered=!1;return}var Et=xt.__clipPaths,zt=wt.prevElClipPaths,Bt=!1,Ht=!1;if((!zt||(0,dt.cF)(Et,zt))&&(zt&&zt.length&&(ot(st,wt),st.restore(),Ht=Bt=!0,wt.prevElClipPaths=null,wt.allClipped=!1,wt.prevEl=null),Et&&Et.length&&(ot(st,wt),st.save(),M(Et,st,wt),Bt=!0),wt.prevElClipPaths=Et),wt.allClipped){xt.__isRendered=!1;return}xt.beforeBrush&&xt.beforeBrush(),xt.innerBeforeBrush();var $t=wt.prevEl;$t||(Ht=Bt=!0);var ee=xt instanceof gt.ZP&&xt.autoBatch&&ut(xt.style);Bt||T(It,$t.transform)?(ot(st,wt),C(st,xt)):ee||ot(st,wt);var De=ht(xt,wt.inHover);xt instanceof gt.ZP?(wt.lastDrawType!==A&&(Ht=!0,wt.lastDrawType=A),I(st,xt,$t,Ht,wt),(!ee||!wt.batchFill&&!wt.batchStroke)&&st.beginPath(),$(st,xt,De,ee),ee&&(wt.batchFill=De.fill||"",wt.batchStroke=De.stroke||"")):xt instanceof it.Z?(wt.lastDrawType!==Z&&(Ht=!0,wt.lastDrawType=Z),I(st,xt,$t,Ht,wt),X(st,xt,De)):xt instanceof vt.ZP?(wt.lastDrawType!==L&&(Ht=!0,wt.lastDrawType=L),D(st,xt,$t,Ht,wt),O(st,xt,De)):xt.getTemporalDisplayables&&(wt.lastDrawType!==z&&(Ht=!0,wt.lastDrawType=z),St(st,xt,wt)),ee&&Dt&&ot(st,wt),xt.innerAfterBrush(),xt.afterBrush&&xt.afterBrush(),wt.prevEl=xt,xt.__dirty=0,xt.__isRendered=!0}function St(st,xt,wt){var Dt=xt.getDisplayables(),It=xt.getTemporalDisplayables();st.save();var Et={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:wt.viewWidth,viewHeight:wt.viewHeight,inHover:wt.inHover},zt,Bt;for(zt=xt.getCursor(),Bt=Dt.length;zt<Bt;zt++){var Ht=Dt[zt];Ht.beforeBrush&&Ht.beforeBrush(),Ht.innerBeforeBrush(),ft(st,Ht,Et,zt===Bt-1),Ht.innerAfterBrush(),Ht.afterBrush&&Ht.afterBrush(),Et.prevEl=Ht}for(var $t=0,ee=It.length;$t<ee;$t++){var Ht=It[$t];Ht.beforeBrush&&Ht.beforeBrush(),Ht.innerBeforeBrush(),ft(st,Ht,Et,$t===ee-1),Ht.innerAfterBrush(),Ht.afterBrush&&Ht.afterBrush(),Et.prevEl=Ht}xt.clearTemporalDisplayables(),xt.notClear=!0,st.restore()}},5787:function(Ce,Jt,F){"use strict";F.d(Jt,{ZF:function(){return dt},ap:function(){return it},cF:function(){return gt}});function N(et){return isFinite(et)}function ct(et,H,J){var at=H.x==null?0:H.x,G=H.x2==null?1:H.x2,U=H.y==null?0:H.y,W=H.y2==null?0:H.y2;H.global||(at=at*J.width+J.x,G=G*J.width+J.x,U=U*J.height+J.y,W=W*J.height+J.y),at=N(at)?at:0,G=N(G)?G:1,U=N(U)?U:0,W=N(W)?W:0;var lt=et.createLinearGradient(at,U,G,W);return lt}function K(et,H,J){var at=J.width,G=J.height,U=Math.min(at,G),W=H.x==null?.5:H.x,lt=H.y==null?.5:H.y,g=H.r==null?.5:H.r;H.global||(W=W*at+J.x,lt=lt*G+J.y,g=g*U),W=N(W)?W:.5,lt=N(lt)?lt:.5,g=g>=0&&N(g)?g:.5;var j=et.createRadialGradient(W,lt,0,W,lt,g);return j}function dt(et,H,J){for(var at=H.type==="radial"?K(et,H,J):ct(et,H,J),G=H.colorStops,U=0;U<G.length;U++)at.addColorStop(G[U].offset,G[U].color);return at}function gt(et,H){if(et===H||!et&&!H)return!1;if(!et||!H||et.length!==H.length)return!0;for(var J=0;J<et.length;J++)if(et[J]!==H[J])return!0;return!1}function vt(et){return parseInt(et,10)}function it(et,H,J){var at=["width","height"][H],G=["clientWidth","clientHeight"][H],U=["paddingLeft","paddingTop"][H],W=["paddingRight","paddingBottom"][H];if(J[at]!=null&&J[at]!=="auto")return parseFloat(J[at]);var lt=document.defaultView.getComputedStyle(et);return(et[G]||vt(lt[at])||vt(et.style[at]))-(vt(lt[U])||0)-(vt(lt[W])||0)|0}},4990:function(Ce,Jt,F){"use strict";F.d(Jt,{Ak:function(){return gt},GD:function(){return it},KL:function(){return dt},iv:function(){return et},vU:function(){return vt}});var N=F(66387),ct=1;N.Z.hasGlobalWindow&&(ct=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var K=0,dt=ct,gt=.4,vt="#333",it="#ccc",et="#eee"},33640:function(Ce,Jt,F){"use strict";F.d(Jt,{m:function(){return N}});function N(ct,K,dt,gt,vt,it,et){if(vt===0)return!1;var H=vt,J=0,at=ct;if(et>K+H&&et>gt+H||et<K-H&&et<gt-H||it>ct+H&&it>dt+H||it<ct-H&&it<dt-H)return!1;if(ct!==dt)J=(K-gt)/(ct-dt),at=(ct*gt-dt*K)/(ct-dt);else return Math.abs(it-ct)<=H/2;var G=J*it-et+at,U=G*G/(J*J+1);return U<=H/2*H/2}},40765:function(Ce,Jt,F){"use strict";F.d(Jt,{X:function(){return dt}});var N=F(47637),ct=1e-8;function K(gt,vt){return Math.abs(gt-vt)<ct}function dt(gt,vt,it){var et=0,H=gt[0];if(!H)return!1;for(var J=1;J<gt.length;J++){var at=gt[J];et+=(0,N.Z)(H[0],H[1],at[0],at[1],vt,it),H=at}var G=gt[0];return(!K(H[0],G[0])||!K(H[1],G[1]))&&(et+=(0,N.Z)(H[0],H[1],G[0],G[1],vt,it)),et!==0}},25674:function(Ce,Jt,F){"use strict";F.d(Jt,{m:function(){return ct}});var N=F(29023);function ct(K,dt,gt,vt,it,et,H,J,at){if(H===0)return!1;var G=H;if(at>dt+G&&at>vt+G&&at>et+G||at<dt-G&&at<vt-G&&at<et-G||J>K+G&&J>gt+G&&J>it+G||J<K-G&&J<gt-G&&J<it-G)return!1;var U=(0,N.Wr)(K,dt,gt,vt,it,et,J,at,null);return U<=G/2}},80423:function(Ce,Jt,F){"use strict";F.d(Jt,{Dp:function(){return J},GM:function(){return G},M3:function(){return et},dz:function(){return gt},lP:function(){return it},mU:function(){return H},wI:function(){return U}});var N=F(60479),ct=F(92528),K=F(23132),dt={};function gt(W,lt){lt=lt||K.Uo;var g=dt[lt];g||(g=dt[lt]=new ct.ZP(500));var j=g.get(W);return j==null&&(j=K.qW.measureText(W,lt).width,g.put(W,j)),j}function vt(W,lt,g,j){var rt=gt(W,lt),$=J(lt),O=et(0,rt,g),X=H(0,$,j),Q=new N.Z(O,X,rt,$);return Q}function it(W,lt,g,j){var rt=((W||"")+"").split(`
`),$=rt.length;if($===1)return vt(rt[0],lt,g,j);for(var O=new N.Z(0,0,0,0),X=0;X<rt.length;X++){var Q=vt(rt[X],lt,g,j);X===0?O.copy(Q):O.union(Q)}return O}function et(W,lt,g){return g==="right"?W-=lt:g==="center"&&(W-=lt/2),W}function H(W,lt,g){return g==="middle"?W-=lt/2:g==="bottom"&&(W-=lt),W}function J(W){return gt("\u56FD",W)}function at(W,lt){return platformApi.measureText(W,lt)}function G(W,lt){return typeof W=="string"?W.lastIndexOf("%")>=0?parseFloat(W)/100*lt:parseFloat(W):W}function U(W,lt,g){var j=lt.position||"inside",rt=lt.distance!=null?lt.distance:5,$=g.height,O=g.width,X=$/2,Q=g.x,k=g.y,V="left",I="top";if(j instanceof Array)Q+=G(j[0],g.width),k+=G(j[1],g.height),V=null,I=null;else switch(j){case"left":Q-=rt,k+=X,V="right",I="middle";break;case"right":Q+=rt+O,k+=X,I="middle";break;case"top":Q+=O/2,k-=rt,V="center",I="bottom";break;case"bottom":Q+=O/2,k+=$+rt,V="center";break;case"inside":Q+=O/2,k+=X,V="center",I="middle";break;case"insideLeft":Q+=rt,k+=X,I="middle";break;case"insideRight":Q+=O-rt,k+=X,V="right",I="middle";break;case"insideTop":Q+=O/2,k+=rt,V="center";break;case"insideBottom":Q+=O/2,k+=$-rt,V="center",I="bottom";break;case"insideTopLeft":Q+=rt,k+=rt;break;case"insideTopRight":Q+=O-rt,k+=rt,V="right";break;case"insideBottomLeft":Q+=rt,k+=$-rt,I="bottom";break;case"insideBottomRight":Q+=O-rt,k+=$-rt,V="right",I="bottom";break}return W=W||{},W.x=Q,W.y=k,W.align=V,W.verticalAlign=I,W}},3266:function(Ce,Jt,F){"use strict";F.d(Jt,{m:function(){return ct}});var N=Math.PI*2;function ct(K){return K%=N,K<0&&(K+=N),K}},47637:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return N}});function N(ct,K,dt,gt,vt,it){if(it>K&&it>gt||it<K&&it<gt||gt===K)return 0;var et=(it-K)/(gt-K),H=gt<K?1:-1;(et===1||et===0)&&(H=gt<K?.5:-.5);var J=et*(dt-ct)+ct;return J===vt?1/0:J>vt?H:0}},60479:function(Ce,Jt,F){"use strict";var N=F(32892),ct=F(41610),K=Math.min,dt=Math.max,gt=new ct.Z,vt=new ct.Z,it=new ct.Z,et=new ct.Z,H=new ct.Z,J=new ct.Z,at=function(){function G(U,W,lt,g){lt<0&&(U=U+lt,lt=-lt),g<0&&(W=W+g,g=-g),this.x=U,this.y=W,this.width=lt,this.height=g}return G.prototype.union=function(U){var W=K(U.x,this.x),lt=K(U.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=dt(U.x+U.width,this.x+this.width)-W:this.width=U.width,isFinite(this.y)&&isFinite(this.height)?this.height=dt(U.y+U.height,this.y+this.height)-lt:this.height=U.height,this.x=W,this.y=lt},G.prototype.applyTransform=function(U){G.applyTransform(this,this,U)},G.prototype.calculateTransform=function(U){var W=this,lt=U.width/W.width,g=U.height/W.height,j=N.Ue();return N.Iu(j,j,[-W.x,-W.y]),N.bA(j,j,[lt,g]),N.Iu(j,j,[U.x,U.y]),j},G.prototype.intersect=function(U,W){if(!U)return!1;U instanceof G||(U=G.create(U));var lt=this,g=lt.x,j=lt.x+lt.width,rt=lt.y,$=lt.y+lt.height,O=U.x,X=U.x+U.width,Q=U.y,k=U.y+U.height,V=!(j<O||X<g||$<Q||k<rt);if(W){var I=1/0,D=0,C=Math.abs(j-O),M=Math.abs(X-g),T=Math.abs($-Q),A=Math.abs(k-rt),L=Math.min(C,M),Z=Math.min(T,A);j<O||X<g?L>D&&(D=L,C<M?ct.Z.set(J,-C,0):ct.Z.set(J,M,0)):L<I&&(I=L,C<M?ct.Z.set(H,C,0):ct.Z.set(H,-M,0)),$<Q||k<rt?Z>D&&(D=Z,T<A?ct.Z.set(J,0,-T):ct.Z.set(J,0,A)):L<I&&(I=L,T<A?ct.Z.set(H,0,T):ct.Z.set(H,0,-A))}return W&&ct.Z.copy(W,V?H:J),V},G.prototype.contain=function(U,W){var lt=this;return U>=lt.x&&U<=lt.x+lt.width&&W>=lt.y&&W<=lt.y+lt.height},G.prototype.clone=function(){return new G(this.x,this.y,this.width,this.height)},G.prototype.copy=function(U){G.copy(this,U)},G.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},G.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},G.prototype.isZero=function(){return this.width===0||this.height===0},G.create=function(U){return new G(U.x,U.y,U.width,U.height)},G.copy=function(U,W){U.x=W.x,U.y=W.y,U.width=W.width,U.height=W.height},G.applyTransform=function(U,W,lt){if(!lt){U!==W&&G.copy(U,W);return}if(lt[1]<1e-5&&lt[1]>-1e-5&&lt[2]<1e-5&&lt[2]>-1e-5){var g=lt[0],j=lt[3],rt=lt[4],$=lt[5];U.x=W.x*g+rt,U.y=W.y*j+$,U.width=W.width*g,U.height=W.height*j,U.width<0&&(U.x+=U.width,U.width=-U.width),U.height<0&&(U.y+=U.height,U.height=-U.height);return}gt.x=it.x=W.x,gt.y=et.y=W.y,vt.x=et.x=W.x+W.width,vt.y=it.y=W.y+W.height,gt.transform(lt),et.transform(lt),vt.transform(lt),it.transform(lt),U.x=K(gt.x,vt.x,it.x,et.x),U.y=K(gt.y,vt.y,it.y,et.y);var O=dt(gt.x,vt.x,it.x,et.x),X=dt(gt.y,vt.y,it.y,et.y);U.width=O-U.x,U.height=X-U.y},G}();Jt.Z=at},23510:function(Ce,Jt){"use strict";var F=function(){function N(ct){ct&&(this._$eventProcessor=ct)}return N.prototype.on=function(ct,K,dt,gt){this._$handlers||(this._$handlers={});var vt=this._$handlers;if(typeof K=="function"&&(gt=dt,dt=K,K=null),!dt||!ct)return this;var it=this._$eventProcessor;K!=null&&it&&it.normalizeQuery&&(K=it.normalizeQuery(K)),vt[ct]||(vt[ct]=[]);for(var et=0;et<vt[ct].length;et++)if(vt[ct][et].h===dt)return this;var H={h:dt,query:K,ctx:gt||this,callAtLast:dt.zrEventfulCallAtLast},J=vt[ct].length-1,at=vt[ct][J];return at&&at.callAtLast?vt[ct].splice(J,0,H):vt[ct].push(H),this},N.prototype.isSilent=function(ct){var K=this._$handlers;return!K||!K[ct]||!K[ct].length},N.prototype.off=function(ct,K){var dt=this._$handlers;if(!dt)return this;if(!ct)return this._$handlers={},this;if(K){if(dt[ct]){for(var gt=[],vt=0,it=dt[ct].length;vt<it;vt++)dt[ct][vt].h!==K&&gt.push(dt[ct][vt]);dt[ct]=gt}dt[ct]&&dt[ct].length===0&&delete dt[ct]}else delete dt[ct];return this},N.prototype.trigger=function(ct){for(var K=[],dt=1;dt<arguments.length;dt++)K[dt-1]=arguments[dt];if(!this._$handlers)return this;var gt=this._$handlers[ct],vt=this._$eventProcessor;if(gt)for(var it=K.length,et=gt.length,H=0;H<et;H++){var J=gt[H];if(!(vt&&vt.filter&&J.query!=null&&!vt.filter(ct,J.query)))switch(it){case 0:J.h.call(J.ctx);break;case 1:J.h.call(J.ctx,K[0]);break;case 2:J.h.call(J.ctx,K[0],K[1]);break;default:J.h.apply(J.ctx,K);break}}return vt&&vt.afterTrigger&&vt.afterTrigger(ct),this},N.prototype.triggerWithContext=function(ct){for(var K=[],dt=1;dt<arguments.length;dt++)K[dt-1]=arguments[dt];if(!this._$handlers)return this;var gt=this._$handlers[ct],vt=this._$eventProcessor;if(gt)for(var it=K.length,et=K[it-1],H=gt.length,J=0;J<H;J++){var at=gt[J];if(!(vt&&vt.filter&&at.query!=null&&!vt.filter(ct,at.query)))switch(it){case 0:at.h.call(et);break;case 1:at.h.call(et,K[0]);break;case 2:at.h.call(et,K[0],K[1]);break;default:at.h.apply(et,K.slice(1,it-1));break}}return vt&&vt.afterTrigger&&vt.afterTrigger(ct),this},N}();Jt.Z=F},92528:function(Ce,Jt,F){"use strict";var N=function(){function dt(gt){this.value=gt}return dt}(),ct=function(){function dt(){this._len=0}return dt.prototype.insert=function(gt){var vt=new N(gt);return this.insertEntry(vt),vt},dt.prototype.insertEntry=function(gt){this.head?(this.tail.next=gt,gt.prev=this.tail,gt.next=null,this.tail=gt):this.head=this.tail=gt,this._len++},dt.prototype.remove=function(gt){var vt=gt.prev,it=gt.next;vt?vt.next=it:this.head=it,it?it.prev=vt:this.tail=vt,gt.next=gt.prev=null,this._len--},dt.prototype.len=function(){return this._len},dt.prototype.clear=function(){this.head=this.tail=null,this._len=0},dt}(),K=function(){function dt(gt){this._list=new ct,this._maxSize=10,this._map={},this._maxSize=gt}return dt.prototype.put=function(gt,vt){var it=this._list,et=this._map,H=null;if(et[gt]==null){var J=it.len(),at=this._lastRemovedEntry;if(J>=this._maxSize&&J>0){var G=it.head;it.remove(G),delete et[G.key],H=G.value,this._lastRemovedEntry=G}at?at.value=vt:at=new N(vt),at.key=gt,it.insertEntry(at),et[gt]=at}return H},dt.prototype.get=function(gt){var vt=this._map[gt],it=this._list;if(vt!=null)return vt!==it.tail&&(it.remove(vt),it.insertEntry(vt)),vt.value},dt.prototype.clear=function(){this._list.clear(),this._map={}},dt.prototype.len=function(){return this._list.len()},dt}();Jt.ZP=K},41587:function(Ce,Jt,F){"use strict";var N=F(41610),ct=[0,0],K=[0,0],dt=new N.Z,gt=new N.Z,vt=function(){function it(et,H){this._corners=[],this._axes=[],this._origin=[0,0];for(var J=0;J<4;J++)this._corners[J]=new N.Z;for(var J=0;J<2;J++)this._axes[J]=new N.Z;et&&this.fromBoundingRect(et,H)}return it.prototype.fromBoundingRect=function(et,H){var J=this._corners,at=this._axes,G=et.x,U=et.y,W=G+et.width,lt=U+et.height;if(J[0].set(G,U),J[1].set(W,U),J[2].set(W,lt),J[3].set(G,lt),H)for(var g=0;g<4;g++)J[g].transform(H);N.Z.sub(at[0],J[1],J[0]),N.Z.sub(at[1],J[3],J[0]),at[0].normalize(),at[1].normalize();for(var g=0;g<2;g++)this._origin[g]=at[g].dot(J[0])},it.prototype.intersect=function(et,H){var J=!0,at=!H;return dt.set(1/0,1/0),gt.set(0,0),!this._intersectCheckOneSide(this,et,dt,gt,at,1)&&(J=!1,at)||!this._intersectCheckOneSide(et,this,dt,gt,at,-1)&&(J=!1,at)||at||N.Z.copy(H,J?dt:gt),J},it.prototype._intersectCheckOneSide=function(et,H,J,at,G,U){for(var W=!0,lt=0;lt<2;lt++){var g=this._axes[lt];if(this._getProjMinMaxOnAxis(lt,et._corners,ct),this._getProjMinMaxOnAxis(lt,H._corners,K),ct[1]<K[0]||ct[0]>K[1]){if(W=!1,G)return W;var j=Math.abs(K[0]-ct[1]),rt=Math.abs(ct[0]-K[1]);Math.min(j,rt)>at.len()&&(j<rt?N.Z.scale(at,g,-j*U):N.Z.scale(at,g,rt*U))}else if(J){var j=Math.abs(K[0]-ct[1]),rt=Math.abs(ct[0]-K[1]);Math.min(j,rt)<J.len()&&(j<rt?N.Z.scale(J,g,j*U):N.Z.scale(J,g,-rt*U))}}return W},it.prototype._getProjMinMaxOnAxis=function(et,H,J){for(var at=this._axes[et],G=this._origin,U=H[0].dot(at)+G[et],W=U,lt=U,g=1;g<H.length;g++){var j=H[g].dot(at)+G[et];W=Math.min(j,W),lt=Math.max(j,lt)}J[0]=W,J[1]=lt},it}();Jt.Z=vt},14014:function(Ce,Jt,F){"use strict";F.d(Jt,{L:function(){return k}});var N=F(45280),ct=F(60479),K=F(4990),dt=F(3726),gt=F(29023),vt={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},it=[],et=[],H=[],J=[],at=[],G=[],U=Math.min,W=Math.max,lt=Math.cos,g=Math.sin,j=Math.abs,rt=Math.PI,$=rt*2,O=typeof Float32Array<"u",X=[];function Q(I){var D=Math.round(I/rt*1e8)/1e8;return D%2*rt}function k(I,D){var C=Q(I[0]);C<0&&(C+=$);var M=C-I[0],T=I[1];T+=M,!D&&T-C>=$?T=C+$:D&&C-T>=$?T=C-$:!D&&C>T?T=C+($-Q(C-T)):D&&C<T&&(T=C-($-Q(T-C))),I[0]=C,I[1]=T}var V=function(){function I(D){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,D&&(this._saveData=!1),this._saveData&&(this.data=[])}return I.prototype.increaseVersion=function(){this._version++},I.prototype.getVersion=function(){return this._version},I.prototype.setScale=function(D,C,M){M=M||0,M>0&&(this._ux=j(M/K.KL/D)||0,this._uy=j(M/K.KL/C)||0)},I.prototype.setDPR=function(D){this.dpr=D},I.prototype.setContext=function(D){this._ctx=D},I.prototype.getContext=function(){return this._ctx},I.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},I.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},I.prototype.moveTo=function(D,C){return this._drawPendingPt(),this.addData(vt.M,D,C),this._ctx&&this._ctx.moveTo(D,C),this._x0=D,this._y0=C,this._xi=D,this._yi=C,this},I.prototype.lineTo=function(D,C){var M=j(D-this._xi),T=j(C-this._yi),A=M>this._ux||T>this._uy;if(this.addData(vt.L,D,C),this._ctx&&A&&this._ctx.lineTo(D,C),A)this._xi=D,this._yi=C,this._pendingPtDist=0;else{var L=M*M+T*T;L>this._pendingPtDist&&(this._pendingPtX=D,this._pendingPtY=C,this._pendingPtDist=L)}return this},I.prototype.bezierCurveTo=function(D,C,M,T,A,L){return this._drawPendingPt(),this.addData(vt.C,D,C,M,T,A,L),this._ctx&&this._ctx.bezierCurveTo(D,C,M,T,A,L),this._xi=A,this._yi=L,this},I.prototype.quadraticCurveTo=function(D,C,M,T){return this._drawPendingPt(),this.addData(vt.Q,D,C,M,T),this._ctx&&this._ctx.quadraticCurveTo(D,C,M,T),this._xi=M,this._yi=T,this},I.prototype.arc=function(D,C,M,T,A,L){this._drawPendingPt(),X[0]=T,X[1]=A,k(X,L),T=X[0],A=X[1];var Z=A-T;return this.addData(vt.A,D,C,M,M,T,Z,0,L?0:1),this._ctx&&this._ctx.arc(D,C,M,T,A,L),this._xi=lt(A)*M+D,this._yi=g(A)*M+C,this},I.prototype.arcTo=function(D,C,M,T,A){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(D,C,M,T,A),this},I.prototype.rect=function(D,C,M,T){return this._drawPendingPt(),this._ctx&&this._ctx.rect(D,C,M,T),this.addData(vt.R,D,C,M,T),this},I.prototype.closePath=function(){this._drawPendingPt(),this.addData(vt.Z);var D=this._ctx,C=this._x0,M=this._y0;return D&&D.closePath(),this._xi=C,this._yi=M,this},I.prototype.fill=function(D){D&&D.fill(),this.toStatic()},I.prototype.stroke=function(D){D&&D.stroke(),this.toStatic()},I.prototype.len=function(){return this._len},I.prototype.setData=function(D){var C=D.length;!(this.data&&this.data.length===C)&&O&&(this.data=new Float32Array(C));for(var M=0;M<C;M++)this.data[M]=D[M];this._len=C},I.prototype.appendPath=function(D){D instanceof Array||(D=[D]);for(var C=D.length,M=0,T=this._len,A=0;A<C;A++)M+=D[A].len();O&&this.data instanceof Float32Array&&(this.data=new Float32Array(T+M));for(var A=0;A<C;A++)for(var L=D[A].data,Z=0;Z<L.length;Z++)this.data[T++]=L[Z];this._len=T},I.prototype.addData=function(D,C,M,T,A,L,Z,z,ut){if(!!this._saveData){var ot=this.data;this._len+arguments.length>ot.length&&(this._expandData(),ot=this.data);for(var ht=0;ht<arguments.length;ht++)ot[this._len++]=arguments[ht]}},I.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},I.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var D=[],C=0;C<this._len;C++)D[C]=this.data[C];this.data=D}},I.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var D=this.data;D instanceof Array&&(D.length=this._len,O&&this._len>11&&(this.data=new Float32Array(D)))}},I.prototype.getBoundingRect=function(){H[0]=H[1]=at[0]=at[1]=Number.MAX_VALUE,J[0]=J[1]=G[0]=G[1]=-Number.MAX_VALUE;var D=this.data,C=0,M=0,T=0,A=0,L;for(L=0;L<this._len;){var Z=D[L++],z=L===1;switch(z&&(C=D[L],M=D[L+1],T=C,A=M),Z){case vt.M:C=T=D[L++],M=A=D[L++],at[0]=T,at[1]=A,G[0]=T,G[1]=A;break;case vt.L:(0,dt.u4)(C,M,D[L],D[L+1],at,G),C=D[L++],M=D[L++];break;case vt.C:(0,dt.H9)(C,M,D[L++],D[L++],D[L++],D[L++],D[L],D[L+1],at,G),C=D[L++],M=D[L++];break;case vt.Q:(0,dt.mJ)(C,M,D[L++],D[L++],D[L],D[L+1],at,G),C=D[L++],M=D[L++];break;case vt.A:var ut=D[L++],ot=D[L++],ht=D[L++],tt=D[L++],ft=D[L++],St=D[L++]+ft;L+=1;var st=!D[L++];z&&(T=lt(ft)*ht+ut,A=g(ft)*tt+ot),(0,dt.qL)(ut,ot,ht,tt,ft,St,st,at,G),C=lt(St)*ht+ut,M=g(St)*tt+ot;break;case vt.R:T=C=D[L++],A=M=D[L++];var xt=D[L++],wt=D[L++];(0,dt.u4)(T,A,T+xt,A+wt,at,G);break;case vt.Z:C=T,M=A;break}N.VV(H,H,at),N.Fp(J,J,G)}return L===0&&(H[0]=H[1]=J[0]=J[1]=0),new ct.Z(H[0],H[1],J[0]-H[0],J[1]-H[1])},I.prototype._calculateLength=function(){var D=this.data,C=this._len,M=this._ux,T=this._uy,A=0,L=0,Z=0,z=0;this._pathSegLen||(this._pathSegLen=[]);for(var ut=this._pathSegLen,ot=0,ht=0,tt=0;tt<C;){var ft=D[tt++],St=tt===1;St&&(A=D[tt],L=D[tt+1],Z=A,z=L);var st=-1;switch(ft){case vt.M:A=Z=D[tt++],L=z=D[tt++];break;case vt.L:{var xt=D[tt++],wt=D[tt++],Dt=xt-A,It=wt-L;(j(Dt)>M||j(It)>T||tt===C-1)&&(st=Math.sqrt(Dt*Dt+It*It),A=xt,L=wt);break}case vt.C:{var Et=D[tt++],zt=D[tt++],xt=D[tt++],wt=D[tt++],Bt=D[tt++],Ht=D[tt++];st=(0,gt.Ci)(A,L,Et,zt,xt,wt,Bt,Ht,10),A=Bt,L=Ht;break}case vt.Q:{var Et=D[tt++],zt=D[tt++],xt=D[tt++],wt=D[tt++];st=(0,gt.wQ)(A,L,Et,zt,xt,wt,10),A=xt,L=wt;break}case vt.A:var $t=D[tt++],ee=D[tt++],De=D[tt++],Se=D[tt++],Be=D[tt++],Ft=D[tt++],Tt=Ft+Be;tt+=1;var At=!D[tt++];St&&(Z=lt(Be)*De+$t,z=g(Be)*Se+ee),st=W(De,Se)*U($,Math.abs(Ft)),A=lt(Tt)*De+$t,L=g(Tt)*Se+ee;break;case vt.R:{Z=A=D[tt++],z=L=D[tt++];var Kt=D[tt++],pe=D[tt++];st=Kt*2+pe*2;break}case vt.Z:{var Dt=Z-A,It=z-L;st=Math.sqrt(Dt*Dt+It*It),A=Z,L=z;break}}st>=0&&(ut[ht++]=st,ot+=st)}return this._pathLen=ot,ot},I.prototype.rebuildPath=function(D,C){var M=this.data,T=this._ux,A=this._uy,L=this._len,Z,z,ut,ot,ht,tt,ft=C<1,St,st,xt=0,wt=0,Dt,It=0,Et,zt;if(ft&&(this._pathSegLen||this._calculateLength(),St=this._pathSegLen,st=this._pathLen,Dt=C*st,!Dt))return;t:for(var Bt=0;Bt<L;){var Ht=M[Bt++],$t=Bt===1;switch($t&&(ut=M[Bt],ot=M[Bt+1],Z=ut,z=ot),Ht!==vt.L&&It>0&&(D.lineTo(Et,zt),It=0),Ht){case vt.M:Z=ut=M[Bt++],z=ot=M[Bt++],D.moveTo(ut,ot);break;case vt.L:{ht=M[Bt++],tt=M[Bt++];var ee=j(ht-ut),De=j(tt-ot);if(ee>T||De>A){if(ft){var Se=St[wt++];if(xt+Se>Dt){var Be=(Dt-xt)/Se;D.lineTo(ut*(1-Be)+ht*Be,ot*(1-Be)+tt*Be);break t}xt+=Se}D.lineTo(ht,tt),ut=ht,ot=tt,It=0}else{var Ft=ee*ee+De*De;Ft>It&&(Et=ht,zt=tt,It=Ft)}break}case vt.C:{var Tt=M[Bt++],At=M[Bt++],Kt=M[Bt++],pe=M[Bt++],Oe=M[Bt++],Pe=M[Bt++];if(ft){var Se=St[wt++];if(xt+Se>Dt){var Be=(Dt-xt)/Se;(0,gt.Vz)(ut,Tt,Kt,Oe,Be,it),(0,gt.Vz)(ot,At,pe,Pe,Be,et),D.bezierCurveTo(it[1],et[1],it[2],et[2],it[3],et[3]);break t}xt+=Se}D.bezierCurveTo(Tt,At,Kt,pe,Oe,Pe),ut=Oe,ot=Pe;break}case vt.Q:{var Tt=M[Bt++],At=M[Bt++],Kt=M[Bt++],pe=M[Bt++];if(ft){var Se=St[wt++];if(xt+Se>Dt){var Be=(Dt-xt)/Se;(0,gt.Lx)(ut,Tt,Kt,Be,it),(0,gt.Lx)(ot,At,pe,Be,et),D.quadraticCurveTo(it[1],et[1],it[2],et[2]);break t}xt+=Se}D.quadraticCurveTo(Tt,At,Kt,pe),ut=Kt,ot=pe;break}case vt.A:var vr=M[Bt++],Lr=M[Bt++],nr=M[Bt++],qe=M[Bt++],lr=M[Bt++],Yt=M[Bt++],le=M[Bt++],we=!M[Bt++],_e=nr>qe?nr:qe,Ut=j(nr-qe)>.001,Qt=lr+Yt,ie=!1;if(ft){var Se=St[wt++];xt+Se>Dt&&(Qt=lr+Yt*(Dt-xt)/Se,ie=!0),xt+=Se}if(Ut&&D.ellipse?D.ellipse(vr,Lr,nr,qe,le,lr,Qt,we):D.arc(vr,Lr,_e,lr,Qt,we),ie)break t;$t&&(Z=lt(lr)*nr+vr,z=g(lr)*qe+Lr),ut=lt(Qt)*nr+vr,ot=g(Qt)*qe+Lr;break;case vt.R:Z=ut=M[Bt],z=ot=M[Bt+1],ht=M[Bt++],tt=M[Bt++];var Ae=M[Bt++],He=M[Bt++];if(ft){var Se=St[wt++];if(xt+Se>Dt){var tr=Dt-xt;D.moveTo(ht,tt),D.lineTo(ht+U(tr,Ae),tt),tr-=Ae,tr>0&&D.lineTo(ht+Ae,tt+U(tr,He)),tr-=He,tr>0&&D.lineTo(ht+W(Ae-tr,0),tt+He),tr-=Ae,tr>0&&D.lineTo(ht,tt+W(He-tr,0));break t}xt+=Se}D.rect(ht,tt,Ae,He);break;case vt.Z:if(ft){var Se=St[wt++];if(xt+Se>Dt){var Be=(Dt-xt)/Se;D.lineTo(ut*(1-Be)+Z*Be,ot*(1-Be)+z*Be);break t}xt+=Se}D.closePath(),ut=Z,ot=z}}},I.prototype.clone=function(){var D=new I,C=this.data;return D.data=C.slice?C.slice():Array.prototype.slice.call(C),D._len=this._len,D},I.CMD=vt,I.initDefaultProps=function(){var D=I.prototype;D._saveData=!0,D._ux=0,D._uy=0,D._pendingPtDist=0,D._version=0}(),I}();Jt.Z=V},41610:function(Ce,Jt){"use strict";var F=function(){function N(ct,K){this.x=ct||0,this.y=K||0}return N.prototype.copy=function(ct){return this.x=ct.x,this.y=ct.y,this},N.prototype.clone=function(){return new N(this.x,this.y)},N.prototype.set=function(ct,K){return this.x=ct,this.y=K,this},N.prototype.equal=function(ct){return ct.x===this.x&&ct.y===this.y},N.prototype.add=function(ct){return this.x+=ct.x,this.y+=ct.y,this},N.prototype.scale=function(ct){this.x*=ct,this.y*=ct},N.prototype.scaleAndAdd=function(ct,K){this.x+=ct.x*K,this.y+=ct.y*K},N.prototype.sub=function(ct){return this.x-=ct.x,this.y-=ct.y,this},N.prototype.dot=function(ct){return this.x*ct.x+this.y*ct.y},N.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},N.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},N.prototype.normalize=function(){var ct=this.len();return this.x/=ct,this.y/=ct,this},N.prototype.distance=function(ct){var K=this.x-ct.x,dt=this.y-ct.y;return Math.sqrt(K*K+dt*dt)},N.prototype.distanceSquare=function(ct){var K=this.x-ct.x,dt=this.y-ct.y;return K*K+dt*dt},N.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},N.prototype.transform=function(ct){if(!!ct){var K=this.x,dt=this.y;return this.x=ct[0]*K+ct[2]*dt+ct[4],this.y=ct[1]*K+ct[3]*dt+ct[5],this}},N.prototype.toArray=function(ct){return ct[0]=this.x,ct[1]=this.y,ct},N.prototype.fromArray=function(ct){this.x=ct[0],this.y=ct[1]},N.set=function(ct,K,dt){ct.x=K,ct.y=dt},N.copy=function(ct,K){ct.x=K.x,ct.y=K.y},N.len=function(ct){return Math.sqrt(ct.x*ct.x+ct.y*ct.y)},N.lenSquare=function(ct){return ct.x*ct.x+ct.y*ct.y},N.dot=function(ct,K){return ct.x*K.x+ct.y*K.y},N.add=function(ct,K,dt){ct.x=K.x+dt.x,ct.y=K.y+dt.y},N.sub=function(ct,K,dt){ct.x=K.x-dt.x,ct.y=K.y-dt.y},N.scale=function(ct,K,dt){ct.x=K.x*dt,ct.y=K.y*dt},N.scaleAndAdd=function(ct,K,dt,gt){ct.x=K.x+dt.x*gt,ct.y=K.y+dt.y*gt},N.lerp=function(ct,K,dt,gt){var vt=1-gt;ct.x=vt*K.x+gt*dt.x,ct.y=vt*K.y+gt*dt.y},N}();Jt.Z=F},87411:function(Ce,Jt,F){"use strict";F.d(Jt,{dN:function(){return at},kY:function(){return G}});var N=F(32892),ct=F(45280),K=N.yR,dt=5e-5;function gt(U){return U>dt||U<-dt}var vt=[],it=[],et=N.Ue(),H=Math.abs,J=function(){function U(){}return U.prototype.getLocalTransform=function(W){return U.getLocalTransform(this,W)},U.prototype.setPosition=function(W){this.x=W[0],this.y=W[1]},U.prototype.setScale=function(W){this.scaleX=W[0],this.scaleY=W[1]},U.prototype.setSkew=function(W){this.skewX=W[0],this.skewY=W[1]},U.prototype.setOrigin=function(W){this.originX=W[0],this.originY=W[1]},U.prototype.needLocalTransform=function(){return gt(this.rotation)||gt(this.x)||gt(this.y)||gt(this.scaleX-1)||gt(this.scaleY-1)||gt(this.skewX)||gt(this.skewY)},U.prototype.updateTransform=function(){var W=this.parent&&this.parent.transform,lt=this.needLocalTransform(),g=this.transform;if(!(lt||W)){g&&K(g);return}g=g||N.Ue(),lt?this.getLocalTransform(g):K(g),W&&(lt?N.dC(g,W,g):N.JG(g,W)),this.transform=g,this._resolveGlobalScaleRatio(g)},U.prototype._resolveGlobalScaleRatio=function(W){var lt=this.globalScaleRatio;if(lt!=null&&lt!==1){this.getGlobalScale(vt);var g=vt[0]<0?-1:1,j=vt[1]<0?-1:1,rt=((vt[0]-g)*lt+g)/vt[0]||0,$=((vt[1]-j)*lt+j)/vt[1]||0;W[0]*=rt,W[1]*=rt,W[2]*=$,W[3]*=$}this.invTransform=this.invTransform||N.Ue(),N.U_(this.invTransform,W)},U.prototype.getComputedTransform=function(){for(var W=this,lt=[];W;)lt.push(W),W=W.parent;for(;W=lt.pop();)W.updateTransform();return this.transform},U.prototype.setLocalTransform=function(W){if(!!W){var lt=W[0]*W[0]+W[1]*W[1],g=W[2]*W[2]+W[3]*W[3],j=Math.atan2(W[1],W[0]),rt=Math.PI/2+j-Math.atan2(W[3],W[2]);g=Math.sqrt(g)*Math.cos(rt),lt=Math.sqrt(lt),this.skewX=rt,this.skewY=0,this.rotation=-j,this.x=+W[4],this.y=+W[5],this.scaleX=lt,this.scaleY=g,this.originX=0,this.originY=0}},U.prototype.decomposeTransform=function(){if(!!this.transform){var W=this.parent,lt=this.transform;W&&W.transform&&(N.dC(it,W.invTransform,lt),lt=it);var g=this.originX,j=this.originY;(g||j)&&(et[4]=g,et[5]=j,N.dC(it,lt,et),it[4]-=g,it[5]-=j,lt=it),this.setLocalTransform(lt)}},U.prototype.getGlobalScale=function(W){var lt=this.transform;return W=W||[],lt?(W[0]=Math.sqrt(lt[0]*lt[0]+lt[1]*lt[1]),W[1]=Math.sqrt(lt[2]*lt[2]+lt[3]*lt[3]),lt[0]<0&&(W[0]=-W[0]),lt[3]<0&&(W[1]=-W[1]),W):(W[0]=1,W[1]=1,W)},U.prototype.transformCoordToLocal=function(W,lt){var g=[W,lt],j=this.invTransform;return j&&ct.Ne(g,g,j),g},U.prototype.transformCoordToGlobal=function(W,lt){var g=[W,lt],j=this.transform;return j&&ct.Ne(g,g,j),g},U.prototype.getLineScale=function(){var W=this.transform;return W&&H(W[0]-1)>1e-10&&H(W[3]-1)>1e-10?Math.sqrt(H(W[0]*W[3]-W[2]*W[1])):1},U.prototype.copyTransform=function(W){G(this,W)},U.getLocalTransform=function(W,lt){lt=lt||[];var g=W.originX||0,j=W.originY||0,rt=W.scaleX,$=W.scaleY,O=W.anchorX,X=W.anchorY,Q=W.rotation||0,k=W.x,V=W.y,I=W.skewX?Math.tan(W.skewX):0,D=W.skewY?Math.tan(-W.skewY):0;if(g||j||O||X){var C=g+O,M=j+X;lt[4]=-C*rt-I*M*$,lt[5]=-M*$-D*C*rt}else lt[4]=lt[5]=0;return lt[0]=rt,lt[3]=$,lt[1]=D*rt,lt[2]=I*$,Q&&N.U1(lt,lt,Q),lt[4]+=g+k,lt[5]+=j+V,lt},U.initDefaultProps=function(){var W=U.prototype;W.scaleX=W.scaleY=W.globalScaleRatio=1,W.x=W.y=W.originX=W.originY=W.skewX=W.skewY=W.rotation=W.anchorX=W.anchorY=0}(),U}(),at=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function G(U,W){for(var lt=0;lt<at.length;lt++){var g=at[lt];U[g]=W[g]}}Jt.ZP=J},3726:function(Ce,Jt,F){"use strict";F.d(Jt,{H9:function(){return lt},mJ:function(){return g},qL:function(){return j},u4:function(){return G},zk:function(){return at}});var N=F(45280),ct=F(29023),K=Math.min,dt=Math.max,gt=Math.sin,vt=Math.cos,it=Math.PI*2,et=N.Ue(),H=N.Ue(),J=N.Ue();function at(rt,$,O){if(rt.length!==0){for(var X=rt[0],Q=X[0],k=X[0],V=X[1],I=X[1],D=1;D<rt.length;D++)X=rt[D],Q=K(Q,X[0]),k=dt(k,X[0]),V=K(V,X[1]),I=dt(I,X[1]);$[0]=Q,$[1]=V,O[0]=k,O[1]=I}}function G(rt,$,O,X,Q,k){Q[0]=K(rt,O),Q[1]=K($,X),k[0]=dt(rt,O),k[1]=dt($,X)}var U=[],W=[];function lt(rt,$,O,X,Q,k,V,I,D,C){var M=ct.pP,T=ct.af,A=M(rt,O,Q,V,U);D[0]=1/0,D[1]=1/0,C[0]=-1/0,C[1]=-1/0;for(var L=0;L<A;L++){var Z=T(rt,O,Q,V,U[L]);D[0]=K(Z,D[0]),C[0]=dt(Z,C[0])}A=M($,X,k,I,W);for(var L=0;L<A;L++){var z=T($,X,k,I,W[L]);D[1]=K(z,D[1]),C[1]=dt(z,C[1])}D[0]=K(rt,D[0]),C[0]=dt(rt,C[0]),D[0]=K(V,D[0]),C[0]=dt(V,C[0]),D[1]=K($,D[1]),C[1]=dt($,C[1]),D[1]=K(I,D[1]),C[1]=dt(I,C[1])}function g(rt,$,O,X,Q,k,V,I){var D=ct.QC,C=ct.Zm,M=dt(K(D(rt,O,Q),1),0),T=dt(K(D($,X,k),1),0),A=C(rt,O,Q,M),L=C($,X,k,T);V[0]=K(rt,Q,A),V[1]=K($,k,L),I[0]=dt(rt,Q,A),I[1]=dt($,k,L)}function j(rt,$,O,X,Q,k,V,I,D){var C=N.VV,M=N.Fp,T=Math.abs(Q-k);if(T%it<1e-4&&T>1e-4){I[0]=rt-O,I[1]=$-X,D[0]=rt+O,D[1]=$+X;return}if(et[0]=vt(Q)*O+rt,et[1]=gt(Q)*X+$,H[0]=vt(k)*O+rt,H[1]=gt(k)*X+$,C(I,et,H),M(D,et,H),Q=Q%it,Q<0&&(Q=Q+it),k=k%it,k<0&&(k=k+it),Q>k&&!V?k+=it:Q<k&&V&&(Q+=it),V){var A=k;k=Q,Q=A}for(var L=0;L<k;L+=Math.PI/2)L>Q&&(J[0]=vt(L)*O+rt,J[1]=gt(L)*X+$,C(I,J,I),M(D,J,D))}},29023:function(Ce,Jt,F){"use strict";F.d(Jt,{AZ:function(){return X},Ci:function(){return $},Jz:function(){return Q},Lx:function(){return V},QC:function(){return k},Vz:function(){return j},Wr:function(){return I},X_:function(){return W},Zm:function(){return O},af:function(){return U},kD:function(){return lt},pP:function(){return g},t1:function(){return rt},wQ:function(){return D}});var N=F(45280),ct=Math.pow,K=Math.sqrt,dt=1e-8,gt=1e-4,vt=K(3),it=1/3,et=(0,N.Ue)(),H=(0,N.Ue)(),J=(0,N.Ue)();function at(C){return C>-dt&&C<dt}function G(C){return C>dt||C<-dt}function U(C,M,T,A,L){var Z=1-L;return Z*Z*(Z*C+3*L*M)+L*L*(L*A+3*Z*T)}function W(C,M,T,A,L){var Z=1-L;return 3*(((M-C)*Z+2*(T-M)*L)*Z+(A-T)*L*L)}function lt(C,M,T,A,L,Z){var z=A+3*(M-T)-C,ut=3*(T-M*2+C),ot=3*(M-C),ht=C-L,tt=ut*ut-3*z*ot,ft=ut*ot-9*z*ht,St=ot*ot-3*ut*ht,st=0;if(at(tt)&&at(ft))if(at(ut))Z[0]=0;else{var xt=-ot/ut;xt>=0&&xt<=1&&(Z[st++]=xt)}else{var wt=ft*ft-4*tt*St;if(at(wt)){var Dt=ft/tt,xt=-ut/z+Dt,It=-Dt/2;xt>=0&&xt<=1&&(Z[st++]=xt),It>=0&&It<=1&&(Z[st++]=It)}else if(wt>0){var Et=K(wt),zt=tt*ut+1.5*z*(-ft+Et),Bt=tt*ut+1.5*z*(-ft-Et);zt<0?zt=-ct(-zt,it):zt=ct(zt,it),Bt<0?Bt=-ct(-Bt,it):Bt=ct(Bt,it);var xt=(-ut-(zt+Bt))/(3*z);xt>=0&&xt<=1&&(Z[st++]=xt)}else{var Ht=(2*tt*ut-3*z*ft)/(2*K(tt*tt*tt)),$t=Math.acos(Ht)/3,ee=K(tt),De=Math.cos($t),xt=(-ut-2*ee*De)/(3*z),It=(-ut+ee*(De+vt*Math.sin($t)))/(3*z),Se=(-ut+ee*(De-vt*Math.sin($t)))/(3*z);xt>=0&&xt<=1&&(Z[st++]=xt),It>=0&&It<=1&&(Z[st++]=It),Se>=0&&Se<=1&&(Z[st++]=Se)}}return st}function g(C,M,T,A,L){var Z=6*T-12*M+6*C,z=9*M+3*A-3*C-9*T,ut=3*M-3*C,ot=0;if(at(z)){if(G(Z)){var ht=-ut/Z;ht>=0&&ht<=1&&(L[ot++]=ht)}}else{var tt=Z*Z-4*z*ut;if(at(tt))L[0]=-Z/(2*z);else if(tt>0){var ft=K(tt),ht=(-Z+ft)/(2*z),St=(-Z-ft)/(2*z);ht>=0&&ht<=1&&(L[ot++]=ht),St>=0&&St<=1&&(L[ot++]=St)}}return ot}function j(C,M,T,A,L,Z){var z=(M-C)*L+C,ut=(T-M)*L+M,ot=(A-T)*L+T,ht=(ut-z)*L+z,tt=(ot-ut)*L+ut,ft=(tt-ht)*L+ht;Z[0]=C,Z[1]=z,Z[2]=ht,Z[3]=ft,Z[4]=ft,Z[5]=tt,Z[6]=ot,Z[7]=A}function rt(C,M,T,A,L,Z,z,ut,ot,ht,tt){var ft,St=.005,st=1/0,xt,wt,Dt,It;et[0]=ot,et[1]=ht;for(var Et=0;Et<1;Et+=.05)H[0]=U(C,T,L,z,Et),H[1]=U(M,A,Z,ut,Et),Dt=(0,N.WU)(et,H),Dt<st&&(ft=Et,st=Dt);st=1/0;for(var zt=0;zt<32&&!(St<gt);zt++)xt=ft-St,wt=ft+St,H[0]=U(C,T,L,z,xt),H[1]=U(M,A,Z,ut,xt),Dt=(0,N.WU)(H,et),xt>=0&&Dt<st?(ft=xt,st=Dt):(J[0]=U(C,T,L,z,wt),J[1]=U(M,A,Z,ut,wt),It=(0,N.WU)(J,et),wt<=1&&It<st?(ft=wt,st=It):St*=.5);return tt&&(tt[0]=U(C,T,L,z,ft),tt[1]=U(M,A,Z,ut,ft)),K(st)}function $(C,M,T,A,L,Z,z,ut,ot){for(var ht=C,tt=M,ft=0,St=1/ot,st=1;st<=ot;st++){var xt=st*St,wt=U(C,T,L,z,xt),Dt=U(M,A,Z,ut,xt),It=wt-ht,Et=Dt-tt;ft+=Math.sqrt(It*It+Et*Et),ht=wt,tt=Dt}return ft}function O(C,M,T,A){var L=1-A;return L*(L*C+2*A*M)+A*A*T}function X(C,M,T,A){return 2*((1-A)*(M-C)+A*(T-M))}function Q(C,M,T,A,L){var Z=C-2*M+T,z=2*(M-C),ut=C-A,ot=0;if(at(Z)){if(G(z)){var ht=-ut/z;ht>=0&&ht<=1&&(L[ot++]=ht)}}else{var tt=z*z-4*Z*ut;if(at(tt)){var ht=-z/(2*Z);ht>=0&&ht<=1&&(L[ot++]=ht)}else if(tt>0){var ft=K(tt),ht=(-z+ft)/(2*Z),St=(-z-ft)/(2*Z);ht>=0&&ht<=1&&(L[ot++]=ht),St>=0&&St<=1&&(L[ot++]=St)}}return ot}function k(C,M,T){var A=C+T-2*M;return A===0?.5:(C-M)/A}function V(C,M,T,A,L){var Z=(M-C)*A+C,z=(T-M)*A+M,ut=(z-Z)*A+Z;L[0]=C,L[1]=Z,L[2]=ut,L[3]=ut,L[4]=z,L[5]=T}function I(C,M,T,A,L,Z,z,ut,ot){var ht,tt=.005,ft=1/0;et[0]=z,et[1]=ut;for(var St=0;St<1;St+=.05){H[0]=O(C,T,L,St),H[1]=O(M,A,Z,St);var st=(0,N.WU)(et,H);st<ft&&(ht=St,ft=st)}ft=1/0;for(var xt=0;xt<32&&!(tt<gt);xt++){var wt=ht-tt,Dt=ht+tt;H[0]=O(C,T,L,wt),H[1]=O(M,A,Z,wt);var st=(0,N.WU)(H,et);if(wt>=0&&st<ft)ht=wt,ft=st;else{J[0]=O(C,T,L,Dt),J[1]=O(M,A,Z,Dt);var It=(0,N.WU)(J,et);Dt<=1&&It<ft?(ht=Dt,ft=It):tt*=.5}}return ot&&(ot[0]=O(C,T,L,ht),ot[1]=O(M,A,Z,ht)),K(ft)}function D(C,M,T,A,L,Z,z){for(var ut=C,ot=M,ht=0,tt=1/z,ft=1;ft<=z;ft++){var St=ft*tt,st=O(C,T,L,St),xt=O(M,A,Z,St),wt=st-ut,Dt=xt-ot;ht+=Math.sqrt(wt*wt+Dt*Dt),ut=st,ot=xt}return ht}},54058:function(Ce,Jt,F){"use strict";F.d(Jt,{UK:function(){return at},A4:function(){return et},YB:function(){return it}});var N=F(66387),ct=Math.log(2);function K(G,U,W,lt,g,j){var rt=lt+"-"+g,$=G.length;if(j.hasOwnProperty(rt))return j[rt];if(U===1){var O=Math.round(Math.log((1<<$)-1&~g)/ct);return G[W][O]}for(var X=lt|1<<W,Q=W+1;lt&1<<Q;)Q++;for(var k=0,V=0,I=0;V<$;V++){var D=1<<V;D&g||(k+=(I%2?-1:1)*G[W][V]*K(G,U-1,Q,X,g|D,j),I++)}return j[rt]=k,k}function dt(G,U){var W=[[G[0],G[1],1,0,0,0,-U[0]*G[0],-U[0]*G[1]],[0,0,0,G[0],G[1],1,-U[1]*G[0],-U[1]*G[1]],[G[2],G[3],1,0,0,0,-U[2]*G[2],-U[2]*G[3]],[0,0,0,G[2],G[3],1,-U[3]*G[2],-U[3]*G[3]],[G[4],G[5],1,0,0,0,-U[4]*G[4],-U[4]*G[5]],[0,0,0,G[4],G[5],1,-U[5]*G[4],-U[5]*G[5]],[G[6],G[7],1,0,0,0,-U[6]*G[6],-U[6]*G[7]],[0,0,0,G[6],G[7],1,-U[7]*G[6],-U[7]*G[7]]],lt={},g=K(W,8,0,0,0,lt);if(g!==0){for(var j=[],rt=0;rt<8;rt++)for(var $=0;$<8;$++)j[$]==null&&(j[$]=0),j[$]+=((rt+$)%2?-1:1)*K(W,7,rt===0?1:0,1<<rt,1<<$,lt)/g*U[rt];return function(O,X,Q){var k=X*j[6]+Q*j[7]+1;O[0]=(X*j[0]+Q*j[1]+j[2])/k,O[1]=(X*j[3]+Q*j[4]+j[5])/k}}}var gt="___zrEVENTSAVED",vt=[];function it(G,U,W,lt,g){return et(vt,U,lt,g,!0)&&et(G,W,vt[0],vt[1])}function et(G,U,W,lt,g){if(U.getBoundingClientRect&&N.Z.domSupported&&!at(U)){var j=U[gt]||(U[gt]={}),rt=H(U,j),$=J(rt,j,g);if($)return $(G,W,lt),!0}return!1}function H(G,U){var W=U.markers;if(W)return W;W=U.markers=[];for(var lt=["left","right"],g=["top","bottom"],j=0;j<4;j++){var rt=document.createElement("div"),$=rt.style,O=j%2,X=(j>>1)%2;$.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",lt[O]+":0",g[X]+":0",lt[1-O]+":auto",g[1-X]+":auto",""].join("!important;"),G.appendChild(rt),W.push(rt)}return W}function J(G,U,W){for(var lt=W?"invTrans":"trans",g=U[lt],j=U.srcCoords,rt=[],$=[],O=!0,X=0;X<4;X++){var Q=G[X].getBoundingClientRect(),k=2*X,V=Q.left,I=Q.top;rt.push(V,I),O=O&&j&&V===j[k]&&I===j[k+1],$.push(G[X].offsetLeft,G[X].offsetTop)}return O&&g?g:(U.srcCoords=rt,U[lt]=W?dt($,rt):dt(rt,$))}function at(G){return G.nodeName.toUpperCase()==="CANVAS"}},66387:function(Ce,Jt){"use strict";var F=function(){function dt(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return dt}(),N=function(){function dt(){this.browser=new F,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return dt}(),ct=new N;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(ct.wxa=!0,ct.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?ct.worker=!0:typeof navigator>"u"?(ct.node=!0,ct.svgSupported=!0):K(navigator.userAgent,ct);function K(dt,gt){var vt=gt.browser,it=dt.match(/Firefox\/([\d.]+)/),et=dt.match(/MSIE\s([\d.]+)/)||dt.match(/Trident\/.+?rv:(([\d.]+))/),H=dt.match(/Edge?\/([\d.]+)/),J=/micromessenger/i.test(dt);it&&(vt.firefox=!0,vt.version=it[1]),et&&(vt.ie=!0,vt.version=et[1]),H&&(vt.edge=!0,vt.version=H[1],vt.newEdge=+H[1].split(".")[0]>18),J&&(vt.weChat=!0),gt.svgSupported=typeof SVGRect<"u",gt.touchEventsSupported="ontouchstart"in window&&!vt.ie&&!vt.edge,gt.pointerEventsSupported="onpointerdown"in window&&(vt.edge||vt.ie&&+vt.version>=11),gt.domSupported=typeof document<"u";var at=document.documentElement.style;gt.transform3dSupported=(vt.ie&&"transition"in at||vt.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in at)&&!("OTransition"in at),gt.transformSupported=gt.transform3dSupported||vt.ie&&+vt.version>=9}Jt.Z=ct},61158:function(Ce,Jt,F){"use strict";F.d(Jt,{OD:function(){return H},Oo:function(){return at},eV:function(){return vt},iP:function(){return et},sT:function(){return U},x1:function(){return W},xg:function(){return G}});var N=F(66387),ct=F(54058),K=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,dt=[],gt=N.Z.browser.firefox&&+N.Z.browser.version.split(".")[0]<39;function vt(lt,g,j,rt){return j=j||{},rt?it(lt,g,j):gt&&g.layerX!=null&&g.layerX!==g.offsetX?(j.zrX=g.layerX,j.zrY=g.layerY):g.offsetX!=null?(j.zrX=g.offsetX,j.zrY=g.offsetY):it(lt,g,j),j}function it(lt,g,j){if(N.Z.domSupported&&lt.getBoundingClientRect){var rt=g.clientX,$=g.clientY;if((0,ct.UK)(lt)){var O=lt.getBoundingClientRect();j.zrX=rt-O.left,j.zrY=$-O.top;return}else if((0,ct.A4)(dt,lt,rt,$)){j.zrX=dt[0],j.zrY=dt[1];return}}j.zrX=j.zrY=0}function et(lt){return lt||window.event}function H(lt,g,j){if(g=et(g),g.zrX!=null)return g;var rt=g.type,$=rt&&rt.indexOf("touch")>=0;if($){var X=rt!=="touchend"?g.targetTouches[0]:g.changedTouches[0];X&&vt(lt,X,g,j)}else{vt(lt,g,g,j);var O=J(g);g.zrDelta=O?O/120:-(g.detail||0)/3}var Q=g.button;return g.which==null&&Q!==void 0&&K.test(g.type)&&(g.which=Q&1?1:Q&2?3:Q&4?2:0),g}function J(lt){var g=lt.wheelDelta;if(g)return g;var j=lt.deltaX,rt=lt.deltaY;if(j==null||rt==null)return g;var $=Math.abs(rt!==0?rt:j),O=rt>0?-1:rt<0?1:j>0?-1:1;return 3*$*O}function at(lt,g,j,rt){lt.addEventListener(g,j,rt)}function G(lt,g,j,rt){lt.removeEventListener(g,j,rt)}var U=function(lt){lt.preventDefault(),lt.stopPropagation(),lt.cancelBubble=!0};function W(lt){return lt.which===2||lt.which===3}},32892:function(Ce,Jt,F){"use strict";F.d(Jt,{Iu:function(){return gt},JG:function(){return K},U1:function(){return vt},U_:function(){return et},Ue:function(){return N},bA:function(){return it},d9:function(){return H},dC:function(){return dt},yR:function(){return ct}});function N(){return[1,0,0,1,0,0]}function ct(J){return J[0]=1,J[1]=0,J[2]=0,J[3]=1,J[4]=0,J[5]=0,J}function K(J,at){return J[0]=at[0],J[1]=at[1],J[2]=at[2],J[3]=at[3],J[4]=at[4],J[5]=at[5],J}function dt(J,at,G){var U=at[0]*G[0]+at[2]*G[1],W=at[1]*G[0]+at[3]*G[1],lt=at[0]*G[2]+at[2]*G[3],g=at[1]*G[2]+at[3]*G[3],j=at[0]*G[4]+at[2]*G[5]+at[4],rt=at[1]*G[4]+at[3]*G[5]+at[5];return J[0]=U,J[1]=W,J[2]=lt,J[3]=g,J[4]=j,J[5]=rt,J}function gt(J,at,G){return J[0]=at[0],J[1]=at[1],J[2]=at[2],J[3]=at[3],J[4]=at[4]+G[0],J[5]=at[5]+G[1],J}function vt(J,at,G){var U=at[0],W=at[2],lt=at[4],g=at[1],j=at[3],rt=at[5],$=Math.sin(G),O=Math.cos(G);return J[0]=U*O+g*$,J[1]=-U*$+g*O,J[2]=W*O+j*$,J[3]=-W*$+O*j,J[4]=O*lt+$*rt,J[5]=O*rt-$*lt,J}function it(J,at,G){var U=G[0],W=G[1];return J[0]=at[0]*U,J[1]=at[1]*W,J[2]=at[2]*U,J[3]=at[3]*W,J[4]=at[4]*U,J[5]=at[5]*W,J}function et(J,at){var G=at[0],U=at[2],W=at[4],lt=at[1],g=at[3],j=at[5],rt=G*g-lt*U;return rt?(rt=1/rt,J[0]=g*rt,J[1]=-lt*rt,J[2]=-U*rt,J[3]=G*rt,J[4]=(U*j-g*W)*rt,J[5]=(lt*W-G*j)*rt,J):null}function H(J){var at=N();return K(at,J),at}},23132:function(Ce,Jt,F){"use strict";F.d(Jt,{Uo:function(){return K},n5:function(){return N},qW:function(){return H},rk:function(){return ct}});var N=12,ct="sans-serif",K=N+"px "+ct,dt=20,gt=100,vt="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function it(at){var G={};if(typeof JSON>"u")return G;for(var U=0;U<at.length;U++){var W=String.fromCharCode(U+32),lt=(at.charCodeAt(U)-dt)/gt;G[W]=lt}return G}var et=it(vt),H={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var at,G;return function(U,W){if(!at){var lt=H.createCanvas();at=lt&&lt.getContext("2d")}if(at)return G!==W&&(G=at.font=W||K),at.measureText(U);U=U||"",W=W||K;var g=/^([0-9]*?)px$/.exec(W),j=+(g&&g[1])||N,rt=0;if(W.indexOf("mono")>=0)rt=j*U.length;else for(var $=0;$<U.length;$++){var O=et[U[$]];rt+=O==null?j:O*j}return{width:rt}}}(),loadImage:function(at,G,U){var W=new Image;return W.onload=G,W.onerror=U,W.src=at,W}};function J(at){for(var G in H)at[G]&&(H[G]=at[G])}},19455:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return at}});var N=32,ct=7,K=256;function dt(G){for(var U=0;G>=N;)U|=G&1,G>>=1;return G+U}function gt(G,U,W,lt){var g=U+1;if(g===W)return 1;if(lt(G[g++],G[U])<0){for(;g<W&&lt(G[g],G[g-1])<0;)g++;vt(G,U,g)}else for(;g<W&&lt(G[g],G[g-1])>=0;)g++;return g-U}function vt(G,U,W){for(W--;U<W;){var lt=G[U];G[U++]=G[W],G[W--]=lt}}function it(G,U,W,lt,g){for(lt===U&&lt++;lt<W;lt++){for(var j=G[lt],rt=U,$=lt,O;rt<$;)O=rt+$>>>1,g(j,G[O])<0?$=O:rt=O+1;var X=lt-rt;switch(X){case 3:G[rt+3]=G[rt+2];case 2:G[rt+2]=G[rt+1];case 1:G[rt+1]=G[rt];break;default:for(;X>0;)G[rt+X]=G[rt+X-1],X--}G[rt]=j}}function et(G,U,W,lt,g,j){var rt=0,$=0,O=1;if(j(G,U[W+g])>0){for($=lt-g;O<$&&j(G,U[W+g+O])>0;)rt=O,O=(O<<1)+1,O<=0&&(O=$);O>$&&(O=$),rt+=g,O+=g}else{for($=g+1;O<$&&j(G,U[W+g-O])<=0;)rt=O,O=(O<<1)+1,O<=0&&(O=$);O>$&&(O=$);var X=rt;rt=g-O,O=g-X}for(rt++;rt<O;){var Q=rt+(O-rt>>>1);j(G,U[W+Q])>0?rt=Q+1:O=Q}return O}function H(G,U,W,lt,g,j){var rt=0,$=0,O=1;if(j(G,U[W+g])<0){for($=g+1;O<$&&j(G,U[W+g-O])<0;)rt=O,O=(O<<1)+1,O<=0&&(O=$);O>$&&(O=$);var X=rt;rt=g-O,O=g-X}else{for($=lt-g;O<$&&j(G,U[W+g+O])>=0;)rt=O,O=(O<<1)+1,O<=0&&(O=$);O>$&&(O=$),rt+=g,O+=g}for(rt++;rt<O;){var Q=rt+(O-rt>>>1);j(G,U[W+Q])<0?O=Q:rt=Q+1}return O}function J(G,U){var W=ct,lt=0,g=K,j=0,rt,$,O=0;lt=G.length,lt<2*K&&(g=lt>>>1);var X=[];j=lt<120?5:lt<1542?10:lt<119151?19:40,rt=[],$=[];function Q(M,T){rt[O]=M,$[O]=T,O+=1}function k(){for(;O>1;){var M=O-2;if(M>=1&&$[M-1]<=$[M]+$[M+1]||M>=2&&$[M-2]<=$[M]+$[M-1])$[M-1]<$[M+1]&&M--;else if($[M]>$[M+1])break;I(M)}}function V(){for(;O>1;){var M=O-2;M>0&&$[M-1]<$[M+1]&&M--,I(M)}}function I(M){var T=rt[M],A=$[M],L=rt[M+1],Z=$[M+1];$[M]=A+Z,M===O-3&&(rt[M+1]=rt[M+2],$[M+1]=$[M+2]),O--;var z=H(G[L],G,T,A,0,U);T+=z,A-=z,A!==0&&(Z=et(G[T+A-1],G,L,Z,Z-1,U),Z!==0&&(A<=Z?D(T,A,L,Z):C(T,A,L,Z)))}function D(M,T,A,L){var Z=0;for(Z=0;Z<T;Z++)X[Z]=G[M+Z];var z=0,ut=A,ot=M;if(G[ot++]=G[ut++],--L===0){for(Z=0;Z<T;Z++)G[ot+Z]=X[z+Z];return}if(T===1){for(Z=0;Z<L;Z++)G[ot+Z]=G[ut+Z];G[ot+L]=X[z];return}for(var ht=W,tt,ft,St;;){tt=0,ft=0,St=!1;do if(U(G[ut],X[z])<0){if(G[ot++]=G[ut++],ft++,tt=0,--L===0){St=!0;break}}else if(G[ot++]=X[z++],tt++,ft=0,--T===1){St=!0;break}while((tt|ft)<ht);if(St)break;do{if(tt=H(G[ut],X,z,T,0,U),tt!==0){for(Z=0;Z<tt;Z++)G[ot+Z]=X[z+Z];if(ot+=tt,z+=tt,T-=tt,T<=1){St=!0;break}}if(G[ot++]=G[ut++],--L===0){St=!0;break}if(ft=et(X[z],G,ut,L,0,U),ft!==0){for(Z=0;Z<ft;Z++)G[ot+Z]=G[ut+Z];if(ot+=ft,ut+=ft,L-=ft,L===0){St=!0;break}}if(G[ot++]=X[z++],--T===1){St=!0;break}ht--}while(tt>=ct||ft>=ct);if(St)break;ht<0&&(ht=0),ht+=2}if(W=ht,W<1&&(W=1),T===1){for(Z=0;Z<L;Z++)G[ot+Z]=G[ut+Z];G[ot+L]=X[z]}else{if(T===0)throw new Error;for(Z=0;Z<T;Z++)G[ot+Z]=X[z+Z]}}function C(M,T,A,L){var Z=0;for(Z=0;Z<L;Z++)X[Z]=G[A+Z];var z=M+T-1,ut=L-1,ot=A+L-1,ht=0,tt=0;if(G[ot--]=G[z--],--T===0){for(ht=ot-(L-1),Z=0;Z<L;Z++)G[ht+Z]=X[Z];return}if(L===1){for(ot-=T,z-=T,tt=ot+1,ht=z+1,Z=T-1;Z>=0;Z--)G[tt+Z]=G[ht+Z];G[ot]=X[ut];return}for(var ft=W;;){var St=0,st=0,xt=!1;do if(U(X[ut],G[z])<0){if(G[ot--]=G[z--],St++,st=0,--T===0){xt=!0;break}}else if(G[ot--]=X[ut--],st++,St=0,--L===1){xt=!0;break}while((St|st)<ft);if(xt)break;do{if(St=T-H(X[ut],G,M,T,T-1,U),St!==0){for(ot-=St,z-=St,T-=St,tt=ot+1,ht=z+1,Z=St-1;Z>=0;Z--)G[tt+Z]=G[ht+Z];if(T===0){xt=!0;break}}if(G[ot--]=X[ut--],--L===1){xt=!0;break}if(st=L-et(G[z],X,0,L,L-1,U),st!==0){for(ot-=st,ut-=st,L-=st,tt=ot+1,ht=ut+1,Z=0;Z<st;Z++)G[tt+Z]=X[ht+Z];if(L<=1){xt=!0;break}}if(G[ot--]=G[z--],--T===0){xt=!0;break}ft--}while(St>=ct||st>=ct);if(xt)break;ft<0&&(ft=0),ft+=2}if(W=ft,W<1&&(W=1),L===1){for(ot-=T,z-=T,tt=ot+1,ht=z+1,Z=T-1;Z>=0;Z--)G[tt+Z]=G[ht+Z];G[ot]=X[ut]}else{if(L===0)throw new Error;for(ht=ot-(L-1),Z=0;Z<L;Z++)G[ht+Z]=X[Z]}}return{mergeRuns:k,forceMergeRuns:V,pushRun:Q}}function at(G,U,W,lt){W||(W=0),lt||(lt=G.length);var g=lt-W;if(!(g<2)){var j=0;if(g<N){j=gt(G,W,lt,U),it(G,W,lt,W+j,U);return}var rt=J(G,U),$=dt(g);do{if(j=gt(G,W,lt,U),j<$){var O=g;O>$&&(O=$),it(G,W,W+O,W+j,U),j=O}rt.pushRun(W,j),rt.mergeRuns(),g-=j,W+=j}while(g!==0);rt.forceMergeRuns()}}},33051:function(Ce,Jt,F){"use strict";F.d(Jt,{$j:function(){return Lr},Bu:function(){return Bt},H:function(){return lt},HD:function(){return tt},I3:function(){return lr},Jn:function(){return rt},Jv:function(){return Ht},Kj:function(){return zt},Kn:function(){return st},M8:function(){return W},MY:function(){return Se},Mh:function(){return Dt},Qq:function(){return It},R1:function(){return ee},RI:function(){return nr},S6:function(){return D},TS:function(){return j},UI:function(){return C},WA:function(){return ut},WW:function(){return Pe},XP:function(){return L},XW:function(){return k},ZT:function(){return qe},ak:function(){return z},cd:function(){return ft},ce:function(){return O},cq:function(){return Q},d9:function(){return g},dL:function(){return Et},fU:function(){return wt},fy:function(){return Ft},hX:function(){return T},hj:function(){return St},hu:function(){return Be},jB:function(){return V},kJ:function(){return ot},kW:function(){return Oe},l7:function(){return $},mf:function(){return ht},nW:function(){return vr},pD:function(){return $t},s7:function(){return At},sE:function(){return A},tP:function(){return De},u4:function(){return M},zG:function(){return I}});var N=F(23132),ct=M(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(Yt,le){return Yt["[object "+le+"]"]=!0,Yt},{}),K=M(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(Yt,le){return Yt["[object "+le+"Array]"]=!0,Yt},{}),dt=Object.prototype.toString,gt=Array.prototype,vt=gt.forEach,it=gt.filter,et=gt.slice,H=gt.map,J=function(){}.constructor,at=J?J.prototype:null,G="__proto__",U=2311;function W(){return U++}function lt(){for(var Yt=[],le=0;le<arguments.length;le++)Yt[le]=arguments[le];typeof console<"u"&&console.error.apply(console,Yt)}function g(Yt){if(Yt==null||typeof Yt!="object")return Yt;var le=Yt,we=dt.call(Yt);if(we==="[object Array]"){if(!Kt(Yt)){le=[];for(var _e=0,Ut=Yt.length;_e<Ut;_e++)le[_e]=g(Yt[_e])}}else if(K[we]){if(!Kt(Yt)){var Qt=Yt.constructor;if(Qt.from)le=Qt.from(Yt);else{le=new Qt(Yt.length);for(var _e=0,Ut=Yt.length;_e<Ut;_e++)le[_e]=Yt[_e]}}}else if(!ct[we]&&!Kt(Yt)&&!Dt(Yt)){le={};for(var ie in Yt)Yt.hasOwnProperty(ie)&&ie!==G&&(le[ie]=g(Yt[ie]))}return le}function j(Yt,le,we){if(!st(le)||!st(Yt))return we?g(le):Yt;for(var _e in le)if(le.hasOwnProperty(_e)&&_e!==G){var Ut=Yt[_e],Qt=le[_e];st(Qt)&&st(Ut)&&!ot(Qt)&&!ot(Ut)&&!Dt(Qt)&&!Dt(Ut)&&!xt(Qt)&&!xt(Ut)&&!Kt(Qt)&&!Kt(Ut)?j(Ut,Qt,we):(we||!(_e in Yt))&&(Yt[_e]=g(le[_e]))}return Yt}function rt(Yt,le){for(var we=Yt[0],_e=1,Ut=Yt.length;_e<Ut;_e++)we=j(we,Yt[_e],le);return we}function $(Yt,le){if(Object.assign)Object.assign(Yt,le);else for(var we in le)le.hasOwnProperty(we)&&we!==G&&(Yt[we]=le[we]);return Yt}function O(Yt,le,we){for(var _e=L(le),Ut=0;Ut<_e.length;Ut++){var Qt=_e[Ut];(we?le[Qt]!=null:Yt[Qt]==null)&&(Yt[Qt]=le[Qt])}return Yt}var X=N.qW.createCanvas;function Q(Yt,le){if(Yt){if(Yt.indexOf)return Yt.indexOf(le);for(var we=0,_e=Yt.length;we<_e;we++)if(Yt[we]===le)return we}return-1}function k(Yt,le){var we=Yt.prototype;function _e(){}_e.prototype=le.prototype,Yt.prototype=new _e;for(var Ut in we)we.hasOwnProperty(Ut)&&(Yt.prototype[Ut]=we[Ut]);Yt.prototype.constructor=Yt,Yt.superClass=le}function V(Yt,le,we){if(Yt="prototype"in Yt?Yt.prototype:Yt,le="prototype"in le?le.prototype:le,Object.getOwnPropertyNames)for(var _e=Object.getOwnPropertyNames(le),Ut=0;Ut<_e.length;Ut++){var Qt=_e[Ut];Qt!=="constructor"&&(we?le[Qt]!=null:Yt[Qt]==null)&&(Yt[Qt]=le[Qt])}else O(Yt,le,we)}function I(Yt){return!Yt||typeof Yt=="string"?!1:typeof Yt.length=="number"}function D(Yt,le,we){if(!!(Yt&&le))if(Yt.forEach&&Yt.forEach===vt)Yt.forEach(le,we);else if(Yt.length===+Yt.length)for(var _e=0,Ut=Yt.length;_e<Ut;_e++)le.call(we,Yt[_e],_e,Yt);else for(var Qt in Yt)Yt.hasOwnProperty(Qt)&&le.call(we,Yt[Qt],Qt,Yt)}function C(Yt,le,we){if(!Yt)return[];if(!le)return De(Yt);if(Yt.map&&Yt.map===H)return Yt.map(le,we);for(var _e=[],Ut=0,Qt=Yt.length;Ut<Qt;Ut++)_e.push(le.call(we,Yt[Ut],Ut,Yt));return _e}function M(Yt,le,we,_e){if(!!(Yt&&le)){for(var Ut=0,Qt=Yt.length;Ut<Qt;Ut++)we=le.call(_e,we,Yt[Ut],Ut,Yt);return we}}function T(Yt,le,we){if(!Yt)return[];if(!le)return De(Yt);if(Yt.filter&&Yt.filter===it)return Yt.filter(le,we);for(var _e=[],Ut=0,Qt=Yt.length;Ut<Qt;Ut++)le.call(we,Yt[Ut],Ut,Yt)&&_e.push(Yt[Ut]);return _e}function A(Yt,le,we){if(!!(Yt&&le)){for(var _e=0,Ut=Yt.length;_e<Ut;_e++)if(le.call(we,Yt[_e],_e,Yt))return Yt[_e]}}function L(Yt){if(!Yt)return[];if(Object.keys)return Object.keys(Yt);var le=[];for(var we in Yt)Yt.hasOwnProperty(we)&&le.push(we);return le}function Z(Yt,le){for(var we=[],_e=2;_e<arguments.length;_e++)we[_e-2]=arguments[_e];return function(){return Yt.apply(le,we.concat(et.call(arguments)))}}var z=at&&ht(at.bind)?at.call.bind(at.bind):Z;function ut(Yt){for(var le=[],we=1;we<arguments.length;we++)le[we-1]=arguments[we];return function(){return Yt.apply(this,le.concat(et.call(arguments)))}}function ot(Yt){return Array.isArray?Array.isArray(Yt):dt.call(Yt)==="[object Array]"}function ht(Yt){return typeof Yt=="function"}function tt(Yt){return typeof Yt=="string"}function ft(Yt){return dt.call(Yt)==="[object String]"}function St(Yt){return typeof Yt=="number"}function st(Yt){var le=typeof Yt;return le==="function"||!!Yt&&le==="object"}function xt(Yt){return!!ct[dt.call(Yt)]}function wt(Yt){return!!K[dt.call(Yt)]}function Dt(Yt){return typeof Yt=="object"&&typeof Yt.nodeType=="number"&&typeof Yt.ownerDocument=="object"}function It(Yt){return Yt.colorStops!=null}function Et(Yt){return Yt.image!=null}function zt(Yt){return dt.call(Yt)==="[object RegExp]"}function Bt(Yt){return Yt!==Yt}function Ht(){for(var Yt=[],le=0;le<arguments.length;le++)Yt[le]=arguments[le];for(var we=0,_e=Yt.length;we<_e;we++)if(Yt[we]!=null)return Yt[we]}function $t(Yt,le){return Yt??le}function ee(Yt,le,we){return Yt??le??we}function De(Yt){for(var le=[],we=1;we<arguments.length;we++)le[we-1]=arguments[we];return et.apply(Yt,le)}function Se(Yt){if(typeof Yt=="number")return[Yt,Yt,Yt,Yt];var le=Yt.length;return le===2?[Yt[0],Yt[1],Yt[0],Yt[1]]:le===3?[Yt[0],Yt[1],Yt[2],Yt[1]]:Yt}function Be(Yt,le){if(!Yt)throw new Error(le)}function Ft(Yt){return Yt==null?null:typeof Yt.trim=="function"?Yt.trim():Yt.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var Tt="__ec_primitive__";function At(Yt){Yt[Tt]=!0}function Kt(Yt){return Yt[Tt]}var pe=function(){function Yt(le){this.data={};var we=ot(le);this.data={};var _e=this;le instanceof Yt?le.each(Ut):le&&D(le,Ut);function Ut(Qt,ie){we?_e.set(Qt,ie):_e.set(ie,Qt)}}return Yt.prototype.get=function(le){return this.data.hasOwnProperty(le)?this.data[le]:null},Yt.prototype.set=function(le,we){return this.data[le]=we},Yt.prototype.each=function(le,we){for(var _e in this.data)this.data.hasOwnProperty(_e)&&le.call(we,this.data[_e],_e)},Yt.prototype.keys=function(){return L(this.data)},Yt.prototype.removeKey=function(le){delete this.data[le]},Yt}();function Oe(Yt){return new pe(Yt)}function Pe(Yt,le){for(var we=new Yt.constructor(Yt.length+le.length),_e=0;_e<Yt.length;_e++)we[_e]=Yt[_e];for(var Ut=Yt.length,_e=0;_e<le.length;_e++)we[_e+Ut]=le[_e];return we}function vr(Yt,le){var we;if(Object.create)we=Object.create(Yt);else{var _e=function(){};_e.prototype=Yt,we=new _e}return le&&$(we,le),we}function Lr(Yt){var le=Yt.style;le.webkitUserSelect="none",le.userSelect="none",le.webkitTapHighlightColor="rgba(0,0,0,0)",le["-webkit-touch-callout"]="none"}function nr(Yt,le){return Yt.hasOwnProperty(le)}function qe(){}var lr=180/Math.PI},45280:function(Ce,Jt,F){"use strict";F.d(Jt,{Fp:function(){return I},Fv:function(){return g},IH:function(){return gt},JG:function(){return ct},Ne:function(){return k},TE:function(){return j},TK:function(){return rt},Ue:function(){return N},VV:function(){return V},WU:function(){return O},Zh:function(){return et},bA:function(){return lt},d9:function(){return K},lu:function(){return it},od:function(){return vt},t7:function(){return Q},t8:function(){return dt}});function N(D,C){return D==null&&(D=0),C==null&&(C=0),[D,C]}function ct(D,C){return D[0]=C[0],D[1]=C[1],D}function K(D){return[D[0],D[1]]}function dt(D,C,M){return D[0]=C,D[1]=M,D}function gt(D,C,M){return D[0]=C[0]+M[0],D[1]=C[1]+M[1],D}function vt(D,C,M,T){return D[0]=C[0]+M[0]*T,D[1]=C[1]+M[1]*T,D}function it(D,C,M){return D[0]=C[0]-M[0],D[1]=C[1]-M[1],D}function et(D){return Math.sqrt(J(D))}var H=null;function J(D){return D[0]*D[0]+D[1]*D[1]}var at=null;function G(D,C,M){return D[0]=C[0]*M[0],D[1]=C[1]*M[1],D}function U(D,C,M){return D[0]=C[0]/M[0],D[1]=C[1]/M[1],D}function W(D,C){return D[0]*C[0]+D[1]*C[1]}function lt(D,C,M){return D[0]=C[0]*M,D[1]=C[1]*M,D}function g(D,C){var M=et(C);return M===0?(D[0]=0,D[1]=0):(D[0]=C[0]/M,D[1]=C[1]/M),D}function j(D,C){return Math.sqrt((D[0]-C[0])*(D[0]-C[0])+(D[1]-C[1])*(D[1]-C[1]))}var rt=j;function $(D,C){return(D[0]-C[0])*(D[0]-C[0])+(D[1]-C[1])*(D[1]-C[1])}var O=$;function X(D,C){return D[0]=-C[0],D[1]=-C[1],D}function Q(D,C,M,T){return D[0]=C[0]+T*(M[0]-C[0]),D[1]=C[1]+T*(M[1]-C[1]),D}function k(D,C,M){var T=C[0],A=C[1];return D[0]=M[0]*T+M[2]*A+M[4],D[1]=M[1]*T+M[3]*A+M[5],D}function V(D,C,M){return D[0]=Math.min(C[0],M[0]),D[1]=Math.min(C[1],M[1]),D}function I(D,C,M){return D[0]=Math.max(C[0],M[0]),D[1]=Math.max(C[1],M[1]),D}},52776:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=function(dt){(0,N.ZT)(gt,dt);function gt(){var vt=dt!==null&&dt.apply(this,arguments)||this;return vt.type="compound",vt}return gt.prototype._updatePathDirty=function(){for(var vt=this.shape.paths,it=this.shapeChanged(),et=0;et<vt.length;et++)it=it||vt[et].shapeChanged();it&&this.dirtyShape()},gt.prototype.beforeBrush=function(){this._updatePathDirty();for(var vt=this.shape.paths||[],it=this.getGlobalScale(),et=0;et<vt.length;et++)vt[et].path||vt[et].createPathProxy(),vt[et].path.setScale(it[0],it[1],vt[et].segmentIgnoreThreshold)},gt.prototype.buildPath=function(vt,it){for(var et=it.paths||[],H=0;H<et.length;H++)et[H].buildPath(vt,et[H].shape,!0)},gt.prototype.afterBrush=function(){for(var vt=this.shape.paths||[],it=0;it<vt.length;it++)vt[it].pathUpdated()},gt.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),ct.ZP.prototype.getBoundingRect.call(this)},gt}(ct.ZP);Jt.Z=K},7719:function(Ce,Jt,F){"use strict";F.d(Jt,{ik:function(){return et},tj:function(){return it}});var N=F(70655),ct=F(85823),K=F(60479),dt=F(33051),gt=F(14414),vt="__zr_style_"+Math.round(Math.random()*10),it={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},et={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};it[vt]=!0;var H=["z","z2","invisible"],J=["invisible"],at=function(lt){(0,N.ZT)(g,lt);function g(j){return lt.call(this,j)||this}return g.prototype._init=function(j){for(var rt=(0,dt.XP)(j),$=0;$<rt.length;$++){var O=rt[$];O==="style"?this.useStyle(j[O]):lt.prototype.attrKV.call(this,O,j[O])}this.style||this.useStyle({})},g.prototype.beforeBrush=function(){},g.prototype.afterBrush=function(){},g.prototype.innerBeforeBrush=function(){},g.prototype.innerAfterBrush=function(){},g.prototype.shouldBePainted=function(j,rt,$,O){var X=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&W(this,j,rt)||X&&!X[0]&&!X[3])return!1;if($&&this.__clipPaths){for(var Q=0;Q<this.__clipPaths.length;++Q)if(this.__clipPaths[Q].isZeroArea())return!1}if(O&&this.parent)for(var k=this.parent;k;){if(k.ignore)return!1;k=k.parent}return!0},g.prototype.contain=function(j,rt){return this.rectContain(j,rt)},g.prototype.traverse=function(j,rt){j.call(rt,this)},g.prototype.rectContain=function(j,rt){var $=this.transformCoordToLocal(j,rt),O=this.getBoundingRect();return O.contain($[0],$[1])},g.prototype.getPaintRect=function(){var j=this._paintRect;if(!this._paintRect||this.__dirty){var rt=this.transform,$=this.getBoundingRect(),O=this.style,X=O.shadowBlur||0,Q=O.shadowOffsetX||0,k=O.shadowOffsetY||0;j=this._paintRect||(this._paintRect=new K.Z(0,0,0,0)),rt?K.Z.applyTransform(j,$,rt):j.copy($),(X||Q||k)&&(j.width+=X*2+Math.abs(Q),j.height+=X*2+Math.abs(k),j.x=Math.min(j.x,j.x+Q-X),j.y=Math.min(j.y,j.y+k-X));var V=this.dirtyRectTolerance;j.isZero()||(j.x=Math.floor(j.x-V),j.y=Math.floor(j.y-V),j.width=Math.ceil(j.width+1+V*2),j.height=Math.ceil(j.height+1+V*2))}return j},g.prototype.setPrevPaintRect=function(j){j?(this._prevPaintRect=this._prevPaintRect||new K.Z(0,0,0,0),this._prevPaintRect.copy(j)):this._prevPaintRect=null},g.prototype.getPrevPaintRect=function(){return this._prevPaintRect},g.prototype.animateStyle=function(j){return this.animate("style",j)},g.prototype.updateDuringAnimation=function(j){j==="style"?this.dirtyStyle():this.markRedraw()},g.prototype.attrKV=function(j,rt){j!=="style"?lt.prototype.attrKV.call(this,j,rt):this.style?this.setStyle(rt):this.useStyle(rt)},g.prototype.setStyle=function(j,rt){return typeof j=="string"?this.style[j]=rt:(0,dt.l7)(this.style,j),this.dirtyStyle(),this},g.prototype.dirtyStyle=function(j){j||this.markRedraw(),this.__dirty|=gt.SE,this._rect&&(this._rect=null)},g.prototype.dirty=function(){this.dirtyStyle()},g.prototype.styleChanged=function(){return!!(this.__dirty&gt.SE)},g.prototype.styleUpdated=function(){this.__dirty&=~gt.SE},g.prototype.createStyle=function(j){return(0,dt.nW)(it,j)},g.prototype.useStyle=function(j){j[vt]||(j=this.createStyle(j)),this.__inHover?this.__hoverStyle=j:this.style=j,this.dirtyStyle()},g.prototype.isStyleObject=function(j){return j[vt]},g.prototype._innerSaveToNormal=function(j){lt.prototype._innerSaveToNormal.call(this,j);var rt=this._normalState;j.style&&!rt.style&&(rt.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(j,rt,H)},g.prototype._applyStateObj=function(j,rt,$,O,X,Q){lt.prototype._applyStateObj.call(this,j,rt,$,O,X,Q);var k=!(rt&&O),V;if(rt&&rt.style?X?O?V=rt.style:(V=this._mergeStyle(this.createStyle(),$.style),this._mergeStyle(V,rt.style)):(V=this._mergeStyle(this.createStyle(),O?this.style:$.style),this._mergeStyle(V,rt.style)):k&&(V=$.style),V)if(X){var I=this.style;if(this.style=this.createStyle(k?{}:I),k)for(var D=(0,dt.XP)(I),C=0;C<D.length;C++){var M=D[C];M in V&&(V[M]=V[M],this.style[M]=I[M])}for(var T=(0,dt.XP)(V),C=0;C<T.length;C++){var M=T[C];this.style[M]=this.style[M]}this._transitionState(j,{style:V},Q,this.getAnimationStyleProps())}else this.useStyle(V);for(var A=this.__inHover?J:H,C=0;C<A.length;C++){var M=A[C];rt&&rt[M]!=null?this[M]=rt[M]:k&&$[M]!=null&&(this[M]=$[M])}},g.prototype._mergeStates=function(j){for(var rt=lt.prototype._mergeStates.call(this,j),$,O=0;O<j.length;O++){var X=j[O];X.style&&($=$||{},this._mergeStyle($,X.style))}return $&&(rt.style=$),rt},g.prototype._mergeStyle=function(j,rt){return(0,dt.l7)(j,rt),j},g.prototype.getAnimationStyleProps=function(){return et},g.initDefaultProps=function(){var j=g.prototype;j.type="displayable",j.invisible=!1,j.z=0,j.z2=0,j.zlevel=0,j.culling=!1,j.cursor="pointer",j.rectHover=!1,j.incremental=!1,j._rect=null,j.dirtyRectTolerance=0,j.__dirty=gt.YV|gt.SE}(),g}(ct.Z),G=new K.Z(0,0,0,0),U=new K.Z(0,0,0,0);function W(lt,g,j){return G.copy(lt.getBoundingRect()),lt.transform&&G.applyTransform(lt.transform),U.width=g,U.height=j,!G.intersect(U)}Jt.ZP=at},31797:function(Ce,Jt){"use strict";var F=function(){function N(ct){this.colorStops=ct||[]}return N.prototype.addColorStop=function(ct,K){this.colorStops.push({offset:ct,color:K})},N}();Jt.Z=F},38154:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(33051),K=F(85823),dt=F(60479),gt=function(vt){(0,N.ZT)(it,vt);function it(et){var H=vt.call(this)||this;return H.isGroup=!0,H._children=[],H.attr(et),H}return it.prototype.childrenRef=function(){return this._children},it.prototype.children=function(){return this._children.slice()},it.prototype.childAt=function(et){return this._children[et]},it.prototype.childOfName=function(et){for(var H=this._children,J=0;J<H.length;J++)if(H[J].name===et)return H[J]},it.prototype.childCount=function(){return this._children.length},it.prototype.add=function(et){return et&&et!==this&&et.parent!==this&&(this._children.push(et),this._doAdd(et)),this},it.prototype.addBefore=function(et,H){if(et&&et!==this&&et.parent!==this&&H&&H.parent===this){var J=this._children,at=J.indexOf(H);at>=0&&(J.splice(at,0,et),this._doAdd(et))}return this},it.prototype.replace=function(et,H){var J=ct.cq(this._children,et);return J>=0&&this.replaceAt(H,J),this},it.prototype.replaceAt=function(et,H){var J=this._children,at=J[H];if(et&&et!==this&&et.parent!==this&&et!==at){J[H]=et,at.parent=null;var G=this.__zr;G&&at.removeSelfFromZr(G),this._doAdd(et)}return this},it.prototype._doAdd=function(et){et.parent&&et.parent.remove(et),et.parent=this;var H=this.__zr;H&&H!==et.__zr&&et.addSelfToZr(H),H&&H.refresh()},it.prototype.remove=function(et){var H=this.__zr,J=this._children,at=ct.cq(J,et);return at<0?this:(J.splice(at,1),et.parent=null,H&&et.removeSelfFromZr(H),H&&H.refresh(),this)},it.prototype.removeAll=function(){for(var et=this._children,H=this.__zr,J=0;J<et.length;J++){var at=et[J];H&&at.removeSelfFromZr(H),at.parent=null}return et.length=0,this},it.prototype.eachChild=function(et,H){for(var J=this._children,at=0;at<J.length;at++){var G=J[at];et.call(H,G,at)}return this},it.prototype.traverse=function(et,H){for(var J=0;J<this._children.length;J++){var at=this._children[J],G=et.call(H,at);at.isGroup&&!G&&at.traverse(et,H)}return this},it.prototype.addSelfToZr=function(et){vt.prototype.addSelfToZr.call(this,et);for(var H=0;H<this._children.length;H++){var J=this._children[H];J.addSelfToZr(et)}},it.prototype.removeSelfFromZr=function(et){vt.prototype.removeSelfFromZr.call(this,et);for(var H=0;H<this._children.length;H++){var J=this._children[H];J.removeSelfFromZr(et)}},it.prototype.getBoundingRect=function(et){for(var H=new dt.Z(0,0,0,0),J=et||this._children,at=[],G=null,U=0;U<J.length;U++){var W=J[U];if(!(W.ignore||W.invisible)){var lt=W.getBoundingRect(),g=W.getLocalTransform(at);g?(dt.Z.applyTransform(H,lt,g),G=G||H.clone(),G.union(H)):(G=G||lt.clone(),G.union(lt))}}return G||H},it}(K.Z);gt.prototype.type="group",Jt.Z=gt},44535:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(7719),K=F(60479),dt=F(33051),gt=(0,dt.ce)({x:0,y:0},ct.tj),vt={style:(0,dt.ce)({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ct.ik.style)};function it(H){return!!(H&&typeof H!="string"&&H.width&&H.height)}var et=function(H){(0,N.ZT)(J,H);function J(){return H!==null&&H.apply(this,arguments)||this}return J.prototype.createStyle=function(at){return(0,dt.nW)(gt,at)},J.prototype._getSize=function(at){var G=this.style,U=G[at];if(U!=null)return U;var W=it(G.image)?G.image:this.__image;if(!W)return 0;var lt=at==="width"?"height":"width",g=G[lt];return g==null?W[at]:W[at]/W[lt]*g},J.prototype.getWidth=function(){return this._getSize("width")},J.prototype.getHeight=function(){return this._getSize("height")},J.prototype.getAnimationStyleProps=function(){return vt},J.prototype.getBoundingRect=function(){var at=this.style;return this._rect||(this._rect=new K.Z(at.x||0,at.y||0,this.getWidth(),this.getHeight())),this._rect},J}(ct.ZP);et.prototype.type="image",Jt.ZP=et},74438:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(31797),K=function(dt){(0,N.ZT)(gt,dt);function gt(vt,it,et,H,J,at){var G=dt.call(this,J)||this;return G.x=vt??0,G.y=it??0,G.x2=et??1,G.y2=H??0,G.type="linear",G.global=at||!1,G}return gt}(ct.Z);Jt.Z=K},327:function(Ce,Jt,F){"use strict";F.d(Jt,{$t:function(){return A},ZP:function(){return ut}});var N=F(70655),ct=F(7719),K=F(14014),dt=F(33640),gt=F(29023);function vt(ot,ht,tt,ft,St,st,xt,wt,Dt,It,Et){if(Dt===0)return!1;var zt=Dt;if(Et>ht+zt&&Et>ft+zt&&Et>st+zt&&Et>wt+zt||Et<ht-zt&&Et<ft-zt&&Et<st-zt&&Et<wt-zt||It>ot+zt&&It>tt+zt&&It>St+zt&&It>xt+zt||It<ot-zt&&It<tt-zt&&It<St-zt&&It<xt-zt)return!1;var Bt=gt.t1(ot,ht,tt,ft,St,st,xt,wt,It,Et,null);return Bt<=zt/2}var it=F(25674),et=F(3266),H=Math.PI*2;function J(ot,ht,tt,ft,St,st,xt,wt,Dt){if(xt===0)return!1;var It=xt;wt-=ot,Dt-=ht;var Et=Math.sqrt(wt*wt+Dt*Dt);if(Et-It>tt||Et+It<tt)return!1;if(Math.abs(ft-St)%H<1e-4)return!0;if(st){var zt=ft;ft=(0,et.m)(St),St=(0,et.m)(zt)}else ft=(0,et.m)(ft),St=(0,et.m)(St);ft>St&&(St+=H);var Bt=Math.atan2(Dt,wt);return Bt<0&&(Bt+=H),Bt>=ft&&Bt<=St||Bt+H>=ft&&Bt+H<=St}var at=F(47637),G=K.Z.CMD,U=Math.PI*2,W=1e-4;function lt(ot,ht){return Math.abs(ot-ht)<W}var g=[-1,-1,-1],j=[-1,-1];function rt(){var ot=j[0];j[0]=j[1],j[1]=ot}function $(ot,ht,tt,ft,St,st,xt,wt,Dt,It){if(It>ht&&It>ft&&It>st&&It>wt||It<ht&&It<ft&&It<st&&It<wt)return 0;var Et=gt.kD(ht,ft,st,wt,It,g);if(Et===0)return 0;for(var zt=0,Bt=-1,Ht=void 0,$t=void 0,ee=0;ee<Et;ee++){var De=g[ee],Se=De===0||De===1?.5:1,Be=gt.af(ot,tt,St,xt,De);Be<Dt||(Bt<0&&(Bt=gt.pP(ht,ft,st,wt,j),j[1]<j[0]&&Bt>1&&rt(),Ht=gt.af(ht,ft,st,wt,j[0]),Bt>1&&($t=gt.af(ht,ft,st,wt,j[1]))),Bt===2?De<j[0]?zt+=Ht<ht?Se:-Se:De<j[1]?zt+=$t<Ht?Se:-Se:zt+=wt<$t?Se:-Se:De<j[0]?zt+=Ht<ht?Se:-Se:zt+=wt<Ht?Se:-Se)}return zt}function O(ot,ht,tt,ft,St,st,xt,wt){if(wt>ht&&wt>ft&&wt>st||wt<ht&&wt<ft&&wt<st)return 0;var Dt=gt.Jz(ht,ft,st,wt,g);if(Dt===0)return 0;var It=gt.QC(ht,ft,st);if(It>=0&&It<=1){for(var Et=0,zt=gt.Zm(ht,ft,st,It),Bt=0;Bt<Dt;Bt++){var Ht=g[Bt]===0||g[Bt]===1?.5:1,$t=gt.Zm(ot,tt,St,g[Bt]);$t<xt||(g[Bt]<It?Et+=zt<ht?Ht:-Ht:Et+=st<zt?Ht:-Ht)}return Et}else{var Ht=g[0]===0||g[0]===1?.5:1,$t=gt.Zm(ot,tt,St,g[0]);return $t<xt?0:st<ht?Ht:-Ht}}function X(ot,ht,tt,ft,St,st,xt,wt){if(wt-=ht,wt>tt||wt<-tt)return 0;var Dt=Math.sqrt(tt*tt-wt*wt);g[0]=-Dt,g[1]=Dt;var It=Math.abs(ft-St);if(It<1e-4)return 0;if(It>=U-1e-4){ft=0,St=U;var Et=st?1:-1;return xt>=g[0]+ot&&xt<=g[1]+ot?Et:0}if(ft>St){var zt=ft;ft=St,St=zt}ft<0&&(ft+=U,St+=U);for(var Bt=0,Ht=0;Ht<2;Ht++){var $t=g[Ht];if($t+ot>xt){var ee=Math.atan2(wt,$t),Et=st?1:-1;ee<0&&(ee=U+ee),(ee>=ft&&ee<=St||ee+U>=ft&&ee+U<=St)&&(ee>Math.PI/2&&ee<Math.PI*1.5&&(Et=-Et),Bt+=Et)}}return Bt}function Q(ot,ht,tt,ft,St){for(var st=ot.data,xt=ot.len(),wt=0,Dt=0,It=0,Et=0,zt=0,Bt,Ht,$t=0;$t<xt;){var ee=st[$t++],De=$t===1;switch(ee===G.M&&$t>1&&(tt||(wt+=(0,at.Z)(Dt,It,Et,zt,ft,St))),De&&(Dt=st[$t],It=st[$t+1],Et=Dt,zt=It),ee){case G.M:Et=st[$t++],zt=st[$t++],Dt=Et,It=zt;break;case G.L:if(tt){if(dt.m(Dt,It,st[$t],st[$t+1],ht,ft,St))return!0}else wt+=(0,at.Z)(Dt,It,st[$t],st[$t+1],ft,St)||0;Dt=st[$t++],It=st[$t++];break;case G.C:if(tt){if(vt(Dt,It,st[$t++],st[$t++],st[$t++],st[$t++],st[$t],st[$t+1],ht,ft,St))return!0}else wt+=$(Dt,It,st[$t++],st[$t++],st[$t++],st[$t++],st[$t],st[$t+1],ft,St)||0;Dt=st[$t++],It=st[$t++];break;case G.Q:if(tt){if(it.m(Dt,It,st[$t++],st[$t++],st[$t],st[$t+1],ht,ft,St))return!0}else wt+=O(Dt,It,st[$t++],st[$t++],st[$t],st[$t+1],ft,St)||0;Dt=st[$t++],It=st[$t++];break;case G.A:var Se=st[$t++],Be=st[$t++],Ft=st[$t++],Tt=st[$t++],At=st[$t++],Kt=st[$t++];$t+=1;var pe=!!(1-st[$t++]);Bt=Math.cos(At)*Ft+Se,Ht=Math.sin(At)*Tt+Be,De?(Et=Bt,zt=Ht):wt+=(0,at.Z)(Dt,It,Bt,Ht,ft,St);var Oe=(ft-Se)*Tt/Ft+Se;if(tt){if(J(Se,Be,Tt,At,At+Kt,pe,ht,Oe,St))return!0}else wt+=X(Se,Be,Tt,At,At+Kt,pe,Oe,St);Dt=Math.cos(At+Kt)*Ft+Se,It=Math.sin(At+Kt)*Tt+Be;break;case G.R:Et=Dt=st[$t++],zt=It=st[$t++];var Pe=st[$t++],vr=st[$t++];if(Bt=Et+Pe,Ht=zt+vr,tt){if(dt.m(Et,zt,Bt,zt,ht,ft,St)||dt.m(Bt,zt,Bt,Ht,ht,ft,St)||dt.m(Bt,Ht,Et,Ht,ht,ft,St)||dt.m(Et,Ht,Et,zt,ht,ft,St))return!0}else wt+=(0,at.Z)(Bt,zt,Bt,Ht,ft,St),wt+=(0,at.Z)(Et,Ht,Et,zt,ft,St);break;case G.Z:if(tt){if(dt.m(Dt,It,Et,zt,ht,ft,St))return!0}else wt+=(0,at.Z)(Dt,It,Et,zt,ft,St);Dt=Et,It=zt;break}}return!tt&&!lt(It,zt)&&(wt+=(0,at.Z)(Dt,It,Et,zt,ft,St)||0),wt!==0}function k(ot,ht,tt){return Q(ot,0,!1,ht,tt)}function V(ot,ht,tt,ft){return Q(ot,ht,!0,tt,ft)}var I=F(33051),D=F(21092),C=F(4990),M=F(14414),T=F(87411),A=(0,I.ce)({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ct.tj),L={style:(0,I.ce)({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ct.ik.style)},Z=T.dN.concat(["invisible","culling","z","z2","zlevel","parent"]),z=function(ot){(0,N.ZT)(ht,ot);function ht(tt){return ot.call(this,tt)||this}return ht.prototype.update=function(){var tt=this;ot.prototype.update.call(this);var ft=this.style;if(ft.decal){var St=this._decalEl=this._decalEl||new ht;St.buildPath===ht.prototype.buildPath&&(St.buildPath=function(Dt){tt.buildPath(Dt,tt.shape)}),St.silent=!0;var st=St.style;for(var xt in ft)st[xt]!==ft[xt]&&(st[xt]=ft[xt]);st.fill=ft.fill?ft.decal:null,st.decal=null,st.shadowColor=null,ft.strokeFirst&&(st.stroke=null);for(var wt=0;wt<Z.length;++wt)St[Z[wt]]=this[Z[wt]];St.__dirty|=M.YV}else this._decalEl&&(this._decalEl=null)},ht.prototype.getDecalElement=function(){return this._decalEl},ht.prototype._init=function(tt){var ft=(0,I.XP)(tt);this.shape=this.getDefaultShape();var St=this.getDefaultStyle();St&&this.useStyle(St);for(var st=0;st<ft.length;st++){var xt=ft[st],wt=tt[xt];xt==="style"?this.style?(0,I.l7)(this.style,wt):this.useStyle(wt):xt==="shape"?(0,I.l7)(this.shape,wt):ot.prototype.attrKV.call(this,xt,wt)}this.style||this.useStyle({})},ht.prototype.getDefaultStyle=function(){return null},ht.prototype.getDefaultShape=function(){return{}},ht.prototype.canBeInsideText=function(){return this.hasFill()},ht.prototype.getInsideTextFill=function(){var tt=this.style.fill;if(tt!=="none"){if((0,I.HD)(tt)){var ft=(0,D.lum)(tt,0);return ft>.5?C.vU:ft>.2?C.iv:C.GD}else if(tt)return C.GD}return C.vU},ht.prototype.getInsideTextStroke=function(tt){var ft=this.style.fill;if((0,I.HD)(ft)){var St=this.__zr,st=!!(St&&St.isDarkMode()),xt=(0,D.lum)(tt,0)<C.Ak;if(st===xt)return ft}},ht.prototype.buildPath=function(tt,ft,St){},ht.prototype.pathUpdated=function(){this.__dirty&=~M.RH},ht.prototype.getUpdatedPathProxy=function(tt){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,tt),this.path},ht.prototype.createPathProxy=function(){this.path=new K.Z(!1)},ht.prototype.hasStroke=function(){var tt=this.style,ft=tt.stroke;return!(ft==null||ft==="none"||!(tt.lineWidth>0))},ht.prototype.hasFill=function(){var tt=this.style,ft=tt.fill;return ft!=null&&ft!=="none"},ht.prototype.getBoundingRect=function(){var tt=this._rect,ft=this.style,St=!tt;if(St){var st=!1;this.path||(st=!0,this.createPathProxy());var xt=this.path;(st||this.__dirty&M.RH)&&(xt.beginPath(),this.buildPath(xt,this.shape,!1),this.pathUpdated()),tt=xt.getBoundingRect()}if(this._rect=tt,this.hasStroke()&&this.path&&this.path.len()>0){var wt=this._rectStroke||(this._rectStroke=tt.clone());if(this.__dirty||St){wt.copy(tt);var Dt=ft.strokeNoScale?this.getLineScale():1,It=ft.lineWidth;if(!this.hasFill()){var Et=this.strokeContainThreshold;It=Math.max(It,Et??4)}Dt>1e-10&&(wt.width+=It/Dt,wt.height+=It/Dt,wt.x-=It/Dt/2,wt.y-=It/Dt/2)}return wt}return tt},ht.prototype.contain=function(tt,ft){var St=this.transformCoordToLocal(tt,ft),st=this.getBoundingRect(),xt=this.style;if(tt=St[0],ft=St[1],st.contain(tt,ft)){var wt=this.path;if(this.hasStroke()){var Dt=xt.lineWidth,It=xt.strokeNoScale?this.getLineScale():1;if(It>1e-10&&(this.hasFill()||(Dt=Math.max(Dt,this.strokeContainThreshold)),V(wt,Dt/It,tt,ft)))return!0}if(this.hasFill())return k(wt,tt,ft)}return!1},ht.prototype.dirtyShape=function(){this.__dirty|=M.RH,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},ht.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},ht.prototype.animateShape=function(tt){return this.animate("shape",tt)},ht.prototype.updateDuringAnimation=function(tt){tt==="style"?this.dirtyStyle():tt==="shape"?this.dirtyShape():this.markRedraw()},ht.prototype.attrKV=function(tt,ft){tt==="shape"?this.setShape(ft):ot.prototype.attrKV.call(this,tt,ft)},ht.prototype.setShape=function(tt,ft){var St=this.shape;return St||(St=this.shape={}),typeof tt=="string"?St[tt]=ft:(0,I.l7)(St,tt),this.dirtyShape(),this},ht.prototype.shapeChanged=function(){return!!(this.__dirty&M.RH)},ht.prototype.createStyle=function(tt){return(0,I.nW)(A,tt)},ht.prototype._innerSaveToNormal=function(tt){ot.prototype._innerSaveToNormal.call(this,tt);var ft=this._normalState;tt.shape&&!ft.shape&&(ft.shape=(0,I.l7)({},this.shape))},ht.prototype._applyStateObj=function(tt,ft,St,st,xt,wt){ot.prototype._applyStateObj.call(this,tt,ft,St,st,xt,wt);var Dt=!(ft&&st),It;if(ft&&ft.shape?xt?st?It=ft.shape:(It=(0,I.l7)({},St.shape),(0,I.l7)(It,ft.shape)):(It=(0,I.l7)({},st?this.shape:St.shape),(0,I.l7)(It,ft.shape)):Dt&&(It=St.shape),It)if(xt){this.shape=(0,I.l7)({},this.shape);for(var Et={},zt=(0,I.XP)(It),Bt=0;Bt<zt.length;Bt++){var Ht=zt[Bt];typeof It[Ht]=="object"?this.shape[Ht]=It[Ht]:Et[Ht]=It[Ht]}this._transitionState(tt,{shape:Et},wt)}else this.shape=It,this.dirtyShape()},ht.prototype._mergeStates=function(tt){for(var ft=ot.prototype._mergeStates.call(this,tt),St,st=0;st<tt.length;st++){var xt=tt[st];xt.shape&&(St=St||{},this._mergeStyle(St,xt.shape))}return St&&(ft.shape=St),ft},ht.prototype.getAnimationStyleProps=function(){return L},ht.prototype.isZeroArea=function(){return!1},ht.extend=function(tt){var ft=function(st){(0,N.ZT)(xt,st);function xt(wt){var Dt=st.call(this,wt)||this;return tt.init&&tt.init.call(Dt,wt),Dt}return xt.prototype.getDefaultStyle=function(){return(0,I.d9)(tt.style)},xt.prototype.getDefaultShape=function(){return(0,I.d9)(tt.shape)},xt}(ht);for(var St in tt)typeof tt[St]=="function"&&(ft.prototype[St]=tt[St]);return ft},ht.initDefaultProps=function(){var tt=ht.prototype;tt.type="path",tt.strokeContainThreshold=5,tt.segmentIgnoreThreshold=0,tt.subPixelOptimize=!1,tt.autoBatch=!1,tt.__dirty=M.YV|M.SE|M.RH}(),ht}(ct.ZP),ut=z},36369:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(31797),K=function(dt){(0,N.ZT)(gt,dt);function gt(vt,it,et,H,J){var at=dt.call(this,H)||this;return at.x=vt??.5,at.y=it??.5,at.r=et??.5,at.type="radial",at.global=J||!1,at}return gt}(ct.Z);Jt.Z=K},71505:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(7719),K=F(80423),dt=F(327),gt=F(33051),vt=F(23132),it=(0,gt.ce)({strokeFirst:!0,font:vt.Uo,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},dt.$t),et=function(H){(0,N.ZT)(J,H);function J(){return H!==null&&H.apply(this,arguments)||this}return J.prototype.hasStroke=function(){var at=this.style,G=at.stroke;return G!=null&&G!=="none"&&at.lineWidth>0},J.prototype.hasFill=function(){var at=this.style,G=at.fill;return G!=null&&G!=="none"},J.prototype.createStyle=function(at){return(0,gt.nW)(it,at)},J.prototype.setBoundingRect=function(at){this._rect=at},J.prototype.getBoundingRect=function(){var at=this.style;if(!this._rect){var G=at.text;G!=null?G+="":G="";var U=(0,K.lP)(G,at.font,at.textAlign,at.textBaseline);if(U.x+=at.x||0,U.y+=at.y||0,this.hasStroke()){var W=at.lineWidth;U.x-=W/2,U.y-=W/2,U.width+=W,U.height+=W}this._rect=U}return this._rect},J.initDefaultProps=function(){var at=J.prototype;at.dirtyRectTolerance=10}(),J}(ct.ZP);et.prototype.type="tspan",Jt.Z=et},96498:function(Ce,Jt,F){"use strict";F.d(Jt,{VG:function(){return rt},Y1:function(){return O}});var N=F(70655),ct=F(66918),K=F(71505),dt=F(33051),gt=F(80423),vt=F(44535),it=F(35151),et=F(60479),H=F(7719),J=F(23132),at={fill:"#000"},G=2,U={style:(0,dt.ce)({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},H.ik.style)},W=function(M){(0,N.ZT)(T,M);function T(A){var L=M.call(this)||this;return L.type="text",L._children=[],L._defaultStyle=at,L.attr(A),L}return T.prototype.childrenRef=function(){return this._children},T.prototype.update=function(){M.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var A=0;A<this._children.length;A++){var L=this._children[A];L.zlevel=this.zlevel,L.z=this.z,L.z2=this.z2,L.culling=this.culling,L.cursor=this.cursor,L.invisible=this.invisible}},T.prototype.updateTransform=function(){var A=this.innerTransformable;A?(A.updateTransform(),A.transform&&(this.transform=A.transform)):M.prototype.updateTransform.call(this)},T.prototype.getLocalTransform=function(A){var L=this.innerTransformable;return L?L.getLocalTransform(A):M.prototype.getLocalTransform.call(this,A)},T.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),M.prototype.getComputedTransform.call(this)},T.prototype._updateSubTexts=function(){this._childCursor=0,X(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},T.prototype.addSelfToZr=function(A){M.prototype.addSelfToZr.call(this,A);for(var L=0;L<this._children.length;L++)this._children[L].__zr=A},T.prototype.removeSelfFromZr=function(A){M.prototype.removeSelfFromZr.call(this,A);for(var L=0;L<this._children.length;L++)this._children[L].__zr=null},T.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var A=new et.Z(0,0,0,0),L=this._children,Z=[],z=null,ut=0;ut<L.length;ut++){var ot=L[ut],ht=ot.getBoundingRect(),tt=ot.getLocalTransform(Z);tt?(A.copy(ht),A.applyTransform(tt),z=z||A.clone(),z.union(A)):(z=z||ht.clone(),z.union(ht))}this._rect=z||A}return this._rect},T.prototype.setDefaultTextStyle=function(A){this._defaultStyle=A||at},T.prototype.setTextContent=function(A){},T.prototype._mergeStyle=function(A,L){if(!L)return A;var Z=L.rich,z=A.rich||Z&&{};return(0,dt.l7)(A,L),Z&&z?(this._mergeRich(z,Z),A.rich=z):z&&(A.rich=z),A},T.prototype._mergeRich=function(A,L){for(var Z=(0,dt.XP)(L),z=0;z<Z.length;z++){var ut=Z[z];A[ut]=A[ut]||{},(0,dt.l7)(A[ut],L[ut])}},T.prototype.getAnimationStyleProps=function(){return U},T.prototype._getOrCreateChild=function(A){var L=this._children[this._childCursor];return(!L||!(L instanceof A))&&(L=new A),this._children[this._childCursor++]=L,L.__zr=this.__zr,L.parent=this,L},T.prototype._updatePlainTexts=function(){var A=this.style,L=A.font||J.Uo,Z=A.padding,z=D(A),ut=(0,ct.NY)(z,A),ot=C(A),ht=!!A.backgroundColor,tt=ut.outerHeight,ft=ut.outerWidth,St=ut.contentWidth,st=ut.lines,xt=ut.lineHeight,wt=this._defaultStyle,Dt=A.x||0,It=A.y||0,Et=A.align||wt.align||"left",zt=A.verticalAlign||wt.verticalAlign||"top",Bt=Dt,Ht=(0,gt.mU)(It,ut.contentHeight,zt);if(ot||Z){var $t=(0,gt.M3)(Dt,ft,Et),ee=(0,gt.mU)(It,tt,zt);ot&&this._renderBackground(A,A,$t,ee,ft,tt)}Ht+=xt/2,Z&&(Bt=I(Dt,Et,Z),zt==="top"?Ht+=Z[0]:zt==="bottom"&&(Ht-=Z[2]));for(var De=0,Se=!1,Be=V("fill"in A?A.fill:(Se=!0,wt.fill)),Ft=k("stroke"in A?A.stroke:!ht&&(!wt.autoStroke||Se)?(De=G,wt.stroke):null),Tt=A.textShadowBlur>0,At=A.width!=null&&(A.overflow==="truncate"||A.overflow==="break"||A.overflow==="breakAll"),Kt=ut.calculatedLineHeight,pe=0;pe<st.length;pe++){var Oe=this._getOrCreateChild(K.Z),Pe=Oe.createStyle();Oe.useStyle(Pe),Pe.text=st[pe],Pe.x=Bt,Pe.y=Ht,Et&&(Pe.textAlign=Et),Pe.textBaseline="middle",Pe.opacity=A.opacity,Pe.strokeFirst=!0,Tt&&(Pe.shadowBlur=A.textShadowBlur||0,Pe.shadowColor=A.textShadowColor||"transparent",Pe.shadowOffsetX=A.textShadowOffsetX||0,Pe.shadowOffsetY=A.textShadowOffsetY||0),Pe.stroke=Ft,Pe.fill=Be,Ft&&(Pe.lineWidth=A.lineWidth||De,Pe.lineDash=A.lineDash,Pe.lineDashOffset=A.lineDashOffset||0),Pe.font=L,$(Pe,A),Ht+=xt,At&&Oe.setBoundingRect(new et.Z((0,gt.M3)(Pe.x,A.width,Pe.textAlign),(0,gt.mU)(Pe.y,Kt,Pe.textBaseline),St,Kt))}},T.prototype._updateRichTexts=function(){var A=this.style,L=D(A),Z=(0,ct.$F)(L,A),z=Z.width,ut=Z.outerWidth,ot=Z.outerHeight,ht=A.padding,tt=A.x||0,ft=A.y||0,St=this._defaultStyle,st=A.align||St.align,xt=A.verticalAlign||St.verticalAlign,wt=(0,gt.M3)(tt,ut,st),Dt=(0,gt.mU)(ft,ot,xt),It=wt,Et=Dt;ht&&(It+=ht[3],Et+=ht[0]);var zt=It+z;C(A)&&this._renderBackground(A,A,wt,Dt,ut,ot);for(var Bt=!!A.backgroundColor,Ht=0;Ht<Z.lines.length;Ht++){for(var $t=Z.lines[Ht],ee=$t.tokens,De=ee.length,Se=$t.lineHeight,Be=$t.width,Ft=0,Tt=It,At=zt,Kt=De-1,pe=void 0;Ft<De&&(pe=ee[Ft],!pe.align||pe.align==="left");)this._placeToken(pe,A,Se,Et,Tt,"left",Bt),Be-=pe.width,Tt+=pe.width,Ft++;for(;Kt>=0&&(pe=ee[Kt],pe.align==="right");)this._placeToken(pe,A,Se,Et,At,"right",Bt),Be-=pe.width,At-=pe.width,Kt--;for(Tt+=(z-(Tt-It)-(zt-At)-Be)/2;Ft<=Kt;)pe=ee[Ft],this._placeToken(pe,A,Se,Et,Tt+pe.width/2,"center",Bt),Tt+=pe.width,Ft++;Et+=Se}},T.prototype._placeToken=function(A,L,Z,z,ut,ot,ht){var tt=L.rich[A.styleName]||{};tt.text=A.text;var ft=A.verticalAlign,St=z+Z/2;ft==="top"?St=z+A.height/2:ft==="bottom"&&(St=z+Z-A.height/2);var st=!A.isLineHolder&&C(tt);st&&this._renderBackground(tt,L,ot==="right"?ut-A.width:ot==="center"?ut-A.width/2:ut,St-A.height/2,A.width,A.height);var xt=!!tt.backgroundColor,wt=A.textPadding;wt&&(ut=I(ut,ot,wt),St-=A.height/2-wt[0]-A.innerHeight/2);var Dt=this._getOrCreateChild(K.Z),It=Dt.createStyle();Dt.useStyle(It);var Et=this._defaultStyle,zt=!1,Bt=0,Ht=V("fill"in tt?tt.fill:"fill"in L?L.fill:(zt=!0,Et.fill)),$t=k("stroke"in tt?tt.stroke:"stroke"in L?L.stroke:!xt&&!ht&&(!Et.autoStroke||zt)?(Bt=G,Et.stroke):null),ee=tt.textShadowBlur>0||L.textShadowBlur>0;It.text=A.text,It.x=ut,It.y=St,ee&&(It.shadowBlur=tt.textShadowBlur||L.textShadowBlur||0,It.shadowColor=tt.textShadowColor||L.textShadowColor||"transparent",It.shadowOffsetX=tt.textShadowOffsetX||L.textShadowOffsetX||0,It.shadowOffsetY=tt.textShadowOffsetY||L.textShadowOffsetY||0),It.textAlign=ot,It.textBaseline="middle",It.font=A.font||J.Uo,It.opacity=(0,dt.R1)(tt.opacity,L.opacity,1),$(It,tt),$t&&(It.lineWidth=(0,dt.R1)(tt.lineWidth,L.lineWidth,Bt),It.lineDash=(0,dt.pD)(tt.lineDash,L.lineDash),It.lineDashOffset=L.lineDashOffset||0,It.stroke=$t),Ht&&(It.fill=Ht);var De=A.contentWidth,Se=A.contentHeight;Dt.setBoundingRect(new et.Z((0,gt.M3)(It.x,De,It.textAlign),(0,gt.mU)(It.y,Se,It.textBaseline),De,Se))},T.prototype._renderBackground=function(A,L,Z,z,ut,ot){var ht=A.backgroundColor,tt=A.borderWidth,ft=A.borderColor,St=ht&&ht.image,st=ht&&!St,xt=A.borderRadius,wt=this,Dt,It;if(st||A.lineHeight||tt&&ft){Dt=this._getOrCreateChild(it.Z),Dt.useStyle(Dt.createStyle()),Dt.style.fill=null;var Et=Dt.shape;Et.x=Z,Et.y=z,Et.width=ut,Et.height=ot,Et.r=xt,Dt.dirtyShape()}if(st){var zt=Dt.style;zt.fill=ht||null,zt.fillOpacity=(0,dt.pD)(A.fillOpacity,1)}else if(St){It=this._getOrCreateChild(vt.ZP),It.onload=function(){wt.dirtyStyle()};var Bt=It.style;Bt.image=ht.image,Bt.x=Z,Bt.y=z,Bt.width=ut,Bt.height=ot}if(tt&&ft){var zt=Dt.style;zt.lineWidth=tt,zt.stroke=ft,zt.strokeOpacity=(0,dt.pD)(A.strokeOpacity,1),zt.lineDash=A.borderDash,zt.lineDashOffset=A.borderDashOffset||0,Dt.strokeContainThreshold=0,Dt.hasFill()&&Dt.hasStroke()&&(zt.strokeFirst=!0,zt.lineWidth*=2)}var Ht=(Dt||It).style;Ht.shadowBlur=A.shadowBlur||0,Ht.shadowColor=A.shadowColor||"transparent",Ht.shadowOffsetX=A.shadowOffsetX||0,Ht.shadowOffsetY=A.shadowOffsetY||0,Ht.opacity=(0,dt.R1)(A.opacity,L.opacity,1)},T.makeFont=function(A){var L="";return O(A)&&(L=[A.fontStyle,A.fontWeight,rt(A.fontSize),A.fontFamily||"sans-serif"].join(" ")),L&&(0,dt.fy)(L)||A.textFont||A.font},T}(H.ZP),lt={left:!0,right:1,center:1},g={top:1,bottom:1,middle:1},j=["fontStyle","fontWeight","fontSize","fontFamily"];function rt(M){return typeof M=="string"&&(M.indexOf("px")!==-1||M.indexOf("rem")!==-1||M.indexOf("em")!==-1)?M:isNaN(+M)?J.n5+"px":M+"px"}function $(M,T){for(var A=0;A<j.length;A++){var L=j[A],Z=T[L];Z!=null&&(M[L]=Z)}}function O(M){return M.fontSize!=null||M.fontFamily||M.fontWeight}function X(M){return Q(M),(0,dt.S6)(M.rich,Q),M}function Q(M){if(M){M.font=W.makeFont(M);var T=M.align;T==="middle"&&(T="center"),M.align=T==null||lt[T]?T:"left";var A=M.verticalAlign;A==="center"&&(A="middle"),M.verticalAlign=A==null||g[A]?A:"top";var L=M.padding;L&&(M.padding=(0,dt.MY)(M.padding))}}function k(M,T){return M==null||T<=0||M==="transparent"||M==="none"?null:M.image||M.colorStops?"#000":M}function V(M){return M==null||M==="none"?null:M.image||M.colorStops?"#000":M}function I(M,T,A){return T==="right"?M-A[1]:T==="center"?M+A[3]/2-A[1]/2:M+A[3]}function D(M){var T=M.text;return T!=null&&(T+=""),T}function C(M){return!!(M.backgroundColor||M.lineHeight||M.borderWidth&&M.borderColor)}Jt.ZP=W},14414:function(Ce,Jt,F){"use strict";F.d(Jt,{RH:function(){return K},SE:function(){return ct},YV:function(){return N}});var N=1,ct=2,K=4},8007:function(Ce,Jt,F){"use strict";F.d(Jt,{Gq:function(){return gt},ko:function(){return dt},v5:function(){return it}});var N=F(92528),ct=F(23132),K=new N.ZP(50);function dt(et){if(typeof et=="string"){var H=K.get(et);return H&&H.image}else return et}function gt(et,H,J,at,G){if(et)if(typeof et=="string"){if(H&&H.__zrImageSrc===et||!J)return H;var U=K.get(et),W={hostEl:J,cb:at,cbPayload:G};return U?(H=U.image,!it(H)&&U.pending.push(W)):(H=ct.qW.loadImage(et,vt,vt),H.__zrImageSrc=et,K.put(et,H.__cachedImgObj={image:H,pending:[W]})),H}else return et;else return H}function vt(){var et=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var H=0;H<et.pending.length;H++){var J=et.pending[H],at=J.cb;at&&at(this,J.cbPayload),J.hostEl.dirty()}et.pending.length=0}function it(et){return et&&et.width&&et.height}},66918:function(Ce,Jt,F){"use strict";F.d(Jt,{$F:function(){return U},NY:function(){return H},aF:function(){return gt}});var N=F(8007),ct=F(33051),K=F(80423),dt=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function gt($,O,X,Q,k){if(!O)return"";var V=($+"").split(`
`);k=vt(O,X,Q,k);for(var I=0,D=V.length;I<D;I++)V[I]=it(V[I],k);return V.join(`
`)}function vt($,O,X,Q){Q=Q||{};var k=(0,ct.l7)({},Q);k.font=O,X=(0,ct.pD)(X,"..."),k.maxIterations=(0,ct.pD)(Q.maxIterations,2);var V=k.minChar=(0,ct.pD)(Q.minChar,0);k.cnCharWidth=(0,K.dz)("\u56FD",O);var I=k.ascCharWidth=(0,K.dz)("a",O);k.placeholder=(0,ct.pD)(Q.placeholder,"");for(var D=$=Math.max(0,$-1),C=0;C<V&&D>=I;C++)D-=I;var M=(0,K.dz)(X,O);return M>D&&(X="",M=0),D=$-M,k.ellipsis=X,k.ellipsisWidth=M,k.contentWidth=D,k.containerWidth=$,k}function it($,O){var X=O.containerWidth,Q=O.font,k=O.contentWidth;if(!X)return"";var V=(0,K.dz)($,Q);if(V<=X)return $;for(var I=0;;I++){if(V<=k||I>=O.maxIterations){$+=O.ellipsis;break}var D=I===0?et($,k,O.ascCharWidth,O.cnCharWidth):V>0?Math.floor($.length*k/V):0;$=$.substr(0,D),V=(0,K.dz)($,Q)}return $===""&&($=O.placeholder),$}function et($,O,X,Q){for(var k=0,V=0,I=$.length;V<I&&k<O;V++){var D=$.charCodeAt(V);k+=0<=D&&D<=127?X:Q}return V}function H($,O){$!=null&&($+="");var X=O.overflow,Q=O.padding,k=O.font,V=X==="truncate",I=(0,K.Dp)(k),D=(0,ct.pD)(O.lineHeight,I),C=!!O.backgroundColor,M=O.lineOverflow==="truncate",T=O.width,A;T!=null&&(X==="break"||X==="breakAll")?A=$?rt($,O.font,T,X==="breakAll",0).lines:[]:A=$?$.split(`
`):[];var L=A.length*D,Z=(0,ct.pD)(O.height,L);if(L>Z&&M){var z=Math.floor(Z/D);A=A.slice(0,z)}if($&&V&&T!=null)for(var ut=vt(T,k,O.ellipsis,{minChar:O.truncateMinChar,placeholder:O.placeholder}),ot=0;ot<A.length;ot++)A[ot]=it(A[ot],ut);for(var ht=Z,tt=0,ot=0;ot<A.length;ot++)tt=Math.max((0,K.dz)(A[ot],k),tt);T==null&&(T=tt);var ft=tt;return Q&&(ht+=Q[0]+Q[2],ft+=Q[1]+Q[3],T+=Q[1]+Q[3]),C&&(ft=T),{lines:A,height:Z,outerWidth:ft,outerHeight:ht,lineHeight:D,calculatedLineHeight:I,contentWidth:tt,contentHeight:L,width:T}}var J=function(){function $(){}return $}(),at=function(){function $(O){this.tokens=[],O&&(this.tokens=O)}return $}(),G=function(){function $(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return $}();function U($,O){var X=new G;if($!=null&&($+=""),!$)return X;for(var Q=O.width,k=O.height,V=O.overflow,I=(V==="break"||V==="breakAll")&&Q!=null?{width:Q,accumWidth:0,breakAll:V==="breakAll"}:null,D=dt.lastIndex=0,C;(C=dt.exec($))!=null;){var M=C.index;M>D&&W(X,$.substring(D,M),O,I),W(X,C[2],O,I,C[1]),D=dt.lastIndex}D<$.length&&W(X,$.substring(D,$.length),O,I);var T=[],A=0,L=0,Z=O.padding,z=V==="truncate",ut=O.lineOverflow==="truncate";function ot(Be,Ft,Tt){Be.width=Ft,Be.lineHeight=Tt,A+=Tt,L=Math.max(L,Ft)}t:for(var ht=0;ht<X.lines.length;ht++){for(var tt=X.lines[ht],ft=0,St=0,st=0;st<tt.tokens.length;st++){var xt=tt.tokens[st],wt=xt.styleName&&O.rich[xt.styleName]||{},Dt=xt.textPadding=wt.padding,It=Dt?Dt[1]+Dt[3]:0,Et=xt.font=wt.font||O.font;xt.contentHeight=(0,K.Dp)(Et);var zt=(0,ct.pD)(wt.height,xt.contentHeight);if(xt.innerHeight=zt,Dt&&(zt+=Dt[0]+Dt[2]),xt.height=zt,xt.lineHeight=(0,ct.R1)(wt.lineHeight,O.lineHeight,zt),xt.align=wt&&wt.align||O.align,xt.verticalAlign=wt&&wt.verticalAlign||"middle",ut&&k!=null&&A+xt.lineHeight>k){st>0?(tt.tokens=tt.tokens.slice(0,st),ot(tt,St,ft),X.lines=X.lines.slice(0,ht+1)):X.lines=X.lines.slice(0,ht);break t}var Bt=wt.width,Ht=Bt==null||Bt==="auto";if(typeof Bt=="string"&&Bt.charAt(Bt.length-1)==="%")xt.percentWidth=Bt,T.push(xt),xt.contentWidth=(0,K.dz)(xt.text,Et);else{if(Ht){var $t=wt.backgroundColor,ee=$t&&$t.image;ee&&(ee=N.ko(ee),N.v5(ee)&&(xt.width=Math.max(xt.width,ee.width*zt/ee.height)))}var De=z&&Q!=null?Q-St:null;De!=null&&De<xt.width?!Ht||De<It?(xt.text="",xt.width=xt.contentWidth=0):(xt.text=gt(xt.text,De-It,Et,O.ellipsis,{minChar:O.truncateMinChar}),xt.width=xt.contentWidth=(0,K.dz)(xt.text,Et)):xt.contentWidth=(0,K.dz)(xt.text,Et)}xt.width+=It,St+=xt.width,wt&&(ft=Math.max(ft,xt.lineHeight))}ot(tt,St,ft)}X.outerWidth=X.width=(0,ct.pD)(Q,L),X.outerHeight=X.height=(0,ct.pD)(k,A),X.contentHeight=A,X.contentWidth=L,Z&&(X.outerWidth+=Z[1]+Z[3],X.outerHeight+=Z[0]+Z[2]);for(var ht=0;ht<T.length;ht++){var xt=T[ht],Se=xt.percentWidth;xt.width=parseInt(Se,10)/100*X.width}return X}function W($,O,X,Q,k){var V=O==="",I=k&&X.rich[k]||{},D=$.lines,C=I.font||X.font,M=!1,T,A;if(Q){var L=I.padding,Z=L?L[1]+L[3]:0;if(I.width!=null&&I.width!=="auto"){var z=(0,K.GM)(I.width,Q.width)+Z;D.length>0&&z+Q.accumWidth>Q.width&&(T=O.split(`
`),M=!0),Q.accumWidth=z}else{var ut=rt(O,C,Q.width,Q.breakAll,Q.accumWidth);Q.accumWidth=ut.accumWidth+Z,A=ut.linesWidths,T=ut.lines}}else T=O.split(`
`);for(var ot=0;ot<T.length;ot++){var ht=T[ot],tt=new J;if(tt.styleName=k,tt.text=ht,tt.isLineHolder=!ht&&!V,typeof I.width=="number"?tt.width=I.width:tt.width=A?A[ot]:(0,K.dz)(ht,C),!ot&&!M){var ft=(D[D.length-1]||(D[0]=new at)).tokens,St=ft.length;St===1&&ft[0].isLineHolder?ft[0]=tt:(ht||!St||V)&&ft.push(tt)}else D.push(new at([tt]))}}function lt($){var O=$.charCodeAt(0);return O>=33&&O<=383}var g=(0,ct.u4)(",&?/;] ".split(""),function($,O){return $[O]=!0,$},{});function j($){return lt($)?!!g[$]:!0}function rt($,O,X,Q,k){for(var V=[],I=[],D="",C="",M=0,T=0,A=0;A<$.length;A++){var L=$.charAt(A);if(L===`
`){C&&(D+=C,T+=M),V.push(D),I.push(T),D="",C="",M=0,T=0;continue}var Z=(0,K.dz)(L,O),z=Q?!1:!j(L);if(V.length?T+Z>X:k+T+Z>X){T?(D||C)&&(z?(D||(D=C,C="",M=0,T=M),V.push(D),I.push(T-M),C+=L,M+=Z,D="",T=M):(C&&(D+=C,C="",M=0),V.push(D),I.push(T),D=L,T=Z)):z?(V.push(C),I.push(M),C=L,M=Z):(V.push(L),I.push(Z));continue}T+=Z,z?(C+=L,M+=Z):(C&&(D+=C,C="",M=0),D+=L)}return!V.length&&!D&&(D=$,C="",M=0),C&&(D+=C),D&&(V.push(D),I.push(T)),V.length===1&&(T+=k),{accumWidth:T,lines:V,linesWidths:I}}},40924:function(Ce,Jt,F){"use strict";F.d(Jt,{L:function(){return K}});var N=F(45280);function ct(dt,gt,vt,it){var et=[],H=[],J=[],at=[],G,U,W,lt;if(it){W=[1/0,1/0],lt=[-1/0,-1/0];for(var g=0,j=dt.length;g<j;g++)(0,N.VV)(W,W,dt[g]),(0,N.Fp)(lt,lt,dt[g]);(0,N.VV)(W,W,it[0]),(0,N.Fp)(lt,lt,it[1])}for(var g=0,j=dt.length;g<j;g++){var rt=dt[g];if(vt)G=dt[g?g-1:j-1],U=dt[(g+1)%j];else if(g===0||g===j-1){et.push((0,N.d9)(dt[g]));continue}else G=dt[g-1],U=dt[g+1];(0,N.lu)(H,U,G),(0,N.bA)(H,H,gt);var $=(0,N.TE)(rt,G),O=(0,N.TE)(rt,U),X=$+O;X!==0&&($/=X,O/=X),(0,N.bA)(J,H,-$),(0,N.bA)(at,H,O);var Q=(0,N.IH)([],rt,J),k=(0,N.IH)([],rt,at);it&&((0,N.Fp)(Q,Q,W),(0,N.VV)(Q,Q,lt),(0,N.Fp)(k,k,W),(0,N.VV)(k,k,lt)),et.push(Q),et.push(k)}return vt&&et.push(et.shift()),et}function K(dt,gt,vt){var it=gt.smooth,et=gt.points;if(et&&et.length>=2){if(it){var H=ct(et,it,vt,gt.smoothConstraint);dt.moveTo(et[0][0],et[0][1]);for(var J=et.length,at=0;at<(vt?J:J-1);at++){var G=H[at*2],U=H[at*2+1],W=et[(at+1)%J];dt.bezierCurveTo(G[0],G[1],U[0],U[1],W[0],W[1])}}else{dt.moveTo(et[0][0],et[0][1]);for(var at=1,lt=et.length;at<lt;at++)dt.lineTo(et[at][0],et[at][1])}vt&&dt.closePath()}}},24111:function(Ce,Jt,F){"use strict";F.d(Jt,{Pw:function(){return K},_3:function(){return ct},vu:function(){return dt}});var N=Math.round;function ct(gt,vt,it){if(!!vt){var et=vt.x1,H=vt.x2,J=vt.y1,at=vt.y2;gt.x1=et,gt.x2=H,gt.y1=J,gt.y2=at;var G=it&&it.lineWidth;return G&&(N(et*2)===N(H*2)&&(gt.x1=gt.x2=dt(et,G,!0)),N(J*2)===N(at*2)&&(gt.y1=gt.y2=dt(J,G,!0))),gt}}function K(gt,vt,it){if(!!vt){var et=vt.x,H=vt.y,J=vt.width,at=vt.height;gt.x=et,gt.y=H,gt.width=J,gt.height=at;var G=it&&it.lineWidth;return G&&(gt.x=dt(et,G,!0),gt.y=dt(H,G,!0),gt.width=Math.max(dt(et+J,G,!1)-gt.x,J===0?0:1),gt.height=Math.max(dt(H+at,G,!1)-gt.y,at===0?0:1)),gt}}function dt(gt,vt,it){if(!vt)return gt;var et=N(gt*2);return(et+N(vt))%2===0?et/2:(et+(it?1:-1))/2}},14826:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=function(){function gt(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return gt}(),dt=function(gt){(0,N.ZT)(vt,gt);function vt(it){return gt.call(this,it)||this}return vt.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},vt.prototype.getDefaultShape=function(){return new K},vt.prototype.buildPath=function(it,et){var H=et.cx,J=et.cy,at=Math.max(et.r,0),G=et.startAngle,U=et.endAngle,W=et.clockwise,lt=Math.cos(G),g=Math.sin(G);it.moveTo(lt*at+H,g*at+J),it.arc(H,J,at,G,U,!W)},vt}(ct.ZP);dt.prototype.type="arc",Jt.Z=dt},54174:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=F(45280),dt=F(29023),gt=[],vt=function(){function H(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return H}();function it(H,J,at){var G=H.cpx2,U=H.cpy2;return G!=null||U!=null?[(at?dt.X_:dt.af)(H.x1,H.cpx1,H.cpx2,H.x2,J),(at?dt.X_:dt.af)(H.y1,H.cpy1,H.cpy2,H.y2,J)]:[(at?dt.AZ:dt.Zm)(H.x1,H.cpx1,H.x2,J),(at?dt.AZ:dt.Zm)(H.y1,H.cpy1,H.y2,J)]}var et=function(H){(0,N.ZT)(J,H);function J(at){return H.call(this,at)||this}return J.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},J.prototype.getDefaultShape=function(){return new vt},J.prototype.buildPath=function(at,G){var U=G.x1,W=G.y1,lt=G.x2,g=G.y2,j=G.cpx1,rt=G.cpy1,$=G.cpx2,O=G.cpy2,X=G.percent;X!==0&&(at.moveTo(U,W),$==null||O==null?(X<1&&((0,dt.Lx)(U,j,lt,X,gt),j=gt[1],lt=gt[2],(0,dt.Lx)(W,rt,g,X,gt),rt=gt[1],g=gt[2]),at.quadraticCurveTo(j,rt,lt,g)):(X<1&&((0,dt.Vz)(U,j,$,lt,X,gt),j=gt[1],$=gt[2],lt=gt[3],(0,dt.Vz)(W,rt,O,g,X,gt),rt=gt[1],O=gt[2],g=gt[3]),at.bezierCurveTo(j,rt,$,O,lt,g)))},J.prototype.pointAt=function(at){return it(this.shape,at,!1)},J.prototype.tangentAt=function(at){var G=it(this.shape,at,!0);return K.Fv(G,G)},J}(ct.ZP);et.prototype.type="bezier-curve",Jt.Z=et},69538:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=function(){function gt(){this.cx=0,this.cy=0,this.r=0}return gt}(),dt=function(gt){(0,N.ZT)(vt,gt);function vt(it){return gt.call(this,it)||this}return vt.prototype.getDefaultShape=function(){return new K},vt.prototype.buildPath=function(it,et){it.moveTo(et.cx+et.r,et.cy),it.arc(et.cx,et.cy,et.r,0,Math.PI*2)},vt}(ct.ZP);dt.prototype.type="circle",Jt.Z=dt},92797:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=function(){function gt(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return gt}(),dt=function(gt){(0,N.ZT)(vt,gt);function vt(it){return gt.call(this,it)||this}return vt.prototype.getDefaultShape=function(){return new K},vt.prototype.buildPath=function(it,et){var H=.5522848,J=et.cx,at=et.cy,G=et.rx,U=et.ry,W=G*H,lt=U*H;it.moveTo(J-G,at),it.bezierCurveTo(J-G,at-lt,J-W,at-U,J,at-U),it.bezierCurveTo(J+W,at-U,J+G,at-lt,J+G,at),it.bezierCurveTo(J+G,at+lt,J+W,at+U,J,at+U),it.bezierCurveTo(J-W,at+U,J-G,at+lt,J-G,at),it.closePath()},vt}(ct.ZP);dt.prototype.type="ellipse",Jt.Z=dt},22095:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=F(24111),dt={},gt=function(){function it(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return it}(),vt=function(it){(0,N.ZT)(et,it);function et(H){return it.call(this,H)||this}return et.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},et.prototype.getDefaultShape=function(){return new gt},et.prototype.buildPath=function(H,J){var at,G,U,W;if(this.subPixelOptimize){var lt=(0,K._3)(dt,J,this.style);at=lt.x1,G=lt.y1,U=lt.x2,W=lt.y2}else at=J.x1,G=J.y1,U=J.x2,W=J.y2;var g=J.percent;g!==0&&(H.moveTo(at,G),g<1&&(U=at*(1-g)+U*g,W=G*(1-g)+W*g),H.lineTo(U,W))},et.prototype.pointAt=function(H){var J=this.shape;return[J.x1*(1-H)+J.x2*H,J.y1*(1-H)+J.y2*H]},et}(ct.ZP);vt.prototype.type="line",Jt.Z=vt},95094:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=F(40924),dt=function(){function vt(){this.points=null,this.smooth=0,this.smoothConstraint=null}return vt}(),gt=function(vt){(0,N.ZT)(it,vt);function it(et){return vt.call(this,et)||this}return it.prototype.getDefaultShape=function(){return new dt},it.prototype.buildPath=function(et,H){K.L(et,H,!0)},it}(ct.ZP);gt.prototype.type="polygon",Jt.Z=gt},62514:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=F(40924),dt=function(){function vt(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return vt}(),gt=function(vt){(0,N.ZT)(it,vt);function it(et){return vt.call(this,et)||this}return it.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},it.prototype.getDefaultShape=function(){return new dt},it.prototype.buildPath=function(et,H){K.L(et,H,!1)},it}(ct.ZP);gt.prototype.type="polyline",Jt.Z=gt},35151:function(Ce,Jt,F){"use strict";F.d(Jt,{Z:function(){return et}});var N=F(70655),ct=F(327);function K(H,J){var at=J.x,G=J.y,U=J.width,W=J.height,lt=J.r,g,j,rt,$;U<0&&(at=at+U,U=-U),W<0&&(G=G+W,W=-W),typeof lt=="number"?g=j=rt=$=lt:lt instanceof Array?lt.length===1?g=j=rt=$=lt[0]:lt.length===2?(g=rt=lt[0],j=$=lt[1]):lt.length===3?(g=lt[0],j=$=lt[1],rt=lt[2]):(g=lt[0],j=lt[1],rt=lt[2],$=lt[3]):g=j=rt=$=0;var O;g+j>U&&(O=g+j,g*=U/O,j*=U/O),rt+$>U&&(O=rt+$,rt*=U/O,$*=U/O),j+rt>W&&(O=j+rt,j*=W/O,rt*=W/O),g+$>W&&(O=g+$,g*=W/O,$*=W/O),H.moveTo(at+g,G),H.lineTo(at+U-j,G),j!==0&&H.arc(at+U-j,G+j,j,-Math.PI/2,0),H.lineTo(at+U,G+W-rt),rt!==0&&H.arc(at+U-rt,G+W-rt,rt,0,Math.PI/2),H.lineTo(at+$,G+W),$!==0&&H.arc(at+$,G+W-$,$,Math.PI/2,Math.PI),H.lineTo(at,G+g),g!==0&&H.arc(at+g,G+g,g,Math.PI,Math.PI*1.5)}var dt=F(24111),gt=function(){function H(){this.x=0,this.y=0,this.width=0,this.height=0}return H}(),vt={},it=function(H){(0,N.ZT)(J,H);function J(at){return H.call(this,at)||this}return J.prototype.getDefaultShape=function(){return new gt},J.prototype.buildPath=function(at,G){var U,W,lt,g;if(this.subPixelOptimize){var j=(0,dt.Pw)(vt,G,this.style);U=j.x,W=j.y,lt=j.width,g=j.height,j.r=G.r,G=j}else U=G.x,W=G.y,lt=G.width,g=G.height;G.r?K(at,G):at.rect(U,W,lt,g)},J.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},J}(ct.ZP);it.prototype.type="rect";var et=it},85795:function(Ce,Jt,F){"use strict";var N=F(70655),ct=F(327),K=function(){function gt(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return gt}(),dt=function(gt){(0,N.ZT)(vt,gt);function vt(it){return gt.call(this,it)||this}return vt.prototype.getDefaultShape=function(){return new K},vt.prototype.buildPath=function(it,et){var H=et.cx,J=et.cy,at=Math.PI*2;it.moveTo(H+et.r,J),it.arc(H,J,et.r,0,at,!1),it.moveTo(H+et.r0,J),it.arc(H,J,et.r0,0,at,!0)},vt}(ct.ZP);dt.prototype.type="ring",Jt.Z=dt},27214:function(Ce,Jt,F){"use strict";F.d(Jt,{C:function(){return X}});var N=F(70655),ct=F(327),K=F(33051),dt=Math.PI,gt=dt*2,vt=Math.sin,it=Math.cos,et=Math.acos,H=Math.atan2,J=Math.abs,at=Math.sqrt,G=Math.max,U=Math.min,W=1e-4;function lt(Q,k,V,I,D,C,M,T){var A=V-Q,L=I-k,Z=M-D,z=T-C,ut=z*A-Z*L;if(!(ut*ut<W))return ut=(Z*(k-C)-z*(Q-D))/ut,[Q+ut*A,k+ut*L]}function g(Q,k,V,I,D,C,M){var T=Q-V,A=k-I,L=(M?C:-C)/at(T*T+A*A),Z=L*A,z=-L*T,ut=Q+Z,ot=k+z,ht=V+Z,tt=I+z,ft=(ut+ht)/2,St=(ot+tt)/2,st=ht-ut,xt=tt-ot,wt=st*st+xt*xt,Dt=D-C,It=ut*tt-ht*ot,Et=(xt<0?-1:1)*at(G(0,Dt*Dt*wt-It*It)),zt=(It*xt-st*Et)/wt,Bt=(-It*st-xt*Et)/wt,Ht=(It*xt+st*Et)/wt,$t=(-It*st+xt*Et)/wt,ee=zt-ft,De=Bt-St,Se=Ht-ft,Be=$t-St;return ee*ee+De*De>Se*Se+Be*Be&&(zt=Ht,Bt=$t),{cx:zt,cy:Bt,x0:-Z,y0:-z,x1:zt*(D/Dt-1),y1:Bt*(D/Dt-1)}}function j(Q){var k;if((0,K.kJ)(Q)){var V=Q.length;if(!V)return Q;V===1?k=[Q[0],Q[0],0,0]:V===2?k=[Q[0],Q[0],Q[1],Q[1]]:V===3?k=Q.concat(Q[2]):k=Q}else k=[Q,Q,Q,Q];return k}function rt(Q,k){var V,I=G(k.r,0),D=G(k.r0||0,0),C=I>0,M=D>0;if(!(!C&&!M)){if(C||(I=D,D=0),D>I){var T=I;I=D,D=T}var A=k.startAngle,L=k.endAngle;if(!(isNaN(A)||isNaN(L))){var Z=k.cx,z=k.cy,ut=!!k.clockwise,ot=J(L-A),ht=ot>gt&&ot%gt;if(ht>W&&(ot=ht),!(I>W))Q.moveTo(Z,z);else if(ot>gt-W)Q.moveTo(Z+I*it(A),z+I*vt(A)),Q.arc(Z,z,I,A,L,!ut),D>W&&(Q.moveTo(Z+D*it(L),z+D*vt(L)),Q.arc(Z,z,D,L,A,ut));else{var tt=void 0,ft=void 0,St=void 0,st=void 0,xt=void 0,wt=void 0,Dt=void 0,It=void 0,Et=void 0,zt=void 0,Bt=void 0,Ht=void 0,$t=void 0,ee=void 0,De=void 0,Se=void 0,Be=I*it(A),Ft=I*vt(A),Tt=D*it(L),At=D*vt(L),Kt=ot>W;if(Kt){var pe=k.cornerRadius;pe&&(V=j(pe),tt=V[0],ft=V[1],St=V[2],st=V[3]);var Oe=J(I-D)/2;if(xt=U(Oe,St),wt=U(Oe,st),Dt=U(Oe,tt),It=U(Oe,ft),Bt=Et=G(xt,wt),Ht=zt=G(Dt,It),(Et>W||zt>W)&&($t=I*it(L),ee=I*vt(L),De=D*it(A),Se=D*vt(A),ot<dt)){var Pe=lt(Be,Ft,De,Se,$t,ee,Tt,At);if(Pe){var vr=Be-Pe[0],Lr=Ft-Pe[1],nr=$t-Pe[0],qe=ee-Pe[1],lr=1/vt(et((vr*nr+Lr*qe)/(at(vr*vr+Lr*Lr)*at(nr*nr+qe*qe)))/2),Yt=at(Pe[0]*Pe[0]+Pe[1]*Pe[1]);Bt=U(Et,(I-Yt)/(lr+1)),Ht=U(zt,(D-Yt)/(lr-1))}}}if(!Kt)Q.moveTo(Z+Be,z+Ft);else if(Bt>W){var le=U(St,Bt),we=U(st,Bt),_e=g(De,Se,Be,Ft,I,le,ut),Ut=g($t,ee,Tt,At,I,we,ut);Q.moveTo(Z+_e.cx+_e.x0,z+_e.cy+_e.y0),Bt<Et&&le===we?Q.arc(Z+_e.cx,z+_e.cy,Bt,H(_e.y0,_e.x0),H(Ut.y0,Ut.x0),!ut):(le>0&&Q.arc(Z+_e.cx,z+_e.cy,le,H(_e.y0,_e.x0),H(_e.y1,_e.x1),!ut),Q.arc(Z,z,I,H(_e.cy+_e.y1,_e.cx+_e.x1),H(Ut.cy+Ut.y1,Ut.cx+Ut.x1),!ut),we>0&&Q.arc(Z+Ut.cx,z+Ut.cy,we,H(Ut.y1,Ut.x1),H(Ut.y0,Ut.x0),!ut))}else Q.moveTo(Z+Be,z+Ft),Q.arc(Z,z,I,A,L,!ut);if(!(D>W)||!Kt)Q.lineTo(Z+Tt,z+At);else if(Ht>W){var le=U(tt,Ht),we=U(ft,Ht),_e=g(Tt,At,$t,ee,D,-we,ut),Ut=g(Be,Ft,De,Se,D,-le,ut);Q.lineTo(Z+_e.cx+_e.x0,z+_e.cy+_e.y0),Ht<zt&&le===we?Q.arc(Z+_e.cx,z+_e.cy,Ht,H(_e.y0,_e.x0),H(Ut.y0,Ut.x0),!ut):(we>0&&Q.arc(Z+_e.cx,z+_e.cy,we,H(_e.y0,_e.x0),H(_e.y1,_e.x1),!ut),Q.arc(Z,z,D,H(_e.cy+_e.y1,_e.cx+_e.x1),H(Ut.cy+Ut.y1,Ut.cx+Ut.x1),ut),le>0&&Q.arc(Z+Ut.cx,z+Ut.cy,le,H(Ut.y1,Ut.x1),H(Ut.y0,Ut.x0),!ut))}else Q.lineTo(Z+Tt,z+At),Q.arc(Z,z,D,L,A,ut)}Q.closePath()}}}var $=function(){function Q(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return Q}(),O=function(Q){(0,N.ZT)(k,Q);function k(V){return Q.call(this,V)||this}return k.prototype.getDefaultShape=function(){return new $},k.prototype.buildPath=function(V,I){rt(V,I)},k.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},k}(ct.ZP);O.prototype.type="sector";var X=O},24839:function(Ce,Jt,F){"use strict";F.d(Jt,{Cv:function(){return rt},Gk:function(){return I},H3:function(){return k},I1:function(){return X},Pn:function(){return J},R:function(){return O},gA:function(){return D},gO:function(){return Q},i2:function(){return lt},jY:function(){return U},m1:function(){return V},mU:function(){return W},n1:function(){return g},oF:function(){return C},qV:function(){return G},ut:function(){return vt},zT:function(){return et}});var N=F(33051),ct=F(21092),K=F(66387),dt=F(48764).Buffer,gt=Math.round;function vt(M){var T;if(!M||M==="transparent")M="none";else if(typeof M=="string"&&M.indexOf("rgba")>-1){var A=(0,ct.parse)(M);A&&(M="rgb("+A[0]+","+A[1]+","+A[2]+")",T=A[3])}return{color:M,opacity:T??1}}var it=1e-4;function et(M){return M<it&&M>-it}function H(M){return gt(M*1e3)/1e3}function J(M){return gt(M*1e4)/1e4}function at(M){return gt(M*10)/10}function G(M){return"matrix("+H(M[0])+","+H(M[1])+","+H(M[2])+","+H(M[3])+","+J(M[4])+","+J(M[5])+")"}var U={left:"start",right:"end",center:"middle",middle:"middle"};function W(M,T,A){return A==="top"?M+=T/2:A==="bottom"&&(M-=T/2),M}function lt(M){return M&&(M.shadowBlur||M.shadowOffsetX||M.shadowOffsetY)}function g(M){var T=M.style,A=M.getGlobalScale();return[T.shadowColor,(T.shadowBlur||0).toFixed(2),(T.shadowOffsetX||0).toFixed(2),(T.shadowOffsetY||0).toFixed(2),A[0],A[1]].join(",")}function j(M){var T=[];if(M)for(var A=0;A<M.length;A++){var L=M[A];T.push(L.id)}return T.join(",")}function rt(M){return M&&!!M.image}function $(M){return M&&!!M.svgElement}function O(M){return rt(M)||$(M)}function X(M){return M.type==="linear"}function Q(M){return M.type==="radial"}function k(M){return M&&(M.type==="linear"||M.type==="radial")}function V(M){return"url(#"+M+")"}function I(M){var T=M.getGlobalScale(),A=Math.max(T[0],T[1]);return Math.max(Math.ceil(Math.log(A)/Math.log(10)),1)}function D(M){var T=M.x||0,A=M.y||0,L=(M.rotation||0)*N.I3,Z=(0,N.pD)(M.scaleX,1),z=(0,N.pD)(M.scaleY,1),ut=M.skewX||0,ot=M.skewY||0,ht=[];return(T||A)&&ht.push("translate("+T+"px,"+A+"px)"),L&&ht.push("rotate("+L+")"),(Z!==1||z!==1)&&ht.push("scale("+Z+","+z+")"),(ut||ot)&&ht.push("skew("+gt(ut*N.I3)+"deg, "+gt(ot*N.I3)+"deg)"),ht.join(" ")}var C=function(){return K.Z.hasGlobalWindow&&(0,N.mf)(window.btoa)?function(M){return window.btoa(unescape(M))}:typeof dt<"u"?function(M){return dt.from(M).toString("base64")}:function(M){return null}}()},21092:function(Ce,Jt,F){"use strict";F.r(Jt),F.d(Jt,{fastLerp:function(){return O},fastMapToColor:function(){return X},lerp:function(){return Q},lift:function(){return rt},lum:function(){return C},mapToColor:function(){return k},modifyAlpha:function(){return I},modifyHSL:function(){return V},parse:function(){return lt},random:function(){return M},stringify:function(){return D},toHex:function(){return $}});var N=F(92528),ct={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function K(T){return T=Math.round(T),T<0?0:T>255?255:T}function dt(T){return T=Math.round(T),T<0?0:T>360?360:T}function gt(T){return T<0?0:T>1?1:T}function vt(T){var A=T;return A.length&&A.charAt(A.length-1)==="%"?K(parseFloat(A)/100*255):K(parseInt(A,10))}function it(T){var A=T;return A.length&&A.charAt(A.length-1)==="%"?gt(parseFloat(A)/100):gt(parseFloat(A))}function et(T,A,L){return L<0?L+=1:L>1&&(L-=1),L*6<1?T+(A-T)*L*6:L*2<1?A:L*3<2?T+(A-T)*(2/3-L)*6:T}function H(T,A,L){return T+(A-T)*L}function J(T,A,L,Z,z){return T[0]=A,T[1]=L,T[2]=Z,T[3]=z,T}function at(T,A){return T[0]=A[0],T[1]=A[1],T[2]=A[2],T[3]=A[3],T}var G=new N.ZP(20),U=null;function W(T,A){U&&at(U,A),U=G.put(T,U||A.slice())}function lt(T,A){if(!!T){A=A||[];var L=G.get(T);if(L)return at(A,L);T=T+"";var Z=T.replace(/ /g,"").toLowerCase();if(Z in ct)return at(A,ct[Z]),W(T,A),A;var z=Z.length;if(Z.charAt(0)==="#"){if(z===4||z===5){var ut=parseInt(Z.slice(1,4),16);if(!(ut>=0&&ut<=4095)){J(A,0,0,0,1);return}return J(A,(ut&3840)>>4|(ut&3840)>>8,ut&240|(ut&240)>>4,ut&15|(ut&15)<<4,z===5?parseInt(Z.slice(4),16)/15:1),W(T,A),A}else if(z===7||z===9){var ut=parseInt(Z.slice(1,7),16);if(!(ut>=0&&ut<=16777215)){J(A,0,0,0,1);return}return J(A,(ut&16711680)>>16,(ut&65280)>>8,ut&255,z===9?parseInt(Z.slice(7),16)/255:1),W(T,A),A}return}var ot=Z.indexOf("("),ht=Z.indexOf(")");if(ot!==-1&&ht+1===z){var tt=Z.substr(0,ot),ft=Z.substr(ot+1,ht-(ot+1)).split(","),St=1;switch(tt){case"rgba":if(ft.length!==4)return ft.length===3?J(A,+ft[0],+ft[1],+ft[2],1):J(A,0,0,0,1);St=it(ft.pop());case"rgb":if(ft.length!==3){J(A,0,0,0,1);return}return J(A,vt(ft[0]),vt(ft[1]),vt(ft[2]),St),W(T,A),A;case"hsla":if(ft.length!==4){J(A,0,0,0,1);return}return ft[3]=it(ft[3]),g(ft,A),W(T,A),A;case"hsl":if(ft.length!==3){J(A,0,0,0,1);return}return g(ft,A),W(T,A),A;default:return}}J(A,0,0,0,1)}}function g(T,A){var L=(parseFloat(T[0])%360+360)%360/360,Z=it(T[1]),z=it(T[2]),ut=z<=.5?z*(Z+1):z+Z-z*Z,ot=z*2-ut;return A=A||[],J(A,K(et(ot,ut,L+1/3)*255),K(et(ot,ut,L)*255),K(et(ot,ut,L-1/3)*255),1),T.length===4&&(A[3]=T[3]),A}function j(T){if(!!T){var A=T[0]/255,L=T[1]/255,Z=T[2]/255,z=Math.min(A,L,Z),ut=Math.max(A,L,Z),ot=ut-z,ht=(ut+z)/2,tt,ft;if(ot===0)tt=0,ft=0;else{ht<.5?ft=ot/(ut+z):ft=ot/(2-ut-z);var St=((ut-A)/6+ot/2)/ot,st=((ut-L)/6+ot/2)/ot,xt=((ut-Z)/6+ot/2)/ot;A===ut?tt=xt-st:L===ut?tt=1/3+St-xt:Z===ut&&(tt=2/3+st-St),tt<0&&(tt+=1),tt>1&&(tt-=1)}var wt=[tt*360,ft,ht];return T[3]!=null&&wt.push(T[3]),wt}}function rt(T,A){var L=lt(T);if(L){for(var Z=0;Z<3;Z++)A<0?L[Z]=L[Z]*(1-A)|0:L[Z]=(255-L[Z])*A+L[Z]|0,L[Z]>255?L[Z]=255:L[Z]<0&&(L[Z]=0);return D(L,L.length===4?"rgba":"rgb")}}function $(T){var A=lt(T);if(A)return((1<<24)+(A[0]<<16)+(A[1]<<8)+ +A[2]).toString(16).slice(1)}function O(T,A,L){if(!(!(A&&A.length)||!(T>=0&&T<=1))){L=L||[];var Z=T*(A.length-1),z=Math.floor(Z),ut=Math.ceil(Z),ot=A[z],ht=A[ut],tt=Z-z;return L[0]=K(H(ot[0],ht[0],tt)),L[1]=K(H(ot[1],ht[1],tt)),L[2]=K(H(ot[2],ht[2],tt)),L[3]=gt(H(ot[3],ht[3],tt)),L}}var X=O;function Q(T,A,L){if(!(!(A&&A.length)||!(T>=0&&T<=1))){var Z=T*(A.length-1),z=Math.floor(Z),ut=Math.ceil(Z),ot=lt(A[z]),ht=lt(A[ut]),tt=Z-z,ft=D([K(H(ot[0],ht[0],tt)),K(H(ot[1],ht[1],tt)),K(H(ot[2],ht[2],tt)),gt(H(ot[3],ht[3],tt))],"rgba");return L?{color:ft,leftIndex:z,rightIndex:ut,value:Z}:ft}}var k=Q;function V(T,A,L,Z){var z=lt(T);if(T)return z=j(z),A!=null&&(z[0]=dt(A)),L!=null&&(z[1]=it(L)),Z!=null&&(z[2]=it(Z)),D(g(z),"rgba")}function I(T,A){var L=lt(T);if(L&&A!=null)return L[3]=gt(A),D(L,"rgba")}function D(T,A){if(!(!T||!T.length)){var L=T[0]+","+T[1]+","+T[2];return(A==="rgba"||A==="hsva"||A==="hsla")&&(L+=","+T[3]),A+"("+L+")"}}function C(T,A){var L=lt(T);return L?(.299*L[0]+.587*L[1]+.114*L[2])*L[3]/255+(1-L[3])*A:0}function M(){return D([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}},7494:function(Ce,Jt,F){"use strict";F.d(Jt,{U5:function(){return M},iR:function(){return I},Pc:function(){return D},AA:function(){return C}});var N=F(70655),ct=F(327),K=F(14014),dt=F(45280),gt=K.Z.CMD,vt=[[],[],[]],it=Math.sqrt,et=Math.atan2;function H(T,A){if(!!A){var L=T.data,Z=T.len(),z,ut,ot,ht,tt,ft,St=gt.M,st=gt.C,xt=gt.L,wt=gt.R,Dt=gt.A,It=gt.Q;for(ot=0,ht=0;ot<Z;){switch(z=L[ot++],ht=ot,ut=0,z){case St:ut=1;break;case xt:ut=1;break;case st:ut=3;break;case It:ut=2;break;case Dt:var Et=A[4],zt=A[5],Bt=it(A[0]*A[0]+A[1]*A[1]),Ht=it(A[2]*A[2]+A[3]*A[3]),$t=et(-A[1]/Ht,A[0]/Bt);L[ot]*=Bt,L[ot++]+=Et,L[ot]*=Ht,L[ot++]+=zt,L[ot++]*=Bt,L[ot++]*=Ht,L[ot++]+=$t,L[ot++]+=$t,ot+=2,ht=ot;break;case wt:ft[0]=L[ot++],ft[1]=L[ot++],(0,dt.Ne)(ft,ft,A),L[ht++]=ft[0],L[ht++]=ft[1],ft[0]+=L[ot++],ft[1]+=L[ot++],(0,dt.Ne)(ft,ft,A),L[ht++]=ft[0],L[ht++]=ft[1]}for(tt=0;tt<ut;tt++){var ee=vt[tt];ee[0]=L[ot++],ee[1]=L[ot++],(0,dt.Ne)(ee,ee,A),L[ht++]=ee[0],L[ht++]=ee[1]}}T.increaseVersion()}}var J=F(33051),at=Math.sqrt,G=Math.sin,U=Math.cos,W=Math.PI;function lt(T){return Math.sqrt(T[0]*T[0]+T[1]*T[1])}function g(T,A){return(T[0]*A[0]+T[1]*A[1])/(lt(T)*lt(A))}function j(T,A){return(T[0]*A[1]<T[1]*A[0]?-1:1)*Math.acos(g(T,A))}function rt(T,A,L,Z,z,ut,ot,ht,tt,ft,St){var st=tt*(W/180),xt=U(st)*(T-L)/2+G(st)*(A-Z)/2,wt=-1*G(st)*(T-L)/2+U(st)*(A-Z)/2,Dt=xt*xt/(ot*ot)+wt*wt/(ht*ht);Dt>1&&(ot*=at(Dt),ht*=at(Dt));var It=(z===ut?-1:1)*at((ot*ot*(ht*ht)-ot*ot*(wt*wt)-ht*ht*(xt*xt))/(ot*ot*(wt*wt)+ht*ht*(xt*xt)))||0,Et=It*ot*wt/ht,zt=It*-ht*xt/ot,Bt=(T+L)/2+U(st)*Et-G(st)*zt,Ht=(A+Z)/2+G(st)*Et+U(st)*zt,$t=j([1,0],[(xt-Et)/ot,(wt-zt)/ht]),ee=[(xt-Et)/ot,(wt-zt)/ht],De=[(-1*xt-Et)/ot,(-1*wt-zt)/ht],Se=j(ee,De);if(g(ee,De)<=-1&&(Se=W),g(ee,De)>=1&&(Se=0),Se<0){var Be=Math.round(Se/W*1e6)/1e6;Se=W*2+Be%2*W}St.addData(ft,Bt,Ht,ot,ht,$t,Se,st,ut)}var $=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,O=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function X(T){var A=new K.Z;if(!T)return A;var L=0,Z=0,z=L,ut=Z,ot,ht=K.Z.CMD,tt=T.match($);if(!tt)return A;for(var ft=0;ft<tt.length;ft++){for(var St=tt[ft],st=St.charAt(0),xt=void 0,wt=St.match(O)||[],Dt=wt.length,It=0;It<Dt;It++)wt[It]=parseFloat(wt[It]);for(var Et=0;Et<Dt;){var zt=void 0,Bt=void 0,Ht=void 0,$t=void 0,ee=void 0,De=void 0,Se=void 0,Be=L,Ft=Z,Tt=void 0,At=void 0;switch(st){case"l":L+=wt[Et++],Z+=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"L":L=wt[Et++],Z=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"m":L+=wt[Et++],Z+=wt[Et++],xt=ht.M,A.addData(xt,L,Z),z=L,ut=Z,st="l";break;case"M":L=wt[Et++],Z=wt[Et++],xt=ht.M,A.addData(xt,L,Z),z=L,ut=Z,st="L";break;case"h":L+=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"H":L=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"v":Z+=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"V":Z=wt[Et++],xt=ht.L,A.addData(xt,L,Z);break;case"C":xt=ht.C,A.addData(xt,wt[Et++],wt[Et++],wt[Et++],wt[Et++],wt[Et++],wt[Et++]),L=wt[Et-2],Z=wt[Et-1];break;case"c":xt=ht.C,A.addData(xt,wt[Et++]+L,wt[Et++]+Z,wt[Et++]+L,wt[Et++]+Z,wt[Et++]+L,wt[Et++]+Z),L+=wt[Et-2],Z+=wt[Et-1];break;case"S":zt=L,Bt=Z,Tt=A.len(),At=A.data,ot===ht.C&&(zt+=L-At[Tt-4],Bt+=Z-At[Tt-3]),xt=ht.C,Be=wt[Et++],Ft=wt[Et++],L=wt[Et++],Z=wt[Et++],A.addData(xt,zt,Bt,Be,Ft,L,Z);break;case"s":zt=L,Bt=Z,Tt=A.len(),At=A.data,ot===ht.C&&(zt+=L-At[Tt-4],Bt+=Z-At[Tt-3]),xt=ht.C,Be=L+wt[Et++],Ft=Z+wt[Et++],L+=wt[Et++],Z+=wt[Et++],A.addData(xt,zt,Bt,Be,Ft,L,Z);break;case"Q":Be=wt[Et++],Ft=wt[Et++],L=wt[Et++],Z=wt[Et++],xt=ht.Q,A.addData(xt,Be,Ft,L,Z);break;case"q":Be=wt[Et++]+L,Ft=wt[Et++]+Z,L+=wt[Et++],Z+=wt[Et++],xt=ht.Q,A.addData(xt,Be,Ft,L,Z);break;case"T":zt=L,Bt=Z,Tt=A.len(),At=A.data,ot===ht.Q&&(zt+=L-At[Tt-4],Bt+=Z-At[Tt-3]),L=wt[Et++],Z=wt[Et++],xt=ht.Q,A.addData(xt,zt,Bt,L,Z);break;case"t":zt=L,Bt=Z,Tt=A.len(),At=A.data,ot===ht.Q&&(zt+=L-At[Tt-4],Bt+=Z-At[Tt-3]),L+=wt[Et++],Z+=wt[Et++],xt=ht.Q,A.addData(xt,zt,Bt,L,Z);break;case"A":Ht=wt[Et++],$t=wt[Et++],ee=wt[Et++],De=wt[Et++],Se=wt[Et++],Be=L,Ft=Z,L=wt[Et++],Z=wt[Et++],xt=ht.A,rt(Be,Ft,L,Z,De,Se,Ht,$t,ee,xt,A);break;case"a":Ht=wt[Et++],$t=wt[Et++],ee=wt[Et++],De=wt[Et++],Se=wt[Et++],Be=L,Ft=Z,L+=wt[Et++],Z+=wt[Et++],xt=ht.A,rt(Be,Ft,L,Z,De,Se,Ht,$t,ee,xt,A);break}}(st==="z"||st==="Z")&&(xt=ht.Z,A.addData(xt),L=z,Z=ut),ot=xt}return A.toStatic(),A}var Q=function(T){(0,N.ZT)(A,T);function A(){return T!==null&&T.apply(this,arguments)||this}return A.prototype.applyTransform=function(L){},A}(ct.ZP);function k(T){return T.setData!=null}function V(T,A){var L=X(T),Z=(0,J.l7)({},A);return Z.buildPath=function(z){if(k(z)){z.setData(L.data);var ut=z.getContext();ut&&z.rebuildPath(ut,1)}else{var ut=z;L.rebuildPath(ut,1)}},Z.applyTransform=function(z){H(L,z),this.dirtyShape()},Z}function I(T,A){return new Q(V(T,A))}function D(T,A){var L=V(T,A),Z=function(z){(0,N.ZT)(ut,z);function ut(ot){var ht=z.call(this,ot)||this;return ht.applyTransform=L.applyTransform,ht.buildPath=L.buildPath,ht}return ut}(Q);return Z}function C(T,A){for(var L=[],Z=T.length,z=0;z<Z;z++){var ut=T[z];L.push(ut.getUpdatedPathProxy(!0))}var ot=new ct.ZP(A);return ot.createPathProxy(),ot.buildPath=function(ht){if(k(ht)){ht.appendPath(L);var tt=ht.getContext();tt&&ht.rebuildPath(tt,1)}},ot}function M(T,A){A=A||{};var L=new ct.ZP;return T.shape&&L.setShape(T.shape),L.setStyle(T.style),A.bakeTransform?H(L.path,T.getComputedTransform()):A.toLocal?L.setLocalTransform(T.getComputedTransform()):L.copyTransform(T),L.buildPath=T.buildPath,L.applyTransform=L.applyTransform,L.z=T.z,L.z2=T.z2,L.zlevel=T.zlevel,L}},99448:function(Ce,Jt,F){"use strict";F.r(Jt),F.d(Jt,{dispose:function(){return lr},disposeAll:function(){return Yt},getInstance:function(){return le},init:function(){return qe},registerPainter:function(){return we},version:function(){return _e}});var N=F(66387),ct=F(33051),K=F(70655),dt=F(45280),gt=function(){function Ut(Qt,ie){this.target=Qt,this.topTarget=ie&&ie.topTarget}return Ut}(),vt=function(){function Ut(Qt){this.handler=Qt,Qt.on("mousedown",this._dragStart,this),Qt.on("mousemove",this._drag,this),Qt.on("mouseup",this._dragEnd,this)}return Ut.prototype._dragStart=function(Qt){for(var ie=Qt.target;ie&&!ie.draggable;)ie=ie.parent||ie.__hostTarget;ie&&(this._draggingTarget=ie,ie.dragging=!0,this._x=Qt.offsetX,this._y=Qt.offsetY,this.handler.dispatchToElement(new gt(ie,Qt),"dragstart",Qt.event))},Ut.prototype._drag=function(Qt){var ie=this._draggingTarget;if(ie){var Ae=Qt.offsetX,He=Qt.offsetY,tr=Ae-this._x,ce=He-this._y;this._x=Ae,this._y=He,ie.drift(tr,ce,Qt),this.handler.dispatchToElement(new gt(ie,Qt),"drag",Qt.event);var Re=this.handler.findHover(Ae,He,ie).target,Le=this._dropTarget;this._dropTarget=Re,ie!==Re&&(Le&&Re!==Le&&this.handler.dispatchToElement(new gt(Le,Qt),"dragleave",Qt.event),Re&&Re!==Le&&this.handler.dispatchToElement(new gt(Re,Qt),"dragenter",Qt.event))}},Ut.prototype._dragEnd=function(Qt){var ie=this._draggingTarget;ie&&(ie.dragging=!1),this.handler.dispatchToElement(new gt(ie,Qt),"dragend",Qt.event),this._dropTarget&&this.handler.dispatchToElement(new gt(this._dropTarget,Qt),"drop",Qt.event),this._draggingTarget=null,this._dropTarget=null},Ut}(),it=vt,et=F(23510),H=F(61158),J=function(){function Ut(){this._track=[]}return Ut.prototype.recognize=function(Qt,ie,Ae){return this._doTrack(Qt,ie,Ae),this._recognize(Qt)},Ut.prototype.clear=function(){return this._track.length=0,this},Ut.prototype._doTrack=function(Qt,ie,Ae){var He=Qt.touches;if(!!He){for(var tr={points:[],touches:[],target:ie,event:Qt},ce=0,Re=He.length;ce<Re;ce++){var Le=He[ce],Ke=H.eV(Ae,Le,{});tr.points.push([Ke.zrX,Ke.zrY]),tr.touches.push(Le)}this._track.push(tr)}},Ut.prototype._recognize=function(Qt){for(var ie in U)if(U.hasOwnProperty(ie)){var Ae=U[ie](this._track,Qt);if(Ae)return Ae}},Ut}();function at(Ut){var Qt=Ut[1][0]-Ut[0][0],ie=Ut[1][1]-Ut[0][1];return Math.sqrt(Qt*Qt+ie*ie)}function G(Ut){return[(Ut[0][0]+Ut[1][0])/2,(Ut[0][1]+Ut[1][1])/2]}var U={pinch:function(Ut,Qt){var ie=Ut.length;if(!!ie){var Ae=(Ut[ie-1]||{}).points,He=(Ut[ie-2]||{}).points||Ae;if(He&&He.length>1&&Ae&&Ae.length>1){var tr=at(Ae)/at(He);!isFinite(tr)&&(tr=1),Qt.pinchScale=tr;var ce=G(Ae);return Qt.pinchX=ce[0],Qt.pinchY=ce[1],{type:"pinch",target:Ut[0].target,event:Qt}}}}},W="silent";function lt(Ut,Qt,ie){return{type:Ut,event:ie,target:Qt.target,topTarget:Qt.topTarget,cancelBubble:!1,offsetX:ie.zrX,offsetY:ie.zrY,gestureEvent:ie.gestureEvent,pinchX:ie.pinchX,pinchY:ie.pinchY,pinchScale:ie.pinchScale,wheelDelta:ie.zrDelta,zrByTouch:ie.zrByTouch,which:ie.which,stop:g}}function g(){H.sT(this.event)}var j=function(Ut){(0,K.ZT)(Qt,Ut);function Qt(){var ie=Ut!==null&&Ut.apply(this,arguments)||this;return ie.handler=null,ie}return Qt.prototype.dispose=function(){},Qt.prototype.setCursor=function(){},Qt}(et.Z),rt=function(){function Ut(Qt,ie){this.x=Qt,this.y=ie}return Ut}(),$=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],O=function(Ut){(0,K.ZT)(Qt,Ut);function Qt(ie,Ae,He,tr){var ce=Ut.call(this)||this;return ce._hovered=new rt(0,0),ce.storage=ie,ce.painter=Ae,ce.painterRoot=tr,He=He||new j,ce.proxy=null,ce.setHandlerProxy(He),ce._draggingMgr=new it(ce),ce}return Qt.prototype.setHandlerProxy=function(ie){this.proxy&&this.proxy.dispose(),ie&&(ct.S6($,function(Ae){ie.on&&ie.on(Ae,this[Ae],this)},this),ie.handler=this),this.proxy=ie},Qt.prototype.mousemove=function(ie){var Ae=ie.zrX,He=ie.zrY,tr=Q(this,Ae,He),ce=this._hovered,Re=ce.target;Re&&!Re.__zr&&(ce=this.findHover(ce.x,ce.y),Re=ce.target);var Le=this._hovered=tr?new rt(Ae,He):this.findHover(Ae,He),Ke=Le.target,Tr=this.proxy;Tr.setCursor&&Tr.setCursor(Ke?Ke.cursor:"default"),Re&&Ke!==Re&&this.dispatchToElement(ce,"mouseout",ie),this.dispatchToElement(Le,"mousemove",ie),Ke&&Ke!==Re&&this.dispatchToElement(Le,"mouseover",ie)},Qt.prototype.mouseout=function(ie){var Ae=ie.zrEventControl;Ae!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",ie),Ae!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:ie})},Qt.prototype.resize=function(){this._hovered=new rt(0,0)},Qt.prototype.dispatch=function(ie,Ae){var He=this[ie];He&&He.call(this,Ae)},Qt.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},Qt.prototype.setCursorStyle=function(ie){var Ae=this.proxy;Ae.setCursor&&Ae.setCursor(ie)},Qt.prototype.dispatchToElement=function(ie,Ae,He){ie=ie||{};var tr=ie.target;if(!(tr&&tr.silent)){for(var ce="on"+Ae,Re=lt(Ae,ie,He);tr&&(tr[ce]&&(Re.cancelBubble=!!tr[ce].call(tr,Re)),tr.trigger(Ae,Re),tr=tr.__hostTarget?tr.__hostTarget:tr.parent,!Re.cancelBubble););Re.cancelBubble||(this.trigger(Ae,Re),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(Le){typeof Le[ce]=="function"&&Le[ce].call(Le,Re),Le.trigger&&Le.trigger(Ae,Re)}))}},Qt.prototype.findHover=function(ie,Ae,He){for(var tr=this.storage.getDisplayList(),ce=new rt(ie,Ae),Re=tr.length-1;Re>=0;Re--){var Le=void 0;if(tr[Re]!==He&&!tr[Re].ignore&&(Le=X(tr[Re],ie,Ae))&&(!ce.topTarget&&(ce.topTarget=tr[Re]),Le!==W)){ce.target=tr[Re];break}}return ce},Qt.prototype.processGesture=function(ie,Ae){this._gestureMgr||(this._gestureMgr=new J);var He=this._gestureMgr;Ae==="start"&&He.clear();var tr=He.recognize(ie,this.findHover(ie.zrX,ie.zrY,null).target,this.proxy.dom);if(Ae==="end"&&He.clear(),tr){var ce=tr.type;ie.gestureEvent=ce;var Re=new rt;Re.target=tr.target,this.dispatchToElement(Re,ce,tr.event)}},Qt}(et.Z);ct.S6(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(Ut){O.prototype[Ut]=function(Qt){var ie=Qt.zrX,Ae=Qt.zrY,He=Q(this,ie,Ae),tr,ce;if((Ut!=="mouseup"||!He)&&(tr=this.findHover(ie,Ae),ce=tr.target),Ut==="mousedown")this._downEl=ce,this._downPoint=[Qt.zrX,Qt.zrY],this._upEl=ce;else if(Ut==="mouseup")this._upEl=ce;else if(Ut==="click"){if(this._downEl!==this._upEl||!this._downPoint||dt.TK(this._downPoint,[Qt.zrX,Qt.zrY])>4)return;this._downPoint=null}this.dispatchToElement(tr,Ut,Qt)}});function X(Ut,Qt,ie){if(Ut[Ut.rectHover?"rectContain":"contain"](Qt,ie)){for(var Ae=Ut,He=void 0,tr=!1;Ae;){if(Ae.ignoreClip&&(tr=!0),!tr){var ce=Ae.getClipPath();if(ce&&!ce.contain(Qt,ie))return!1;Ae.silent&&(He=!0)}var Re=Ae.__hostTarget;Ae=Re||Ae.parent}return He?W:!0}return!1}function Q(Ut,Qt,ie){var Ae=Ut.painter;return Qt<0||Qt>Ae.getWidth()||ie<0||ie>Ae.getHeight()}var k=O,V=F(19455),I=F(14414),D=!1;function C(){D||(D=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function M(Ut,Qt){return Ut.zlevel===Qt.zlevel?Ut.z===Qt.z?Ut.z2-Qt.z2:Ut.z-Qt.z:Ut.zlevel-Qt.zlevel}var T=function(){function Ut(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=M}return Ut.prototype.traverse=function(Qt,ie){for(var Ae=0;Ae<this._roots.length;Ae++)this._roots[Ae].traverse(Qt,ie)},Ut.prototype.getDisplayList=function(Qt,ie){ie=ie||!1;var Ae=this._displayList;return(Qt||!Ae.length)&&this.updateDisplayList(ie),Ae},Ut.prototype.updateDisplayList=function(Qt){this._displayListLen=0;for(var ie=this._roots,Ae=this._displayList,He=0,tr=ie.length;He<tr;He++)this._updateAndAddDisplayable(ie[He],null,Qt);Ae.length=this._displayListLen,(0,V.Z)(Ae,M)},Ut.prototype._updateAndAddDisplayable=function(Qt,ie,Ae){if(!(Qt.ignore&&!Ae)){Qt.beforeUpdate(),Qt.update(),Qt.afterUpdate();var He=Qt.getClipPath();if(Qt.ignoreClip)ie=null;else if(He){ie?ie=ie.slice():ie=[];for(var tr=He,ce=Qt;tr;)tr.parent=ce,tr.updateTransform(),ie.push(tr),ce=tr,tr=tr.getClipPath()}if(Qt.childrenRef){for(var Re=Qt.childrenRef(),Le=0;Le<Re.length;Le++){var Ke=Re[Le];Qt.__dirty&&(Ke.__dirty|=I.YV),this._updateAndAddDisplayable(Ke,ie,Ae)}Qt.__dirty=0}else{var Tr=Qt;ie&&ie.length?Tr.__clipPaths=ie:Tr.__clipPaths&&Tr.__clipPaths.length>0&&(Tr.__clipPaths=[]),isNaN(Tr.z)&&(C(),Tr.z=0),isNaN(Tr.z2)&&(C(),Tr.z2=0),isNaN(Tr.zlevel)&&(C(),Tr.zlevel=0),this._displayList[this._displayListLen++]=Tr}var Nr=Qt.getDecalElement&&Qt.getDecalElement();Nr&&this._updateAndAddDisplayable(Nr,ie,Ae);var Br=Qt.getTextGuideLine();Br&&this._updateAndAddDisplayable(Br,ie,Ae);var rn=Qt.getTextContent();rn&&this._updateAndAddDisplayable(rn,ie,Ae)}},Ut.prototype.addRoot=function(Qt){Qt.__zr&&Qt.__zr.storage===this||this._roots.push(Qt)},Ut.prototype.delRoot=function(Qt){if(Qt instanceof Array){for(var ie=0,Ae=Qt.length;ie<Ae;ie++)this.delRoot(Qt[ie]);return}var He=ct.cq(this._roots,Qt);He>=0&&this._roots.splice(He,1)},Ut.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},Ut.prototype.getRoots=function(){return this._roots},Ut.prototype.dispose=function(){this._displayList=null,this._roots=null},Ut}(),A=T,L=F(22795),Z=F(95622);function z(){return new Date().getTime()}var ut=function(Ut){(0,K.ZT)(Qt,Ut);function Qt(ie){var Ae=Ut.call(this)||this;return Ae._running=!1,Ae._time=0,Ae._pausedTime=0,Ae._pauseStart=0,Ae._paused=!1,ie=ie||{},Ae.stage=ie.stage||{},Ae}return Qt.prototype.addClip=function(ie){ie.animation&&this.removeClip(ie),this._head?(this._tail.next=ie,ie.prev=this._tail,ie.next=null,this._tail=ie):this._head=this._tail=ie,ie.animation=this},Qt.prototype.addAnimator=function(ie){ie.animation=this;var Ae=ie.getClip();Ae&&this.addClip(Ae)},Qt.prototype.removeClip=function(ie){if(!!ie.animation){var Ae=ie.prev,He=ie.next;Ae?Ae.next=He:this._head=He,He?He.prev=Ae:this._tail=Ae,ie.next=ie.prev=ie.animation=null}},Qt.prototype.removeAnimator=function(ie){var Ae=ie.getClip();Ae&&this.removeClip(Ae),ie.animation=null},Qt.prototype.update=function(ie){for(var Ae=z()-this._pausedTime,He=Ae-this._time,tr=this._head;tr;){var ce=tr.next,Re=tr.step(Ae,He);Re&&(tr.ondestroy(),this.removeClip(tr)),tr=ce}this._time=Ae,ie||(this.trigger("frame",He),this.stage.update&&this.stage.update())},Qt.prototype._startLoop=function(){var ie=this;this._running=!0;function Ae(){ie._running&&((0,L.Z)(Ae),!ie._paused&&ie.update())}(0,L.Z)(Ae)},Qt.prototype.start=function(){this._running||(this._time=z(),this._pausedTime=0,this._startLoop())},Qt.prototype.stop=function(){this._running=!1},Qt.prototype.pause=function(){this._paused||(this._pauseStart=z(),this._paused=!0)},Qt.prototype.resume=function(){this._paused&&(this._pausedTime+=z()-this._pauseStart,this._paused=!1)},Qt.prototype.clear=function(){for(var ie=this._head;ie;){var Ae=ie.next;ie.prev=ie.next=ie.animation=null,ie=Ae}this._head=this._tail=null},Qt.prototype.isFinished=function(){return this._head==null},Qt.prototype.animate=function(ie,Ae){Ae=Ae||{},this.start();var He=new Z.Z(ie,Ae.loop);return this.addAnimator(He),He},Qt}(et.Z),ot=ut,ht=300,tt=N.Z.domSupported,ft=function(){var Ut=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Qt=["touchstart","touchend","touchmove"],ie={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},Ae=ct.UI(Ut,function(He){var tr=He.replace("mouse","pointer");return ie.hasOwnProperty(tr)?tr:He});return{mouse:Ut,touch:Qt,pointer:Ae}}(),St={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},st=!1;function xt(Ut){var Qt=Ut.pointerType;return Qt==="pen"||Qt==="touch"}function wt(Ut){Ut.touching=!0,Ut.touchTimer!=null&&(clearTimeout(Ut.touchTimer),Ut.touchTimer=null),Ut.touchTimer=setTimeout(function(){Ut.touching=!1,Ut.touchTimer=null},700)}function Dt(Ut){Ut&&(Ut.zrByTouch=!0)}function It(Ut,Qt){return(0,H.OD)(Ut.dom,new zt(Ut,Qt),!0)}function Et(Ut,Qt){for(var ie=Qt,Ae=!1;ie&&ie.nodeType!==9&&!(Ae=ie.domBelongToZr||ie!==Qt&&ie===Ut.painterRoot);)ie=ie.parentNode;return Ae}var zt=function(){function Ut(Qt,ie){this.stopPropagation=ct.ZT,this.stopImmediatePropagation=ct.ZT,this.preventDefault=ct.ZT,this.type=ie.type,this.target=this.currentTarget=Qt.dom,this.pointerType=ie.pointerType,this.clientX=ie.clientX,this.clientY=ie.clientY}return Ut}(),Bt={mousedown:function(Ut){Ut=(0,H.OD)(this.dom,Ut),this.__mayPointerCapture=[Ut.zrX,Ut.zrY],this.trigger("mousedown",Ut)},mousemove:function(Ut){Ut=(0,H.OD)(this.dom,Ut);var Qt=this.__mayPointerCapture;Qt&&(Ut.zrX!==Qt[0]||Ut.zrY!==Qt[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",Ut)},mouseup:function(Ut){Ut=(0,H.OD)(this.dom,Ut),this.__togglePointerCapture(!1),this.trigger("mouseup",Ut)},mouseout:function(Ut){Ut=(0,H.OD)(this.dom,Ut);var Qt=Ut.toElement||Ut.relatedTarget;Et(this,Qt)||(this.__pointerCapturing&&(Ut.zrEventControl="no_globalout"),this.trigger("mouseout",Ut))},wheel:function(Ut){st=!0,Ut=(0,H.OD)(this.dom,Ut),this.trigger("mousewheel",Ut)},mousewheel:function(Ut){st||(Ut=(0,H.OD)(this.dom,Ut),this.trigger("mousewheel",Ut))},touchstart:function(Ut){Ut=(0,H.OD)(this.dom,Ut),Dt(Ut),this.__lastTouchMoment=new Date,this.handler.processGesture(Ut,"start"),Bt.mousemove.call(this,Ut),Bt.mousedown.call(this,Ut)},touchmove:function(Ut){Ut=(0,H.OD)(this.dom,Ut),Dt(Ut),this.handler.processGesture(Ut,"change"),Bt.mousemove.call(this,Ut)},touchend:function(Ut){Ut=(0,H.OD)(this.dom,Ut),Dt(Ut),this.handler.processGesture(Ut,"end"),Bt.mouseup.call(this,Ut),+new Date-+this.__lastTouchMoment<ht&&Bt.click.call(this,Ut)},pointerdown:function(Ut){Bt.mousedown.call(this,Ut)},pointermove:function(Ut){xt(Ut)||Bt.mousemove.call(this,Ut)},pointerup:function(Ut){Bt.mouseup.call(this,Ut)},pointerout:function(Ut){xt(Ut)||Bt.mouseout.call(this,Ut)}};ct.S6(["click","dblclick","contextmenu"],function(Ut){Bt[Ut]=function(Qt){Qt=(0,H.OD)(this.dom,Qt),this.trigger(Ut,Qt)}});var Ht={pointermove:function(Ut){xt(Ut)||Ht.mousemove.call(this,Ut)},pointerup:function(Ut){Ht.mouseup.call(this,Ut)},mousemove:function(Ut){this.trigger("mousemove",Ut)},mouseup:function(Ut){var Qt=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",Ut),Qt&&(Ut.zrEventControl="only_globalout",this.trigger("mouseout",Ut))}};function $t(Ut,Qt){var ie=Qt.domHandlers;N.Z.pointerEventsSupported?ct.S6(ft.pointer,function(Ae){De(Qt,Ae,function(He){ie[Ae].call(Ut,He)})}):(N.Z.touchEventsSupported&&ct.S6(ft.touch,function(Ae){De(Qt,Ae,function(He){ie[Ae].call(Ut,He),wt(Qt)})}),ct.S6(ft.mouse,function(Ae){De(Qt,Ae,function(He){He=(0,H.iP)(He),Qt.touching||ie[Ae].call(Ut,He)})}))}function ee(Ut,Qt){N.Z.pointerEventsSupported?ct.S6(St.pointer,ie):N.Z.touchEventsSupported||ct.S6(St.mouse,ie);function ie(Ae){function He(tr){tr=(0,H.iP)(tr),Et(Ut,tr.target)||(tr=It(Ut,tr),Qt.domHandlers[Ae].call(Ut,tr))}De(Qt,Ae,He,{capture:!0})}}function De(Ut,Qt,ie,Ae){Ut.mounted[Qt]=ie,Ut.listenerOpts[Qt]=Ae,(0,H.Oo)(Ut.domTarget,Qt,ie,Ae)}function Se(Ut){var Qt=Ut.mounted;for(var ie in Qt)Qt.hasOwnProperty(ie)&&(0,H.xg)(Ut.domTarget,ie,Qt[ie],Ut.listenerOpts[ie]);Ut.mounted={}}var Be=function(){function Ut(Qt,ie){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=Qt,this.domHandlers=ie}return Ut}(),Ft=function(Ut){(0,K.ZT)(Qt,Ut);function Qt(ie,Ae){var He=Ut.call(this)||this;return He.__pointerCapturing=!1,He.dom=ie,He.painterRoot=Ae,He._localHandlerScope=new Be(ie,Bt),tt&&(He._globalHandlerScope=new Be(document,Ht)),$t(He,He._localHandlerScope),He}return Qt.prototype.dispose=function(){Se(this._localHandlerScope),tt&&Se(this._globalHandlerScope)},Qt.prototype.setCursor=function(ie){this.dom.style&&(this.dom.style.cursor=ie||"default")},Qt.prototype.__togglePointerCapture=function(ie){if(this.__mayPointerCapture=null,tt&&+this.__pointerCapturing^+ie){this.__pointerCapturing=ie;var Ae=this._globalHandlerScope;ie?ee(this,Ae):Se(Ae)}},Qt}(et.Z),Tt=Ft,At=F(21092),Kt=F(4990),pe=F(38154);var Oe={},Pe={};function vr(Ut){delete Pe[Ut]}function Lr(Ut){if(!Ut)return!1;if(typeof Ut=="string")return(0,At.lum)(Ut,1)<Kt.Ak;if(Ut.colorStops){for(var Qt=Ut.colorStops,ie=0,Ae=Qt.length,He=0;He<Ae;He++)ie+=(0,At.lum)(Qt[He].color,1);return ie/=Ae,ie<Kt.Ak}return!1}var nr=function(){function Ut(Qt,ie,Ae){var He=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,Ae=Ae||{},this.dom=ie,this.id=Qt;var tr=new A,ce=Ae.renderer||"canvas";Oe[ce]||(ce=ct.XP(Oe)[0]),Ae.useDirtyRect=Ae.useDirtyRect==null?!1:Ae.useDirtyRect;var Re=new Oe[ce](ie,tr,Ae,Qt),Le=Ae.ssr||Re.ssrOnly;this.storage=tr,this.painter=Re;var Ke=!N.Z.node&&!N.Z.worker&&!Le?new Tt(Re.getViewportRoot(),Re.root):null;this.handler=new k(tr,Re,Ke,Re.root),this.animation=new ot({stage:{update:Le?null:function(){return He._flush(!0)}}}),Le||this.animation.start()}return Ut.prototype.add=function(Qt){!Qt||(this.storage.addRoot(Qt),Qt.addSelfToZr(this),this.refresh())},Ut.prototype.remove=function(Qt){!Qt||(this.storage.delRoot(Qt),Qt.removeSelfFromZr(this),this.refresh())},Ut.prototype.configLayer=function(Qt,ie){this.painter.configLayer&&this.painter.configLayer(Qt,ie),this.refresh()},Ut.prototype.setBackgroundColor=function(Qt){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(Qt),this.refresh(),this._backgroundColor=Qt,this._darkMode=Lr(Qt)},Ut.prototype.getBackgroundColor=function(){return this._backgroundColor},Ut.prototype.setDarkMode=function(Qt){this._darkMode=Qt},Ut.prototype.isDarkMode=function(){return this._darkMode},Ut.prototype.refreshImmediately=function(Qt){Qt||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},Ut.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},Ut.prototype.flush=function(){this._flush(!1)},Ut.prototype._flush=function(Qt){var ie,Ae=z();this._needsRefresh&&(ie=!0,this.refreshImmediately(Qt)),this._needsRefreshHover&&(ie=!0,this.refreshHoverImmediately());var He=z();ie?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:He-Ae})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},Ut.prototype.setSleepAfterStill=function(Qt){this._sleepAfterStill=Qt},Ut.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},Ut.prototype.refreshHover=function(){this._needsRefreshHover=!0},Ut.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},Ut.prototype.resize=function(Qt){Qt=Qt||{},this.painter.resize(Qt.width,Qt.height),this.handler.resize()},Ut.prototype.clearAnimation=function(){this.animation.clear()},Ut.prototype.getWidth=function(){return this.painter.getWidth()},Ut.prototype.getHeight=function(){return this.painter.getHeight()},Ut.prototype.setCursorStyle=function(Qt){this.handler.setCursorStyle(Qt)},Ut.prototype.findHover=function(Qt,ie){return this.handler.findHover(Qt,ie)},Ut.prototype.on=function(Qt,ie,Ae){return this.handler.on(Qt,ie,Ae),this},Ut.prototype.off=function(Qt,ie){this.handler.off(Qt,ie)},Ut.prototype.trigger=function(Qt,ie){this.handler.trigger(Qt,ie)},Ut.prototype.clear=function(){for(var Qt=this.storage.getRoots(),ie=0;ie<Qt.length;ie++)Qt[ie]instanceof pe.Z&&Qt[ie].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},Ut.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,vr(this.id)},Ut}();function qe(Ut,Qt){var ie=new nr(ct.M8(),Ut,Qt);return Pe[ie.id]=ie,ie}function lr(Ut){Ut.dispose()}function Yt(){for(var Ut in Pe)Pe.hasOwnProperty(Ut)&&Pe[Ut].dispose();Pe={}}function le(Ut){return Pe[Ut]}function we(Ut,Qt){Oe[Ut]=Qt}var _e="5.3.2"}}]);
